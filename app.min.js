var requirejs,require,define;!function(Z){function H(e){return"[object Function]"===L.call(e)}function I(e){return"[object Array]"===L.call(e)}function y(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function M(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function s(e,t){return ga.call(e,t)}function l(e,t){return s(e,t)&&e[t]}function F(e,t){for(var n in e)if(s(e,n)&&t(e[n],n))break}function Q(e,t,n,i){return t&&F(t,function(t,o){(n||!s(e,o))&&(i&&"string"!=typeof t?(e[o]||(e[o]={}),Q(e[o],t,n,i)):e[o]=t)}),e}function u(e,t){return function(){return t.apply(e,arguments)}}function aa(e){throw e}function ba(e){if(!e)return e;var t=Z;return y(e.split("."),function(e){t=t[e]}),t}function A(e,t,n,i){return t=Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e),t.requireType=e,t.requireModules=i,n&&(t.originalError=n),t}function ha(e){function t(e,t,n){var i,o,r,a,s,d,c,u=t&&t.split("/");i=u;var h=S.map,p=h&&h["*"];if(e&&"."===e.charAt(0))if(t){for(i=l(S.pkgs,t)?u=[t]:u.slice(0,u.length-1),t=e=i.concat(e.split("/")),i=0;t[i];i+=1)if(o=t[i],"."===o)t.splice(i,1),i-=1;else if(".."===o){if(1===i&&(".."===t[2]||".."===t[0]))break;i>0&&(t.splice(i-1,2),i-=2)}i=l(S.pkgs,t=e[0]),e=e.join("/"),i&&e===t+"/"+i.main&&(e=t)}else 0===e.indexOf("./")&&(e=e.substring(2));if(n&&h&&(u||p)){for(t=e.split("/"),i=t.length;i>0;i-=1){if(r=t.slice(0,i).join("/"),u)for(o=u.length;o>0;o-=1)if((n=l(h,u.slice(0,o).join("/")))&&(n=l(n,r))){a=n,s=i;break}if(a)break;!d&&p&&l(p,r)&&(d=l(p,r),c=i)}!a&&d&&(a=d,s=c),a&&(t.splice(0,s,a),e=t.join("/"))}return e}function n(e){z&&y(document.getElementsByTagName("script"),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===_.contextName?(t.parentNode.removeChild(t),!0):void 0})}function i(e){var t=l(S.paths,e);return t&&I(t)&&1<t.length?(n(e),t.shift(),_.require.undef(e),_.require([e]),!0):void 0}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function r(e,n,i,r){var a,s,d=null,c=n?n.name:null,u=e,h=!0,p="";return e||(h=!1,e="_@r"+(V+=1)),e=o(e),d=e[0],e=e[1],d&&(d=t(d,c,r),s=l(M,d)),e&&(d?p=s&&s.normalize?s.normalize(e,function(e){return t(e,c,r)}):t(e,c,r):(p=t(e,c,r),e=o(p),d=e[0],p=e[1],i=!0,a=_.nameToUrl(p))),i=!d||s||i?"":"_unnormalized"+(L+=1),{prefix:d,name:p,parentMap:n,unnormalized:!!i,url:a,originalName:u,isDefine:h,id:(d?d+"!"+p:p)+i}}function a(e){var t=e.id,n=l(T,t);return n||(n=T[t]=new _.Module(e)),n}function d(e,t,n){var i=e.id,o=l(T,i);!s(M,i)||o&&!o.defineEmitComplete?(o=a(e),o.error&&"error"===t?n(o.error):o.on(t,n)):"defined"===t&&n(M[i])}function c(e,t){var n=e.requireModules,i=!1;t?t(e):(y(n,function(t){(t=l(T,t))&&(t.error=e,t.events.error&&(i=!0,t.emit("error",e)))}),i||j.onError(e))}function h(){R.length&&(ia.apply(D,[D.length-1,0].concat(R)),R=[])}function p(e){delete T[e],delete k[e]}function g(e,t,n){var i=e.map.id;e.error?e.emit("error",e.error):(t[i]=!0,y(e.depMaps,function(i,o){var r=i.id,a=l(T,r);a&&!e.depMatched[o]&&!n[r]&&(l(t,r)?(e.defineDep(o,M[r]),e.check()):g(a,t,n))}),n[i]=!0)}function f(){var e,t,o,r,a=(o=1e3*S.waitSeconds)&&_.startTime+o<(new Date).getTime(),s=[],l=[],d=!1,u=!0;if(!w){if(w=!0,F(k,function(o){if(e=o.map,t=e.id,o.enabled&&(e.isDefine||l.push(o),!o.error))if(!o.inited&&a)i(t)?d=r=!0:(s.push(t),n(t));else if(!o.inited&&o.fetched&&e.isDefine&&(d=!0,!e.prefix))return u=!1}),a&&s.length)return o=A("timeout","Load timeout for modules: "+s,null,s),o.contextName=_.contextName,c(o);u&&y(l,function(e){g(e,{},{})}),a&&!r||!d||!z&&!da||x||(x=setTimeout(function(){x=0,f()},50)),w=!1}}function m(e){s(M,e[0])||a(r(e[0],null,!0)).init(e[1],e[2])}function v(e){var e=e.currentTarget||e.srcElement,t=_.onScriptLoad;return e.detachEvent&&!W?e.detachEvent("onreadystatechange",t):e.removeEventListener("load",t,!1),t=_.onScriptError,(!e.detachEvent||W)&&e.removeEventListener("error",t,!1),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function b(){var e;for(h();D.length;){if(e=D.shift(),null===e[0])return c(A("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));m(e)}}var w,N,_,C,x,S={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},T={},k={},$={},D=[],M={},E={},V=1,L=1;return C={require:function(e){return e.require?e.require:e.require=_.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?e.exports:e.exports=M[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){var t=l(S.pkgs,e.map.id);return(t?l(S.config,e.map.id+"/"+t.main):l(S.config,e.map.id))||{}},exports:M[e.map.id]}}},N=function(e){this.events=l($,e.id)||{},this.map=e,this.shim=l(S.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},N.prototype={init:function(e,t,n,i){i=i||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=u(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,_.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();_.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;E[e]||(E[e]=!0,_.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id;t=this.depExports;var i=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,1>this.depCount&&!this.defined){if(H(o)){if(this.events.error&&this.map.isDefine||j.onError!==aa)try{i=_.execCb(n,o,t,i)}catch(r){e=r}else i=_.execCb(n,o,t,i);if(this.map.isDefine&&((t=this.module)&&void 0!==t.exports&&t.exports!==this.exports?i=t.exports:void 0===i&&this.usingExports&&(i=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",c(this.error=e)}else i=o;this.exports=i,this.map.isDefine&&!this.ignore&&(M[n]=i,j.onResourceLoad)&&j.onResourceLoad(_,this.map,this.depMaps),p(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,n=e.id,i=r(e.prefix);this.depMaps.push(i),d(i,"defined",u(this,function(i){var o,h;h=this.map.name;var g=this.map.parentMap?this.map.parentMap.name:null,f=_.makeRequire(e.parentMap,{enableBuildCallback:!0});this.map.unnormalized?(i.normalize&&(h=i.normalize(h,function(e){return t(e,g,!0)})||""),i=r(e.prefix+"!"+h,this.map.parentMap),d(i,"defined",u(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),(h=l(T,i.id))&&(this.depMaps.push(i),this.events.error&&h.on("error",u(this,function(e){this.emit("error",e)})),h.enable())):(o=u(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),o.error=u(this,function(e){this.inited=!0,this.error=e,e.requireModules=[n],F(T,function(e){0===e.map.id.indexOf(n+"_unnormalized")&&p(e.map.id)}),c(e)}),o.fromText=u(this,function(t,i){var l=e.name,d=r(l),u=O;i&&(t=i),u&&(O=!1),a(d),s(S.config,n)&&(S.config[l]=S.config[n]);try{j.exec(t)}catch(h){return c(A("fromtexteval","fromText eval for "+n+" failed: "+h,h,[n]))}u&&(O=!0),this.depMaps.push(d),_.completeLoad(l),f([l],o)}),i.load(e.name,f,o,S))})),_.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){k[this.map.id]=this,this.enabling=this.enabled=!0,y(this.depMaps,u(this,function(e,t){var n,i;if("string"==typeof e){if(e=r(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,n=l(C,e.id))return void(this.depExports[t]=n(this));this.depCount+=1,d(e,"defined",u(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&d(e,"error",u(this,this.errback))}n=e.id,i=T[n],!s(C,n)&&i&&!i.enabled&&_.enable(e,this)})),F(this.pluginMaps,u(this,function(e){var t=l(T,e.id);t&&!t.enabled&&_.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){y(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},_={config:S,contextName:e,registry:T,defined:M,urlFetched:E,defQueue:D,Module:N,makeModuleMap:r,nextTick:j.nextTick,onError:c,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=S.pkgs,n=S.shim,i={paths:!0,config:!0,map:!0};F(e,function(e,t){i[t]?"map"===t?(S.map||(S.map={}),Q(S[t],e,!0,!0)):Q(S[t],e,!0):S[t]=e}),e.shim&&(F(e.shim,function(e,t){I(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=_.makeShimExports(e)),n[t]=e}),S.shim=n),e.packages&&(y(e.packages,function(e){e="string"==typeof e?{name:e}:e,t[e.name]={name:e.name,location:e.location||e.name,main:(e.main||"main").replace(ja,"").replace(ea,"")}}),S.pkgs=t),F(T,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=r(t))}),(e.deps||e.callback)&&_.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(Z,arguments)),t||e.exports&&ba(e.exports)}},makeRequire:function(n,i){function o(t,l,d){var u,h;return i.enableBuildCallback&&l&&H(l)&&(l.__requireJsBuild=!0),"string"==typeof t?H(l)?c(A("requireargs","Invalid require call"),d):n&&s(C,t)?C[t](T[n.id]):j.get?j.get(_,t,n,o):(u=r(t,n,!1,!0),u=u.id,s(M,u)?M[u]:c(A("notloaded",'Module name "'+u+'" has not been loaded yet for context: '+e+(n?"":". Use require([])")))):(b(),_.nextTick(function(){b(),h=a(r(null,n)),h.skipMap=i.skipMap,h.init(t,l,d,{enabled:!0}),f()}),o)}return i=i||{},Q(o,{isBrowser:z,toUrl:function(e){var i,o=e.lastIndexOf("."),r=e.split("/")[0];return-1!==o&&("."!==r&&".."!==r||o>1)&&(i=e.substring(o,e.length),e=e.substring(0,o)),_.nameToUrl(t(e,n&&n.id,!0),i,!0)},defined:function(e){return s(M,r(e,n,!1,!0).id)},specified:function(e){return e=r(e,n,!1,!0).id,s(M,e)||s(T,e)}}),n||(o.undef=function(e){h();var t=r(e,n,!0),i=l(T,e);delete M[e],delete E[t.url],delete $[e],i&&(i.events.defined&&($[e]=i.events),p(e))}),o},enable:function(e){l(T,e.id)&&a(e).enable()},completeLoad:function(e){var t,n,o=l(S.shim,e)||{},r=o.exports;for(h();D.length;){if(n=D.shift(),null===n[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);m(n)}if(n=l(T,e),!t&&!s(M,e)&&n&&!n.inited){if(S.enforceDefine&&(!r||!ba(r)))return i(e)?void 0:c(A("nodefine","No define call for "+e,null,[e]));m([e,o.deps||[],o.exportsFn])}f()},nameToUrl:function(e,t,n){var i,o,r,a,s,d;if(j.jsExtRegExp.test(e))a=e+(t||"");else{for(i=S.paths,o=S.pkgs,a=e.split("/"),s=a.length;s>0;s-=1){if(d=a.slice(0,s).join("/"),r=l(o,d),d=l(i,d)){I(d)&&(d=d[0]),a.splice(0,s,d);break}if(r){e=e===r.name?r.location+"/"+r.main:r.location,a.splice(0,s,e);break}}a=a.join("/"),a+=t||(/\?/.test(a)||n?"":".js"),a=("/"===a.charAt(0)||a.match(/^[\w\+\.\-]+:/)?"":S.baseUrl)+a}return S.urlArgs?a+((-1===a.indexOf("?")?"?":"&")+S.urlArgs):a},load:function(e,t){j.load(_,e,t)},execCb:function(e,t,n,i){return t.apply(i,n)},onScriptLoad:function(e){("load"===e.type||ka.test((e.currentTarget||e.srcElement).readyState))&&(P=null,e=v(e),_.completeLoad(e.id))},onScriptError:function(e){var t=v(e);return i(t.id)?void 0:c(A("scripterror","Script error for: "+t.id,e,[t.id]))}},_.require=_.makeRequire(),_}var j,w,x,C,J,D,P,K,q,fa,la=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,ma=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,ea=/\.js$/,ja=/^\.\//;w=Object.prototype;var L=w.toString,ga=w.hasOwnProperty,ia=Array.prototype.splice,z=!("undefined"==typeof window||!navigator||!window.document),da=!z&&"undefined"!=typeof importScripts,ka=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,W="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),E={},t={},R=[],O=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(H(requirejs))return;t=requirejs,requirejs=void 0}"undefined"!=typeof require&&!H(require)&&(t=require,require=void 0),j=requirejs=function(e,t,n,i){var o,r="_";return!I(e)&&"string"!=typeof e&&(o=e,I(t)?(e=t,t=n,n=i):e=[]),o&&o.context&&(r=o.context),(i=l(E,r))||(i=E[r]=j.s.newContext(r)),o&&i.configure(o),i.require(e,t,n)},j.config=function(e){return j(e)},j.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=j),j.version="2.1.8",j.jsExtRegExp=/^\/|:|\?|\.js$/,j.isBrowser=z,w=j.s={contexts:E,newContext:ha},j({}),y(["toUrl","undef","defined","specified"],function(e){j[e]=function(){var t=E._;return t.require[e].apply(t,arguments)}}),z&&(x=w.head=document.getElementsByTagName("head")[0],C=document.getElementsByTagName("base")[0])&&(x=w.head=C.parentNode),j.onError=aa,j.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},j.load=function(e,t,n){var i=e&&e.config||{};if(z)return i=j.createNode(i,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),!i.attachEvent||i.attachEvent.toString&&0>i.attachEvent.toString().indexOf("[native code")||W?(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)):(O=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)),i.src=n,K=i,C?x.insertBefore(i,C):x.appendChild(i),K=null,i;if(da)try{importScripts(n),e.completeLoad(t)}catch(o){e.onError(A("importscripts","importScripts failed for "+t+" at "+n,o,[t]))}},z&&M(document.getElementsByTagName("script"),function(e){return x||(x=e.parentNode),(J=e.getAttribute("data-main"))?(q=J,t.baseUrl||(D=q.split("/"),q=D.pop(),fa=D.length?D.join("/")+"/":"./",t.baseUrl=fa),q=q.replace(ea,""),j.jsExtRegExp.test(q)&&(q=J),t.deps=t.deps?t.deps.concat(q):[q],!0):void 0}),define=function(e,t,n){var i,o;"string"!=typeof e&&(n=t,t=e,e=null),I(t)||(n=t,t=null),!t&&H(n)&&(t=[],n.length&&(n.toString().replace(la,"").replace(ma,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),O&&((i=K)||(P&&"interactive"===P.readyState||M(document.getElementsByTagName("script"),function(e){return"interactive"===e.readyState?P=e:void 0}),i=P),i&&(e||(e=i.getAttribute("data-requiremodule")),o=E[i.getAttribute("data-requirecontext")])),(o?o.defQueue:R).push([e,t,n])},define.amd={jQuery:!0},j.exec=function(b){return eval(b)},j(t)}}(this),define("_assets/libs/custom/require/require-2.1.8.js",function(){}),!function(e){function t(e,t){var n;if(e&&ge[typeof e])for(n in e)if(Se.call(e,n)&&t(e[n],n,e)===ee)break}function n(e,t){var n;if(e&&ge[typeof e])for(n in e)if(t(e[n],n,e)===ee)break}function i(e){var t,n=[];if(!e||!ge[typeof e])return n;for(t in e)Se.call(e,t)&&n.push(t);return n}function o(e,t,n){n=(n||0)-1;for(var i=e.length;++n<i;)if(e[n]===t)return n;return-1}function r(e,t){var n=e.m,i=t.m;if(e=e.l,t=t.l,e!==t){if(e>t||"undefined"==typeof e)return 1;if(t>e||"undefined"==typeof t)return-1}return i>n?-1:1}function a(e){return"\\"+fe[e]}function s(){}function l(e){return e instanceof l?e:new d(e)}function d(e){this.__wrapped__=e}function c(e,t,n){function i(){var l=arguments,d=r?this:t;return o||(e=t[a]),n.length&&(l=l.length?(l=Le.call(l),s?l.concat(n):n.concat(l)):n),this instanceof i?(d=u(e.prototype),l=e.apply(d,l),_(l)?l:d):e.apply(d,l)}var o=N(e),r=!n,a=t;if(r){var s=void 0;n=t}else if(!o)throw new TypeError;return i}function u(e){return _(e)?Me(e):{}}function h(e){return Ye[e]}function p(){var e=(e=l.indexOf)===B?o:e;return e}function g(e){return Ge[e]}function f(e){return $e.call(e)==ae}function m(e){if(!e)return e;for(var t=1,n=arguments.length;n>t;t++){var i=arguments[t];if(i)for(var o in i)e[o]=i[o]}return e}function v(e){if(!e)return e;for(var t=1,n=arguments.length;n>t;t++){var i=arguments[t];if(i)for(var o in i)e[o]==J&&(e[o]=i[o])}return e}function b(e){var t=[];return n(e,function(e,n){N(e)&&t.push(n)}),t.sort()}function y(e){for(var t=-1,n=ze(e),i=n.length,o={};++t<i;){var r=n[t];o[e[r]]=r}return o}function w(e){if(!e)return X;if(Be(e)||x(e))return!e.length;for(var t in e)if(Se.call(e,t))return Z;return X}function A(e,t,i,o){if(e===t)return 0!==e||1/e==1/t;var r=typeof e,a=typeof t;if(e===e&&(!e||"function"!=r&&"object"!=r)&&(!t||"function"!=a&&"object"!=a))return Z;if(e==J||t==J)return e===t;if(a=$e.call(e),r=$e.call(t),a!=r)return Z;switch(a){case le:case de:return+e==+t;case ce:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case he:case pe:return e==t+""}if(r=a==se,!r){if(e instanceof l||t instanceof l)return A(e.__wrapped__||e,t.__wrapped__||t,i,o);if(a!=ue)return Z;var a=e.constructor,s=t.constructor;if(!(a==s||N(a)&&a instanceof a&&N(s)&&s instanceof s))return Z}for(i||(i=[]),o||(o=[]),a=i.length;a--;)if(i[a]==e)return o[a]==t;var d=X,c=0;if(i.push(e),o.push(t),r){if(c=t.length,d=c==e.length)for(;c--&&(d=A(e[c],t[c],i,o)););return d}return n(t,function(t,n,r){return Se.call(r,n)?(c++,!(d=Se.call(e,n)&&A(e[n],t,i,o))&&ee):void 0}),d&&n(e,function(e,t,n){return Se.call(n,t)?!(d=-1<--c)&&ee:void 0}),d}function N(e){return"function"==typeof e}function _(e){return!(!e||!ge[typeof e])}function C(e){return"number"==typeof e||$e.call(e)==ce}function x(e){return"string"==typeof e||$e.call(e)==pe}function S(e){for(var t=-1,n=ze(e),i=n.length,o=Array(i);++t<i;)o[t]=e[n[t]];return o}function T(e,n){var i=p(),o=e?e.length:0,r=Z;return o&&"number"==typeof o?r=-1<i(e,n):t(e,function(e){return(r=e===n)&&ee}),r}function k(e,n,i){var o=X;n=q(n,i),i=-1;var r=e?e.length:0;if("number"==typeof r)for(;++i<r&&(o=!!n(e[i],i,e)););else t(e,function(e,t,i){return!(o=!!n(e,t,i))&&ee});return o}function $(e,n,i){var o=[];n=q(n,i),i=-1;var r=e?e.length:0;if("number"==typeof r)for(;++i<r;){var a=e[i];n(a,i,e)&&o.push(a)}else t(e,function(e,t,i){n(e,t,i)&&o.push(e)});return o}function D(e,n,i){n=q(n,i),i=-1;var o=e?e.length:0;if("number"!=typeof o){var r;return t(e,function(e,t,i){return n(e,t,i)?(r=e,ee):void 0}),r}for(;++i<o;){var a=e[i];if(n(a,i,e))return a}}function M(e,n,i){var o=-1,r=e?e.length:0;if(n=n&&"undefined"==typeof i?n:q(n,i),"number"==typeof r)for(;++o<r&&n(e[o],o,e)!==ee;);else t(e,n)}function E(e,n,i){var o=-1,r=e?e.length:0;if(n=q(n,i),"number"==typeof r)for(var a=Array(r);++o<r;)a[o]=n(e[o],o,e);else a=[],t(e,function(e,t,i){a[++o]=n(e,t,i)});return a}function P(e,t,n){var i=-1/0,o=i,r=-1,a=e?e.length:0;if(t||"number"!=typeof a)t=q(t,n),M(e,function(e,n,r){n=t(e,n,r),n>i&&(i=n,o=e)});else for(;++r<a;)n=e[r],n>o&&(o=n);return o}function I(e,t){var n=-1,i=e?e.length:0;if("number"==typeof i)for(var o=Array(i);++n<i;)o[n]=e[n][t];return o||E(e,t)}function O(e,n,i,o){if(!e)return i;var r=3>arguments.length;n=q(n,o,4);var a=-1,s=e.length;if("number"==typeof s)for(r&&(i=e[++a]);++a<s;)i=n(i,e[a],a,e);else t(e,function(e,t,o){i=r?(r=Z,e):n(i,e,t,o)});return i}function R(e,t,n,i){var o=e?e.length:0,r=3>arguments.length;if("number"!=typeof o)var a=ze(e),o=a.length;return t=q(t,i,4),M(e,function(i,s,l){s=a?a[--o]:--o,n=r?(r=Z,e[s]):t(n,e[s],s,l)}),n}function F(e,n,i){var o;n=q(n,i),i=-1;var r=e?e.length:0;if("number"==typeof r)for(;++i<r&&!(o=n(e[i],i,e)););else t(e,function(e,t,i){return(o=n(e,t,i))&&ee});return!!o}function V(e,t,n){return n&&w(t)?J:(n?D:$)(e,t)}function L(e){for(var t=-1,n=p(),i=e.length,o=Ce.apply(ye,Le.call(arguments,1)),r=[];++t<i;){var a=e[t];0>n(o,a)&&r.push(a)}return r}function U(e,t,n){if(e){var i=0,o=e.length;if("number"!=typeof t&&t!=J){var r=-1;for(t=q(t,n);++r<o&&t(e[r],r,e);)i++}else if(i=t,i==J||n)return e[0];return Le.call(e,0,Fe(Re(0,i),o))}}function H(e,t){for(var n=-1,i=e?e.length:0,o=[];++n<i;){var r=e[n];Be(r)?Te.apply(o,t?r:H(r)):o.push(r)}return o}function B(e,t,n){if("number"==typeof n){var i=e?e.length:0;n=0>n?Re(0,i+n):n||0}else if(n)return n=Y(e,t),e[n]===t?n:-1;return e?o(e,t,n):-1}function z(e,t,n){if("number"!=typeof t&&t!=J){var i=0,o=-1,r=e?e.length:0;for(t=q(t,n);++o<r&&t(e[o],o,e);)i++}else i=t==J||n?1:Re(0,t);return Le.call(e,i)}function Y(e,t,n,i){var o=0,r=e?e.length:o;for(n=n?q(n,i,1):W,t=n(t);r>o;)i=o+r>>>1,n(e[i])<t?o=i+1:r=i;return o}function G(e,t,n,i){var o=-1,r=p(),a=e?e.length:0,s=[],l=s;for("boolean"!=typeof t&&t!=J&&(i=n,n=t,t=Z),n!=J&&(l=[],n=q(n,i));++o<a;){i=e[o];var d=n?n(i,o,e):i;(t?!o||l[l.length-1]!==d:0>r(l,d))&&(n&&l.push(d),s.push(i))}return s}function j(e,t){return He.fastBind||De&&2<arguments.length?De.call.apply(De,arguments):c(e,t,Le.call(arguments,2))}function q(e,t,n){if(e==J)return W;var i=typeof e;if("function"!=i){if("object"!=i)return function(t){return t[e]};var o=ze(e);return function(t){for(var n=o.length,i=Z;n--&&(i=t[o[n]]===e[o[n]]););return i}}return"undefined"==typeof t?e:1===n?function(n){return e.call(t,n)}:2===n?function(n,i){return e.call(t,n,i)}:4===n?function(n,i,o,r){return e.call(t,n,i,o,r)}:function(n,i,o){return e.call(t,n,i,o)}}function W(e){return e}function K(e){M(b(e),function(t){var n=l[t]=e[t];l.prototype[t]=function(){var e=[this.__wrapped__];return Te.apply(e,arguments),e=n.apply(l,e),this.__chain__&&(e=new d(e),e.__chain__=X),e}})}var X=!0,J=null,Z=!1,Q=0,ee={},te=+new Date+"",ne=/&(?:amp|lt|gt|quot|#39);/g,ie=/($^)/,oe=/[&<>"']/g,re=/['\n\r\t\u2028\u2029\\]/g,ae="[object Arguments]",se="[object Array]",le="[object Boolean]",de="[object Date]",ce="[object Number]",ue="[object Object]",he="[object RegExp]",pe="[object String]",ge={"boolean":Z,"function":X,object:X,number:Z,string:Z,undefined:Z},fe={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},me=ge[typeof exports]&&exports,ve=ge[typeof module]&&module&&module.exports==me&&module,be=ge[typeof global]&&global;!be||be.global!==be&&be.window!==be||(e=be);var ye=[],be=Object.prototype,we=e._,Ae=RegExp("^"+(be.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),Ne=Math.ceil,_e=e.clearTimeout,Ce=ye.concat,xe=Math.floor,Se=be.hasOwnProperty,Te=ye.push,ke=e.setTimeout,$e=be.toString,De=Ae.test(De=$e.bind)&&De,Me=Ae.test(Me=Object.create)&&Me,Ee=Ae.test(Ee=Array.isArray)&&Ee,Pe=e.isFinite,Ie=e.isNaN,Oe=Ae.test(Oe=Object.keys)&&Oe,Re=Math.max,Fe=Math.min,Ve=Math.random,Le=ye.slice,be=Ae.test(e.attachEvent),Ue=De&&!/\n|true/.test(De+be);d.prototype=l.prototype;var He={};!function(){var e={0:1,length:1};He.fastBind=De&&!Ue,He.spliceObjects=(ye.splice.call(e,0,1),!e[0])}(1),l.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,variable:""},Me||(u=function(e){if(_(e)){s.prototype=e;var t=new s;s.prototype=J}return t||{}}),f(arguments)||(f=function(e){return e?Se.call(e,"callee"):Z});var Be=Ee||function(e){return e?"object"==typeof e&&$e.call(e)==se:Z},ze=Oe?function(e){return _(e)?Oe(e):[]}:i,Ye={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ge=y(Ye);N(/x/)&&(N=function(e){return"function"==typeof e&&"[object Function]"==$e.call(e)}),l.after=function(e,t){return 1>e?t():function(){return 1>--e?t.apply(this,arguments):void 0}},l.bind=j,l.bindAll=function(e){for(var t=1<arguments.length?Ce.apply(ye,Le.call(arguments,1)):b(e),n=-1,i=t.length;++n<i;){var o=t[n];e[o]=j(e[o],e)}return e},l.compact=function(e){for(var t=-1,n=e?e.length:0,i=[];++t<n;){var o=e[t];o&&i.push(o)}return i},l.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}},l.countBy=function(e,t,n){var i={};return t=q(t,n),M(e,function(e,n,o){n=t(e,n,o)+"",Se.call(i,n)?i[n]++:i[n]=1}),i},l.debounce=function(e,t,n){function i(){s=J,n||(r=e.apply(a,o))}var o,r,a,s=J;return function(){var l=n&&!s;return o=arguments,a=this,_e(s),s=ke(i,t),l&&(r=e.apply(a,o)),r}},l.defaults=v,l.defer=function(e){var t=Le.call(arguments,1);return ke(function(){e.apply(void 0,t)},1)},l.delay=function(e,t){var n=Le.call(arguments,2);return ke(function(){e.apply(void 0,n)},t)},l.difference=L,l.filter=$,l.flatten=H,l.forEach=M,l.functions=b,l.groupBy=function(e,t,n){var i={};return t=q(t,n),M(e,function(e,n,o){n=t(e,n,o)+"",(Se.call(i,n)?i[n]:i[n]=[]).push(e)}),i},l.initial=function(e,t,n){if(!e)return[];var i=0,o=e.length;if("number"!=typeof t&&t!=J){var r=o;for(t=q(t,n);r--&&t(e[r],r,e);)i++}else i=t==J||n?1:t||i;return Le.call(e,0,Fe(Re(0,o-i),o))},l.intersection=function(e){var t=arguments,n=t.length,i=-1,o=p(),r=e?e.length:0,a=[];e:for(;++i<r;){var s=e[i];if(0>o(a,s)){for(var l=n;--l;)if(0>o(t[l],s))continue e;a.push(s)}}return a},l.invert=y,l.invoke=function(e,t){var n=Le.call(arguments,2),i=-1,o="function"==typeof t,r=e?e.length:0,a=Array("number"==typeof r?r:0);return M(e,function(e){a[++i]=(o?t:e[t]).apply(e,n)}),a},l.keys=ze,l.map=E,l.max=P,l.memoize=function(e,t){var n={};return function(){var i=te+(t?t.apply(this,arguments):arguments[0]);return Se.call(n,i)?n[i]:n[i]=e.apply(this,arguments)}},l.min=function(e,t,n){var i=1/0,o=i,r=-1,a=e?e.length:0;if(t||"number"!=typeof a)t=q(t,n),M(e,function(e,n,r){n=t(e,n,r),i>n&&(i=n,o=e)});else for(;++r<a;)n=e[r],o>n&&(o=n);return o},l.omit=function(e){var t=p(),i=Ce.apply(ye,Le.call(arguments,1)),o={};return n(e,function(e,n){0>t(i,n)&&(o[n]=e)}),o},l.once=function(e){var t,n;return function(){return t?n:(t=X,n=e.apply(this,arguments),e=J,n)}},l.pairs=function(e){for(var t=-1,n=ze(e),i=n.length,o=Array(i);++t<i;){var r=n[t];o[t]=[r,e[r]]}return o},l.partial=function(e){return c(e,Le.call(arguments,1))},l.pick=function(e){for(var t=-1,n=Ce.apply(ye,Le.call(arguments,1)),i=n.length,o={};++t<i;){var r=n[t];r in e&&(o[r]=e[r])}return o},l.pluck=I,l.range=function(e,t,n){e=+e||0,n=+n||1,t==J&&(t=e,e=0);var i=-1;t=Re(0,Ne((t-e)/n));for(var o=Array(t);++i<t;)o[i]=e,e+=n;return o},l.reject=function(e,t,n){return t=q(t,n),$(e,function(e,n,i){return!t(e,n,i)})},l.rest=z,l.shuffle=function(e){var t=-1,n=e?e.length:0,i=Array("number"==typeof n?n:0);return M(e,function(e){var n=xe(Ve()*(++t+1));i[t]=i[n],i[n]=e}),i},l.sortBy=function(e,t,n){var i=-1,o=e?e.length:0,a=Array("number"==typeof o?o:0);for(t=q(t,n),M(e,function(e,n,o){a[++i]={l:t(e,n,o),m:i,n:e}}),o=a.length,a.sort(r);o--;)a[o]=a[o].n;return a},l.tap=function(e,t){return t(e),e},l.throttle=function(e,t){function n(){a=new Date,s=J,o=e.apply(r,i)}var i,o,r,a=0,s=J;return function(){var l=new Date,d=t-(l-a);return i=arguments,r=this,d>0?s||(s=ke(n,d)):(_e(s),s=J,a=l,o=e.apply(r,i)),o}},l.times=function(e,t,n){for(var i=-1,o=Array(e>-1?e:0);++i<e;)o[i]=t.call(n,i);return o},l.toArray=function(e){return Be(e)?Le.call(e):e&&"number"==typeof e.length?E(e):S(e)},l.union=function(e){return Be(e)||(arguments[0]=e?Le.call(e):ye),G(Ce.apply(ye,arguments))},l.uniq=G,l.values=S,l.where=V,l.without=function(e){return L(e,Le.call(arguments,1))},l.wrap=function(e,t){return function(){var n=[e];return Te.apply(n,arguments),t.apply(this,n)}},l.zip=function(e){for(var t=-1,n=e?P(I(arguments,"length")):0,i=Array(0>n?0:n);++t<n;)i[t]=I(arguments,t);return i},l.collect=E,l.drop=z,l.each=M,l.extend=m,l.methods=b,l.object=function(e,t){for(var n=-1,i=e?e.length:0,o={};++n<i;){var r=e[n];t?o[r]=t[n]:o[r[0]]=r[1]}return o},l.select=$,l.tail=z,l.unique=G,l.chain=function(e){return e=new d(e),e.__chain__=X,e},l.clone=function(e){return _(e)?Be(e)?Le.call(e):m({},e):e},l.contains=T,l.escape=function(e){return e==J?"":(e+"").replace(oe,h)},l.every=k,l.find=D,l.has=function(e,t){return e?Se.call(e,t):Z},l.identity=W,l.indexOf=B,l.isArguments=f,l.isArray=Be,l.isBoolean=function(e){return e===X||e===Z||$e.call(e)==le},l.isDate=function(e){return e?"object"==typeof e&&$e.call(e)==de:Z},l.isElement=function(e){return e?1===e.nodeType:Z},l.isEmpty=w,l.isEqual=A,l.isFinite=function(e){return Pe(e)&&!Ie(parseFloat(e))},l.isFunction=N,l.isNaN=function(e){return C(e)&&e!=+e},l.isNull=function(e){return e===J},l.isNumber=C,l.isObject=_,l.isRegExp=function(e){return!(!e||!ge[typeof e])&&$e.call(e)==he},l.isString=x,l.isUndefined=function(e){return"undefined"==typeof e},l.lastIndexOf=function(e,t,n){var i=e?e.length:0;for("number"==typeof n&&(i=(0>n?Re(0,i+n):Fe(n,i-1))+1);i--;)if(e[i]===t)return i;return-1},l.mixin=K,l.noConflict=function(){return e._=we,this},l.random=function(e,t){e==J&&t==J&&(t=1),e=+e||0,t==J?(t=e,e=0):t=+t||0;var n=Ve();return e%1||t%1?e+Fe(n*(t-e+parseFloat("1e-"+((n+"").length-1))),t):e+xe(n*(t-e+1))},l.reduce=O,l.reduceRight=R,l.result=function(e,t){var n=e?e[t]:J;return N(n)?e[t]():n},l.size=function(e){var t=e?e.length:0;return"number"==typeof t?t:ze(e).length},l.some=F,l.sortedIndex=Y,l.template=function(e,t,n){var i=l.templateSettings;e||(e=""),n=v({},n,i);var o=0,r="__p+='",i=n.variable;e.replace(RegExp((n.escape||ie).source+"|"+(n.interpolate||ie).source+"|"+(n.evaluate||ie).source+"|$","g"),function(t,n,i,s,l){return r+=e.slice(o,l).replace(re,a),n&&(r+="'+_['escape']("+n+")+'"),s&&(r+="';"+s+";__p+='"),i&&(r+="'+((__t=("+i+"))==null?'':__t)+'"),o=l+t.length,t}),r+="';\n",i||(i="obj",r="with("+i+"||{}){"+r+"}"),r="function("+i+"){var __t,__p='',__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}"+r+"return __p}";try{var s=Function("_","return "+r)(l)}catch(d){throw d.source=r,d}return t?s(t):(s.source=r,s)},l.unescape=function(e){return e==J?"":(e+"").replace(ne,g)},l.uniqueId=function(e){var t=++Q+"";return e?e+t:t},l.all=k,l.any=F,l.detect=D,l.findWhere=function(e,t){return V(e,t,X)},l.foldl=O,l.foldr=R,l.include=T,l.inject=O,l.first=U,l.last=function(e,t,n){if(e){var i=0,o=e.length;if("number"!=typeof t&&t!=J){var r=o;for(t=q(t,n);r--&&t(e[r],r,e);)i++}else if(i=t,i==J||n)return e[o-1];return Le.call(e,Re(0,o-i))}},l.take=U,l.head=U,l.VERSION="1.3.1",K(l),l.prototype.chain=function(){return this.__chain__=X,this},l.prototype.value=function(){return this.__wrapped__},M("pop push reverse shift sort splice unshift".split(" "),function(e){var t=ye[e];l.prototype[e]=function(){var e=this.__wrapped__;return t.apply(e,arguments),!He.spliceObjects&&0===e.length&&delete e[0],this}}),M(["concat","join","slice"],function(e){var t=ye[e];l.prototype[e]=function(){var e=t.apply(this.__wrapped__,arguments);return this.__chain__&&(e=new d(e),e.__chain__=X),e}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(e._=l,define("underscore",[],function(){return l})):me&&!me.nodeType?ve?(ve.exports=l)._=l:me._=l:e._=l}(this),function(e,t){function n(e){var t=e.length,n=le.type(e);return le.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e){var t=_e[e]={};return le.each(e.match(ce)||[],function(e,n){t[n]=!0}),t}function o(e,n,i,o){if(le.acceptData(e)){var r,a,s=le.expando,l="string"==typeof n,d=e.nodeType,c=d?le.cache:e,u=d?e[s]:e[s]&&s;if(u&&c[u]&&(o||c[u].data)||!l||i!==t)return u||(d?e[s]=u=Q.pop()||le.guid++:u=s),c[u]||(c[u]={},d||(c[u].toJSON=le.noop)),("object"==typeof n||"function"==typeof n)&&(o?c[u]=le.extend(c[u],n):c[u].data=le.extend(c[u].data,n)),r=c[u],o||(r.data||(r.data={}),r=r.data),i!==t&&(r[le.camelCase(n)]=i),l?(a=r[n],null==a&&(a=r[le.camelCase(n)])):a=r,a}}function r(e,t,n){if(le.acceptData(e)){var i,o,r,a=e.nodeType,l=a?le.cache:e,d=a?e[le.expando]:le.expando;if(l[d]){if(t&&(r=n?l[d]:l[d].data)){le.isArray(t)?t=t.concat(le.map(t,le.camelCase)):t in r?t=[t]:(t=le.camelCase(t),t=t in r?[t]:t.split(" "));for(i=0,o=t.length;o>i;i++)delete r[t[i]];if(!(n?s:le.isEmptyObject)(r))return}(n||(delete l[d].data,s(l[d])))&&(a?le.cleanData([e],!0):le.support.deleteExpando||l!=l.window?delete l[d]:l[d]=null)}}}function a(e,n,i){if(i===t&&1===e.nodeType){var o="data-"+n.replace(xe,"-$1").toLowerCase();if(i=e.getAttribute(o),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:Ce.test(i)?le.parseJSON(i):i}catch(r){}le.data(e,n,i)}else i=t}return i}function s(e){
var t;for(t in e)if(("data"!==t||!le.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function l(){return!0}function d(){return!1}function c(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function u(e,t,n){if(t=t||0,le.isFunction(t))return le.grep(e,function(e,i){var o=!!t.call(e,i,e);return o===n});if(t.nodeType)return le.grep(e,function(e){return e===t===n});if("string"==typeof t){var i=le.grep(e,function(e){return 1===e.nodeType});if(ze.test(t))return le.filter(t,i,!n);t=le.filter(t,i)}return le.grep(e,function(e){return le.inArray(e,t)>=0===n})}function h(e){var t=je.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function p(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function g(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function f(e){var t=ot.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function m(e,t){for(var n,i=0;null!=(n=e[i]);i++)le._data(n,"globalEval",!t||le._data(t[i],"globalEval"))}function v(e,t){if(1===t.nodeType&&le.hasData(e)){var n,i,o,r=le._data(e),a=le._data(t,r),s=r.events;if(s){delete a.handle,a.events={};for(n in s)for(i=0,o=s[n].length;o>i;i++)le.event.add(t,n,s[n][i])}a.data&&(a.data=le.extend({},a.data))}}function b(e,t){var n,i,o;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!le.support.noCloneEvent&&t[le.expando]){o=le._data(t);for(i in o.events)le.removeEvent(t,i,o.handle);t.removeAttribute(le.expando)}"script"===n&&t.text!==e.text?(g(t).text=e.text,f(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),le.support.html5Clone&&e.innerHTML&&!le.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&tt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function y(e,n){var i,o,r=0,a=typeof e.getElementsByTagName!==q?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==q?e.querySelectorAll(n||"*"):t;if(!a)for(a=[],i=e.childNodes||e;null!=(o=i[r]);r++)!n||le.nodeName(o,n)?a.push(o):le.merge(a,y(o,n));return n===t||n&&le.nodeName(e,n)?le.merge([e],a):a}function w(e){tt.test(e.type)&&(e.defaultChecked=e.checked)}function A(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,o=Ct.length;o--;)if(t=Ct[o]+n,t in e)return t;return i}function N(e,t){return e=t||e,"none"===le.css(e,"display")||!le.contains(e.ownerDocument,e)}function _(e,t){for(var n,i,o,r=[],a=0,s=e.length;s>a;a++)i=e[a],i.style&&(r[a]=le._data(i,"olddisplay"),n=i.style.display,t?(r[a]||"none"!==n||(i.style.display=""),""===i.style.display&&N(i)&&(r[a]=le._data(i,"olddisplay",T(i.nodeName)))):r[a]||(o=N(i),(n&&"none"!==n||!o)&&le._data(i,"olddisplay",o?n:le.css(i,"display"))));for(a=0;s>a;a++)i=e[a],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?r[a]||"":"none"));return e}function C(e,t,n){var i=vt.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function x(e,t,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===t?1:0,a=0;4>r;r+=2)"margin"===n&&(a+=le.css(e,n+_t[r],!0,o)),i?("content"===n&&(a-=le.css(e,"padding"+_t[r],!0,o)),"margin"!==n&&(a-=le.css(e,"border"+_t[r]+"Width",!0,o))):(a+=le.css(e,"padding"+_t[r],!0,o),"padding"!==n&&(a+=le.css(e,"border"+_t[r]+"Width",!0,o)));return a}function S(e,t,n){var i=!0,o="width"===t?e.offsetWidth:e.offsetHeight,r=ct(e),a=le.support.boxSizing&&"border-box"===le.css(e,"boxSizing",!1,r);if(0>=o||null==o){if(o=ut(e,t,r),(0>o||null==o)&&(o=e.style[t]),bt.test(o))return o;i=a&&(le.support.boxSizingReliable||o===e.style[t]),o=parseFloat(o)||0}return o+x(e,t,n||(a?"border":"content"),i,r)+"px"}function T(e){var t=W,n=wt[e];return n||(n=k(e,t),"none"!==n&&n||(dt=(dt||le("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(dt[0].contentWindow||dt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=k(e,t),dt.detach()),wt[e]=n),n}function k(e,t){var n=le(t.createElement(e)).appendTo(t.body),i=le.css(n[0],"display");return n.remove(),i}function $(e,t,n,i){var o;if(le.isArray(t))le.each(t,function(t,o){n||St.test(e)?i(e,o):$(e+"["+("object"==typeof o?t:"")+"]",o,n,i)});else if(n||"object"!==le.type(t))i(e,t);else for(o in t)$(e+"["+o+"]",t[o],n,i)}function D(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o=0,r=t.toLowerCase().match(ce)||[];if(le.isFunction(n))for(;i=r[o++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function M(e,n,i,o){function r(l){var d;return a[l]=!0,le.each(e[l]||[],function(e,l){var c=l(n,i,o);return"string"!=typeof c||s||a[c]?s?!(d=c):t:(n.dataTypes.unshift(c),r(c),!1)}),d}var a={},s=e===zt;return r(n.dataTypes[0])||!a["*"]&&r("*")}function E(e,n){var i,o,r=le.ajaxSettings.flatOptions||{};for(o in n)n[o]!==t&&((r[o]?e:i||(i={}))[o]=n[o]);return i&&le.extend(!0,e,i),e}function P(e,n,i){var o,r,a,s,l=e.contents,d=e.dataTypes,c=e.responseFields;for(s in c)s in i&&(n[c[s]]=i[s]);for(;"*"===d[0];)d.shift(),r===t&&(r=e.mimeType||n.getResponseHeader("Content-Type"));if(r)for(s in l)if(l[s]&&l[s].test(r)){d.unshift(s);break}if(d[0]in i)a=d[0];else{for(s in i){if(!d[0]||e.converters[s+" "+d[0]]){a=s;break}o||(o=s)}a=a||o}return a?(a!==d[0]&&d.unshift(a),i[a]):t}function I(e,t){var n,i,o,r,a={},s=0,l=e.dataTypes.slice(),d=l[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l[1])for(o in e.converters)a[o.toLowerCase()]=e.converters[o];for(;i=l[++s];)if("*"!==i){if("*"!==d&&d!==i){if(o=a[d+" "+i]||a["* "+i],!o)for(n in a)if(r=n.split(" "),r[1]===i&&(o=a[d+" "+r[0]]||a["* "+r[0]])){o===!0?o=a[n]:a[n]!==!0&&(i=r[0],l.splice(s--,0,i));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+d+" to "+i}}}d=i}return{state:"success",data:t}}function O(){try{return new e.XMLHttpRequest}catch(t){}}function R(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function F(){return setTimeout(function(){Zt=t}),Zt=le.now()}function V(e,t){le.each(t,function(t,n){for(var i=(rn[t]||[]).concat(rn["*"]),o=0,r=i.length;r>o;o++)if(i[o].call(e,t,n))return})}function L(e,t,n){var i,o,r=0,a=on.length,s=le.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=Zt||F(),n=Math.max(0,d.startTime+d.duration-t),i=n/d.duration||0,r=1-i,a=0,l=d.tweens.length;l>a;a++)d.tweens[a].run(r);return s.notifyWith(e,[d,r,n]),1>r&&l?n:(s.resolveWith(e,[d]),!1)},d=s.promise({elem:e,props:le.extend({},t),opts:le.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Zt||F(),duration:n.duration,tweens:[],createTween:function(t,n){var i=le.Tween(e,d.opts,t,n,d.opts.specialEasing[t]||d.opts.easing);return d.tweens.push(i),i},stop:function(t){var n=0,i=t?d.tweens.length:0;if(o)return this;for(o=!0;i>n;n++)d.tweens[n].run(1);return t?s.resolveWith(e,[d,t]):s.rejectWith(e,[d,t]),this}}),c=d.props;for(U(c,d.opts.specialEasing);a>r;r++)if(i=on[r].call(d,e,c,d.opts))return i;return V(d,c),le.isFunction(d.opts.start)&&d.opts.start.call(e,d),le.fx.timer(le.extend(l,{elem:e,anim:d,queue:d.opts.queue})),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always)}function U(e,t){var n,i,o,r,a;for(o in e)if(i=le.camelCase(o),r=t[i],n=e[o],le.isArray(n)&&(r=n[1],n=e[o]=n[0]),o!==i&&(e[i]=n,delete e[o]),a=le.cssHooks[i],a&&"expand"in a){n=a.expand(n),delete e[i];for(o in n)o in e||(e[o]=n[o],t[o]=r)}else t[i]=r}function H(e,t,n){var i,o,r,a,s,l,d,c,u,h=this,p=e.style,g={},f=[],m=e.nodeType&&N(e);n.queue||(c=le._queueHooks(e,"fx"),null==c.unqueued&&(c.unqueued=0,u=c.empty.fire,c.empty.fire=function(){c.unqueued||u()}),c.unqueued++,h.always(function(){h.always(function(){c.unqueued--,le.queue(e,"fx").length||c.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===le.css(e,"display")&&"none"===le.css(e,"float")&&(le.support.inlineBlockNeedsLayout&&"inline"!==T(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",le.support.shrinkWrapBlocks||h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(o in t)if(a=t[o],en.exec(a)){if(delete t[o],l=l||"toggle"===a,a===(m?"hide":"show"))continue;f.push(o)}if(r=f.length){s=le._data(e,"fxshow")||le._data(e,"fxshow",{}),"hidden"in s&&(m=s.hidden),l&&(s.hidden=!m),m?le(e).show():h.done(function(){le(e).hide()}),h.done(function(){var t;le._removeData(e,"fxshow");for(t in g)le.style(e,t,g[t])});for(o=0;r>o;o++)i=f[o],d=h.createTween(i,m?s[i]:0),g[i]=s[i]||le.style(e,i),i in s||(s[i]=d.start,m&&(d.end=d.start,d.start="width"===i||"height"===i?1:0))}}function B(e,t,n,i,o){return new B.prototype.init(e,t,n,i,o)}function z(e,t){var n,i={height:e},o=0;for(t=t?1:0;4>o;o+=2-t)n=_t[o],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function Y(e){return le.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var G,j,q=typeof t,W=e.document,K=e.location,X=e.jQuery,J=e.$,Z={},Q=[],ee="1.9.1",te=Q.concat,ne=Q.push,ie=Q.slice,oe=Q.indexOf,re=Z.toString,ae=Z.hasOwnProperty,se=ee.trim,le=function(e,t){return new le.fn.init(e,t,j)},de=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ce=/\S+/g,ue=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,he=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,pe=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ge=/^[\],:{}\s]*$/,fe=/(?:^|:|,)(?:\s*\[)+/g,me=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ve=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,be=/^-ms-/,ye=/-([\da-z])/gi,we=function(e,t){return t.toUpperCase()},Ae=function(e){(W.addEventListener||"load"===e.type||"complete"===W.readyState)&&(Ne(),le.ready())},Ne=function(){W.addEventListener?(W.removeEventListener("DOMContentLoaded",Ae,!1),e.removeEventListener("load",Ae,!1)):(W.detachEvent("onreadystatechange",Ae),e.detachEvent("onload",Ae))};le.fn=le.prototype={jquery:ee,constructor:le,init:function(e,n,i){var o,r;if(!e)return this;if("string"==typeof e){if(o="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:he.exec(e),!o||!o[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);if(o[1]){if(n=n instanceof le?n[0]:n,le.merge(this,le.parseHTML(o[1],n&&n.nodeType?n.ownerDocument||n:W,!0)),pe.test(o[1])&&le.isPlainObject(n))for(o in n)le.isFunction(this[o])?this[o](n[o]):this.attr(o,n[o]);return this}if(r=W.getElementById(o[2]),r&&r.parentNode){if(r.id!==o[2])return i.find(e);this.length=1,this[0]=r}return this.context=W,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):le.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),le.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return ie.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=le.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return le.each(this,e,t)},ready:function(e){return le.ready.promise().done(e),this},slice:function(){return this.pushStack(ie.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(le.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:ne,sort:[].sort,splice:[].splice},le.fn.init.prototype=le.fn,le.extend=le.fn.extend=function(){var e,n,i,o,r,a,s=arguments[0]||{},l=1,d=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},l=2),"object"==typeof s||le.isFunction(s)||(s={}),d===l&&(s=this,--l);d>l;l++)if(null!=(r=arguments[l]))for(o in r)e=s[o],i=r[o],s!==i&&(c&&i&&(le.isPlainObject(i)||(n=le.isArray(i)))?(n?(n=!1,a=e&&le.isArray(e)?e:[]):a=e&&le.isPlainObject(e)?e:{},s[o]=le.extend(c,a,i)):i!==t&&(s[o]=i));return s},le.extend({noConflict:function(t){return e.$===le&&(e.$=J),t&&e.jQuery===le&&(e.jQuery=X),le},isReady:!1,readyWait:1,holdReady:function(e){e?le.readyWait++:le.ready(!0)},ready:function(e){if(e===!0?!--le.readyWait:!le.isReady){if(!W.body)return setTimeout(le.ready);le.isReady=!0,e!==!0&&--le.readyWait>0||(G.resolveWith(W,[le]),le.fn.trigger&&le(W).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===le.type(e)},isArray:Array.isArray||function(e){return"array"===le.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Z[re.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==le.type(e)||e.nodeType||le.isWindow(e))return!1;try{if(e.constructor&&!ae.call(e,"constructor")&&!ae.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var i;for(i in e);return i===t||ae.call(e,i)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||W;var i=pe.exec(e),o=!n&&[];return i?[t.createElement(i[1])]:(i=le.buildFragment([e],t,o),o&&le(o).remove(),le.merge([],i.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=le.trim(n),n&&ge.test(n.replace(me,"@").replace(ve,"]").replace(fe,"")))?Function("return "+n)():(le.error("Invalid JSON: "+n),t)},parseXML:function(n){var i,o;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(o=new DOMParser,i=o.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(r){i=t}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||le.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(t){t&&le.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(be,"ms-").replace(ye,we)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var o,r=0,a=e.length,s=n(e);if(i){if(s)for(;a>r&&(o=t.apply(e[r],i),o!==!1);r++);else for(r in e)if(o=t.apply(e[r],i),o===!1)break}else if(s)for(;a>r&&(o=t.call(e[r],r,e[r]),o!==!1);r++);else for(r in e)if(o=t.call(e[r],r,e[r]),o===!1)break;return e},trim:se&&!se.call("\ufeff ")?function(e){return null==e?"":se.call(e)}:function(e){return null==e?"":(e+"").replace(ue,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?le.merge(i,"string"==typeof e?[e]:e):ne.call(i,e)),i},inArray:function(e,t,n){var i;if(t){if(oe)return oe.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var i=n.length,o=e.length,r=0;if("number"==typeof i)for(;i>r;r++)e[o++]=n[r];else for(;n[r]!==t;)e[o++]=n[r++];return e.length=o,e},grep:function(e,t,n){var i,o=[],r=0,a=e.length;for(n=!!n;a>r;r++)i=!!t(e[r],r),n!==i&&o.push(e[r]);return o},map:function(e,t,i){var o,r=0,a=e.length,s=n(e),l=[];if(s)for(;a>r;r++)o=t(e[r],r,i),null!=o&&(l[l.length]=o);else for(r in e)o=t(e[r],r,i),null!=o&&(l[l.length]=o);return te.apply([],l)},guid:1,proxy:function(e,n){var i,o,r;return"string"==typeof n&&(r=e[n],n=e,e=r),le.isFunction(e)?(i=ie.call(arguments,2),o=function(){return e.apply(n||this,i.concat(ie.call(arguments)))},o.guid=e.guid=e.guid||le.guid++,o):t},access:function(e,n,i,o,r,a,s){var l=0,d=e.length,c=null==i;if("object"===le.type(i)){r=!0;for(l in i)le.access(e,n,l,i[l],!0,a,s)}else if(o!==t&&(r=!0,le.isFunction(o)||(s=!0),c&&(s?(n.call(e,o),n=null):(c=n,n=function(e,t,n){return c.call(le(e),n)})),n))for(;d>l;l++)n(e[l],i,s?o:o.call(e[l],l,n(e[l],i)));return r?e:c?n.call(e):d?n(e[0],i):a},now:function(){return(new Date).getTime()}}),le.ready.promise=function(t){if(!G)if(G=le.Deferred(),"complete"===W.readyState)setTimeout(le.ready);else if(W.addEventListener)W.addEventListener("DOMContentLoaded",Ae,!1),e.addEventListener("load",Ae,!1);else{W.attachEvent("onreadystatechange",Ae),e.attachEvent("onload",Ae);var n=!1;try{n=null==e.frameElement&&W.documentElement}catch(i){}n&&n.doScroll&&function o(){if(!le.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}Ne(),le.ready()}}()}return G.promise(t)},le.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Z["[object "+t+"]"]=t.toLowerCase()}),j=le(W);var _e={};le.Callbacks=function(e){e="string"==typeof e?_e[e]||i(e):le.extend({},e);var n,o,r,a,s,l,d=[],c=!e.once&&[],u=function(t){for(o=e.memory&&t,r=!0,s=l||0,l=0,a=d.length,n=!0;d&&a>s;s++)if(d[s].apply(t[0],t[1])===!1&&e.stopOnFalse){o=!1;break}n=!1,d&&(c?c.length&&u(c.shift()):o?d=[]:h.disable())},h={add:function(){if(d){var t=d.length;!function i(t){le.each(t,function(t,n){var o=le.type(n);"function"===o?e.unique&&h.has(n)||d.push(n):n&&n.length&&"string"!==o&&i(n)})}(arguments),n?a=d.length:o&&(l=t,u(o))}return this},remove:function(){return d&&le.each(arguments,function(e,t){for(var i;(i=le.inArray(t,d,i))>-1;)d.splice(i,1),n&&(a>=i&&a--,s>=i&&s--)}),this},has:function(e){return e?le.inArray(e,d)>-1:!(!d||!d.length)},empty:function(){return d=[],this},disable:function(){return d=c=o=t,this},disabled:function(){return!d},lock:function(){return c=t,o||h.disable(),this},locked:function(){return!c},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!d||r&&!c||(n?c.push(t):u(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!r}};return h},le.extend({Deferred:function(e){var t=[["resolve","done",le.Callbacks("once memory"),"resolved"],["reject","fail",le.Callbacks("once memory"),"rejected"],["notify","progress",le.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return le.Deferred(function(n){le.each(t,function(t,r){var a=r[0],s=le.isFunction(e[t])&&e[t];o[r[1]](function(){var e=s&&s.apply(this,arguments);e&&le.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===i?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?le.extend(e,i):i}},o={};return i.pipe=i.then,le.each(t,function(e,r){var a=r[2],s=r[3];i[r[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?i:this,arguments),this},o[r[0]+"With"]=a.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,i,o=0,r=ie.call(arguments),a=r.length,s=1!==a||e&&le.isFunction(e.promise)?a:0,l=1===s?e:le.Deferred(),d=function(e,n,i){return function(o){n[e]=this,i[e]=arguments.length>1?ie.call(arguments):o,i===t?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(a>1)for(t=Array(a),n=Array(a),i=Array(a);a>o;o++)r[o]&&le.isFunction(r[o].promise)?r[o].promise().done(d(o,i,r)).fail(l.reject).progress(d(o,n,t)):--s;return s||l.resolveWith(i,r),l.promise()}}),le.support=function(){var t,n,i,o,r,a,s,l,d,c,u=W.createElement("div");if(u.setAttribute("className","t"),u.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=u.getElementsByTagName("*"),i=u.getElementsByTagName("a")[0],!n||!i||!n.length)return{};r=W.createElement("select"),s=r.appendChild(W.createElement("option")),o=u.getElementsByTagName("input")[0],i.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:"t"!==u.className,leadingWhitespace:3===u.firstChild.nodeType,tbody:!u.getElementsByTagName("tbody").length,htmlSerialize:!!u.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:"/a"===i.getAttribute("href"),opacity:/^0.5/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:!!o.value,optSelected:s.selected,enctype:!!W.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==W.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===W.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,r.disabled=!0,t.optDisabled=!s.disabled;try{delete u.test}catch(h){t.deleteExpando=!1}o=W.createElement("input"),o.setAttribute("value",""),t.input=""===o.getAttribute("value"),o.value="t",o.setAttribute("type","radio"),t.radioValue="t"===o.value,o.setAttribute("checked","t"),o.setAttribute("name","t"),a=W.createDocumentFragment(),a.appendChild(o),t.appendChecked=o.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,u.attachEvent&&(u.attachEvent("onclick",function(){t.noCloneEvent=!1}),u.cloneNode(!0).click());for(c in{submit:!0,change:!0,focusin:!0})u.setAttribute(l="on"+c,"t"),t[c+"Bubbles"]=l in e||u.attributes[l].expando===!1;return u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===u.style.backgroundClip,le(function(){var n,i,o,r="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=W.getElementsByTagName("body")[0];a&&(n=W.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(u),u.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=u.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",d=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",t.reliableHiddenOffsets=d&&0===o[0].offsetHeight,u.innerHTML="",u.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===u.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==a.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(u,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(u,null)||{width:"4px"}).width,i=u.appendChild(W.createElement("div")),i.style.cssText=u.style.cssText=r,i.style.marginRight=i.style.width="0",u.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight)),typeof u.style.zoom!==q&&(u.innerHTML="",u.style.cssText=r+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===u.offsetWidth,u.style.display="block",u.innerHTML="<div></div>",u.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==u.offsetWidth,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=u=o=i=null)}),n=r=a=s=i=o=null,t}();var Ce=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,xe=/([A-Z])/g;le.extend({cache:{},expando:"jQuery"+(ee+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?le.cache[e[le.expando]]:e[le.expando],!!e&&!s(e)},data:function(e,t,n){return o(e,t,n)},removeData:function(e,t){return r(e,t)},_data:function(e,t,n){return o(e,t,n,!0)},_removeData:function(e,t){return r(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&le.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),le.fn.extend({data:function(e,n){var i,o,r=this[0],s=0,l=null;if(e===t){if(this.length&&(l=le.data(r),1===r.nodeType&&!le._data(r,"parsedAttrs"))){for(i=r.attributes;i.length>s;s++)o=i[s].name,o.indexOf("data-")||(o=le.camelCase(o.slice(5)),a(r,o,l[o]));le._data(r,"parsedAttrs",!0)}return l}return"object"==typeof e?this.each(function(){le.data(this,e)}):le.access(this,function(n){return n===t?r?a(r,e,le.data(r,e)):null:(this.each(function(){le.data(this,e,n)}),t)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){le.removeData(this,e)})}}),le.extend({queue:function(e,n,i){var o;return e?(n=(n||"fx")+"queue",o=le._data(e,n),i&&(!o||le.isArray(i)?o=le._data(e,n,le.makeArray(i)):o.push(i)),o||[]):t},dequeue:function(e,t){t=t||"fx";var n=le.queue(e,t),i=n.length,o=n.shift(),r=le._queueHooks(e,t),a=function(){le.dequeue(e,t)};"inprogress"===o&&(o=n.shift(),i--),r.cur=o,o&&("fx"===t&&n.unshift("inprogress"),delete r.stop,o.call(e,a,r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return le._data(e,n)||le._data(e,n,{empty:le.Callbacks("once memory").add(function(){le._removeData(e,t+"queue"),le._removeData(e,n)})})}}),le.fn.extend({queue:function(e,n){var i=2;return"string"!=typeof e&&(n=e,e="fx",i--),i>arguments.length?le.queue(this[0],e):n===t?this:this.each(function(){var t=le.queue(this,e,n);le._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&le.dequeue(this,e)})},dequeue:function(e){return this.each(function(){le.dequeue(this,e)})},delay:function(e,t){return e=le.fx?le.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var i,o=1,r=le.Deferred(),a=this,s=this.length,l=function(){--o||r.resolveWith(a,[a])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";s--;)i=le._data(a[s],e+"queueHooks"),i&&i.empty&&(o++,i.empty.add(l));return l(),r.promise(n)}});var Se,Te,ke=/[\t\r\n]/g,$e=/\r/g,De=/^(?:input|select|textarea|button|object)$/i,Me=/^(?:a|area)$/i,Ee=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Pe=/^(?:checked|selected)$/i,Ie=le.support.getSetAttribute,Oe=le.support.input;le.fn.extend({attr:function(e,t){return le.access(this,le.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){le.removeAttr(this,e)})},prop:function(e,t){return le.access(this,le.prop,e,t,arguments.length>1)},removeProp:function(e){return e=le.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,i,o,r,a=0,s=this.length,l="string"==typeof e&&e;if(le.isFunction(e))return this.each(function(t){le(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(ce)||[];s>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ke," "):" ")){for(r=0;o=t[r++];)0>i.indexOf(" "+o+" ")&&(i+=o+" ");n.className=le.trim(i)}return this},removeClass:function(e){var t,n,i,o,r,a=0,s=this.length,l=0===arguments.length||"string"==typeof e&&e;if(le.isFunction(e))return this.each(function(t){le(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(ce)||[];s>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ke," "):"")){for(r=0;o=t[r++];)for(;i.indexOf(" "+o+" ")>=0;)i=i.replace(" "+o+" "," ");n.className=e?le.trim(i):""}return this},toggleClass:function(e,t){var n=typeof e,i="boolean"==typeof t;return le.isFunction(e)?this.each(function(n){le(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var o,r=0,a=le(this),s=t,l=e.match(ce)||[];o=l[r++];)s=i?s:!a.hasClass(o),a[s?"addClass":"removeClass"](o);else(n===q||"boolean"===n)&&(this.className&&le._data(this,"__className__",this.className),this.className=this.className||e===!1?"":le._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(ke," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,i,o,r=this[0];return arguments.length?(o=le.isFunction(e),this.each(function(n){var r,a=le(this);1===this.nodeType&&(r=o?e.call(this,n,a.val()):e,null==r?r="":"number"==typeof r?r+="":le.isArray(r)&&(r=le.map(r,function(e){return null==e?"":e+""})),i=le.valHooks[this.type]||le.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,r,"value")!==t||(this.value=r))})):r?(i=le.valHooks[r.type]||le.valHooks[r.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(r,"value"))!==t?n:(n=r.value,"string"==typeof n?n.replace($e,""):null==n?"":n)):void 0}}),le.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n,i=e.options,o=e.selectedIndex,r="select-one"===e.type||0>o,a=r?null:[],s=r?o+1:i.length,l=0>o?s:r?o:0;s>l;l++)if(n=i[l],!(!n.selected&&l!==o||(le.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&le.nodeName(n.parentNode,"optgroup"))){if(t=le(n).val(),r)return t;a.push(t)}return a},set:function(e,t){var n=le.makeArray(t);return le(e).find("option").each(function(){this.selected=le.inArray(le(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,i){var o,r,a,s=e.nodeType;return e&&3!==s&&8!==s&&2!==s?typeof e.getAttribute===q?le.prop(e,n,i):(r=1!==s||!le.isXMLDoc(e),r&&(n=n.toLowerCase(),o=le.attrHooks[n]||(Ee.test(n)?Te:Se)),i===t?o&&r&&"get"in o&&null!==(a=o.get(e,n))?a:(typeof e.getAttribute!==q&&(a=e.getAttribute(n)),null==a?t:a):null!==i?o&&r&&"set"in o&&(a=o.set(e,i,n))!==t?a:(e.setAttribute(n,i+""),i):(le.removeAttr(e,n),t)):void 0},removeAttr:function(e,t){var n,i,o=0,r=t&&t.match(ce);if(r&&1===e.nodeType)for(;n=r[o++];)i=le.propFix[n]||n,Ee.test(n)?!Ie&&Pe.test(n)?e[le.camelCase("default-"+n)]=e[i]=!1:e[i]=!1:le.attr(e,n,""),e.removeAttribute(Ie?n:i)},attrHooks:{type:{set:function(e,t){if(!le.support.radioValue&&"radio"===t&&le.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,i){var o,r,a,s=e.nodeType;return e&&3!==s&&8!==s&&2!==s?(a=1!==s||!le.isXMLDoc(e),a&&(n=le.propFix[n]||n,r=le.propHooks[n]),i!==t?r&&"set"in r&&(o=r.set(e,i,n))!==t?o:e[n]=i:r&&"get"in r&&null!==(o=r.get(e,n))?o:e[n]):void 0},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):De.test(e.nodeName)||Me.test(e.nodeName)&&e.href?0:t}}}}),Te={get:function(e,n){var i=le.prop(e,n),o="boolean"==typeof i&&e.getAttribute(n),r="boolean"==typeof i?Oe&&Ie?null!=o:Pe.test(n)?e[le.camelCase("default-"+n)]:!!o:e.getAttributeNode(n);return r&&r.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?le.removeAttr(e,n):Oe&&Ie||!Pe.test(n)?e.setAttribute(!Ie&&le.propFix[n]||n,n):e[le.camelCase("default-"+n)]=e[n]=!0,n}},Oe&&Ie||(le.attrHooks.value={get:function(e,n){var i=e.getAttributeNode(n);return le.nodeName(e,"input")?e.defaultValue:i&&i.specified?i.value:t},set:function(e,n,i){return le.nodeName(e,"input")?(e.defaultValue=n,t):Se&&Se.set(e,n,i)}}),Ie||(Se=le.valHooks.button={get:function(e,n){var i=e.getAttributeNode(n);return i&&("id"===n||"name"===n||"coords"===n?""!==i.value:i.specified)?i.value:t},set:function(e,n,i){var o=e.getAttributeNode(i);return o||e.setAttributeNode(o=e.ownerDocument.createAttribute(i)),o.value=n+="","value"===i||n===e.getAttribute(i)?n:t}},le.attrHooks.contenteditable={get:Se.get,set:function(e,t,n){Se.set(e,""===t?!1:t,n)}},le.each(["width","height"],function(e,n){le.attrHooks[n]=le.extend(le.attrHooks[n],{set:function(e,i){return""===i?(e.setAttribute(n,"auto"),i):t}})})),le.support.hrefNormalized||(le.each(["href","src","width","height"],function(e,n){le.attrHooks[n]=le.extend(le.attrHooks[n],{get:function(e){var i=e.getAttribute(n,2);return null==i?t:i}})}),le.each(["href","src"],function(e,t){le.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),le.support.style||(le.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),le.support.optSelected||(le.propHooks.selected=le.extend(le.propHooks.selected,{
get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),le.support.enctype||(le.propFix.enctype="encoding"),le.support.checkOn||le.each(["radio","checkbox"],function(){le.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),le.each(["radio","checkbox"],function(){le.valHooks[this]=le.extend(le.valHooks[this],{set:function(e,n){return le.isArray(n)?e.checked=le.inArray(le(e).val(),n)>=0:t}})});var Re=/^(?:input|select|textarea)$/i,Fe=/^key/,Ve=/^(?:mouse|contextmenu)|click/,Le=/^(?:focusinfocus|focusoutblur)$/,Ue=/^([^.]*)(?:\.(.+)|)$/;le.event={global:{},add:function(e,n,i,o,r){var a,s,l,d,c,u,h,p,g,f,m,v=le._data(e);if(v){for(i.handler&&(d=i,i=d.handler,r=d.selector),i.guid||(i.guid=le.guid++),(s=v.events)||(s=v.events={}),(u=v.handle)||(u=v.handle=function(e){return typeof le===q||e&&le.event.triggered===e.type?t:le.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=(n||"").match(ce)||[""],l=n.length;l--;)a=Ue.exec(n[l])||[],g=m=a[1],f=(a[2]||"").split(".").sort(),c=le.event.special[g]||{},g=(r?c.delegateType:c.bindType)||g,c=le.event.special[g]||{},h=le.extend({type:g,origType:m,data:o,handler:i,guid:i.guid,selector:r,needsContext:r&&le.expr.match.needsContext.test(r),namespace:f.join(".")},d),(p=s[g])||(p=s[g]=[],p.delegateCount=0,c.setup&&c.setup.call(e,o,f,u)!==!1||(e.addEventListener?e.addEventListener(g,u,!1):e.attachEvent&&e.attachEvent("on"+g,u))),c.add&&(c.add.call(e,h),h.handler.guid||(h.handler.guid=i.guid)),r?p.splice(p.delegateCount++,0,h):p.push(h),le.event.global[g]=!0;e=null}},remove:function(e,t,n,i,o){var r,a,s,l,d,c,u,h,p,g,f,m=le.hasData(e)&&le._data(e);if(m&&(c=m.events)){for(t=(t||"").match(ce)||[""],d=t.length;d--;)if(s=Ue.exec(t[d])||[],p=f=s[1],g=(s[2]||"").split(".").sort(),p){for(u=le.event.special[p]||{},p=(i?u.delegateType:u.bindType)||p,h=c[p]||[],s=s[2]&&RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=r=h.length;r--;)a=h[r],!o&&f!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||i&&i!==a.selector&&("**"!==i||!a.selector)||(h.splice(r,1),a.selector&&h.delegateCount--,u.remove&&u.remove.call(e,a));l&&!h.length&&(u.teardown&&u.teardown.call(e,g,m.handle)!==!1||le.removeEvent(e,p,m.handle),delete c[p])}else for(p in c)le.event.remove(e,p+t[d],n,i,!0);le.isEmptyObject(c)&&(delete m.handle,le._removeData(e,"events"))}},trigger:function(n,i,o,r){var a,s,l,d,c,u,h,p=[o||W],g=ae.call(n,"type")?n.type:n,f=ae.call(n,"namespace")?n.namespace.split("."):[];if(l=u=o=o||W,3!==o.nodeType&&8!==o.nodeType&&!Le.test(g+le.event.triggered)&&(g.indexOf(".")>=0&&(f=g.split("."),g=f.shift(),f.sort()),s=0>g.indexOf(":")&&"on"+g,n=n[le.expando]?n:new le.Event(g,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=f.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=o),i=null==i?[n]:le.makeArray(i,[n]),c=le.event.special[g]||{},r||!c.trigger||c.trigger.apply(o,i)!==!1)){if(!r&&!c.noBubble&&!le.isWindow(o)){for(d=c.delegateType||g,Le.test(d+g)||(l=l.parentNode);l;l=l.parentNode)p.push(l),u=l;u===(o.ownerDocument||W)&&p.push(u.defaultView||u.parentWindow||e)}for(h=0;(l=p[h++])&&!n.isPropagationStopped();)n.type=h>1?d:c.bindType||g,a=(le._data(l,"events")||{})[n.type]&&le._data(l,"handle"),a&&a.apply(l,i),a=s&&l[s],a&&le.acceptData(l)&&a.apply&&a.apply(l,i)===!1&&n.preventDefault();if(n.type=g,!(r||n.isDefaultPrevented()||c._default&&c._default.apply(o.ownerDocument,i)!==!1||"click"===g&&le.nodeName(o,"a")||!le.acceptData(o)||!s||!o[g]||le.isWindow(o))){u=o[s],u&&(o[s]=null),le.event.triggered=g;try{o[g]()}catch(m){}le.event.triggered=t,u&&(o[s]=u)}return n.result}},dispatch:function(e){e=le.event.fix(e);var n,i,o,r,a,s=[],l=ie.call(arguments),d=(le._data(this,"events")||{})[e.type]||[],c=le.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(s=le.event.handlers.call(this,e,d),n=0;(r=s[n++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,a=0;(o=r.handlers[a++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,i=((le.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l),i!==t&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var i,o,r,a,s=[],l=n.delegateCount,d=e.target;if(l&&d.nodeType&&(!e.button||"click"!==e.type))for(;d!=this;d=d.parentNode||this)if(1===d.nodeType&&(d.disabled!==!0||"click"!==e.type)){for(r=[],a=0;l>a;a++)o=n[a],i=o.selector+" ",r[i]===t&&(r[i]=o.needsContext?le(i,this).index(d)>=0:le.find(i,this,null,[d]).length),r[i]&&r.push(o);r.length&&s.push({elem:d,handlers:r})}return n.length>l&&s.push({elem:this,handlers:n.slice(l)}),s},fix:function(e){if(e[le.expando])return e;var t,n,i,o=e.type,r=e,a=this.fixHooks[o];for(a||(this.fixHooks[o]=a=Ve.test(o)?this.mouseHooks:Fe.test(o)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,e=new le.Event(r),t=i.length;t--;)n=i[t],e[n]=r[n];return e.target||(e.target=r.srcElement||W),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,r):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var i,o,r,a=n.button,s=n.fromElement;return null==e.pageX&&null!=n.clientX&&(o=e.target.ownerDocument||W,r=o.documentElement,i=o.body,e.pageX=n.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=n.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?n.toElement:s),e.which||a===t||(e.which=1&a?1:2&a?3:4&a?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return le.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==W.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===W.activeElement&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var o=le.extend(new le.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?le.event.trigger(o,null,t):le.event.dispatch.call(t,o),o.isDefaultPrevented()&&n.preventDefault()}},le.removeEvent=W.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&(typeof e[i]===q&&(e[i]=null),e.detachEvent(i,n))},le.Event=function(e,n){return this instanceof le.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?l:d):this.type=e,n&&le.extend(this,n),this.timeStamp=e&&e.timeStamp||le.now(),this[le.expando]=!0,t):new le.Event(e,n)},le.Event.prototype={isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=l,this.stopPropagation()}},le.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){le.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,o=e.relatedTarget,r=e.handleObj;return(!o||o!==i&&!le.contains(i,o))&&(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}}),le.support.submitBubbles||(le.event.special.submit={setup:function(){return le.nodeName(this,"form")?!1:(le.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,i=le.nodeName(n,"input")||le.nodeName(n,"button")?n.form:t;i&&!le._data(i,"submitBubbles")&&(le.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),le._data(i,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&le.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return le.nodeName(this,"form")?!1:(le.event.remove(this,"._submit"),t)}}),le.support.changeBubbles||(le.event.special.change={setup:function(){return Re.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(le.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),le.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),le.event.simulate("change",this,e,!0)})),!1):(le.event.add(this,"beforeactivate._change",function(e){var t=e.target;Re.test(t.nodeName)&&!le._data(t,"changeBubbles")&&(le.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||le.event.simulate("change",this.parentNode,e,!0)}),le._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return le.event.remove(this,"._change"),!Re.test(this.nodeName)}}),le.support.focusinBubbles||le.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,i=function(e){le.event.simulate(t,e.target,le.event.fix(e),!0)};le.event.special[t]={setup:function(){0===n++&&W.addEventListener(e,i,!0)},teardown:function(){0===--n&&W.removeEventListener(e,i,!0)}}}),le.fn.extend({on:function(e,n,i,o,r){var a,s;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=t);for(a in e)this.on(a,n,i,e[a],r);return this}if(null==i&&null==o?(o=n,i=n=t):null==o&&("string"==typeof n?(o=i,i=t):(o=i,i=n,n=t)),o===!1)o=d;else if(!o)return this;return 1===r&&(s=o,o=function(e){return le().off(e),s.apply(this,arguments)},o.guid=s.guid||(s.guid=le.guid++)),this.each(function(){le.event.add(this,e,o,i,n)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,n,i){var o,r;if(e&&e.preventDefault&&e.handleObj)return o=e.handleObj,le(e.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof e){for(r in e)this.off(r,n,e[r]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=t),i===!1&&(i=d),this.each(function(){le.event.remove(this,e,i,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){le.event.trigger(e,t,this)})},triggerHandler:function(e,n){var i=this[0];return i?le.event.trigger(e,n,i,!0):t}}),function(e,t){function n(e){return ge.test(e+"")}function i(){var e,t=[];return e=function(n,i){return t.push(n+=" ")>C.cacheLength&&delete e[t.shift()],e[n]=i}}function o(e){return e[L]=!0,e}function r(e){var t=M.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function a(e,t,n,i){var o,r,a,s,l,d,c,p,g,f;if((t?t.ownerDocument||t:U)!==M&&D(t),t=t||M,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(!P&&!i){if(o=fe.exec(e))if(a=o[1]){if(9===s){if(r=t.getElementById(a),!r||!r.parentNode)return n;if(r.id===a)return n.push(r),n}else if(t.ownerDocument&&(r=t.ownerDocument.getElementById(a))&&F(t,r)&&r.id===a)return n.push(r),n}else{if(o[2])return J.apply(n,Z.call(t.getElementsByTagName(e),0)),n;if((a=o[3])&&H.getByClassName&&t.getElementsByClassName)return J.apply(n,Z.call(t.getElementsByClassName(a),0)),n}if(H.qsa&&!I.test(e)){if(c=!0,p=L,g=t,f=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(d=u(e),(c=t.getAttribute("id"))?p=c.replace(be,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",l=d.length;l--;)d[l]=p+h(d[l]);g=pe.test(e)&&t.parentNode||t,f=d.join(",")}if(f)try{return J.apply(n,Z.call(g.querySelectorAll(f),0)),n}catch(m){}finally{c||t.removeAttribute("id")}}}return w(e.replace(ae,"$1"),t,n,i)}function s(e,t){var n=t&&e,i=n&&(~t.sourceIndex||W)-(~e.sourceIndex||W);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function l(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function d(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return o(function(t){return t=+t,o(function(n,i){for(var o,r=e([],n.length,t),a=r.length;a--;)n[o=r[a]]&&(n[o]=!(i[o]=n[o]))})})}function u(e,t){var n,i,o,r,s,l,d,c=G[e+" "];if(c)return t?0:c.slice(0);for(s=e,l=[],d=C.preFilter;s;){(!n||(i=se.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),n=!1,(i=de.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(ae," ")}),s=s.slice(n.length));for(r in C.filter)!(i=he[r].exec(s))||d[r]&&!(i=d[r](i))||(n=i.shift(),o.push({value:n,type:r,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?a.error(e):G(e,l).slice(0)}function h(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function p(e,t,n){var i=t.dir,o=n&&"parentNode"===i,r=z++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,a){var s,l,d,c=B+" "+r;if(a){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||o)if(d=t[L]||(t[L]={}),(l=d[i])&&l[0]===c){if((s=l[1])===!0||s===_)return s===!0}else if(l=d[i]=[c],l[1]=e(t,n,a)||_,l[1]===!0)return!0}}function g(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function f(e,t,n,i,o){for(var r,a=[],s=0,l=e.length,d=null!=t;l>s;s++)(r=e[s])&&(!n||n(r,i,o))&&(a.push(r),d&&t.push(s));return a}function m(e,t,n,i,r,a){return i&&!i[L]&&(i=m(i)),r&&!r[L]&&(r=m(r,a)),o(function(o,a,s,l){var d,c,u,h=[],p=[],g=a.length,m=o||y(t||"*",s.nodeType?[s]:s,[]),v=!e||!o&&t?m:f(m,h,e,s,l),b=n?r||(o?e:g||i)?[]:a:v;if(n&&n(v,b,s,l),i)for(d=f(b,p),i(d,[],s,l),c=d.length;c--;)(u=d[c])&&(b[p[c]]=!(v[p[c]]=u));if(o){if(r||e){if(r){for(d=[],c=b.length;c--;)(u=b[c])&&d.push(v[c]=u);r(null,b=[],d,l)}for(c=b.length;c--;)(u=b[c])&&(d=r?Q.call(o,u):h[c])>-1&&(o[d]=!(a[d]=u))}}else b=f(b===a?b.splice(g,b.length):b),r?r(null,a,b,l):J.apply(a,b)})}function v(e){for(var t,n,i,o=e.length,r=C.relative[e[0].type],a=r||C.relative[" "],s=r?1:0,l=p(function(e){return e===t},a,!0),d=p(function(e){return Q.call(t,e)>-1},a,!0),c=[function(e,n,i){return!r&&(i||n!==$)||((t=n).nodeType?l(e,n,i):d(e,n,i))}];o>s;s++)if(n=C.relative[e[s].type])c=[p(g(c),n)];else{if(n=C.filter[e[s].type].apply(null,e[s].matches),n[L]){for(i=++s;o>i&&!C.relative[e[i].type];i++);return m(s>1&&g(c),s>1&&h(e.slice(0,s-1)).replace(ae,"$1"),n,i>s&&v(e.slice(s,i)),o>i&&v(e=e.slice(i)),o>i&&h(e))}c.push(n)}return g(c)}function b(e,t){var n=0,i=t.length>0,r=e.length>0,s=function(o,s,l,d,c){var u,h,p,g=[],m=0,v="0",b=o&&[],y=null!=c,w=$,A=o||r&&C.find.TAG("*",c&&s.parentNode||s),N=B+=null==w?1:Math.random()||.1;for(y&&($=s!==M&&s,_=n);null!=(u=A[v]);v++){if(r&&u){for(h=0;p=e[h++];)if(p(u,s,l)){d.push(u);break}y&&(B=N,_=++n)}i&&((u=!p&&u)&&m--,o&&b.push(u))}if(m+=v,i&&v!==m){for(h=0;p=t[h++];)p(b,g,s,l);if(o){if(m>0)for(;v--;)b[v]||g[v]||(g[v]=X.call(d));g=f(g)}J.apply(d,g),y&&!o&&g.length>0&&m+t.length>1&&a.uniqueSort(d)}return y&&(B=N,$=w),b};return i?o(s):s}function y(e,t,n){for(var i=0,o=t.length;o>i;i++)a(e,t[i],n);return n}function w(e,t,n,i){var o,r,a,s,l,d=u(e);if(!i&&1===d.length){if(r=d[0]=d[0].slice(0),r.length>2&&"ID"===(a=r[0]).type&&9===t.nodeType&&!P&&C.relative[r[1].type]){if(t=C.find.ID(a.matches[0].replace(we,Ae),t)[0],!t)return n;e=e.slice(r.shift().value.length)}for(o=he.needsContext.test(e)?0:r.length;o--&&(a=r[o],!C.relative[s=a.type]);)if((l=C.find[s])&&(i=l(a.matches[0].replace(we,Ae),pe.test(r[0].type)&&t.parentNode||t))){if(r.splice(o,1),e=i.length&&h(r),!e)return J.apply(n,Z.call(i,0)),n;break}}return T(e,d)(i,t,P,n,pe.test(e)),n}function A(){}var N,_,C,x,S,T,k,$,D,M,E,P,I,O,R,F,V,L="sizzle"+-new Date,U=e.document,H={},B=0,z=0,Y=i(),G=i(),j=i(),q=typeof t,W=1<<31,K=[],X=K.pop,J=K.push,Z=K.slice,Q=K.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ne=te.replace("w","w#"),ie="([*^$|!~]?=)",oe="\\["+ee+"*("+te+")"+ee+"*(?:"+ie+ee+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ne+")|)|)"+ee+"*\\]",re=":("+te+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+oe.replace(3,8)+")*)|.*)\\)|)",ae=RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),se=RegExp("^"+ee+"*,"+ee+"*"),de=RegExp("^"+ee+"*([\\x20\\t\\r\\n\\f>+~])"+ee+"*"),ce=RegExp(re),ue=RegExp("^"+ne+"$"),he={ID:RegExp("^#("+te+")"),CLASS:RegExp("^\\.("+te+")"),NAME:RegExp("^\\[name=['\"]?("+te+")['\"]?\\]"),TAG:RegExp("^("+te.replace("w","w*")+")"),ATTR:RegExp("^"+oe),PSEUDO:RegExp("^"+re),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),needsContext:RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},pe=/[\x20\t\r\n\f]*[+~]/,ge=/^[^{]+\{\s*\[native code/,fe=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,me=/^(?:input|select|textarea|button)$/i,ve=/^h\d$/i,be=/'|\\/g,ye=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,we=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,Ae=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{Z.call(U.documentElement.childNodes,0)[0].nodeType}catch(Ne){Z=function(e){for(var t,n=[];t=this[e++];)n.push(t);return n}}S=a.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},D=a.setDocument=function(e){var i=e?e.ownerDocument||e:U;return i!==M&&9===i.nodeType&&i.documentElement?(M=i,E=i.documentElement,P=S(i),H.tagNameNoComments=r(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),H.attributes=r(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),H.getByClassName=r(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),H.getByName=r(function(e){e.id=L+0,e.innerHTML="<a name='"+L+"'></a><div name='"+L+"'></div>",E.insertBefore(e,E.firstChild);var t=i.getElementsByName&&i.getElementsByName(L).length===2+i.getElementsByName(L+0).length;return H.getIdNotName=!i.getElementById(L),E.removeChild(e),t}),C.attrHandle=r(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==q&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},H.getIdNotName?(C.find.ID=function(e,t){if(typeof t.getElementById!==q&&!P){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(e){var t=e.replace(we,Ae);return function(e){return e.getAttribute("id")===t}}):(C.find.ID=function(e,n){if(typeof n.getElementById!==q&&!P){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==q&&i.getAttributeNode("id").value===e?[i]:t:[]}},C.filter.ID=function(e){var t=e.replace(we,Ae);return function(e){var n=typeof e.getAttributeNode!==q&&e.getAttributeNode("id");return n&&n.value===t}}),C.find.TAG=H.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==q?n.getElementsByTagName(e):t}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},C.find.NAME=H.getByName&&function(e,n){return typeof n.getElementsByName!==q?n.getElementsByName(name):t},C.find.CLASS=H.getByClassName&&function(e,n){return typeof n.getElementsByClassName===q||P?t:n.getElementsByClassName(e)},O=[],I=[":focus"],(H.qsa=n(i.querySelectorAll))&&(r(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||I.push("\\["+ee+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||I.push(":checked")}),r(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&I.push("[*^$]="+ee+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),I.push(",.*:")})),(H.matchesSelector=n(R=E.matchesSelector||E.mozMatchesSelector||E.webkitMatchesSelector||E.oMatchesSelector||E.msMatchesSelector))&&r(function(e){H.disconnectedMatch=R.call(e,"div"),R.call(e,"[s!='']:x"),O.push("!=",re)}),I=RegExp(I.join("|")),O=RegExp(O.join("|")),F=n(E.contains)||E.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},V=E.compareDocumentPosition?function(e,t){var n;return e===t?(k=!0,0):(n=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&n||e.parentNode&&11===e.parentNode.nodeType?e===i||F(U,e)?-1:t===i||F(U,t)?1:0:4&n?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var n,o=0,r=e.parentNode,a=t.parentNode,l=[e],d=[t];if(e===t)return k=!0,0;if(!r||!a)return e===i?-1:t===i?1:r?-1:a?1:0;if(r===a)return s(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)d.unshift(n);for(;l[o]===d[o];)o++;return o?s(l[o],d[o]):l[o]===U?-1:d[o]===U?1:0},k=!1,[0,0].sort(V),H.detectDuplicates=k,M):M},a.matches=function(e,t){return a(e,null,null,t)},a.matchesSelector=function(e,t){if((e.ownerDocument||e)!==M&&D(e),t=t.replace(ye,"='$1']"),!(!H.matchesSelector||P||O&&O.test(t)||I.test(t)))try{var n=R.call(e,t);if(n||H.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(i){}return a(t,M,null,[e]).length>0},a.contains=function(e,t){return(e.ownerDocument||e)!==M&&D(e),F(e,t)},a.attr=function(e,t){var n;return(e.ownerDocument||e)!==M&&D(e),P||(t=t.toLowerCase()),(n=C.attrHandle[t])?n(e):P||H.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},a.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},a.uniqueSort=function(e){var t,n=[],i=1,o=0;if(k=!H.detectDuplicates,e.sort(V),k){for(;t=e[i];i++)t===e[i-1]&&(o=n.push(i));for(;o--;)e.splice(n[o],1)}return e},x=a.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=x(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i];i++)n+=x(t);return n},C=a.selectors={cacheLength:50,createPseudo:o,match:he,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,Ae),e[3]=(e[4]||e[5]||"").replace(we,Ae),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||a.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&a.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return he.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&ce.test(n)&&(t=u(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(we,Ae).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=Y[e+" "];return t||(t=RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&Y(e,function(e){return t.test(e.className||typeof e.getAttribute!==q&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(i){var o=a.attr(i,e);return null==o?"!="===t:t?(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o+" ").indexOf(n)>-1:"|="===t?o===n||o.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,i,o){var r="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var d,c,u,h,p,g,f=r!==a?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),b=!l&&!s;if(m){if(r){for(;f;){for(u=t;u=u[f];)if(s?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;g=f="only"===e&&!g&&"nextSibling"}return!0}if(g=[a?m.firstChild:m.lastChild],a&&b){for(c=m[L]||(m[L]={}),d=c[e]||[],p=d[0]===B&&d[1],h=d[0]===B&&d[2],u=p&&m.childNodes[p];u=++p&&u&&u[f]||(h=p=0)||g.pop();)if(1===u.nodeType&&++h&&u===t){c[e]=[B,p,h];break}}else if(b&&(d=(t[L]||(t[L]={}))[e])&&d[0]===B)h=d[1];else for(;(u=++p&&u&&u[f]||(h=p=0)||g.pop())&&((s?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++h||(b&&((u[L]||(u[L]={}))[e]=[B,h]),u!==t)););return h-=o,h===i||0===h%i&&h/i>=0}}},PSEUDO:function(e,t){var n,i=C.pseudos[e]||C.setFilters[e.toLowerCase()]||a.error("unsupported pseudo: "+e);return i[L]?i(t):i.length>1?(n=[e,e,"",t],C.setFilters.hasOwnProperty(e.toLowerCase())?o(function(e,n){for(var o,r=i(e,t),a=r.length;a--;)o=Q.call(e,r[a]),e[o]=!(n[o]=r[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:o(function(e){var t=[],n=[],i=T(e.replace(ae,"$1"));return i[L]?o(function(e,t,n,o){for(var r,a=i(e,null,o,[]),s=e.length;s--;)(r=a[s])&&(e[s]=!(t[s]=r))}):function(e,o,r){return t[0]=e,i(t,null,r,n),!n.pop()}}),has:o(function(e){return function(t){return a(e,t).length>0}}),contains:o(function(e){return function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:o(function(e){return ue.test(e||"")||a.error("unsupported lang: "+e),e=e.replace(we,Ae).toLowerCase(),function(t){var n;do if(n=P?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===E},focus:function(e){return e===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return ve.test(e.nodeName)},input:function(e){return me.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:c(function(e,t,n){for(var i=0>n?n+t:n;t>++i;)e.push(i);return e})}};for(N in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[N]=l(N);for(N in{submit:!0,reset:!0})C.pseudos[N]=d(N);T=a.compile=function(e,t){var n,i=[],o=[],r=j[e+" "];if(!r){for(t||(t=u(e)),n=t.length;n--;)r=v(t[n]),r[L]?i.push(r):o.push(r);r=j(e,b(o,i))}return r},C.pseudos.nth=C.pseudos.eq,C.filters=A.prototype=C.pseudos,C.setFilters=new A,D(),a.attr=le.attr,le.find=a,le.expr=a.selectors,le.expr[":"]=le.expr.pseudos,le.unique=a.uniqueSort,le.text=a.getText,le.isXMLDoc=a.isXML,le.contains=a.contains}(e);var He=/Until$/,Be=/^(?:parents|prev(?:Until|All))/,ze=/^.[^:#\[\.,]*$/,Ye=le.expr.match.needsContext,Ge={children:!0,contents:!0,next:!0,prev:!0};le.fn.extend({find:function(e){var t,n,i,o=this.length;if("string"!=typeof e)return i=this,this.pushStack(le(e).filter(function(){for(t=0;o>t;t++)if(le.contains(i[t],this))return!0}));for(n=[],t=0;o>t;t++)le.find(e,this[t],n);return n=this.pushStack(o>1?le.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=le(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(le.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(u(this,e,!1))},filter:function(e){return this.pushStack(u(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?Ye.test(e)?le(e,this.context).index(this[0])>=0:le.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var n,i=0,o=this.length,r=[],a=Ye.test(e)||"string"!=typeof e?le(e,t||this.context):0;o>i;i++)for(n=this[i];n&&n.ownerDocument&&n!==t&&11!==n.nodeType;){if(a?a.index(n)>-1:le.find.matchesSelector(n,e)){r.push(n);break}n=n.parentNode}return this.pushStack(r.length>1?le.unique(r):r)},index:function(e){return e?"string"==typeof e?le.inArray(this[0],le(e)):le.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?le(e,t):le.makeArray(e&&e.nodeType?[e]:e),i=le.merge(this.get(),n);return this.pushStack(le.unique(i))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),le.fn.andSelf=le.fn.addBack,le.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return le.dir(e,"parentNode")},parentsUntil:function(e,t,n){return le.dir(e,"parentNode",n)},next:function(e){return c(e,"nextSibling")},prev:function(e){return c(e,"previousSibling")},nextAll:function(e){return le.dir(e,"nextSibling")},prevAll:function(e){return le.dir(e,"previousSibling")},nextUntil:function(e,t,n){return le.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return le.dir(e,"previousSibling",n)},siblings:function(e){return le.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return le.sibling(e.firstChild)},contents:function(e){return le.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:le.merge([],e.childNodes)}},function(e,t){le.fn[e]=function(n,i){var o=le.map(this,t,n);return He.test(e)||(i=n),i&&"string"==typeof i&&(o=le.filter(i,o)),o=this.length>1&&!Ge[e]?le.unique(o):o,this.length>1&&Be.test(e)&&(o=o.reverse()),this.pushStack(o)}}),le.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?le.find.matchesSelector(t[0],e)?[t[0]]:[]:le.find.matches(e,t)},dir:function(e,n,i){for(var o=[],r=e[n];r&&9!==r.nodeType&&(i===t||1!==r.nodeType||!le(r).is(i));)1===r.nodeType&&o.push(r),r=r[n];return o},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var je="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",qe=/ jQuery\d+="(?:null|\d+)"/g,We=RegExp("<(?:"+je+")[\\s/>]","i"),Ke=/^\s+/,Xe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Je=/<([\w:]+)/,Ze=/<tbody/i,Qe=/<|&#?\w+;/,et=/<(?:script|style|link)/i,tt=/^(?:checkbox|radio)$/i,nt=/checked\s*(?:[^=]|=\s*.checked.)/i,it=/^$|\/(?:java|ecma)script/i,ot=/^true\/(.*)/,rt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,at={
option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:le.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},st=h(W),lt=st.appendChild(W.createElement("div"));at.optgroup=at.option,at.tbody=at.tfoot=at.colgroup=at.caption=at.thead,at.th=at.td,le.fn.extend({text:function(e){return le.access(this,function(e){return e===t?le.text(this):this.empty().append((this[0]&&this[0].ownerDocument||W).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(le.isFunction(e))return this.each(function(t){le(this).wrapAll(e.call(this,t))});if(this[0]){var t=le(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return le.isFunction(e)?this.each(function(t){le(this).wrapInner(e.call(this,t))}):this.each(function(){var t=le(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=le.isFunction(e);return this.each(function(n){le(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){le.nodeName(this,"body")||le(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=0;null!=(n=this[i]);i++)(!e||le.filter(e,[n]).length>0)&&(t||1!==n.nodeType||le.cleanData(y(n)),n.parentNode&&(t&&le.contains(n.ownerDocument,n)&&m(y(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&le.cleanData(y(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&le.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return le.clone(this,e,t)})},html:function(e){return le.access(this,function(e){var n=this[0]||{},i=0,o=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(qe,""):t;if(!("string"!=typeof e||et.test(e)||!le.support.htmlSerialize&&We.test(e)||!le.support.leadingWhitespace&&Ke.test(e)||at[(Je.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Xe,"<$1></$2>");try{for(;o>i;i++)n=this[i]||{},1===n.nodeType&&(le.cleanData(y(n,!1)),n.innerHTML=e);n=0}catch(r){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=le.isFunction(e);return t||"string"==typeof e||(e=le(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(le(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,i){e=te.apply([],e);var o,r,a,s,l,d,c=0,u=this.length,h=this,m=u-1,v=e[0],b=le.isFunction(v);if(b||!(1>=u||"string"!=typeof v||le.support.checkClone)&&nt.test(v))return this.each(function(o){var r=h.eq(o);b&&(e[0]=v.call(this,o,n?r.html():t)),r.domManip(e,n,i)});if(u&&(d=le.buildFragment(e,this[0].ownerDocument,!1,this),o=d.firstChild,1===d.childNodes.length&&(d=o),o)){for(n=n&&le.nodeName(o,"tr"),s=le.map(y(d,"script"),g),a=s.length;u>c;c++)r=d,c!==m&&(r=le.clone(r,!0,!0),a&&le.merge(s,y(r,"script"))),i.call(n&&le.nodeName(this[c],"table")?p(this[c],"tbody"):this[c],r,c);if(a)for(l=s[s.length-1].ownerDocument,le.map(s,f),c=0;a>c;c++)r=s[c],it.test(r.type||"")&&!le._data(r,"globalEval")&&le.contains(l,r)&&(r.src?le.ajax({url:r.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):le.globalEval((r.text||r.textContent||r.innerHTML||"").replace(rt,"")));d=o=null}return this}}),le.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){le.fn[e]=function(e){for(var n,i=0,o=[],r=le(e),a=r.length-1;a>=i;i++)n=i===a?this:this.clone(!0),le(r[i])[t](n),ne.apply(o,n.get());return this.pushStack(o)}}),le.extend({clone:function(e,t,n){var i,o,r,a,s,l=le.contains(e.ownerDocument,e);if(le.support.html5Clone||le.isXMLDoc(e)||!We.test("<"+e.nodeName+">")?r=e.cloneNode(!0):(lt.innerHTML=e.outerHTML,lt.removeChild(r=lt.firstChild)),!(le.support.noCloneEvent&&le.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||le.isXMLDoc(e)))for(i=y(r),s=y(e),a=0;null!=(o=s[a]);++a)i[a]&&b(o,i[a]);if(t)if(n)for(s=s||y(e),i=i||y(r),a=0;null!=(o=s[a]);a++)v(o,i[a]);else v(e,r);return i=y(r,"script"),i.length>0&&m(i,!l&&y(e,"script")),i=s=o=null,r},buildFragment:function(e,t,n,i){for(var o,r,a,s,l,d,c,u=e.length,p=h(t),g=[],f=0;u>f;f++)if(r=e[f],r||0===r)if("object"===le.type(r))le.merge(g,r.nodeType?[r]:r);else if(Qe.test(r)){for(s=s||p.appendChild(t.createElement("div")),l=(Je.exec(r)||["",""])[1].toLowerCase(),c=at[l]||at._default,s.innerHTML=c[1]+r.replace(Xe,"<$1></$2>")+c[2],o=c[0];o--;)s=s.lastChild;if(!le.support.leadingWhitespace&&Ke.test(r)&&g.push(t.createTextNode(Ke.exec(r)[0])),!le.support.tbody)for(r="table"!==l||Ze.test(r)?"<table>"!==c[1]||Ze.test(r)?0:s:s.firstChild,o=r&&r.childNodes.length;o--;)le.nodeName(d=r.childNodes[o],"tbody")&&!d.childNodes.length&&r.removeChild(d);for(le.merge(g,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=p.lastChild}else g.push(t.createTextNode(r));for(s&&p.removeChild(s),le.support.appendChecked||le.grep(y(g,"input"),w),f=0;r=g[f++];)if((!i||-1===le.inArray(r,i))&&(a=le.contains(r.ownerDocument,r),s=y(p.appendChild(r),"script"),a&&m(s),n))for(o=0;r=s[o++];)it.test(r.type||"")&&n.push(r);return s=null,p},cleanData:function(e,t){for(var n,i,o,r,a=0,s=le.expando,l=le.cache,d=le.support.deleteExpando,c=le.event.special;null!=(n=e[a]);a++)if((t||le.acceptData(n))&&(o=n[s],r=o&&l[o])){if(r.events)for(i in r.events)c[i]?le.event.remove(n,i):le.removeEvent(n,i,r.handle);l[o]&&(delete l[o],d?delete n[s]:typeof n.removeAttribute!==q?n.removeAttribute(s):n[s]=null,Q.push(o))}}});var dt,ct,ut,ht=/alpha\([^)]*\)/i,pt=/opacity\s*=\s*([^)]*)/,gt=/^(top|right|bottom|left)$/,ft=/^(none|table(?!-c[ea]).+)/,mt=/^margin/,vt=RegExp("^("+de+")(.*)$","i"),bt=RegExp("^("+de+")(?!px)[a-z%]+$","i"),yt=RegExp("^([+-])=("+de+")","i"),wt={BODY:"block"},At={position:"absolute",visibility:"hidden",display:"block"},Nt={letterSpacing:0,fontWeight:400},_t=["Top","Right","Bottom","Left"],Ct=["Webkit","O","Moz","ms"];le.fn.extend({css:function(e,n){return le.access(this,function(e,n,i){var o,r,a={},s=0;if(le.isArray(n)){for(r=ct(e),o=n.length;o>s;s++)a[n[s]]=le.css(e,n[s],!1,r);return a}return i!==t?le.style(e,n,i):le.css(e,n)},e,n,arguments.length>1)},show:function(){return _(this,!0)},hide:function(){return _(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:N(this))?le(this).show():le(this).hide()})}}),le.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=ut(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":le.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,i,o){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,s,l=le.camelCase(n),d=e.style;if(n=le.cssProps[l]||(le.cssProps[l]=A(d,l)),s=le.cssHooks[n]||le.cssHooks[l],i===t)return s&&"get"in s&&(r=s.get(e,!1,o))!==t?r:d[n];if(a=typeof i,"string"===a&&(r=yt.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(le.css(e,n)),a="number"),!(null==i||"number"===a&&isNaN(i)||("number"!==a||le.cssNumber[l]||(i+="px"),le.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(d[n]="inherit"),s&&"set"in s&&(i=s.set(e,i,o))===t)))try{d[n]=i}catch(c){}}},css:function(e,n,i,o){var r,a,s,l=le.camelCase(n);return n=le.cssProps[l]||(le.cssProps[l]=A(e.style,l)),s=le.cssHooks[n]||le.cssHooks[l],s&&"get"in s&&(a=s.get(e,!0,i)),a===t&&(a=ut(e,n,o)),"normal"===a&&n in Nt&&(a=Nt[n]),""===i||i?(r=parseFloat(a),i===!0||le.isNumeric(r)?r||0:a):a},swap:function(e,t,n,i){var o,r,a={};for(r in t)a[r]=e.style[r],e.style[r]=t[r];o=n.apply(e,i||[]);for(r in t)e.style[r]=a[r];return o}}),e.getComputedStyle?(ct=function(t){return e.getComputedStyle(t,null)},ut=function(e,n,i){var o,r,a,s=i||ct(e),l=s?s.getPropertyValue(n)||s[n]:t,d=e.style;return s&&(""!==l||le.contains(e.ownerDocument,e)||(l=le.style(e,n)),bt.test(l)&&mt.test(n)&&(o=d.width,r=d.minWidth,a=d.maxWidth,d.minWidth=d.maxWidth=d.width=l,l=s.width,d.width=o,d.minWidth=r,d.maxWidth=a)),l}):W.documentElement.currentStyle&&(ct=function(e){return e.currentStyle},ut=function(e,n,i){var o,r,a,s=i||ct(e),l=s?s[n]:t,d=e.style;return null==l&&d&&d[n]&&(l=d[n]),bt.test(l)&&!gt.test(n)&&(o=d.left,r=e.runtimeStyle,a=r&&r.left,a&&(r.left=e.currentStyle.left),d.left="fontSize"===n?"1em":l,l=d.pixelLeft+"px",d.left=o,a&&(r.left=a)),""===l?"auto":l}),le.each(["height","width"],function(e,n){le.cssHooks[n]={get:function(e,i,o){return i?0===e.offsetWidth&&ft.test(le.css(e,"display"))?le.swap(e,At,function(){return S(e,n,o)}):S(e,n,o):t},set:function(e,t,i){var o=i&&ct(e);return C(e,t,i?x(e,n,i,le.support.boxSizing&&"border-box"===le.css(e,"boxSizing",!1,o),o):0)}}}),le.support.opacity||(le.cssHooks.opacity={get:function(e,t){return pt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,o=le.isNumeric(t)?"alpha(opacity="+100*t+")":"",r=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===le.trim(r.replace(ht,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=ht.test(r)?r.replace(ht,o):r+" "+o)}}),le(function(){le.support.reliableMarginRight||(le.cssHooks.marginRight={get:function(e,n){return n?le.swap(e,{display:"inline-block"},ut,[e,"marginRight"]):t}}),!le.support.pixelPosition&&le.fn.position&&le.each(["top","left"],function(e,n){le.cssHooks[n]={get:function(e,i){return i?(i=ut(e,n),bt.test(i)?le(e).position()[n]+"px":i):t}}})}),le.expr&&le.expr.filters&&(le.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!le.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||le.css(e,"display"))},le.expr.filters.visible=function(e){return!le.expr.filters.hidden(e)}),le.each({margin:"",padding:"",border:"Width"},function(e,t){le.cssHooks[e+t]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];4>i;i++)o[e+_t[i]+t]=r[i]||r[i-2]||r[0];return o}},mt.test(e)||(le.cssHooks[e+t].set=C)});var xt=/%20/g,St=/\[\]$/,Tt=/\r?\n/g,kt=/^(?:submit|button|image|reset|file)$/i,$t=/^(?:input|select|textarea|keygen)/i;le.fn.extend({serialize:function(){return le.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=le.prop(this,"elements");return e?le.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!le(this).is(":disabled")&&$t.test(this.nodeName)&&!kt.test(e)&&(this.checked||!tt.test(e))}).map(function(e,t){var n=le(this).val();return null==n?null:le.isArray(n)?le.map(n,function(e){return{name:t.name,value:e.replace(Tt,"\r\n")}}):{name:t.name,value:n.replace(Tt,"\r\n")}}).get()}}),le.param=function(e,n){var i,o=[],r=function(e,t){t=le.isFunction(t)?t():null==t?"":t,o[o.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=le.ajaxSettings&&le.ajaxSettings.traditional),le.isArray(e)||e.jquery&&!le.isPlainObject(e))le.each(e,function(){r(this.name,this.value)});else for(i in e)$(i,e[i],n,r);return o.join("&").replace(xt,"+")},le.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){le.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),le.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var Dt,Mt,Et=le.now(),Pt=/\?/,It=/#.*$/,Ot=/([?&])_=[^&]*/,Rt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ft=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Vt=/^(?:GET|HEAD)$/,Lt=/^\/\//,Ut=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Ht=le.fn.load,Bt={},zt={},Yt="*/".concat("*");try{Mt=K.href}catch(Gt){Mt=W.createElement("a"),Mt.href="",Mt=Mt.href}Dt=Ut.exec(Mt.toLowerCase())||[],le.fn.load=function(e,n,i){if("string"!=typeof e&&Ht)return Ht.apply(this,arguments);var o,r,a,s=this,l=e.indexOf(" ");return l>=0&&(o=e.slice(l,e.length),e=e.slice(0,l)),le.isFunction(n)?(i=n,n=t):n&&"object"==typeof n&&(a="POST"),s.length>0&&le.ajax({url:e,type:a,dataType:"html",data:n}).done(function(e){r=arguments,s.html(o?le("<div>").append(le.parseHTML(e)).find(o):e)}).complete(i&&function(e,t){s.each(i,r||[e.responseText,t,e])}),this},le.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){le.fn[t]=function(e){return this.on(t,e)}}),le.each(["get","post"],function(e,n){le[n]=function(e,i,o,r){return le.isFunction(i)&&(r=r||o,o=i,i=t),le.ajax({url:e,type:n,dataType:r,data:i,success:o})}}),le.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Mt,type:"GET",isLocal:Ft.test(Dt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Yt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":le.parseJSON,"text xml":le.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?E(E(e,le.ajaxSettings),t):E(le.ajaxSettings,e)},ajaxPrefilter:D(Bt),ajaxTransport:D(zt),ajax:function(e,n){function i(e,n,i,o){var r,u,b,y,A,_=n;2!==w&&(w=2,l&&clearTimeout(l),c=t,s=o||"",N.readyState=e>0?4:0,i&&(y=P(h,N,i)),e>=200&&300>e||304===e?(h.ifModified&&(A=N.getResponseHeader("Last-Modified"),A&&(le.lastModified[a]=A),A=N.getResponseHeader("etag"),A&&(le.etag[a]=A)),204===e?(r=!0,_="nocontent"):304===e?(r=!0,_="notmodified"):(r=I(h,y),_=r.state,u=r.data,b=r.error,r=!b)):(b=_,(e||!_)&&(_="error",0>e&&(e=0))),N.status=e,N.statusText=(n||_)+"",r?f.resolveWith(p,[u,_,N]):f.rejectWith(p,[N,_,b]),N.statusCode(v),v=t,d&&g.trigger(r?"ajaxSuccess":"ajaxError",[N,h,r?u:b]),m.fireWith(p,[N,_]),d&&(g.trigger("ajaxComplete",[N,h]),--le.active||le.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var o,r,a,s,l,d,c,u,h=le.ajaxSetup({},n),p=h.context||h,g=h.context&&(p.nodeType||p.jquery)?le(p):le.event,f=le.Deferred(),m=le.Callbacks("once memory"),v=h.statusCode||{},b={},y={},w=0,A="canceled",N={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!u)for(u={};t=Rt.exec(s);)u[t[1].toLowerCase()]=t[2];t=u[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=y[n]=y[n]||e,b[e]=t),this},overrideMimeType:function(e){return w||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>w)for(t in e)v[t]=[v[t],e[t]];else N.always(e[N.status]);return this},abort:function(e){var t=e||A;return c&&c.abort(t),i(0,t),this}};if(f.promise(N).complete=m.add,N.success=N.done,N.error=N.fail,h.url=((e||h.url||Mt)+"").replace(It,"").replace(Lt,Dt[1]+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=le.trim(h.dataType||"*").toLowerCase().match(ce)||[""],null==h.crossDomain&&(o=Ut.exec(h.url.toLowerCase()),h.crossDomain=!(!o||o[1]===Dt[1]&&o[2]===Dt[2]&&(o[3]||("http:"===o[1]?80:443))==(Dt[3]||("http:"===Dt[1]?80:443)))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=le.param(h.data,h.traditional)),M(Bt,h,n,N),2===w)return N;d=h.global,d&&0===le.active++&&le.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Vt.test(h.type),a=h.url,h.hasContent||(h.data&&(a=h.url+=(Pt.test(a)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=Ot.test(a)?a.replace(Ot,"$1_="+Et++):a+(Pt.test(a)?"&":"?")+"_="+Et++)),h.ifModified&&(le.lastModified[a]&&N.setRequestHeader("If-Modified-Since",le.lastModified[a]),le.etag[a]&&N.setRequestHeader("If-None-Match",le.etag[a])),(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&N.setRequestHeader("Content-Type",h.contentType),N.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Yt+"; q=0.01":""):h.accepts["*"]);for(r in h.headers)N.setRequestHeader(r,h.headers[r]);if(h.beforeSend&&(h.beforeSend.call(p,N,h)===!1||2===w))return N.abort();A="abort";for(r in{success:1,error:1,complete:1})N[r](h[r]);if(c=M(zt,h,n,N)){N.readyState=1,d&&g.trigger("ajaxSend",[N,h]),h.async&&h.timeout>0&&(l=setTimeout(function(){N.abort("timeout")},h.timeout));try{w=1,c.send(b,i)}catch(_){if(!(2>w))throw _;i(-1,_)}}else i(-1,"No Transport");return N},getScript:function(e,n){return le.get(e,t,n,"script")},getJSON:function(e,t,n){return le.get(e,t,n,"json")}}),le.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return le.globalEval(e),e}}}),le.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),le.ajaxTransport("script",function(e){if(e.crossDomain){var n,i=W.head||le("head")[0]||W.documentElement;return{send:function(t,o){n=W.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||o(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var jt=[],qt=/(=)\?(?=&|$)|\?\?/;le.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jt.pop()||le.expando+"_"+Et++;return this[e]=!0,e}}),le.ajaxPrefilter("json jsonp",function(n,i,o){var r,a,s,l=n.jsonp!==!1&&(qt.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&qt.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(r=n.jsonpCallback=le.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(qt,"$1"+r):n.jsonp!==!1&&(n.url+=(Pt.test(n.url)?"&":"?")+n.jsonp+"="+r),n.converters["script json"]=function(){return s||le.error(r+" was not called"),s[0]},n.dataTypes[0]="json",a=e[r],e[r]=function(){s=arguments},o.always(function(){e[r]=a,n[r]&&(n.jsonpCallback=i.jsonpCallback,jt.push(r)),s&&le.isFunction(a)&&a(s[0]),s=a=t}),"script"):t});var Wt,Kt,Xt=0,Jt=e.ActiveXObject&&function(){var e;for(e in Wt)Wt[e](t,!0)};le.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&O()||R()}:O,Kt=le.ajaxSettings.xhr(),le.support.cors=!!Kt&&"withCredentials"in Kt,Kt=le.support.ajax=!!Kt,Kt&&le.ajaxTransport(function(n){if(!n.crossDomain||le.support.cors){var i;return{send:function(o,r){var a,s,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)l[s]=n.xhrFields[s];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");try{for(s in o)l.setRequestHeader(s,o[s])}catch(d){}l.send(n.hasContent&&n.data||null),i=function(e,o){var s,d,c,u;try{if(i&&(o||4===l.readyState))if(i=t,a&&(l.onreadystatechange=le.noop,Jt&&delete Wt[a]),o)4!==l.readyState&&l.abort();else{u={},s=l.status,d=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(u.text=l.responseText);try{c=l.statusText}catch(h){c=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=u.text?200:404}}catch(p){o||r(-1,p)}u&&r(s,c,u,d)},n.async?4===l.readyState?setTimeout(i):(a=++Xt,Jt&&(Wt||(Wt={},le(e).unload(Jt)),Wt[a]=i),l.onreadystatechange=i):i()},abort:function(){i&&i(t,!0)}}}});var Zt,Qt,en=/^(?:toggle|show|hide)$/,tn=RegExp("^(?:([+-])=|)("+de+")([a-z%]*)$","i"),nn=/queueHooks$/,on=[H],rn={"*":[function(e,t){var n,i,o=this.createTween(e,t),r=tn.exec(t),a=o.cur(),s=+a||0,l=1,d=20;if(r){if(n=+r[2],i=r[3]||(le.cssNumber[e]?"":"px"),"px"!==i&&s){s=le.css(o.elem,e,!0)||n||1;do l=l||".5",s/=l,le.style(o.elem,e,s+i);while(l!==(l=o.cur()/a)&&1!==l&&--d)}o.unit=i,o.start=s,o.end=r[1]?s+(r[1]+1)*n:n}return o}]};le.Animation=le.extend(L,{tweener:function(e,t){le.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,o=e.length;o>i;i++)n=e[i],rn[n]=rn[n]||[],rn[n].unshift(t)},prefilter:function(e,t){t?on.unshift(e):on.push(e)}}),le.Tween=B,B.prototype={constructor:B,init:function(e,t,n,i,o,r){this.elem=e,this.prop=n,this.easing=o||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(le.cssNumber[n]?"":"px")},cur:function(){var e=B.propHooks[this.prop];return e&&e.get?e.get(this):B.propHooks._default.get(this)},run:function(e){var t,n=B.propHooks[this.prop];return this.pos=t=this.options.duration?le.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):B.propHooks._default.set(this),this}},B.prototype.init.prototype=B.prototype,B.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=le.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){le.fx.step[e.prop]?le.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[le.cssProps[e.prop]]||le.cssHooks[e.prop])?le.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},B.propHooks.scrollTop=B.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},le.each(["toggle","show","hide"],function(e,t){var n=le.fn[t];le.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(z(t,!0),e,i,o)}}),le.fn.extend({fadeTo:function(e,t,n,i){return this.filter(N).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=le.isEmptyObject(e),r=le.speed(t,n,i),a=function(){var t=L(this,le.extend({},e),r);a.finish=function(){t.stop(!0)},(o||le._data(this,"finish"))&&t.stop(!0)};return a.finish=a,o||r.queue===!1?this.each(a):this.queue(r.queue,a)},stop:function(e,n,i){var o=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",r=le.timers,a=le._data(this);if(n)a[n]&&a[n].stop&&o(a[n]);else for(n in a)a[n]&&a[n].stop&&nn.test(n)&&o(a[n]);for(n=r.length;n--;)r[n].elem!==this||null!=e&&r[n].queue!==e||(r[n].anim.stop(i),t=!1,r.splice(n,1));(t||!i)&&le.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=le._data(this),i=n[e+"queue"],o=n[e+"queueHooks"],r=le.timers,a=i?i.length:0;for(n.finish=!0,le.queue(this,e,[]),o&&o.cur&&o.cur.finish&&o.cur.finish.call(this),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;a>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),le.each({slideDown:z("show"),slideUp:z("hide"),slideToggle:z("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){le.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),le.speed=function(e,t,n){var i=e&&"object"==typeof e?le.extend({},e):{complete:n||!n&&t||le.isFunction(e)&&e,duration:e,easing:n&&t||t&&!le.isFunction(t)&&t};return i.duration=le.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in le.fx.speeds?le.fx.speeds[i.duration]:le.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){le.isFunction(i.old)&&i.old.call(this),i.queue&&le.dequeue(this,i.queue)},i},le.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},le.timers=[],le.fx=B.prototype.init,le.fx.tick=function(){var e,n=le.timers,i=0;for(Zt=le.now();n.length>i;i++)e=n[i],e()||n[i]!==e||n.splice(i--,1);n.length||le.fx.stop(),Zt=t},le.fx.timer=function(e){e()&&le.timers.push(e)&&le.fx.start()},le.fx.interval=13,le.fx.start=function(){Qt||(Qt=setInterval(le.fx.tick,le.fx.interval))},le.fx.stop=function(){clearInterval(Qt),Qt=null},le.fx.speeds={slow:600,fast:200,_default:400},le.fx.step={},le.expr&&le.expr.filters&&(le.expr.filters.animated=function(e){return le.grep(le.timers,function(t){return e===t.elem}).length}),le.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){le.offset.setOffset(this,e,t)});var n,i,o={top:0,left:0},r=this[0],a=r&&r.ownerDocument;return a?(n=a.documentElement,le.contains(n,r)?(typeof r.getBoundingClientRect!==q&&(o=r.getBoundingClientRect()),i=Y(a),{top:o.top+(i.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(i.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o):void 0},le.offset={setOffset:function(e,t,n){var i=le.css(e,"position");"static"===i&&(e.style.position="relative");var o,r,a=le(e),s=a.offset(),l=le.css(e,"top"),d=le.css(e,"left"),c=("absolute"===i||"fixed"===i)&&le.inArray("auto",[l,d])>-1,u={},h={};c?(h=a.position(),o=h.top,r=h.left):(o=parseFloat(l)||0,r=parseFloat(d)||0),le.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(u.top=t.top-s.top+o),null!=t.left&&(u.left=t.left-s.left+r),"using"in t?t.using.call(e,u):a.css(u)}},le.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===le.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),le.nodeName(e[0],"html")||(n=e.offset()),n.top+=le.css(e[0],"borderTopWidth",!0),n.left+=le.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-le.css(i,"marginTop",!0),left:t.left-n.left-le.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||W.documentElement;e&&!le.nodeName(e,"html")&&"static"===le.css(e,"position");)e=e.offsetParent;return e||W.documentElement})}}),le.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var i=/Y/.test(n);le.fn[e]=function(o){return le.access(this,function(e,o,r){var a=Y(e);return r===t?a?n in a?a[n]:a.document.documentElement[o]:e[o]:(a?a.scrollTo(i?le(a).scrollLeft():r,i?r:le(a).scrollTop()):e[o]=r,t)},e,o,arguments.length,null)}}),le.each({Height:"height",Width:"width"},function(e,n){le.each({padding:"inner"+e,content:n,"":"outer"+e},function(i,o){le.fn[o]=function(o,r){var a=arguments.length&&(i||"boolean"!=typeof o),s=i||(o===!0||r===!0?"margin":"border");return le.access(this,function(n,i,o){var r;return le.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(r=n.documentElement,Math.max(n.body["scroll"+e],r["scroll"+e],n.body["offset"+e],r["offset"+e],r["client"+e])):o===t?le.css(n,i,s):le.style(n,i,o,s)},n,a?o:t,a,null)}})}),e.jQuery=e.$=le,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return le})}(window),function(e,t){if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,i,o){e.Backbone=t(e,o,n,i)});else if("undefined"!=typeof exports){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,i){var o=e.Backbone,r=[],a=(r.push,r.slice);r.splice;t.VERSION="1.1.2",t.$=i,t.noConflict=function(){return e.Backbone=o,this},t.emulateHTTP=!1,t.emulateJSON=!1;var s=t.Events={on:function(e,t,n){if(!d(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,i){if(!d(this,"once",e,[t,i])||!t)return this;var o=this,r=n.once(function(){o.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,i)},off:function(e,t,i){var o,r,a,s,l,c,u,h;if(!this._events||!d(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events=void 0,this;for(s=e?[e]:n.keys(this._events),l=0,c=s.length;c>l;l++)if(e=s[l],a=this._events[e]){if(this._events[e]=o=[],t||i)for(u=0,h=a.length;h>u;u++)r=a[u],(t&&t!==r.callback&&t!==r.callback._callback||i&&i!==r.context)&&o.push(r);o.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=a.call(arguments,1);if(!d(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&c(n,t),i&&c(i,arguments),this},stopListening:function(e,t,i){var o=this._listeningTo;if(!o)return this;var r=!t&&!i;i||"object"!=typeof t||(i=this),e&&((o={})[e._listenId]=e);for(var a in o)e=o[a],e.off(t,i,this),(r||n.isEmpty(e._events))&&delete this._listeningTo[a];return this}},l=/\s+/,d=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var o in n)e[t].apply(e,[o,n[o]].concat(i));return!1}if(l.test(n)){for(var r=n.split(l),a=0,s=r.length;s>a;a++)e[t].apply(e,[r[a]].concat(i));return!1}return!0},c=function(e,t){var n,i=-1,o=e.length,r=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++i<o;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<o;)(n=e[i]).callback.call(n.ctx,r);return;case 2:for(;++i<o;)(n=e[i]).callback.call(n.ctx,r,a);return;case 3:for(;++i<o;)(n=e[i]).callback.call(n.ctx,r,a,s);return;default:for(;++i<o;)(n=e[i]).callback.apply(n.ctx,t);return}},u={listenTo:"on",listenToOnce:"once"};n.each(u,function(e,t){s[t]=function(t,i,o){var r=this._listeningTo||(this._listeningTo={}),a=t._listenId||(t._listenId=n.uniqueId("l"));return r[a]=t,o||"object"!=typeof i||(o=this),t[e](i,o,this),this}}),s.bind=s.on,s.unbind=s.off,n.extend(t,s);var h=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(h.prototype,s,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,i){var o,r,a,s,l,d,c,u;if(null==e)return this;if("object"==typeof e?(r=e,i=t):(r={})[e]=t,i||(i={}),!this._validate(r,i))return!1;a=i.unset,l=i.silent,s=[],d=this._changing,this._changing=!0,d||(this._previousAttributes=n.clone(this.attributes),this.changed={}),u=this.attributes,c=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(o in r)t=r[o],n.isEqual(u[o],t)||s.push(o),n.isEqual(c[o],t)?delete this.changed[o]:this.changed[o]=t,a?delete u[o]:u[o]=t;if(!l){s.length&&(this._pending=i);for(var h=0,p=s.length;p>h;h++)this.trigger("change:"+s[h],this,u[s[h]],i)}if(d)return this;if(!l)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,i=!1,o=this._changing?this._previousAttributes:this.attributes;for(var r in e)n.isEqual(o[r],t=e[r])||((i||(i={}))[r]=t);
return i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,i=e.success;return e.success=function(n){return t.set(t.parse(n,e),e)?(i&&i(t,n,e),void t.trigger("sync",t,n,e)):!1},F(this,e),this.sync("read",this,e)},save:function(e,t,i){var o,r,a,s=this.attributes;if(null==e||"object"==typeof e?(o=e,i=t):(o={})[e]=t,i=n.extend({validate:!0},i),o&&!i.wait){if(!this.set(o,i))return!1}else if(!this._validate(o,i))return!1;o&&i.wait&&(this.attributes=n.extend({},s,o)),void 0===i.parse&&(i.parse=!0);var l=this,d=i.success;return i.success=function(e){l.attributes=s;var t=l.parse(e,i);return i.wait&&(t=n.extend(o||{},t)),n.isObject(t)&&!l.set(t,i)?!1:(d&&d(l,e,i),void l.trigger("sync",l,e,i))},F(this,i),r=this.isNew()?"create":i.patch?"patch":"update","patch"===r&&(i.attrs=o),a=this.sync(r,this,i),o&&i.wait&&(this.attributes=s),a},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,o=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&o(),i&&i(t,n,e),t.isNew()||t.trigger("sync",t,n,e)},this.isNew())return e.success(),!1;F(this,e);var r=this.sync("delete",this,e);return e.wait||o(),r},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||R();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return i?(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];n.each(p,function(e){h.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var g=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},f={add:!0,remove:!0,merge:!0},m={add:!0,remove:!1};n.extend(g.prototype,s,{model:h,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,m))},remove:function(e,t){var i=!n.isArray(e);e=i?[e]:n.clone(e),t||(t={});var o,r,a,s;for(o=0,r=e.length;r>o;o++)s=e[o]=this.get(e[o]),s&&(delete this._byId[s.id],delete this._byId[s.cid],a=this.indexOf(s),this.models.splice(a,1),this.length--,t.silent||(t.index=a,s.trigger("remove",s,this,t)),this._removeReference(s,t));return i?e[0]:e},set:function(e,t){t=n.defaults({},t,f),t.parse&&(e=this.parse(e,t));var i=!n.isArray(e);e=i?e?[e]:[]:n.clone(e);var o,r,a,s,l,d,c,u=t.at,p=this.model,g=this.comparator&&null==u&&t.sort!==!1,m=n.isString(this.comparator)?this.comparator:null,v=[],b=[],y={},w=t.add,A=t.merge,N=t.remove,_=!g&&w&&N?[]:!1;for(o=0,r=e.length;r>o;o++){if(l=e[o]||{},a=l instanceof h?s=l:l[p.prototype.idAttribute||"id"],d=this.get(a))N&&(y[d.cid]=!0),A&&(l=l===s?s.attributes:l,t.parse&&(l=d.parse(l,t)),d.set(l,t),g&&!c&&d.hasChanged(m)&&(c=!0)),e[o]=d;else if(w){if(s=e[o]=this._prepareModel(l,t),!s)continue;v.push(s),this._addReference(s,t)}s=d||s,!_||!s.isNew()&&y[s.id]||_.push(s),y[s.id]=!0}if(N){for(o=0,r=this.length;r>o;++o)y[(s=this.models[o]).cid]||b.push(s);b.length&&this.remove(b,t)}if(v.length||_&&_.length)if(g&&(c=!0),this.length+=v.length,null!=u)for(o=0,r=v.length;r>o;o++)this.models.splice(u+o,0,v[o]);else{_&&(this.models.length=0);var C=_||v;for(o=0,r=C.length;r>o;o++)this.models.push(C[o])}if(c&&this.sort({silent:!0}),!t.silent){for(o=0,r=v.length;r>o;o++)(s=v[o]).trigger("add",s,this,t);(c||_&&_.length)&&this.trigger("sort",this,t)}return i?e[0]:e},reset:function(e,t){t||(t={});for(var i=0,o=this.models.length;o>i;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return a.apply(this.models,arguments)},get:function(e){return null!=e?this._byId[e]||this._byId[e.id]||this._byId[e.cid]:void 0},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,i=this;return e.success=function(n){var o=e.reset?"reset":"set";i[o](n,e),t&&t(i,n,e),i.trigger("sync",i,n,e)},F(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?n.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var i=this,o=t.success;return t.success=function(e,n){t.wait&&i.add(e,t),o&&o(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof h)return e;t=t?n.clone(t):{},t.collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_addReference:function(e,t){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(v,function(e){g.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var b=["groupBy","countBy","sortBy","indexBy"];n.each(b,function(e){g.prototype[e]=function(t,i){var o=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,o,i)}});var y=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,A)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,A=["model","collection","el","id","attributes","className","tagName","events"];n.extend(y.prototype,s,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var i=e[t];if(n.isFunction(i)||(i=this[e[t]]),i){var o=t.match(w),r=o[1],a=o[2];i=n.bind(i,this),r+=".delegateEvents"+this.cid,""===a?this.$el.on(r,i):this.$el.on(r,a,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var i=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(i,!1)}}}),t.sync=function(e,i,o){var r=_[e];n.defaults(o||(o={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var a={type:r,dataType:"json"};if(o.url||(a.url=n.result(i,"url")||R()),null!=o.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(o.attrs||i.toJSON(o))),o.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),o.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){a.type="POST",o.emulateJSON&&(a.data._method=r);var s=o.beforeSend;o.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",r),s?s.apply(this,arguments):void 0}}"GET"===a.type||o.emulateJSON||(a.processData=!1),"PATCH"===a.type&&N&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=o.xhr=t.ajax(n.extend(a,o));return i.trigger("request",i,l,o),l};var N=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),_={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},x=/\((.*?)\)/g,S=/(\(\?)?:\w+/g,T=/\*\w+/g,k=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,s,{initialize:function(){},route:function(e,i,o){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(o=i,i=""),o||(o=this[i]);var r=this;return t.history.route(e,function(n){var a=r._extractParameters(e,n);r.execute(o,a),r.trigger.apply(r,["route:"+i].concat(a)),r.trigger("route",i,a),t.history.trigger("route",r,i,a)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(k,"\\$&").replace(x,"(?:$1)?").replace(S,function(e,t){return t?e:"([^/?]+)"}).replace(T,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null})}});var $=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},D=/^[#\/]|\s+$/g,M=/^\/+|\/+$/g,E=/msie [\w.]+/,P=/\/$/,I=/#.*$/;$.started=!1,n.extend($.prototype,s,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(P,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(D,"")},start:function(e){if($.started)throw new Error("Backbone.history has already been started");$.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),o=document.documentMode,r=E.exec(navigator.userAgent.toLowerCase())&&(!o||7>=o);if(this.root=("/"+this.root+"/").replace(M,"/"),r&&this._wantsHashChange){var a=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow,this.navigate(i)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var s=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&s.hash&&(this.fragment=this.getHash().replace(D,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),$.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(e,t){if(!$.started)return!1;t&&t!==!0||(t={trigger:!!t});var n=this.root+(e=this.getFragment(e||""));if(e=e.replace(I,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new $;var O=function(e,t){var i,o=this;i=e&&n.has(e,"constructor")?e.constructor:function(){return o.apply(this,arguments)},n.extend(i,o,t);var r=function(){this.constructor=i};return r.prototype=o.prototype,i.prototype=new r,e&&n.extend(i.prototype,e),i.__super__=o.prototype,i};h.extend=g.extend=C.extend=y.extend=$.extend=O;var R=function(){throw new Error('A "url" property or function must be specified')},F=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}};return t}),function(e,t){if("function"==typeof define&&define.amd)define("marionette",["backbone","underscore"],function(n,i){return e.Marionette=e.Mn=t(e,n,i)});else if("undefined"!=typeof exports){var n=require("backbone"),i=require("underscore");module.exports=t(e,n,i)}else e.Marionette=e.Mn=t(e,e.Backbone,e._)}(this,function(e,t,n){"use strict";!function(e,t){var n=e.ChildViewContainer;return e.ChildViewContainer=function(e,t){var n=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(n.prototype,{add:function(e,t){var n=e.cid;return this._views[n]=e,e.model&&(this._indexByModel[e.model.cid]=n),t&&(this._indexByCustom[t]=n),this._updateLength(),this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var n=e.cid;return e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){return e===n?(delete this._indexByCustom[t],!0):void 0},this),delete this._views[n],this._updateLength(),this},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,n){t.each(this._views,function(i){t.isFunction(i[e])&&i[e].apply(i,n||[])})},_updateLength:function(){this.length=t.size(this._views)}});var i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce"];return t.each(i,function(e){n.prototype[e]=function(){var n=t.values(this._views),i=[n].concat(t.toArray(arguments));return t[e].apply(t,i)}}),n}(e,t),e.ChildViewContainer.VERSION="0.1.6",e.ChildViewContainer.noConflict=function(){return e.ChildViewContainer=n,this},e.ChildViewContainer}(t,n),function(e,t){var n=e.Wreqr,i=e.Wreqr={};return e.Wreqr.VERSION="1.3.1",e.Wreqr.noConflict=function(){return e.Wreqr=n,this},i.Handlers=function(e,t){var n=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events,{setHandlers:function(e){t.each(e,function(e,n){var i=null;t.isObject(e)&&!t.isFunction(e)&&(i=e.context,e=e.callback),this.setHandler(n,e,i)},this)},setHandler:function(e,t,n){var i={callback:t,context:n};this._wreqrHandlers[e]=i,this.trigger("handler:add",e,t,n)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];return t?function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}:void 0},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),n}(e,t),i.CommandStorage=function(){var n=function(e){this.options=e,this._commands={},t.isFunction(this.initialize)&&this.initialize(e)};return t.extend(n.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){var n=this.getCommands(e);n.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}}),n}(),i.Commands=function(e){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var n=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,n)},execute:function(e,t){e=arguments[0],t=Array.prototype.slice.call(arguments,1),this.hasHandler(e)?this.getHandler(e).apply(this,t):this.storage.addCommand(e,t)},_executeCommands:function(e,n,i){var o=this.storage.getCommands(e);t.each(o.instances,function(e){n.apply(i,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var n,i=e.storageType||this.storageType;n=t.isFunction(i)?new i:i,this.storage=n}})}(i),i.RequestResponse=function(e){return e.Handlers.extend({request:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return this.hasHandler(e)?this.getHandler(e).apply(this,t):void 0}})}(i),i.EventAggregator=function(e,t){var n=function(){};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events),n}(e,t),i.Channel=function(){var n=function(t){this.vent=new e.Wreqr.EventAggregator,this.reqres=new e.Wreqr.RequestResponse,this.commands=new e.Wreqr.Commands,this.channelName=t};return t.extend(n.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(e,t){return this._connect("vent",e,t),this},connectCommands:function(e,t){return this._connect("commands",e,t),this},connectRequests:function(e,t){return this._connect("reqres",e,t),this},_connect:function(e,n,i){if(n){i=i||this;var o="vent"===e?"on":"setHandler";t.each(n,function(n,r){this[e][o](r,t.bind(n,i))},this)}}}),n}(i),i.radio=function(e){var n=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};t.extend(n.prototype,{channel:function(e){if(!e)throw Error("Channel must receive a name");return this._getChannel(e)},_getChannel:function(t){var n=this._channels[t];return n||(n=new e.Channel(t),this._channels[t]=n),n},_proxyMethods:function(){t.each(["vent","commands","reqres"],function(e){t.each(i[e],function(t){this[e][t]=o(this,e,t)},this)},this)}});var i={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},o=function(e,t,n){return function(i){var o=e._getChannel(i)[t],r=Array.prototype.slice.call(arguments,1);return o[n].apply(o,r)}};return new n}(i),e.Wreqr}(t,n);var i=e.Marionette,o=e.Mn,r=t.Marionette={};r.VERSION="2.4.1",r.noConflict=function(){return e.Marionette=i,e.Mn=o,this},t.Marionette=r,r.Deferred=t.$.Deferred,r.extend=t.Model.extend,r.isNodeAttached=function(e){return t.$.contains(document.documentElement,e)},r.mergeOptions=function(e,t){e&&n.extend(this,n.pick(e,t))},r.getOption=function(e,t){return e&&t?e.options&&void 0!==e.options[t]?e.options[t]:e[t]:void 0},r.proxyGetOption=function(e){return r.getOption(this,e)},r._getValue=function(e,t,i){return n.isFunction(e)&&(e=i?e.apply(t,i):e.call(t)),e},r.normalizeMethods=function(e){return n.reduce(e,function(e,t,i){return n.isFunction(t)||(t=this[t]),t&&(e[i]=t),e},{},this)},r.normalizeUIString=function(e,t){return e.replace(/@ui\.[a-zA-Z_$0-9]*/g,function(e){return t[e.slice(4)]})},r.normalizeUIKeys=function(e,t){return n.reduce(e,function(e,n,i){var o=r.normalizeUIString(i,t);return e[o]=n,e},{})},r.normalizeUIValues=function(e,t,i){return n.each(e,function(o,a){n.isString(o)?e[a]=r.normalizeUIString(o,t):n.isObject(o)&&n.isArray(i)&&(n.extend(o,r.normalizeUIValues(n.pick(o,i),t)),n.each(i,function(e){var i=o[e];n.isString(i)&&(o[e]=r.normalizeUIString(i,t))}))}),e},r.actAsCollection=function(e,t){var i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];n.each(i,function(i){e[i]=function(){var e=n.values(n.result(this,t)),o=[e].concat(n.toArray(arguments));return n[i].apply(n,o)}})};var a=r.deprecate=function(e,t){n.isObject(e)&&(e=e.prev+" is going to be removed in the future. Please use "+e.next+" instead."+(e.url?" See: "+e.url:"")),void 0!==t&&t||a._cache[e]||(a._warn("Deprecation warning: "+e),a._cache[e]=!0)};a._warn="undefined"!=typeof console&&(console.warn||console.log)||function(){},a._cache={},r._triggerMethod=function(){function e(e,t,n){return n.toUpperCase()}var t=/(^|:)(\w)/gi;return function(i,o,r){var a=3>arguments.length;a&&(r=o,o=r[0]);var s,l="on"+o.replace(t,e),d=i[l];return n.isFunction(d)&&(s=d.apply(i,a?n.rest(r):r)),n.isFunction(i.trigger)&&(a+r.length>1?i.trigger.apply(i,a?r:[o].concat(n.drop(r,0))):i.trigger(o)),s}}(),r.triggerMethod=function(){return r._triggerMethod(this,arguments)},r.triggerMethodOn=function(e){var t=n.isFunction(e.triggerMethod)?e.triggerMethod:r.triggerMethod;return t.apply(e,n.rest(arguments))},r.MonitorDOMRefresh=function(e){function t(){e._isShown=!0,o()}function i(){e._isRendered=!0,o()}function o(){e._isShown&&e._isRendered&&r.isNodeAttached(e.el)&&n.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}e.on({show:t,render:i})},function(e){function t(t,i,o,r){var a=r.split(/\s+/);n.each(a,function(n){var r=t[n];if(!r)throw new e.Error('Method "'+n+'" was configured as an event handler, but does not exist.');t.listenTo(i,o,r)})}function i(e,t,n,i){e.listenTo(t,n,i)}function o(e,t,i,o){var r=o.split(/\s+/);n.each(r,function(n){var o=e[n];e.stopListening(t,i,o)})}function r(e,t,n,i){e.stopListening(t,n,i)}function a(t,i,o,r,a){if(i&&o){if(!n.isObject(o))throw new e.Error({message:"Bindings must be an object or function.",url:"marionette.functions.html#marionettebindentityevents"});o=e._getValue(o,t),n.each(o,function(e,o){n.isFunction(e)?r(t,i,o,e):a(t,i,o,e)})}}e.bindEntityEvents=function(e,n,o){a(e,n,o,i,t)},e.unbindEntityEvents=function(e,t,n){a(e,t,n,r,o)},e.proxyBindEntityEvents=function(t,n){return e.bindEntityEvents(this,t,n)},e.proxyUnbindEntityEvents=function(t,n){return e.unbindEntityEvents(this,t,n)}}(r);var s=["description","fileName","lineNumber","name","message","number"];return r.Error=r.extend.call(Error,{urlRoot:"http://marionettejs.com/docs/v"+r.VERSION+"/",constructor:function(e,t){n.isObject(e)?(t=e,e=t.message):t||(t={});var i=Error.call(this,e);n.extend(this,n.pick(i,s),n.pick(t,s)),this.captureStackTrace(),t.url&&(this.url=this.urlRoot+t.url)},captureStackTrace:function(){Error.captureStackTrace&&Error.captureStackTrace(this,r.Error)},toString:function(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}}),r.Error.extend=r.extend,r.Callbacks=function(){this._deferred=r.Deferred(),this._callbacks=[]},n.extend(r.Callbacks.prototype,{add:function(e,t){var i=n.result(this._deferred,"promise");this._callbacks.push({cb:e,ctx:t}),i.then(function(n){t&&(n.context=t),e.call(n.context,n.options)})},run:function(e,t){this._deferred.resolve({options:e,context:t})},reset:function(){var e=this._callbacks;this._deferred=r.Deferred(),this._callbacks=[],n.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),r.Controller=function(e){this.options=e||{},n.isFunction(this.initialize)&&this.initialize(this.options)},r.Controller.extend=r.extend,n.extend(r.Controller.prototype,t.Events,{destroy:function(){return r._triggerMethod(this,"before:destroy",arguments),r._triggerMethod(this,"destroy",arguments),this.stopListening(),this.off(),this},triggerMethod:r.triggerMethod,mergeOptions:r.mergeOptions,getOption:r.proxyGetOption}),r.Object=function(e){this.options=n.extend({},n.result(this,"options"),e),this.initialize.apply(this,arguments)},r.Object.extend=r.extend,n.extend(r.Object.prototype,t.Events,{initialize:function(){},destroy:function(){return this.triggerMethod("before:destroy"),this.triggerMethod("destroy"),this.stopListening(),this},triggerMethod:r.triggerMethod,mergeOptions:r.mergeOptions,getOption:r.proxyGetOption,bindEntityEvents:r.proxyBindEntityEvents,unbindEntityEvents:r.proxyUnbindEntityEvents}),r.Region=r.Object.extend({constructor:function(e){if(this.options=e||{},this.el=this.getOption("el"),this.el=this.el instanceof t.$?this.el[0]:this.el,!this.el)throw new r.Error({name:"NoElError",message:'An "el" must be specified for a region.'});this.$el=this.getEl(this.el),r.Object.call(this,e)},show:function(e,t){if(this._ensureElement()){this._ensureViewIsIntact(e);var n=t||{},i=e!==this.currentView,o=!!n.preventDestroy,a=!!n.forceShow,s=!!this.currentView,l=i&&!o,d=i||a;if(s&&this.triggerMethod("before:swapOut",this.currentView,this,t),this.currentView&&delete this.currentView._parent,l?this.empty():s&&d&&this.currentView.off("destroy",this.empty,this),d){e.once("destroy",this.empty,this),e.render(),e._parent=this,s&&this.triggerMethod("before:swap",e,this,t),this.triggerMethod("before:show",e,this,t),r.triggerMethodOn(e,"before:show",e,this,t),s&&this.triggerMethod("swapOut",this.currentView,this,t);var c=r.isNodeAttached(this.el),u=[],h=n.triggerBeforeAttach||this.triggerBeforeAttach,p=n.triggerAttach||this.triggerAttach;return c&&h&&(u=this._displayedViews(e),this._triggerAttach(u,"before:")),this.attachHtml(e),this.currentView=e,c&&p&&(u=this._displayedViews(e),this._triggerAttach(u)),s&&this.triggerMethod("swap",e,this,t),this.triggerMethod("show",e,this,t),r.triggerMethodOn(e,"show",e,this,t),this}return this}},triggerBeforeAttach:!0,triggerAttach:!0,_triggerAttach:function(e,t){var i=(t||"")+"attach";n.each(e,function(e){r.triggerMethodOn(e,i,e,this)},this)},_displayedViews:function(e){return n.union([e],n.result(e,"_getNestedViews")||[])},_ensureElement:function(){if(n.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]),!this.$el||0===this.$el.length){if(this.getOption("allowMissingEl"))return!1;throw new r.Error('An "el" '+this.$el.selector+" must exist in DOM")}return!0},_ensureViewIsIntact:function(e){if(!e)throw new r.Error({name:"ViewNotValid",message:"The view passed is undefined and therefore invalid. You must pass a view instance to show."});if(e.isDestroyed)throw new r.Error({name:"ViewDestroyedError",message:'View (cid: "'+e.cid+'") has already been destroyed and cannot be used.'})},getEl:function(e){return t.$(e,r._getValue(this.options.parentEl,this))},attachHtml:function(e){this.$el.contents().detach(),this.el.appendChild(e.el)},empty:function(e){var t=this.currentView,n=r._getValue(e,"preventDestroy",this);return t?(t.off("destroy",this.empty,this),this.triggerMethod("before:empty",t),n||this._destroyView(),this.triggerMethod("empty",t),delete this.currentView,n&&this.$el.contents().detach(),this):void 0},_destroyView:function(){var e=this.currentView;e.destroy&&!e.isDestroyed?e.destroy():e.remove&&(e.remove(),e.isDestroyed=!0)},attachView:function(e){return this.currentView=e,this},hasView:function(){return!!this.currentView},reset:function(){return this.empty(),this.$el&&(this.el=this.$el.selector),delete this.$el,this}},{buildRegion:function(e,t){if(n.isString(e))return this._buildRegionFromSelector(e,t);if(e.selector||e.el||e.regionClass)return this._buildRegionFromObject(e,t);if(n.isFunction(e))return this._buildRegionFromRegionClass(e);throw new r.Error({message:"Improper region configuration type.",url:"marionette.region.html#region-configuration-types"})},_buildRegionFromSelector:function(e,t){return new t({el:e})},_buildRegionFromObject:function(e,t){var i=e.regionClass||t,o=n.omit(e,"selector","regionClass");return e.selector&&!o.el&&(o.el=e.selector),new i(o)},_buildRegionFromRegionClass:function(e){return new e}}),r.RegionManager=r.Controller.extend({constructor:function(e){this._regions={},this.length=0,r.Controller.call(this,e),this.addRegions(this.getOption("regions"))},addRegions:function(e,t){return e=r._getValue(e,this,arguments),n.reduce(e,function(e,i,o){return n.isString(i)&&(i={selector:i}),i.selector&&(i=n.defaults({},i,t)),e[o]=this.addRegion(o,i),e},{},this)},addRegion:function(e,t){var n;return n=t instanceof r.Region?t:r.Region.buildRegion(t,r.Region),this.triggerMethod("before:add:region",e,n),n._parent=this,this._store(e,n),this.triggerMethod("add:region",e,n),n},get:function(e){return this._regions[e]},getRegions:function(){return n.clone(this._regions)},removeRegion:function(e){var t=this._regions[e];return this._remove(e,t),t},removeRegions:function(){var e=this.getRegions();return n.each(this._regions,function(e,t){this._remove(t,e)},this),e},emptyRegions:function(){var e=this.getRegions();return n.invoke(e,"empty"),e},destroy:function(){return this.removeRegions(),r.Controller.prototype.destroy.apply(this,arguments)},_store:function(e,t){this._regions[e]||this.length++,this._regions[e]=t},_remove:function(e,t){this.triggerMethod("before:remove:region",e,t),t.empty(),t.stopListening(),delete t._parent,delete this._regions[e],this.length--,this.triggerMethod("remove:region",e,t)}}),r.actAsCollection(r.RegionManager.prototype,"_regions"),r.TemplateCache=function(e){this.templateId=e},n.extend(r.TemplateCache,{templateCaches:{},get:function(e,t){var n=this.templateCaches[e];return n||(n=new r.TemplateCache(e),this.templateCaches[e]=n),n.load(t)},clear:function(){var e,t=n.toArray(arguments),i=t.length;if(i>0)for(e=0;i>e;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),n.extend(r.TemplateCache.prototype,{load:function(e){if(this.compiledTemplate)return this.compiledTemplate;var t=this.loadTemplate(this.templateId,e);return this.compiledTemplate=this.compileTemplate(t,e),this.compiledTemplate},loadTemplate:function(e){var n=t.$(e).html();if(!n||0===n.length)throw new r.Error({name:"NoTemplateError",message:'Could not find template: "'+e+'"'});return n},compileTemplate:function(e,t){return n.template(e,t);
}}),r.Renderer={render:function(e,t){if(!e)throw new r.Error({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."});var i=n.isFunction(e)?e:r.TemplateCache.get(e);return i(t)}},r.View=t.View.extend({isDestroyed:!1,constructor:function(e){n.bindAll(this,"render"),e=r._getValue(e,this),this.options=n.extend({},n.result(this,"options"),e),this._behaviors=r.Behaviors(this),t.View.call(this,this.options),r.MonitorDOMRefresh(this)},getTemplate:function(){return this.getOption("template")},serializeModel:function(e){return e.toJSON.apply(e,n.rest(arguments))},mixinTemplateHelpers:function(e){e=e||{};var t=this.getOption("templateHelpers");return t=r._getValue(t,this),n.extend(e,t)},normalizeUIKeys:function(e){var t=n.result(this,"_uiBindings");return r.normalizeUIKeys(e,t||n.result(this,"ui"))},normalizeUIValues:function(e,t){var i=n.result(this,"ui"),o=n.result(this,"_uiBindings");return r.normalizeUIValues(e,o||i,t)},configureTriggers:function(){if(this.triggers){var e=this.normalizeUIKeys(n.result(this,"triggers"));return n.reduce(e,function(e,t,n){return e[n]=this._buildViewTrigger(t),e},{},this)}},delegateEvents:function(e){return this._delegateDOMEvents(e),this.bindEntityEvents(this.model,this.getOption("modelEvents")),this.bindEntityEvents(this.collection,this.getOption("collectionEvents")),n.each(this._behaviors,function(e){e.bindEntityEvents(this.model,e.getOption("modelEvents")),e.bindEntityEvents(this.collection,e.getOption("collectionEvents"))},this),this},_delegateDOMEvents:function(e){var i=r._getValue(e||this.events,this);i=this.normalizeUIKeys(i),n.isUndefined(e)&&(this.events=i);var o={},a=n.result(this,"behaviorEvents")||{},s=this.configureTriggers(),l=n.result(this,"behaviorTriggers")||{};n.extend(o,a,i,s,l),t.View.prototype.delegateEvents.call(this,o)},undelegateEvents:function(){return t.View.prototype.undelegateEvents.apply(this,arguments),this.unbindEntityEvents(this.model,this.getOption("modelEvents")),this.unbindEntityEvents(this.collection,this.getOption("collectionEvents")),n.each(this._behaviors,function(e){e.unbindEntityEvents(this.model,e.getOption("modelEvents")),e.unbindEntityEvents(this.collection,e.getOption("collectionEvents"))},this),this},_ensureViewIsIntact:function(){if(this.isDestroyed)throw new r.Error({name:"ViewDestroyedError",message:'View (cid: "'+this.cid+'") has already been destroyed and cannot be used.'})},destroy:function(){if(this.isDestroyed)return this;var e=n.toArray(arguments);return this.triggerMethod.apply(this,["before:destroy"].concat(e)),this.isDestroyed=!0,this.triggerMethod.apply(this,["destroy"].concat(e)),this.unbindUIElements(),this.isRendered=!1,this.remove(),n.invoke(this._behaviors,"destroy",e),this},bindUIElements:function(){this._bindUIElements(),n.invoke(this._behaviors,this._bindUIElements)},_bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=n.result(this,"_uiBindings");this.ui={},n.each(e,function(e,t){this.ui[t]=this.$(e)},this)}},unbindUIElements:function(){this._unbindUIElements(),n.invoke(this._behaviors,this._unbindUIElements)},_unbindUIElements:function(){this.ui&&this._uiBindings&&(n.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)},_buildViewTrigger:function(e){var t=n.isObject(e),i=n.defaults({},t?e:{},{preventDefault:!0,stopPropagation:!0}),o=t?i.event:e;return function(e){e&&(e.preventDefault&&i.preventDefault&&e.preventDefault(),e.stopPropagation&&i.stopPropagation&&e.stopPropagation());var t={view:this,model:this.model,collection:this.collection};this.triggerMethod(o,t)}},setElement:function(){var e=t.View.prototype.setElement.apply(this,arguments);return n.invoke(this._behaviors,"proxyViewProperties",this),e},triggerMethod:function(){var e=r._triggerMethod(this,arguments);return this._triggerEventOnBehaviors(arguments),this._triggerEventOnParentLayout(arguments[0],n.rest(arguments)),e},_triggerEventOnBehaviors:function(e){for(var t=r._triggerMethod,n=this._behaviors,i=0,o=n&&n.length;o>i;i++)t(n[i],e)},_triggerEventOnParentLayout:function(e,t){var i=this._parentLayoutView();if(i){var o=r.getOption(i,"childViewEventPrefix"),a=o+":"+e;r._triggerMethod(i,[a,this].concat(t));var s=r.getOption(i,"childEvents"),l=i.normalizeMethods(s);l&&n.isFunction(l[e])&&l[e].apply(i,[this].concat(t))}},_getImmediateChildren:function(){return[]},_getNestedViews:function(){var e=this._getImmediateChildren();return e.length?n.reduce(e,function(e,t){return t._getNestedViews?e.concat(t._getNestedViews()):e},e):e},_getAncestors:function(){for(var e=[],t=this._parent;t;)e.push(t),t=t._parent;return e},_parentLayoutView:function(){var e=this._getAncestors();return n.find(e,function(e){return e instanceof r.LayoutView})},normalizeMethods:r.normalizeMethods,mergeOptions:r.mergeOptions,getOption:r.proxyGetOption,bindEntityEvents:r.proxyBindEntityEvents,unbindEntityEvents:r.proxyUnbindEntityEvents}),r.ItemView=r.View.extend({constructor:function(){r.View.apply(this,arguments)},serializeData:function(){if(!this.model&&!this.collection)return{};var e=[this.model||this.collection];return arguments.length&&e.push.apply(e,arguments),this.model?this.serializeModel.apply(this,e):{items:this.serializeCollection.apply(this,e)}},serializeCollection:function(e){return e.toJSON.apply(e,n.rest(arguments))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderTemplate(),this.isRendered=!0,this.bindUIElements(),this.triggerMethod("render",this),this},_renderTemplate:function(){var e=this.getTemplate();if(e!==!1){if(!e)throw new r.Error({name:"UndefinedTemplateError",message:"Cannot render the template since it is null or undefined."});var t=this.mixinTemplateHelpers(this.serializeData()),n=r.Renderer.render(e,t,this);return this.attachElContent(n),this}},attachElContent:function(e){return this.$el.html(e),this}}),r.CollectionView=r.View.extend({childViewEventPrefix:"childview",sort:!0,constructor:function(){this.once("render",this._initialEvents),this._initChildViewStorage(),r.View.apply(this,arguments),this.on("show",this._onShowCalled),this.initRenderBuffer()},initRenderBuffer:function(){this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this._triggerBeforeShowBufferedChildren(),this.attachBuffer(this,this._createBuffer()),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerBeforeShowBufferedChildren:function(){this._isShown&&n.each(this._bufferedChildren,n.partial(this._triggerMethodOnChild,"before:show"))},_triggerShowBufferedChildren:function(){this._isShown&&(n.each(this._bufferedChildren,n.partial(this._triggerMethodOnChild,"show")),this._bufferedChildren=[])},_triggerMethodOnChild:function(e,t){r.triggerMethodOn(t,e)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.getOption("sort")&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(e,t,i){var o;if(o=void 0!==i.at?i.at:n.indexOf(this._filteredSortedModels(),e),this._shouldAddChild(e,o)){this.destroyEmptyView();var r=this.getChildView(e);this.addChild(e,r,o)}},_onCollectionRemove:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},_onShowCalled:function(){this.children.each(n.partial(this._triggerMethodOnChild,"show"))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderChildren(),this.isRendered=!0,this.triggerMethod("render",this),this},reorder:function(){var e=this.children,t=this._filteredSortedModels(),i=n.find(t,function(t){return!e.findByModel(t)});if(i)this.render();else{var o=n.map(t,function(t){return e.findByModel(t).el});this.triggerMethod("before:reorder"),this._appendReorderedChildren(o),this.triggerMethod("reorder")}},resortView:function(){r.getOption(this,"reorderOnSort")?this.reorder():this.render()},_sortViews:function(){var e=this._filteredSortedModels(),t=n.find(e,function(e,t){var n=this.children.findByModel(e);return!n||n._index!==t},this);t&&this.resortView()},_emptyViewIndex:-1,_appendReorderedChildren:function(e){this.$el.append(e)},_renderChildren:function(){this.destroyEmptyView(),this.destroyChildren(),this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this),this.children.isEmpty()&&this.showEmptyView())},showCollection:function(){var e,t=this._filteredSortedModels();n.each(t,function(t,n){e=this.getChildView(t),this.addChild(t,e,n)},this)},_filteredSortedModels:function(){var e,t=this.getViewComparator();return e=t?n.isString(t)||1===t.length?this.collection.sortBy(t,this):n.clone(this.collection.models).sort(n.bind(t,this)):this.collection.models,this.getOption("filter")&&(e=n.filter(e,function(e,t){return this._shouldAddChild(e,t)},this)),e},showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this.triggerMethod("before:render:empty"),this._showingEmptyView=!0;var n=new t.Model;this.addEmptyView(n,e),this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.triggerMethod("before:remove:empty"),this.destroyChildren(),delete this._showingEmptyView,this.triggerMethod("remove:empty"))},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(e,t){var i=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");n.isFunction(i)&&(i=i.call(this,e,this._emptyViewIndex));var o=this.buildChildView(e,t,i);o._parent=this,this.proxyChildEvents(o),this._isShown&&r.triggerMethodOn(o,"before:show"),this.children.add(o),this.renderChildView(o,this._emptyViewIndex),this._isShown&&r.triggerMethodOn(o,"show")},getChildView:function(){var e=this.getOption("childView");if(!e)throw new r.Error({name:"NoChildViewError",message:'A "childView" must be specified'});return e},addChild:function(e,t,n){var i=this.getOption("childViewOptions");i=r._getValue(i,this,[e,n]);var o=this.buildChildView(e,t,i);return this._updateIndices(o,!0,n),this._addChildView(o,n),o._parent=this,o},_updateIndices:function(e,t,n){this.getOption("sort")&&(t&&(e._index=n),this.children.each(function(n){n._index>=e._index&&(n._index+=t?1:-1)}))},_addChildView:function(e,t){this.proxyChildEvents(e),this.triggerMethod("before:add:child",e),this._isShown&&!this.isBuffering&&r.triggerMethodOn(e,"before:show"),this.children.add(e),this.renderChildView(e,t),this._isShown&&!this.isBuffering&&r.triggerMethodOn(e,"show"),this.triggerMethod("add:child",e)},renderChildView:function(e,t){return e.render(),this.attachHtml(this,e,t),e},buildChildView:function(e,t,i){var o=n.extend({model:e},i);return new t(o)},removeChildView:function(e){return e&&(this.triggerMethod("before:remove:child",e),e.destroy?e.destroy():e.remove&&e.remove(),delete e._parent,this.stopListening(e),this.children.remove(e),this.triggerMethod("remove:child",e),this._updateIndices(e,!1)),e},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(e,t){e.$el.append(t)},_createBuffer:function(){var e=document.createDocumentFragment();return n.each(this._bufferedChildren,function(t){e.appendChild(t.el)}),e},attachHtml:function(e,t,n){e.isBuffering?e._bufferedChildren.splice(n,0,t):e._insertBefore(t,n)||e._insertAfter(t)},_insertBefore:function(e,t){var n,i=this.getOption("sort")&&this.children.length-1>t;return i&&(n=this.children.find(function(e){return e._index===t+1})),n?(n.$el.before(e.el),!0):!1},_insertAfter:function(e){this.$el.append(e.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},destroy:function(){return this.isDestroyed?this:(this.triggerMethod("before:destroy:collection"),this.destroyChildren(),this.triggerMethod("destroy:collection"),r.View.prototype.destroy.apply(this,arguments))},destroyChildren:function(){var e=this.children.map(n.identity);return this.children.each(this.removeChildView,this),this.checkEmpty(),e},_shouldAddChild:function(e,t){var i=this.getOption("filter");return!n.isFunction(i)||i.call(this,e,t,this.collection)},proxyChildEvents:function(e){var t=this.getOption("childViewEventPrefix");this.listenTo(e,"all",function(){var i=n.toArray(arguments),o=i[0],r=this.normalizeMethods(n.result(this,"childEvents"));i[0]=t+":"+o,i.splice(1,0,e),void 0!==r&&n.isFunction(r[o])&&r[o].apply(this,i.slice(1)),this.triggerMethod.apply(this,i)})},_getImmediateChildren:function(){return n.values(this.children._views)},getViewComparator:function(){return this.getOption("viewComparator")}}),r.CompositeView=r.CollectionView.extend({constructor:function(){r.CollectionView.apply(this,arguments)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this._renderChildren),this.getOption("sort")&&this.listenTo(this.collection,"sort",this._sortViews))},getChildView:function(){var e=this.getOption("childView")||this.constructor;return e},serializeData:function(){var e={};return this.model&&(e=n.partial(this.serializeModel,this.model).apply(this,arguments)),e},render:function(){return this._ensureViewIsIntact(),this._isRendering=!0,this.resetChildViewContainer(),this.triggerMethod("before:render",this),this._renderTemplate(),this._renderChildren(),this._isRendering=!1,this.isRendered=!0,this.triggerMethod("render",this),this},_renderChildren:function(){(this.isRendered||this._isRendering)&&r.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e),this.triggerMethod("before:render:template");var t=this.getTemplate(),n=r.Renderer.render(t,e,this);this.attachElContent(n),this.bindUIElements(),this.triggerMethod("render:template")},attachElContent:function(e){return this.$el.html(e),this},attachBuffer:function(e,t){var n=this.getChildViewContainer(e);n.append(t)},_insertAfter:function(e){var t=this.getChildViewContainer(this,e);t.append(e.el)},_appendReorderedChildren:function(e){var t=this.getChildViewContainer(this);t.append(e)},getChildViewContainer:function(e){if("$childViewContainer"in e)return e.$childViewContainer;var t,n=r.getOption(e,"childViewContainer");if(n){var i=r._getValue(n,e);if(t="@"===i.charAt(0)&&e.ui?e.ui[i.substr(4)]:e.$(i),0>=t.length)throw new r.Error({name:"ChildViewContainerMissingError",message:'The specified "childViewContainer" was not found: '+e.childViewContainer})}else t=e.$el;return e.$childViewContainer=t,t},resetChildViewContainer:function(){this.$childViewContainer&&delete this.$childViewContainer}}),r.LayoutView=r.ItemView.extend({regionClass:r.Region,options:{destroyImmediate:!1},childViewEventPrefix:"childview",constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),r.ItemView.call(this,e)},render:function(){return this._ensureViewIsIntact(),this._firstRender?this._firstRender=!1:this._reInitializeRegions(),r.ItemView.prototype.render.apply(this,arguments)},destroy:function(){return this.isDestroyed?this:(this.getOption("destroyImmediate")===!0&&this.$el.remove(),this.regionManager.destroy(),r.ItemView.prototype.destroy.apply(this,arguments))},showChildView:function(e,t){return this.getRegion(e).show(t)},getChildView:function(e){return this.getRegion(e).currentView},addRegion:function(e,t){var n={};return n[e]=t,this._buildRegions(n)[e]},addRegions:function(e){return this.regions=n.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},getRegion:function(e){return this.regionManager.get(e)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(e){var t={regionClass:this.getOption("regionClass"),parentEl:n.partial(n.result,this,"el")};return this.regionManager.addRegions(e,t)},_initializeRegions:function(e){var t;this._initRegionManager(),t=r._getValue(this.regions,this,[e])||{};var i=this.getOption.call(e,"regions");i=r._getValue(i,this,[e]),n.extend(t,i),t=this.normalizeUIValues(t,["selector","el"]),this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.invoke("reset")},getRegionManager:function(){return new r.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager(),this.regionManager._parent=this,this.listenTo(this.regionManager,"before:add:region",function(e){this.triggerMethod("before:add:region",e)}),this.listenTo(this.regionManager,"add:region",function(e,t){this[e]=t,this.triggerMethod("add:region",e,t)}),this.listenTo(this.regionManager,"before:remove:region",function(e){this.triggerMethod("before:remove:region",e)}),this.listenTo(this.regionManager,"remove:region",function(e,t){delete this[e],this.triggerMethod("remove:region",e,t)})},_getImmediateChildren:function(){return n.chain(this.regionManager.getRegions()).pluck("currentView").compact().value()}}),r.Behavior=r.Object.extend({constructor:function(e,t){this.view=t,this.defaults=n.result(this,"defaults")||{},this.options=n.extend({},this.defaults,e),this.ui=n.extend({},n.result(t,"ui"),n.result(this,"ui")),r.Object.apply(this,arguments)},$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){return this.stopListening(),this},proxyViewProperties:function(e){this.$el=e.$el,this.el=e.el}}),r.Behaviors=function(e,t){function n(e,i){return t.isObject(e.behaviors)?(i=n.parseBehaviors(e,i||t.result(e,"behaviors")),n.wrap(e,i,t.keys(a)),i):{}}function i(e,t){this._view=e,this._behaviors=t,this._triggers={}}function o(e){return e._uiBindings||e.ui}var r=/^(\S+)\s*(.*)$/,a={behaviorTriggers:function(e,t){var n=new i(this,t);return n.buildBehaviorTriggers()},behaviorEvents:function(n,i){var a={};return t.each(i,function(n,i){var s={},l=t.clone(t.result(n,"events"))||{};l=e.normalizeUIKeys(l,o(n));var d=0;t.each(l,function(e,o){var a=o.match(r),l=a[1]+"."+[this.cid,i,d++," "].join(""),c=a[2],u=l+c,h=t.isFunction(e)?e:n[e];s[u]=t.bind(h,n)},this),a=t.extend(a,s)},this),a}};return t.extend(n,{behaviorsLookup:function(){throw new e.Error({message:"You must define where your behaviors are stored.",url:"marionette.behaviors.html#behaviorslookup"})},getBehaviorClass:function(t,i){return t.behaviorClass?t.behaviorClass:e._getValue(n.behaviorsLookup,this,[t,i])[i]},parseBehaviors:function(e,i){return t.chain(i).map(function(i,o){var r=n.getBehaviorClass(i,o),a=new r(i,e),s=n.parseBehaviors(e,t.result(a,"behaviors"));return[a].concat(s)}).flatten().value()},wrap:function(e,n,i){t.each(i,function(i){e[i]=t.partial(a[i],e[i],n)})}}),t.extend(i.prototype,{buildBehaviorTriggers:function(){return t.each(this._behaviors,this._buildTriggerHandlersForBehavior,this),this._triggers},_buildTriggerHandlersForBehavior:function(n,i){var r=t.clone(t.result(n,"triggers"))||{};r=e.normalizeUIKeys(r,o(n)),t.each(r,t.bind(this._setHandlerForBehavior,this,n,i))},_setHandlerForBehavior:function(e,t,n,i){var o=i.replace(/^\S+/,function(e){return e+".behaviortriggers"+t});this._triggers[o]=this._view._buildViewTrigger(n)}}),n}(r,n),r.AppRouter=t.Router.extend({constructor:function(e){this.options=e||{},t.Router.apply(this,arguments);var n=this.getOption("appRoutes"),i=this._getController();this.processAppRoutes(i,n),this.on("route",this._processOnRoute,this)},appRoute:function(e,t){var n=this._getController();this._addAppRoute(n,e,t)},_processOnRoute:function(e,t){if(n.isFunction(this.onRoute)){var i=n.invert(this.getOption("appRoutes"))[e];this.onRoute(e,i,t)}},processAppRoutes:function(e,t){if(t){var i=n.keys(t).reverse();n.each(i,function(n){this._addAppRoute(e,n,t[n])},this)}},_getController:function(){return this.getOption("controller")},_addAppRoute:function(e,t,i){var o=e[i];if(!o)throw new r.Error('Method "'+i+'" was not found on the controller');this.route(t,i,n.bind(o,e))},mergeOptions:r.mergeOptions,getOption:r.proxyGetOption,triggerMethod:r.triggerMethod,bindEntityEvents:r.proxyBindEntityEvents,unbindEntityEvents:r.proxyUnbindEntityEvents}),r.Application=r.Object.extend({constructor:function(e){this._initializeRegions(e),this._initCallbacks=new r.Callbacks,this.submodules={},n.extend(this,e),this._initChannel(),r.Object.call(this,e)},execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("before:start",e),this._initCallbacks.run(e,this),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(e){return this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},getRegions:function(){return this._regionManager.getRegions()},module:function(e,t){var i=r.Module.getClass(t),o=n.toArray(arguments);return o.unshift(this),i.create.apply(i,o)},getRegionManager:function(){return new r.RegionManager},_initializeRegions:function(e){var t=n.isFunction(this.regions)?this.regions(e):this.regions||{};this._initRegionManager();var i=r.getOption(e,"regions");return n.isFunction(i)&&(i=i.call(this,e)),n.extend(t,i),this.addRegions(t),this},_initRegionManager:function(){this._regionManager=this.getRegionManager(),this._regionManager._parent=this,this.listenTo(this._regionManager,"before:add:region",function(){r._triggerMethod(this,"before:add:region",arguments)}),this.listenTo(this._regionManager,"add:region",function(e,t){this[e]=t,r._triggerMethod(this,"add:region",arguments)}),this.listenTo(this._regionManager,"before:remove:region",function(){r._triggerMethod(this,"before:remove:region",arguments)}),this.listenTo(this._regionManager,"remove:region",function(e){delete this[e],r._triggerMethod(this,"remove:region",arguments)})},_initChannel:function(){this.channelName=n.result(this,"channelName")||"global",this.channel=n.result(this,"channel")||t.Wreqr.radio.channel(this.channelName),this.vent=n.result(this,"vent")||this.channel.vent,this.commands=n.result(this,"commands")||this.channel.commands,this.reqres=n.result(this,"reqres")||this.channel.reqres}}),r.Module=function(e,t,i){this.moduleName=e,this.options=n.extend({},this.options,i),this.initialize=i.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,n.isFunction(this.initialize)&&this.initialize(e,t,this.options)},r.Module.extend=r.extend,n.extend(r.Module.prototype,t.Events,{startWithParent:!0,initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(n.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,this.triggerMethod("before:stop"),n.invoke(this.submodules,"stop"),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,i){if(e){var o=n.flatten([this,this.app,t,r,t.$,n,i]);e.apply(this,o)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new r.Callbacks,this._finalizerCallbacks=new r.Callbacks},triggerMethod:r.triggerMethod}),n.extend(r.Module,{create:function(e,t,i){var o=e,r=n.drop(arguments,3);t=t.split(".");var a=t.length,s=[];return s[a-1]=i,n.each(t,function(t,n){var a=o;o=this._getModule(a,t,e,i),this._addModuleDefinition(a,o,s[n],r)},this),o},_getModule:function(e,t,i,o){var r=n.extend({},o),a=this.getClass(o),s=e[t];return s||(s=new a(t,i,r),e[t]=s,e.submodules[t]=s),s},getClass:function(e){var t=r.Module;return e?e.prototype instanceof t?e:e.moduleClass||t:t},_addModuleDefinition:function(e,t,n,i){var o=this._getDefine(n),r=this._getStartWithParent(n,t);o&&t.addDefinition(o,i),this._addStartWithParent(e,t,r)},_getStartWithParent:function(e,t){var i;return n.isFunction(e)&&e.prototype instanceof r.Module?(i=t.constructor.prototype.startWithParent,n.isUndefined(i)?!0:i):n.isObject(e)?(i=e.startWithParent,n.isUndefined(i)?!0:i):!0},_getDefine:function(e){return!n.isFunction(e)||e.prototype instanceof r.Module?n.isObject(e)?e.define:null:e},_addStartWithParent:function(e,t,n){t.startWithParent=t.startWithParent&&n,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)}))}}),r}),function(e){define("backbone.radio",["underscore","jquery","backbone"],function(){return function(){function e(e,t,n){if(a.DEBUG){var i=n?" on the "+n+" channel":"";console.warn(e+i+': "'+t+'"')}}function t(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var o in n)e[t].apply(e,[o,n[o]].concat(i));return!1}return!0}function n(e){return s[e]||(s[e]=_.partial(a.log,e))}function i(e){return _.isFunction(e)?e:_.constant(e)}var o=Array.prototype.slice,r=Backbone.Radio,a=Backbone.Radio={};a.VERSION="<%= version %>",a.noConflict=function(){return Backbone.Radio=r,this},a.DEBUG=!1;var s={};_.extend(a,{log:function(e,t){var n=o.call(arguments,2);console.log("["+e+'] "'+t+'"',n)},tuneIn:function(e){var t=a.channel(e);return t._tunedIn=!0,t.on("all",n(e)),this},tuneOut:function(e){var t=a.channel(e);return t._tunedIn=!1,t.off("all",n(e)),delete s[e],this}}),a.Commands={command:function(n){var i=o.call(arguments,1);if(!t(this,"command",n,i))return this;var r=this.channelName,s=this._commands;if(r&&this._tunedIn&&a.log.apply(this,[r,n].concat(i)),s&&(s[n]||s["default"])){var l=s[n]||s["default"];i=s[n]?i:arguments,l.callback.apply(l.context,i)}else e("An unhandled command was fired",n,r);return this},comply:function(e,n,i){return t(this,"comply",e,[n,i])?(this._commands||(this._commands={}),this._commands[e]={callback:n,context:i||this},this):this},complyOnce:function(e,n,i){if(!t(this,"complyOnce",e,[n,i]))return this;var o=this,r=_.once(function(){return o.stopComplying(e),n.apply(this,arguments)});return this.comply(e,r,i)},stopComplying:function(n){if(!t(this,"stopComplying",n))return this;var i=this._commands;return n?i&&i[n]?delete i[n]:e("Attempted to remove the unregistered command",n,this.channelName):delete this._commands,this}},a.Requests={request:function(t){var n=o.call(arguments,1),i=this.channelName,r=this._requests;if(i&&this._tunedIn&&a.log.apply(this,[i,t].concat(n)),r&&(r[t]||r["default"])){var s=r[t]||r["default"];return n=r[t]?n:arguments,s.callback.apply(s.context,n)}e("An unhandled request was fired",t,i)},reply:function(e,n,o){return t(this,"reply",e,[n,o])?(this._requests||(this._requests={}),this._requests[e]={callback:i(n),context:o||this},this):this},replyOnce:function(e,n,o){if(!t(this,"replyOnce",e,[n,o]))return this;var r=this,a=_.once(function(){return r.stopReplying(e),i(n).apply(this,arguments)});return this.reply(e,a,o)},stopReplying:function(n){if(!t(this,"stopReplying",n))return this;var i=this._requests;return n?i&&i[n]?delete i[n]:e("Attempted to remove the unregistered request",n,this.channelName):delete this._requests,this}},a._channels={},a.channel=function(e){if(!e)throw new Error("You must provide a name for the channel.");return a._channels[e]||new a.Channel(e)},a.Channel=function(e){this.channelName=e,a._channels[e]=this},_.extend(a.Channel.prototype,Backbone.Events,a.Commands,a.Requests,{reset:function(){return this.off(),this.stopListening(),this.stopComplying(),this.stopReplying(),this}});var l,d,c=[Backbone.Events,a.Commands,a.Requests];return _.each(c,function(e){_.each(e,function(e,t){a[t]=function(e){return d=o.call(arguments,1),l=this.channel(e),l[t].apply(l,d)}})}),Backbone.Radio}.apply(e,arguments)})}(this),define("api/Messaging",["backbone","backbone.radio"],function(e){"use strict";var t=e.Radio.channel("global");return t.getChannel=function(t){return e.Radio.channel(t)},t}),!function(e,t){"function"==typeof define&&define.amd?define("handlebars",[],t):"object"==typeof exports?module.exports=t():e.Handlebars=e.Handlebars||t()}(this,function(){var e=function(){"use strict";function e(e){this.string=e}var t;return e.prototype.toString=function(){return""+this.string},t=e}(),t=function(e){"use strict";function t(e){return l[e]}function n(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}function i(e){return e instanceof s?e.toString():null==e?"":e?(e=""+e,c.test(e)?e.replace(d,t):e):e+""}function o(e){return e||0===e?p(e)&&0===e.length?!0:!1:!0}function r(e,t){return(e?e+".":"")+t}var a={},s=e,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},d=/[&<>"'`]/g,c=/[&<>"'`]/;a.extend=n;var u=Object.prototype.toString;a.toString=u;var h=function(e){return"function"==typeof e};h(/x/)&&(h=function(e){return"function"==typeof e&&"[object Function]"===u.call(e)});var h;a.isFunction=h;var p=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===u.call(e):!1};return a.isArray=p,a.escapeExpression=i,a.isEmpty=o,a.appendContextPath=r,a}(e),n=function(){"use strict";function e(e,t){var i;t&&t.firstLine&&(i=t.firstLine,e+=" - "+i+":"+t.firstColumn);for(var o=Error.prototype.constructor.call(this,e),r=0;r<n.length;r++)this[n[r]]=o[n[r]];i&&(this.lineNumber=i,this.column=t.firstColumn)}var t,n=["description","fileName","lineNumber","message","name","number","stack"];return e.prototype=new Error,t=e}(),i=function(e,t){"use strict";function n(e,t){this.helpers=e||{},this.partials=t||{},i(this)}function i(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new a("Missing helper: '"+arguments[arguments.length-1].name+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse,o=n.fn;if(t===!0)return o(this);if(t===!1||null==t)return i(this);if(c(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):i(this);if(n.data&&n.ids){var a=m(n.data);a.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:a}}return o(t,n)}),e.registerHelper("each",function(e,t){if(!t)throw new a("Must pass iterator to #each");var n,i,o=t.fn,s=t.inverse,l=0,d="";if(t.data&&t.ids&&(i=r.appendContextPath(t.data.contextPath,t.ids[0])+"."),u(e)&&(e=e.call(this)),t.data&&(n=m(t.data)),e&&"object"==typeof e)if(c(e))for(var h=e.length;h>l;l++)n&&(n.index=l,n.first=0===l,n.last=l===e.length-1,i&&(n.contextPath=i+l)),d+=o(e[l],{data:n});else for(var p in e)e.hasOwnProperty(p)&&(n&&(n.key=p,n.index=l,n.first=0===l,i&&(n.contextPath=i+p)),d+=o(e[p],{data:n}),l++);return 0===l&&(d=s(this)),d}),e.registerHelper("if",function(e,t){return u(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||r.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){u(e)&&(e=e.call(this));var n=t.fn;if(r.isEmpty(e))return t.inverse(this);if(t.data&&t.ids){var i=m(t.data);i.contextPath=r.appendContextPath(t.data.contextPath,t.ids[0]),t={data:i}}return n(e,t)}),e.registerHelper("log",function(t,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(i,t)}),e.registerHelper("lookup",function(e,t){return e&&e[t]})}var o={},r=e,a=t,s="2.0.0";o.VERSION=s;var l=6;o.COMPILER_REVISION=l;var d={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",
4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};o.REVISION_CHANGES=d;var c=r.isArray,u=r.isFunction,h=r.toString,p="[object Object]";o.HandlebarsEnvironment=n,n.prototype={constructor:n,logger:g,log:f,registerHelper:function(e,t){if(h.call(e)===p){if(t)throw new a("Arg not supported with multiple helpers");r.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){h.call(e)===p?r.extend(this.partials,e):this.partials[e]=t},unregisterPartial:function(e){delete this.partials[e]}};var g={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(g.level<=e){var n=g.methodMap[e];"undefined"!=typeof console&&console[n]&&console[n].call(console,t)}}};o.logger=g;var f=g.log;o.log=f;var m=function(e){var t=r.extend({},e);return t._parent=e,t};return o.createFrame=m,o}(t,n),o=function(e,t,n){"use strict";function i(e){var t=e&&e[0]||1,n=h;if(t!==n){if(n>t){var i=p[n],o=p[t];throw new u("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+o+").")}throw new u("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function o(e,t){if(!t)throw new u("No environment passed to template");if(!e||!e.main)throw new u("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var n=function(n,i,o,r,a,s,l,d,h){a&&(r=c.extend({},r,a));var p=t.VM.invokePartial.call(this,n,o,r,s,l,d,h);if(null==p&&t.compile){var g={helpers:s,partials:l,data:d,depths:h};l[o]=t.compile(n,{data:void 0!==d,compat:e.compat},t),p=l[o](r,g)}if(null!=p){if(i){for(var f=p.split("\n"),m=0,v=f.length;v>m&&(f[m]||m+1!==v);m++)f[m]=i+f[m];p=f.join("\n")}return p}throw new u("The partial "+o+" could not be compiled when running in runtime-only mode")},i={lookup:function(e,t){for(var n=e.length,i=0;n>i;i++)if(e[i]&&null!=e[i][t])return e[i][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:c.escapeExpression,invokePartial:n,fn:function(t){return e[t]},programs:[],program:function(e,t,n){var i=this.programs[e],o=this.fn(e);return t||n?i=r(this,e,o,t,n):i||(i=this.programs[e]=r(this,e,o)),i},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=c.extend({},t,e)),n},noop:t.VM.noop,compilerInfo:e.compiler},o=function(t,n){n=n||{};var r=n.data;o._setup(n),!n.partial&&e.useData&&(r=l(t,r));var a;return e.useDepths&&(a=n.depths?[t].concat(n.depths):[t]),e.main.call(i,t,i.helpers,i.partials,r,a)};return o.isTop=!0,o._setup=function(n){n.partial?(i.helpers=n.helpers,i.partials=n.partials):(i.helpers=i.merge(n.helpers,t.helpers),e.usePartial&&(i.partials=i.merge(n.partials,t.partials)))},o._child=function(t,n,o){if(e.useDepths&&!o)throw new u("must pass parent depths");return r(i,t,e[t],n,o)},o}function r(e,t,n,i,o){var r=function(t,r){return r=r||{},n.call(e,t,e.helpers,e.partials,r.data||i,o&&[t].concat(o))};return r.program=t,r.depth=o?o.length:0,r}function a(e,t,n,i,o,r,a){var s={partial:!0,helpers:i,partials:o,data:r,depths:a};if(void 0===e)throw new u("The partial "+t+" could not be found");return e instanceof Function?e(n,s):void 0}function s(){return""}function l(e,t){return t&&"root"in t||(t=t?g(t):{},t.root=e),t}var d={},c=e,u=t,h=n.COMPILER_REVISION,p=n.REVISION_CHANGES,g=n.createFrame;return d.checkRevision=i,d.template=o,d.program=r,d.invokePartial=a,d.noop=s,d}(t,n,i),r=function(e,t,n,i,o){"use strict";var r,a=e,s=t,l=n,d=i,c=o,u=function(){var e=new a.HandlebarsEnvironment;return d.extend(e,a),e.SafeString=s,e.Exception=l,e.Utils=d,e.escapeExpression=d.escapeExpression,e.VM=c,e.template=function(t){return c.template(t,e)},e},h=u();return h.create=u,h["default"]=h,r=h}(i,e,n,t,o),a=function(e){"use strict";function t(e){e=e||{},this.firstLine=e.first_line,this.firstColumn=e.first_column,this.lastColumn=e.last_column,this.lastLine=e.last_line}var n,i=e,o={ProgramNode:function(e,n,i){t.call(this,i),this.type="program",this.statements=e,this.strip=n},MustacheNode:function(e,n,i,r,a){if(t.call(this,a),this.type="mustache",this.strip=r,null!=i&&i.charAt){var s=i.charAt(3)||i.charAt(2);this.escaped="{"!==s&&"&"!==s}else this.escaped=!!i;this.sexpr=e instanceof o.SexprNode?e:new o.SexprNode(e,n),this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(e,n,i){t.call(this,i),this.type="sexpr",this.hash=n;var o=this.id=e[0],r=this.params=e.slice(1);this.isHelper=!(!r.length&&!n),this.eligibleHelper=this.isHelper||o.isSimple},PartialNode:function(e,n,i,o,r){t.call(this,r),this.type="partial",this.partialName=e,this.context=n,this.hash=i,this.strip=o,this.strip.inlineStandalone=!0},BlockNode:function(e,n,i,o,r){t.call(this,r),this.type="block",this.mustache=e,this.program=n,this.inverse=i,this.strip=o,i&&!n&&(this.isInverse=!0)},RawBlockNode:function(e,n,r,a){if(t.call(this,a),e.sexpr.id.original!==r)throw new i(e.sexpr.id.original+" doesn't match "+r,this);n=new o.ContentNode(n,a),this.type="block",this.mustache=e,this.program=new o.ProgramNode([n],{},a)},ContentNode:function(e,n){t.call(this,n),this.type="content",this.original=this.string=e},HashNode:function(e,n){t.call(this,n),this.type="hash",this.pairs=e},IdNode:function(e,n){t.call(this,n),this.type="ID";for(var o="",r=[],a=0,s="",l=0,d=e.length;d>l;l++){var c=e[l].part;if(o+=(e[l].separator||"")+c,".."===c||"."===c||"this"===c){if(r.length>0)throw new i("Invalid path: "+o,this);".."===c?(a++,s+="../"):this.isScoped=!0}else r.push(c)}this.original=o,this.parts=r,this.string=r.join("."),this.depth=a,this.idName=s+this.string,this.isSimple=1===e.length&&!this.isScoped&&0===a,this.stringModeValue=this.string},PartialNameNode:function(e,n){t.call(this,n),this.type="PARTIAL_NAME",this.name=e.original},DataNode:function(e,n){t.call(this,n),this.type="DATA",this.id=e,this.stringModeValue=e.stringModeValue,this.idName="@"+e.stringModeValue},StringNode:function(e,n){t.call(this,n),this.type="STRING",this.original=this.string=this.stringModeValue=e},NumberNode:function(e,n){t.call(this,n),this.type="NUMBER",this.original=this.number=e,this.stringModeValue=Number(e)},BooleanNode:function(e,n){t.call(this,n),this.type="BOOLEAN",this.bool=e,this.stringModeValue="true"===e},CommentNode:function(e,n){t.call(this,n),this.type="comment",this.comment=e,this.strip={inlineStandalone:!0}}};return n=o}(n),s=function(){"use strict";var e,t=function(){function e(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,CONTENT:12,COMMENT:13,openRawBlock:14,END_RAW_BLOCK:15,OPEN_RAW_BLOCK:16,sexpr:17,CLOSE_RAW_BLOCK:18,openBlock:19,block_option0:20,closeBlock:21,openInverse:22,block_option1:23,OPEN_BLOCK:24,CLOSE:25,OPEN_INVERSE:26,inverseAndProgram:27,INVERSE:28,OPEN_ENDBLOCK:29,path:30,OPEN:31,OPEN_UNESCAPED:32,CLOSE_UNESCAPED:33,OPEN_PARTIAL:34,partialName:35,param:36,partial_option0:37,partial_option1:38,sexpr_repetition0:39,sexpr_option0:40,dataName:41,STRING:42,NUMBER:43,BOOLEAN:44,OPEN_SEXPR:45,CLOSE_SEXPR:46,hash:47,hash_repetition_plus0:48,hashSegment:49,ID:50,EQUALS:51,DATA:52,pathSegments:53,SEP:54,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",12:"CONTENT",13:"COMMENT",15:"END_RAW_BLOCK",16:"OPEN_RAW_BLOCK",18:"CLOSE_RAW_BLOCK",24:"OPEN_BLOCK",25:"CLOSE",26:"OPEN_INVERSE",28:"INVERSE",29:"OPEN_ENDBLOCK",31:"OPEN",32:"OPEN_UNESCAPED",33:"CLOSE_UNESCAPED",34:"OPEN_PARTIAL",42:"STRING",43:"NUMBER",44:"BOOLEAN",45:"OPEN_SEXPR",46:"CLOSE_SEXPR",50:"ID",51:"EQUALS",52:"DATA",54:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[10,3],[14,3],[9,4],[9,4],[19,3],[22,3],[27,2],[21,3],[8,3],[8,3],[11,5],[11,4],[17,3],[17,1],[36,1],[36,1],[36,1],[36,1],[36,1],[36,3],[47,1],[49,3],[35,1],[35,1],[35,1],[41,2],[30,1],[53,3],[53,1],[6,0],[6,2],[20,0],[20,1],[23,0],[23,1],[37,0],[37,1],[38,0],[38,1],[39,0],[39,2],[40,0],[40,1],[48,1],[48,2]],performAction:function(e,t,n,i,o,r){var a=r.length-1;switch(o){case 1:return i.prepareProgram(r[a-1].statements,!0),r[a-1];case 2:this.$=new i.ProgramNode(i.prepareProgram(r[a]),{},this._$);break;case 3:this.$=r[a];break;case 4:this.$=r[a];break;case 5:this.$=r[a];break;case 6:this.$=r[a];break;case 7:this.$=new i.ContentNode(r[a],this._$);break;case 8:this.$=new i.CommentNode(r[a],this._$);break;case 9:this.$=new i.RawBlockNode(r[a-2],r[a-1],r[a],this._$);break;case 10:this.$=new i.MustacheNode(r[a-1],null,"","",this._$);break;case 11:this.$=i.prepareBlock(r[a-3],r[a-2],r[a-1],r[a],!1,this._$);break;case 12:this.$=i.prepareBlock(r[a-3],r[a-2],r[a-1],r[a],!0,this._$);break;case 13:this.$=new i.MustacheNode(r[a-1],null,r[a-2],i.stripFlags(r[a-2],r[a]),this._$);break;case 14:this.$=new i.MustacheNode(r[a-1],null,r[a-2],i.stripFlags(r[a-2],r[a]),this._$);break;case 15:this.$={strip:i.stripFlags(r[a-1],r[a-1]),program:r[a]};break;case 16:this.$={path:r[a-1],strip:i.stripFlags(r[a-2],r[a])};break;case 17:this.$=new i.MustacheNode(r[a-1],null,r[a-2],i.stripFlags(r[a-2],r[a]),this._$);break;case 18:this.$=new i.MustacheNode(r[a-1],null,r[a-2],i.stripFlags(r[a-2],r[a]),this._$);break;case 19:this.$=new i.PartialNode(r[a-3],r[a-2],r[a-1],i.stripFlags(r[a-4],r[a]),this._$);break;case 20:this.$=new i.PartialNode(r[a-2],void 0,r[a-1],i.stripFlags(r[a-3],r[a]),this._$);break;case 21:this.$=new i.SexprNode([r[a-2]].concat(r[a-1]),r[a],this._$);break;case 22:this.$=new i.SexprNode([r[a]],null,this._$);break;case 23:this.$=r[a];break;case 24:this.$=new i.StringNode(r[a],this._$);break;case 25:this.$=new i.NumberNode(r[a],this._$);break;case 26:this.$=new i.BooleanNode(r[a],this._$);break;case 27:this.$=r[a];break;case 28:r[a-1].isHelper=!0,this.$=r[a-1];break;case 29:this.$=new i.HashNode(r[a],this._$);break;case 30:this.$=[r[a-2],r[a]];break;case 31:this.$=new i.PartialNameNode(r[a],this._$);break;case 32:this.$=new i.PartialNameNode(new i.StringNode(r[a],this._$),this._$);break;case 33:this.$=new i.PartialNameNode(new i.NumberNode(r[a],this._$));break;case 34:this.$=new i.DataNode(r[a],this._$);break;case 35:this.$=new i.IdNode(r[a],this._$);break;case 36:r[a-2].push({part:r[a],separator:r[a-1]}),this.$=r[a-2];break;case 37:this.$=[{part:r[a]}];break;case 38:this.$=[];break;case 39:r[a-1].push(r[a]);break;case 48:this.$=[];break;case 49:r[a-1].push(r[a]);break;case 52:this.$=[r[a]];break;case 53:r[a-1].push(r[a])}},table:[{3:1,4:2,5:[2,38],6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],31:[2,38],32:[2,38],34:[2,38]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:[1,10],13:[1,11],14:16,16:[1,20],19:14,22:15,24:[1,18],26:[1,19],28:[2,2],29:[2,2],31:[1,12],32:[1,13],34:[1,17]},{1:[2,1]},{5:[2,39],12:[2,39],13:[2,39],16:[2,39],24:[2,39],26:[2,39],28:[2,39],29:[2,39],31:[2,39],32:[2,39],34:[2,39]},{5:[2,3],12:[2,3],13:[2,3],16:[2,3],24:[2,3],26:[2,3],28:[2,3],29:[2,3],31:[2,3],32:[2,3],34:[2,3]},{5:[2,4],12:[2,4],13:[2,4],16:[2,4],24:[2,4],26:[2,4],28:[2,4],29:[2,4],31:[2,4],32:[2,4],34:[2,4]},{5:[2,5],12:[2,5],13:[2,5],16:[2,5],24:[2,5],26:[2,5],28:[2,5],29:[2,5],31:[2,5],32:[2,5],34:[2,5]},{5:[2,6],12:[2,6],13:[2,6],16:[2,6],24:[2,6],26:[2,6],28:[2,6],29:[2,6],31:[2,6],32:[2,6],34:[2,6]},{5:[2,7],12:[2,7],13:[2,7],16:[2,7],24:[2,7],26:[2,7],28:[2,7],29:[2,7],31:[2,7],32:[2,7],34:[2,7]},{5:[2,8],12:[2,8],13:[2,8],16:[2,8],24:[2,8],26:[2,8],28:[2,8],29:[2,8],31:[2,8],32:[2,8],34:[2,8]},{17:21,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:27,30:22,41:23,50:[1,26],52:[1,25],53:24},{4:28,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{4:29,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{12:[1,30]},{30:32,35:31,42:[1,33],43:[1,34],50:[1,26],53:24},{17:35,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:36,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:37,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[1,38]},{18:[2,48],25:[2,48],33:[2,48],39:39,42:[2,48],43:[2,48],44:[2,48],45:[2,48],46:[2,48],50:[2,48],52:[2,48]},{18:[2,22],25:[2,22],33:[2,22],46:[2,22]},{18:[2,35],25:[2,35],33:[2,35],42:[2,35],43:[2,35],44:[2,35],45:[2,35],46:[2,35],50:[2,35],52:[2,35],54:[1,40]},{30:41,50:[1,26],53:24},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],50:[2,37],52:[2,37],54:[2,37]},{33:[1,42]},{20:43,27:44,28:[1,45],29:[2,40]},{23:46,27:47,28:[1,45],29:[2,42]},{15:[1,48]},{25:[2,46],30:51,36:49,38:50,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],47:57,48:58,49:60,50:[1,59],52:[1,25],53:24},{25:[2,31],42:[2,31],43:[2,31],44:[2,31],45:[2,31],50:[2,31],52:[2,31]},{25:[2,32],42:[2,32],43:[2,32],44:[2,32],45:[2,32],50:[2,32],52:[2,32]},{25:[2,33],42:[2,33],43:[2,33],44:[2,33],45:[2,33],50:[2,33],52:[2,33]},{25:[1,61]},{25:[1,62]},{18:[1,63]},{5:[2,17],12:[2,17],13:[2,17],16:[2,17],24:[2,17],26:[2,17],28:[2,17],29:[2,17],31:[2,17],32:[2,17],34:[2,17]},{18:[2,50],25:[2,50],30:51,33:[2,50],36:65,40:64,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],46:[2,50],47:66,48:58,49:60,50:[1,59],52:[1,25],53:24},{50:[1,67]},{18:[2,34],25:[2,34],33:[2,34],42:[2,34],43:[2,34],44:[2,34],45:[2,34],46:[2,34],50:[2,34],52:[2,34]},{5:[2,18],12:[2,18],13:[2,18],16:[2,18],24:[2,18],26:[2,18],28:[2,18],29:[2,18],31:[2,18],32:[2,18],34:[2,18]},{21:68,29:[1,69]},{29:[2,41]},{4:70,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{21:71,29:[1,69]},{29:[2,43]},{5:[2,9],12:[2,9],13:[2,9],16:[2,9],24:[2,9],26:[2,9],28:[2,9],29:[2,9],31:[2,9],32:[2,9],34:[2,9]},{25:[2,44],37:72,47:73,48:58,49:60,50:[1,74]},{25:[1,75]},{18:[2,23],25:[2,23],33:[2,23],42:[2,23],43:[2,23],44:[2,23],45:[2,23],46:[2,23],50:[2,23],52:[2,23]},{18:[2,24],25:[2,24],33:[2,24],42:[2,24],43:[2,24],44:[2,24],45:[2,24],46:[2,24],50:[2,24],52:[2,24]},{18:[2,25],25:[2,25],33:[2,25],42:[2,25],43:[2,25],44:[2,25],45:[2,25],46:[2,25],50:[2,25],52:[2,25]},{18:[2,26],25:[2,26],33:[2,26],42:[2,26],43:[2,26],44:[2,26],45:[2,26],46:[2,26],50:[2,26],52:[2,26]},{18:[2,27],25:[2,27],33:[2,27],42:[2,27],43:[2,27],44:[2,27],45:[2,27],46:[2,27],50:[2,27],52:[2,27]},{17:76,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[2,47]},{18:[2,29],25:[2,29],33:[2,29],46:[2,29],49:77,50:[1,74]},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],50:[2,37],51:[1,78],52:[2,37],54:[2,37]},{18:[2,52],25:[2,52],33:[2,52],46:[2,52],50:[2,52]},{12:[2,13],13:[2,13],16:[2,13],24:[2,13],26:[2,13],28:[2,13],29:[2,13],31:[2,13],32:[2,13],34:[2,13]},{12:[2,14],13:[2,14],16:[2,14],24:[2,14],26:[2,14],28:[2,14],29:[2,14],31:[2,14],32:[2,14],34:[2,14]},{12:[2,10]},{18:[2,21],25:[2,21],33:[2,21],46:[2,21]},{18:[2,49],25:[2,49],33:[2,49],42:[2,49],43:[2,49],44:[2,49],45:[2,49],46:[2,49],50:[2,49],52:[2,49]},{18:[2,51],25:[2,51],33:[2,51],46:[2,51]},{18:[2,36],25:[2,36],33:[2,36],42:[2,36],43:[2,36],44:[2,36],45:[2,36],46:[2,36],50:[2,36],52:[2,36],54:[2,36]},{5:[2,11],12:[2,11],13:[2,11],16:[2,11],24:[2,11],26:[2,11],28:[2,11],29:[2,11],31:[2,11],32:[2,11],34:[2,11]},{30:79,50:[1,26],53:24},{29:[2,15]},{5:[2,12],12:[2,12],13:[2,12],16:[2,12],24:[2,12],26:[2,12],28:[2,12],29:[2,12],31:[2,12],32:[2,12],34:[2,12]},{25:[1,80]},{25:[2,45]},{51:[1,78]},{5:[2,20],12:[2,20],13:[2,20],16:[2,20],24:[2,20],26:[2,20],28:[2,20],29:[2,20],31:[2,20],32:[2,20],34:[2,20]},{46:[1,81]},{18:[2,53],25:[2,53],33:[2,53],46:[2,53],50:[2,53]},{30:51,36:82,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],50:[1,26],52:[1,25],53:24},{25:[1,83]},{5:[2,19],12:[2,19],13:[2,19],16:[2,19],24:[2,19],26:[2,19],28:[2,19],29:[2,19],31:[2,19],32:[2,19],34:[2,19]},{18:[2,28],25:[2,28],33:[2,28],42:[2,28],43:[2,28],44:[2,28],45:[2,28],46:[2,28],50:[2,28],52:[2,28]},{18:[2,30],25:[2,30],33:[2,30],46:[2,30],50:[2,30]},{5:[2,16],12:[2,16],13:[2,16],16:[2,16],24:[2,16],26:[2,16],28:[2,16],29:[2,16],31:[2,16],32:[2,16],34:[2,16]}],defaultActions:{4:[2,1],44:[2,41],47:[2,43],57:[2,47],63:[2,10],70:[2,15],73:[2,45]},parseError:function(e){throw new Error(e)},parse:function(e){function t(){var e;return e=n.lexer.lex()||1,"number"!=typeof e&&(e=n.symbols_[e]||e),e}var n=this,i=[0],o=[null],r=[],a=this.table,s="",l=0,d=0,c=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;r.push(u);var h=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,g,f,m,v,b,y,w,A,N={};;){if(f=i[i.length-1],this.defaultActions[f]?m=this.defaultActions[f]:((null===p||"undefined"==typeof p)&&(p=t()),m=a[f]&&a[f][p]),"undefined"==typeof m||!m.length||!m[0]){var _="";if(!c){A=[];for(b in a[f])this.terminals_[b]&&b>2&&A.push("'"+this.terminals_[b]+"'");_=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+A.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(_,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:u,expected:A})}}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+p);switch(m[0]){case 1:i.push(p),o.push(this.lexer.yytext),r.push(this.lexer.yylloc),i.push(m[1]),p=null,g?(p=g,g=null):(d=this.lexer.yyleng,s=this.lexer.yytext,l=this.lexer.yylineno,u=this.lexer.yylloc,c>0&&c--);break;case 2:if(y=this.productions_[m[1]][1],N.$=o[o.length-y],N._$={first_line:r[r.length-(y||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(y||1)].first_column,last_column:r[r.length-1].last_column},h&&(N._$.range=[r[r.length-(y||1)].range[0],r[r.length-1].range[1]]),v=this.performAction.call(N,s,d,l,this.yy,m[1],o,r),"undefined"!=typeof v)return v;y&&(i=i.slice(0,-1*y*2),o=o.slice(0,-1*y),r=r.slice(0,-1*y)),i.push(this.productions_[m[1]][0]),o.push(N.$),r.push(N._$),w=a[i[i.length-2]][i[i.length-1]],i.push(w);break;case 3:return!0}}return!0}},n=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var o=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,i,o;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),a=0;a<r.length&&(n=this._input.match(this.rules[r[a]]),!n||t&&!(n[0].length>t[0].length)||(t=n,i=a,this.options.flex));a++);return t?(o=t[0].match(/(?:\r\n?|\n).*/g),o&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,r[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,n,i){function o(e,n){return t.yytext=t.yytext.substr(e,t.yyleng-n)}switch(n){case 0:if("\\\\"===t.yytext.slice(-2)?(o(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(o(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 12;break;case 1:return 12;case 2:return this.popState(),12;case 3:return t.yytext=t.yytext.substr(5,t.yyleng-9),this.popState(),15;case 4:return 12;case 5:return o(0,4),this.popState(),13;case 6:return 45;case 7:return 46;case 8:return 16;case 9:return this.popState(),this.begin("raw"),18;case 10:return 34;case 11:return 24;case 12:return 29;case 13:return this.popState(),28;case 14:return this.popState(),28;case 15:return 26;case 16:return 26;case 17:return 32;case 18:return 31;case 19:this.popState(),this.begin("com");break;case 20:return o(3,5),this.popState(),13;case 21:return 31;case 22:return 51;case 23:return 50;case 24:return 50;case 25:return 54;case 26:break;case 27:return this.popState(),33;case 28:return this.popState(),25;case 29:return t.yytext=o(1,2).replace(/\\"/g,'"'),42;case 30:return t.yytext=o(1,2).replace(/\\'/g,"'"),42;case 31:return 52;case 32:return 44;case 33:return 44;case 34:return 43;case 35:return 50;case 36:return t.yytext=o(1,2),50;case 37:return"INVALID";case 38:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,38],inclusive:!0}},e}();return t.lexer=n,e.prototype=t,t.Parser=e,new e}();return e=t}(),l=function(e){"use strict";function t(e,t){return{left:"~"===e.charAt(2),right:"~"===t.charAt(t.length-3)}}function n(e,t,n,i,l,c){if(e.sexpr.id.original!==i.path.original)throw new d(e.sexpr.id.original+" doesn't match "+i.path.original,e);var u=n&&n.program,h={left:e.strip.left,right:i.strip.right,openStandalone:r(t.statements),closeStandalone:o((u||t).statements)};if(e.strip.right&&a(t.statements,null,!0),u){var p=n.strip;p.left&&s(t.statements,null,!0),p.right&&a(u.statements,null,!0),i.strip.left&&s(u.statements,null,!0),o(t.statements)&&r(u.statements)&&(s(t.statements),a(u.statements))}else i.strip.left&&s(t.statements,null,!0);return l?new this.BlockNode(e,u,t,h,c):new this.BlockNode(e,t,u,h,c)}function i(e,t){for(var n=0,i=e.length;i>n;n++){var l=e[n],d=l.strip;if(d){var c=o(e,n,t,"partial"===l.type),u=r(e,n,t),h=d.openStandalone&&c,p=d.closeStandalone&&u,g=d.inlineStandalone&&c&&u;d.right&&a(e,n,!0),d.left&&s(e,n,!0),g&&(a(e,n),s(e,n)&&"partial"===l.type&&(l.indent=/([ \t]+$)/.exec(e[n-1].original)?RegExp.$1:"")),h&&(a((l.program||l.inverse).statements),s(e,n)),p&&(a(e,n),s((l.inverse||l.program).statements))}}return e}function o(e,t,n){void 0===t&&(t=e.length);var i=e[t-1],o=e[t-2];return i?"content"===i.type?(o||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(i.original):void 0:n}function r(e,t,n){void 0===t&&(t=-1);var i=e[t+1],o=e[t+2];return i?"content"===i.type?(o||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(i.original):void 0:n}function a(e,t,n){var i=e[null==t?0:t+1];if(i&&"content"===i.type&&(n||!i.rightStripped)){var o=i.string;i.string=i.string.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),i.rightStripped=i.string!==o}}function s(e,t,n){var i=e[null==t?e.length-1:t-1];if(i&&"content"===i.type&&(n||!i.leftStripped)){var o=i.string;return i.string=i.string.replace(n?/\s+$/:/[ \t]+$/,""),i.leftStripped=i.string!==o,i.leftStripped}}var l={},d=e;return l.stripFlags=t,l.prepareBlock=n,l.prepareProgram=i,l}(n),d=function(e,t,n,i){"use strict";function o(e){return e.constructor===s.ProgramNode?e:(a.yy=c,a.parse(e))}var r={},a=e,s=t,l=n,d=i.extend;r.parser=a;var c={};return d(c,l,s),r.parse=o,r}(s,a,l,t),c=function(e,t){"use strict";function n(){}function i(e,t,n){if(null==e||"string"!=typeof e&&e.constructor!==n.AST.ProgramNode)throw new s("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0);var i=n.parse(e),o=(new n.Compiler).compile(i,t);return(new n.JavaScriptCompiler).compile(o,t)}function o(e,t,n){function i(){var i=n.parse(e),o=(new n.Compiler).compile(i,t),r=(new n.JavaScriptCompiler).compile(o,t,void 0,!0);return n.template(r)}if(null==e||"string"!=typeof e&&e.constructor!==n.AST.ProgramNode)throw new s("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0);var o,r=function(e,t){return o||(o=i()),o.call(this,e,t)};return r._setup=function(e){return o||(o=i()),o._setup(e)},r._child=function(e,t,n){return o||(o=i()),o._child(e,t,n)},r}function r(e,t){if(e===t)return!0;if(l(e)&&l(t)&&e.length===t.length){for(var n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1;return!0}}var a={},s=e,l=t.isArray,d=[].slice;return a.Compiler=n,n.prototype={compiler:n,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;t>n;n++){var i=this.opcodes[n],o=e.opcodes[n];if(i.opcode!==o.opcode||!r(i.args,o.args))return!1}for(t=this.children.length,n=0;t>n;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.accept(e)},accept:function(e){return this[e.type](e)},program:function(e){for(var t=e.statements,n=0,i=t.length;i>n;n++)this.accept(t[n]);return this.isSimple=1===i,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t,n=(new this.compiler).compile(e,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var o=0,r=n.depths.list.length;r>o;o++)t=n.depths.list[o],2>t||this.addDepth(t-1);return i},block:function(e){var t=e.mustache,n=e.program,i=e.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var o=t.sexpr,r=this.classifySexpr(o);"helper"===r?this.helperSexpr(o,n,i):"simple"===r?(this.simpleSexpr(o),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue",o.id.original)):(this.ambiguousSexpr(o,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t,n,i=e.pairs;for(this.opcode("pushHash"),t=0,n=i.length;n>t;t++)this.pushParam(i[t][1]);for(;t--;)this.opcode("assignToHash",i[t][0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.hash?this.accept(e.hash):this.opcode("push","undefined"),e.context?this.accept(e.context):(this.opcode("getContext",0),this.opcode("pushContext")),this.opcode("invokePartial",t.name,e.indent||""),this.opcode("append")},content:function(e){e.string&&this.opcode("appendContent",e.string)},mustache:function(e){this.sexpr(e.sexpr),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(e,t,n){var i=e.id,o=i.parts[0],r=null!=t||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.ID(i),this.opcode("invokeAmbiguous",o,r)},simpleSexpr:function(e){var t=e.id;"DATA"===t.type?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,n){var i=this.setupFullMustacheParams(e,t,n),o=e.id,r=o.parts[0];if(this.options.knownHelpers[r])this.opcode("invokeKnownHelper",i.length,r);else{if(this.options.knownHelpersOnly)throw new s("You specified knownHelpersOnly, but used the unknown helper "+r,e);o.falsy=!0,this.ID(o),this.opcode("invokeHelper",i.length,o.original,o.isSimple)}},sexpr:function(e){var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts,e.falsy,e.isScoped):this.opcode("pushContext")},DATA:function(e){this.options.data=!0,this.opcode("lookupData",e.id.depth,e.id.parts)},STRING:function(e){this.opcode("pushString",e.string)},NUMBER:function(e){this.opcode("pushLiteral",e.number)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:d.call(arguments,1)})},addDepth:function(e){0!==e&&(this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e)))},classifySexpr:function(e){var t=e.isHelper,n=e.eligibleHelper,i=this.options;if(n&&!t){var o=e.id.parts[0];i.knownHelpers[o]?t=!0:i.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){for(var t=0,n=e.length;n>t;t++)this.pushParam(e[t])},pushParam:function(e){this.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type),"sexpr"===e.type&&this.sexpr(e)):(this.trackIds&&this.opcode("pushId",e.type,e.idName||e.stringModeValue),
this.accept(e))},setupFullMustacheParams:function(e,t,n){var i=e.params;return this.pushParams(i),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),i}},a.precompile=i,a.compile=o,a}(n,t),u=function(e,t){"use strict";function n(e){this.value=e}function i(){}var o,r=e.COMPILER_REVISION,a=e.REVISION_CHANGES,s=t;i.prototype={nameLookup:function(e,t){return i.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']"},depthedLookup:function(e){return this.aliases.lookup="this.lookup",'lookup(depths, "'+e+'")'},compilerInfo:function(){var e=r,t=a[e];return[e,t]},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,n,i){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!i,this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.depths.list.length||this.options.compat;var o,r,a,l=e.opcodes;for(r=0,a=l.length;a>r;r++)o=l[r],this[o.opcode].apply(this,o.args);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new s("Compile completed with content left on stack");var d=this.createFunctionContext(i);if(this.isChild)return d;var c={compiler:this.compilerInfo(),main:d},u=this.context.programs;for(r=0,a=u.length;a>r;r++)u[r]&&(c[r]=u[r]);return this.environment.usePartial&&(c.usePartial=!0),this.options.data&&(c.useData=!0),this.useDepths&&(c.useDepths=!0),this.options.compat&&(c.compat=!0),i||(c.compiler=JSON.stringify(c.compiler),c=this.objectLiteral(c)),c},preamble:function(){this.lastContext=0,this.source=[]},createFunctionContext:function(e){var t="",n=this.stackVars.concat(this.registers.list);n.length>0&&(t+=", "+n.join(", "));for(var i in this.aliases)this.aliases.hasOwnProperty(i)&&(t+=", "+i+"="+this.aliases[i]);var o=["depth0","helpers","partials","data"];this.useDepths&&o.push("depths");var r=this.mergeSource(t);return e?(o.push(r),Function.apply(this,o)):"function("+o.join(",")+") {\n  "+r+"}"},mergeSource:function(e){for(var t,n,i="",o=!this.forceBuffer,r=0,a=this.source.length;a>r;r++){var s=this.source[r];s.appendToBuffer?t=t?t+"\n    + "+s.content:s.content:(t&&(i?i+="buffer += "+t+";\n  ":(n=!0,i=t+";\n  "),t=void 0),i+=s+"\n  ",this.environment.isSimple||(o=!1))}return o?(t||!i)&&(i+="return "+(t||'""')+";\n"):(e+=", buffer = "+(n?"":this.initializeBuffer()),i+=t?"return buffer + "+t+";\n":"return buffer;\n"),e&&(i="var "+e.substring(2)+(n?"":";\n  ")+i),i},blockValue:function(e){this.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=[this.contextName(0)];this.setupParams(e,0,t);var n=this.popStack();t.splice(1,0,n),this.push("blockHelperMissing.call("+t.join(", ")+")")},ambiguousBlockValue:function(){this.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=[this.contextName(0)];this.setupParams("",0,e,!0),this.flushInline();var t=this.topStack();e.splice(1,0,t),this.pushSource("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.pendingContent&&(e=this.pendingContent+e),this.pendingContent=e},append:function(){this.flushInline();var e=this.popStack();this.pushSource("if ("+e+" != null) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,n){var i=0,o=e.length;for(n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[i++]));o>i;i++)this.replaceStack(function(n){var o=this.nameLookup(n,e[i],"context");return t?" && "+o:" != null ? "+o+" : "+n})},lookupData:function(e,t){e?this.pushStackLiteral("this.data(data, "+e+")"):this.pushStackLiteral("data");for(var n=t.length,i=0;n>i;i++)this.replaceStack(function(e){return" && "+this.nameLookup(e,t[i],"data")})},resolvePossibleLambda:function(){this.aliases.lambda="this.lambda",this.push("lambda("+this.popStack()+", "+this.contextName(0)+")")},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"sexpr"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(){this.pushStackLiteral("{}"),this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push("{"+e.ids.join(",")+"}"),this.stringParams&&(this.push("{"+e.contexts.join(",")+"}"),this.push("{"+e.types.join(",")+"}")),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t,n){this.aliases.helperMissing="helpers.helperMissing";var i=this.popStack(),o=this.setupHelper(e,t),r=(n?o.name+" || ":"")+i+" || helperMissing";this.push("(("+r+").call("+o.callParams+"))")},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.aliases.functionType='"function"',this.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var n=this.popStack();this.emptyHash();var i=this.setupHelper(0,e,t),o=this.lastHelper=this.nameLookup("helpers",e,"helper");this.push("((helper = (helper = "+o+" || "+n+") != null ? helper : helperMissing"+(i.paramsInit?"),("+i.paramsInit:"")+"),(typeof helper === functionType ? helper.call("+i.callParams+") : helper))")},invokePartial:function(e,t){var n=[this.nameLookup("partials",e,"partial"),"'"+t+"'","'"+e+"'",this.popStack(),this.popStack(),"helpers","partials"];this.options.data?n.push("data"):this.options.compat&&n.push("undefined"),this.options.compat&&n.push("depths"),this.push("this.invokePartial("+n.join(", ")+")")},assignToHash:function(e){var t,n,i,o=this.popStack();this.trackIds&&(i=this.popStack()),this.stringParams&&(n=this.popStack(),t=this.popStack());var r=this.hash;t&&r.contexts.push("'"+e+"': "+t),n&&r.types.push("'"+e+"': "+n),i&&r.ids.push("'"+e+"': "+i),r.values.push("'"+e+"': ("+o+")")},pushId:function(e,t){"ID"===e||"DATA"===e?this.pushString(t):"sexpr"===e?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:i,compileChildren:function(e,t){for(var n,i,o=e.children,r=0,a=o.length;a>r;r++){n=o[r],i=new this.compiler;var s=this.matchExistingProgram(n);null==s?(this.context.programs.push(""),s=this.context.programs.length,n.index=s,n.name="program"+s,this.context.programs[s]=i.compile(n,t,this.context,!this.precompile),this.context.environments[s]=n,this.useDepths=this.useDepths||i.useDepths):(n.index=s,n.name="program"+s)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;n>t;t++){var i=this.context.environments[t];if(i&&i.equals(e))return t}},programExpression:function(e){var t=this.environment.children[e],n=(t.depths.list,this.useDepths),i=[t.index,"data"];return n&&i.push("depths"),"this.program("+i.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new n(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),e&&this.source.push(e)},pushStack:function(e){this.flushInline();var t=this.incrStack();return this.pushSource(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t,i,o,r="";if(this.isInline(),!this.isInline())throw new s("replaceStack on non-inline");var a=this.popStack(!0);if(a instanceof n)r=t=a.value,o=!0;else{i=!this.stackSlot;var l=i?this.incrStack():this.topStackName();r="("+this.push(l)+" = "+a+")",t=this.topStack()}var d=e.call(this,t);o||this.popStack(),i&&this.stackSlot--,this.push("("+r+d+")")},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,i=e.length;i>t;t++){var o=e[t];o instanceof n?this.compileStack.push(o):this.pushStack(o)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),i=(t?this.inlineStack:this.compileStack).pop();if(!e&&i instanceof n)return i.value;if(!t){if(!this.stackSlot)throw new s("Invalid stack pop");this.stackSlot--}return i},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof n?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(this.quotedString(n)+":"+e[n]);return"{"+t.join(",")+"}"},setupHelper:function(e,t,n){var i=[],o=this.setupParams(t,e,i,n),r=this.nameLookup("helpers",t,"helper");return{params:i,paramsInit:o,name:r,callParams:[this.contextName(0)].concat(i).join(", ")}},setupOptions:function(e,t,n){var i,o,r,a={},s=[],l=[],d=[];a.name=this.quotedString(e),a.hash=this.popStack(),this.trackIds&&(a.hashIds=this.popStack()),this.stringParams&&(a.hashTypes=this.popStack(),a.hashContexts=this.popStack()),o=this.popStack(),r=this.popStack(),(r||o)&&(r||(r="this.noop"),o||(o="this.noop"),a.fn=r,a.inverse=o);for(var c=t;c--;)i=this.popStack(),n[c]=i,this.trackIds&&(d[c]=this.popStack()),this.stringParams&&(l[c]=this.popStack(),s[c]=this.popStack());return this.trackIds&&(a.ids="["+d.join(",")+"]"),this.stringParams&&(a.types="["+l.join(",")+"]",a.contexts="["+s.join(",")+"]"),this.options.data&&(a.data="data"),a},setupParams:function(e,t,n,i){var o=this.objectLiteral(this.setupOptions(e,t,n));return i?(this.useRegister("options"),n.push("options"),"options="+o):(n.push(o),"")}};for(var l="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),d=i.RESERVED_WORDS={},c=0,u=l.length;u>c;c++)d[l[c]]=!0;return i.isValidJavaScriptVariableName=function(e){return!i.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},o=i}(i,n),h=function(e,t,n,i,o){"use strict";var r,a=e,s=t,l=n.parser,d=n.parse,c=i.Compiler,u=i.compile,h=i.precompile,p=o,g=a.create,f=function(){var e=g();return e.compile=function(t,n){return u(t,n,e)},e.precompile=function(t,n){return h(t,n,e)},e.AST=s,e.Compiler=c,e.JavaScriptCompiler=p,e.Parser=l,e.parse=d,e};return a=f(),a.create=f,a["default"]=a,r=a}(r,a,d,c,u);return h}),function(e){define("bootstrap",["jquery"],function(){return function(){if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one("bsTransitionEnd",function(){n=!0});var o=function(){n||e(i).trigger(e.support.transition.end)};return setTimeout(o,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),o=n.data("bs.alert");o||n.data("bs.alert",o=new i(this)),"string"==typeof t&&o[t].call(n)})}var n='[data-dismiss="alert"]',i=function(t){e(t).on("click",n,this.close)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,i.prototype.close=function(t){function n(){a.detach().trigger("closed.bs.alert").remove()}var o=e(this),r=o.attr("data-target");r||(r=o.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var a=e(r);t&&t.preventDefault(),a.length||(a=o.closest(".alert")),a.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(a.removeClass("in"),e.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var o=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=i,e.fn.alert.noConflict=function(){return e.fn.alert=o,this},e(document).on("click.bs.alert.data-api",n,i.prototype.close)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),o=i.data("bs.button"),r="object"==typeof t&&t;o||i.data("bs.button",o=new n(this,r)),"toggle"==t?o.toggle():t&&o.setState(t)})}var n=function(t,i){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.3.5",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",i=this.$element,o=i.is("input")?"val":"html",r=i.data();t+="Text",null==r.resetText&&i.data("resetText",i[o]()),setTimeout(e.proxy(function(){i[o](null==r[t]?this.options[t]:r[t]),"loadingText"==t?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),e&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var i=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=i,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var i=e(n.target);i.hasClass("btn")||(i=i.closest(".btn")),t.call(i,"toggle"),e(n.target).is('input[type="radio"]')||e(n.target).is('input[type="checkbox"]')||n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),o=i.data("bs.carousel"),r=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t),a="string"==typeof t?t:r.slide;o||i.data("bs.carousel",o=new n(this,r)),"number"==typeof t?o.to(t):a?o[a]():r.interval&&o.pause().cycle()})}var n=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.3.5",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t),i="prev"==e&&0===n||"next"==e&&n==this.$items.length-1;if(i&&!this.options.wrap)return t;var o="prev"==e?-1:1,r=(n+o)%this.$items.length;return this.$items.eq(r)},n.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(t,i){var o=this.$element.find(".item.active"),r=i||this.getItemForDirection(t,o),a=this.interval,s="next"==t?"left":"right",l=this;if(r.hasClass("active"))return this.sliding=!1;var d=r[0],c=e.Event("slide.bs.carousel",{relatedTarget:d,direction:s});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=e(this.$indicators.children()[this.getItemIndex(r)]);u&&u.addClass("active")}var h=e.Event("slid.bs.carousel",{relatedTarget:d,direction:s});return e.support.transition&&this.$element.hasClass("slide")?(r.addClass(t),r[0].offsetWidth,o.addClass(s),r.addClass(s),o.one("bsTransitionEnd",function(){r.removeClass([t,s].join(" ")).addClass("active"),o.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(h)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(o.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger(h)),a&&this.cycle(),this}};var i=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=i,this};var o=function(n){var i,o=e(this),r=e(o.attr("data-target")||(i=o.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(r.hasClass("carousel")){var a=e.extend({},r.data(),o.data()),s=o.attr("data-slide-to");s&&(a.interval=!1),t.call(r,a),s&&r.data("bs.carousel").to(s),n.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(jQuery),+function(e){"use strict";function t(t){var n,i=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(i)}function n(t){return this.each(function(){var n=e(this),o=n.data("bs.collapse"),r=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t);!o&&r.toggle&&/show|hide/.test(t)&&(r.toggle=!1),o||n.data("bs.collapse",o=new i(this,r)),"string"==typeof t&&o[t]()})}var i=function(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.5",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(t=o.data("bs.collapse"),t&&t.transitioning))){var r=e.Event("show.bs.collapse");if(this.$element.trigger(r),!r.isDefaultPrevented()){o&&o.length&&(n.call(o,"hide"),t||o.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var l=e.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[a](this.$element[0][l])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(o,this)).emulateTransitionEnd(i.TRANSITION_DURATION):o.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,i){var o=e(i);this.addAriaAndCollapsedClass(t(o),o)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var o=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=i,e.fn.collapse.noConflict=function(){return e.fn.collapse=o,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var o=e(this);o.attr("data-target")||i.preventDefault();var r=t(o),a=r.data("bs.collapse"),s=a?"toggle":o.data();n.call(r,s)})}(jQuery),+function(e){"use strict";function t(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&e(n);return i&&i.length?i:t.parent()}function n(n){n&&3===n.which||(e(o).remove(),e(r).each(function(){var i=e(this),o=t(i),r={relatedTarget:this};o.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&e.contains(o[0],n.target)||(o.trigger(n=e.Event("hide.bs.dropdown",r)),n.isDefaultPrevented()||(i.attr("aria-expanded","false"),o.removeClass("open").trigger("hidden.bs.dropdown",r))))}))}function i(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new a(this)),"string"==typeof t&&i[t].call(n)})}var o=".dropdown-backdrop",r='[data-toggle="dropdown"]',a=function(t){e(t).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.5",a.prototype.toggle=function(i){var o=e(this);if(!o.is(".disabled, :disabled")){var r=t(o),a=r.hasClass("open");if(n(),!a){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",n);var s={relatedTarget:this};if(r.trigger(i=e.Event("show.bs.dropdown",s)),i.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},a.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var i=e(this);if(n.preventDefault(),n.stopPropagation(),!i.is(".disabled, :disabled")){var o=t(i),a=o.hasClass("open");if(!a&&27!=n.which||a&&27==n.which)return 27==n.which&&o.find(r).trigger("focus"),i.trigger("click");var s=" li:not(.disabled):visible a",l=o.find(".dropdown-menu"+s);if(l.length){var d=l.index(n.target);38==n.which&&d>0&&d--,40==n.which&&d<l.length-1&&d++,~d||(d=0),l.eq(d).trigger("focus")}}}};var s=e.fn.dropdown;e.fn.dropdown=i,e.fn.dropdown.Constructor=a,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",r,a.prototype.toggle).on("keydown.bs.dropdown.data-api",r,a.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",a.prototype.keydown)}(jQuery),+function(e){"use strict";function t(t,i){return this.each(function(){var o=e(this),r=o.data("bs.modal"),a=e.extend({},n.DEFAULTS,o.data(),"object"==typeof t&&t);r||o.data("bs.modal",r=new n(this,a)),"string"==typeof t?r[t](i):a.show&&r.show(i)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.5",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var i=this,o=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=e.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),o&&i.$element[0].offsetWidth,i.$element.addClass("in"),i.enforceFocus();var r=e.Event("shown.bs.modal",{relatedTarget:t});o?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(r)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var i=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=e.support.transition&&o;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;r?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){i.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):a()}else t&&t()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var i=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=e(this),o=i.attr("href"),r=e(i.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),a=r.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(o)&&o},r.data(),i.data());i.is("a")&&n.preventDefault(),r.one("show.bs.modal",function(e){e.isDefaultPrevented()||r.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),t.call(r,a,this)})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),o=i.data("bs.tooltip"),r="object"==typeof t&&t;(o||!/destroy|hide/.test(t))&&(o||i.data("bs.tooltip",o=new n(this,r)),"string"==typeof t&&o[t]())})}var n=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.DEFAULTS={
animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,i){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),r=o.length;r--;){var a=o[r];if("click"==a)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,i){n[e]!=i&&(t[e]=i)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusin"==t.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState?void(n.hoverState="in"):(clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusout"==t.type?"focus":"hover"]=!1),n.isInStateTrue()?void 0:(clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide())},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var i=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!i)return;var o=this,r=this.tip(),a=this.getUID(this.type);this.setContent(),r.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&r.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,d=l.test(s);d&&(s=s.replace(l,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),u=r[0].offsetWidth,h=r[0].offsetHeight;if(d){var p=s,g=this.getPosition(this.$viewport);s="bottom"==s&&c.bottom+h>g.bottom?"top":"top"==s&&c.top-h<g.top?"bottom":"right"==s&&c.right+u>g.width?"left":"left"==s&&c.left-u<g.left?"right":s,r.removeClass(p).addClass(s)}var f=this.getCalculatedOffset(s,c,u,h);this.applyPlacement(f,s);var m=function(){var e=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==e&&o.leave(o)};e.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",m).emulateTransitionEnd(n.TRANSITION_DURATION):m()}},n.prototype.applyPlacement=function(t,n){var i=this.tip(),o=i[0].offsetWidth,r=i[0].offsetHeight,a=parseInt(i.css("margin-top"),10),s=parseInt(i.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),t.top+=a,t.left+=s,e.offset.setOffset(i[0],e.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),i.addClass("in");var l=i[0].offsetWidth,d=i[0].offsetHeight;"top"==n&&d!=r&&(t.top=t.top+r-d);var c=this.getViewportAdjustedDelta(n,t,l,d);c.left?t.left+=c.left:t.top+=c.top;var u=/top|bottom/.test(n),h=u?2*c.left-o+l:2*c.top-r+d,p=u?"offsetWidth":"offsetHeight";i.offset(t),this.replaceArrow(h,i[0][p],u)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function i(){"in"!=o.hoverState&&r.detach(),o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),t&&t()}var o=this,r=e(this.$tip),a=e.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(r.removeClass("in"),e.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],i="BODY"==n.tagName,o=n.getBoundingClientRect();null==o.width&&(o=e.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var r=i?{top:0,left:0}:t.offset(),a={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=i?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},o,a,s,r)},n.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,i){var o={top:0,left:0};if(!this.$viewport)return o;var r=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-r-a.scroll,l=t.top+r-a.scroll+i;s<a.top?o.top=a.top-s:l>a.top+a.height&&(o.top=a.top+a.height-l)}else{var d=t.left-r,c=t.left+r+n;d<a.left?o.left=a.left-d:c>a.right&&(o.left=a.left+a.width-c)}return o},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),t?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null})};var i=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),o=i.data("bs.popover"),r="object"==typeof t&&t;(o||!/destroy|hide/.test(t))&&(o||i.data("bs.popover",o=new n(this,r)),"string"==typeof t&&o[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.5",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(jQuery),+function(e){"use strict";function t(n,i){this.$body=e(document.body),this.$scrollElement=e(e(n).is(document.body)?window:n),this.options=e.extend({},t.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var i=e(this),o=i.data("bs.scrollspy"),r="object"==typeof n&&n;o||i.data("bs.scrollspy",o=new t(this,r)),"string"==typeof n&&o[n]()})}t.VERSION="3.3.5",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",i=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",i=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),o=t.data("target")||t.attr("href"),r=/^#./.test(o)&&e(o);return r&&r.length&&r.is(":visible")&&[[r[n]().top+i,o]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),o=this.offsets,r=this.targets,a=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=i)return a!=(e=r[r.length-1])&&this.activate(e);if(a&&t<o[0])return this.activeTarget=null,this.clear();for(e=o.length;e--;)a!=r[e]&&t>=o[e]&&(void 0===o[e+1]||t<o[e+1])&&this.activate(r[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=i,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),o=i.data("bs.tab");o||i.data("bs.tab",o=new n(this)),"string"==typeof t&&o[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),i=t.data("target");if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var o=n.find(".active:last a"),r=e.Event("hide.bs.tab",{relatedTarget:t[0]}),a=e.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(r),t.trigger(a),!a.isDefaultPrevented()&&!r.isDefaultPrevented()){var s=e(i);this.activate(t.closest("li"),n),this.activate(s,s.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},n.prototype.activate=function(t,i,o){function r(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var a=i.find("> .active"),s=o&&e.support.transition&&(a.length&&a.hasClass("fade")||!!i.find("> .fade").length);a.length&&s?a.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),a.removeClass("in")};var i=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=i,this};var o=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),o=i.data("bs.affix"),r="object"==typeof t&&t;o||i.data("bs.affix",o=new n(this,r)),"string"==typeof t&&o[t]()})}var n=function(t,i){this.options=e.extend({},n.DEFAULTS,i),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.5",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(e,t,n,i){var o=this.$target.scrollTop(),r=this.$element.offset(),a=this.$target.height();if(null!=n&&"top"==this.affixed)return n>o?"top":!1;if("bottom"==this.affixed)return null!=n?o+this.unpin<=r.top?!1:"bottom":e-i>=o+a?!1:"bottom";var s=null==this.affixed,l=s?o:r.top,d=s?a:t;return null!=n&&n>=o?"top":null!=i&&l+d>=e-i?"bottom":!1},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),i=this.options.offset,o=i.top,r=i.bottom,a=Math.max(e(document).height(),e(document.body).height());"object"!=typeof i&&(r=o=i),"function"==typeof o&&(o=i.top(this.$element)),"function"==typeof r&&(r=i.bottom(this.$element));var s=this.getState(a,t,o,r);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),d=e.Event(l+".bs.affix");if(this.$element.trigger(d),d.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:a-t-r})}};var i=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=i,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),i=n.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),t.call(n,i)})})}(jQuery)}.apply(e,arguments)})}(this),function(e){define("puppetForm",["marionette","bootstrap"],function(){return function(){return function(){PuppetForm={formClassName:"adk-form form-container",formDefaultMethod:"post",groupClassName:"form-group",controlLabelClassName:"",controlsClassName:"",controlClassName:"form-control",helpClassName:"help-block",errorClassName:"has-error",helpMessageClassName:"help-block",resolveNameToClass:function(e,t){if(_.isString(e)){var n=_.map(e.split("-"),function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join("")+t,i=PuppetForm[n];if(_.isUndefined(i))throw new ReferenceError("Class '"+n+"' not found");return i}return e}};var e=(PuppetForm.Form=Backbone.Marionette.CompositeView.extend({tagName:"form",template:_.template('<p class="sr-only">* indicates a required field.</p>'),attributes:{action:"#",method:PuppetForm.formDefaultMethod},onRender:function(){this.bindUIElements()},getControl:function(e){e=e||{};var t=e.controlType+"_"+e.controlName;return this.componentList[t]},callControlFunction:function(e){e=e||{};var t=e.functionName,n=e.options,i=this.getControl(e);if(void 0===i||null===i){var o=e.controlType+"_"+e.controlName;console.error('There is no such ui-control with "'+o+'"')}i[t](n)},className:function(){return PuppetForm.formClassName},initialize:function(e){this.workflow=e.workflow,this.viewIndex=e.viewIndex,this.beforeGoingToStep=e.beforeGoingToStep,this.componentList={},_.isUndefined(this.methodType)||this.$el.attr("method",this.methodType),e.fields instanceof Backbone.Collection||(e.fields=new i(e.fields||this.fields)),this.fields=e.fields,this.collection=this.fields,this.model.errorModel=e.errorModel||this.model.errorModel||new Backbone.Model},getChildView:function(e){return e.get("control")},childViewOptions:function(e,t){return{field:e,model:this.model,componentList:this.componentList}},transferFocusToFirstError:function(){var e=["."+PuppetForm.errorClassName+" input:not(.tt-hint, .bootstrap-timepicker-hour, .bootstrap-timepicker-minute)","."+PuppetForm.errorClassName+" select:not(.select2-hidden-accessible)","."+PuppetForm.errorClassName+" .select2-selection","."+PuppetForm.errorClassName+" textarea"].join(", "),t=this.$(e).first().focus();console.log(t)}}),PuppetForm.ControlFormatter=function(){});_.extend(e.prototype,{fromRaw:function(e,t){return e},toRaw:function(e,t){return e}});var t=PuppetForm.JSONFormatter=function(){};_.extend(t.prototype,{fromRaw:function(e,t){return JSON.stringify(e)},toRaw:function(e,t){return JSON.parse(e)}});var n=PuppetForm.Field=Backbone.Model.extend({defaults:{name:"",placeholder:"",disabled:!1,required:!1,value:void 0,control:void 0,formatter:void 0},initialize:function(){var e=PuppetForm.resolveNameToClass(this.get("control"),"Control");this.set({controlName:this.get("control"),control:e},{silent:!0})}}),i=PuppetForm.Fields=Backbone.Collection.extend({model:n}),o=PuppetForm.CommonContainerEventsFunctions={addModel:function(e,t,i){_.isUndefined(e)||_.isUndefined(t)||this[e]instanceof Backbone.Collection&&(t=new n(t),this[e].add(t)),i.stopPropagation()},removeModel:function(e,t,n){if(!_.isUndefined(e)&&!_.isUndefined(t)&&this[e]instanceof Backbone.Collection){_.isUndefined(t.control)||(t.controlName=t.control,delete t.control);var i=this[e].where(t);this[e].remove(i)}n.stopPropagation()},updateCollection:function(e,t,i){_.isUndefined(e)||_.isUndefined(t)||this[e]instanceof Backbone.Collection&&(t=t instanceof Array?_.map(t,function(e){return new n(e)}):new n(t),this[e].reset(t)),i.stopPropagation()}},r=(PuppetForm.CommonContainerEvents=_.defaults({events:{"control:items:add":function(e,t){this.addModel("collection",t,e)},"control:items:remove":function(e,t){this.removeModel("collection",t,e)},"control:items:update":function(e,t){this.updateCollection("collection",t,e)}}},o),PuppetForm.CommonEventsFunctions={setBooleanFieldOption:function(e,t,n){_.isBoolean(t)&&this.field.set(e,t),n.stopPropagation()},setStringFieldOption:function(e,t,n){_.isString(t)&&this.field.set(e,t),n.stopPropagation()},setIntegerFieldOption:function(e,t,n){_.isNumber(t)&&this.field.set(e,t),n.stopPropagation()},hideControl:function(e,t){_.isBoolean(t)&&$(e.target).is(this.$el)&&$(e.currentTarget).toggleClass("hidden",t),e.stopPropagation()}}),a=PuppetForm.CommonPrototype={defaults:{},requiredFields:["name","label"],formatter:e,className:function(){return"control form-group"},hasAllRequiredOptionsDefined:function(){var e=this.requiredFields||[],t=!0;return _.forEach(e,function(n){_.has(this.field.attributes,n)||(t=!1,e=[],console.error("Missing Control Config Option: "+n+"\n Your configuration options: ",this.field.attributes))},this),t},setFormatter:function(){var e=PuppetForm.resolveNameToClass(this.field.get("formatter")||this.formatter,"Formatter");_.isFunction(e.fromRaw)||_.isFunction(e.toRaw)||(e=new e),this.formatter=e},setExtraClasses:function(e){this.extraClasses=this.field.get("extraClasses")||e||"",_.isArray(this.extraClasses)?this.extraClasses=this.extraClasses.join(" "):_.isString(this.extraClasses)||(this.extraClasses="")},getComponentInstanceName:function(){var e=this.field.get("name").split("."),t=e.shift();return t},registerHandlers:function(){this.handlers=this.field.get("handlers")},listenToFieldName:function(){this.modelName=this.getComponentInstanceName(),this.listenTo(this.model,"change:"+this.modelName,this.render),this.model.errorModel instanceof Backbone.Model&&this.listenTo(this.model.errorModel,"change:"+this.modelName,this.updateInvalid);var e=this.field.get("events"),t=this;void 0!==e&&null!==e&&_.map(e,function(e,n){t.listenTo(t.model,n,t.handlers[e])})},listenToFieldOptions:function(){this.listenTo(this.field,"change",this.render)},registerToComponentList:function(e){var t=this.field.get("controlName")+"_"+this.getComponentInstanceName();this.componentList[t]=e},initOptions:function(e){this.field=e.field,this.componentList=e.componentList||{}},initCollection:function(e){var t=this.getComponentInstanceName();_.isUndefined(this.model.get(t))?this.field.get(e)instanceof Backbone.Collection?this.collection=this.field.get(e)||new Backbone.Collection:this.collection=new Backbone.Collection(this.field.get(e)):this.model.get(t)instanceof Backbone.Collection?this.collection=this.model.get(t):this.collection=new Backbone.Collection(this.model.get(t))},setAttributeMapping:function(){this.attributeMapping=_.defaults(this.field.get("attributeMapping")||{},this.attributeMappingDefaults)},mappedAttribute:function(e,t,n){var i=this.attributeMapping[e];return t&&(i="{{"+i+"}}"),n&&(i='"'+i+'"'),i},buildAttributeMappedArray:function(e,t,n,i){return t=_.defaults(t||{},n),e.map(function(e){var o={};return _.each(_.keys(n),function(n){o[n]=e.get(t[n])||e.get(t[i])}),o})},serializeModel:function(e,t){var n=_.defaults(this.field.toJSON(),this.defaults),i=e.toJSON(),o=n.name.split("."),r=o.shift(),a=o.join("."),s=this.keyPathAccessor(i[r],a),l=this.formatter.fromRaw(s,e);return _.extend(n,{rawValue:s,value:l,attributes:i,formatter:this.formatter}),t&&_.extend(n,t),this.fieldModel={rawValue:s,value:l},n},onChange:function(e){e.preventDefault();var t=this.model,n=($(e.target),this.field.get("name").split(".")),i=n.shift(),o=n.join("."),r=this.getValueFromDOM(),a={};if(this.model.errorModel instanceof Backbone.Model)if(_.isEmpty(o))this.model.errorModel.unset(i);else{var s=this.model.errorModel.get(i);s&&(this.keyPathSetter(s,o,null),this.model.errorModel.set(i,s))}a[i]=_.isEmpty(o)?r:_.clone(t.get(i))||{},_.isEmpty(o)||this.keyPathSetter(a[i],o,r),this.stopListening(this.model,"change:"+i,this.render),t.set(a),this.listenTo(this.model,"change:"+i,this.render)},clearInvalid:function(){return this.$el.removeClass(PuppetForm.errorClassName).find("."+PuppetForm.helpClassName+".error").remove(),this},updateInvalid:function(){var e=this.model.errorModel;if(!(e instanceof Backbone.Model))return this;this.clearInvalid();var t=this.field.get("name").split("."),n=t.shift(),i=t.join("."),o=e.get(n);if(!_.isEmpty(o)&&(_.isObject(o)&&(o=this.keyPathAccessor(o,i)),!_.isEmpty(o)))return this.$el.addClass(PuppetForm.errorClassName),this.$el.append('<span class="'+PuppetForm.helpClassName+' error">'+(_.isArray(o)?o.join(", "):o)+"</span>"),this},keyPathAccessor:function(e,t){var n=e;t=t.split(".");for(var i=0;i<t.length;i++){if(_.isNull(n))return null;_.isEmpty(t[i])||_.isUndefined(n[t[i]])||(n=n[t[i]])}return _.isObject(n)&&!_.isArray(n)?null:n},keyPathSetter:function(e,t,n){for(t=t.split(".");t.length>1;)e[t[0]]||(e[t[0]]={}),e=e[t.shift()];return e[t.shift()]=n},events:{"control:hidden":"hideControl"},onRender:function(){this.$el.addClass(this.field.get("controlName")+"-control "+this.field.get("name").split(".").shift()+(this.extraClasses?" "+this.extraClasses:"")),this.updateInvalid()}},s={initialize:function(e){this.initOptions(e),this.hasAllRequiredOptionsDefined(),this.setFormatter(),this.listenToFieldName(),this.listenToFieldOptions(),this.setExtraClasses()}},l=PuppetForm.Control=Backbone.Marionette.ItemView.extend(_.defaults(s,_.defaults(a,r))),d=(PuppetForm.UneditableInputControl=l,PuppetForm.HelpControl=l.extend({template:_.template(['<label class="<%=PuppetForm.controlLabelClassName%>">&nbsp;</label>','<div class="<%=PuppetForm.controlsClassName%>">','  <span class="<%=PuppetForm.helpMessageClassName%> help-block"><%=label%></span>',"</div>"].join("\n"))}),PuppetForm.SpacerControl=l.extend({template:_.template(['<label class="<%=PuppetForm.controlLabelClassName%>">&nbsp;</label>','<div class="<%=PuppetForm.controlsClassName%>"></div>'].join("\n"))}),PuppetForm.DefaultTextareaControl=l.extend({defaults:{label:"",maxlength:4e3,extraClasses:[],helpMessage:""},template:_.template(['<label class="<%=PuppetForm.controlLabelClassName%>"><%-label%></label>','<div class="<%=PuppetForm.controlsClassName%>">','  <textarea class="<%=PuppetForm.controlClassName%> <%=extraClasses.join(\' \')%>" name="<%=name%>" maxlength="<%=maxlength%>" placeholder="<%-placeholder%>" <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%>><%-value%></textarea>',"  <% if (helpMessage.length) { %>",'    <span class="<%=PuppetForm.helpMessageClassName%>"><%=helpMessage%></span>',"  <% } %>","</div>"].join("\n")),events:_.defaults({"change textarea":"onChange"},l.prototype.events),getValueFromDOM:function(){return this.formatter.toRaw(this.$el.find("textarea").val(),this.model)}}),PuppetForm.DefaultSelectControl=l.extend({defaults:{label:"",options:[],extraClasses:[]},template:_.template(['<label class="<%=PuppetForm.controlLabelClassName%>"><%-label%></label>','<div class="<%=PuppetForm.controlsClassName%>">','  <select class="<%=PuppetForm.controlClassName%> <%=extraClasses.join(\' \')%>" name="<%=name%>" value="<%-value%>" <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%> >',"    <% for (var i=0; i < options.length; i++) { %>","      <% var option = options[i]; %>",'      <option value="<%-formatter.fromRaw(option.value)%>" <%=option.value === rawValue ? "selected=\'selected\'" : ""%> <%=option.disabled ? "disabled=\'disabled\'" : ""%>><%-option.label%></option>',"    <% } %>","  </select>","</div>"].join("\n")),events:{"change select":"onChange"},formatter:t,getValueFromDOM:function(){return this.formatter.toRaw(this.$el.find("select").val(),this.model)}}),PuppetForm.MultiSelectControl=l.extend({defaults:{label:"",options:[],extraClasses:[],height:"78px"},template:_.template(['<label class="<%=PuppetForm.controlLabelClassName%>"><%-label%></label>','<div class="<%=PuppetForm.controlsClassName%>">','  <select multiple="multiple" class="<%=PuppetForm.controlClassName%> <%=extraClasses.join(\' \')%>" name="<%=name%>" value="<%-value%>" <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%> style="height:<%=height%>">',"    <% for (var i=0; i < options.length; i++) { %>","      <% var option = options[i]; %>",'      <option value="<%-formatter.fromRaw(option.value)%>" <%=option.value == rawValue ? "selected=\'selected\'" : ""%> <%=option.disabled ? "disabled=\'disabled\'" : ""%>><%-option.label%></option>',"    <% } %>","  </select>","</div>"].join("\n")),events:{"change select":"onChange","dblclick select":"onDoubleClick"},formatter:t,getValueFromDOM:function(){return this.formatter.toRaw(this.$el.find("select").val(),this.model)},onDoubleClick:function(e){this.model.trigger("doubleclick",e)}}),PuppetForm.DefaultInputControl=l.extend({defaults:{type:"text",label:"",maxlength:255,extraClasses:[],helpMessage:""},template:_.template(['<label class="<%=PuppetForm.controlLabelClassName%>"><%-label%></label>','<div class="<%=PuppetForm.controlsClassName%>">','  <input type="<%=type%>" class="<%=PuppetForm.controlClassName%> <%=extraClasses.join(\' \')%>" name="<%=name%>" maxlength="<%=maxlength%>" value="<%-value%>" placeholder="<%-placeholder%>" <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%> />',"  <% if (helpMessage.length) { %>",'    <span class="<%=PuppetForm.helpMessageClassName%>"><%=helpMessage%></span>',"  <% } %>","</div>"].join("\n")),events:_.defaults({"change input":"onChange"},l.prototype.events),getValueFromDOM:function(){return this.formatter.toRaw(this.$el.find("input").val(),this.model)}})),c=PuppetForm.DefaultBooleanControl=d.extend({defaults:{type:"checkbox",label:"",controlLabel:"&nbsp;",extraClasses:[]},template:_.template(['<label class="<%=PuppetForm.controlLabelClassName%>"><%=controlLabel%></label>','<div class="<%=PuppetForm.controlsClassName%>">','  <div class="checkbox">',"    <label>",'      <input type="<%=type%>" class="<%=extraClasses.join(\' \')%>" name="<%=name%>" <%=value ? "checked=\'checked\'" : ""%> <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%> /> <%-label%>',"    </label>","  </div>","</div>"].join("\n")),getValueFromDOM:function(){return this.formatter.toRaw(this.$el.find("input").is(":checked"),this.model)}});PuppetForm.DefaultCheckboxControl=c,PuppetForm.DefaultRadioControl=d.extend({defaults:{type:"radio",label:"",options:[],extraClasses:[]},template:_.template(["<% if (drawLabel === true) { %>",'<label class="<%=PuppetForm.controlLabelClassName%>"><%-label%></label>','<div class="<%=PuppetForm.controlsClassName%> <%=PuppetForm.radioControlsClassName%>">',"<% } %>","  <% for (var i=0; i < options.length; i++) { %>","    <% var option = options[i]; %>",'    <label class="<%=PuppetForm.radioLabelClassName%>">','      <input type="<%=type%>" class="<%=extraClasses.join(\' \')%>" name="<%=name%>" value="<%-formatter.fromRaw(option.value)%>" <%=rawValue === option.value ? "checked=\'checked\'" : ""%> <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%> /> <%-option.label%>',"    </label>","  <% } %>","</div>"].join("\n")),formatter:t,getValueFromDOM:function(){return this.formatter.toRaw(this.$el.find("input:checked").val(),this.model)},bootstrap2:function(){PuppetForm.radioControlsClassName="radio",PuppetForm.radioLabelClassName=""}});_.extend(PuppetForm,{radioControlsClassName:"radio",radioLabelClassName:"radio-inline"});PuppetForm.DefaultButtonControl=l.extend({defaults:{type:"submit",label:"Submit",status:void 0,message:void 0,extraClasses:[]},template:_.template(['<label class="<%=PuppetForm.controlLabelClassName%>">&nbsp;</label>','<div class="<%=PuppetForm.controlsClassName%>">','  <button type="<%=type%>" name="<%=name%>" class="btn <%=extraClasses.join(\' \')%>" <%=disabled ? "disabled" : ""%> ><%-label%></button>','  <% var cls = ""; if (status == "error") cls = PuppetForm.buttonStatusErrorClassName; if (status == "success") cls = PuppetForm.buttonStatusSuccessClassname; %>','  <span class="status <%=cls%>"><%=message%></span>',"</div>"].join("\n")),
initialize:function(){l.prototype.initialize.apply(this,arguments),this.listenTo(this.field,"change:status",this.render),this.listenTo(this.field,"change:message",this.render)},bootstrap2:function(){PuppetForm.buttonStatusErrorClassName="text-error",PuppetForm.buttonStatusSuccessClassname="text-success"}});_.extend(PuppetForm,{buttonStatusErrorClassName:"text-danger",buttonStatusSuccessClassname:"text-success"})}.call(this),e.PuppetForm=PuppetForm}.apply(e,arguments)})}(this),define("main/ui_components/forms/templateHelpers",["puppetForm","handlebars"],function(e,t){"use strict";t.registerHelper("PuppetForm",function(t){return e[t]}),t.registerHelper("has-puppetForm-prop",function(t){var n=e[t]||"";return""!==n?!0:!1}),t.registerHelper("formatter-from-raw",function(e,t){return e.fromRaw(t)}),t.registerHelper("clean-for-id",function(e){return e=e||"",e.replace(/[^A-Z0-9]+/gi,"-")}),t.registerHelper("add-required-indicator",function(e,t){return t?e+" *":e}),t.registerHelper("is-sr-only-label",function(e){return e?"sr-only":""}),t.registerHelper("not",function(e){return _.isUndefined(e)?void 0:!e});var n={label:function(n,i){i=i.hash||{};var o,r,a,s,l,d=t.Utils.escapeExpression;o=i.forID||"",r=_.isBoolean(i.srOnlyLabel)?i.srOnlyLabel:!1,a=d(_.isArray(i.classes)?i.classes.toString().replace(/,/g," "):i.classes||""),s=i.content||"",l=i.extraClassLogic||"";var c=['<label for="'+o+'" class="'+l+(a?a:"")+e.controlLabelClassName+'">',(s?s+"\n":"")+(r?'<span class="sr-only">'+n+"</span>":n),"</label>"].join("\n");return new t.SafeString(c)},checkbox:function(e,n){n=n.hash||{};var i,o,r,a,s,l,d,c,u=t.Utils.escapeExpression;s=u(n.name||"checkbox"),c=n.labelTemplate||!1,e=c?e||u(s):u(e||s),i=u(n.id||"checkbox-"+e.replace(/[^A-Z0-9]+/gi,"-")),o=u(n.title||e+" checkbox"),r=u(_.isArray(n.classes)?n.classes.toString().replace(/,/g," "):n.classes||""),a=_.isBoolean(n.checked)?n.checked:!1,l=_.isBoolean(n.disabled)?n.disabled:!1,d=_.isBoolean(n.srOnlyLabel)?n.srOnlyLabel:!1;var h={hash:{forID:i,srOnlyLabel:d,classes:l?"disabled":"",content:['<input type="checkbox" id="'+i+'" name="'+s+'" title="'+o+'"'+(a?' checked="checked"':"")+(l?" disabled":"")+" />"].join("\n")}},p=['<div class="checkbox'+(r?" "+r+'"':'"')+">",t.helpers["ui-form-label"].apply(this,[e,h]),"</div>"].join("\n");return new t.SafeString(p)},searchbar:function(e,n){n=n.hash||{};var i,o,r,a,s,l,d,c,u=t.Utils.escapeExpression;e=u(e||""),i=u(n.title||e),o=n.value||"",r=u(parseInt(n.size)||12),a=u(n.id||"default-responsive-search-bar"),s=u(_.isArray(n.classes)?n.classes.toString().replace(/,/g," "):n.classes||""),l=n.standAloneForm||!1,d=_.isBoolean(n.required)?n.required:!1,c=_.isBoolean(n.disabled)?n.disabled:!1;var h={hash:{forID:a,classes:["sr-only"]}},p=[l?'<form action="#" method="post">':"",'<div class="row"><div class="col-xs-'+r+" "+s+'">','<div class="input-group">',t.helpers["ui-form-label"].apply(this,[e.length>0?e:i.length>0?i:"default searchbar",h]),'<input type="text" class="form-control" placeholder="'+e+'" title="'+i+'" '+(c?" disabled":"")+(d?" required":"")+' id="'+a+'" value="'+o+'" />','<span class="input-group-btn">','<button type="button" class="text-search-accessible btn btn-default"'+(c?" disabled":"")+(d?" required":"")+' title="Please select the button to submit your search">','<i class="fa fa-search" title="Submit Search"></i><span class="sr-only">Submit Search</span>',"</button>","</span>","</div>","</div>","</div>",l?"</form>":""].join("\n");return new t.SafeString(p)}};return n}),define("main/ui_components/templateHelpers",["handlebars","underscore"],function(e,t){"use strict";var n={button:function(n,i){i=i.hash||{};var o,r,a,s,l,d,c,u,h,p,g=e.Utils.escapeExpression;n=g(n||""),o=g(i.type||"button"),r=g(i.title||n),a=g(t.isArray(i.classes)?i.classes.toString().replace(/,/g," "):i.classes||""),s=t.isString(i.attributes)?i.attributes:"",l=g(i.id),d=g(i.icon),c=i.disabled?!0:!1,u=g(i.size||""),h=g(i.status||""),p=!t.isUndefined(i.srOnlyLabel)&&t.isBoolean(i.srOnlyLabel)?i.srOnlyLabel:!1;var f=['<button type="'+o+'" class="btn'+(a?" "+a:"")+(h?" btn-"+h:"")+("xs"===u||"sm"===u||"lg"===u?" btn-"+u:"")+'" title="'+r+'" '+(c?'disabled="disabled" ':"")+(l?'id="'+l+'"':"")+s+">"+(d?'<i class="fa '+d+'" ></i> ':"")+(p?'<span class="sr-only">'+n+"</span>":n)+("false"===i.split&&t.isEmpty(d)||"true"===i.split?' <span class="caret"></span><span class="sr-only">Press enter to toggle dropdown</span>':"")+"</button>"].join("\n");return new e.SafeString(f)},dropdown:function(n,i){i=i.hash||{};var o=e.Utils.escapeExpression,r=o(i.split||null),a='<div class="btn-group">',s=["btn-primary","btn-sm"],l=e.helpers["ui-button"].apply(this,[n,{hash:{classes:i.split?s.concat("btn-divider"):s,id:i.id,icon:i.icon,type:i.type,title:"Press enter to "+n,srOnlyLabel:i.srOnlyLabel}}]),d=["dropdown-toggle","btn-sm"],c=e.helpers["ui-button"].apply(this,[i.split?"":n,{hash:{classes:i.icon&&t.isEmpty(n)?d.concat("btn-icon"):i.split?d.concat("btn-primary"):d.concat(["btn-primary","btn-caret"]),attributes:'data-toggle="dropdown"',icon:i.split?"":i.icon,split:r,title:i.split?"Press enter to dropdown":"Press enter to "+(t.isEmpty(n)?"dropdown":n),srOnlyLabel:i.srOnlyLabel}}]);i.split?a=a+l+c:a+=c;var u='<ul class="dropdown-menu">';return t.isString(i.items)&&(i.items=JSON.parse(i.items)),t.each(i.items,function(e){u+='<li id="'+i.id+"-"+e.id+'"title="Press enter to '+e.label+'"><a href="#">'+e.label+"</a></li>"}),u+="</ul></div>",a+=u,new e.SafeString(a)}};return n}),define("api/UIComponents",["backbone","marionette","jquery","underscore","handlebars","puppetForm","main/ui_components/forms/templateHelpers","main/ui_components/templateHelpers"],function(e,t,n,i,o,r,a,s){"use strict";var l=!0,d="ui-",c=d+"form-",u={Form_Helpers:a,Template_Helpers:s,View_Components:{}};return l?(i.each(u.Template_Helpers,function(e,t){o.registerHelper(d+t,e)}),i.each(u.Form_Helpers,function(e,t){o.registerHelper(c+t,e)})):i.extend(t.View.prototype,{mixinTemplateHelpers:function(e){e=e||{};var n=this.getOption("templateHelpers");n=t._getValue(n,this);var o=i.reduce(u.Template_Helpers,function(e,t,n){return e[d+n]=t,e},{}),r=i.reduce(u.Form_Helpers,function(e,t,n){return e[c+n+n]=t,e},{});return n=i.extend(o,n),n=i.extend(r,n),i.extend(e,n)}}),u}),define("main/AppletsManifest",[],function(e){var t={applets:[]};return t}),define("main/ScreensManifest",[],function(e){var t={screens:[]};return t}),define("main/NewUserScreen",[],function(e){var t={screens:[]};return t}),define("main/PreDefinedScreens",[],function(e){var t={screens:[]};return t}),!function(e,t){"undefined"!=typeof module&&module.exports?module.exports.browser=t():"function"==typeof define&&define.amd?define("bowser",t):this[e]=t()}("bowser",function(){function e(e){function n(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}var i,o=n(/(ipod|iphone|ipad)/i).toLowerCase(),r=/like android/i.test(e),a=!r&&/android/i.test(e),s=n(/version\/(\d+(\.\d+)?)/i),l=/tablet/i.test(e),d=!l&&/[^-]mobi/i.test(e);/opera|opr/i.test(e)?i={name:"Opera",opera:t,version:s||n(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(e)?i={name:"Windows Phone",windowsphone:t,msie:t,version:n(/iemobile\/(\d+(\.\d+)?)/i)}:/msie|trident/i.test(e)?i={name:"Internet Explorer",msie:t,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/chrome|crios|crmo/i.test(e)?i={name:"Chrome",chrome:t,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:o?(i={name:"iphone"==o?"iPhone":"ipad"==o?"iPad":"iPod"},s&&(i.version=s)):/sailfish/i.test(e)?i={name:"Sailfish",sailfish:t,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?i={name:"SeaMonkey",seamonkey:t,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(e)?(i={name:"Firefox",firefox:t,version:n(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(i.firefoxos=t)):/silk/i.test(e)?i={name:"Amazon Silk",silk:t,version:n(/silk\/(\d+(\.\d+)?)/i)}:a?i={name:"Android",version:s}:/phantom/i.test(e)?i={name:"PhantomJS",phantom:t,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?i={name:"BlackBerry",blackberry:t,version:s||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(e)?(i={name:"WebOS",webos:t,version:s||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(i.touchpad=t)):i=/bada/i.test(e)?{name:"Bada",bada:t,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(e)?{name:"Tizen",tizen:t,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||s}:/safari/i.test(e)?{name:"Safari",safari:t,version:s}:{},/(apple)?webkit/i.test(e)?(i.name=i.name||"Webkit",i.webkit=t,!i.version&&s&&(i.version=s)):!i.opera&&/gecko\//i.test(e)&&(i.name=i.name||"Gecko",i.gecko=t,i.version=i.version||n(/gecko\/(\d+(\.\d+)?)/i)),a||i.silk?i.android=t:o&&(i[o]=t,i.ios=t);var c="";o?(c=n(/os (\d+([_\s]\d+)*) like mac os x/i),c=c.replace(/[_\s]/g,".")):a?c=n(/android[ \/-](\d+(\.\d+)*)/i):i.windowsphone?c=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i.webos?c=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):i.blackberry?c=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):i.bada?c=n(/bada\/(\d+(\.\d+)*)/i):i.tizen&&(c=n(/tizen[\/\s](\d+(\.\d+)*)/i)),c&&(i.osversion=c);var u=c.split(".")[0];return l||"ipad"==o||a&&(3==u||4==u&&!d)||i.silk?i.tablet=t:(d||"iphone"==o||"ipod"==o||a||i.blackberry||i.webos||i.bada)&&(i.mobile=t),i.msie&&i.version>=10||i.chrome&&i.version>=20||i.firefox&&i.version>=20||i.safari&&i.version>=6||i.opera&&i.version>=10||i.ios&&i.osversion&&i.osversion.split(".")[0]>=6||i.blackberry&&i.version>=10.1?i.a=t:i.msie&&i.version<10||i.chrome&&i.version<20||i.firefox&&i.version<20||i.safari&&i.version<6||i.opera&&i.version<10||i.ios&&i.osversion&&i.osversion.split(".")[0]<6?i.c=t:i.x=t,i}var t=!0,n=e("undefined"!=typeof navigator?navigator.userAgent:"");return n._detect=e,n}),define("_assets/js/browserDetector/browserManifest",[],function(){return{browsers:[{name:"msie",displayName:"Internet Explorer",supported:"11"},{name:"chrome",displayName:"Chrome",supported:"40",minimumAllowed:"40"},{name:"firefox",displayName:"Firefox",supported:"31",minimumAllowed:"31"},{name:"phantom",supported:"1.9"},{name:"safari",displayName:"Safari",minimumAllowed:"7"},{name:"opera",displayName:"Opera",minimumAllowed:"NA"},{name:"ios",displayName:"iOS",minimumAllowed:"8"},{name:"android",displayName:"Android",minimumAllowed:"37"}]}}),define("_assets/js/browserDetector/browserDetector",["underscore","bowser","./browserManifest"],function(e,t,n){var i={enforceBrowserType:function(){var i=void 0,o="WARNING: The application you are trying to access has not been fully tested with "+t.name+" v."+t.version;return e.each(n.browsers,e.bind(function(n){if(t[n.name]&&(e.isUndefined(i)||i)){if(n.supported&&JSON.parse(t.version)>=n.supported)return void(i=!0);if(n.minimumAllowed&&JSON.parse(t.version)>=n.minimumAllowed)return alert(o),void(i=!0);i=!1,this.redirectToBrowserUnsupportedPage()}},this)),e.isUndefined(i)&&alert(o),i=e.isBoolean(i)?i:!1},redirectToBrowserUnsupportedPage:function(){window.location="./browser-not-supported.html"}};return i}),define("main/ResourceDirectory",["backbone"],function(e){"use strict";var t=e.Model.extend({defaults:{rel:"external",title:"",href:"",id:""},initialize:function(){this.id=this.get("title")}}),n=e.Collection.extend({model:t,parse:function(e){return e.data.link}}),i=function(){function e(){return new n}var t;return{instance:function(){return t||(t=e()),t}}}();return i}),define("api/UrlBuilder",["main/ResourceDirectory"],function(e){"use strict";var t=e.instance(),n={buildUrl:function(e,n){var i,o="",r=_.find(t.models,function(t){return t.id===e});if(void 0!==r?i=r.get("href"):console.error("No resource found in resource directory with title: "+e),n){var a=[];_.each(n,function(e,t){a.push(encodeURIComponent(t).concat("=",encodeURIComponent(e)))}),o="?"+a.join("&")}return i+o},replaceURLRouteParams:function(e,t){return e.replace(/:([a-zA-Z]+\w*)/g,function(e,n){return t[n]})}},i=n;return i}),function(e){define("sessionstorage",["backbone","underscore"],function(){return function(){!function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function t(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}var n=this._,i=this.Backbone;i.SessionStorage=window.Store=function(e){this.name=e;var t=this.sessionStorage().getItem(this.name);this.records=t&&t.split(",")||[]},n.extend(i.SessionStorage.prototype,{save:function(){this.sessionStorage().setItem(this.name,this.records.join(","))},create:function(e){return e.id||(e.id=t(),e.set(e.idAttribute,e.id)),this.sessionStorage().setItem(this.name+"-"+e.id,JSON.stringify(e)),this.records.push(e.id.toString()),this.save(),e.toJSON()},update:function(e){return this.sessionStorage().setItem(this.name+"-"+e.id,JSON.stringify(e)),n.include(this.records,e.id.toString())||this.records.push(e.id.toString()),this.save(),e.toJSON()},find:function(e){var t=this.sessionStorage().getItem(this.name+"-"+e.id);return t?JSON.parse(t):null},findAll:function(){return n(this.records).chain().map(function(e){return JSON.parse(this.sessionStorage().getItem(this.name+"-"+e))},this).compact().value()},destroy:function(e){return this.sessionStorage().removeItem(this.name+"-"+e.id),this.records=n.reject(this.records,function(t){return t==e.id.toString()}),this.save(),e},sessionStorage:function(){return sessionStorage}}),i.SessionStorage.sync=function(e,t,n,i){var o=t.sessionStorage||t.collection.sessionStorage;"function"==typeof n&&(n={success:n,error:i});var r,a=$.Deferred();switch(e){case"read":r=void 0!=t.id?o.find(t):o.findAll();break;case"create":r=o.create(t);break;case"update":r=o.update(t);break;case"delete":r=o.destroy(t)}return r?(n.success(r),a.resolve()):(n.error&&n.error("Record not found"),a.reject()),a.promise()},i.SessionStorage.ajaxSync=i.sync,i.sessionStorageEnabled=!0,i.bypassSessionStorage=function(e,t,n){i.sessionStorageEnabled=!1;var o=t.call(e,n||{});return i.sessionStorageEnabled=!0,o},i.getSyncMethod=function(e){return(e.sessionStorage||e.collection&&e.collection.sessionStorage)&&i.sessionStorageEnabled?i.SessionStorage.sync:i.SessionStorage.ajaxSync},i.sync=function(e,t,n,o){return i.getSyncMethod(t).apply(this,[e,t,n,o])}}()}.apply(e,arguments)})}(this),function(e){function t(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function n(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function i(e,t){function n(){he.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}var i=!0;return d(function(){return i&&(n(),i=!1),t.apply(this,arguments)},t)}function o(e,t){return function(n){return h(e.call(this,n),t)}}function r(e,t){return function(n){return this.lang().ordinal(e.call(this,n),t)}}function a(){}function s(e){x(e),d(this,e)}function l(e){var t=b(e),n=t.year||0,i=t.quarter||0,o=t.month||0,r=t.week||0,a=t.day||0,s=t.hour||0,l=t.minute||0,d=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*d+6e4*l+36e5*s,this._days=+a+7*r,this._months=+o+3*i+12*n,this._data={},this._bubble()}function d(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function c(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&Se.hasOwnProperty(t)&&(n[t]=e[t]);return n}function u(e){return 0>e?Math.ceil(e):Math.floor(e)}function h(e,t,n){for(var i=""+Math.abs(e),o=e>=0;i.length<t;)i="0"+i;return(o?n?"+":"":"-")+i}function p(e,t,n,i){var o=t._milliseconds,r=t._days,a=t._months;i=null==i?!0:i,o&&e._d.setTime(+e._d+o*n),r&&se(e,"Date",ae(e,"Date")+r*n),a&&re(e,ae(e,"Month")+a*n),i&&he.updateOffset(e,r||a)}function g(e){return"[object Array]"===Object.prototype.toString.call(e)}function f(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function m(e,t,n){var i,o=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),a=0;for(i=0;o>i;i++)(n&&e[i]!==t[i]||!n&&w(e[i])!==w(t[i]))&&a++;return a+r}function v(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=tt[e]||nt[t]||t}return e}function b(e){var t,n,i={};for(n in e)e.hasOwnProperty(n)&&(t=v(n),t&&(i[t]=e[n]));return i}function y(t){var n,i;if(0===t.indexOf("week"))n=7,i="day";else{if(0!==t.indexOf("month"))return;n=12,i="month"}he[t]=function(o,r){var a,s,l=he.fn._lang[t],d=[];if("number"==typeof o&&(r=o,o=e),s=function(e){var t=he().utc().set(i,e);return l.call(he.fn._lang,t,o||"")},null!=r)return s(r);for(a=0;n>a;a++)d.push(s(a));return d}}function w(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function A(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function N(e,t,n){return te(he([e,11,31+t-n]),t,n).week}function _(e){return C(e)?366:365}function C(e){return e%4===0&&e%100!==0||e%400===0}function x(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[ye]<0||e._a[ye]>11?ye:e._a[we]<1||e._a[we]>A(e._a[be],e._a[ye])?we:e._a[Ae]<0||e._a[Ae]>23?Ae:e._a[Ne]<0||e._a[Ne]>59?Ne:e._a[_e]<0||e._a[_e]>59?_e:e._a[Ce]<0||e._a[Ce]>999?Ce:-1,e._pf._overflowDayOfYear&&(be>t||t>we)&&(t=we),e._pf.overflow=t)}function S(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function T(e){return e?e.toLowerCase().replace("_","-"):e}function k(e,t){return t._isUTC?he(e).zone(t._offset||0):he(e).local()}function $(e,t){return t.abbr=e,xe[e]||(xe[e]=new a),xe[e].set(t),xe[e]}function D(e){delete xe[e]}function M(e){var t,n,i,o,r=0,a=function(e){if(!xe[e]&&Te)try{require("./lang/"+e)}catch(t){}return xe[e]};if(!e)return he.fn._lang;if(!g(e)){if(n=a(e))return n;e=[e]}for(;r<e.length;){for(o=T(e[r]).split("-"),t=o.length,i=T(e[r+1]),i=i?i.split("-"):null;t>0;){if(n=a(o.slice(0,t).join("-")))return n;if(i&&i.length>=t&&m(o,i,!0)>=t-1)break;t--}r++}return he.fn._lang}function E(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function P(e){var t,n,i=e.match(Me);for(t=0,n=i.length;n>t;t++)i[t]=st[i[t]]?st[i[t]]:E(i[t]);return function(o){var r="";for(t=0;n>t;t++)r+=i[t]instanceof Function?i[t].call(o,e):i[t];return r}}function I(e,t){return e.isValid()?(t=O(t,e.lang()),it[t]||(it[t]=P(t)),it[t](e)):e.lang().invalidDate()}function O(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(Ee.lastIndex=0;i>=0&&Ee.test(e);)e=e.replace(Ee,n),Ee.lastIndex=0,i-=1;return e}function R(e,t){var n,i=t._strict;switch(e){case"Q":return ze;case"DDDD":return Ge;case"YYYY":case"GGGG":case"gggg":return i?je:Oe;case"Y":case"G":case"g":return We;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?qe:Re;case"S":if(i)return ze;case"SS":if(i)return Ye;case"SSS":if(i)return Ge;case"DDD":return Ie;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ve;case"a":case"A":return M(t._l)._meridiemParse;case"X":return He;case"Z":case"ZZ":return Le;case"T":return Ue;case"SSSS":return Fe;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?Ye:Pe;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Pe;case"Do":return Be;default:return n=new RegExp(G(Y(e.replace("\\","")),"i"))}}function F(e){e=e||"";var t=e.match(Le)||[],n=t[t.length-1]||[],i=(n+"").match(Qe)||["-",0,0],o=+(60*i[1])+w(i[2]);return"+"===i[0]?-o:o}function V(e,t,n){var i,o=n._a;switch(e){case"Q":null!=t&&(o[ye]=3*(w(t)-1));break;case"M":case"MM":null!=t&&(o[ye]=w(t)-1);break;case"MMM":case"MMMM":i=M(n._l).monthsParse(t),null!=i?o[ye]=i:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(o[we]=w(t));break;case"Do":null!=t&&(o[we]=w(parseInt(t,10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=w(t));break;case"YY":o[be]=he.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":o[be]=w(t);break;case"a":case"A":n._isPm=M(n._l).isPM(t);break;case"H":case"HH":case"h":case"hh":o[Ae]=w(t);break;case"m":case"mm":o[Ne]=w(t);break;case"s":case"ss":o[_e]=w(t);break;case"S":case"SS":case"SSS":case"SSSS":o[Ce]=w(1e3*("0."+t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=F(t);break;case"dd":case"ddd":case"dddd":i=M(n._l).weekdaysParse(t),null!=i?(n._w=n._w||{},n._w.d=i):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=w(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=he.parseTwoDigitYear(t)}}function L(e){var n,i,o,r,a,s,l,d;n=e._w,null!=n.GG||null!=n.W||null!=n.E?(a=1,s=4,i=t(n.GG,e._a[be],te(he(),1,4).year),o=t(n.W,1),r=t(n.E,1)):(d=M(e._l),a=d._week.dow,s=d._week.doy,i=t(n.gg,e._a[be],te(he(),a,s).year),o=t(n.w,1),null!=n.d?(r=n.d,a>r&&++o):r=null!=n.e?n.e+a:a),l=ne(i,o,r,s,a),e._a[be]=l.year,e._dayOfYear=l.dayOfYear}function U(e){var n,i,o,r,a=[];if(!e._d){for(o=B(e),e._w&&null==e._a[we]&&null==e._a[ye]&&L(e),e._dayOfYear&&(r=t(e._a[be],o[be]),e._dayOfYear>_(r)&&(e._pf._overflowDayOfYear=!0),i=J(r,0,e._dayOfYear),e._a[ye]=i.getUTCMonth(),e._a[we]=i.getUTCDate()),n=0;3>n&&null==e._a[n];++n)e._a[n]=a[n]=o[n];for(;7>n;n++)e._a[n]=a[n]=null==e._a[n]?2===n?1:0:e._a[n];e._d=(e._useUTC?J:X).apply(null,a),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm)}}function H(e){var t;e._d||(t=b(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],U(e))}function B(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function z(e){if(e._f===he.ISO_8601)return void q(e);e._a=[],e._pf.empty=!0;var t,n,i,o,r,a=M(e._l),s=""+e._i,l=s.length,d=0;for(i=O(e._f,a).match(Me)||[],t=0;t<i.length;t++)o=i[t],n=(s.match(R(o,e))||[])[0],n&&(r=s.substr(0,s.indexOf(n)),r.length>0&&e._pf.unusedInput.push(r),s=s.slice(s.indexOf(n)+n.length),d+=n.length),st[o]?(n?e._pf.empty=!1:e._pf.unusedTokens.push(o),V(o,n,e)):e._strict&&!n&&e._pf.unusedTokens.push(o);e._pf.charsLeftOver=l-d,s.length>0&&e._pf.unusedInput.push(s),e._isPm&&e._a[Ae]<12&&(e._a[Ae]+=12),e._isPm===!1&&12===e._a[Ae]&&(e._a[Ae]=0),U(e),x(e)}function Y(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,o){return t||n||i||o})}function G(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function j(e){var t,i,o,r,a;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<e._f.length;r++)a=0,t=d({},e),t._pf=n(),t._f=e._f[r],z(t),S(t)&&(a+=t._pf.charsLeftOver,a+=10*t._pf.unusedTokens.length,t._pf.score=a,(null==o||o>a)&&(o=a,i=t));d(e,i||t)}function q(e){var t,n,i=e._i,o=Ke.exec(i);if(o){for(e._pf.iso=!0,t=0,n=Je.length;n>t;t++)if(Je[t][1].exec(i)){e._f=Je[t][0]+(o[6]||" ");break}for(t=0,n=Ze.length;n>t;t++)if(Ze[t][1].exec(i)){e._f+=Ze[t][0];break}i.match(Le)&&(e._f+="Z"),z(e)}else e._isValid=!1}function W(e){q(e),e._isValid===!1&&(delete e._isValid,he.createFromInputFallback(e))}function K(t){var n=t._i,i=ke.exec(n);n===e?t._d=new Date:i?t._d=new Date(+i[1]):"string"==typeof n?W(t):g(n)?(t._a=n.slice(0),U(t)):f(n)?t._d=new Date(+n):"object"==typeof n?H(t):"number"==typeof n?t._d=new Date(n):he.createFromInputFallback(t)}function X(e,t,n,i,o,r,a){var s=new Date(e,t,n,i,o,r,a);return 1970>e&&s.setFullYear(e),s}function J(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function Z(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function Q(e,t,n,i,o){return o.relativeTime(t||1,!!n,e,i)}function ee(e,t,n){var i=ve(Math.abs(e)/1e3),o=ve(i/60),r=ve(o/60),a=ve(r/24),s=ve(a/365),l=i<ot.s&&["s",i]||1===o&&["m"]||o<ot.m&&["mm",o]||1===r&&["h"]||r<ot.h&&["hh",r]||1===a&&["d"]||a<=ot.dd&&["dd",a]||a<=ot.dm&&["M"]||a<ot.dy&&["MM",ve(a/30)]||1===s&&["y"]||["yy",s];return l[2]=t,l[3]=e>0,l[4]=n,Q.apply({},l)}function te(e,t,n){var i,o=n-t,r=n-e.day();return r>o&&(r-=7),o-7>r&&(r+=7),i=he(e).add("d",r),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function ne(e,t,n,i,o){var r,a,s=J(e,0,1).getUTCDay();return s=0===s?7:s,n=null!=n?n:o,r=o-s+(s>i?7:0)-(o>s?7:0),a=7*(t-1)+(n-o)+r+1,{year:a>0?e:e-1,dayOfYear:a>0?a:_(e-1)+a}}function ie(t){var n=t._i,i=t._f;return null===n||i===e&&""===n?he.invalid({nullInput:!0}):("string"==typeof n&&(t._i=n=M().preparse(n)),he.isMoment(n)?(t=c(n),t._d=new Date(+n._d)):i?g(i)?j(t):z(t):K(t),new s(t))}function oe(e,t){var n,i;if(1===t.length&&g(t[0])&&(t=t[0]),!t.length)return he();for(n=t[0],i=1;i<t.length;++i)t[i][e](n)&&(n=t[i]);return n}function re(e,t){var n;return"string"==typeof t&&(t=e.lang().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),A(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function ae(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function se(e,t,n){return"Month"===t?re(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function le(e,t){return function(n){return null!=n?(se(this,e,n),he.updateOffset(this,t),this):ae(this,e)}}function de(e){he.duration.fn[e]=function(){return this._data[e]}}function ce(e,t){he.duration.fn["as"+e]=function(){return+this/t}}function ue(e){"undefined"==typeof ender&&(pe=me.moment,me.moment=e?i("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",he):he)}for(var he,pe,ge,fe="2.7.0",me="undefined"!=typeof global?global:this,ve=Math.round,be=0,ye=1,we=2,Ae=3,Ne=4,_e=5,Ce=6,xe={},Se={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_tzm:null,_isUTC:null,_offset:null,_pf:null,_lang:null},Te="undefined"!=typeof module&&module.exports,ke=/^\/?Date\((\-?\d+)/i,$e=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,De=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Me=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Ee=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Pe=/\d\d?/,Ie=/\d{1,3}/,Oe=/\d{1,4}/,Re=/[+\-]?\d{1,6}/,Fe=/\d+/,Ve=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Le=/Z|[\+\-]\d\d:?\d\d/gi,Ue=/T/i,He=/[\+\-]?\d+(\.\d{1,3})?/,Be=/\d{1,2}/,ze=/\d/,Ye=/\d\d/,Ge=/\d{3}/,je=/\d{4}/,qe=/[+-]?\d{6}/,We=/[+-]?\d+/,Ke=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Xe="YYYY-MM-DDTHH:mm:ssZ",Je=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Ze=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Qe=/([\+\-]|\d\d)/gi,et=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),tt={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},nt={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},it={},ot={s:45,m:45,h:22,dd:25,dm:45,dy:345},rt="DDD w W M D d".split(" "),at="M D H h m s w W".split(" "),st={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return h(this.year()%100,2)},YYYY:function(){return h(this.year(),4)},YYYYY:function(){return h(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+h(Math.abs(e),6)},gg:function(){return h(this.weekYear()%100,2)},gggg:function(){return h(this.weekYear(),4)},ggggg:function(){return h(this.weekYear(),5)},GG:function(){return h(this.isoWeekYear()%100,2)},GGGG:function(){return h(this.isoWeekYear(),4)},GGGGG:function(){return h(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return w(this.milliseconds()/100)},SS:function(){return h(w(this.milliseconds()/10),2)},SSS:function(){return h(this.milliseconds(),3)},SSSS:function(){return h(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+h(w(e/60),2)+":"+h(w(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+h(w(e/60),2)+h(w(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},lt=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];rt.length;)ge=rt.pop(),st[ge+"o"]=r(st[ge],ge);for(;at.length;)ge=at.pop(),st[ge+ge]=o(st[ge],2);for(st.DDDD=o(st.DDD,3),d(a.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,n,i;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(n=he.utc([2e3,t]),i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[t]=new RegExp(i.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=he([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return"function"==typeof n?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",
dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,i){var o=this._relativeTime[n];return"function"==typeof o?o(e,t,n,i):o.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return te(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),he=function(t,i,o,r){var a;return"boolean"==typeof o&&(r=o,o=e),a={},a._isAMomentObject=!0,a._i=t,a._f=i,a._l=o,a._strict=r,a._isUTC=!1,a._pf=n(),ie(a)},he.suppressDeprecationWarnings=!1,he.createFromInputFallback=i("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i)}),he.min=function(){var e=[].slice.call(arguments,0);return oe("isBefore",e)},he.max=function(){var e=[].slice.call(arguments,0);return oe("isAfter",e)},he.utc=function(t,i,o,r){var a;return"boolean"==typeof o&&(r=o,o=e),a={},a._isAMomentObject=!0,a._useUTC=!0,a._isUTC=!0,a._l=o,a._i=t,a._f=i,a._strict=r,a._pf=n(),ie(a).utc()},he.unix=function(e){return he(1e3*e)},he.duration=function(e,t){var n,i,o,r=e,a=null;return he.isDuration(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(r={},t?r[t]=e:r.milliseconds=e):(a=$e.exec(e))?(n="-"===a[1]?-1:1,r={y:0,d:w(a[we])*n,h:w(a[Ae])*n,m:w(a[Ne])*n,s:w(a[_e])*n,ms:w(a[Ce])*n}):(a=De.exec(e))&&(n="-"===a[1]?-1:1,o=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*n},r={y:o(a[2]),M:o(a[3]),d:o(a[4]),h:o(a[5]),m:o(a[6]),s:o(a[7]),w:o(a[8])}),i=new l(r),he.isDuration(e)&&e.hasOwnProperty("_lang")&&(i._lang=e._lang),i},he.version=fe,he.defaultFormat=Xe,he.ISO_8601=function(){},he.momentProperties=Se,he.updateOffset=function(){},he.relativeTimeThreshold=function(t,n){return ot[t]===e?!1:(ot[t]=n,!0)},he.lang=function(e,t){var n;return e?(t?$(T(e),t):null===t?(D(e),e="en"):xe[e]||M(e),n=he.duration.fn._lang=he.fn._lang=M(e),n._abbr):he.fn._lang._abbr},he.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),M(e)},he.isMoment=function(e){return e instanceof s||null!=e&&e.hasOwnProperty("_isAMomentObject")},he.isDuration=function(e){return e instanceof l},ge=lt.length-1;ge>=0;--ge)y(lt[ge]);he.normalizeUnits=function(e){return v(e)},he.invalid=function(e){var t=he.utc(NaN);return null!=e?d(t._pf,e):t._pf.userInvalidated=!0,t},he.parseZone=function(){return he.apply(null,arguments).parseZone()},he.parseTwoDigitYear=function(e){return w(e)+(w(e)>68?1900:2e3)},d(he.fn=s.prototype,{clone:function(){return he(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=he(this).utc();return 0<e.year()&&e.year()<=9999?I(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):I(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return S(this)},isDSTShifted:function(){return this._a?this.isValid()&&m(this._a,(this._isUTC?he.utc(this._a):he(this._a)).toArray())>0:!1},parsingFlags:function(){return d({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var t=I(this,e||he.defaultFormat);return this.lang().postformat(t)},add:function(e,t){var n;return n="string"==typeof e&&"string"==typeof t?he.duration(isNaN(+t)?+e:+t,isNaN(+t)?t:e):"string"==typeof e?he.duration(+t,e):he.duration(e,t),p(this,n,1),this},subtract:function(e,t){var n;return n="string"==typeof e&&"string"==typeof t?he.duration(isNaN(+t)?+e:+t,isNaN(+t)?t:e):"string"==typeof e?he.duration(+t,e):he.duration(e,t),p(this,n,-1),this},diff:function(e,t,n){var i,o,r=k(e,this),a=6e4*(this.zone()-r.zone());return t=v(t),"year"===t||"month"===t?(i=432e5*(this.daysInMonth()+r.daysInMonth()),o=12*(this.year()-r.year())+(this.month()-r.month()),o+=(this-he(this).startOf("month")-(r-he(r).startOf("month")))/i,o-=6e4*(this.zone()-he(this).startOf("month").zone()-(r.zone()-he(r).startOf("month").zone()))/i,"year"===t&&(o/=12)):(i=this-r,o="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-a)/864e5:"week"===t?(i-a)/6048e5:i),n?o:u(o)},from:function(e,t){return he.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},fromNow:function(e){return this.from(he(),e)},calendar:function(e){var t=e||he(),n=k(t,this).startOf("day"),i=this.diff(n,"days",!0),o=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(this.lang().calendar(o,this))},isLeapYear:function(){return C(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Z(e,this.lang()),this.add({d:e-t})):t},month:le("Month",!0),startOf:function(e){switch(e=v(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return e=v(e),this.startOf(e).add("isoWeek"===e?"week":e,1).subtract("ms",1)},isAfter:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)>+he(e).startOf(t)},isBefore:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)<+he(e).startOf(t)},isSame:function(e,t){return t=t||"ms",+this.clone().startOf(t)===+k(e,this).startOf(t)},min:i("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=he.apply(null,arguments),this>e?this:e}),max:i("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=he.apply(null,arguments),e>this?this:e}),zone:function(e,t){var n=this._offset||0;return null==e?this._isUTC?n:this._d.getTimezoneOffset():("string"==typeof e&&(e=F(e)),Math.abs(e)<16&&(e=60*e),this._offset=e,this._isUTC=!0,n!==e&&(!t||this._changeInProgress?p(this,he.duration(n-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,he.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?he(e).zone():0,(this.zone()-e)%60===0},daysInMonth:function(){return A(this.year(),this.month())},dayOfYear:function(e){var t=ve((he(this).startOf("day")-he(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=te(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==e?t:this.add("y",e-t)},isoWeekYear:function(e){var t=te(this,1,4).year;return null==e?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},isoWeek:function(e){var t=te(this,1,4).week;return null==e?t:this.add("d",7*(e-t))},weekday:function(e){var t=(this.day()+7-this.lang()._week.dow)%7;return null==e?t:this.add("d",e-t)},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return N(this.year(),1,4)},weeksInYear:function(){var e=this._lang._week;return N(this.year(),e.dow,e.doy)},get:function(e){return e=v(e),this[e]()},set:function(e,t){return e=v(e),"function"==typeof this[e]&&this[e](t),this},lang:function(t){return t===e?this._lang:(this._lang=M(t),this)}}),he.fn.millisecond=he.fn.milliseconds=le("Milliseconds",!1),he.fn.second=he.fn.seconds=le("Seconds",!1),he.fn.minute=he.fn.minutes=le("Minutes",!1),he.fn.hour=he.fn.hours=le("Hours",!0),he.fn.date=le("Date",!0),he.fn.dates=i("dates accessor is deprecated. Use date instead.",le("Date",!0)),he.fn.year=le("FullYear",!0),he.fn.years=i("years accessor is deprecated. Use year instead.",le("FullYear",!0)),he.fn.days=he.fn.day,he.fn.months=he.fn.month,he.fn.weeks=he.fn.week,he.fn.isoWeeks=he.fn.isoWeek,he.fn.quarters=he.fn.quarter,he.fn.toJSON=he.fn.toISOString,d(he.duration.fn=l.prototype,{_bubble:function(){var e,t,n,i,o=this._milliseconds,r=this._days,a=this._months,s=this._data;s.milliseconds=o%1e3,e=u(o/1e3),s.seconds=e%60,t=u(e/60),s.minutes=t%60,n=u(t/60),s.hours=n%24,r+=u(n/24),s.days=r%30,a+=u(r/30),s.months=a%12,i=u(a/12),s.years=i},weeks:function(){return u(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*w(this._months/12)},humanize:function(e){var t=+this,n=ee(t,!e,this.lang());return e&&(n=this.lang().pastFuture(t,n)),this.lang().postformat(n)},add:function(e,t){var n=he.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=he.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=v(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=v(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:he.fn.lang,toIsoString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),o=Math.abs(this.minutes()),r=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(i||o||r?"T":"")+(i?i+"H":"")+(o?o+"M":"")+(r?r+"S":""):"P0D"}});for(ge in et)et.hasOwnProperty(ge)&&(ce(ge,et[ge]),de(ge.toLowerCase()));ce("Weeks",6048e5),he.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},he.lang("en",{ordinal:function(e){var t=e%10,n=1===w(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),Te?module.exports=he:"function"==typeof define&&define.amd?(define("moment",["require","exports","module"],function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(me.moment=pe),he}),ue(!0)):ue()}.call(this),define("main/Session",["backbone","moment"],function(e,t){"use strict";var n,i;window.sessionStorage.hasOwnProperty("user")?(n=e.Model.extend({defaults:new e.Model(JSON.parse(window.sessionStorage.getItem("user"))).attributes}),i=e.Model.extend({defaults:new e.Model(JSON.parse(window.sessionStorage.getItem("patient"))).attributes})):(n=e.Model.extend({defaults:{site:"",expires:t.utc("Thu, 01 Jan 1970 00:00:01 GMT"),status:"loggedout"}}),i=e.Model.extend());var o=e.Model.extend({defaults:{fromDate:t().subtract("months",18).format("MM/DD/YYYY"),toDate:t().add("months",6).format("MM/DD/YYYY"),customFromDate:t().subtract("months",18).format("MM/DD/YYYY"),customToDate:t().add("months",6).format("MM/DD/YYYY"),selectedId:"custom-range-apply-global"}}),r={user:new n,patient:new i,globalDate:new o,clearSessionModel:function(e,t){this[e].clear(),_.isBoolean(t)&&t===!0&&this[e].set(this[e].defaults)},clearAllSessionModels:function(){this.user.clear({silent:!0}),this.patient.clear({silent:!0}),this.globalDate.clear({silent:!0}).set(this.globalDate.defaults,{silent:!0})}};return r}),define("api/SessionStorage",["backbone","marionette","jquery","main/Session","api/Messaging"],function(e,t,n,i,o){"use strict";var r="appletStorage",a={check:{supportsSessionStorage:function(){return"undefined"==typeof window.sessionStorage?!1:!0},existsInSessionStorage:function(e){return window.sessionStorage.hasOwnProperty(e)?!0:!1},existsInMemory:function(e){return"undefined"==typeof i||"undefined"==typeof i[e]?!1:!0},appletHasSessionStorage:function(e,t){return t||(t=a.get.sessionModel(r)),t.has(e)?!0:!1}},set:{sessionModel:function(e,t,n){a.check.supportsSessionStorage()&&window.sessionStorage.setItem(e,JSON.stringify(t.toJSON())),n&&"session"!==n||!a.check.existsInMemory(e)||i[e].set(t.toJSON())},appletStorageModel:function(e,t,n,i){var o=a.getAppletStorageKey(e,t),s=a.get.appletStorageModel(e,t,n);s.get(o)[n]=i,a.set.sessionModel(r,s)}},get:{sessionModel:function(t,n){return n&&"session"!==n||!a.check.existsInMemory(t)?a.check.supportsSessionStorage()?new e.Model(JSON.parse(window.sessionStorage.getItem(t))):null:i[t]},appletStorageModel:function(e,t){var n=a.getAppletStorageKey(e,t),i=a.get.sessionModel(r);return a.check.appletHasSessionStorage(n,i)||i.set(n,{}),i}},"delete":{sessionModel:function(e,t){a.check.existsInMemory(e)?i.clearSessionModel(e,t):a.check.supportsSessionStorage()&&window.sessionStorage.removeItem(e)},appletStorageModel:function(e,t){var n=a.getAppletStorageKey(e,t),i=a.get.sessionModel(r);a.check.appletHasSessionStorage(n,i)&&(i.unset(n),a.set.sessionModel(r,i))},all:function(){i.clearAllSessionModels(),window.sessionStorage.clear()}},addModel:function(e,t){this.set.sessionModel(e,t)},getModel:function(e){return this.get.sessionModel(e)},clear:function(e){this["delete"].sessionModel(e)},getModel_SessionStoragePreference:function(e){return this.get.sessionModel(e)},getAppletStorageKey:function(e,t){return e+"$"+t},setAppletStorageModel:function(e,t,n,i,r){var a;a=_.isUndefined(r)?o.request("get:current:screen").id:r,_.isUndefined(i)||i||(a="unbound-"+e),this.set.appletStorageModel(a,e,t,n)},getAppletStorageModel:function(e,t,n,i){var r;r=_.isUndefined(i)?o.request("get:current:screen").id:i,_.isUndefined(n)||n||(r="unbound-"+e);var a=this.getAppletStorageKey(r,e);return this.get.appletStorageModel(r,e).get(a)[t]},clearAppletStorageModel:function(e,t){var n;n=_.isUndefined(t)?o.request("get:current:screen").id:t,this["delete"].appletStorageModel(n,e)}};return i.user.on("change",a.set.sessionModel("user",i.user,"sessionStorage")),i.patient.on("change",a.set.sessionModel("patient",i.patient,"sessionStorage")),i.globalDate.on("change",a.set.sessionModel("globalDate",i.globalDate,"sessionStorage")),a}),define("api/UserService",["backbone","jquery","api/UrlBuilder","sessionstorage","moment","api/Messaging","api/SessionStorage"],function(e,t,n,i,o,r,a){"use strict";var s=15,l="user",d={STATUS:{LOGGEDIN:"loggedin",LOGGEDOUT:"loggedout"},getUserSession:function(){return a.get.sessionModel(l)},setUserSession:function(e){a.set.sessionModel(l,e)},authenticate:function(i,l,c){var u="authentication-authentication",h=this.getUserSession();h.url=n.buildUrl(u);var p=t.Deferred();return h.save({accessCode:i,verifyCode:l,site:c},{type:"POST",contentType:"application/json",success:function(t,n){h=n.data?new e.Model(n.data):new e.Model(n),h.set("expires",o.utc().add(s,"minutes")),h.set("status",d.STATUS.LOGGEDIN),"PANORAMA"===h.get("facility")?h.set("infobutton-oid","1.3.6.1.4.1.3768.86"):"KODAK"===h.get("facility")?h.set("infobutton-oid","1.3.6.1.4.1.3768.97"):h.set("infobutton-oid","1.3.6.1.4.1.3768"),h.set("infobutton-site","http://service.oib.utah.edu:8080/infobutton-service/infoRequest?"),a["delete"].sessionModel("user"),d.setUserSession(h),r.trigger("app:logged-in"),p.resolve()},error:function(e,t){console.log("Failed to authenticate with error response status: "+t.status),h.set("expires",o.utc("Thu, 01 Jan 1970 00:00:01 GMT")),a["delete"].sessionModel("user"),d.setUserSession(h),p.reject(t)}}),p.promise()},clearUserSession:function(){r.trigger("user:beginSessionEnd");var t="authentication-destroySession",i=a.get.sessionModel(l);i.url=n.buildUrl(t);var o=i.get("status");console.log(o),o&&o!==d.STATUS.LOGGEDOUT&&(i.sync("delete",i,{success:function(e,t,n){console.log("Successfully cleared user session on server.")},error:function(e,t,n){console.log("Error: Could not destroy user session")},async:!0}),i.set("status",d.STATUS.LOGGEDOUT),a["delete"].all(),e.fetchCache._cache={},r.trigger("user:sessionEnd"))},checkUserSession:function(){var e=this.checkUserToken();return 0>=e?(this.clearUserSession(),!1):(r.trigger("user:sessionCheck"),!0)},checkUserToken:function(){var e=0,t=this.getUserSession();return t.has("expires")&&(e=Math.floor(o(t.get("expires")).diff(o.utc())/6e4),0>=e&&(e=0)),e},refreshUserToken:function(){var e="authentication-refreshToken",t=this.getUserSession();t.url=n.buildUrl(e),t.fetch({success:function(e,n,i){e.data&&(e=e.data),t=e,t.set("expires",o.utc().add(s,"minutes"),{silent:!0}),t.set("status",d.STATUS.LOGGEDIN,{silent:!0}),d.setUserSession(t)},error:function(e,t,n){},async:!0})},setLogoffTime:function(e){e instanceof Number&&(s=e)},getLogoffTime:function(){return s},getStatus:function(){return this.getUserSession().get("status")},hasPermission:function(e){var t=this.getUserSession(),n=t.get("permissions")||[];return _.contains(n,e)},hasPermissions:function(e){var t=e.split(/[|&]/);return e.match(/&/)?_.all(t,function(e){return this.hasPermission(e)},this):_.any(t,function(e){return this.hasPermission(e)},this)}};return r.on("app:logout",d.clearUserSession),d}),define("main/adk_utils/dateUtils",["jquery","moment","underscore"],function(e,t,n){var i={},o=/^(0[1-9]|1[012])\/(0[1-9]|[12][0-9]|3[01])\/(19|20)\d\d$/g,r="MM/DD/YYYY",a=function(){return{format:r.toLowerCase(),placeholder:r,regex:o,clearIncomplete:!0,todayHighlight:!0,endDate:(new t).format(r),startDate:new t("01/01/1900",r).format(r),keyboardNavigation:!1,onincomplete:function(t){e(this).val("").trigger("change")},inputmask:"m/d/y",autoclose:!0}}();return i.datepicker=function(e,t,i){var o=n.clone(a,!0),r=t||{};i=i||{},n.extend(o,r);var s=e.datepicker(o).data({value:o.initialDate,regex:o.regex,format:o.format,autoclose:o.autoclose,dateUtilsOptions:o});n.each(i,function(e){s.on(e.type,e.handler)}),s.inputmask(o.inputmask,o).prop("placeholder",o.placeholder)},i.defaultOptions=function(){return a},i.getRdkDateTimeFormatter=function(){return{getCurrentDate:function(){return(new t).format("YYYYMMDD")},getCurrentTimeWithZeroSeconds:function(){return(new t).format("HHmm")+"00"},getCurrentTime:function(){return(new t).format("HHmmss")},getDateFromDateString:function(e){return new t(e,r).format("YYYYMMDD")},getDateTimeFromDateTimeStrings:function(e,n){var i=new t(e+" "+n+"m");return i.isValid()?i.format("YYYYMMDDHHmm"):0}}},i}),define("main/adk_utils/resizeUtils",["backbone"],function(e){var t={};return t.centerRegion=function(e,t,n){e.$el.parent().css("margin-top",t.$el.height()+"px"),e.$el.parent().css("height",$(window).height()-t.$el.height()-n.bottomRegion.$el.children().height()+"px")},t.getXSize=function(){var e=$(document).find(".gridster");if(e.length>0){var t=12,n=12,i=16,o=20,r=24,a=$(window).width()-2*e.position().left,s=a-(10*t+30),l=1;return $(document).find(".gridster div[data-col]").each(function(){var e=parseInt($(this).attr("data-col")),t=parseInt($(this).attr("data-sizex"));e+=t,e>l&&(l=e)}),$(window).width()<=1024?(1024-2*e.position().left-150)/t:$(window).width()>1024&&$(window).width()<1280?s/12:$(window).width()>=1280&&$(window).width()<1440?(a-(10*n+30))/n:$(window).width()>=1440&&$(window).width()<1920?13>=l?s/t:(a-(10*i+30))/i:$(window).width()>=1920&&$(window).width()<2560?13>=l?s/t:17>=l?(a-(10*i+30))/i:(a-(10*o+30))/o:13>=l?s/t:17>=l?(a-(10*i+30))/i:21>=l?(a-(10*o+30))/o:(a-(10*r+30))/r}},t.hasMob=function(){for(var e=["WebKit","Moz","O","Ms",""],t=0;t<e.length;t++)if(e[t]+"MutationObserver"in window)return window[e[t]+"MutationObserver"];return!1},t.deployMob=function(e){var n=$.extend({name:"",target:!1,args:{},mobCb:function(){}},e);if(t.hasMob()){_.isUndefined($(document).data("mobs"))&&$(document).data("mobs",{});var i=$(document).data("mobs");i[n.name]=new MutationObserver(function(e){n.mobCb(e)}),i[n.name].observe(n.target,n.args)}},t.destroyMob=function(e){_.isUndefined($(document).data("mobs"))||_.isUndefined($(document).data("mobs")[e])||($(document).data("mobs")[e].disconnect(),delete $(document).data("mobs")[e])},t.jqPlugs=function(){!function(e){e.fn.resizeEnd=function(t){var n=e.extend({cb:function(){},namespace:"",duration:100,timeoutName:"resizeTimeout",timeoutCallbackName:"resizeCallback",timeoutFunctionName:"resizeFunction"},t);this.each(function(){var t=e(this);t.data(n.timeoutCallbackName,n.cb),t.data(n.timeoutFunctionName,function(){clearTimeout(e(this).data(n.timeoutName)),e(this).data(n.timeoutName,setTimeout(function(){n.cb()}),n.duration)}),t.bind("resize"+(""===n.namespace?"":"."+n.namespace),function(){clearTimeout(e(this).data(n.timeoutName)),e(this).data(n.timeoutName,setTimeout(function(){clearTimeout(e(this).data("resizeTimeout")),e(this).data(n.timeoutName,setTimeout(function(){n.cb()}),n.duration)},n.duration))})})}}(jQuery)}(),t.filteredView=function(e){if(!_.isUndefined(e)&&(console.log(e.indexOf("-full")),e.indexOf("-full")>-1&&t.hasMob())){var n="captureFilter";t.deployMob({name:n,target:$("#center-region")[0],args:{attributes:!1,childList:!0,characterData:!1,subtree:!0},mobCb:function(e){for(var i=0;i<e.length;i++)for(var o=e[i],r=o.addedNodes,a=0;a<r.length;a++){var s=r[a];if($(s).find(".gridContainer").not(".filter-parsed").length>0){var l=$(".gridContainer");l.addClass("filter-parsed"),t.destroyMob(n);break}}var d=$(".gridContainer.filter-parsed"),c=d.find(".grid-container"),u=function(e){var t=0;e.siblings().each(function(){console.log($(this)),console.log($(this).is(":visible")),console.log($(this).height()),$(this).is(":visible")&&(t+=$(this).height())}),e.height(e.parent().height()-t)};u(c);var h=d.find('[id^="grid-filter"]');h.on("hidden.bs.collapse",function(){u(c)}),h.on("shown.bs.collapse",function(){u(c)}),$(window).resizeEnd({cb:function(){u(c)},namespace:"fullViewFilterResize",duration:300,timeoutName:"fr_resizeTimeout",timeoutCallbackName:"fr_resizeCallback",timeoutFunctionName:"fr_resizeFunction"}),t.deployMob({name:"removeCaptureFilter",target:$("#center-region")[0],args:{attributes:!1,childList:!0,characterData:!1,subtree:!0},mobCb:function(e){console.log("mute_2");for(var n=0;n<e.length;n++)for(var i=e[n],o=i.removedNodes,r=0;r<o.length;r++){var a=o[r];if($(a).find(".gridContainer.filter-parsed").length>0){console.log("found");var s=$(window);s.unbind("resize.fullViewFilterResize"),delete s.data().fr_resizeTimeout,delete s.data().fr_resizeCallback,delete s.data().fr_resizeFunction,t.destroyMob("removeCaptureFilter");break}}}})}})}},t}),define("main/adk_utils/collectionUtils",["backbone","main/Session"],function(e,t){var n={};return n.sortCollection=function(e,t,n,i){if(n){var o=!1;if(e.at(0).attributes[t])o=!0;else if(e.at(e.length-1).attributes[t])o=!0;else for(var r=1,a=e.length;a-1>r;r++)if(e.at(r).attributes[t]){o=!0;break}o&&(e.comparator=function(e,o){var r;r=i?1:-1;var a=e.get(t),s=o.get(t);return"alphanumerical"===n||"numeric"===n||"date"===n||"alphabetical"===n?a===s?0:s>a||void 0===s?-1*r:1*r:void 0},e.reset(e.originalModels),e.sort())}},n.resetCollection=function(t){t instanceof e.PageableCollection?t.fullCollection.reset(t.originalModels):t.reset(t.originalModels)},n.setCollection=function(t,n){t instanceof e.PageableCollection?t.fullCollection.reset(t.fullCollection.filter(n)):t.reset(t.filter(n))},n.filterByDays=function(e,t,i){n.resetCollection(e),filterFunction=function(e){var n=new Date;if(n.setDate(n.getDate()-t),"undefined"!=typeof e.get(i)){var o=e.get(i).substring(0,4),r=e.get(i).substring(4,6),a=e.get(i).substring(6,8),s=new Date(o,r-1,a);return"Invalid Date"!=s?s>n:!1}return!1},n.setCollection(e,filterFunction)},n.filterByDateRange=function(e,t,i,o){n.resetCollection(e),filterFunction=function(e){if("undefined"!=typeof e.get(o)){var n=e.get(o).substring(0,4),r=e.get(o).substring(4,6),a=e.get(o).substring(6,8),s=new Date(n,r-1,a);return"Invalid Date"!=s?s>=t&&i>=s:!1}return!1},n.setCollection(e,filterFunction)},n.filterBeginsWith=function(e,t,i){n.resetCollection(e),filterFunction=function(e){if("undefined"!=typeof e.get(t)){var n=e.get(t);return 0===n.indexOf(i)}return!1},n.setCollection(e,filterFunction)},n.filterSubstring=function(e,t,i){n.resetCollection(e),filterFunction=function(e){if("undefined"!=typeof e.get(t)){var n=e.get(t);return n.indexOf(i)>-1}return!1},n.setCollection(e,filterFunction)},n.filterNoSubstring=function(e,t,i){n.resetCollection(e),filterFunction=function(e){if("undefined"!=typeof e.get(t)){var n=e.get(t);return n.indexOf(i)<=-1}return!1},n.setCollection(e,filterFunction)},n.filterByValue=function(e,t,i){n.resetCollection(e),filterFunction=function(e){if("undefined"!=typeof e.get(t)){var n=e.get(t);return n==i}return!1},n.setCollection(e,filterFunction)},n}),define("main/adk_utils/appletUtils",["backbone","underscore","api/Messaging"],function(e,t,n){var i={};return i.isChromeEnabled=function(e,n){var o=i.getViewTypeConfig(e,n);return!t.isUndefined(o)&&t.isBoolean(o.chromeEnabled)?o.chromeEnabled:!1},i.getViewTypeConfig=function(e,n){if(!n||"undefined"==typeof n||""===n){if(!e.defaultViewType)return void console.log("View Type: '"+n+"' is not available for the "+e.id+" applet.");n=e.defaultViewType}var i=t.where(e.viewTypes,{type:n});return i.length>0?i[0]:void console.log("View Type: '"+n+"' is not available for the "+e.id+" applet.")},i.getAppletView=function(e,i){if(!i||"undefined"==typeof i||""===i)return console.log("View Type: '"+i+"' is not available for the "+e+" applet."),!1;var o=n.getChannel(e).request("viewTypes"),r=t.where(o,{type:i});return r.length>0?r[0].view:void console.log("View Type: '"+i+"' is not available for the "+e+" applet.")},i}),define("_assets/js/helpMappings",[],function(){var e="help/eHMP_User Guide for Release 1 2_v1 3_09112015.htm",t="help/eHMP_User Guide for Release 1 2_v1 3_09112015 logon.htm",n={coversheet:{url:e+"#_Toc429743993",tooltip:"Coversheet"},clinical_reminders:{url:e+"#_Toc429744020",tooltip:"Clinical Reminders"},logon:{url:t,tooltip:"Signing in to eHMP"},activeMeds_standard:{url:e+"#_Toc429744007",tooltip:"Medications standard view"},patient_search:{url:e+"#_Toc429743970",tooltip:"Search for a patient",tooltip_placement:"bottom"},patient_search_confirm:{url:e+"#_Toc429743974",tooltip:"Accessing an unrestricted patient record"},patient_search_restricted:{url:e+"#_Toc429743975",tooltip:"Accessing a restricted patient record"},problems:{url:e+"#_Toc429744028",tooltip:"Active conditions"},problems_standard:{url:e+"#_Toc429744030",tooltip:"Active conditions standard view"},problems_expanded:{url:e+"#_Toc429744031",tooltip:"Active conditions expanded view"},appointments_standard:{url:e+"#_Toc429744017",tooltip:"Appointments and visits standard view"},appointments_expanded:{url:e+"#_Toc429744018",tooltip:"Appointments and visits expanded view"},immunizations_standard:{url:e+"#_Toc429744042",tooltip:"Immunizations standard view"},immunizations_expanded:{url:e+"#_Toc429744043",tooltip:"Immunizations expanded view"},vitals_standard:{url:e+"#_Toc429744071",tooltip:"Vitals standard view"},vitals_expanded:{url:e+"#_Toc429744072",tooltip:"Vitals expanded view"},allergy_grid_standard:{url:e+"#_Toc429744012",tooltip:"Allergy standard view"},allergy_grid_expanded:{url:e+"#_Toc429744014",tooltip:"Allergy expanded view"},orders_standard:{url:e+"#_Toc429744054",tooltip:"Orders standard view"},orders_expanded:{url:e+"#_Toc429744055",tooltip:"Orders expanded view"},ccd_grid_standard:{url:e+"#_Toc429744025",tooltip:"Community Health Summaries standard view"},ccd_grid_expanded:{url:e+"#_Toc429744026",tooltip:"Standard Community Health Summaries expanded view"},pdf_version:{url:"eHMP_User Guide for Release 1 2_v1 3_09112015.pdf"},documents_expanded:{url:e+"#_Toc429744033",tooltip:"Documents view"},newsfeed_standard:{url:e+"#_Toc429744062",tooltip:"Timeline view"},myCPRSList:{url:e+"#_Toc429743971",tooltip:"My CPRS List"},mySite:{url:e+"#_Toc429743971",tooltip:"My Site"},patient_search_button:{url:e+"#_Toc429743980",tooltip:"Patient search"},user_info:{url:e+"#_Toc429743981",tooltip:"User information"},status_bar:{url:e+"#_Toc429744094",tooltip:"Refresh and status bar"},ehmp_header:{url:e+"#_Toc429744194",tooltip:"The eHMP Header"},page_not_found:{url:"help/eHMP_Page Not Found.htm"},help_unavailable:{url:"help/eHMP_Help Content Not Available.htm",tooltip:"Help content not available"},medication_review_v2_expanded:{url:e+"#_Toc429744050",tooltip:"Medication review"}};return n}),define("main/adk_utils/helpUtils",["backbone","marionette","underscore","_assets/js/helpMappings"],function(e,t,n,i){"use strict";var o={mappingExist:function(e){return n.isUndefined(i[e])?!1:!0},getTooltip:function(e){return void 0===i[e]?i.help_unavailable.tooltip:i[e].tooltip},getTooltipPlacement:function(e){return void 0===i[e]?null:i[e].tooltip_placement},getUrl:function(e){return void 0===i[e]?i.help_unavailable.url:i[e].url},UrlExists:function(e,t,n,r,a){var s=new XMLHttpRequest;s.open("HEAD",e),s.onreadystatechange=function(){this.readyState==this.DONE&&200!=this.status&&o.showHelpWindow(i.page_not_found.url,t,"715","320",!1)},s.send()},addPDF:function(e){var t=' style="font-family: &quot;Helvetica Neue&quot;,Helvetica,Arial,sans-serif;font-size: 10pt;padding: 3px 7px;background: #ddd;border-radius: 4px;text-decoration: none;"',n='<div style="position:fixed; top:8px; right:5px;"><a id="save_as_pdf" href="'+i.pdf_version.url+'" target="_blank"'+t+">PDF Version</a></div>";$(e.document).find("body").append(n)},showHelpWindow:function(e,t,n,i,r){var a=void 0!==window.screenLeft?window.screenLeft:screen.left,s=void 0!==window.screenTop?window.screenTop:screen.top,l=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,d=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,c=l/2-n/2+a,u=d/2-i/2+s,h=window.open(e,t,"location=no, menubar=no, scrollbars=yes, toolbar=no, resizable=yes, width="+n+", height="+i+", top="+u+", left="+c);if(h){if("loggedin"===ADK.UserService.getUserSession().get("status")&&r)var p=setInterval(function(){"complete"===h.document.readyState&&(o.addPDF(h),clearInterval(p))},50);h.focus&&h.focus()}},popupCenter:function(e,t,n,i){o.showHelpWindow(e,t,n,i,!0),o.UrlExists(e,t,n,i)}};return $("body").on("click","div.helpIconLink a.helpIconLinkAnchor",function(e){var t=$(this).attr("href");return o.popupCenter(t,"helpIconUniqueWindow","715","300"),!1}),o}),define("main/adk_utils/pdfUtils",function(){}),define("main/adk_utils/infoButtonUtils",["backbone","jquery","api/Messaging"],function(e,t,n){"use strict";function i(e,n){if(t.isPlainObject(n)&&(n="YYYYMMDDHHmmssSSS"),e){var i=moment(e,n);return moment().diff(i,"years")}return""}function o(e){var t={};t.mainSearchCriteria={};var n=ADK.UserService.getUserSession(),o=n.get("infobutton-oid");t.oid=o?o:"1.3.6.1.4.1.3768";var r=e.model.get("qualifiedName");if(r)t.mainSearchCriteria.Dn=r;else{var a=e.model.get("problemText");if(a)t.mainSearchCriteria.Dn=a;else{var s=e.model.get("subKind");if(s)t.mainSearchCriteria.Dn=s;else{var l=e.model.get("normalizedName");l?t.mainSearchCriteria.Dn=l:t.mainSearchCriteria.Dn=e.model.get("displayName")}}}t.taskContext=e.model.get("infobuttonContext"),t.taskContext||(t.taskContext="PROBLISTREV"),t.age=i(e.patient.get("birthDate"),"YYYYMMDD");var d=e.patient.get("genderCode");if(d&&d.length>2){var c=d.split(":");t.gender=c[c.length-1]}return t.performer="PROV",t.informationRecipient="PROV",t.xsltTransform="Infobutton_UI_VA",t}function r(e){var t="";return e?(e.oid&&(t+="&representedOrganization.id.root="+e.oid),e.gender&&(t+="&patientPerson.administrativeGenderCode.c="+e.gender),
e.age&&(t+="&age.v.v="+e.age+"&age.v.u=a"),t+="&taskContext.c.c="+e.taskContext,e.mainSearchCriteria&&(e.mainSearchCriteria.Code&&(t+="&mainSearchCriteria.v.c="+e.mainSearchCriteria.Code),e.mainSearchCriteria.Cs&&(t+="&mainSearchCriteria.v.cs="+e.mainSearchCriteria.Cs),e.mainSearchCriteria.Dn&&(t+="&mainSearchCriteria.v.dn="+e.mainSearchCriteria.Dn)),e.performer&&(t+="&performer="+e.performer),e.informationRecipient&&(t+="&informationRecipient="+e.informationRecipient),e.xsltTransform&&(t+="&xsltTransform=Infobutton_UI_VA"),"&"===t.substring(0,1)&&(t=t.substring(1)),t):t}function a(){return t("body").find("#info-button-template")}function s(){var e=m.that.options,n=(m.that,p),i=a();if(0!==i.length&&(i.find("[data-toggle=tooltip]").tooltip("destroy"),i.remove()),e.toolbarOptions){var o,r;i=t(n),e.showLinksButton&&(o=[],r="Select Associated Workspace",_.isUndefined(t(event.target).closest("tr").data("model").get("snomedCode"))||ADK.UserDefinedScreens.getScreenBySnomedCt(t(event.target).closest("tr").data("model").get("snomedCode")).done(function(e){e.length>0&&_.each(e,function(e){var t={displayText:e.title,url:"#"+e.routeName};o.push(t)})}),n='<div class="appletToolbar" id="info-button-template"><div class="toolbarPopover"><div class="btn-toolbar" role="toolbar" ><div class="btn-group" role="group"><a tooltip-data-key="toolbar_infobutton" class="btn" id="info-button"><i class="fa fa-info"></i></a><a tooltip-data-key="toolbar_detailview" class="btn" id="info-button-sidekick-detailView"><i class="fa fa-file-text-o"></i></a><div class="btn-group dropdown"><div class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><a tooltip-data-key="submenu_detailview" class="btn" id="submenu-button-sidekick-detailView"><i class="fa fa-tags"></i></a></div><ul class="dropdown-menu"></ul></div></div></div>',i=t(n),0===o.length?i.find(".dropdown").replaceWith('<a tooltip-data-key="submenu_detailview" class="btn" id="submenu-button-sidekick-detailView" disabled="disabled"><i class="fa fa-tags"></i></a>'):1===o.length?i.find(".dropdown").replaceWith('<a tooltip-data-key="submenu_detailview" class="btn" id="submenu-button-sidekick-detailView" href="'+o[0].url+'"><i class="fa fa-tags"></i></a>'):(i.find("ul").append('<li class="appletToolbar-submenu-title">'+r+"</li>"),_.each(o,function(e){i.find("ul").append("<li><a href="+e.url+">"+e.displayText+"</a</li>")})))}else i=t(p);return t("#center-region").append(i),t("body").off("click.infobutton.info").off("click.infobutton.detail").off("click.infobutton.add"),t("body").on("click.infobutton.info","#info-button",c),t("body").on("click.infobutton.detail","#info-button-sidekick-detailView",l),t("body").on("click.infobutton.add","#info-button-sidekick-add",d),i}function l(e){var t=a();return m.baseClickFunc&&m.baseClickFunc(m.that,m.event),clearInterval(f.timer),t.hide(),!1}function d(e){var t=a(),i=m.that.AppletID;return _.isUndefined(i)&&(i=m.that.appletConfig.id),n.getChannel(i).trigger("addView"),clearInterval(f.timer),t.hide(),!1}function c(t){var n={},i=new e.Model,o=a();return i.set("qualifiedName",o.data("concept-name")),i.set("infobuttonContext",o.data("concept-context")),n.model=i,n.patient=ADK.ResourceService.patientRecordService.getCurrentPatient(),h.callProvider(n),clearInterval(f.timer),o.hide(),!1}function u(){if(g&&f.timer&&g.offset()&&(g.offset().top!=f.top||g.offset().left!=f.left)){var e=a();clearInterval(f.timer),e.hide()}}var h={};h.callProvider=function(e){var t=ADK.UserService.getUserSession(),n=t.get("infobutton-site"),i=o(e),a=r(i),s=n+a;window.open(s,"infoButtonUniqueWindow","width=970, height=670, status=no, location=no, toolbar=no, scrollbars=no, resizable=yes")};var p='<div class="appletToolbar" id="info-button-template"><div class="toolbarPopover"><div class="btn-toolbar" role="toolbar" ><div class="btn-group" role="group"><a tooltip-data-key="toolbar_infobutton" class="btn" id="info-button"><i class="fa fa-info"></i></a><a tooltip-data-key="toolbar_detailview" class="btn" id="info-button-sidekick-detailView"><i class="fa fa-file-text-o"></i></a><a tooltip-data-key="toolbar_addimmunizations" class="btn" id="info-button-sidekick-add"><i class="fa fa-plus"></i></a></div></div></div></div>',g=null,f={timer:null,top:-1,left:-1};h.showInfoButton=function(e){clearInterval(f.timer);var n=t(e.target);if(n.attr("data-infobutton")||(n=n.closest("[data-infobutton]")),0===n.length)return void m.baseClickFunc(m.that,m.event);var i=n.data("model"),o=null;i&&(o=i.get("infobuttonContext"));var r=s();r.data("concept-name",n.data("infobutton")),o||(o="PROBLISTREV"),r.data("concept-context",o),g=n;var a={position:"absolute",left:n.offset().left,top:n.offset().top,zIndex:1e3};0!==n.parents("#mainModalDialog").length&&(a.zIndex=5e3);var l=m.that.AppletID;return _.isUndefined(l)&&!_.isUndefined(m.that.appletConfig)&&(l=m.that.appletConfig.id),_.isUndefined(l)||!_.isUndefined(l)&&"immunizations"!=l.toLowerCase()||!ADK.PatientRecordService.isPatientInPrimaryVista()||!ADK.UserService.hasPermission("add-patient-immunization")?r.find("#info-button-sidekick-add").hide():r.find("#info-button-sidekick-add").show(),r.show().css(a),f.top=g.offset().top,f.left=g.offset().left,f.timer=setInterval(u,100),!1},h.hideInfoButton=function(e){var t=a();if(!t.is(":visible")||!g||t.find(e.target).length)return!0;var n=g;return!n.offset()||n.offset().top&&n.height()&&n.offset().left&&n.width()?n.offset()&&e.clientY>n.offset().top&&e.clientY<n.offset().top+n.height()&&e.clientX>n.offset().left&&e.clientX<n.offset().left+n.width()?!0:(clearInterval(f.timer),t.hide(),!0):!0};var m={that:null,event:null,baseClickFunc:null};return h.onClickFunc=function(e,t,i){t.stopImmediatePropagation(),m.that=e,m.event=t,m.baseClickFunc=i,h.showInfoButton(t),n.getChannel("gists").trigger("close:gists")},t("body").on("click",h.hideInfoButton),h}),function(e,t){"object"==typeof exports?module.exports=t(require("underscore"),require("backbone")):"function"==typeof define&&define.amd?define("backbone-sorted-collection",["underscore","backbone"],t):e.SortedCollection=t(e._,e.Backbone)}(this,function(e,t){var n=function(n){return{backbone:t,underscore:e}[n]};return(n=function i(e,t,o){function r(s,l){if(!t[s]){if(!e[s]){var d="function"==typeof n&&n;if(!l&&d)return d(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=t[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return r(n?n:t)},c,c.exports,i,e,t,o)}return t[s].exports}for(var a="function"==typeof n&&n,s=0;s<o.length;s++)r(o[s]);return r}({"backbone-sorted-collection":[function(e,t,n){t.exports=e("Focm2+")},{}],"Focm2+":[function(e,t,n){function i(e){return c.isFunction(e)?e:function(t){return t.get(e)}}function o(e){return this._comparator?this._reverse?p(this._collection.toArray(),e,i(this._comparator)):c.sortedIndex(this._collection.toArray(),e,i(this._comparator)):this._superset.indexOf(e)}function r(e){var t=o.call(this,e);this._collection.add(e,{at:t})}function a(e){this.contains(e)&&this._collection.remove(e)}function s(e){this.contains(e)&&this._collection.indexOf(e)!==o.call(this,e)&&(this._collection.remove(e),r.call(this,e))}function l(){if(!this._comparator)return void this._collection.reset(this._superset.toArray());var e=this._superset.sortBy(this._comparator);this._collection.reset(this._reverse?e.reverse():e)}function d(e){this._superset=e,this._reverse=!1,this._comparator=null,this._collection=new u.Collection(e.toArray()),h(this._collection,this),this.listenTo(this._superset,"add",r),this.listenTo(this._superset,"remove",a),this.listenTo(this._superset,"change",s),this.listenTo(this._superset,"reset",l)}var c=e("underscore"),u=e("backbone"),h=e("backbone-collection-proxy"),p=e("./src/reverse-sorted-index.js"),g={setSort:function(e,t){return this._reverse="desc"===t?!0:!1,this._comparator=e,l.call(this),e?this.trigger("sorted:add"):this.trigger("sorted:remove"),this},reverseSort:function(){return this._reverse=!this._reverse,l.call(this),this},removeSort:function(){return this.setSort(),this},superset:function(){return this._superset},destroy:function(){this.stopListening(),this._collection.reset([]),this._superset=this._collection,this.length=0,this.trigger("sorted:destroy")}};c.extend(d.prototype,g,u.Events),t.exports=d},{"./src/reverse-sorted-index.js":4,backbone:!1,"backbone-collection-proxy":3,underscore:!1}],3:[function(e,t,n){function i(e,t){function n(){t.length=e.length}function i(n){var i=o.toArray(arguments),r="change"===n||"change:"===n.slice(0,7);"reset"===n&&(t.models=e.models),o.contains(s,n)?(o.contains(["add","remove","destroy"],n)?i[2]=t:o.contains(["reset","sort"],n)&&(i[1]=t),t.trigger.apply(this,i)):r&&t.contains(i[1])&&t.trigger.apply(this,i)}var l={};return o.each(o.functions(r.Collection.prototype),function(t){o.contains(a,t)||(l[t]=function(){return e[t].apply(e,arguments)})}),o.extend(t,r.Events,l),t.listenTo(e,"all",n),t.listenTo(e,"all",i),t.models=e.models,n(),t}var o=e("underscore"),r=e("backbone"),a=["_onModelEvent","_prepareModel","_removeReference","_reset","add","initialize","sync","remove","reset","set","push","pop","unshift","shift","sort","parse","fetch","create","model","off","on","listenTo","listenToOnce","bind","trigger","once","stopListening"],s=["add","remove","reset","sort","destroy","sync","request","error"];t.exports=i},{backbone:!1,underscore:!1}],4:[function(e,t,n){function i(e){return r.isFunction(e)?e:function(t){return t[e]}}function o(e,t,n,o){n=null==n?r.identity:i(n);for(var a=n.call(o,t),s=0,l=e.length;l>s;){var d=s+l>>>1;n.call(o,e[d])<a?l=d:s=d+1}return s}var r=e("underscore");t.exports=o},{underscore:!1}]},{},[]))("backbone-sorted-collection")}),define("_assets/js/tooltipMappings",[],function(){var e={clinicalreminders_priority:"Priority of the reminder, i.e. Chronic, Acute, or None",clinicalreminders_title:"Reminder Name, i.e. Health factors, Immunization(s), Skin test, Patient education, Examination, Screening, Lab test, Radiology procedure, Order, Referral",clinicalreminders_type:"Reminder",clinicalreminders_duedate:"Date that reminder activity is due",clinicalreminders_donedate:"Date that activity was completed",encounters_encounter:"Type of encounter, i.e. Visits, Appointments, Admissions, Procedures",encounters_hxoccurance:"The historical number of occurences of this encounter type",encounters_last:"Time since most recent encounter of each type",encounters_datetime:"Date range of information represented in the timeline",encounters_activity:"Test, order, other action",encounters_type:"Category of information entered",encounters_enteredby:"Person that entered information",encounters_facility:"Abbreviated name of VA facility, or notation of DoD",patient_generated_goal:"Patient Entered Goal",patient_generated_progress:"Current Progress",patient_generated_end:"Goal End Date",patient_generated_next:"Next Due Goal",patient_generated_steps:"Steps Completed",patient_generated_type:"Type",reports_date:"Date of report",reports_type:"Specific report type, i.e. Dietetics, Imaging, Laboratory, Orders, Patient Information",reports_enteredby:"Person that entered report",reports_facility:"Abbreviated name of VA facility at which report was entered, or notation of report at DoD facility",reports_description:"Detailed information related to the Type of report",conditions_problem:"Short description of the problem",conditions_acuity:"Acuity of the Problem, i.e. Acute, Chronic",conditions_last:"Timeframe problem last noted, i.e. 6 months, 3 months, 1 week",conditions_hxoccurance:"The number of occurences of this condition",conditions_description:"Detailed information related to the condition",conditions_standardizeddescription:"Standardized name of condition to support business functions and data sharing",conditions_onsetdate:"Date the condition first began",conditions_lastupdated:"Date information on the condition was last updated",conditions_provider:"Name of the provider treating the condition",conditions_facility:"Abbreviated name of VA facility at which condition was reported, or notation of condition at DoD facility",conditions_onset:"Problem onset",conditions_status:"Status of the problem",medications_medication:"Name of medication",medications_refills:"Number of refills",medications_change:"Type of change since original prescription, i.e. Discontinued, Expired",medications_last:"Timeframe of last change, i.e. 6 months, 3 months, 1 week, 1 day",medications_facility:"Facility at which medication was prescribed",medications_name:"Name of medication",medications_status:"Status of the medication",medications_sig:"Name, dosage and instructions on use of the prescription",medications_fillable:'If VA, then status (discontinued, expired) or fillable info and timeframe shown; medication prescribed outside of VA states "Non VA"',medications_next:"Prescription status (discontinued, expired) or timeframe of next dosage",vitals_type:"Type of vital collected, i.e. Blood Pressure, Pain, Weight",vitals_results:"Data captured in relation to the vital measured",vitals_result:"Data captured in relation to the vital measured",vitals_last:"Timeframe vital was last collected",vitals_dateobserved:"Date and time vital was collected",vitals_dateentered:"Date and time vital was entered into the system",vitals_qualifiers:"A word that further defines the vital sign",vitals_facility:"Facility at which vital was collected",immunizations_vaccinename:"Short name of the vaccine",immunizations_reaction:"Reaction reported post vaccine administration",immuninizations_date:"Date vaccine administered",immuninizations_facility:"Abbreviated name of VA facility at which vaccine was administered, or notation of administration at DoD",immuninizations_standardizedname:"Standardized name of vaccine to support business functions and data sharing",immuninizations_series:"Number in series of vaccine to be administered",immuninizations_repeatcontraindicated:'"Yes" if series/repeat administration is to be discontinued, "No" if series/repeat administration can be continued',allergies_allergenName:"Name of vaccine, medication, material, food, agent, etc. that causes an allergic reaction",allergies_reaction:"Reaction to allergen reported, i.e. nausea, vomiting, rash, anxiety, dry mouth",allergies_severity:"Mild, Moderate, or Severe level of reaction",allergies_standardizedAllergen:"Standardized name of allergen to support business functions and data sharing",allergies_drugClass:"VA Drug Class File's product description",allergies_enteredBy:"Person that entered allergen",allergies_facility:"Facility at which allergen was reported",labresults_description:"Name of lab test",labresults_results:"Data captured in relation to the lab tested",labresults_last:"Timeframe lab was last completed, i.e. 6 months, 3 months, 1 week, 1 day",labresults_date:"Date and time lab test completed",labresults_labtest:"Name of lab test",labresults_flag:"Notification if the reported result is outside of the Reference Range",labresults_result:"Link to the lab report which details the results of the test",labresults_unit:"Unit of measure",labresults_refrange:"The reference range of values for a physiologic measurement in healthy persons",labrestuls_facility:"Facility at which lab was ordered",visits_date:"Date and time of patient appointment/visit at location",visits_description:"Overarching description of appointment/visit which primarily focuses on VA or DoD identifiers",visits_location:"Location within hospital or notation of clinic at which appointment/visit occurred",visits_facility:"Abbreviated name of VA facility at which appointment/visit occurred, or notation of occurrence at DoD",visits_type:"Category of appointment/visit, i.e. Hospitalization, Compensation & Pension, General Medicine, Outpatient",visits_provider:"Name of provider",visits_reason:"Cause or explanation for patient's appointment/visit",chs_date:"Date associated with Health Summary",chs_authoringinstitution:"Institution which collected data within the Health Summary, or Company which stores and distributes the patient's health data",chs_description:"Type of Health Summary, i.e. Continuity of Care document, Summary of Episode note",orders_orderdate:"Date the order is placed",orders_status:"Identifies the specific status of the order out of the multiple options",orders_order:"Description of order",orders_facility:"Abbreviated name of VA facility at which order is entered, or notation of order entered at DoD",orders_providername:"Name of provider",orders_startdate:"Date the order is to be started",orders_stopdate:"Date the order is to be stopped",orders_type:"Overarching category of order, i.e. Dietetics, Laboratory, Medication",timeline_datetime:"Date range of information represented in the timeline",timeline_activity:"Test, order, other action",timeline_type:"Category of information entered",timeline_enteredby:"Person that entered information",timeline_facility:"Abbreviated name of VA facility, or notation of DoD",documents_date:"Date associated with document",documents_description:"Detailed title for document type",documents_type:"Category of document listed",documents_enteredby:"Person that entered information",documents_facility:"Abbreviated name of VA facility, or notation of DoD",postings:"Lettered boxes highlighted in yellow are active, whereas lettered boxes that are grayed out are inactive",timeline_dateinterval:"Global date timeline: Set a date range to allow for easier investigation of records",timeline_graph:"Global timeline graph: Shows patient's historical events, represented as blue bars for outpatient data and green bars for inpatient data; the red line indicates the current date",toolbar_infobutton:"Infobutton",toolbar_detailview:"Details form",toolbar_deletestackedgraph:"Delete stacked graph",toolbar_tilesortbutton:"Tile sort",toolbar_submenu:"Submenu",toolbar_quicklook:"Quicklook",toolbar_addorders:"Add orders",toolbar_addimmunizations:"Add immunization",patientSync_mySite:"Green bullet indicates that MySite (the site you are operating from) health data is displayed",patientSync_allVA:"Green bullet indicates that All VA (VA data nationally available) health data is displayed",patientSync_DoD:"Green bullet indicates that DoD (data shared by the Department of Defense) health data is displayed",patientSync_community:"Green bullet indicates that Community (data shared by private vendors) health data is displayed",sign_outpatientMeds_relatedTo_SC:"Service Connected Condition (SC): Veterans are eligible for medical care for treatment of service-connected conditions without incurring copayment charges or payments against their insurance.\n\nClick here to toggle all enabled options in this column to Yes or No.",sign_outpatientMeds_relatedTo_CV:"Combat Veteran (CV): To receive CV exemption the veteran must have served in combat operations after the Gulf War or in combat against a hostile force after November 11, 1998. In addition, the condition for which the veteran is treated must be related to that combat, the veteran must have registered as a combat veteran, and be within two years of separation from active military service. Finally, the condition must not be already considered to be service related or that exemption should apply.\n\nClick here to toggle all enabled options in this column to Yes or No.",sign_outpatientMeds_relatedTo_AO:"Agent Orange (AO): herbicide used in Vietnam. Veterans who were present within the borders of the republic of Vietnam from January 1962 through May 1975 are presumed to have been exposed to Agent Orange and are eligible to receive care of conditions possibly for AO exposure without incurring copayment charges or claims against their insurance. Some conditions associated with AO exposure: diabetes (type 2), chloracne, porphyria cutanea tarda, peripheral neuropathy and some cancers.\n\nClick here to toggle all enabled options in this column to Yes or No.",sign_outpatientMeds_relatedTo_MST:"Military Sexual Trauma (MST): Veterans who experienced sexual trauma while serving on active duty in the military are eligible to receive treatment and counseling services for the sexual trauma without incurring copayment charges or claims against their insurance.\n\nClick here to toggle all enabled options in this column to Yes or No.",sign_outpatientMeds_relatedTo_HNC:"Head and Neck Cancer (HNC): Veterans with cancer of the head or neck and a history of receipt of Nasopharyngeal (NP) radium therapy while in the military are eligible to receive treatment for the head or neck cancer without incurring copayment charges or claims against their insurance.\n\nClick here to toggle all enabled options in this column to Yes or No.",sign_outpatientMeds_relatedTo_IR:"Ionizing Radiation (IR): Veterans exposed to ionizing radiation (IR) as a POW or while on active duty at Hiroshima and/or Nagasaki, Japan, or who served at a nuclear device atmospheric testing site are eligible to receive care of any malignant condition and certain other non-malignant conditions for IR exposure without incurring copayment charges or claims against their insurance.\n\nClick here to toggle all enabled options in this column to Yes or No.",sign_outpatientMeds_relatedTo_SHD:"Shipboard Hazard anbd Defense (SHD): Veterans with conditions recognized by VA as associated with Project 112/SHAD, shipboard and land-based biological and chemical testing conducted by the United States (U.S.) military between 1962 and 1973 are eligible for enrollment in priority group 6, unless eligible for enrollment in a higher priority. In addition, veterans receive care at no charge for care and medications provided for treatment of conditions related to exposure.\n\nClick here to toggle all enabled options in this column to Yes or No.",sign_outpatientMeds_relatedTo_SWAC:"Southwest Asia Conditions (SWAC): Veterans who served in Southwest Asia during the Gulf War are eligible to receive treatment for conditions relating to this service, including exposure to depleted uranium, pesticides, anti-nerve gas pill, pyridostigmine bromide, infectious diseases, chemical and biological warfare agents, etc. without incurring copayment charges or claims against their insurance.\n\nClick here to toggle all enabled options in this column to Yes or No.",sign_outpatientMeds_relatedTo:"SC - Service Connected Condition; CV - Combat Veteran; AO - Agent Orange Exposure; IR - Ionizing Radiation Exposure; SWAC - Southwest Asia Conditions; SHD - Shipboard Hazard and Defense; MST - Military Sexual Trauma; HNC - Head and/or Neck Cancer;"};return e}),define("main/adk_utils/tooltipUtils",["backbone","jquery","_assets/js/tooltipMappings","api/Messaging"],function(e,t,n,i){"use strict";var o={};return o.initTooltip=function(e){var i=t(e.target);if(!i.data("bs.tooltip")){if(!i.attr("tooltip-data-key")&&(i=i.closest("[tooltip-data-key]"),!i))return!0;var o=i.attr("tooltip-data-key");if(!o)return!0;var r=n[o];if(void 0===r&&(r=i.attr("tooltip-data-key"),void 0===r))return!0;var a=i.attr("tooltip-data-placement");return a?i.removeAttr("tooltip-data-placement"):a="auto top",i.removeAttr("tooltip-data-key"),i.attr({"data-toggle":"tooltip","data-placement":a,"data-original-title":r,"data-container":"body"}).tooltip({delay:{show:500},trigger:"hover focus"}).mouseover(),!0}},t(document).on("mouseenter focus","[tooltip-data-key]",o.initTooltip),i.on("screen:navigate",function(){t("[data-toggle=tooltip]").tooltip("destroy")}),o}),define("main/Utils",["backbone","main/adk_utils/dateUtils","main/adk_utils/resizeUtils","main/adk_utils/collectionUtils","main/adk_utils/appletUtils","main/adk_utils/helpUtils","main/adk_utils/pdfUtils","main/adk_utils/infoButtonUtils","main/Session","backbone-sorted-collection","moment","underscore","main/adk_utils/tooltipUtils"],function(e,t,n,i,o,r,a,s,l,d,c,u,h){var p={};return p.dateUtils=t,p.resize=n,p.collection=i,p.appletUtils=o,p.helpUtils=r,p.pdfUtils=a,p.infoButtonUtils=s,p.tooltipUtils=h,p.formatDate=function(e,t,n){return t?n||(n="YYYYMMDDHHmmssSSS"):(t="MM/DD/YYYY",n="YYYYMMDDHHmmssSSS"),e?c(e,n).format(t):""},p.applyMaskingForSpecialCharacters=function(e){e.inputmask("Regex",{regex:"^[a-zA-Z0-9\\s]*$"})},p.getTimeSince=function(e,t){var n=!1,i=c(e,"YYYYMMDDHHmmssSSS"),o=i.isValid(),r=c();i.isAfter(r)&&(r=c(e,"YYYYMMDDHHmmssSSS"),i=c(),n=!0);var a=c.duration(r.diff(i)),s=parseFloat(a.asYears()),l=parseFloat(a.asDays()),d=parseFloat(a.asMonths()),u=parseFloat(a.asHours()),h=parseFloat(a.asMinutes()),p="y",g="m",f="d",m="h",v="'",b="",y="",w=1,A="h";h>0&&60>h?(b="< "+w+"h",void 0!==t&&t===!0&&(w=Math.round(h),A=v,b=w+v,y=w.toString()+" Minute")):d>=24?(w=Math.round(s),A=p,b=w+p,y=w.toString()+" Year"):24>d&&l>60?(w=Math.round(d),A=g,b=w+g,y=w.toString()+" Month"):l>=2&&60>=l?(w=Math.round(l),A=f,b=w+f,y=w.toString()+" Day"):2>l&&(w=Math.round(u),A=m,b=w+m,y=w.toString()+" Hour"),w>=2&&(y+="s"),n&&(b="");var N=!1;return 6>=d&&(N=!0),o||(b="None"),{timeSince:b,count:w,timeUnits:A,timeSinceDescription:y,isRecent:N,isValid:o}},p.extract=function(e,t,n){if(t)for(var i in n){var o=n[i];t[o]&&(e[i]=t[o])}return e},p.sortCollection=function(e,t,n,i){if(n){var o=!1;if(e.at(0).attributes[t])o=!0;else if(e.at(e.length-1).attributes[t])o=!0;else for(var r=1,a=e.length;a-1>r;r++)if(e.at(r).attributes[t]){o=!0;break}o&&(e.comparator=function(e,o){var r;r=i?1:-1;var a=e.get(t),s=o.get(t);return"alphanumerical"===n||"numeric"===n||"date"===n||"alphabetical"===n?a===s?0:s>a||void 0===s?-1*r:1*r:void 0},e.reset(e.originalModels),e.sort())}},p.CollectionTools={sort:function(t,n,i,o,r){void 0===t.unsortedModels&&(t.unsortedModels=t.models);var a=new d(t),s="asc";void 0!==i&&(s=this.getSortOrderFromAlias(i));var l=o||"alphabetical";switch(l.toLowerCase()){case"alphabetical":a.setSort(function(e){return e.get(n).toLowerCase()},s);break;case"numeric":a.setSort(function(e){return parseFloat(e.get(n))},s);break;case"int":a.setSort(function(e){return parseInt(e.get(n))},s);break;case"date":a.setSort(function(e){return c(e.get(n),"YYYYMMDDHHmmssSSS")},s);break;case"boolean":a.setSort(function(e){var t=function(e){return e===!0||"true"===e?1:0};return t(e.get(n))},s);break;case"custom":var u=e.Collection.extend({comparator:function(e,t){return"desc"===s?-r(e,t):r(e,t)}}),h=new u(t.models);a._collection.models=h.models;break;default:a.setSort(function(e){return e.get(n).toLowerCase()},s)}t.reset(a._collection.models),a.removeSort()},resetSort:function(e){void 0!==e.unsortedModels&&(e.reset(e.unsortedModels),e.unsortedModels=void 0)},getSortOrderFromAlias:function(e){switch(e.toLowerCase()){case"a":return"asc";case"asc":return"asc";case"ascending":return"asc";case"up":return"asc";case"d":return"desc";case"desc":return"desc";case"descending":return"desc";case"down":return"desc";default:return"asc"}}},p.resetCollection=function(t){t instanceof e.PageableCollection?t.fullCollection.reset(t.originalModels):t.reset(t.originalModels)},p.setCollection=function(t,n){t instanceof e.PageableCollection?t.fullCollection.reset(t.fullCollection.filter(n)):t.reset(t.filter(n))},p.filterCollectionByDays=function(e,t,n){p.resetCollection(e),filterFunction=function(e){var i=new Date;if(i.setDate(i.getDate()-t),"undefined"!=typeof e.get(n)){var o=e.get(n).substring(0,4),r=e.get(n).substring(4,6),a=e.get(n).substring(6,8),s=new Date(o,r-1,a);return"Invalid Date"!=s?s>i:!1}return!1},p.setCollection(e,filterFunction)},p.filterCollectionByDateRange=function(e,t,n,i){p.resetCollection(e),filterFunction=function(e){if("undefined"!=typeof e.get(i)){var o=e.get(i).substring(0,4),r=e.get(i).substring(4,6),a=e.get(i).substring(6,8),s=new Date(o,r-1,a);return"Invalid Date"!=s?s>=t&&n>=s:!1}return!1},p.setCollection(e,filterFunction)},p.filterCollectionBeginsWith=function(e,t,n){p.resetCollection(e),filterFunction=function(e){if("undefined"!=typeof e.get(t)){var i=e.get(t);return 0===i.indexOf(n)}return!1},p.setCollection(e,filterFunction)},p.filterCollectionSubstring=function(e,t,n){p.resetCollection(e),filterFunction=function(e){if("undefined"!=typeof e.get(t)){var i=e.get(t);return i.indexOf(n)>-1}return!1},p.setCollection(e,filterFunction)},p.filterCollectionNoSubstring=function(e,t,n){p.resetCollection(e),filterFunction=function(e){if("undefined"!=typeof e.get(t)){var i=e.get(t);return i.indexOf(n)<=-1}return!1},p.setCollection(e,filterFunction)},p.filterCollectionByValue=function(e,t,n){p.resetCollection(e),filterFunction=function(e){if("undefined"!=typeof e.get(t)){var i=e.get(t);return i==n}return!1},p.setCollection(e,filterFunction)},p.chartDataBinning=function(e,t){var n=t.debug||!1;if(u.isUndefined(e))return console.log("ADK.util.chartDataBinning() - graphData input error"),null;if(u.isUndefined(t))return n&&console.log("ADK.util.chartDataBinning() - config input error"),null;var i,o=t.barWidth||5,r=t.barPadding||2,a=t.chartWidth;i=u.isFunction(t.normal_function)?t.normal_function:function(e){return e};var s=e.series||[],l=a/(o+r),d=c(e.oldestDate),h=c(e.newestDate),p=h.diff(d,"days"),g=Math.round(p/l);1>g&&(g=1),n&&(console.log("Chart width: "+a+"px"),console.log("Number of chart columns: "+Math.round(l)),console.log("First event: "+c(d).format("YYYY-MM-DD")),console.log("Last event: "+c(h).format("YYYY-MM-DD")),console.log("Days range: "+p),console.log("Days per bean: "+g));var f,m=[],v=[],b=0,y=0,w=0,A=g,N=0,_=0,C=p;2>=p&&C++;for(var x=0;C>x;x++)v.push([x,0]);if(e.isDuration){n&&console.log("Duration binning");for(var S=0;S<s.length;S++){b=Math.round(c.duration(s[S][0].diff(d)).asDays()),y=Math.round(c.duration(s[S][1].diff(d)).asDays()),y===b&&y++,y>v.length&&(b--,y--),n&&(console.log("index Start --->>"+b),console.log(s[S][0]),console.log("index Stop --->>"+y),console.log(s[S][1]));for(var T=b;y>T;T++)w=v[T][1]+1,v[T][1]=w}for(var k=0;k<v.length;k++)A>=k?N+=v[k][1]:(0!==N&&(f=c.utc(c(d).add(Math.round(g*_+g/2),"days")).valueOf(),m.push([f,i(N)]),N=0),A+=g,_++)}else{n&&console.log("Normal binning");for(var $=0,D=Math.round(c.duration(c().diff(d)).asDays()),M=0;M<s.length;M++)$=Math.round(c.duration(c(s[M][0]).diff(d)).asDays()),p>=$&&$>=0?(w=v[$][1]+s[M][1],v[$][1]=w,n&&(console.log("Day index--->>"+v[$][0]),console.log("Value--->>"+v[$][1]))):n&&console.log("Error ---->>event is out of chart's time range");for(var E=0,P=0,I=0,O=!1,R=!1,F=0;F<v.length;F++)N+=v[F][1],A>=F?(F===D&&(n&&console.log("Splitted Bin----->>!!!"),P=A-F,E=g-P,0!==N&&(f=c.utc(c(d).add(Math.round(g*_+E/2),"days")).valueOf(),m.push([f,i(N)]),n&&console.log("Left side of splitted Date->>"+c(f).format("YYYY-MM-DD")+" value->"+N),N=0),O=!0),R&&0!==N&&(f=c.utc(c(d).add(Math.round(g*_+I/2),"days")).valueOf(),m.push([f,i(N)]),n&&console.log("Last bin Date->>"+c(f).format("YYYY-MM-DD")+" value->"+N))):(O?(0!==N&&(f=c.utc(c(d).add(Math.round(g*_+E+P/2),"days")).valueOf(),m.push([f,i(N)]),n&&console.log("Right side of sptitted Date->>"+c(f).format("YYYY-MM-DD")+" value->"+N),N=0),O=!1):0!==N&&(f=c.utc(c(d).add(Math.round(g*_+g/2),"days")).valueOf(),m.push([f,i(N)]),n&&console.log("Normal bin Date->>"+c(f).format("YYYY-MM-DD")+" value->"+N),N=0),A+=g,A>v.length&&(I=g-(A-v.length),A=v.length,R=!0),_++)}return n&&console.log(m),m},p.isNotUndefinedAndNotNull=function(e){return!(u.isUndefined(e)||u.isNull(e))},p}),define("api/Navigation",["backbone","jquery","api/Messaging"],function(e,t,n){var i={navigate:function(t,i,o){"#"===t.charAt(0)&&(t=t.slice(1)),n.trigger("screen:navigate");var r=e.Wreqr.radio.channel("global");r.commands.execute("screen:navigate",t,i,o)},displayScreen:function(t){"#"===t.charAt(0)&&(t=t.slice(1));var n=e.Wreqr.radio.channel("global");n.commands.execute("screen:display",t)}};return i}),define("api/Enrichment",[],function(){"use strict";var e={getFacility:_.memoize(function(e,t){var n=ADK.Messaging.request("facilityMonikers"),i=n.findWhere({facilityCode:e});return i},function(e,t){return(e||"")+(t||"")}),addFacilityMoniker:function(e){var t=this;e.facilityCode?t.setFacilityMoniker(e):JSON.stringify(e).indexOf('"facilityCode":')>=0&&_.each(e,function(e,n){
return _.isObject(e)?t.addFacilityMoniker(e):void 0})},setFacilityMoniker:function(e){var t=this.getFacility(e.facilityCode,e.facilityName);t?(e.facilityMoniker=t.get("facilityMoniker"),e.facilityDisplay=t.get("facilityName")):(e.facilityMoniker=e.facilityCode,e.facilityDisplay=e.facilityName)}};return e}),function(e){define("backgrid",["backbone","jquery","underscore"],function(){return function(){return!function(e){"object"==typeof exports?module.exports=e(module.exports,require("underscore"),require("backbone")):e(this,this._,this.Backbone)}(function(e,t,n){"use strict";function i(e,t,n){var i=t-(e+"").length;i=0>i?0:i;for(var o="",r=0;i>r;r++)o+=n;return o+e}var o="	\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff";if(!String.prototype.trim||o.trim()){o="["+o+"]";var r=new RegExp("^"+o+o+"*"),a=new RegExp(o+o+"*$");String.prototype.trim=function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(r,"").replace(a,"")}}var s=n.$,l=e.Backgrid={Extension:{},resolveNameToClass:function(e,n){if(t.isString(e)){var i=t.map(e.split("-"),function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join("")+n,o=l[i]||l.Extension[i];if(t.isUndefined(o))throw new ReferenceError("Class '"+i+"' not found");return o}return e},callByNeed:function(){var e=arguments[0];if(!t.isFunction(e))return e;var n=arguments[1],i=[].slice.call(arguments,2);return e.apply(n,i+""?i:[])}};t.extend(l,n.Events);var d=l.Command=function(e){t.extend(this,{altKey:!!e.altKey,"char":e["char"],charCode:e.charCode,ctrlKey:!!e.ctrlKey,key:e.key,keyCode:e.keyCode,locale:e.locale,location:e.location,metaKey:!!e.metaKey,repeat:!!e.repeat,shiftKey:!!e.shiftKey,which:e.which})};t.extend(d.prototype,{moveUp:function(){return 38==this.keyCode},moveDown:function(){return 40===this.keyCode},moveLeft:function(){return this.shiftKey&&9===this.keyCode},moveRight:function(){return!this.shiftKey&&9===this.keyCode},save:function(){return 13===this.keyCode},cancel:function(){return 27===this.keyCode},passThru:function(){return!(this.moveUp()||this.moveDown()||this.moveLeft()||this.moveRight()||this.save()||this.cancel())}});var c=l.CellFormatter=function(){};t.extend(c.prototype,{fromRaw:function(e){return e},toRaw:function(e){return e}});var u=l.NumberFormatter=function(e){if(t.extend(this,this.defaults,e||{}),this.decimals<0||this.decimals>20)throw new RangeError("decimals must be between 0 and 20")};u.prototype=new c,t.extend(u.prototype,{defaults:{decimals:2,decimalSeparator:".",orderSeparator:","},HUMANIZED_NUM_RE:/(\d)(?=(?:\d{3})+$)/g,fromRaw:function(e){if(t.isNull(e)||t.isUndefined(e))return"";e=e.toFixed(~~this.decimals);var n=e.split("."),i=n[0],o=n[1]?(this.decimalSeparator||".")+n[1]:"";return i.replace(this.HUMANIZED_NUM_RE,"$1"+this.orderSeparator)+o},toRaw:function(e){if(e=e.trim(),""===e)return null;for(var n="",i=e.split(this.orderSeparator),o=0;o<i.length;o++)n+=i[o];var r=n.split(this.decimalSeparator);n="";for(var o=0;o<r.length;o++)n=n+r[o]+".";"."===n[n.length-1]&&(n=n.slice(0,n.length-1));var a=1*(1*n).toFixed(~~this.decimals);return t.isNumber(a)&&!t.isNaN(a)?a:void 0}});var h=l.PercentFormatter=function(){l.NumberFormatter.apply(this,arguments)};h.prototype=new l.NumberFormatter,t.extend(h.prototype,{defaults:t.extend({},u.prototype.defaults,{multiplier:1,symbol:"%"}),fromRaw:function(e){var t=[].slice.call(arguments,1);return t.unshift(e*this.multiplier),(u.prototype.fromRaw.apply(this,t)||"0")+this.symbol},toRaw:function(e){var n=e.split(this.symbol);if(n&&n[0]&&""===n[1]||null==n[1]){var i=u.prototype.toRaw.call(this,n[0]);return t.isUndefined(i)?i:i/this.multiplier}}});var p=l.DatetimeFormatter=function(e){if(t.extend(this,this.defaults,e||{}),!this.includeDate&&!this.includeTime)throw new Error("Either includeDate or includeTime must be true")};p.prototype=new c,t.extend(p.prototype,{defaults:{includeDate:!0,includeTime:!0,includeMilli:!1},DATE_RE:/^([+\-]?\d{4})-(\d{2})-(\d{2})$/,TIME_RE:/^(\d{2}):(\d{2}):(\d{2})(\.(\d{3}))?$/,ISO_SPLITTER_RE:/T|Z| +/,_convert:function(e,n){if(""===(e+"").trim())return null;var o,r=null;if(t.isNumber(e)){var a=new Date(e);o=i(a.getUTCFullYear(),4,0)+"-"+i(a.getUTCMonth()+1,2,0)+"-"+i(a.getUTCDate(),2,0),r=i(a.getUTCHours(),2,0)+":"+i(a.getUTCMinutes(),2,0)+":"+i(a.getUTCSeconds(),2,0)}else{e=e.trim();var s=e.split(this.ISO_SPLITTER_RE)||[];o=this.DATE_RE.test(s[0])?s[0]:"",r=o&&s[1]?s[1]:this.TIME_RE.test(s[0])?s[0]:""}var l=this.DATE_RE.exec(o)||[],d=this.TIME_RE.exec(r)||[];if(n){if(this.includeDate&&t.isUndefined(l[0]))return;if(this.includeTime&&t.isUndefined(d[0]))return;if(!this.includeDate&&o)return;if(!this.includeTime&&r)return}var a=new Date(Date.UTC(1*l[1]||0,1*l[2]-1||0,1*l[3]||0,1*d[1]||null,1*d[2]||null,1*d[3]||null,1*d[5]||null)),c="";return this.includeDate&&(c=i(a.getUTCFullYear(),4,0)+"-"+i(a.getUTCMonth()+1,2,0)+"-"+i(a.getUTCDate(),2,0)),this.includeTime&&(c=c+(this.includeDate?"T":"")+i(a.getUTCHours(),2,0)+":"+i(a.getUTCMinutes(),2,0)+":"+i(a.getUTCSeconds(),2,0),this.includeMilli&&(c=c+"."+i(a.getUTCMilliseconds(),3,0))),this.includeDate&&this.includeTime&&(c+="Z"),c},fromRaw:function(e){return t.isNull(e)||t.isUndefined(e)?"":this._convert(e)},toRaw:function(e){return this._convert(e,!0)}});var g=l.StringFormatter=function(){};g.prototype=new c,t.extend(g.prototype,{fromRaw:function(e){return t.isUndefined(e)||t.isNull(e)?"":e+""}});var f=l.EmailFormatter=function(){};f.prototype=new c,t.extend(f.prototype,{toRaw:function(e){var n=e.trim().split("@");return 2===n.length&&t.all(n)?e:void 0}});var m=l.SelectFormatter=function(){};m.prototype=new c,t.extend(m.prototype,{fromRaw:function(e){return t.isArray(e)?e:null!=e?[e]:[]}});var v=l.CellEditor=n.View.extend({initialize:function(e){this.formatter=e.formatter,this.column=e.column,this.column instanceof k||(this.column=new k(this.column)),this.listenTo(this.model,"backgrid:editing",this.postRender)},postRender:function(e,t){return(null==t||t.get("name")==this.column.get("name"))&&this.$el.focus(),this}}),b=l.InputCellEditor=v.extend({tagName:"input",attributes:{type:"text"},events:{blur:"saveOrCancel",keydown:"saveOrCancel"},initialize:function(e){b.__super__.initialize.apply(this,arguments),e.placeholder&&this.$el.attr("placeholder",e.placeholder)},render:function(){var e=this.model;return this.$el.val(this.formatter.fromRaw(e.get(this.column.get("name")),e)),this},saveOrCancel:function(e){var n=this.formatter,i=this.model,o=this.column,r=new d(e),a="blur"===e.type;if(r.moveUp()||r.moveDown()||r.moveLeft()||r.moveRight()||r.save()||a){e.preventDefault(),e.stopPropagation();var s=this.$el.val(),l=n.toRaw(s,i);t.isUndefined(l)?i.trigger("backgrid:error",i,o,s):(i.set(o.get("name"),l),i.trigger("backgrid:edited",i,o,r))}else r.cancel()&&(e.stopPropagation(),i.trigger("backgrid:edited",i,o,r))},postRender:function(e,t){if(null==t||t.get("name")==this.column.get("name"))if("right"===this.$el.css("text-align")){var n=this.$el.val();this.$el.focus().val(null).val(n)}else this.$el.focus();return this}}),y=l.Cell=n.View.extend({tagName:"td",formatter:c,editor:b,events:{click:"enterEditMode"},initialize:function(e){this.column=e.column,this.column instanceof k||(this.column=new k(this.column));var n=this.column,i=this.model,o=this.$el,r=l.resolveNameToClass(n.get("formatter")||this.formatter,"Formatter");t.isFunction(r.fromRaw)||t.isFunction(r.toRaw)||(r=new r),this.formatter=r,this.editor=l.resolveNameToClass(this.editor,"CellEditor"),this.listenTo(i,"change:"+n.get("name"),function(){o.hasClass("editor")||this.render()}),this.listenTo(i,"backgrid:error",this.renderError),this.listenTo(n,"change:editable change:sortable change:renderable",function(e){var t=e.changedAttributes();for(var n in t)t.hasOwnProperty(n)&&o.toggleClass(n,t[n])}),l.callByNeed(n.editable(),n,i)&&o.addClass("editable"),l.callByNeed(n.sortable(),n,i)&&o.addClass("sortable"),l.callByNeed(n.renderable(),n,i)&&o.addClass("renderable")},render:function(){this.$el.empty();var e=this.model;return this.$el.text(this.formatter.fromRaw(e.get(this.column.get("name")),e)),this.delegateEvents(),this},enterEditMode:function(){var e=this.model,t=this.column,n=l.callByNeed(t.editable(),t,e);n&&(this.currentEditor=new this.editor({column:this.column,model:this.model,formatter:this.formatter}),e.trigger("backgrid:edit",e,t,this,this.currentEditor),this.undelegateEvents(),this.$el.empty(),this.$el.append(this.currentEditor.$el),this.currentEditor.render(),this.$el.addClass("editor"),e.trigger("backgrid:editing",e,t,this,this.currentEditor))},renderError:function(e,t){(null==t||t.get("name")==this.column.get("name"))&&this.$el.addClass("error")},exitEditMode:function(){this.$el.removeClass("error"),this.currentEditor.remove(),this.stopListening(this.currentEditor),delete this.currentEditor,this.$el.removeClass("editor"),this.render()},remove:function(){return this.currentEditor&&(this.currentEditor.remove.apply(this.currentEditor,arguments),delete this.currentEditor),y.__super__.remove.apply(this,arguments)}}),w=l.StringCell=y.extend({className:"string-cell",formatter:g}),A=l.UriCell=y.extend({className:"uri-cell",title:null,target:"_blank",initialize:function(e){A.__super__.initialize.apply(this,arguments),this.title=e.title||this.title,this.target=e.target||this.target},render:function(){this.$el.empty();var e=this.model.get(this.column.get("name")),t=this.formatter.fromRaw(e,this.model);return this.$el.append(s("<a>",{tabIndex:-1,href:e,title:this.title||t,target:this.target}).text(t)),this.delegateEvents(),this}}),N=(l.EmailCell=w.extend({className:"email-cell",formatter:f,render:function(){this.$el.empty();var e=this.model,t=this.formatter.fromRaw(e.get(this.column.get("name")),e);return this.$el.append(s("<a>",{tabIndex:-1,href:"mailto:"+t,title:t}).text(t)),this.delegateEvents(),this}}),l.NumberCell=y.extend({className:"number-cell",decimals:u.prototype.defaults.decimals,decimalSeparator:u.prototype.defaults.decimalSeparator,orderSeparator:u.prototype.defaults.orderSeparator,formatter:u,initialize:function(){N.__super__.initialize.apply(this,arguments);var e=this.formatter;e.decimals=this.decimals,e.decimalSeparator=this.decimalSeparator,e.orderSeparator=this.orderSeparator}})),_=(l.IntegerCell=N.extend({className:"integer-cell",decimals:0}),l.PercentCell=N.extend({className:"percent-cell",multiplier:h.prototype.defaults.multiplier,symbol:h.prototype.defaults.symbol,formatter:h,initialize:function(){_.__super__.initialize.apply(this,arguments);var e=this.formatter;e.multiplier=this.multiplier,e.symbol=this.symbol}})),C=l.DatetimeCell=y.extend({className:"datetime-cell",includeDate:p.prototype.defaults.includeDate,includeTime:p.prototype.defaults.includeTime,includeMilli:p.prototype.defaults.includeMilli,formatter:p,initialize:function(){C.__super__.initialize.apply(this,arguments);var e=this.formatter;e.includeDate=this.includeDate,e.includeTime=this.includeTime,e.includeMilli=this.includeMilli;var n=this.includeDate?"YYYY-MM-DD":"";n+=this.includeDate&&this.includeTime?"T":"",n+=this.includeTime?"HH:mm:ss":"",n+=this.includeTime&&this.includeMilli?".SSS":"",this.editor=this.editor.extend({attributes:t.extend({},this.editor.prototype.attributes,this.editor.attributes,{placeholder:n})})}}),x=(l.DateCell=C.extend({className:"date-cell",includeTime:!1}),l.TimeCell=C.extend({className:"time-cell",includeDate:!1}),l.BooleanCellEditor=v.extend({tagName:"input",attributes:{tabIndex:-1,type:"checkbox"},events:{mousedown:function(){this.mouseDown=!0},blur:"enterOrExitEditMode",mouseup:function(){this.mouseDown=!1},change:"saveOrCancel",keydown:"saveOrCancel"},render:function(){var e=this.model,t=this.formatter.fromRaw(e.get(this.column.get("name")),e);return this.$el.prop("checked",t),this},enterOrExitEditMode:function(e){if(!this.mouseDown){var t=this.model;t.trigger("backgrid:edited",t,this.column,new d(e))}},saveOrCancel:function(e){var t=this.model,n=this.column,i=this.formatter,o=new d(e);if(o.passThru()&&"change"!=e.type)return!0;o.cancel()&&(e.stopPropagation(),t.trigger("backgrid:edited",t,n,o));var r=this.$el;if(o.save()||o.moveLeft()||o.moveRight()||o.moveUp()||o.moveDown()){e.preventDefault(),e.stopPropagation();var a=i.toRaw(r.prop("checked"),t);t.set(n.get("name"),a),t.trigger("backgrid:edited",t,n,o)}else if("change"==e.type){var a=i.toRaw(r.prop("checked"),t);t.set(n.get("name"),a),r.focus()}}})),S=(l.BooleanCell=y.extend({className:"boolean-cell",editor:x,events:{click:"enterEditMode"},render:function(){this.$el.empty();var e=this.model,t=this.column,n=l.callByNeed(t.editable(),t,e);return this.$el.append(s("<input>",{tabIndex:-1,type:"checkbox",checked:this.formatter.fromRaw(e.get(t.get("name")),e),disabled:!n})),this.delegateEvents(),this}}),l.SelectCellEditor=v.extend({tagName:"select",events:{change:"save",blur:"close",keydown:"close"},template:t.template('<option value="<%- value %>" <%= selected ? \'selected="selected"\' : "" %>><%- text %></option>',null,{variable:null}),setOptionValues:function(e){this.optionValues=e,this.optionValues=t.result(this,"optionValues")},setMultiple:function(e){this.multiple=e,this.$el.prop("multiple",e)},_renderOptions:function(e,n){for(var i="",o=0;o<e.length;o++)i+=this.template({text:e[o][0],value:e[o][1],selected:t.indexOf(n,e[o][1])>-1});return i},render:function(){this.$el.empty();var e=t.result(this,"optionValues"),n=this.model,i=this.formatter.fromRaw(n.get(this.column.get("name")),n);if(!t.isArray(e))throw new TypeError("optionValues must be an array");for(var o=null,r=null,o=null,a=null,l=null,d=0;d<e.length;d++){var o=e[d];if(t.isArray(o))r=o[0],o=o[1],this.$el.append(this.template({text:r,value:o,selected:t.indexOf(i,o)>-1}));else{if(!t.isObject(o))throw new TypeError("optionValues elements must be a name-value pair or an object hash of { name: 'optgroup label', value: [option name-value pairs] }");a=o.name,l=s("<optgroup></optgroup>",{label:a}),l.append(this._renderOptions.call(this,o.values,i)),this.$el.append(l)}}return this.delegateEvents(),this},save:function(){var e=this.model,t=this.column;e.set(t.get("name"),this.formatter.toRaw(this.$el.val(),e))},close:function(e){var t=this.model,n=this.column,i=new d(e);i.cancel()?(e.stopPropagation(),t.trigger("backgrid:edited",t,n,new d(e))):(i.save()||i.moveLeft()||i.moveRight()||i.moveUp()||i.moveDown()||"blur"==e.type)&&(e.preventDefault(),e.stopPropagation(),this.save(e),t.trigger("backgrid:edited",t,n,new d(e)))}})),T=l.SelectCell=y.extend({className:"select-cell",editor:S,multiple:!1,formatter:m,optionValues:void 0,delimiter:", ",initialize:function(){T.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"backgrid:edit",function(e,t,n,i){t.get("name")==this.column.get("name")&&(i.setOptionValues(this.optionValues),i.setMultiple(this.multiple))})},render:function(){this.$el.empty();var e=t.result(this,"optionValues"),n=this.model,i=this.formatter.fromRaw(n.get(this.column.get("name")),n),o=[];try{if(!t.isArray(e)||t.isEmpty(e))throw new TypeError;for(var r=0;r<i.length;r++)for(var a=i[r],s=0;s<e.length;s++){var l=e[s];if(t.isArray(l)){var d=l[0],l=l[1];l==a&&o.push(d)}else{if(!t.isObject(l))throw new TypeError;for(var c=l.values,u=0;u<c.length;u++){var h=c[u];h[1]==a&&o.push(h[0])}}}this.$el.append(o.join(this.delimiter))}catch(p){if(p instanceof TypeError)throw new TypeError("'optionValues' must be of type {Array.<Array>|Array.<{name: string, values: Array.<Array>}>}");throw p}return this.delegateEvents(),this}}),k=l.Column=n.Model.extend({defaults:{name:void 0,label:void 0,sortable:!0,editable:!0,renderable:!0,formatter:void 0,sortType:"cycle",sortValue:void 0,direction:null,cell:void 0,headerCell:void 0},initialize:function(){this.has("label")||this.set({label:this.get("name")},{silent:!0});var e=l.resolveNameToClass(this.get("headerCell"),"HeaderCell"),t=l.resolveNameToClass(this.get("cell"),"Cell");this.set({cell:t,headerCell:e},{silent:!0})},sortValue:function(){var e=this.get("sortValue");return t.isString(e)?this[e]:t.isFunction(e)?e:function(e,t){return e.get(t)}}});t.each(["sortable","renderable","editable"],function(e){k.prototype[e]=function(){var n=this.get(e);return t.isString(n)?this[n]:t.isFunction(n)?n:!!n}});var $=l.Columns=n.Collection.extend({model:k}),D=l.Row=n.View.extend({tagName:"tr",initialize:function(e){var t=this.columns=e.columns;t instanceof n.Collection||(t=this.columns=new $(t));for(var i=this.cells=[],o=0;o<t.length;o++)i.push(this.makeCell(t.at(o),e));this.listenTo(t,"add",function(t,n){var o=n.indexOf(t),r=this.makeCell(t,e);i.splice(o,0,r);var a=this.$el;0===o?a.prepend(r.render().$el):o===n.length-1?a.append(r.render().$el):a.children().eq(o).before(r.render().$el)}),this.listenTo(t,"remove",function(e,t,n){i[n.index].remove(),i.splice(n.index,1)})},makeCell:function(e){return new(e.get("cell"))({column:e,model:this.model})},render:function(){this.$el.empty();for(var e=document.createDocumentFragment(),t=0;t<this.cells.length;t++)e.appendChild(this.cells[t].render().el);return this.el.appendChild(e),this.delegateEvents(),this},remove:function(){for(var e=0;e<this.cells.length;e++){var t=this.cells[e];t.remove.apply(t,arguments)}return n.View.prototype.remove.apply(this,arguments)}}),M=l.EmptyRow=n.View.extend({tagName:"tr",emptyText:null,initialize:function(e){this.emptyText=e.emptyText,this.columns=e.columns},render:function(){this.$el.empty();var e=document.createElement("td");return e.setAttribute("colspan",this.columns.length),e.appendChild(document.createTextNode(t.result(this,"emptyText"))),this.el.className="empty",this.el.appendChild(e),this}}),E=l.HeaderCell=n.View.extend({tagName:"th",events:{"click a":"onClick"},initialize:function(e){this.column=e.column,this.column instanceof k||(this.column=new k(this.column));var t=this.column,n=this.collection,i=this.$el;this.listenTo(t,"change:editable change:sortable change:renderable",function(e){var t=e.changedAttributes();for(var n in t)t.hasOwnProperty(n)&&i.toggleClass(n,t[n])}),this.listenTo(t,"change:direction",this.setCellDirection),this.listenTo(t,"change:name change:label",this.render),l.callByNeed(t.editable(),t,n)&&i.addClass("editable"),l.callByNeed(t.sortable(),t,n)&&i.addClass("sortable"),l.callByNeed(t.renderable(),t,n)&&i.addClass("renderable"),this.listenTo(n.fullCollection||n,"sort",this.removeCellDirection)},removeCellDirection:function(){this.$el.removeClass("ascending").removeClass("descending"),this.column.set("direction",null)},setCellDirection:function(e,t){this.$el.removeClass("ascending").removeClass("descending"),e.cid==this.column.cid&&this.$el.addClass(t)},onClick:function(e){function t(e,t){"ascending"===i.get("direction")?o.trigger(r,t,"descending"):"descending"===i.get("direction")?o.trigger(r,t,null):o.trigger(r,t,"ascending")}function n(e,t){"ascending"===i.get("direction")?o.trigger(r,t,"descending"):o.trigger(r,t,"ascending")}e.preventDefault();var i=this.column,o=this.collection,r="backgrid:sort",a=l.callByNeed(i.sortable(),i,this.collection);if(a){var s=i.get("sortType");"toggle"===s?n(this,i):t(this,i)}},render:function(){this.$el.empty();var e,t=this.column,n=l.callByNeed(t.sortable(),t,this.collection);return e=n?s("<a>").text(t.get("label")).append("<b class='sort-caret'></b>"):document.createTextNode(t.get("label")),this.$el.append(e),this.$el.addClass(t.get("name")),this.$el.addClass(t.get("direction")),this.delegateEvents(),this}}),P=(l.HeaderRow=l.Row.extend({requiredOptions:["columns","collection"],initialize:function(){l.Row.prototype.initialize.apply(this,arguments)},makeCell:function(e,t){var n=e.get("headerCell")||t.headerCell||E;return n=new n({column:e,collection:this.collection})}}),l.Header=n.View.extend({tagName:"thead",initialize:function(e){this.columns=e.columns,this.columns instanceof n.Collection||(this.columns=new $(this.columns)),this.row=new l.HeaderRow({columns:this.columns,collection:this.collection})},render:function(){return this.$el.append(this.row.render().$el),this.delegateEvents(),this},remove:function(){return this.row.remove.apply(this.row,arguments),n.View.prototype.remove.apply(this,arguments)}})),I=l.Body=n.View.extend({tagName:"tbody",initialize:function(e){this.columns=e.columns,this.columns instanceof n.Collection||(this.columns=new $(this.columns)),this.row=e.row||D,this.rows=this.collection.map(function(e){var t=new this.row({columns:this.columns,model:e});return t},this),this.emptyText=e.emptyText,this._unshiftEmptyRowMayBe();var t=this.collection;this.listenTo(t,"add",this.insertRow),this.listenTo(t,"remove",this.removeRow),this.listenTo(t,"sort",this.refresh),this.listenTo(t,"reset",this.refresh),this.listenTo(t,"backgrid:sort",this.sort),this.listenTo(t,"backgrid:edited",this.moveToNextCell)},_unshiftEmptyRowMayBe:function(){0===this.rows.length&&null!=this.emptyText&&this.rows.unshift(new M({emptyText:this.emptyText,columns:this.columns}))},insertRow:function(e,t,i){if(this.rows[0]instanceof M&&this.rows.pop().remove(),!(t instanceof n.Collection||i))return void this.collection.add(e,i=t);var o=new this.row({columns:this.columns,model:e}),r=t.indexOf(e);this.rows.splice(r,0,o);var a=this.$el,s=a.children(),l=o.render().$el;return r>=s.length?a.append(l):s.eq(r).before(l),this},removeRow:function(e,n,i){return i?((t.isUndefined(i.render)||i.render)&&this.rows[i.index].remove(),this.rows.splice(i.index,1),this._unshiftEmptyRowMayBe(),this):(this.collection.remove(e,i=n),void this._unshiftEmptyRowMayBe())},refresh:function(){for(var e=0;e<this.rows.length;e++)this.rows[e].remove();return this.rows=this.collection.map(function(e){var t=new this.row({columns:this.columns,model:e});return t},this),this._unshiftEmptyRowMayBe(),this.render(),this.collection.trigger("backgrid:refresh",this),this},render:function(){this.$el.empty();for(var e=document.createDocumentFragment(),t=0;t<this.rows.length;t++){var n=this.rows[t];e.appendChild(n.render().el)}return this.el.appendChild(e),this.delegateEvents(),this},remove:function(){for(var e=0;e<this.rows.length;e++){var t=this.rows[e];t.remove.apply(t,arguments)}return n.View.prototype.remove.apply(this,arguments)},sort:function(e,i){if(!t.contains(["ascending","descending",null],i))throw new RangeError('direction must be one of "ascending", "descending" or `null`');t.isString(e)&&(e=this.columns.findWhere({name:e}));var o,r=this.collection;o="ascending"===i?-1:"descending"===i?1:null;var a=this.makeComparator(e.get("name"),o,o?e.sortValue():function(e){return 1*e.cid.replace("c","")});return n.PageableCollection&&r instanceof n.PageableCollection?(r.setSorting(o&&e.get("name"),o,{sortValue:e.sortValue()}),r.fullCollection?(null==r.fullCollection.comparator&&(r.fullCollection.comparator=a),r.fullCollection.sort(),r.trigger("backgrid:sorted",e,i,r)):r.fetch({reset:!0,success:function(){r.trigger("backgrid:sorted",e,i,r)}})):(r.comparator=a,r.sort(),r.trigger("backgrid:sorted",e,i,r)),e.set("direction",i),this},makeComparator:function(e,t,n){return function(i,o){var r,a=n(i,e),s=n(o,e);return 1===t&&(r=a,a=s,s=r),a===s?0:s>a?-1:1}},moveToNextCell:function(e,t,n){var i,o,r,a,s,d=this.collection.indexOf(e),c=this.columns.indexOf(t);if(this.rows[d].cells[c].exitEditMode(),n.moveUp()||n.moveDown()||n.moveLeft()||n.moveRight()||n.save()){var u=this.columns.length,h=u*this.collection.length;if(n.moveUp()||n.moveDown()){a=d+(n.moveUp()?-1:1);var p=this.rows[a];p?(i=p.cells[c],l.callByNeed(i.column.editable(),i.column,e)&&(i.enterEditMode(),e.trigger("backgrid:next",a,c,!1))):e.trigger("backgrid:next",a,c,!0)}else if(n.moveLeft()||n.moveRight()){for(var g=n.moveRight(),f=d*u+c+(g?1:-1);f>=0&&h>f;g?f++:f--)if(a=~~(f/u),s=f-a*u,i=this.rows[a].cells[s],o=l.callByNeed(i.column.renderable(),i.column,i.model),r=l.callByNeed(i.column.editable(),i.column,e),o&&r){i.enterEditMode(),e.trigger("backgrid:next",a,s,!1);break}f==h&&e.trigger("backgrid:next",~~(f/u),f-a*u,!0)}}return this}});return l.Footer=n.View.extend({tagName:"tfoot",initialize:function(e){this.columns=e.columns,this.columns instanceof n.Collection||(this.columns=new l.Columns(this.columns))}}),l.Grid=n.View.extend({tagName:"table",className:"backgrid",header:P,body:I,footer:null,initialize:function(e){e.columns instanceof n.Collection||(e.columns=new $(e.columns)),this.columns=e.columns;var i=t.omit(e,["el","id","attributes","className","tagName","events"]);this.body=e.body||this.body,this.body=new this.body(i),this.header=e.header||this.header,this.header&&(this.header=new this.header(i)),this.footer=e.footer||this.footer,this.footer&&(this.footer=new this.footer(i)),this.listenTo(this.columns,"reset",function(){this.header&&(this.header=new(this.header.remove().constructor)(i)),this.body=new(this.body.remove().constructor)(i),this.footer&&(this.footer=new(this.footer.remove().constructor)(i)),this.render()})},insertRow:function(){return this.body.insertRow.apply(this.body,arguments),this},removeRow:function(){return this.body.removeRow.apply(this.body,arguments),this},insertColumn:function(){return this.columns.add.apply(this.columns,arguments),this},removeColumn:function(){return this.columns.remove.apply(this.columns,arguments),this},sort:function(){return this.body.sort.apply(this.body,arguments),this},render:function(){return this.$el.empty(),this.header&&this.$el.append(this.header.render().$el),this.footer&&this.$el.append(this.footer.render().$el),this.$el.append(this.body.render().$el),this.delegateEvents(),this.trigger("backgrid:rendered",this),this},remove:function(){return this.header&&this.header.remove.apply(this.header,arguments),this.body.remove.apply(this.body,arguments),this.footer&&this.footer.remove.apply(this.footer,arguments),n.View.prototype.remove.apply(this,arguments)}}),l}),e.Backgrid=Backgrid}.apply(e,arguments)})}(this),function(e){if("object"==typeof exports)module.exports=e(require("underscore"),require("backbone"));else if("function"==typeof define&&define.amd)define("backbone.paginator",["underscore","backbone"],e);else if("undefined"!=typeof _&&"undefined"!=typeof Backbone){var t=Backbone.PageableCollection,n=e(_,Backbone);Backbone.PageableCollection.noConflict=function(){return Backbone.PageableCollection=t,n}}}(function(e,t){"use strict";function n(t,n){if(!e.isNumber(t)||e.isNaN(t)||!e.isFinite(t)||~~t!==t)throw new TypeError("`"+n+"` must be a finite integer");return t}function i(e){for(var t,n,i,o,r={},a=decodeURIComponent,s=e.split("&"),l=0,d=s.length;d>l;l++){var c=s[l];t=c.split("="),n=t[0],i=t[1]||!0,n=a(n),i=a(i),o=r[n],g(o)?o.push(i):o?r[n]=[o,i]:r[n]=i}return r}function o(e,t,n){var i=e._events[t];if(i&&i.length){var o=i[i.length-1],r=o.callback;o.callback=function(){try{r.apply(this,arguments),n()}catch(e){throw e}finally{o.callback=r}}}else n()}var r=e.extend,a=e.omit,s=e.clone,l=e.each,d=e.pick,c=e.contains,u=e.isEmpty,h=e.pairs,p=e.invert,g=e.isArray,f=e.isFunction,m=e.isObject,v=e.keys,b=e.isUndefined,y=e.result,w=Math.ceil,A=Math.floor,N=Math.max,_=t.Collection.prototype,C=/[\s'"]/g,x=/[<>\s'"]/g,S=t.PageableCollection=t.Collection.extend({state:{firstPage:1,lastPage:null,currentPage:null,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},mode:"server",queryParams:{currentPage:"page",pageSize:"per_page",totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc",1:"desc"}},constructor:function(e,t){_.constructor.apply(this,arguments),t=t||{};var n=this.mode=t.mode||this.mode||T.mode,i=r({},T.queryParams,this.queryParams,t.queryParams||{});i.directions=r({},T.queryParams.directions,this.queryParams.directions,i.directions||{}),this.queryParams=i;var o=this.state=r({},T.state,this.state,t.state||{});o.currentPage=null==o.currentPage?o.firstPage:o.currentPage,g(e)||(e=e?[e]:[]),e=e.slice(),"server"==n||null!=o.totalRecords||u(e)||(o.totalRecords=e.length),this.switchMode(n,r({fetch:!1,resetState:!1,models:e},t));var a=t.comparator;if(o.sortKey&&!a&&this.setSorting(o.sortKey,o.order,t),"server"!=n){var l=this.fullCollection;a&&t.full&&(this.comparator=null,l.comparator=a),t.full&&l.sort(),e&&!u(e)&&(this.reset(e,r({silent:!0},t)),this.getPage(o.currentPage),e.splice.apply(e,[0,e.length].concat(this.models)))}this._initState=s(this.state)},_makeFullCollection:function(e,n){var i,o,r,a=["url","model","sync","comparator"],s=this.constructor.prototype,l={};for(i=0,o=a.length;o>i;i++)r=a[i],b(s[r])||(l[r]=s[r]);var d=new(t.Collection.extend(l))(e,n);for(i=0,o=a.length;o>i;i++)r=a[i],this[r]!==s[r]&&(d[r]=this[r]);return d},_makeCollectionEventHandler:function(e,t){return function(n,i,a,d){var c=e._handlers;l(v(c),function(n){var i=c[n];e.off(n,i),t.off(n,i)});var u=s(e.state),h=u.firstPage,p=0===h?u.currentPage:u.currentPage-1,g=u.pageSize,f=p*g,m=f+g;if("add"==n){var y,A,N,_,d=d||{};if(a==t)A=t.indexOf(i),A>=f&&m>A&&(_=e,y=N=A-f);else{y=e.indexOf(i),A=f+y,_=t;var N=b(d.at)?A:d.at+f}if(d.onRemove||(++u.totalRecords,delete d.onRemove),e.state=e._checkState(u),_){_.add(i,r({},d||{},{at:N}));var C=y>=g?i:!b(d.at)&&m>N&&e.length>g?e.at(g):null;C&&o(a,n,function(){e.remove(C,{onAdd:!0})})}}if("remove"==n)if(d.onAdd)delete d.onAdd;else{if(--u.totalRecords){var x=u.totalPages=w(u.totalRecords/g);u.lastPage=0===h?x-1:x||h,u.currentPage>x&&(u.currentPage=u.lastPage)}else u.totalRecords=null,u.totalPages=null;e.state=e._checkState(u);var S,T=d.index;a==e?((S=t.at(m))&&o(e,n,function(){e.push(S,{onRemove:!0})}),t.remove(i)):T>=f&&m>T&&((S=t.at(m-1))&&o(e,n,function(){e.push(S,{onRemove:!0})}),e.remove(i))}if("reset"==n)if(d=a,a=i,a==e&&null==d.from&&null==d.to){var k=t.models.slice(0,f),$=t.models.slice(f+e.models.length);t.reset(k.concat(e.models).concat($),d)}else a==t&&((u.totalRecords=t.models.length)||(u.totalRecords=null,u.totalPages=null),"client"==e.mode&&(u.lastPage=u.currentPage=u.firstPage),e.state=e._checkState(u),e.reset(t.models.slice(f,m),r({},d,{parse:!1})));"sort"==n&&(d=a,a=i,a===t&&e.reset(t.models.slice(f,m),r({},d,{parse:!1}))),l(v(c),function(n){var i=c[n];l([e,t],function(e){e.on(n,i);var t=e._events[n]||[];t.unshift(t.pop())})})}},_checkState:function(e){var t=this.mode,i=this.links,o=e.totalRecords,r=e.pageSize,a=e.currentPage,s=e.firstPage,l=e.totalPages;if(null!=o&&null!=r&&null!=a&&null!=s&&("infinite"==t?i:!0)){if(o=n(o,"totalRecords"),r=n(r,"pageSize"),a=n(a,"currentPage"),s=n(s,"firstPage"),1>r)throw new RangeError("`pageSize` must be >= 1");if(l=e.totalPages=w(o/r),0>s||s>1)throw new RangeError("`firstPage must be 0 or 1`");if(e.lastPage=0===s?N(0,l-1):l||s,"infinite"==t){if(!i[a+""])throw new RangeError("No link found for page "+a)}else if(s>a||l>0&&(s?a>l:a>=l))throw new RangeError("`currentPage` must be firstPage <= currentPage "+(s?">":">=")+" totalPages if "+s+"-based. Got "+a+".")}return e},setPageSize:function(e,t){e=n(e,"pageSize"),t=t||{first:!1};var i=this.state,o=w(i.totalRecords/e),s=o?N(i.firstPage,A(o*i.currentPage/i.totalPages)):i.firstPage;return i=this.state=this._checkState(r({},i,{pageSize:e,currentPage:t.first?i.firstPage:s,totalPages:o})),this.getPage(i.currentPage,a(t,["first"]))},switchMode:function(t,n){if(!c(["server","client","infinite"],t))throw new TypeError('`mode` must be one of "server", "client" or "infinite"');n=n||{fetch:!0,resetState:!0};var i=this.state=n.resetState?s(this._initState):this._checkState(r({},this.state));this.mode=t;var o,d=this,u=this.fullCollection,h=this._handlers=this._handlers||{};if("server"==t||u)"server"==t&&u&&(l(v(h),function(e){o=h[e],d.off(e,o),u.off(e,o)}),delete this._handlers,this._fullComparator=u.comparator,delete this.fullCollection);else{u=this._makeFullCollection(n.models||[],n),u.pageableCollection=this,this.fullCollection=u;var p=this._makeCollectionEventHandler(this,u);l(["add","remove","reset","sort"],function(t){h[t]=o=e.bind(p,{},t),d.on(t,o),u.on(t,o)}),u.comparator=this._fullComparator}if("infinite"==t)for(var g=this.links={},f=i.firstPage,m=w(i.totalRecords/i.pageSize),b=0===f?N(0,m-1):m||f,y=i.firstPage;b>=y;y++)g[y]=this.url;else this.links&&delete this.links;
return n.fetch?this.fetch(a(n,"fetch","resetState")):this},hasPreviousPage:function(){var e=this.state,t=e.currentPage;return"infinite"!=this.mode?t>e.firstPage:!!this.links[t-1]},hasNextPage:function(){var e=this.state,t=this.state.currentPage;return"infinite"!=this.mode?t<e.lastPage:!!this.links[t+1]},getFirstPage:function(e){return this.getPage("first",e)},getPreviousPage:function(e){return this.getPage("prev",e)},getNextPage:function(e){return this.getPage("next",e)},getLastPage:function(e){return this.getPage("last",e)},getPage:function(e,t){var i=this.mode,o=this.fullCollection;t=t||{fetch:!1};var s=this.state,l=s.firstPage,d=s.currentPage,c=s.lastPage,h=s.pageSize,p=e;switch(e){case"first":p=l;break;case"prev":p=d-1;break;case"next":p=d+1;break;case"last":p=c;break;default:p=n(e,"index")}this.state=this._checkState(r({},s,{currentPage:p})),t.from=d,t.to=p;var g=(0===l?p:p-1)*h,f=o&&o.length?o.models.slice(g,g+h):[];return"client"!=i&&("infinite"!=i||u(f))||t.fetch?("infinite"==i&&(t.url=this.links[p]),this.fetch(a(t,"fetch"))):(this.reset(f,a(t,"fetch")),this)},getPageByOffset:function(e,t){if(0>e)throw new RangeError("`offset must be > 0`");e=n(e);var i=A(e/this.state.pageSize);return 0!==this.state.firstPage&&i++,i>this.state.lastPage&&(i=this.state.lastPage),this.getPage(i,t)},sync:function(e,n,i){var o=this;if("infinite"==o.mode){var a=i.success,s=o.state.currentPage;i.success=function(e,t,n){var l=o.links,d=o.parseLinks(e,r({xhr:n},i));d.first&&(l[o.state.firstPage]=d.first),d.prev&&(l[s-1]=d.prev),d.next&&(l[s+1]=d.next),a&&a(e,t,n)}}return(_.sync||t.sync).call(o,e,n,i)},parseLinks:function(e,t){var n={},i=t.xhr.getResponseHeader("Link");if(i){var o=["first","prev","next"];l(i.split(","),function(e){var t=e.split(";"),i=t[0].replace(x,""),r=t.slice(1);l(r,function(e){var t=e.split("="),r=t[0].replace(C,""),a=t[1].replace(C,"");"rel"==r&&c(o,a)&&(n[a]=i)})})}return n},parse:function(e,t){var n=this.parseState(e,s(this.queryParams),s(this.state),t);return n&&(this.state=this._checkState(r({},this.state,n))),this.parseRecords(e,t)},parseState:function(t,n,i,o){if(t&&2===t.length&&m(t[0])&&g(t[1])){var r=s(i),d=t[0];return l(h(a(n,"directions")),function(t){var n=t[0],i=t[1],o=d[i];b(o)||e.isNull(o)||(r[n]=d[i])}),d.order&&(r.order=1*p(n.directions)[d.order]),r}},parseRecords:function(e,t){return e&&2===e.length&&m(e[0])&&g(e[1])?e[1]:e},fetch:function(e){e=e||{};var t=this._checkState(this.state),n=this.mode;"infinite"!=n||e.url||(e.url=this.links[t.currentPage]);var o=e.data||{},l=y(e,"url")||y(this,"url")||"",c=l.indexOf("?");-1!=c&&(r(o,i(l.slice(c+1))),l=l.slice(0,c)),e.url=l,e.data=o;var u,p,g,m,w="client"==this.mode?d(this.queryParams,"sortKey","order"):a(d(this.queryParams,v(T.queryParams)),"directions"),A=h(w),N=s(this);for(u=0;u<A.length;u++)p=A[u],g=p[0],m=p[1],m=f(m)?m.call(N):m,null!=t[g]&&null!=m&&(o[m]=t[g]);t.sortKey&&t.order?o[w.order]=this.queryParams.directions[t.order+""]:t.sortKey||delete o[w.order];var C=h(a(this.queryParams,v(T.queryParams)));for(u=0;u<C.length;u++)p=C[u],m=p[1],m=f(m)?m.call(N):m,null!=m&&(o[p[0]]=m);if("server"!=n){var x=this,S=this.fullCollection,k=e.success;return e.success=function(t,i,o){o=o||{},b(e.silent)?delete o.silent:o.silent=e.silent;var a=t.models;"client"==n?S.reset(a,o):(S.add(a,r({at:S.length},r(o,{parse:!1}))),x.trigger("reset",x,o)),k&&k(t,i,o)},_.fetch.call(this,r({},e,{silent:!0}))}return _.fetch.call(this,e)},_makeComparator:function(e,t,n){var i=this.state;return e=e||i.sortKey,t=t||i.order,e&&t?(n||(n=function(e,t){return e.get(t)}),function(i,o){var r,a=n(i,e),s=n(o,e);return 1===t&&(r=a,a=s,s=r),a===s?0:s>a?-1:1}):void 0},setSorting:function(e,t,n){var i=this.state;i.sortKey=e,i.order=t=t||i.order;var o=this.fullCollection,a=!1,s=!1;e||(a=s=!0);var l=this.mode;n=r({side:"client"==l?l:"server",full:!0},n);var d=this._makeComparator(e,t,n.sortValue),c=n.full,u=n.side;return"client"==u?c?(o&&(o.comparator=d),a=!0):(this.comparator=d,s=!0):"server"!=u||c||(this.comparator=d),a&&(this.comparator=null),s&&o&&(o.comparator=null),this}}),T=S.prototype;return S}),function(e,t){"function"==typeof define&&define.amd?define("backbone.fetch-cache",["underscore","backbone","jquery"],function(n,i,o){return e.Backbone=t(n,i,o)}):"undefined"!=typeof exports?module.exports=t(require("underscore"),require("backbone"),require("jquery")):e.Backbone=t(e._,e.Backbone,e.jQuery)}(this,function(e,t,n){function i(t,i){var o;return(o=i&&i.url?i.url:e.isFunction(t.url)?t.url():t.url)?i&&i.data?o+"?"+n.param(i.data):o:void 0}function o(e,n,i){n=n||{};var o=t.fetchCache.getCacheKey(e,n),r=!1;o&&n.cache!==!1&&(n.cache||n.prefill)&&(n.expires!==!1&&(r=(new Date).getTime()+1e3*(n.expires||300)),t.fetchCache._cache[o]={expires:r,value:i},t.fetchCache.setLocalStorage())}function r(n){e.isFunction(n)&&(n=n()),delete t.fetchCache._cache[n],t.fetchCache.setLocalStorage()}function a(){if(c&&t.fetchCache.localStorage)try{sessionStorage.setItem(t.fetchCache.getLocalStorageKey(),JSON.stringify(t.fetchCache._cache))}catch(e){var n=e.code||e.number||e.message;if(22!==n)throw e;this._deleteCacheWithPriority()}}function s(){if(c&&t.fetchCache.localStorage){var e=sessionStorage.getItem(t.fetchCache.getLocalStorageKey())||"{}";t.fetchCache._cache=JSON.parse(e)}}function l(e){return window.setTimeout(e,0)}var d={modelFetch:t.Model.prototype.fetch,modelSync:t.Model.prototype.sync,collectionFetch:t.Collection.prototype.fetch},c=function(){var e="undefined"!=typeof window.localStorage;if(e)try{sessionStorage.setItem("test_support","test_support"),sessionStorage.removeItem("test_support")}catch(t){e=!1}return e}();return t.fetchCache=t.fetchCache||{},t.fetchCache._cache=t.fetchCache._cache||{},t.fetchCache.enabled=!0,t.fetchCache.priorityFn=function(e,t){return e&&e.expires&&t&&t.expires?e.expires-t.expires:e},t.fetchCache._prioritize=function(){var t=e.values(this._cache).sort(this.priorityFn),n=e.indexOf(e.values(this._cache),t[0]);return e.keys(this._cache)[n]},t.fetchCache._deleteCacheWithPriority=function(){t.fetchCache._cache[this._prioritize()]=null,delete t.fetchCache._cache[this._prioritize()],t.fetchCache.setLocalStorage()},t.fetchCache.getLocalStorageKey=function(){return"backboneCache"},"undefined"==typeof t.fetchCache.localStorage&&(t.fetchCache.localStorage=!0),t.Model.prototype.fetch=function(i){function o(){i.parse&&(c=h.parse(c,i)),h.set(c,i),e.isFunction(i.prefillSuccess)&&i.prefillSuccess(h,c,i),h.trigger("cachesync",h,c,i),h.trigger("sync",h,c,i),i.prefill?u.notify(h):(e.isFunction(i.success)&&i.success(h,c,i),u.resolve(h))}if(!t.fetchCache.enabled)return d.modelFetch.apply(this,arguments);i=e.defaults(i||{},{parse:!0});var r=t.fetchCache.getCacheKey(this,i),a=t.fetchCache._cache[r],s=!1,c=!1,u=new n.Deferred,h=this;if(a&&(s=a.expires,s=s&&a.expires<(new Date).getTime(),c=a.value),!s&&(i.cache||i.prefill)&&c&&(null==i.async&&(i.async=!0),i.async?l(o):o(),!i.prefill))return u;var p=d.modelFetch.apply(this,arguments);return p.done(e.bind(u.resolve,this,this)).done(e.bind(t.fetchCache.setCache,null,this,i)).fail(e.bind(u.reject,this,this)),u.abort=p.abort,u},t.Model.prototype.sync=function(e,n,i){if("read"===e||!t.fetchCache.enabled)return d.modelSync.apply(this,arguments);var o,a,s=n.collection,l=[];for(l.push(t.fetchCache.getCacheKey(n,i)),s&&l.push(t.fetchCache.getCacheKey(s)),o=0,a=l.length;a>o;o++)r(l[o]);return d.modelSync.apply(this,arguments)},t.Collection.prototype.fetch=function(i){function o(){h[i.reset?"reset":"set"](c,i),e.isFunction(i.prefillSuccess)&&i.prefillSuccess(h),h.trigger("cachesync",h,c,i),h.trigger("sync",h,c,i),i.prefill?u.notify(h):(e.isFunction(i.success)&&i.success(h,c,i),u.resolve(h))}if(!t.fetchCache.enabled)return d.collectionFetch.apply(this,arguments);i=e.defaults(i||{},{parse:!0});var r=t.fetchCache.getCacheKey(this,i),a=t.fetchCache._cache[r],s=!1,c=!1,u=new n.Deferred,h=this;if(a&&(s=a.expires,s=s&&a.expires<(new Date).getTime(),c=a.value),!s&&(i.cache||i.prefill)&&c&&(null==i.async&&(i.async=!0),i.async?l(o):o(),!i.prefill))return u;var p=d.collectionFetch.apply(this,arguments);return p.done(e.bind(u.resolve,this,this)).done(e.bind(t.fetchCache.setCache,null,this,i)).fail(e.bind(u.reject,this,this)),u.abort=p.abort,u},s(),t.fetchCache._superMethods=d,t.fetchCache.setCache=o,t.fetchCache.getCacheKey=i,t.fetchCache.clearItem=r,t.fetchCache.setLocalStorage=a,t.fetchCache.getLocalStorage=s,t}),define("api/ResourceService",["backbone","jquery","api/UrlBuilder","main/Session","main/Utils","api/SessionStorage","api/UserService","api/Navigation","api/Enrichment","backbone.paginator","backbone.fetch-cache"],function(e,t,n,i,o,r,a,s,l){"use strict";var d=!1,c=15,u=600;e.fetchCache.localStorage=!1;var h=e.Model.extend({parse:function(e){return l.addFacilityMoniker(e),e}});e.Collection.prototype.next=function(e){return this.at(this.index(e)+1)||e},e.Collection.prototype.prev=function(e){return this.at(this.index(e)-1)||e},e.Collection.prototype.index=function(e){return this.indexOf(e)},e.Collection.prototype.count=function(){return this.length},e.PageableCollection.prototype.next=function(e){return this.fullCollection.at(this.index(e)+1)||e},e.PageableCollection.prototype.prev=function(e){return this.fullCollection.at(this.index(e)-1)||e},e.PageableCollection.prototype.index=function(e){return this.fullCollection.indexOf(e)},e.PageableCollection.prototype.count=function(){return this.fullCollection.length},e.Collection.prototype.initialize=function(e,t){t&&t.collectionParse&&(this.collectionParse=function(e){return t.collectionParse(e)})},e.Collection.prototype.parse=function(t){var n;if(n=t.data?t.data.items?t.data.items:t.data:t,this.collectionParse){var i=new e.Collection(n);n=this.collectionParse(i)}return n},e.PageableCollection.prototype.initialize=function(e,t){t&&t.collectionParse&&(this.collectionParse=function(e){return t.collectionParse(e)})},e.PageableCollection.prototype.parse=function(t){var n;if(n=t.data?t.data.items?t.data.items:t.data:t,this.collectionParse){var i=new e.Collection(n);n=this.collectionParse(i)}return n};var p=e.Collection.extend({model:h}),g=e.PageableCollection.extend({model:h}),f={createEmptyCollection:function(e){var t={};return _.extend(t,e),t.resourceTitle=void 0,this.fetchCollection(t)},fetchCollection:function(t,i){var o,r=t.resourceTitle,a=t.viewModel,s=t.criteria,l=t.onSuccess,f=void 0!==t.cache?t.cache:d,m=t.cacheExpiration||u,v=t.onError,b={};if(t.resourceTitle&&(b="POST"===t.fetchType?{url:n.buildUrl(r)}:{url:n.buildUrl(r,s)}),i&&t.resourceTitle)"POST"===t.fetchType?i.url=n.buildUrl(r):i.url=n.buildUrl(r,s),o=i;else{if(t.pageable===!0){var y={mode:"client",state:{pageSize:c}};_.extend(y,t.collectionConfig),_.extend(b,y),o=new g([],b)}else _.extend(b,t.collectionConfig),o=new p([],b);o.url=b.url}if(void 0!==a){_.isFunction(a.parse)&&_.isFunction(h.prototype.parse)&&(a.parse=_.compose(h.prototype.parse,a.parse));var w=h.extend(a);o.model=w}o.fetchOptions=t;var A="",N="";return"POST"===t.fetchType&&(A=JSON.stringify(t.criteria),N="application/json"),t.resourceTitle&&(o.fetch({data:A,contentType:N,cache:f,expires:m,type:t.fetchType||"GET",success:function(t,n){o instanceof e.PageableCollection?o.originalModels=o.fullCollection.toJSON():o.originalModels=o.toJSON(),"function"==typeof l&&(t.trigger("fetchSuccessfull",t),l(t,n))},error:function(e,t){"function"==typeof v&&v(e,t)}}),f===!1&&this.clearCache(b.url)),o},resetCollection:function(e,t){this.fetchCollection(t).on("sync",function(t){e.reset(t.models)})},filterCollection:function(e,t){return e.reset(_.filter(e.models,function(e){return t(e)})),e.toJSON()},fetchModel:function(t){var i,o,r=t.resourceTitle,a=t.viewModel,s=t.criteria;if(o=e.Model.extend({parse:function(e){var t;return t=e.data?e.data.items?e.data.items[0]:e.data:e}}),void 0!==a){var l=o.extend(a);i=new l}else i=new o;return i.url=n.buildUrl(r,s),i},clearCache:function(t){var n=t.url||t;e.fetchCache.clearItem(n)},clearAllCache:function(t){if(t)for(var n in e.fetchCache._cache)n.indexOf(t)>=0&&delete e.fetchCache._cache[n];else for(var i in e.fetchCache._cache)delete e.fetchCache._cache[i];e.fetchCache.setLocalStorage()},buildUrl:function(e,t){return n.buildUrl(e,t)},replaceURLRouteParams:function(e,t){return n.replaceURLRouteParams(e,t)},fetchResponseStatus:function(e){var t,i=e.resourceTitle,o=e.criteria,r=e.onSuccess,a=void 0!==e.cache?e.cache:d,s=e.cacheExpiration||u,l=e.onError,c={};e.resourceTitle&&(c={url:n.buildUrl(i,o)}),_.extend(c,e.collectionConfig),t=new p([],c),t.url=c.url,t.fetchOptions=e,e.resourceTitle&&(t.fetch({cache:a,expires:s,success:function(e,t){"function"==typeof r&&r(t)},error:function(e,t){200==t.status&&"function"==typeof r?r(t):"function"==typeof l&&l(t)}}),a===!1&&this.clearCache(c.url))},fetchDateFilteredCollection:function(e,t){e.fetchOptions.criteria.filter=this.buildJdsDateFilter(t),this.fetchCollection(e.fetchOptions,e)},buildJdsDateFilter:function(e){var t,n;if(e.hasOwnProperty("fromDate")||e.hasOwnProperty("toDate"))t=e.fromDate,n=e.toDate;else{var i=r.getModel("globalDate");t=i.get("fromDate"),n=i.get("toDate")}t=void 0===t||null===t||0===t.trim().length?"":'"'+o.formatDate(t,"YYYYMMDD","MM/DD/YYYY")+'"',n=void 0===n||null===n||0===n.trim().length?"":'"'+o.formatDate(n,"YYYYMMDD","MM/DD/YYYY")+'"';var a;return""!==t&&""!==n?a="between("+dateField+","+t+","+n+")":""===t&&""!==n?a="lte("+dateField+","+n+")":""!==t&&""===n?a="gte("+dateField+","+t+")":console.error("ResourceService.js buildJdsDateFilter both fromDate and toDate are empty."),a}};return f.patientRecordService={createEmptyCollection:function(e){return f.createEmptyCollection(e)},fetchCollection:function(e,t){var n=e.patient||this.getCurrentPatient();return void 0!=n&&(void 0==e.criteria&&(e.criteria={}),e.patientIdentifierType&&n.get(e.patientIdentifierType)?e.criteria.pid=n.get(n.get(e.patientIdentifierType)):n.get("icn")?e.criteria.pid=n.get("icn"):n.get("pid")?e.criteria.pid=n.get("pid"):e.criteria.pid=n.get("id"),n.has("acknowledged")&&(e.criteria._ack="true")),f.fetchCollection(e,t)},fetchModel:function(e){var t=e.patient||this.getCurrentPatient();return void 0!=t&&(void 0==e.criteria&&(e.criteria={}),e.patientIdentifierType&&t.get(e.patientIdentifierType)?e.criteria.pid=t.get(t.get(e.patientIdentifierType)):t.get("icn")?e.criteria.pid=t.get("icn"):t.get("pid")?e.criteria.pid=t.get("pid"):e.criteria.pid=t.get("id")),f.fetchModel(e)},fetchResponseStatus:function(e){var t=e.patient||this.getCurrentPatient();return void 0!=t&&(void 0==e.criteria&&(e.criteria={}),e.patientIdentifierType&&t.get(e.patientIdentifierType)?e.criteria.pid=t.get(t.get(e.patientIdentifierType)):t.get("icn")?e.criteria.pid=t.get("icn"):t.get("pid")?e.criteria.pid=t.get("pid"):e.criteria.pid=t.get("id"),t.has("acknowledged")&&(e.criteria._ack="true")),f.fetchResponseStatus(e)},getCurrentPatient:function(){return r.get.sessionModel("patient")},refreshCurrentPatient:function(){var e=this,t={resourceTitle:"patient-record-patient"};t.success=function(t,n){var i=_.indexOf(t.pluck("pid"),e.getCurrentPatient().get("pid"))||0,o=e.setPatientStatusClass(t.models[i]);r.set.sessionModel("patient",o)},this.fetchCollection(t).fetch(t)},setPatientStatusClass:function(e){var t=e||this.getCurrentPatient(),n="Outpatient";return t.get("admissionUid")&&null!==t.get("admissionUid")&&(n="Inpatient"),t.set("patientStatusClass",n),t},fetchDateFilteredCollection:function(e,t){return f.fetchDateFilteredCollection(e,t)},isPatientInPrimaryVista:function(){var e=r.get.sessionModel("patient-domain"),t=e.get("data"),n=e.get("sites"),i=!1;return _.each(t,function(e){var t=e.pid.split(";")[0],o=n.filter(function(e){return e.siteCode===t});o.length&&(i=!0)}),i}},f}),define("i18nprecompile",["handlebars","underscore"],function(e,t){function n(i,o,r){return r=r||{},o=o||{},i&&"program"===i.type&&i.statements&&(t(i.statements).forEach(function(t,a){var s="<!-- i18n error -->";if("mustache"==t.type&&t.id&&"$"==t.id.original){if(t.params.length&&t.params[0].string){var l=t.params[0].string;s=o[l]||(r.originalKeyFallback?l:s)}i.statements[a]=new e.AST.ContentNode(s)}else t.program&&(t.program=n(t.program,o,r))}),i.inverse&&n(i.inverse,o,r)),i}return function(t,i,o){o=o||{};var r,a;return r=e.parse(t),i!==!1&&(r=n(r,i,o)),a=(new e.Compiler).compile(r,o),(new e.JavaScriptCompiler).compile(a,o)}}),function(window){var JSON=window.JSON||{};!function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,o,r,a,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,n=0;r>n;n+=1)a[n]=str(n,l)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;r>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],o=str(i,l),o&&a.push(quote(i)+(gap?": ":":")+o));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(o=str(i,l),o&&a.push(quote(i)+(gap?": ":":")+o));return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i=walk(o,n),void 0!==i?o[n]=i:delete o[n]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("json2",[],function(){return JSON})}.call(this,this),define("hbs",["handlebars","underscore","i18nprecompile","json2"],function(e,t,n,i){var o,r,a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=function(){throw new Error("Environment unsupported.")},l=[],d="w+",c="hbs",u="@hbs",h="/styles/",p="/demo-build/styles/",g="_assets/templates/helpers/",f="templates/i18n/",m="screen.build.css",v="onHbsRead";e.registerHelper("$",function(){}),"undefined"!=typeof window&&window.navigator&&window.document&&!window.navigator.userAgent.match(/Node.js/)?(r=function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return arguments[0]===!0?new XDomainRequest:new XMLHttpRequest;for(t=0;3>t;t++){n=a[t];try{e=new ActiveXObject(n)}catch(i){}if(e){a=[n];break}}if(!e)throw new Error("getXhr(): XMLHttpRequest not available");return e},getIEVersion=function(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=n.exec(t)&&(e=parseFloat(RegExp.$1))}return e},s=function(e,t){var n=!1;if(0!=e.indexOf("http"))n=!1;else{var i="https"===e.substr(0,5)?8:7,o="https"===window.location.href.substr(0,5)?8:7,a=e.substr(i).split("/").shift(),s=getIEVersion();n=a!=window.location.href.substr(o).split("/").shift()&&s>=7}if(n){var l=r(!0);l.open("GET",e),l.onload=function(){t(l.responseText,e)},l.onprogress=function(){},l.ontimeout=function(){},l.onerror=function(){},setTimeout(function(){l.send()},0)}else{var d=r();d.open("GET",e,!0),d.onreadystatechange=function(n){4===d.readyState&&t(d.responseText,e)},d.send(null)}}):"undefined"!=typeof process&&process.versions&&process.versions.node?(o=require.nodeRequire("fs"),s=function(e,t){var n=o.readFileSync(e,"utf8")||"";n=n.replace(/^\uFEFF/,""),t(n,e)}):"undefined"!=typeof java&&"undefined"!=typeof java.io&&(s=function(e,t){for(var n,i=new java.io.FileInputStream(e),o=new java.io.InputStreamReader(i,"UTF-8"),r=new java.io.BufferedReader(o),a="";null!==(n=r.readLine());)a+=new String(n)+"\n";r.close(),t(a,e)});var b,y={},w=function(e,t){y[e]?t(y[e]):s(e,function(e,n){y[n]=e,t.call(this,e)})},A=[],N={},_=[];return{get:function(){return e},write:function(e,t,n){if(t+u in l){var i=l[t+u];n.asModule(e+"!"+t,i)}},version:"2.0.0",load:function(o,r,a,y){function C(e,n){return t(e).forEach(function(e){e&&e.type&&"partial"===e.type&&n.push(e.partialName.name),e&&e.program&&e.program.statements&&C(e.program.statements,n),e&&e.inverse&&e.inverse.statements&&C(e.inverse.statements,n)}),n}function x(e){var n=[];return e&&e.statements&&(n=C(e.statements,[])),t.unique(n)}function S(e){var t,n,o;if(e&&e.statements&&(t=e.statements[0],t&&"comment"===t.type))try{return n=t.comment.replace(new RegExp("^[\\s]+|[\\s]+$","g"),""),o=i.parse(n),n}catch(r){return i.stringify({description:n})}return"{}"}function T(e){if(!e)return[];var t,n=[e[0]],i=e[0];for(t=1;t<e.length;++t)e.hasOwnProperty(t)&&(i+="."+e[t],n.push(i));return n}function k(n,i,o,r){o=o?o+".":"";var a="";return t(n).forEach(function(n){var s,l,d;if(n&&n.type&&"mustache"===n.type){if(!n.params||!n.params.length){s=T(n.id.parts);for(l in s)s[l]&&(a=s[l]||a,i.push(o+s[l]));i.push(o+n.id.string)}var c=["this",".","..","./..","../..","../../.."];n.params&&"undefined"==typeof e.helpers[n.id.string]&&(t(n.params).forEach(function(l){(t(c).contains(l.original)||l instanceof e.AST.StringNode||l instanceof e.AST.NumberNode||l instanceof e.AST.BooleanNode||l instanceof e.AST.DataNode||l instanceof e.AST.SexprNode)&&(r.push(n.id.string),"undefined"!=typeof n.params&&t(n.params).forEach(function(e){"sexpr"===e.type&&e.isHelper===!0&&r.push(e.id.string)}),null!=n.hash&&"undefined"!=typeof n.hash&&"undefined"!=typeof n.hash.pairs&&t(n.hash.pairs).forEach(function(e){var t=(e[0],e[1]);"sexpr"===t.type&&t.isHelper===!0&&r.push(t.id.string)})),s=T(l.parts);for(var d in s)s[d]&&(a=s[d]||a,r.push(n.id.string),i.push(o+s[d]))}),null!=n.hash&&"undefined"!=typeof n.hash&&"undefined"!=typeof n.hash.pairs&&t(n.hash.pairs).forEach(function(t){var i=t[1];(i instanceof e.AST.StringNode||i instanceof e.AST.NumberNode||i instanceof e.AST.BooleanNode||i instanceof e.AST.IdNode)&&r.push(n.id.string)}))}n&&n.mustache&&k([n.mustache],i,o+a,r),n&&n.program&&n.program.statements&&(d=k([n.mustache],[],"",r)[0]||"",n.inverse&&n.inverse.statements&&k(n.inverse.statements,i,o+a+(d?o+a?"."+d:d:""),r),k(n.program.statements,i,o+a+(d?o+a?"."+d:d:""),r))}),i}function $(e){var n=[],i=[];e&&e.statements&&(n=k(e.statements,[],void 0,i));var o=["helperMissing","blockHelperMissing","each","if","unless","with","log","lookup"];return{vars:t(n).chain().unique().map(function(e){return""===e?".":e.length&&"."===e[e.length-1]?e.substr(0,e.length-1)+"[]":e}).value(),helpers:t(i).chain().unique().map(function(e){return t(o).contains(e)?void 0:e}).compact().value()}}function D(e){for(var t=e.split("/"),n=0;n<t.length;n++)".."===t[n]?(delete t[n-1],delete t[n]):"."===t[n]&&delete t[n];return t.join("/").replace(/\/\/+/g,"/")}function M(c){s(R,function(s,u){var f,y,w,C,T,k=b.isBuild&&b[v]?b[v]:function(e,t,n){return n},M=e.parse(k(o,u,s)),R=x(M),F=S(M),V=$(M),L=V.vars,U=V.helpers||[],H="",B="",z="",Y=[],G=o.substr(0,o.lastIndexOf("/")+1);if(require.config.hbs=require.config.hbs||{},require.config.hbs._partials=require.config.hbs._partials||{},"{}"!==F)try{w=i.parse(F)}catch(j){console.log("couldn't parse meta for %s",u)}for(var q in R)if(R.hasOwnProperty(q)&&"string"==typeof R[q]){var u,W=R[q];u=D(W.match(/^(\.|\/)+/)?G+W:O+W),require.config.hbs._partials[u]=require.config.hbs._partials[u]||[],require.config.hbs._partials[u].references=require.config.hbs._partials[u].references||[],require.config.hbs._partials[u].references.push(W),require.config.hbs._loadedDeps=require.config.hbs._loadedDeps||{},Y[q]="hbs!"+u}if(f=Y.join("', '"),U=U.concat(w&&w.helpers?w.helpers:[]),y=I?"":function(){var e,t=[],n=b.hbs&&b.hbs.helperPathCallback?b.hbs.helperPathCallback:function(e){return(b.hbs&&b.hbs.helperDirectory?b.hbs.helperDirectory:g)+e};for(e=0;e<U.length;e++)t[e]="'"+n(U[e],u)+"'";return t}().join(","),y&&(y=","+y),w)try{w.styles&&(A=t.union(A,w.styles),require.isBrowser&&!b.isBuild?(C=document.head||document.getElementsByTagName("head")[0],t(w.styles).forEach(function(e){N[e]||(T=document.createElement("link"),T.href=b.baseUrl+h+e+".css",T.media="all",T.rel="stylesheet",T.type="text/css",C.appendChild(T),N[e]=T)})):b.isBuild&&!function(){var e=require.nodeRequire("fs"),n=t(w.styles).map(function(e){return N[e]?"":(N[e]=!0,"@import url("+e+".css);\n")}).join("\n");e.open(__dirname+p+m,d,"0666",function(t,i){e.writeSync(i,n,null,encoding="utf8"),e.close(i)}),d="a"}())}catch(j){console.log("error injecting styles")}b.isBuild||b.serverRender||(H="<!-- START - "+o+" -->",B="<!-- END - "+o+" -->",z="t.meta = "+F+";\nt.helpers = "+i.stringify(U)+";\nt.deps = "+i.stringify(Y)+";\nt.vars = "+i.stringify(L)+";\n");var K=P?!1:t.extend(c,b.localeMapping),X=b.hbs||{},J=t.extend(X.compileOptions||{},{originalKeyFallback:X.originalKeyFallback}),Z=n(s,K,J),Q="'hbs!"+o+"',";f&&(f=", '"+f+"'");var ee=[];require.config.hbs._partials[o]&&(ee=require.config.hbs._partials[o].references),s="/* START_TEMPLATE */\ndefine("+Q+"['hbs','handlebars'"+f+y+"], function( hbs, Handlebars ){ \nvar t = Handlebars.template("+Z+");\nHandlebars.registerPartial('"+o+"', t);\n";for(var q=0;q<ee.length;q++)s+="Handlebars.registerPartial('"+ee[q]+"', t);\n";s+=z+"return t;\n});\n/* END_TEMPLATE */\n",b.isBuild&&(l[E]=s),b.isBuild||(s+="\r\n//# sourceURL="+u),b.isBuild?(a.fromText(o,s),r([o],function(e){a(e)})):require(Y,function(){a.fromText(s),r([o],function(e){a(e)})}),b.removeCombined&&u&&_.push(u)})}b=b||y;var E=o+u;b.hbs=b.hbs||{};var P=!(1==b.hbs.i18n),I=0==b.hbs.helpers,O="";b.hbs.partialsUrl&&(O=b.hbs.partialsUrl,O.match(/\/$/)||(O+="/")),b.hbs.fetchText&&(s=b.hbs.fetchText);var R,F=b.hbs&&b.hbs.templateExtension===!1;if(R=F?r.toUrl(o):r.toUrl(o+"."+(b.hbs&&b.hbs.templateExtension?b.hbs.templateExtension:c)),P)M(!1);else{var V=(b.hbs&&b.hbs.i18nDirectory?b.hbs.i18nDirectory:f)+(b.locale||"en_us")+".json";try{w(r.toUrl(V),function(e){M(i.parse(e))})}catch(L){if(b.hbs)throw L;console.warn("hbs: Error reading "+V+", disabling i18n. Ignore this if you're using jam, otherwise check your i18n configuration.\n"),b.hbs={i18n:!1,helpers:!0},M(!1)}}},onLayerEnd:function(){b.removeCombined&&o&&_.forEach(function(e){o.existsSync(e)&&o.unlinkSync(e)})}}}),define("hbs!main/components/views/ccowFooterTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<button id="cancelContextChangeBtn" class="btn btn-default">Cancel</button>\n<button id="breakContextBtn" class="btn btn-primary">Break Link</button>\n<button id="forceContextChangeBtn" class="btn btn-primary">Accept</button>\n'}});return t.registerPartial("main/components/views/ccowFooterTemplate",n),n}),define("main/components/views/ccowModalView",["backbone","marionette","jquery","underscore","main/ADK","api/Messaging","api/Navigation","hbs!main/components/views/ccowFooterTemplate","main/ScreensManifest"],function(e,t,n,i,o,r,a,s,l){"use strict";var d={activateModal:function(e,t,n){var i={title:"Context Change",footerView:this.getFooterView(e,t),headerView:this.getHeaderView(),keyboard:!1,backdrop:"static",callShow:!0},r=new o.UI.Modal({view:this.getModalView(n),options:i});r.show()},getFooterView:function(t,n){var i=e.Marionette.ItemView.extend({template:s,events:{"click #cancelContextChangeBtn":"cancelContextChange","click #breakContextBtn":"breakContextLink","click #forceContextChangeBtn":"forceContextChange"},cancelContextChange:function(){t.cancelContextChange(function(){o.UI.Modal.hide()},function(){o.UI.Modal.hide()})},breakContextLink:function(){var e=function(){r.trigger("patient:selected",n),a.navigate(o.ADKApp.userSelectedDefaultScreen)};t.breakContextLink(e,e)},forceContextChange:function(){var e=function(){r.trigger("patient:selected",n),a.navigate(o.ADKApp.userSelectedDefaultScreen)};t.forceContextChange(e,e)}});return i},getHeaderView:function(){var t=e.Marionette.ItemView.extend({template:Handlebars.compile('<h4 class="modal-title" id="mainModalLabel">Context Change</h4>')});return t},getModalView:function(t){var n=e.Marionette.ItemView.extend({template:Handlebars.compile('<div id="ccowBodyText">{{bodyText}}</div>'),initialize:function(){this.model=new e.Model,this.model.set("bodyText",t)}});return new n}};return d}),define("main/api/WorkspaceFilters",["backbone","marionette","underscore","jquery","api/Messaging","api/ResourceService"],function(e,t,n,i,o,r){"use strict";var a={},s=null,l=function(e,t){if(n.isNull(e)||n.isUndefined(e))return null;var i=n.find(e.applets,function(e){return e.instanceId===t});return i},d=function(e,t,n,i){var o=l(e,t),r={applet:o,anyFilters:o?o.filters.length>0:!1};n.call(i||this,r)},c=function(e,t,n){for(var i=-1,o=e?e.length:0;++i<o;)if(t(e[i],i,e))return i;return-1},u=function(e,t){var n=c(e.userDefinedFilters,function(e){return e.id===t});return n},h=function(e,t){var n=c(e.applets,function(e){return e.instanceId===t});return n};return a.deleteFilterFromJDS=function(e,t,n){var i={resourceTitle:"user-defined-filter",fetchType:"DELETE",criteria:{id:e,instanceId:t,filter:n}};r.patientRecordService.fetchCollection(i);a.deleteFilterFromSession(e,t,n)},a.deleteFilterFromSession=function(e,t,n){var i=ADK.UserDefinedScreens.getUserConfigFromSession(),o=u(i,e),r=i.userDefinedFilters[o],a=h(r,t),s=r.applets[a],l=s.filters.indexOf(n);l>-1&&i.userDefinedFilters[o].applets[a].filters.splice(l,1),0===i.userDefinedFilters[o].applets[a].filters.length&&i.userDefinedFilters[o].applets.splice(a,1),ADK.UserDefinedScreens.saveUserConfigToSession(i)},a.lastCallSaveFilterToJDSFinished=!0,a.saveFilterToJDS=function(t,n,i){var o=function(){a.lastCallSaveFilterToJDSFinished=!1;var o=new e.Model;o.urlRoot=r.buildUrl("user-defined-filter",{id:t,instanceId:n,filter:i}),o.save({},{success:function(){a.lastCallSaveFilterToJDSFinished=!0}})},s=setInterval(function(){a.lastCallSaveFilterToJDSFinished&&(o(),clearInterval(s))},50);a.saveFilterToSession(t,n,i)},a.saveFilterToSession=function(e,t,n){var i=ADK.UserDefinedScreens.getUserConfigFromSession();i.userDefinedFilters||(i.userDefinedFilters=[]);var o=u(i,e);if(-1===o)i.userDefinedFilters.push({id:e,applets:[{filters:[n],instanceId:t}]});else{var r=h(i.userDefinedFilters[o],t);-1===r?i.userDefinedFilters[o].applets.push({filters:[n],instanceId:t}):i.userDefinedFilters[o].applets[r].filters.push(n)}ADK.UserDefinedScreens.saveUserConfigToSession(i)},a.retrieveWorkspaceFilters=function(e){var t=ADK.Messaging.request("applet:maximized");
if(!n.isUndefined(t)){var i=t.get("workspaceId"),r=t.get("instanceId"),l=t.get("maximizedScreenId"),d=t.get("maximizedAppletId");a.removeAllFiltersFromAppletFromSession(l,d),a.cloneAppletFiltersToSession(i,r,l,d)}var c=ADK.UserDefinedScreens.getUserConfigFromSession(),u=n.find(c.userDefinedFilters,function(t){return t.id===e});return o.trigger("workspaceFilters:retrieve",u),s=u,u},a.onRetrieveWorkspaceFilters=function(e,t,i){var r=ADK.Messaging.request("get:current:screen"),l=r.applets;n.isUndefined(l)||n.isUndefined(l[0])||l[0].fullScreen||a.hasFiltersForApplet(r.config.id,e)&&(s=null,a.retrieveWorkspaceFilters(r.config.id));var c=null!==s;c?d(s,e,t,i):o.once("workspaceFilters:retrieve",function(n){d(n,e,t,i)},i)},a.onAppletFilterCollectionChanged=function(e,t,n){this.onRetrieveWorkspaceFilters(e,t,n),o.on("filters:collectionChanged:"+e,function(e){t.call(n||this,e)},this)},a.offAppletFilterCollectionChanged=function(e){o.off("filters:collectionChanged:"+e)},a.removeAllFiltersFromApplet=function(e,t){if(a.hasFiltersForApplet(e,t)){var n={resourceTitle:"user-defined-filter-all",fetchType:"DELETE",criteria:{id:e,instanceId:t}};r.fetchCollection(n),a.removeAllFiltersFromAppletFromSession(e,t)}},a.hasFiltersForApplet=function(e,t){var n=ADK.UserDefinedScreens.getUserConfigFromSession(),i=u(n,e);if(-1===i)return!1;var o=n.userDefinedFilters[i],r=h(o,t);return-1===r?!1:!0},a.removeAllFiltersFromAppletFromSession=function(e,t){var n=ADK.UserDefinedScreens.getUserConfigFromSession(),i=u(n,e);if(-1!==i){var o=n.userDefinedFilters[i],r=h(o,t);-1!==r&&(n.userDefinedFilters[i].applets.splice(r,1),ADK.UserDefinedScreens.saveUserConfigToSession(n))}},a.removeAllFiltersForOneScreenFromSession=function(e){var t=ADK.UserDefinedScreens.getUserConfigFromSession(),n=u(t,e);-1!==n&&(t.userDefinedFilters.splice(n,1),ADK.UserDefinedScreens.saveUserConfigToSession(t))},a.triggerGlobalFiltersChangedAlert=function(e,t){o.trigger("filters:collectionChanged:"+e,{anyFilters:t})},a.cloneScreenFilters=function(e,t){var n={resourceTitle:"user-defined-filter",fetchType:"PUT",criteria:{fromId:e,toId:t}};r.fetchCollection(n)},a.cloneScreenFiltersToSession=function(e,t){var i=ADK.UserDefinedScreens.getUserConfigFromSession(),o=u(i,e);if(-1!==o){var r=n.clone(i.userDefinedFilters[o]);r.id=t;var a=u(i,t);a>-1?i.userDefinedFilters[a]=r:i.userDefinedFilters.push(r),ADK.UserDefinedScreens.saveUserConfigToSession(i)}},a.cloneAppletFiltersToSession=function(e,t,i,o){var r=ADK.UserDefinedScreens.getUserConfigFromSession(),a=u(r,e);if(-1!==a){var s=n.clone(r.userDefinedFilters[a]),l=h(s,t);if(-1!==l){var d=n.clone(s.applets[l]);d.instanceId=o;var c={applets:[d],id:i},p=u(r,i);p>-1?r.userDefinedFilters[p]=c:r.userDefinedFilters.push(c),ADK.UserDefinedScreens.saveUserConfigToSession(r)}}},a}),define("api/UserDefinedScreens",["underscore","backbone","marionette","jquery","api/ResourceService","api/Navigation","api/SessionStorage","api/UserService","api/Messaging","main/api/WorkspaceFilters"],function(e,t,n,i,o,r,a,s,l,d){"use strict";function c(e){return e.filterName||"Filtered"}function u(e){return"gist"===e?"trend":e}function h(){var e,t=o.patientRecordService.getCurrentPatient();return e=t.get("icn")?t.get("icn"):t.get("pid")?t.get("pid"):t.get("id")}var p={},g=(l.request("ScreensManifest"),l.request("AppletsManifest")),f=l.request("PreDefinedScreens"),m="UserScreensConfig";p.getAppletDefaultConfig=function(t){var n=e.find(g.applets,function(e){return e.id===t});return e.isUndefined(n)&&(n={id:t,title:"Title undefined"}),e.clone(n)},p.serializeGridsterScreen=function(t,n){var o=t.find("[data-row]"),r={id:n,contentRegionLayout:"gridster",appletHeader:"navigation",appLeft:"patientInfo",userDefinedScreen:!0},a=[];return o.each(function(){var t,n=i(this).find("[data-appletid]"),o={};if(n.length>0){if(t=n.attr("data-appletid"),!e.isUndefined(t)){o=p.getAppletDefaultConfig(t),o.instanceId=n.attr("data-instanceid"),o.region=i(this).attr("id"),o.dataRow=i(this).attr("data-row"),o.dataCol=i(this).attr("data-col"),o.dataSizeX=i(this).attr("data-sizex"),o.dataSizeY=i(this).attr("data-sizey"),o.dataMinSizeX=i(this).attr("data-min-sizex"),o.dataMinSizeY=i(this).attr("data-min-sizey"),o.dataMaxSizeX=i(this).attr("data-max-sizex"),o.dataMaxSizeY=i(this).attr("data-max-sizey"),o.viewType=i(this).attr("data-view-type");var r=i(".panel-title-label",this).text()||o.title;o.title=r.trim(),o.filterName=i(this).attr("data-filter-name"),a.push(o)}}else if(t=i(this).attr("data-appletid"),!e.isUndefined(t)){o=p.getAppletDefaultConfig(t),o.instanceId=i(this).attr("data-instanceid"),o.region=i(this).attr("id"),o.dataRow=i(this).attr("data-row"),o.dataCol=i(this).attr("data-col"),o.dataSizeX=i(this).attr("data-sizex"),o.dataSizeY=i(this).attr("data-sizey"),o.dataMinSizeX=i(this).attr("data-min-sizex"),o.dataMinSizeY=i(this).attr("data-min-sizey"),o.dataMaxSizeX=i(this).attr("data-max-sizex"),o.dataMaxSizeY=i(this).attr("data-max-sizey"),o.viewType=i(this).attr("data-view-type");var s="";s="default"===i(this).attr("data-view-type")?i("#view-option").attr("data-viewtype"):i(this).attr("data-view-type")||i("#view-option").attr("data-viewtype"),o.viewType=s;var r=i(".applet-title",this).text()||o.title;o.title=r.trim(),o.filterName=i(this).attr("data-filter-name"),a.push(o)}}),r.applets=a,r},p.setAppletDataAttribute=function(t){var n=e.find(g.applets,function(e){return e.id===t.id}),i=!e.isEmpty(n);if(i){var o=n.permissions||[];e.each(o,function(e){return s.hasPermission(e)?void 0:(t.noPermission=!0,!1)})}else t.notFound=!0;e.isUndefined(t.dataSizeX)&&(t.dataSizeX=4),e.isUndefined(t.dataSizeY)&&(t.dataSizeY=4),"expanded"===t.viewType?(e.isUndefined(t.dataSizeX)&&(t.dataSizeX=8),t.dataMinSizeX=8,t.dataMaxSizeX=12,t.dataMinSizeY=4,t.dataMaxSizeY=12):"gist"===t.viewType?(t.dataMinSizeX=4,t.dataMaxSizeX=8,t.dataMinSizeY=4,t.dataMaxSizeY=12):(t.dataMinSizeX=4,t.dataMaxSizeX=8,t.dataMinSizeY=4,t.dataMaxSizeY=12)},p.getGridsterTemplate=function(t){var n='<div class="gridster" id="'+t.id+'">';return e.each(t.applets,function(e){"none"!=e.region.toLowerCase()&&(p.setAppletDataAttribute(e),n+='<div id="'+e.region+'" data-row="'+e.dataRow+'" data-col="'+e.dataCol+'" data-sizex="'+e.dataSizeX+'" data-sizey="'+e.dataSizeY+'" data-min-sizex="'+e.dataMinSizeX+'" data-max-sizex="'+e.dataMaxSizeX+'" data-min-sizey="'+e.dataMinSizeY+'" data-max-sizey="'+e.dataMaxSizeY+'" data-filter-name="'+c(e)+'" data-view-type="'+e.viewType+'" ></div>')}),n+="</div>{{{paginationHtml}}}"},p.getGridsterMaxColumn=function(t){var n=0;return e.each(t.applets,function(e){if("none"!=e.region.toLowerCase()){p.setAppletDataAttribute(e);var t=parseInt(e.dataSizeX),i=parseInt(e.dataCol);t+i>n&&(n=t+i)}}),n},p.getGridsterTemplateForEditor=function(t){var n=new i.Deferred;return p.updateScreenModuleFromStorage(t).done(function(){var i='<div id="gridster2" class="gridster"><ul>';e.each(t.applets,function(e){"none"!=e.region.toLowerCase()&&(p.setAppletDataAttribute(e),i+='<li id="'+e.region+'" data-appletid="'+e.id+'" data-instanceid="'+e.instanceId+'" data-row="'+e.dataRow+'" data-col="'+e.dataCol+'" data-sizex="'+e.dataSizeX+'" data-sizey="'+e.dataSizeY+'" data-min-sizex="'+e.dataMinSizeX+'" data-max-sizex="'+e.dataMaxSizeX+'" data-min-sizey="'+e.dataMinSizeY+'" data-max-sizey="'+e.dataMaxSizeY+'" data-filter-name="'+c(e)+'" data-view-type="'+e.viewType+'" ><div class="'+(e.notFound?"applet-not-found":e.noPermission?"permission-denied-applet":"fa fa-cog edit-applet")+'"></div><br><div class="formatButtonText"><p class="applet-title">'+e.title+"<p>"+(e.notFound?'<span class="text-warning">Applet Not Found</span>':e.noPermission?'<span class="text-danger">Permission Denied</span>':u(e.viewType))+"</div>")}),i+="</ul></div>",n.resolve(i)}),n},p.getGridsterTemplateForPreview=function(t){var n='<div id="gridsterPreview" class="gridster"><ul>';return e.each(t.applets,function(e){"none"!=e.region.toLowerCase()&&(p.setAppletDataAttribute(e),n+='<li data-row="'+e.dataRow+'" data-col="'+e.dataCol+'" data-sizex="'+e.dataSizeX+'" data-sizey="'+e.dataSizeY+'" ><h4 class="applet-title">'+e.title+'</h4><p class="applet-type">'+u(e.viewType)+"</p></li>")}),n+="</ul></div>"},p.updateScreenModuleFromStorage=function(t){var n=new i.Deferred;if(t.config&&t.config.predefined)return n.resolve(),n;var o=p.getGridsterConfigFromSession(t.id);return!o||e.isUndefined(o.applets)||e.isNull(o.applets)||(t.applets=o.applets),n.resolve(),n},p.saveConfigToJDS=function(e,t,n){var i=h(),r={resourceTitle:"write-user-defined-screens",fetchType:"POST",criteria:{screenType:t,param:e,pid:i}};n&&(r.onSuccess=n),o.fetchCollection(r)},p.saveGridsterConfig=function(e,t,n){p.saveConfigToJDS(e,t,n),p.saveGridsterConfigToSession(e,t)},p.saveGridsterConfigToSession=function(n,i){var o=a.get.sessionModel(m).toJSON(),r=-1;(e.isNull(n.id)||e.isUndefined(n.id))&&(n.id=i),e.each(o.userDefinedScreens,function(e,t){e&&e.id===i&&(r=t)}),-1===r?o&&o.userDefinedScreens&&o.userDefinedScreens.push(n):o.userDefinedScreens[r]=n,a.set.sessionModel(m,new t.Model(o))},p.getUserConfigFromSession=function(){return a.get.sessionModel(m).toJSON()},p.saveUserConfigToSession=function(e){a.set.sessionModel(m,new t.Model(e))},p.getScreensConfigFromSession=function(){var e=a.get.sessionModel(m).toJSON();return e.userScreensConfig?e.userScreensConfig:e},p.getGridsterConfigFromSession=function(t){var n=a.get.sessionModel(m).toJSON(),i=e.find(n.userDefinedScreens,function(e){return e&&e.id===t});return i||a.get.sessionModel(t).toJSON()},p.getConfig=function(n){var r=new i.Deferred,l=h(),d=s.getUserSession();if(e.isUndefined(n)||e.isUndefined(d)||"loggedout"===d.get("status"))return r.resolve(new t.Model({})),r;var c=a.get.sessionModel(n).toJSON();if(!e.isUndefined(c)&&!e.isEmpty(c))return r.resolve(new t.Model(c)),r;var u,p={resourceTitle:"user-defined-screens",criteria:{pid:l,screenType:n,predefinedScreens:e.pluck(f.screens,"id")}};return p.onSuccess=function(){u.length>0?(r.resolve(u.at(0)),"loggedin"===d.get("status")&&a.set.sessionModel(n,u.at(0))):r.resolve(new t.Model({}))},p.onError=function(){r.resolve(new t.Model({}))},u=o.fetchCollection(p),r},p.cloneScreenFilters=function(e,t){d.cloneScreenFilters(e,t)},p.cloneScreenFiltersToSession=function(e,t){d.cloneScreenFiltersToSession(e,t)},p.cloneScreen=function(e,t,n){var r=o.buildUrl("write-user-defined-screens-copy",{fromId:e,toId:t,predefined:n});i.post(r).done(function(){console.log("Success in saving clone of workspace "+e)}).fail(function(){console.log("Error in saving clone of workspace "+e)})},p.cloneUDScreenToSession=function(t,n){var i=e.clone(p.getGridsterConfigFromSession(t));i.id=n,p.saveGridsterConfigToSession(i,n)},p.saveScreensConfig=function(t,n){var i=e.some(t.screens,function(e){return!e});if(i){console.error("Error: Cannot save a null or undefined screen. Removing that screen");var o=e.filter(t.screens,function(t){return e.isUndefined(t)||null===t?void 0:t});t.screens=o}var r=h();r&&(p.saveScreensConfigToSession(t),p.saveConfigToJDS(t,m,n))},p.saveScreensConfigToSession=function(e){var n=a.get.sessionModel(m).toJSON();n.userScreensConfig?(n.userScreensConfig.screens=e.screens,n.userDefinedScreens||(n.userDefinedScreens=[])):n={userScreensConfig:{screens:e.screens},userDefinedScreens:[]},a.set.sessionModel(m,new t.Model(n))},p.cloneGridsterConfig=function(t,n){var i=a.get.sessionModel(t).toJSON();e.isUndefined(i)||e.isEmpty(i)||(i.id=n,p.saveGridsterConfig(i,n))},p.addNewScreen=function(e,t,n){var i=p.getScreensConfigFromSession(),o=i.screens;t?o.splice(t,0,e):o.push(e),p.saveScreensConfig(i,n)},p.screensConfigNullCheck=function(){var t=p.getScreensConfig(m);t.done(function(t){var n=e.filter(t.screens,function(t){return e.isUndefined(t)||null===t?void console.log("Deleted null screen"):t});t.screens=n,p.saveScreensConfig(t)})},p.getScreensConfig=function(){var n=p.getConfig(m),o=new i.Deferred,l=function(t){var n=[],i=function(t){if(!e.isUndefined(t)&&!e.isUndefined(t.hasPermission)){if(e.isFunction(t.hasPermission)){var n=t.hasPermission();return e.isBoolean(n)?n:!1}return!1}return!0};return e.each(t,function(t){(e.isUndefined(t.hasPermission)||i(t))&&n.push(t)}),n};return n.done(function(n){var i=l(f.screens),d=e.clone(i),c=n.toJSON();c.userScreensConfig||(c.userScreensConfig={screens:[]}),n=c.userScreensConfig?c.userScreensConfig:c;var u=ADK.ADKApp.userSelectedDefaultScreen;e.isEmpty(n)&&(n={screens:[]});var h=!1;n.screens=e.filter(n.screens,function(t){return!e.has(t,"hasPermission")&&!e.has(t,"addNavigationTab")}),e.each(n.screens,function(e){e&&(h=!e.predefined,h&&e.defaultScreen&&(u=e.id))}),e.each(d,function(i){var o=e.filter(n.screens,function(o){if(o&&i&&o.title===i.title){if(o.id===i.id)return e.has(i,"addNavigationTab")&&!e.has(o,"addNavigationTab")&&(o.addNavigationTab=i.addNavigationTab),o.id===i.id;if(console.warn("Removing duplicate predefined screen: "+o.title),n.screens=e.without(n.screens,o),p.saveGridsterConfig({},o.id),o.defaultScreen===!0){var a=e.map(n.screens,function(e){return e.defaultScreen=!1,"overview"===e.id&&(e.defaultScreen=!0),e});n.screens=a,console.log("Deleting default screen, setting Overview as default screen")}p.saveScreensConfig(n),t.history.fragment===o.id&&r.navigate(ADK.ADKApp.predefinedDefaultScreen,{trigger:!1})}});o.length<1&&i&&(n.screens.push(i),i.defaultScreen===!0&&(u=i.id))}),ADK.ADKApp.userSelectedDefaultScreen=u,"loggedin"===s.getUserSession().get("status")&&a.set.sessionModel(m,new t.Model(c)),o.resolve(n)}),o},p.sortScreensByIds=function(t){var n=p.getScreensConfigFromSession(),i=n.screens;if(i.length==t.length){var o={screens:[]};e.each(t,function(t){var n=e.find(i,function(e){return e.id===t});o.screens.push(n)}),p.saveScreensConfig(o)}},p.getScreenBySnomedCt=function(e){var t=p.getScreensConfig(),n=new i.Deferred,o=[];return t.done(function(t){for(var i=t.screens,r=0,a=i.length;a>r;r++){var s=i[r].problems;if(s)for(var l=0,d=s.length;d>l;l++)s[l].snomed===e&&o.push(i[r])}n.resolve(o)}),n.promise()},p.saveScrollPositionToSession=function(e){var n={scrollPosition:e};a.set.sessionModel("WorkspaceScrollPosition",new t.Model(n))},p.getScrollPositionFromSession=function(){var e=a.get.sessionModel("WorkspaceScrollPosition").toJSON().scrollPosition;return void 0!==e?e:0},p.setHasCustomize=function(t){var n=p.getScreensConfigFromSession(),i=n.screens,o={screens:[]},r=e.find(i,function(e){return e.id===t&&e.hasCustomize});r&&(e.each(i,function(e){e.id===t&&(e.hasCustomize=!1),o.screens.push(e)}),p.saveScreensConfig(o))};var v=function(e,t,n){for(var i=-1,o=e?e.length:0;++i<o;)if(t(e[i],i,e))return i;return-1},b=function(e,t){var n=v(e.userDefinedGraphs,function(e){return e.id===t});return n},y=function(e,t){if(!e)return-1;var n=v(e.applets,function(e){return e.instanceId===t});return n};return p.getStackedGraphForOneAppletFromSession=function(t,n){var i=p.getUserConfigFromSession(),o=b(i,t);if(-1!==o){var r=i.userDefinedGraphs[o],a=y(r,n);if(-1!==a){var s=e.clone(r.applets[a].graphs);return s}}},p.removeOneStackedGraphFromSession=function(e,t,n,i){var o=ADK.UserDefinedScreens.getUserConfigFromSession(),r=b(o,e);if(-1!==r){var a=o.userDefinedGraphs[r],s=y(a,t);if(-1!==s){var l=a.applets[s],d=-1;l.graphs.forEach(function(e,t){e.graphType===n&&e.typeName===i&&(d=t)}),d>-1&&o.userDefinedGraphs[r].applets[s].graphs.splice(d,1),0===o.userDefinedGraphs[r].applets[s].graphs.length&&o.userDefinedGraphs[r].applets.splice(s,1),p.saveUserConfigToSession(o)}}},p.hasStackedGraphForApplet=function(e,t){var n=ADK.UserDefinedScreens.getUserConfigFromSession(),i=b(n,e);if(-1===i)return!1;var o=n.userDefinedGraphs[i],r=y(o,t);return-1===r?!1:!0},p.removeAllStackedGraphFromSession=function(e,t){var n=ADK.UserDefinedScreens.getUserConfigFromSession(),i=b(n,e);if(-1!==i){var o=n.userDefinedGraphs[i],r=y(o,t);-1!==r&&(n.userDefinedGraphs[i].applets.splice(r,1),p.saveUserConfigToSession(n))}},p.addOneStackedGraphToSession=function(e,t,n,i){var o=ADK.UserDefinedScreens.getUserConfigFromSession();o.userDefinedGraphs||(o.userDefinedGraphs=[]);var r=b(o,e);-1===r&&(o.userDefinedGraphs||(o.userDefinedGraphs=[]),o.userDefinedGraphs.push({applets:[],id:e}),r=o.userDefinedGraphs.length-1);var a=o.userDefinedGraphs[r],s=y(a,t);if(-1===s)return o.userDefinedGraphs[r].applets.push({graphs:[{graphType:n,typeName:i}],instanceId:t}),void p.saveUserConfigToSession(o);var l=a.applets[s];l.graphs||(l.graphs=[]);var d=-1;l.graphs.forEach(function(e,t){e.graphType===n&&e.typeName===i&&(d=t)}),d>-1&&o.userDefinedGraphs[r].applets[s].graphs.splice(d,1),o.userDefinedGraphs[r].applets[s].graphs.push({graphType:n,typeName:i}),p.saveUserConfigToSession(o)},p.reorderStackedGraphsInSession=function(e,t,n){var i=ADK.UserDefinedScreens.getUserConfigFromSession();if(p.hasStackedGraphForApplet(e,t)){var o=b(i,e),r=i.userDefinedGraphs[o],a=y(r,t);i.userDefinedGraphs[o].applets[a].graphs=n,p.saveUserConfigToSession(i)}},p.cloneScreenGraphsToSession=function(t,n){var i=ADK.UserDefinedScreens.getUserConfigFromSession(),o=b(i,t);if(-1!==o){var r=e.clone(i.userDefinedGraphs[o]);r.id=n;var a=b(i,n);a>-1?i.userDefinedGraphs[a]=r:i.userDefinedGraphs.push(r),ADK.UserDefinedScreens.saveUserConfigToSession(i)}},p.updateScreenId=function(e,t){p.updateScreenIdInSession(e,t),p.updateScreenIdInJDS(e,t)},p.updateScreenIdInSession=function(e,t){var n=ADK.UserDefinedScreens.getUserConfigFromSession(),i=v(n.userDefinedScreens,function(t){return t.id===e});i>-1&&(n.userDefinedScreens[i].id=t);var o=v(n.userDefinedFilters,function(t){return t.id===e});o>-1&&(n.userDefinedFilters[o].id=t);var r=v(n.userDefinedGraphs,function(t){return t.id===e});r>-1&&(n.userDefinedGraphs[r].id=t);var a=v(n.userDefinedSorts,function(t){return t.id===e});a>-1&&(n.userDefinedSorts[a].id=t),ADK.UserDefinedScreens.saveUserConfigToSession(n)},p.updateScreenIdInJDS=function(e,t,n){var i=h(),r={resourceTitle:"write-user-defined-screens",fetchType:"PUT",criteria:{oldId:e,newId:t,pid:i}};n&&(r.onSuccess=n),o.fetchCollection(r)},p.removeOneScreenFromSession=function(e){d.removeAllFiltersForOneScreenFromSession(e),p.removeAllStackedGraphForOneScreenFromSession(e)},p.removeAllStackedGraphForOneScreenFromSession=function(e){var t=ADK.UserDefinedScreens.getUserConfigFromSession(),n=b(t,e);-1!==n&&(t.userDefinedGraphs.splice(n,1),p.saveUserConfigToSession(t))},p}),define("api/CCOWService",["backbone","jquery","api/ResourceService","api/SessionStorage","api/UserService","api/Messaging","main/components/views/ccowModalView","api/UserDefinedScreens"],function(e,t,n,i,o,r,a,s){"use strict";var l={contextorControl:null,getTokenFromContextItems:function(){var e=this.contextorControl.CurrentContext,t="~~TOK~~",n=new Enumerator(e);if(!n.atEnd())for(;!n.atEnd();n.moveNext()){var i=n.item().name,o=n.item().value;i.indexOf("vistatoken")>0&&(t+=o)}return t},getDfnFromContextItems:function(){var e,t=this.contextorControl.CurrentContext,n=new Enumerator(t);if(!n.atEnd())for(;!n.atEnd();n.moveNext()){var i=n.item().name,o=n.item().value;i.indexOf("dfn")>0&&(e=o)}return e},loadSessionObject:function(e){var t=i.getModel("ccow");t.set("pid",e.pid),t.set("state","listening"),t.set("status","Connected"),this.persistCcowSession(t)},persistCcowSession:function(e){i.clear("ccow"),i.addModel("ccow",e)},ensureICNforPatient:function(e,i){var r=this;t.ajax({url:n.buildUrl("vergencevaultproxy-geticnforccow"),type:"POST",contentType:"application/json",dataType:"json",processData:!1,data:JSON.stringify({dfn:e,site:o.getUserSession().get("site")}),success:function(e){r.loadSessionObject(e),i&&"function"==typeof i&&i(e)},error:function(e){r.updateCcowStatus("Disconnected")}})},handleContextChange:function(e,t){var n=this;if(n.contextorControl&&2===n.contextorControl.State)try{var i=new ActiveXObject("Sentillion.ContextItem.1"),o=new ActiveXObject("Sentillion.ContextItem.1"),r=new ActiveXObject("Sentillion.ContextItem.1"),a=new ActiveXObject("Sentillion.ContextItemCollection.1");i.name="Patient.co.PatientName",i.value=e.get("displayName")+"^^^^",a.Add(i),n.getSiteInfo(function(i){i.error?n.updateCcowStatus("Disconnected",""):n.updateCcowStatus("Connected");var s=new ActiveXObject("Sentillion.Contextor.1");try{s.Run("eHMP#","",!0),s.Suspend()}catch(l){return n.updateCcowStatus("Disconnected"),t()}n.contextorControl.StartContextChange(),o.name="Patient.id.MRN.DFN_"+i.Site.division,i.Site.production||(o.name=o.name+"_TEST"),o.value=e.get("pid"),a.Add(o),null!==e.get("icn")&&(r.name="Patient.id.MRN.NationalIDNumber",i.Site.production||(r.name=r.name+"_TEST"),r.value=e.get("icn"),a.Add(r));for(var d=new Enumerator(a);!d.atEnd();d.moveNext()){d.item().name,d.item().value}try{var c=n.contextorControl.EndContextChange(!0,a);1===c?t():2===c?t(!0):(n.updateCcowStatus("Suspended"),t())}catch(u){n.updateCcowStatus("Disconnected"),t()}})}catch(s){n.updateCcowStatus("Disconnected"),t()}},getSiteInfo:function(e){t.ajax({url:n.buildUrl("vergencevaultproxy-getSiteInfo"),contentType:"application/json",data:{site:o.getUserSession().get("site")},success:function(t){e(t)},error:function(t){e({error:"Site Info cannot be obtained"})}})},formatPatientNameForContext:function(e){var t=e.replace(",","^");return t+="^^^^"},updateContextItems:function(e,t,n){var o=i.getModel("ccow");o.set("pid",e);for(var r=o.get("contextItems"),a=0;a<r.length;a++)r[a].name.indexOf("patient.id.mrn.dfn")>-1?r[a].value=t:r[a].name.indexOf("patient.co.patientname")>-1&&(r[a].value=n);o.set("contextItems",r),i.clear("ccow"),i.addModel("ccow",o)},suspendContext:function(e){try{this.contextorControl.Suspend(),this.updateCcowStatus("Suspended"),e&&e()}catch(t){this.updateCcowStatus("Disconnected")}},breakContextLink:function(e,t){this.contextorControl.Suspend();try{this.updateCcowStatus("Suspended"),e&&e()}catch(n){this.updateCcowStatus("Disconnected"),t()}},resumeContext:function(e){this.contextorControl.Resume();try{this.updateCcowStatus("Connected"),e&&e()}catch(t){this.updateCcowStatus("Disconnected")}},updateCcowStatus:function(e){var t=i.getModel("ccow");t.set("status",e),i.clear("ccow"),i.addModel("ccow",t),r.trigger("ccow:updatedStatus",e)},getCcowStatus:function(){return i.getModel("ccow").get("status")},quit:function(){this.contextorControl&&2===this.contextorControl.State&&this.contextorControl.Suspend()}};return"ActiveXObject"in window&&(window.onbeforeunload=function(){var e=i.getModel("ccow");e.set("state","initial"),i.clear("ccow"),i.addModel("ccow",e),l.quit()},r.on("user:beginSessionEnd",function(){try{l.contextorControl&&2===l.contextorControl.State&&l.contextorControl.Suspend()}catch(e){}})),l}),define("main/ui_components/forms/controls/toggleOptionsChecklist",["backbone","puppetForm","handlebars","underscore"],function(e,t,n){"use strict";var i=e.Marionette.ItemView.extend({className:"toc-table-header-btn",template:n.compile(['<a class="btn btn-primary btn-sm center-block {{id}}" title="{{title}}" aria-hidden="true">{{label}}</button>'].join("\n")),events:{click:"controlTOCHeaderClick","control:TOC:header:click":"controlTOCHeaderClick"},initialize:function(){this._columnIterationValue=!0},controlTOCHeaderClick:function(e){this.triggerMethod("control:TOC:header:click"),this.next()},next:function(){this._columnIterationValue=!this._columnIterationValue}}),o=e.Marionette.CollectionView.extend({className:"toc-table-header",initialize:function(e){this.controlView=e.controlView,this.collection=e.collection},childView:i,childEvents:{"control:TOC:header:click":function(e){this.controlView.toggleRadioButtonsInColumn(e._columnIterationValue,e.model.get("id"))}}}),r=e.Marionette.ItemView.extend({className:"toc-option",getTemplate:function(){return this.model.has(this.attributeMapping.columnItemName)?n.compile(['<div class="control form-group {{columnId}}-radio-group">','<div class="radio{{#if disabled}} disabled{{/if}}">','<label for="row-{{rowIndex}}-{{columnId}}-yes">','<input{{yesCheckedValue}}{{#if disabled}} disabled{{/if}} type="radio" class="{{columnId}}" name="row-{{rowIndex}}-{{columnId}}" id="row-{{rowIndex}}-{{columnId}}-yes" value="yes" title="Press tab to view options. Press spacebar to select yes for {{title}}"> Yes',"</label>",'<label for="row-{{rowIndex}}-{{columnId}}-no">','<input{{noCheckedValue}}{{#if disabled}} disabled{{/if}} type="radio" class="{{columnId}}" name="row-{{rowIndex}}-{{columnId}}" id="row-{{rowIndex}}-{{columnId}}-no" value="no" title="Press tab to view options. Press spacebar to select no for {{title}}"> No',"</label>","</div>","</div>"].join("\n")):!1},templateHelpers:function(){return{yesCheckedValue:function(){return _.isBoolean(this.value)&&this.value?" checked":""},noCheckedValue:function(){return _.isBoolean(this.value)&&!this.value?" checked":""}}},events:{"change input:radio":"updateModelValue"},initialize:function(e){this.attributeMapping=e.attributeMapping,this._privateAttributes=e._privateAttributes,this.listenTo(this._privateAttributes,"change:disabled",this.render)},serializeModel:function(e){return _.defaults(e.toJSON(),this._privateAttributes.toJSON())},updateModelValue:function(e){this.model.set(this.attributeMapping.columnItemValue,"yes"===this.$el.find("input:checked").val()),this.trigger("row:radio:click")}}),a=e.Marionette.CompositeView.extend({tagName:"fieldset",className:function(){var e="toc-row";return this.model.get("disabled")&&(e+=" row-disabled"),e},events:{"change input:checkbox":"checkbox:value:change","control:TOC:checkbox:disable":"disableCheckbox"},"checkbox:value:change":function(e){this.model.set("value",this.$(e.currentTarget).is(":checked"))},template:n.compile(['<legend class="sr-only">{{label}}</legend>','<div class="toc-flex">','<div class="toc-row-title-region">','<div class="toc-row-title">','<div class="control form-group checkbox-control">','<div class="checkbox">','<label for={{clean-for-id id}} class="sr-only">{{label}}</label>','<input type="checkbox" id={{clean-for-id id}} name="{{id}}"{{#if value}} checked {{/if}}>',"</div>","</div>",'<p class="faux-legend">{{label}}</p>',"</div>","</div>",'<div class="toc-row-options"></div>',"</div>"].join("\n")),ui:{RowColumnRegionSelector:".toc-row-options"},childViewContainer:"@ui.RowColumnRegionSelector",childView:r,childViewOptions:function(t,n){return{model:this.model.get(this.attributeMapping.columnCollection).find(function(e){return e.get(this.attributeMapping.columnItemName)==t.get("id")},this)||new e.Model,_privateAttributes:new e.Model({columnId:t.get("id"),title:t.get("title"),disabled:!this.model.get(this.attributeMapping.value),rowIndex:this.rowIndex,columnIndex:n}),attributeMapping:this.attributeMapping}},childEvents:{"row:radio:click":function(){this.model.trigger("change")}},modelEvents:{},serializeModel:function(e){return{id:e.get(this.attributeMapping.id),label:e.get(this.attributeMapping.label),value:e.get(this.attributeMapping.value)||!1}},updateColumnsDisabledStatus:function(e){this.children.each(function(e){e._privateAttributes.set("disabled",!this.model.get(this.attributeMapping.value))},this)},initialize:function(t){this.attributeMapping=t.attributeMapping,this.rowIndex=t.rowIndex,this.modelEvents["change:"+this.attributeMapping.value]="updateColumnsDisabledStatus",this.delegateEvents();var n=this.model.get(this.attributeMapping.columnCollection);_.isUndefined(n)?this.setColumnCollectionOnModel([]):n instanceof e.Collection||(_.isArray(n)?this.setColumnCollectionOnModel(n):(console.error("Type Error: expecting array or Backbone collection for ToggleOptionsChecklist control's columnCollection \n model:",this.model),this.setColumnCollectionOnModel([])))},setColumnCollectionOnModel:function(t){this.model.set(this.attributeMapping.columnCollection,new e.Collection(t),{silent:!0})}}),s=e.Marionette.CollectionView.extend({className:"toc-table-body",initialize:function(e){this.attributeMapping=e.attributeMapping,this.columnHeaders=e.columnHeaders},childView:a,childViewOptions:function(e,t){return{rowIndex:t,collection:this.columnHeaders,attributeMapping:this.attributeMapping}}}),l={className:"control form-group toc row",template:n.compile(['<div class="toc-description">',"<p><strong>{{label}}</strong></p>","</div>",'<div class="toc-table">','<div class="toc-table-header-region"/>','<div class="toc-table-body-region"/>',"</div>"].join("\n")),ui:{HeaderRegionSelector:".toc-table-header-region",BodyRegionSelector:".toc-table-body-region"},regions:{HeaderRegion:"@ui.HeaderRegionSelector",BodyRegion:"@ui.BodyRegionSelector"},attributeMappingDefaults:{id:"id",value:"value",label:"label",columnCollection:"columnCollection",columnItemName:"name",columnItemValue:"value"},events:{"control:TOC:header:click":function(e,t){this.HeaderRegion.currentView.trigger("control:TOC:header:click")},"control:TOC:header:add":function(e,t){this.columnHeaders.add(t)},"control:TOC:header:remove":function(e,t){this.columnHeaders.remove(this.columnHeaders.where(t))},"control:TOC:header:update":function(e,t){this.columnHeaders.reset(t)}},initialize:function(e){this.initOptions(e),this.hasAllRequiredOptionsDefined(),this.setAttributeMapping(),this.setFormatter(),this.listenToFieldName(),this.listenToFieldOptions(),this.setExtraClasses(),this.initCollection("collection"),this.selectedCountName=this.field.get("selectedCountName")||null,this.initColumnHeaderCollection(this.field.get("columnHeaders")),this.label=e.field.get("label")||"";var t=this;this.selectedCountName?(this.listenTo(this.collection,"change",function(){t.updateCount(),t.model.trigger("change")}),this.updateCount()):this.listenTo(this.collection,"change",function(){t.model.trigger("change")}),this.stopListening(this.model,"change:"+this.modelName,function(){this.render()}),this.model.set(this.modelName,this.collection),this.listenTo(this.model,"change:"+this.modelName,function(){this.render()})},onShow:function(){this.showChildView("HeaderRegion",new o({collection:this.columnHeaders,controlView:this})),this.showChildView("BodyRegion",new s({collection:this.model.get(this.modelName),attributeMapping:this.attributeMapping,columnHeaders:this.columnHeaders}))},serializeModel:function(){return{label:new n.SafeString(this.label)}},updateCount:function(){var e={};e[this.attributeMapping.value]=!0,this.model.set(this.selectedCountName,this.collection.where(e).length)},initColumnHeaderCollection:function(t){_.isUndefined(t)?this.columnHeaders=new e.Collection:t instanceof e.Collection?this.columnHeaders=t:this.columnHeaders=new e.Collection(t)},toggleRadioButtonsInColumn:function(e,t){this.BodyRegion.currentView.$('input[type="radio"]:enabled[value='+(e?"yes":"no")+"]."+t).click()}},d=t.ToggleOptionsChecklistControl=e.Marionette.LayoutView.extend(_.defaults(l,_.defaults(t.CommonPrototype,t.CommonEventsFunctions,t.CommonContainerEventsFunctions)));return d}),define("main/ui_components/collapsible_container/component",["backbone","marionette","jquery","handlebars"],function(e,t,n,i){"use strict";var o=e.Marionette.LayoutView.extend({template:i.compile(['<div class="row">','<div class="well well-collapse">','<div class="collapsibleContainerHeader">','<div class="col-xs-11 collapsibleContainerHeaderRegion">','<div class="header-content"></div>',"</div>",'<div class="col-xs-1">',"{{#if collapse}}",'<button id="collapsibleContainerTrigger" class="btn btn-sm btn-icon collapsed left-margin-md top-margin-md" title="Press enter to expand or collapse" type="button" data-collapse-button="true"></button>',"{{/if}}","</div>","</div>",'<div class="collapsibleContainerCollapseRegion">','<div class="col-xs-12 collapse-content collapse"></div>',"</div>","</div>","</div>"].join("\n")),className:"collapsible-container-component",events:{"click @ui.CollapsibleTrigger":function(e){e.preventDefault(),this.ui.CollapseRegionContainer.collapse("toggle"),this.ui.ToggleButton.toggleClass("collapsed")}},ui:{HeaderRegionContainer:".collapsibleContainerHeaderRegion > .header-content",CollapseRegionContainer:".collapsibleContainerCollapseRegion > .collapse-content",CollapsibleTrigger:"#collapsibleContainerTrigger",
ToggleButton:"button#collapsibleContainerTrigger"},regions:{HeaderRegion:"@ui.HeaderRegionContainer",CollapseRegion:"@ui.CollapseRegionContainer"},initialize:function(e){this.collapsibleContainerHeaderOptions=e.headerItems,this.collapsibleContainerCollapseOptions=e.collapseItems,this.name=e.name||"",this.uid=this.name.replace(/[^A-Z0-9]+/gi,"-")},onRender:function(){this.bindUIElements()},onBeforeShow:function(){this.headerView=this.collapsibleContainerHeaderOptions.view,_.isFunction(this.headerView.initialize)||(this.headerView=new this.headerView),this.collapseView=this.collapsibleContainerCollapseOptions.view,_.isFunction(this.collapseView.initialize)||(this.collapseView=new this.collapseView),this.$el.find("#collapsibleContainerTrigger").attr("data-target","#collapsibleContainerCollapseRegion-"+this.uid),this.$el.find(".collapsibleContainerCollapseRegion").attr("id","collapsibleContainerCollapseRegion-"+this.uid),this.showChildView("HeaderRegion",this.headerView),this.showChildView("CollapseRegion",this.collapseView)},serializeData:function(){var e={collapse:!0};return _.isFunction(this.collapsibleContainerCollapseOptions.view)||(e.collapse=this.collapsibleContainerCollapseOptions.view.collection.length>0?!0:!1),e}});return o}),define("main/ui_components/forms/controls/collapsibleContainer",["backbone","puppetForm","handlebars","main/ui_components/collapsible_container/component"],function(e,t,n,i){"use strict";var o={template:n.compile('<div class="form-collapsible-container-region"/>'),ui:{FormCollapsibleContainerRegion:".form-collapsible-container-region"},regions:{FormCollapsibleContainerRegion:"@ui.FormCollapsibleContainerRegion"},defaults:{name:"",extraClasses:[],headerItems:[],collapseItems:[]},requiredFields:["name"],buildCollections:function(n,i){n instanceof e.Collection?this.headerItems=n:this.headerItems=new t.Fields(n),i instanceof e.Collection?this.collapseItems=i:this.collapseItems=new t.Fields(i);var o={items:_.flatten(_.reduce(this.headerItems.models,function(e,t){return e.push(t.attributes),e},[],this)),name:"headerItemsList"},r={items:_.flatten(_.reduce(this.collapseItems.models,function(e,t){return e.push(t.attributes),e},[],this)),name:"collapseItemsList"},a=this;_.each([o,r],function(e){this[e.name]={label:e.name,view:function(){var n=new t.Field({control:"container",items:e.items,extraClasses:["row"]});return new t.ContainerControl({field:n,model:a.model,componentList:a.componentList})}()}},this)},initialize:function(t){this.collection=new e.Collection,this.initOptions(t),this.hasAllRequiredOptionsDefined(),this.setFormatter(),this.listenToFieldName(),this.setExtraClasses(),this.options=t;var n=t.field.get("headerItems")||[],i=t.field.get("collapseItems")||[];this.buildCollections(n,i),this.headerItems.on("change reset add remove",function(){this.buildCollections(this.headerItems,this.collapseItems),this.render()},this),this.collapseItems.on("change reset add remove",function(){this.buildCollections(this.headerItems,this.collapseItems),this.render()},this)},commonOnRender:t.CommonPrototype.onRender,onRender:function(){this.commonOnRender(),this.showChildView("FormCollapsibleContainerRegion",new i({name:this.field.get("name"),headerItems:{name:this.headerItemsList.label,view:this.headerItemsList.view},collapseItems:{name:this.collapseItemsList.label,view:this.collapseItemsList.view}}))},events:_.defaults({"control:collapsed":function(e,t){if(_.isBoolean(t)){var n=t?"hide":"show";t?this.$el.find("button#collapsibleContainerTrigger").addClass("collapsed"):this.$el.find("button#collapsibleContainerTrigger").removeClass("collapsed"),this.$el.find(".collapsibleContainerCollapseRegion > .collapse-content").collapse(n)}},"control:headerItems:add":function(e,t){this.addModel("headerItems",t,e)},"control:headerItems:remove":function(e,t){this.removeModel("headerItems",t,e)},"control:headerItems:update":function(e,t){this.updateCollection("headerItems",t,e)},"control:collapseItems:add":function(e,t){this.addModel("collapseItems",t,e)},"control:collapseItems:remove":function(e,t){this.removeModel("collapseItems",t,e)},"control:collapseItems:update":function(e,t){this.updateCollection("collapseItems",t,e)},"control:collapsibleContainer:disableButton":function(e,t){if(_.isBoolean(t)){var n=t?"disabled":"";this.$el.find("button#collapsibleContainerTrigger").prop("disabled",n)}}},t.CommonPrototype.events,t.CommonContainerEvents.events)},r=t.CollapsibleContainerControl=e.Marionette.LayoutView.extend(_.defaults(o,_.defaults(t.CommonPrototype,t.CommonEventsFunctions,t.CommonContainerEventsFunctions)));return r}),define("main/ui_components/forms/controls/popover",["backbone","puppetForm","handlebars","underscore"],function(e,t,n,i){"use strict";var o={formatter:t.CommonPrototype.formatter,className:"hidden",getChildView:function(e){return e.get("control")},childViewOptions:function(e,t){return{field:e,model:this.model,componentList:this.componentList}},initialize:function(o){this.model=o.model,this.field=o.field||void 0,this.componentList={},this.containerTemplate=this.field.get("template")||void 0,this.containerTemplate=this.template||void 0,this.containerTemplate&&(this.template=i.isFunction(this.containerTemplate)?this.containerTemplate:n.compile(this.containerTemplate)),this.items=this.field.get("items")||this.defaults.items,this.items instanceof e.Collection||(this.items=new t.Fields(this.items)),this.collection=this.items,this.collection.bind("remove",this.render)},onShow:function(){var e=this.field.get("options")||{};this.parentButtonView=this._parentLayoutView().popoverButton;var t=this;t.popover=t.parentButtonView.$el.find("button").first().popover({html:!0,content:function(){return t.$(">")},placement:e.placement,trigger:e.trigger,delay:e.delay,container:t.popover}),t.popover.on("hide.bs.popover",function(e){var n=t.parentButtonView.$el.find(".popover");n.hide(),t.$el.append(n.find(".popover-content >"))}),t.parentButtonView.$el.find("button").first().attr("data-original-title",this.field.get("header"))},events:i.defaults({},t.CommonContainerEvents.events)},r={regions:{popoverButton:"#popoverButtonRegion",popoverContent:"#popoverContentRegion"},defaults:{options:{trigger:"click",label:"popover",type:"button",header:"",content:"",placement:"right",delay:0},items:[],extraClasses:[]},template:n.compile(['<div id="popoverButtonRegion"></div>','<div id="popoverContentRegion"></div>'].join("\n")),initialize:function(e){this.initOptions(e),this.hasAllRequiredOptionsDefined(),this.setFormatter(),this.listenToFieldName(),this.setExtraClasses(),this.field=e.field,this.model=e.model,this.field.set("type","button"),this.buttonView=new t.ButtonControl(e),this.popoverContentView=new t.PopoverView({field:this.field,model:this.model})},onRender:function(){this.showChildView("popoverButton",this.buttonView),this.showChildView("popoverContent",this.popoverContentView),this.updateInvalid()},events:i.defaults({"control:popover:hidden":function(e,t){if(i.isBoolean(t)){var n=t?"hide":"show";this.popoverButton.$el.find("button").first().popover(n)}}},t.CommonPrototype.events)},a=(t.PopoverView=e.Marionette.CollectionView.extend(i.defaults(o,i.defaults(t.CommonPrototype,t.CommonEventsFunctions,t.CommonContainerEventsFunctions))),t.PopoverControl=e.Marionette.LayoutView.extend(i.defaults(r,i.defaults(t.CommonPrototype,t.CommonEventsFunctions))));return a}),define("main/ui_components/forms/controls/input",["backbone","puppetForm","handlebars","underscore"],function(e,t,n,i){"use strict";var o=t.InputControl=t.DefaultInputControl.extend({getTemplate:function(){var e=i.isArray(this.field.get("units")),o='{{#if maxlength}}{{#if charCount}}<span><span class="input-char-count left-margin-xs"></span> characters remaining</span>{{/if}}{{/if}}',r='{{#if helpMessage}} <span {{#if (has-puppetForm-prop "helpMessageClassName")}}class="{{PuppetForm "helpMessageClassName"}}"{{/if}}>{{helpMessage}}</span>{{/if}}',a='{{#if units}}<span class="input-group-addon">{{units}}</span></div>{{/if}}',s='{{#if units}}{{#each units}}<span class="input-group-addon">{{label}}</span>{{/each}}</div>{{/if}}',l=["{{ui-form-label (add-required-indicator label required) forID=(clean-for-id name) classes=(is-sr-only-label srOnlyLabel)}}",'{{#if units}}<div class="input-group">{{/if}}','<input type="{{type}}" class="{{PuppetForm "controlClassName"}}" id="{{clean-for-id name}}" name="{{name}}" maxlength="{{maxlength}}"{{#if value}} value="{{value}}"{{/if}}{{#if title}} title="{{title}}"{{/if}}{{#if placeholder}} placeholder="{{placeholder}}"{{/if}}{{#if disabled}} disabled{{/if}}{{#if required}} required{{/if}}{{#if readonly}} readonly{{/if}}/>'].join("\n"),d=n.compile(['<div class="col-xs-7 left-padding-no bottom-margin-xs">',"{{ui-form-label (add-required-indicator label required) forID=(clean-for-id name) classes=(is-sr-only-label srOnlyLabel)}}",'<input type="{{type}}" class="{{PuppetForm "controlClassName"}}" id="{{clean-for-id name}}" name="{{name}}" maxlength="{{maxlength}}"{{#if value}} value="{{value}}"{{/if}}{{#if title}} title="{{title}}"{{/if}}{{#if placeholder}} placeholder="{{placeholder}}"{{/if}}{{#if disabled}} disabled{{/if}}{{#if required}} required{{/if}}{{#if readonly}} readonly{{/if}}/>',"</div>","{{#if units}}",'<div class="col-xs-5 radio radio-and-input right-padding-no top-margin-md bottom-margin-xs">',"{{#each units}}",n.helpers["ui-form-label"].apply(this,["{{label}}",{hash:{forID:"{{../name}}-{{clean-for-id value}}-radio-{{value}}",classes:t.radioLabelClassName+" radio-units radio-inline",content:'<input type="radio" id="{{../name}}-{{clean-for-id value}}-radio" name="{{../name}}-radio-units" {{#if title}}title="{{title}}"{{/if}} value="{{formatter-from-raw ../formatter value}}" {{#compare value ../rawValueUnits}}checked="checked"{{/compare}}{{#if disabled}} disabled{{else}}{{#if ../../disabled}} disabled{{/if}}{{/if}}/>'}}]),"{{/each}}","</div>","{{/if}}",o,r].join("\n")),c=n.compile(['<div class="input-group">',"{{ui-form-label (add-required-indicator label required) forID=(clean-for-id name) classes=(is-sr-only-label srOnlyLabel)}}",'<input type="{{type}}" class="{{PuppetForm "controlClassName"}}" id="{{clean-for-id name}}" name="{{name}}" maxlength="{{maxlength}}"{{#if value}} value="{{value}}"{{/if}}{{#if title}} title="{{title}}"{{/if}}{{#if placeholder}} placeholder="{{placeholder}}"{{/if}}{{#if disabled}} disabled{{/if}}{{#if required}} required{{/if}}{{#if readonly}} readonly{{/if}}/>','<div class="input-group-btn">','<label for="{{clean-for-id name}}-unit-select" class="sr-only">{{label}} Unit</label>','<select class="form-control btn-form-control" title="Please select from the list" id="{{clean-for-id name}}-unit-select">',"{{#each units}}",'<option value={{value}}{{#if selected}} selected="selected"{{/if}}>{{label}}</option>',"{{/each}}","</select>","</div>","</div>",o,r].join("\n"));if(e){var u=this.field.get("units");return u.length>2?c:1==u.length?n.compile([l,s,o,r].join("\n")):d}return n.compile([l,a,o,r].join("\n"))},events:i.defaults({input:"countChar","change select":"onChange","control:required":function(e,t){this.setBooleanFieldOption("required",t,e)},"control:disabled":function(e,t){this.setBooleanFieldOption("disabled",t,e)},"control:readonly":function(e,t){this.setBooleanFieldOption("readonly",t,e)},"control:charCount":function(e,t){this.setBooleanFieldOption("charCount",t,e)},"control:title":function(e,t){this.setStringFieldOption("title",t,e)},"control:placeholder":function(e,t){this.setStringFieldOption("placeholder",t,e)},"control:helpMessage":function(e,t){this.setStringFieldOption("helpMessage",t,e)},"control:units":function(e,t){this.setStringFieldOption("units",t,e)},"control:maxlength":function(e,t){this.setIntegerFieldOption("maxlength",t,e)}},t.DefaultInputControl.prototype.events),ui:{InputCharCount:".input-char-count"},onRender:function(){t.DefaultInputControl.prototype.onRender.apply(this,arguments),this.countChar()},countChar:function(){this.field.get("charCount")&&this.ui.InputCharCount.text(this.$el.find("input").attr("maxlength")-this.$el.find("input").val().length)},getValueFromDOM:function(){var e=i.isArray(this.field.get("units"));if(e){var t,n=this.$el.find("input").val();return t=this.field.get("units").length>2?n?n+this.$el.find("select option:selected").val():n:n?n+this.$el.find(".radio-units input:checked").val():n,this.formatter.toRaw(t,this.model)}return this.formatter.toRaw(this.$el.find("input").val(),this.model)},serializeModel:function(e){var t=i.defaults(this.field.toJSON(),this.defaults),n=e.toJSON(),o=t.name.split("."),r=o.shift(),a=o.join("."),s=this.keyPathAccessor(n[r],a),l=i.extend(t,{isUnitsArray:i.isArray(t.units),rawValue:s,value:this.formatter.fromRaw(s,e),attributes:n,formatter:this.formatter});return l.isUnitsArray&&(l.rawValueUnits=s&&i.isString(s)?s.match(/[a-z]+/g)?s.match(/[a-z]+/g)[0]:s:t.units[0].value),l}});return o}),define("main/ui_components/forms/controls/checklist",["backbone","puppetForm","handlebars"],function(e,t,n){"use strict";var i=e.Marionette.ItemView.extend({className:t.CommonPrototype.className,getTemplate:function(){if(this.itemTemplate){var e=this.itemTemplate(this.serializeModel(this.model));return n.compile('{{ui-form-checkbox "'+e+'"  labelTemplate=true name=name checked=value id=id disabled=disabled title="Press spacebar to select."}}')}return n.compile('{{ui-form-checkbox label name=name checked=value id=id disabled=disabled title="Press spacebar to select."}}')},initialize:function(e){this.itemTemplate=e.itemTemplate,this.attributeMapping=e.attributeMapping,this.prefixName=e.prefixName},events:{"change input":"onChange"},modelEvents:{optionUpdated:"render",change:"render"},serializeModel:function(e){var t=e.toJSON(),n=_.defaults({id:this.prefixName+"-"+t[this.attributeMapping.unique],name:t[this.attributeMapping.unique],value:t[this.attributeMapping.value],label:t[this.attributeMapping.label],disabled:t[this.attributeMapping.disabled]||!1},t);return n},getValueFromDOM:function(e){return e.is(":checked")?!0:!1},onChange:function(e){e.preventDefault();var t=this.$(e.target),n=this.getValueFromDOM(t);this.stopListening(this.model,"change",this.render),this.model.set(this.attributeMapping.value,n),this.listenTo(this.model,"change:"+this.attributeMapping.value,this.render),this.trigger("checklist-value-change")}}),o={defaults:{name:"",label:"",collection:[],extraClasses:[]},attributeMappingDefaults:{unique:"name",value:"value",label:"label",disabled:"disabled"},tagName:"fieldset",template:n.compile(['<legend{{#if srOnlyLabel}} class="sr-only"{{/if}}>{{label}}</legend>','<div class="childView-container{{#if (has-puppetForm-prop "controlsClassName")}} {{PuppetForm "controlsClassName"}}{{/if}}"></div>'].join("\n")),ui:{ChildViewContainer:".childView-container"},initialize:function(e){this.initOptions(e),this.hasAllRequiredOptionsDefined(),this.setAttributeMapping(),this.setFormatter(),this.listenToFieldName(),this.listenToFieldOptions(),this.setExtraClasses(),this.modelName=this.getComponentInstanceName(),this.initCollection("collection"),this.selectedCountName=this.field.get("selectedCountName")||null,this.itemTemplate=this.field.get("itemTemplate")||null,this.itemTemplate&&(this.itemTemplate=_.isFunction(this.itemTemplate)?this.itemTemplate:_.isString(this.itemTemplate)?n.compile(this.itemTemplate):null);var t=this;this.selectedCountName?(this.listenTo(this.collection,"change",function(){t.updateCount(),t.model.trigger("change")}),this.updateCount()):this.listenTo(this.collection,"change",function(){t.model.trigger("change")}),this.stopListening(this.model,"change:"+this.modelName,this.render),this.model.set(this.modelName,this.collection),this.listenTo(this.model,"change:"+this.modelName,this.render)},updateCount:function(){var e={};e[this.attributeMapping.value]=!0,this.model.set(this.selectedCountName,this.collection.where(e).length)},events:_.defaults({"control:item:disabled":function(e,t){this.changeItemBooleanAttribute(e,t,"disabled")},"control:item:value":function(e,t){this.changeItemBooleanAttribute(e,t,"value")}},t.CommonPrototype.events),changeItemBooleanAttribute:function(e,t,n){var i=t.itemName||null,o=t.booleanValue;_.isBoolean(o)&&(i?this.collection.each(function(e){e.get(this.attributeMapping.unique)===i&&e.set(this.attributeMapping[n],o)},this):this.collection.each(function(e){e.set(this.attributeMapping[n],o)},this),e.stopPropagation())},childViewContainer:"@ui.ChildViewContainer",childEvents:{"checklist-value-change":"childValueChange"},childViewOptions:function(e,t){return{filter:this.filter,attributeMapping:this.attributeMapping,prefixName:this.modelName,itemTemplate:this.itemTemplate}},getChildView:function(e){return this.field.get("hideCheckboxForSingleItem")&&this.collection.length<=1?(e.set(this.attributeMapping.value,!0),i.extend({template:n.compile('<span class="single-item left-padding-sm">{{label}}</span>'),getTemplate:function(){if(this.itemTemplate){var e=this.itemTemplate(this.serializeModel(this.model));return n.compile('<span class="single-item left-padding-sm">'+e+"</span>")}return n.compile('<span class="single-item left-padding-sm">{{label}}</span>')}})):i},addChild:function(e,t,n){_.isString(e.get(this.attributeMapping.label))&&Marionette.CollectionView.prototype.addChild.apply(this,arguments)},childValueChange:function(){var t=(this.model,this.field.get("name").split(".")),n=t.shift(),i=t.join(".");if(this.model.errorModel instanceof e.Model)if(_.isEmpty(i))this.model.errorModel.unset(n);else{var o=this.model.errorModel.get(n);o&&(this.keyPathSetter(o,i,null),this.model.errorModel.set(n,o))}}},r=t.ChecklistControl=e.Marionette.CompositeView.extend(_.defaults(o,_.defaults(t.CommonPrototype,t.CommonEventsFunctions)));return r}),function(e){"function"==typeof define&&define.amd?define("select2",["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){var t=function(){if(e&&e.fn&&e.fn.select2&&e.fn.select2.amd)var t=e.fn.select2.amd;var t;return function(){if(!t||!t.requirejs){t?n=t:t={};var e,n,i;!function(t){function o(e,t){return w.call(e,t)}function r(e,t){var n,i,o,r,a,s,l,d,c,u,h,p=t&&t.split("/"),g=b.map,f=g&&g["*"]||{};if(e&&"."===e.charAt(0))if(t){for(p=p.slice(0,p.length-1),e=e.split("/"),a=e.length-1,b.nodeIdCompat&&N.test(e[a])&&(e[a]=e[a].replace(N,"")),e=p.concat(e),c=0;c<e.length;c+=1)if(h=e[c],"."===h)e.splice(c,1),c-=1;else if(".."===h){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||f)&&g){for(n=e.split("/"),c=n.length;c>0;c-=1){if(i=n.slice(0,c).join("/"),p)for(u=p.length;u>0;u-=1)if(o=g[p.slice(0,u).join("/")],o&&(o=o[i])){r=o,s=c;break}if(r)break;!l&&f&&f[i]&&(l=f[i],d=c)}!r&&l&&(r=l,s=d),r&&(n.splice(0,s,r),e=n.join("/"))}return e}function a(e,n){return function(){return p.apply(t,A.call(arguments,0).concat([e,n]))}}function s(e){return function(t){return r(t,e)}}function l(e){return function(t){m[e]=t}}function d(e){if(o(v,e)){var n=v[e];delete v[e],y[e]=!0,h.apply(t,n)}if(!o(m,e)&&!o(y,e))throw new Error("No "+e);return m[e]}function c(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function u(e){return function(){return b&&b.config&&b.config[e]||{}}}var h,p,g,f,m={},v={},b={},y={},w=Object.prototype.hasOwnProperty,A=[].slice,N=/\.js$/;g=function(e,t){var n,i=c(e),o=i[0];return e=i[1],o&&(o=r(o,t),n=d(o)),o?e=n&&n.normalize?n.normalize(e,s(t)):r(e,t):(e=r(e,t),i=c(e),o=i[0],e=i[1],o&&(n=d(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:n}},f={require:function(e){return a(e)},exports:function(e){var t=m[e];return"undefined"!=typeof t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:u(e)}}},h=function(e,n,i,r){var s,c,u,h,p,b,w=[],A=typeof i;if(r=r||e,"undefined"===A||"function"===A){for(n=!n.length&&i.length?["require","exports","module"]:n,p=0;p<n.length;p+=1)if(h=g(n[p],r),c=h.f,"require"===c)w[p]=f.require(e);else if("exports"===c)w[p]=f.exports(e),b=!0;else if("module"===c)s=w[p]=f.module(e);else if(o(m,c)||o(v,c)||o(y,c))w[p]=d(c);else{if(!h.p)throw new Error(e+" missing "+c);h.p.load(h.n,a(r,!0),l(c),{}),w[p]=m[c]}u=i?i.apply(m[e],w):void 0,e&&(s&&s.exports!==t&&s.exports!==m[e]?m[e]=s.exports:u===t&&b||(m[e]=u))}else e&&(m[e]=i)},e=n=p=function(e,n,i,o,r){if("string"==typeof e)return f[e]?f[e](n):d(g(e,n).f);if(!e.splice){if(b=e,b.deps&&p(b.deps,b.callback),!n)return;n.splice?(e=n,n=i,i=null):e=t}return n=n||function(){},"function"==typeof i&&(i=o,o=r),o?h(t,e,n,i):setTimeout(function(){h(t,e,n,i)},4),p},p.config=function(e){return p(e)},e._defined=m,i=function(e,t,n){t.splice||(n=t,t=[]),o(m,e)||o(v,e)||(v[e]=[e,t,n])},i.amd={jQuery:!0}}(),t.requirejs=e,t.require=n,t.define=i}}(),t.define("almond",function(){}),t.define("jquery",[],function(){var t=e||$;return null==t&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),t}),t.define("select2/utils",["jquery"],function(e){function t(e){var t=e.prototype,n=[];for(var i in t){var o=t[i];"function"==typeof o&&"constructor"!==i&&n.push(i)}return n}var n={};n.Extend=function(e,t){function n(){this.constructor=e}var i={}.hasOwnProperty;for(var o in t)i.call(t,o)&&(e[o]=t[o]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},n.Decorate=function(e,n){function i(){var t=Array.prototype.unshift,i=n.prototype.constructor.length,o=e.prototype.constructor;i>0&&(t.call(arguments,e.prototype.constructor),o=n.prototype.constructor),o.apply(this,arguments)}function o(){this.constructor=i}var r=t(n),a=t(e);n.displayName=e.displayName,i.prototype=new o;for(var s=0;s<a.length;s++){var l=a[s];i.prototype[l]=e.prototype[l]}for(var d=(function(e){var t=function(){};e in i.prototype&&(t=i.prototype[e]);var o=n.prototype[e];return function(){var e=Array.prototype.unshift;return e.call(arguments,t),o.apply(this,arguments)}}),c=0;c<r.length;c++){var u=r[c];i.prototype[u]=d(u)}return i};var i=function(){this.listeners={}};return i.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},i.prototype.trigger=function(e){var t=Array.prototype.slice;this.listeners=this.listeners||{},e in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(e,t){for(var n=0,i=e.length;i>n;n++)e[n].apply(this,t)},n.Observable=i,n.generateChars=function(e){for(var t="",n=0;e>n;n++){var i=Math.floor(36*Math.random());t+=i.toString(36)}return t},n.bind=function(e,t){return function(){e.apply(t,arguments)}},n._convertData=function(e){for(var t in e){var n=t.split("-"),i=e;if(1!==n.length){for(var o=0;o<n.length;o++){var r=n[o];r=r.substring(0,1).toLowerCase()+r.substring(1),r in i||(i[r]={}),o==n.length-1&&(i[r]=e[t]),i=i[r]}delete e[t]}}return e},n.hasScroll=function(t,n){var i=e(n),o=n.style.overflowX,r=n.style.overflowY;return o!==r||"hidden"!==r&&"visible"!==r?"scroll"===o||"scroll"===r?!0:i.innerHeight()<n.scrollHeight||i.innerWidth()<n.scrollWidth:!1},n.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},n.appendMany=function(t,n){if("1.7"===e.fn.jquery.substr(0,3)){var i=e();e.map(n,function(e){i=i.add(e)}),n=i}t.append(n)},n}),t.define("select2/results",["jquery","./utils"],function(e,t){function n(e,t,i){this.$element=e,this.data=i,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t,t},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(t){var n=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var i=e('<li role="treeitem" class="select2-results__option"></li>'),o=this.options.get("translations").get(t.message);i.append(n(o(t.args))),this.$results.append(i)},n.prototype.append=function(e){this.hideLoading();var t=[];if(null==e.results||0===e.results.length)return void(0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"}));e.results=this.sort(e.results,e.params);for(var n=0;n<e.results.length;n++){var i=e.results[n],o=this.option(i);t.push(o)}this.$results.append(t)},n.prototype.position=function(e,t){var n=t.find(".select2-results");n.append(e)},n.prototype.sort=function(e,t){var n=this.options.get("sorter");return n(e,t)},n.prototype.setClasses=function(){var t=this;this.data.current(function(n){var i=e.map(n,function(e){return e.id.toString()}),o=t.$results.find(".select2-results__option[aria-selected]");o.each(function(){var t=e(this),n=e.data(this,"data"),o=""+n.id;null!=n.element&&n.element.selected||null==n.element&&e.inArray(o,i)>-1?t.attr("aria-selected","true"):t.attr("aria-selected","false")});var r=o.filter("[aria-selected=true]");r.length>0?r.first().trigger("mouseenter"):o.first().trigger("mouseenter")})},n.prototype.showLoading=function(e){this.hideLoading();var t=this.options.get("translations").get("searching"),n={disabled:!0,loading:!0,text:t(e)},i=this.option(n);i.className+=" loading-results",this.$results.prepend(i)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(t){var n=document.createElement("li");n.className="select2-results__option";var i={role:"treeitem","aria-selected":"false"};t.disabled&&(delete i["aria-selected"],i["aria-disabled"]="true"),null==t.id&&delete i["aria-selected"],null!=t._resultId&&(n.id=t._resultId),t.title&&(n.title=t.title),t.children&&(i.role="group",i["aria-label"]=t.text,delete i["aria-selected"]);for(var o in i){var r=i[o];n.setAttribute(o,r)}if(t.children){var a=e(n),s=document.createElement("strong");s.className="select2-results__group";e(s);this.template(t,s);for(var l=[],d=0;d<t.children.length;d++){var c=t.children[d],u=this.option(c);l.push(u)}var h=e("<ul></ul>",{"class":"select2-results__options select2-results__options--nested"});h.append(l),a.append(s),a.append(h)}else this.template(t,n);return e.data(n,"data",t),n},n.prototype.bind=function(t,n){var i=this,o=t.id+"-results";this.$results.attr("id",o),t.on("results:all",function(e){i.clear(),i.append(e.data),t.isOpen()&&i.setClasses()}),t.on("results:append",function(e){i.append(e.data),t.isOpen()&&i.setClasses()}),t.on("query",function(e){i.showLoading(e)}),t.on("select",function(){t.isOpen()&&i.setClasses()}),t.on("unselect",function(){t.isOpen()&&i.setClasses()}),t.on("open",function(){i.$results.attr("aria-expanded","true"),i.$results.attr("aria-hidden","false"),i.setClasses(),i.ensureHighlightVisible()}),t.on("close",function(){i.$results.attr("aria-expanded","false"),i.$results.attr("aria-hidden","true"),i.$results.removeAttr("aria-activedescendant")}),t.on("results:toggle",function(){var e=i.getHighlightedResults();0!==e.length&&e.trigger("mouseup")}),t.on("results:select",function(){var e=i.getHighlightedResults();if(0!==e.length){var t=e.data("data");"true"==e.attr("aria-selected")?i.trigger("close"):i.trigger("select",{data:t})}}),t.on("results:previous",function(){var e=i.getHighlightedResults(),t=i.$results.find("[aria-selected]"),n=t.index(e);if(0!==n){var o=n-1;0===e.length&&(o=0);var r=t.eq(o);r.trigger("mouseenter");var a=i.$results.offset().top,s=r.offset().top,l=i.$results.scrollTop()+(s-a);0===o?i.$results.scrollTop(0):0>s-a&&i.$results.scrollTop(l)}}),t.on("results:next",function(){var e=i.getHighlightedResults(),t=i.$results.find("[aria-selected]"),n=t.index(e),o=n+1;if(!(o>=t.length)){var r=t.eq(o);r.trigger("mouseenter");var a=i.$results.offset().top+i.$results.outerHeight(!1),s=r.offset().top+r.outerHeight(!1),l=i.$results.scrollTop()+s-a;0===o?i.$results.scrollTop(0):s>a&&i.$results.scrollTop(l)}}),t.on("results:focus",function(e){e.element.addClass("select2-results__option--highlighted")}),t.on("results:message",function(e){i.displayMessage(e)}),e.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=i.$results.scrollTop(),n=i.$results.get(0).scrollHeight-i.$results.scrollTop()+e.deltaY,o=e.deltaY>0&&t-e.deltaY<=0,r=e.deltaY<0&&n<=i.$results.height();o?(i.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):r&&(i.$results.scrollTop(i.$results.get(0).scrollHeight-i.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(t){var n=e(this),o=n.data("data");return"true"===n.attr("aria-selected")?void(i.options.get("multiple")?i.trigger("unselect",{originalEvent:t,data:o}):i.trigger("close")):void i.trigger("select",{originalEvent:t,data:o})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(t){var n=e(this).data("data");i.getHighlightedResults().removeClass("select2-results__option--highlighted"),i.trigger("results:focus",{data:n,element:e(this)})})},n.prototype.getHighlightedResults=function(){var e=this.$results.find(".select2-results__option--highlighted");return e},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){var t=this.$results.find("[aria-selected]"),n=t.index(e),i=this.$results.offset().top,o=e.offset().top,r=this.$results.scrollTop()+(o-i),a=o-i;r-=2*e.outerHeight(!1),2>=n?this.$results.scrollTop(0):(a>this.$results.outerHeight()||0>a)&&this.$results.scrollTop(r)}},n.prototype.template=function(t,n){var i=this.options.get("templateResult"),o=this.options.get("escapeMarkup"),r=i(t);null==r?n.style.display="none":"string"==typeof r?n.innerHTML=o(r):e(n).append(r)},n}),t.define("select2/keys",[],function(){var e={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return e}),t.define("select2/selection/base",["jquery","../utils","../keys"],function(e,t,n){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=e('<span class="select2-selection" role="combobox" aria-autocomplete="list" aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),t.attr("title",this.$element.attr("title")),t.attr("tabindex",this._tabindex),this.$selection=t,t},i.prototype.bind=function(e,t){var i=this,o=(e.id+"-container",e.id+"-results");this.container=e,this.$selection.on("focus",function(e){i.trigger("focus",e)}),this.$selection.on("blur",function(e){i.trigger("blur",e)}),this.$selection.on("keydown",function(e){i.trigger("keypress",e),e.which===n.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){i.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){i.update(e.data)}),e.on("open",function(){i.$selection.attr("aria-expanded","true"),i.$selection.attr("aria-owns",o),i._attachCloseHandler(e)}),e.on("close",function(){i.$selection.attr("aria-expanded","false"),i.$selection.removeAttr("aria-activedescendant"),i.$selection.removeAttr("aria-owns"),i.$selection.focus(),i._detachCloseHandler(e)}),e.on("enable",function(){i.$selection.attr("tabindex",i._tabindex)}),e.on("disable",function(){i.$selection.attr("tabindex","-1")})},i.prototype._attachCloseHandler=function(t){e(document.body).on("mousedown.select2."+t.id,function(t){var n=e(t.target),i=n.closest(".select2"),o=e(".select2.select2-container--open");o.each(function(){var t=e(this);if(this!=i[0]){
var n=t.data("element");n.select2("close")}})})},i.prototype._detachCloseHandler=function(t){e(document.body).off("mousedown.select2."+t.id)},i.prototype.position=function(e,t){var n=t.find(".selection");n.append(e)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},i}),t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,n,i){function o(){o.__super__.constructor.apply(this,arguments)}return n.Extend(o,t),o.prototype.render=function(){var e=o.__super__.render.call(this);return e.addClass("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},o.prototype.bind=function(e,t){var n=this;o.__super__.bind.apply(this,arguments);var i=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i),this.$selection.attr("aria-labelledby",i),this.$selection.on("mousedown",function(e){1===e.which&&n.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(e){}),this.$selection.on("blur",function(e){}),e.on("selection:update",function(e){n.update(e.data)})},o.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},o.prototype.display=function(e){var t=this.options.get("templateSelection"),n=this.options.get("escapeMarkup");return n(t(e))},o.prototype.selectionContainer=function(){return e("<span></span>")},o.prototype.update=function(e){if(0===e.length)return void this.clear();var t=e[0],n=this.display(t),i=this.$selection.find(".select2-selection__rendered");i.empty().append(n),i.prop("title",t.title||t.text)},o}),t.define("select2/selection/multiple",["jquery","./base","../utils"],function(e,t,n){function i(e,t){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,t),i.prototype.render=function(){var e=i.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},i.prototype.bind=function(t,n){var o=this;i.__super__.bind.apply(this,arguments),this.$selection.on("click",function(e){o.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(t){var n=e(this),i=n.parent(),r=i.data("data");o.trigger("unselect",{originalEvent:t,data:r})})},i.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},i.prototype.display=function(e){var t=this.options.get("templateSelection"),n=this.options.get("escapeMarkup");return n(t(e))},i.prototype.selectionContainer=function(){var t=e('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>');return t},i.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],i=0;i<e.length;i++){var o=e[i],r=this.display(o),a=this.selectionContainer();a.append(r),a.prop("title",o.title||o.text),a.data("data",o),t.push(a)}var s=this.$selection.find(".select2-selection__rendered");n.appendMany(s,t)}},i}),t.define("select2/selection/placeholder",["../utils"],function(e){function t(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return t.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},t.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();return n.html(this.display(t)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},t.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id,i=t.length>1;if(i||n)return e.call(this,t);this.clear();var o=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(o)},t}),t.define("select2/selection/allowClear",["jquery","../keys"],function(e,t){function n(){}return n.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(e){i._handleClear(e)}),t.on("keypress",function(e){i._handleKeyboardClear(e,t)})},n.prototype._handleClear=function(e,t){if(!this.options.get("disabled")){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){t.stopPropagation();for(var i=n.data("data"),o=0;o<i.length;o++){var r={data:i[o]};if(this.trigger("unselect",r),r.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle")}}},n.prototype._handleKeyboardClear=function(e,n,i){i.isOpen()||(n.which==t.DELETE||n.which==t.BACKSPACE)&&this._handleClear(n)},n.prototype.update=function(t,n){if(t.call(this,n),!(this.$selection.find(".select2-selection__placeholder").length>0||0===n.length)){var i=e('<span class="select2-selection__clear">&times;</span>');i.data("data",n),this.$selection.find(".select2-selection__rendered").prepend(i)}},n}),t.define("select2/selection/search",["jquery","../utils","../keys"],function(e,t,n){function i(e,t,n){e.call(this,t,n)}return i.prototype.render=function(t){var n=e('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></li>');this.$searchContainer=n,this.$search=n.find("input");var i=t.call(this);return i},i.prototype.bind=function(e,t,i){var o=this;e.call(this,t,i),t.on("open",function(e){o.$search.attr("tabindex",0),o.$search.focus()}),t.on("close",function(){o.$search.attr("tabindex",-1),o.$search.val(""),o.$search.focus()}),t.on("enable",function(){o.$search.prop("disabled",!1)}),t.on("disable",function(){o.$search.prop("disabled",!0)}),this.$selection.on("focusin",".select2-search--inline",function(e){o.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){o.trigger("blur",e)}),this.$selection.on("keydown",".select2-search--inline",function(e){e.stopPropagation(),o.trigger("keypress",e),o._keyUpPrevented=e.isDefaultPrevented();var t=e.which;if(t===n.BACKSPACE&&""===o.$search.val()){var i=o.$searchContainer.prev(".select2-selection__choice");if(i.length>0){var r=i.data("data");o.searchRemoveChoice(r),e.preventDefault()}}}),this.$selection.on("input",".select2-search--inline",function(e){o.$selection.off("keyup.search")}),this.$selection.on("keyup.search input",".select2-search--inline",function(e){o.handleSearch(e)})},i.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},i.prototype.update=function(e,t){this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch()},i.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},i.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.trigger("open"),this.$search.val(t.text+" ")},i.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";if(""!==this.$search.attr("placeholder"))e=this.$selection.find(".select2-selection__rendered").innerWidth();else{var t=this.$search.val().length+1;e=.75*t+"em"}this.$search.css("width",e)},i}),t.define("select2/selection/eventRelay",["jquery"],function(e){function t(){}return t.prototype.bind=function(t,n,i){var o=this,r=["open","opening","close","closing","select","selecting","unselect","unselecting"],a=["opening","closing","selecting","unselecting"];t.call(this,n,i),n.on("*",function(t,n){if(-1!==e.inArray(t,r)){n=n||{};var i=e.Event("select2:"+t,{params:n});o.$element.trigger(i),-1!==e.inArray(t,a)&&(n.prevented=i.isDefaultPrevented())}})},t}),t.define("select2/translation",["jquery","require"],function(e,t){function n(e){this.dict=e||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(e){return this.dict[e]},n.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)},n._cache={},n.loadPath=function(e){if(!(e in n._cache)){var i=t(e);n._cache[e]=i}return new n(n._cache[e])},n}),t.define("select2/diacritics",[],function(){var e={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};return e}),t.define("select2/data/base",["../utils"],function(e){function t(e,n){t.__super__.constructor.call(this)}return e.Extend(t,e.Observable),t.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},t.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},t.prototype.bind=function(e,t){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,n){var i=t.id+"-result-";return i+=e.generateChars(4),i+=null!=n.id?"-"+n.id.toString():"-"+e.generateChars(4)},t}),t.define("select2/data/select",["./base","../utils","jquery"],function(e,t,n){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,e),i.prototype.current=function(e){var t=[],i=this;this.$element.find(":selected").each(function(){var e=n(this),o=i.item(e);t.push(o)}),e(t)},i.prototype.select=function(e){var t=this;if(e.selected=!0,n(e.element).is("option"))return e.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(i){var o=[];e=[e],e.push.apply(e,i);for(var r=0;r<e.length;r++){var a=e[r].id;-1===n.inArray(a,o)&&o.push(a)}t.$element.val(o),t.$element.trigger("change")});else{var i=e.id;this.$element.val(i),this.$element.trigger("change")}},i.prototype.unselect=function(e){var t=this;if(this.$element.prop("multiple"))return e.selected=!1,n(e.element).is("option")?(e.element.selected=!1,void this.$element.trigger("change")):void this.current(function(i){for(var o=[],r=0;r<i.length;r++){var a=i[r].id;a!==e.id&&-1===n.inArray(a,o)&&o.push(a)}t.$element.val(o),t.$element.trigger("change")})},i.prototype.bind=function(e,t){var n=this;this.container=e,e.on("select",function(e){n.select(e.data)}),e.on("unselect",function(e){n.unselect(e.data)})},i.prototype.destroy=function(){this.$element.find("*").each(function(){n.removeData(this,"data")})},i.prototype.query=function(e,t){var i=[],o=this,r=this.$element.children();r.each(function(){var t=n(this);if(t.is("option")||t.is("optgroup")){var r=o.item(t),a=o.matches(e,r);null!==a&&i.push(a)}}),t({results:i,params:e})},i.prototype.addOptions=function(e){t.appendMany(this.$element,e)},i.prototype.option=function(e){var t;e.children?(t=document.createElement("optgroup"),t.label=e.text):(t=document.createElement("option"),void 0!==t.textContent?t.textContent=e.text:t.innerText=e.text),e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);var i=n(t),o=this._normalizeItem(e);return o.element=t,n.data(t,"data",o),i},i.prototype.item=function(e){var t={};if(t=n.data(e[0],"data"),null!=t)return t;if(e.is("option"))t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){t={text:e.prop("label"),children:[],title:e.prop("title")};for(var i=e.children("option"),o=[],r=0;r<i.length;r++){var a=n(i[r]),s=this.item(a);o.push(s)}t.children=o}return t=this._normalizeItem(t),t.element=e[0],n.data(e[0],"data",t),t},i.prototype._normalizeItem=function(e){n.isPlainObject(e)||(e={id:e,text:e}),e=n.extend({},{text:""},e);var t={selected:!1,disabled:!1};return null!=e.id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),n.extend({},t,e)},i.prototype.matches=function(e,t){var n=this.options.get("matcher");return n(e,t)},i}),t.define("select2/data/array",["./select","../utils","jquery"],function(e,t,n){function i(e,t){var n=t.get("data")||[];i.__super__.constructor.call(this,e,t),this.addOptions(this.convertToOptions(n))}return t.Extend(i,e),i.prototype.select=function(e){var t=this.$element.find("option").filter(function(t,n){return n.value==e.id.toString()});0===t.length&&(t=this.option(e),this.addOptions(t)),i.__super__.select.call(this,e)},i.prototype.convertToOptions=function(e){function i(e){return function(){return n(this).val()==e.id}}for(var o=this,r=this.$element.find("option"),a=r.map(function(){return o.item(n(this)).id}).get(),s=[],l=0;l<e.length;l++){var d=this._normalizeItem(e[l]);if(n.inArray(d.id,a)>=0){var c=r.filter(i(d)),u=this.item(c),h=(n.extend(!0,{},u,d),this.option(u));c.replaceWith(h)}else{var p=this.option(d);if(d.children){var g=this.convertToOptions(d.children);t.appendMany(p,g)}s.push(p)}}return s},i}),t.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,n){function i(t,n){this.ajaxOptions=this._applyDefaults(n.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),e.__super__.constructor.call(this,t,n)}return t.Extend(i,e),i.prototype._applyDefaults=function(e){var t={data:function(e){return{q:e.term}},transport:function(e,t,i){var o=n.ajax(e);return o.then(t),o.fail(i),o}};return n.extend({},t,e,!0)},i.prototype.processResults=function(e){return e},i.prototype.query=function(e,t){function i(){var i=r.transport(r,function(i){var r=o.processResults(i,e);o.options.get("debug")&&window.console&&console.error&&(r&&r.results&&n.isArray(r.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),t(r)},function(){});o._request=i}var o=this;null!=this._request&&(n.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var r=n.extend({type:"GET"},this.ajaxOptions);"function"==typeof r.url&&(r.url=r.url(e)),"function"==typeof r.data&&(r.data=r.data(e)),this.ajaxOptions.delay&&""!==e.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(i,this.ajaxOptions.delay)):i()},i}),t.define("select2/data/tags",["jquery"],function(e){function t(t,n,i){var o=i.get("tags"),r=i.get("createTag");if(void 0!==r&&(this.createTag=r),t.call(this,n,i),e.isArray(o))for(var a=0;a<o.length;a++){var s=o[a],l=this._normalizeItem(s),d=this.option(l);this.$element.append(d)}}return t.prototype.query=function(e,t,n){function i(e,r){for(var a=e.results,s=0;s<a.length;s++){var l=a[s],d=null!=l.children&&!i({results:l.children},!0),c=l.text===t.term;if(c||d)return r?!1:(e.data=a,void n(e))}if(r)return!0;var u=o.createTag(t);if(null!=u){var h=o.option(u);h.attr("data-select2-tag",!0),o.addOptions([h]),o.insertTag(a,u)}e.results=a,n(e)}var o=this;return this._removeOldTags(),null==t.term||null!=t.page?void e.call(this,t,n):void e.call(this,t,i)},t.prototype.createTag=function(t,n){var i=e.trim(n.term);return""===i?null:{id:i,text:i}},t.prototype.insertTag=function(e,t,n){t.unshift(n)},t.prototype._removeOldTags=function(t){var n=(this._lastTag,this.$element.find("option[data-select2-tag]"));n.each(function(){this.selected||e(this).remove()})},t}),t.define("select2/data/tokenizer",["jquery"],function(e){function t(e,t,n){var i=n.get("tokenizer");void 0!==i&&(this.tokenizer=i),e.call(this,t,n)}return t.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},t.prototype.query=function(e,t,n){function i(e){o.select(e)}var o=this;t.term=t.term||"";var r=this.tokenizer(t,this.options,i);r.term!==t.term&&(this.$search.length&&(this.$search.val(r.term),this.$search.focus()),t.term=r.term),e.call(this,t,n)},t.prototype.tokenizer=function(t,n,i,o){for(var r=i.get("tokenSeparators")||[],a=n.term,s=0,l=this.createTag||function(e){return{id:e.term,text:e.term}};s<a.length;){var d=a[s];if(-1!==e.inArray(d,r)){var c=a.substr(0,s),u=e.extend({},n,{term:c}),h=l(u);o(h),a=a.substr(s+1)||"",s=0}else s++}return{term:a}},t}),t.define("select2/data/minimumInputLength",[],function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){return t.term=t.term||"",t.term.length<this.minimumInputLength?void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):void e.call(this,t,n)},e}),t.define("select2/data/maximumInputLength",[],function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){return t.term=t.term||"",this.maximumInputLength>0&&t.term.length>this.maximumInputLength?void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):void e.call(this,t,n)},e}),t.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){var i=this;this.current(function(o){var r=null!=o?o.length:0;return i.maximumSelectionLength>0&&r>=i.maximumSelectionLength?void i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}}):void e.call(i,t,n)})},e}),t.define("select2/dropdown",["jquery","./utils"],function(e,t){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<span class="select2-dropdown"><span class="select2-results"></span></span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t,t},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n}),t.define("select2/dropdown/search",["jquery","../utils"],function(e,t){function n(){}return n.prototype.render=function(t){var n=t.call(this),i=e('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=i,this.$search=i.find("input"),n.prepend(i),n},n.prototype.bind=function(t,n,i){var o=this;t.call(this,n,i),this.$search.on("keydown",function(e){o.trigger("keypress",e),o._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(t){e(this).off("keyup")}),this.$search.on("keyup input",function(e){o.handleSearch(e)}),n.on("open",function(e){o.$search.attr("tabindex",0),o.$search.focus(),window.setTimeout(function(){o.$search.focus()},0),void 0!==e&&null!==e&&void 0!==e.term&&null!==e.term&&o.$search.val(e.term)}),n.on("close",function(){o.$search.attr("tabindex",-1),o.$search.val("")}),n.on("results:all",function(e){if(null==e.query.term||""===e.query.term){var t=o.showSearch(e);t?o.$searchContainer.removeClass("select2-search--hide"):o.$searchContainer.addClass("select2-search--hide")}})},n.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},n.prototype.showSearch=function(e,t){return!0},n}),t.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,n,i){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,i)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),i=t.length-1;i>=0;i--){var o=t[i];this.placeholder.id===o.id&&n.splice(i,1)}return n},e}),t.define("select2/dropdown/infiniteScroll",["jquery"],function(e){function t(e,t,n,i){this.lastParams={},e.call(this,t,n,i),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return t.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&this.$results.append(this.$loadingMore)},t.prototype.bind=function(t,n,i){var o=this;t.call(this,n,i),n.on("query",function(e){o.lastParams=e,o.loading=!0}),n.on("query:append",function(e){o.lastParams=e,o.loading=!0}),this.$results.on("scroll",function(){var t=e.contains(document.documentElement,o.$loadingMore[0]);if(!o.loading&&t){var n=o.$results.offset().top+o.$results.outerHeight(!1),i=o.$loadingMore.offset().top+o.$loadingMore.outerHeight(!1);n+50>=i&&o.loadMore()}})},t.prototype.loadMore=function(){this.loading=!0;var t=e.extend({},{page:1},this.lastParams);t.page++,this.trigger("query:append",t)},t.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=e('<li class="option load-more" role="treeitem"></li>'),n=this.options.get("translations").get("loadingMore");return t.html(n(this.lastParams)),t},t}),t.define("select2/dropdown/attachBody",["jquery","../utils"],function(e,t){function n(e,t,n){this.$dropdownParent=n.get("dropdownParent")||document.body,e.call(this,t,n)}return n.prototype.bind=function(e,t,n){var i=this,o=!1;e.call(this,t,n),t.on("open",function(){i._showDropdown(),i._attachPositioningHandler(t),o||(o=!0,t.on("results:all",function(){i._positionDropdown(),i._resizeDropdown()}),t.on("results:append",function(){i._positionDropdown(),i._resizeDropdown()}))}),t.on("close",function(){i._hideDropdown(),i._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},n.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},n.prototype.render=function(t){var n=e("<span></span>"),i=t.call(this);return n.append(i),this.$dropdownContainer=n,n},n.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},n.prototype._attachPositioningHandler=function(n){var i=this,o="scroll.select2."+n.id,r="resize.select2."+n.id,a="orientationchange.select2."+n.id,s=this.$container.parents().filter(t.hasScroll);s.each(function(){e(this).data("select2-scroll-position",{x:e(this).scrollLeft(),y:e(this).scrollTop()})}),s.on(o,function(t){var n=e(this).data("select2-scroll-position");e(this).scrollTop(n.y)}),e(window).on(o+" "+r+" "+a,function(e){i._positionDropdown(),i._resizeDropdown()})},n.prototype._detachPositioningHandler=function(n){var i="scroll.select2."+n.id,o="resize.select2."+n.id,r="orientationchange.select2."+n.id,a=this.$container.parents().filter(t.hasScroll);a.off(i),e(window).off(i+" "+o+" "+r)},n.prototype._positionDropdown=function(){var t=e(window),n=this.$dropdown.hasClass("select2-dropdown--above"),i=this.$dropdown.hasClass("select2-dropdown--below"),o=null,r=(this.$container.position(),this.$container.offset());r.bottom=r.top+this.$container.outerHeight(!1);var a={height:this.$container.outerHeight(!1)};a.top=r.top,a.bottom=r.top+a.height;var s={height:this.$dropdown.outerHeight(!1)},l={top:t.scrollTop(),bottom:t.scrollTop()+t.height()},d=l.top<r.top-s.height,c=l.bottom>r.bottom+s.height,u={left:r.left,top:a.bottom};n||i||(o="below"),c||!d||n?!d&&c&&n&&(o="below"):o="above",("above"==o||n&&"below"!==o)&&(u.top=a.top-s.height),null!=o&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+o),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+o)),this.$dropdownContainer.css(u)},n.prototype._resizeDropdown=function(){this.$dropdownContainer.width();var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.width="auto"),this.$dropdown.css(e)},n.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},n}),t.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(t){for(var n=0,i=0;i<t.length;i++){var o=t[i];o.children?n+=e(o.children):n++}return n}function t(e,t,n,i){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,n,i)}return t.prototype.showSearch=function(t,n){return e(n.data.results)<this.minimumResultsForSearch?!1:t.call(this,n)},t}),t.define("select2/dropdown/selectOnClose",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("close",function(){i._handleSelectOnClose()})},e.prototype._handleSelectOnClose=function(){var e=this.getHighlightedResults();e.length<1||this.trigger("select",{data:e.data("data")})},e}),t.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("select",function(e){i._selectTriggered(e)}),t.on("unselect",function(e){i._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&n.ctrlKey||this.trigger("close")},e}),t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,n="Please delete "+t+" character";
return 1!=t&&(n+="s"),n},inputTooShort:function(e){var t=e.minimum-e.input.length,n="Please enter "+t+" or more characters";return n},loadingMore:function(){return"Loading more results…"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching…"}}}),t.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(e,t,n,i,o,r,a,s,l,d,c,u,h,p,g,f,m,v,b,y,w,A,N,_,C,x,S,T,k){function $(){this.reset()}$.prototype.apply=function(u){if(u=e.extend({},this.defaults,u),null==u.dataAdapter){if(null!=u.ajax?u.dataAdapter=g:null!=u.data?u.dataAdapter=p:u.dataAdapter=h,u.minimumInputLength>0&&(u.dataAdapter=d.Decorate(u.dataAdapter,v)),u.maximumInputLength>0&&(u.dataAdapter=d.Decorate(u.dataAdapter,b)),u.maximumSelectionLength>0&&(u.dataAdapter=d.Decorate(u.dataAdapter,y)),u.tags&&(u.dataAdapter=d.Decorate(u.dataAdapter,f)),(null!=u.tokenSeparators||null!=u.tokenizer)&&(u.dataAdapter=d.Decorate(u.dataAdapter,m)),null!=u.query){var k=t(u.amdBase+"compat/query");u.dataAdapter=d.Decorate(u.dataAdapter,k)}if(null!=u.initSelection){var $=t(u.amdBase+"compat/initSelection");u.dataAdapter=d.Decorate(u.dataAdapter,$)}}if(null==u.resultsAdapter&&(u.resultsAdapter=n,null!=u.ajax&&(u.resultsAdapter=d.Decorate(u.resultsAdapter,_)),null!=u.placeholder&&(u.resultsAdapter=d.Decorate(u.resultsAdapter,N)),u.selectOnClose&&(u.resultsAdapter=d.Decorate(u.resultsAdapter,S))),null==u.dropdownAdapter){if(u.multiple)u.dropdownAdapter=w;else{var D=d.Decorate(w,A);u.dropdownAdapter=D}if(0!==u.minimumResultsForSearch&&(u.dropdownAdapter=d.Decorate(u.dropdownAdapter,x)),u.closeOnSelect&&(u.dropdownAdapter=d.Decorate(u.dropdownAdapter,T)),null!=u.dropdownCssClass||null!=u.dropdownCss||null!=u.adaptDropdownCssClass){var M=t(u.amdBase+"compat/dropdownCss");u.dropdownAdapter=d.Decorate(u.dropdownAdapter,M)}u.dropdownAdapter=d.Decorate(u.dropdownAdapter,C)}if(null==u.selectionAdapter){if(u.multiple?u.selectionAdapter=o:u.selectionAdapter=i,null!=u.placeholder&&(u.selectionAdapter=d.Decorate(u.selectionAdapter,r)),u.allowClear&&(u.selectionAdapter=d.Decorate(u.selectionAdapter,a)),u.multiple&&(u.selectionAdapter=d.Decorate(u.selectionAdapter,s)),null!=u.containerCssClass||null!=u.containerCss||null!=u.adaptContainerCssClass){var E=t(u.amdBase+"compat/containerCss");u.selectionAdapter=d.Decorate(u.selectionAdapter,E)}u.selectionAdapter=d.Decorate(u.selectionAdapter,l)}if("string"==typeof u.language)if(u.language.indexOf("-")>0){var P=u.language.split("-"),I=P[0];u.language=[u.language,I]}else u.language=[u.language];if(e.isArray(u.language)){var O=new c;u.language.push("en");for(var R=u.language,F=0;F<R.length;F++){var V=R[F],L={};try{L=c.loadPath(V)}catch(U){try{V=this.defaults.amdLanguageBase+V,L=c.loadPath(V)}catch(H){u.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+V+'" could not be automatically loaded. A fallback will be used instead.');continue}}O.extend(L)}u.translations=O}else{var B=c.loadPath(this.defaults.amdLanguageBase+"en"),z=new c(u.language);z.extend(B),u.translations=z}return u},$.prototype.reset=function(){function t(e){function t(e){return u[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function n(i,o){if(""===e.trim(i.term))return o;if(o.children&&o.children.length>0){for(var r=e.extend(!0,{},o),a=o.children.length-1;a>=0;a--){var s=o.children[a],l=n(i,s);null==l&&r.children.splice(a,1)}return r.children.length>0?r:n(i,r)}var d=t(o.text).toUpperCase(),c=t(i.term).toUpperCase();return d.indexOf(c)>-1?o:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:d.escapeMarkup,language:k,matcher:n,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},$.prototype.set=function(t,n){var i=e.camelCase(t),o={};o[i]=n;var r=d._convertData(o);e.extend(this.defaults,r)};var D=new $;return D}),t.define("select2/options",["require","jquery","./defaults","./utils"],function(e,t,n,i){function o(t,o){if(this.options=t,null!=o&&this.fromElement(o),this.options=n.apply(this.options),o&&o.is("input")){var r=e(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=i.Decorate(this.options.dataAdapter,r)}}return o.prototype.fromElement=function(e){var n=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.language&&(e.prop("lang")?this.options.language=e.prop("lang").toLowerCase():e.closest("[lang]").prop("lang")&&(this.options.language=e.closest("[lang]").prop("lang"))),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),e.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),e.data("data",e.data("select2Tags")),e.data("tags",!0)),e.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",e.data("ajaxUrl")),e.data("ajax--url",e.data("ajaxUrl")));var o={};o=t.fn.jquery&&"1."==t.fn.jquery.substr(0,2)&&e[0].dataset?t.extend(!0,{},e[0].dataset,e.data()):e.data();var r=t.extend(!0,{},o);r=i._convertData(r);for(var a in r)t.inArray(a,n)>-1||(t.isPlainObject(this.options[a])?t.extend(this.options[a],r[a]):this.options[a]=r[a]);return this},o.prototype.get=function(e){return this.options[e]},o.prototype.set=function(e,t){this.options[e]=t},o}),t.define("select2/core",["jquery","./options","./utils","./keys"],function(e,t,n,i){var o=function(e,n){null!=e.data("select2")&&e.data("select2").destroy(),this.$element=e,this.id=this._generateId(e),n=n||{},this.options=new t(n,e),o.__super__.constructor.call(this);var i=e.attr("tabindex")||0;e.data("old-tabindex",i),e.attr("tabindex","-1");var r=this.options.get("dataAdapter");this.dataAdapter=new r(e,this.options);var a=this.render();this._placeContainer(a);var s=this.options.get("selectionAdapter");this.selection=new s(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,a);var l=this.options.get("dropdownAdapter");this.dropdown=new l(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,a);var d=this.options.get("resultsAdapter");this.results=new d(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var c=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){c.trigger("selection:update",{data:e})}),e.addClass("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),e.data("select2",this)};return n.Extend(o,n.Observable),o.prototype._generateId=function(e){var t="";return t=null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+n.generateChars(2):n.generateChars(4),t="select2-"+t},o.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},o.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var i=this._resolveWidth(e,"style");return null!=i?i:this._resolveWidth(e,"element")}if("element"==t){var o=e.outerWidth(!1);return 0>=o?"auto":o+"px"}if("style"==t){var r=e.attr("style");if("string"!=typeof r)return null;for(var a=r.split(";"),s=0,l=a.length;l>s;s+=1){var d=a[s].replace(/\s/g,""),c=d.match(n);if(null!==c&&c.length>=1)return c[1]}return null}return t},o.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},o.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this._sync=n.bind(this._syncAttributes,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._sync);var i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=i?(this._observer=new i(function(n){e.each(n,t._sync)}),this._observer.observe(this.$element[0],{attributes:!0,subtree:!1})):this.$element[0].addEventListener&&this.$element[0].addEventListener("DOMAttrModified",t._sync,!1)},o.prototype._registerDataEvents=function(){var e=this;this.dataAdapter.on("*",function(t,n){e.trigger(t,n)})},o.prototype._registerSelectionEvents=function(){var t=this,n=["toggle"];this.selection.on("toggle",function(){t.toggleDropdown()}),this.selection.on("*",function(i,o){-1===e.inArray(i,n)&&t.trigger(i,o)})},o.prototype._registerDropdownEvents=function(){var e=this;this.dropdown.on("*",function(t,n){e.trigger(t,n)})},o.prototype._registerResultsEvents=function(){var e=this;this.results.on("*",function(t,n){e.trigger(t,n)})},o.prototype._registerEvents=function(){var e=this;this.on("open",function(){e.$container.addClass("select2-container--open")}),this.on("close",function(){e.$container.removeClass("select2-container--open")}),this.on("enable",function(){e.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){e.$container.addClass("select2-container--disabled")}),this.on("focus",function(){e.$container.addClass("select2-container--focus")}),this.on("blur",function(){e.$container.removeClass("select2-container--focus")}),this.on("query",function(t){t=t||{},Array.isArray(t)&&(t=t[0]||{});var n=t.term?t.term.length:0,i=!1;void 0!==this.lastSearchInput&&null!==this.lastSearchInput&&(i=0===this.lastSearchInput.indexOf(t.term)),this.lastSearchInput=t.term;var o=t.skipFetch,r=e.options.options.fetchCollection,a=e.options.options.minimumInputLength;i||n!==a||"function"!=typeof r||o?(e.isOpen()||e.trigger("open"),this.dataAdapter.query(t,function(n){e.trigger("results:all",{data:n,query:t})})):r(t.term)}),this.on("query:append",function(t){this.dataAdapter.query(t,function(n){e.trigger("results:append",{data:n,query:t})})}),this.on("keypress",function(t){var n=t.which;e.isOpen()?n===i.ENTER?(e.trigger("results:select"),t.preventDefault()):n===i.SPACE&&t.ctrlKey?(e.trigger("results:toggle"),t.preventDefault()):n===i.UP?(e.trigger("results:previous"),t.preventDefault()):n===i.DOWN?(e.trigger("results:next"),t.preventDefault()):(n===i.ESC||n===i.TAB)&&(e.close(),t.preventDefault()):(n===i.ENTER||n===i.SPACE||(n===i.DOWN||n===i.UP)&&t.altKey)&&(e.open(),t.preventDefault())})},o.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable")):this.trigger("enable")},o.prototype.trigger=function(e,t){var n=o.__super__.trigger,i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(e in i){var r=i[e],a={prevented:!1,name:e,args:t};if(n.call(this,r,a),a.prevented)return void(t.prevented=!0)}n.call(this,e,t)},o.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},o.prototype.open=function(e){if(!this.isOpen()){var t;void 0!==e&&null!==e&&(t=e[0]),t=t||{},this.trigger("query",t),this.trigger("open",t)}},o.prototype.close=function(){this.isOpen()&&this.trigger("close")},o.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},o.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),(null==e||0===e.length)&&(e=[!0]);var t=!e[0];this.$element.prop("disabled",t)},o.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var e=[];return this.dataAdapter.current(function(t){e=t}),e},o.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==t||0===t.length)return this.$element.val();var n=t[0];e.isArray(n)&&(n=e.map(n,function(e){return e.toString()})),this.$element.val(n).trigger("change")},o.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._sync),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&this.$element[0].removeEventListener("DOMAttrModified",this._sync,!1),this._sync=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},o.prototype.render=function(){var t=e('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container.addClass("select2-container--"+this.options.get("theme")),t.data("element",this.$element),t},o}),t.define("select2/compat/utils",["jquery"],function(e){function t(t,n,i){var o,r,a=[];o=e.trim(t.attr("class")),o&&(o=""+o,e(o.split(/\s+/)).each(function(){0===this.indexOf("select2-")&&a.push(this)})),o=e.trim(n.attr("class")),o&&(o=""+o,e(o.split(/\s+/)).each(function(){0!==this.indexOf("select2-")&&(r=i(this),null!=r&&a.push(r))})),t.attr("class",a.join(" "))}return{syncCssClasses:t}}),t.define("select2/compat/containerCss",["jquery","./utils"],function(e,t){function n(e){return null}function i(){}return i.prototype.render=function(i){var o=i.call(this),r=this.options.get("containerCssClass")||"";e.isFunction(r)&&(r=r(this.$element));var a=this.options.get("adaptContainerCssClass");if(a=a||n,-1!==r.indexOf(":all:")){r=r.replace(":all","");var s=a;a=function(e){var t=s(e);return null!=t?t+" "+e:e}}var l=this.options.get("containerCss")||{};return e.isFunction(l)&&(l=l(this.$element)),t.syncCssClasses(o,this.$element,a),o.css(l),o.addClass(r),o},i}),t.define("select2/compat/dropdownCss",["jquery","./utils"],function(e,t){function n(e){return null}function i(){}return i.prototype.render=function(i){var o=i.call(this),r=this.options.get("dropdownCssClass")||"";e.isFunction(r)&&(r=r(this.$element));var a=this.options.get("adaptDropdownCssClass");if(a=a||n,-1!==r.indexOf(":all:")){r=r.replace(":all","");var s=a;a=function(e){var t=s(e);return null!=t?t+" "+e:e}}var l=this.options.get("dropdownCss")||{};return e.isFunction(l)&&(l=l(this.$element)),t.syncCssClasses(o,this.$element,a),o.css(l),o.addClass(r),o},i}),t.define("select2/compat/initSelection",["jquery"],function(e){function t(e,t,n){n.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2"),this.initSelection=n.get("initSelection"),this._isInitialized=!1,e.call(this,t,n)}return t.prototype.current=function(t,n){var i=this;return this._isInitialized?void t.call(this,n):void this.initSelection.call(null,this.$element,function(t){i._isInitialized=!0,e.isArray(t)||(t=[t]),n(t)})},t}),t.define("select2/compat/inputData",["jquery"],function(e){function t(e,t,n){this._currentData=[],this._valueSeparator=n.get("valueSeparator")||",","hidden"===t.prop("type")&&n.get("debug")&&console&&console.warn&&console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead."),e.call(this,t,n)}return t.prototype.current=function(t,n){function i(t,n){var o=[];return t.selected||-1!==e.inArray(t.id,n)?(t.selected=!0,o.push(t)):t.selected=!1,t.children&&o.push.apply(o,i(t.children,n)),o}for(var o=[],r=0;r<this._currentData.length;r++){var a=this._currentData[r];o.push.apply(o,i(a,this.$element.val().split(this._valueSeparator)))}n(o)},t.prototype.select=function(t,n){if(this.options.get("multiple")){var i=this.$element.val();i+=this._valueSeparator+n.id,this.$element.val(i),this.$element.trigger("change")}else this.current(function(t){e.map(t,function(e){e.selected=!1})}),this.$element.val(n.id),this.$element.trigger("change")},t.prototype.unselect=function(e,t){var n=this;t.selected=!1,this.current(function(e){for(var i=[],o=0;o<e.length;o++){var r=e[o];t.id!=r.id&&i.push(r.id)}n.$element.val(i.join(n._valueSeparator)),n.$element.trigger("change")})},t.prototype.query=function(e,t,n){for(var i=[],o=0;o<this._currentData.length;o++){var r=this._currentData[o],a=this.matches(t,r);null!==a&&i.push(a)}n({results:i})},t.prototype.addOptions=function(t,n){var i=e.map(n,function(t){return e.data(t[0],"data")});this._currentData.push.apply(this._currentData,i)},t}),t.define("select2/compat/matcher",["jquery"],function(e){function t(t){function n(n,i){var o=e.extend(!0,{},i);if(null==n.term||""===e.trim(n.term))return o;if(i.children){for(var r=i.children.length-1;r>=0;r--){var a=i.children[r],s=t(n.term,a.text,a);s||o.children.splice(r,1)}if(o.children.length>0)return o}return t(n.term,i.text,i)?o:null}return n}return t}),t.define("select2/compat/query",[],function(){function e(e,t,n){n.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2."),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.callback=n;var i=this.options.get("query");i.call(null,t)},e}),t.define("select2/dropdown/attachContainer",[],function(){function e(e,t,n){e.call(this,t,n)}return e.prototype.position=function(e,t,n){var i=n.find(".dropdown-wrapper");i.append(t),t.addClass("select2-dropdown--below"),n.addClass("select2-container--below")},e}),t.define("select2/dropdown/stopPropagation",[],function(){function e(){}return e.prototype.bind=function(e,t,n){e.call(this,t,n);var i=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$dropdown.on(i.join(" "),function(e){e.stopPropagation()})},e}),t.define("select2/selection/stopPropagation",[],function(){function e(){}return e.prototype.bind=function(e,t,n){e.call(this,t,n);var i=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$selection.on(i.join(" "),function(e){e.stopPropagation()})},e}),t.define("jquery.select2",["jquery","require","./select2/core","./select2/defaults"],function(e,t,n,i){if(t("jquery.mousewheel"),null==e.fn.select2){var o=["open","close","destroy"];e.fn.select2=function(t){if(t=t||{},"object"==typeof t)return this.each(function(){var i=e.extend({},t,!0);new n(e(this),i)}),this;if("string"==typeof t){var i=this.data("select2");null==i&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2.");var r=Array.prototype.slice.call(arguments,1),a=i[t](r);return e.inArray(t,o)>-1?this:a}throw new Error("Invalid arguments for Select2: "+t)}}return null==e.fn.select2.defaults&&(e.fn.select2.defaults=i),n}),function(n){"function"==typeof t.define&&t.define.amd?t.define("jquery.mousewheel",["jquery"],n):"object"==typeof exports?module.exports=n:n(e)}(function(e){function t(t){var a=t||window.event,s=l.call(arguments,1),d=0,u=0,h=0,p=0,g=0,f=0;if(t=e.event.fix(a),t.type="mousewheel","detail"in a&&(h=-1*a.detail),"wheelDelta"in a&&(h=a.wheelDelta),"wheelDeltaY"in a&&(h=a.wheelDeltaY),"wheelDeltaX"in a&&(u=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(u=-1*h,h=0),d=0===h?u:h,"deltaY"in a&&(h=-1*a.deltaY,d=h),"deltaX"in a&&(u=a.deltaX,0===h&&(d=-1*u)),0!==h||0!==u){if(1===a.deltaMode){var m=e.data(this,"mousewheel-line-height");d*=m,h*=m,u*=m}else if(2===a.deltaMode){var v=e.data(this,"mousewheel-page-height");d*=v,h*=v,u*=v}if(p=Math.max(Math.abs(h),Math.abs(u)),(!r||r>p)&&(r=p,i(a,p)&&(r/=40)),i(a,p)&&(d/=40,u/=40,h/=40),d=Math[d>=1?"floor":"ceil"](d/r),u=Math[u>=1?"floor":"ceil"](u/r),h=Math[h>=1?"floor":"ceil"](h/r),c.settings.normalizeOffset&&this.getBoundingClientRect){var b=this.getBoundingClientRect();g=t.clientX-b.left,f=t.clientY-b.top}return t.deltaX=u,t.deltaY=h,t.deltaFactor=r,t.offsetX=g,t.offsetY=f,t.deltaMode=0,s.unshift(t,d,u,h),o&&clearTimeout(o),o=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,s)}}function n(){r=null}function i(e,t){return c.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var o,r,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var d=a.length;d;)e.event.fixHooks[a[--d]]=e.event.mouseHooks;var c=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=s.length;n;)this.addEventListener(s[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",c.getLineHeight(this)),e.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=s.length;n;)this.removeEventListener(s[--n],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),i=n["offsetParent"in e.fn?"offsetParent":"parent"]();return i.length||(i=e("body")),parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),{define:t.define,require:t.require}}(),n=t.require("jquery.select2");return e.fn.select2.amd=t,n}),define("main/ui_components/forms/controls/select",["backbone","puppetForm","handlebars","underscore","select2"],function(e,t,n,i){"use strict";var o=e.Collection.extend({model:e.Model.extend({parse:function(t){return this.pickList=new e.Collection(t.pickList),t}})}),r={defaults:{label:"",showFilter:!1,groupEnabled:!1,extraClasses:[],multiple:!1,title:"Press up and down arrow keys to view options. Press enter to select.",options:{width:"100%",minimumInputLength:3,sorter:function(e,t){var n;return n=i.isEmpty(e)||i.isUndefined(i.first(e).children)?i.sortBy(e,function(e){return e.text}):i.map(e,function(e){return e.children=i.sortBy(e.children,function(e){return e.text}),e})}}},requiredFields:["name","label","pickList"],attributeMappingDefaults:{group:"group",value:"value",label:"label"},events:i.defaults({"change select":"onChange","focus select":"","control:label":function(e,t){e.preventDefault(),this.setStringFieldOption("label",t,e)},"control:disabled":function(e,t){e.preventDefault(),this.setBooleanFieldOption("disabled",t,e)},"control:required":function(e,t){e.preventDefault(),this.setBooleanFieldOption("required",t,e)},"control:multiple":function(e,t){e.preventDefault(),this.setBooleanFieldOption("multiple",t,e)},"control:size":function(e,t){e.preventDefault(),this.setIntegerFieldOption("size",t,e)},"control:picklist:set":function(e,t){e.preventDefault(),this.setPickList({pickList:t})},"control:loading:hide":function(e){e.preventDefault(),this.hideLoading()},"control:loading:show":function(e){e.preventDefault(),this.showLoading()}},t.CommonPrototype.events),getTemplate:function(){var e=['{{ui-form-label (add-required-indicator label required) forID=(clean-for-id name) classes=(is-sr-only-label srOnlyLabel)}}<select class="{{PuppetForm "controlClassName"}}" id="{{clean-for-id name}}" name="{{name}}"{{#if title}} title="{{title}}"{{/if}} {{#if disabled}} disabled{{/if}}{{#if required}} required{{/if}}{{#if disabled}} disabled{{/if}}{{#if multiple}} multiple{{/if}}{{#if size}} size={{size}}{{/if}}>'].join("\n");return e=this.isGroupEnabled()?[e,'{{#unless required}}<option {{#unless value}} selected="selected"{{/unless}}></option>{{/unless}}',"{{#each groups}}<optgroup label="+this.mappedAttribute("group",!0,!0)+">","{{#each pickList}}<option value="+this.mappedAttribute("value",!0,!0)+"{{#compare "+this.mappedAttribute("value")+' ../../rawValue}} selected="selected"{{/compare}}{{#if disabled}} disabled="disabled"{{/if}}>'+this.mappedAttribute("label",!0)+"</option>{{/each}}","</optgroup>","{{/each}}"].join("\n"):[e,'{{#unless required}}<option {{#unless value}} selected="selected"{{/unless}}></option>{{/unless}}','{{#each options}}<option value="{{formatter-from-raw ../formatter '+this.mappedAttribute("value")+'}}"{{#compare '+this.mappedAttribute("value")+' ../rawValue}} selected="selected"{{/compare}}{{#if disabled}} disabled="disabled"{{/if}}>'+this.mappedAttribute("label",!0)+"</option>{{/each}}"].join("\n"),e=[e,"</select>"].join("\n"),n.compile(e)},isGroupEnabled:function(){return this.field.get("groupEnabled")},initialize:function(n){this.pickList=new e.Collection,this.initOptions(n),this.field.set("options",i.defaults(this.field.get("options")||{},this.defaults.options)),this.hasAllRequiredOptionsDefined(),void 0!==this.field.get("fetchFunction")&&null!==this.field.get("fetchFunction")&&"function"==typeof this.field.get("fetchFunction")&&this.field.set("fetchEnabled",!0),this.formatter=new t.ControlFormatter,this.setAttributeMapping(),this.registerHandlers(),this.listenToFieldName(),this.setExtraClasses(this.defaults.extraClasses),this.registerToComponentList(this),this.setPickList({pickList:this.field.get("pickList")}),this.listenToPickList(),this.listenToFieldOptions()},serializeModel:function(e){return this.isGroupEnabled()?t.Control.prototype.serializeModel.call(this,e,{groups:JSON.parse(JSON.stringify(this.pickList))}):t.Control.prototype.serializeModel.call(this,e,{options:this.pickList.toJSON()})},needMoreInput:function(e){if(this.field.get("options").minimumInputLength++,void 0!==e&&null!==e){this.$el.closest(".workflow-container");this.$el.find("select").select2(i.defaults({fetchCollection:i.bind(this.fetchCollection,this),minimumInputLength:this.field.get("options").minimumInputLength},this.field.get("options"))),this.$el.find("select").select2("open",{term:e,skipFetch:!0})}},onFetchError:function(e){},fetchCollection:function(e){var t=i.bind(this.setPickList,this),n=i.bind(this.onFetchError,this),o=i.bind(this.needMoreInput,this);this.field.get("fetchFunction")(e,t,o,n)},setPickList:function(t){var n=t.pickList;(void 0===n||null===n)&&(n=[]);var r=t.input;if(void 0!==r&&null!==r&&this.$el.find("select").select2("close"),i.isString(n)){var a=i.defaults(this.field.toJSON(),this.defaults),s=this.model.toJSON(),l=a.pickList.split("."),d=l.shift(),c=l.join("."),u=this.keyPathAccessor(s[d],c);this.formatter.fromRaw(u,this.model);n=s[d]}if(n=this.isGroupEnabled()?n instanceof e.Collection?n||new e.Collection:new o(n,{parse:!0}):n instanceof e.Collection?n||new e.Collection:new e.Collection(n),this.pickList.reset(n.models),void 0!==r&&null!==r){this.$el.closest(".workflow-container");this.$el.find("select").select2(i.defaults({fetchCollection:i.bind(this.fetchCollection,this)},this.field.get("options"))),this.$el.find("select").select2("open",{term:r,skipFetch:!0})}else this.field.get("showFilter")===!0&&this.initSelect2()},initSelect2:function(){if(0!==this.$el.find("select").length){this.$el.attr("role","application");var e=this,t=this.field.get("fetchEnabled");this.$el.closest(".workflow-container");t?this.$el.find("select").select2(i.defaults({fetchCollection:i.bind(this.fetchCollection,this)},this.field.get("options"))):this.$el.find("select").select2(this.field.get("options")),this.$el.find("select").on("select2:open",function(){e.$el.hasClass("has-error")&&e.$el.find("#select2-drop").addClass("has-error")}),this.hasSelect2BeenInitialized=!0}},getPickList:function(e){return this.pickList},showLoading:function(){this.$el.find("select").prop("disabled",!0).empty().append('<option value="loading">Loading...</option>')},hideLoading:function(){this.$el.find("select").prop("disabled",!1).empty()},listenToPickList:function(){var e=this;i.isString(this.field.get("pickList"))&&this.listenTo(this.model.get(this.field.get("pickList")),"add remove",function(){this.setPickList({pickList:this.field.get("pickList")})}),this.pickList.bind("reset",function(){e.render()})},onAttach:function(){this.field.get("multiple")===!0||this.field.get("showFilter")===!0&&this.initSelect2()},getValueFromDOM:function(){return this.field.get("multiple")===!0?this.formatter.toRaw(this.$el.find("select").val(),this.model):this.formatter.toRaw(this.$el.find("select").val(),this.model)},onRender:function(){this.$el.addClass(this.field.get("controlName")+"-control "+this.field.get("name").split(".").shift()+(this.extraClasses?" "+this.extraClasses:"")),this.updateInvalid(),this.field.get("showFilter")!==!0||this.hasSelect2BeenInitialized||this.initSelect2()}},a=t.SelectControl=t.DefaultSelectControl.extend(i.defaults(r,i.defaults(t.CommonPrototype,t.CommonEventsFunctions)));return a}),define("main/ui_components/forms/controls/drilldownChecklist",["backbone","puppetForm","handlebars","main/ui_components/forms/controls/select","main/ui_components/forms/controls/checklist"],function(e,t,n){"use strict";var i=e.Marionette.CollectionView.extend({addChild:function(e,t,n){var i={};i[this.selectView.attributeMapping.value]=this.selectedValue,e==this.collection.where(i)[0]&&Marionette.CollectionView.prototype.addChild.apply(this,arguments)},childView:t.ChecklistControl,childViewOptions:function(e,t){var n=this.checklistOptions.set("label",e.get(this.selectView.attributeMapping.label));return n.set("attributeMapping",_.defaults({
label:"label"},this.checklistOptions.get("attributeMapping")||{})),{field:n,model:e,componentList:this.componentList}},initialize:function(e){this.checklistOptions=e.checklistOptions,this.selectView=e.selectView,this.selectOptions=this.selectView.field,this.collection=this.selectView.pickList,this.selectedValue=e.selectedValue||""},updateChecklist:function(e){this.selectedValue=e,this.render()},className:"well read-only-well"}),o={template:n.compile(['<div class="col-xs-3 left-padding-md right-padding-xs drilldown-select-region"></div>','<div class="col-xs-9 left-padding-xs drilldown-checklist-region"></div>'].join("\n")),ui:{SelectRegion:".drilldown-select-region",ChecklistRegion:".drilldown-checklist-region"},regions:{SelectRegion:"@ui.SelectRegion",ChecklistRegion:"@ui.ChecklistRegion"},requiredFields:["selectOptions","checklistOptions"],initialize:function(e){this.initOptions(e),this.hasAllRequiredOptionsDefined(),this.setFormatter(),this.setExtraClasses(),this.selectOptions=new t.Field(this.field.get("selectOptions")||{}),this.checklistOptions=new t.Field(this.field.get("checklistOptions")||{}),this.selectedValue=this.model.get(this.selectOptions.get("name"))||"",this.selectView=new t.SelectControl({field:this.selectOptions,model:this.model,componentList:this.componentList}),this.checklistContainerView=new i({checklistOptions:this.checklistOptions,selectView:this.selectView,selectedValue:this.selectedValue}),this.listenTo(this.model,"change:"+this.selectOptions.get("name"),function(e,t){this.selectedValue=e.get(this.selectOptions.get("name")),this.checklistContainerView.updateChecklist(this.selectedValue)})},onRender:function(){this.$el.addClass(this.field.get("controlName")+"-control "+this.field.get("name").split(".").shift()+(this.extraClasses?" "+this.extraClasses:"")),this.updateInvalid(),this.showChildView("SelectRegion",this.selectView),this.showChildView("ChecklistRegion",this.checklistContainerView)}},r=t.DrilldownChecklistControl=e.Marionette.LayoutView.extend(_.defaults(o,t.CommonPrototype,t.CommonEventsFunctions));return r}),define("main/ui_components/forms/controls/searchbar",["puppetForm","handlebars"],function(e,t){"use strict";var n=e.SearchbarControl=e.Control.extend({_super:e.Control.prototype,requiredFields:["name"],defaults:{type:"text",maxlength:255,extraClasses:[],helpMessage:""},template:t.compile("{{ui-form-searchbar placeholder size=size value=value classes=extraClasses title=title}}"),events:{"change input":"onChange","focus input":"clearInvalid"},getValueFromDOM:function(){return this.formatter.toRaw(this.$el.find("input").val(),this.model)}});return n}),define("main/ui_components/forms/controls/fieldset",["backbone","puppetForm","handlebars","underscore"],function(e,t,n,i){"use strict";var o={defaults:{items:[],extraClasses:[],legend:void 0},requiredFields:["legend","items"],tagName:"fieldset",template:n.compile("{{#if legend}}<legend>{{legend}}</legend>{{/if}}"),initialize:function(o){this.collection=new e.Collection,this.initOptions(o),this.hasAllRequiredOptionsDefined(),this.setExtraClasses(),this.legend=this.field.get("legend")||this.defaults.legend,this.template=n.compile(i.isString(this.legend)?"<legend>"+this.legend+"</legend>":"");var r=this.field.get("items")||this.defaults.items;r instanceof e.Collection||(r=new t.Fields(r)),this.items=r,this.collection=this.items,this.collection.bind("remove",this.render)},onRender:function(){this.$el.addClass(this.extraClasses)},getChildView:function(e){return e.get("control")},childViewOptions:function(e,t){return{field:e,model:this.model,componentList:this.componentList}},events:i.defaults({},t.CommonPrototype.events,t.CommonContainerEvents.events)},r={setExtraClasses:t.CommonPrototype.setExtraClasses,initOptions:t.CommonPrototype.initOptions,hasAllRequiredOptionsDefined:t.CommonPrototype.hasAllRequiredOptionsDefined},a=t.FieldsetControl=e.Marionette.CompositeView.extend(i.defaults(o,i.defaults(r,t.CommonEventsFunctions,t.CommonContainerEventsFunctions)));return a}),define("main/ui_components/forms/controls/container",["backbone","puppetForm","handlebars"],function(e,t,n){"use strict";var i={defaults:{items:[],extraClasses:[]},template:n.compile(""),initialize:function(i){this.collection=new e.Collection,this.initOptions(i),this.formModel=i.model,this.tagName=this.field.get("tagName")||"div",this.$el[0]=this.el=document.createElement(this.tagName),this.containerTemplate=this.field.get("template")||null,this.containerTemplate&&(this.template=_.isFunction(this.containerTemplate)?this.containerTemplate:n.compile(this.containerTemplate)),this.setExtraClasses();var o=this.field.get("items")||this.defaults.items;if(o instanceof e.Collection||(o=new t.Fields(o)),this.items=o,this.collection=this.items,this.collection.bind("remove",this.render),this.modelListeners=this.field.get("modelListeners")||null,this.modelListeners&&_.isArray(this.modelListeners)&&this.modelListeners.length>0){var r="";_.each(this.modelListeners,function(e){_.isString(e)&&(r+=" change:"+e)},this),this.listenTo(this.formModel,r,function(){this.render()},this)}this.listenToFieldOptions()},onRender:function(){this.$el.addClass(this.extraClasses)},getChildView:function(e){return e.get("control")},childViewOptions:function(e,t){return{field:e,model:this.model,componentList:this.componentList}},onChildviewGetWorkflowParentContainer:function(e,t){this.triggerMethod("get:workflow:parent:container",t)},events:_.defaults({"control:items":function(n,i){var o=i||this.defaults.items;o instanceof e.Collection||(o=new t.Fields(o)),this.items=o,this.collection.set(this.items.models),n.stopPropagation()}},t.CommonPrototype.events,t.CommonContainerEvents.events)},o={setExtraClasses:t.CommonPrototype.setExtraClasses,listenToFieldOptions:t.CommonPrototype.listenToFieldOptions,initOptions:t.CommonPrototype.initOptions},r=t.ContainerControl=e.Marionette.CompositeView.extend(_.defaults(i,_.defaults(o,t.CommonEventsFunctions,t.CommonContainerEventsFunctions)));return r}),define("main/ui_components/forms/controls/multiselectSideBySide",["backbone","puppetForm","handlebars"],function(e,t,n){"use strict";var i=e.Marionette.ItemView.extend({availableTemplate:n.compile('<div class="row"><div class="col-xs-12"><p>No {{keyword}} found</p></div></div>'),selectedTemplate:n.compile('<p>No {{keyword}} found</p>{{#each selectedItems}}<div/>{{/each}}<div class="pixel-width-35"/>'),getTemplate:function(){return this.model.get("filter")?this.selectedTemplate:this.availableTemplate},initialize:function(e){this.model=e.model},className:function(){return this.model.get("filter")?"table-row":"list-group-item"},tagName:function(){return this.model.get("filter")?"div":"li"}}),o=e.Marionette.CompositeView.extend({getChildView:function(e){var t=e.get("view");return t},buttonTemplate:n.compile('<div><button type="button" class="btn btn-icon all-padding-no pull-right checked-{{value}}" title="Press enter to remove {{label}}."><i class="right-padding-sm left-padding-sm fa fa-times-circle"></i></button></div>'),template:n.compile(["<div>{{label}}</div>"].join("\n")),ui:{AdditionalColumns:".additionalColumns-container"},initialize:function(n){this.attributeMapping=n.attributeMapping;var i=n.selectedItems;this.collection=new e.Collection,i instanceof e.Collection?this.selectedItemsCollection=new e.Collection:this.selectedItemsCollection=new e.Collection(i),this.selectedItemsCollectionContainer=this.selectedItemsCollection,this.listenTo(this.model,"change",function(e){this.collection=_.map(this.selectedItemsCollectionContainer.models,function(e){var n=this;return{label:n.model.get(n.attributeMapping.unique),view:function(){var i=new t.Field({control:"container",items:[e.toJSON()],extraClasses:[e.get("extraClasses")]||[]});return new t.ContainerControl({field:i,model:n.model})}}},this)},this),this.collection=_.map(this.selectedItemsCollectionContainer.models,function(e){var n=this,i=e.toJSON();return i.name=n.model.get(n.attributeMapping.unique)+"-"+e.get("name"),{label:n.model.get(n.attributeMapping.unique),view:function(){var e=new t.Field({control:"container",items:[i],extraClasses:i.extraClasses||[]});return new t.ContainerControl({field:e,model:n.model})}}},this)},className:"table-row",serializeModel:function(e){var t=e.toJSON(),n={name:t[this.attributeMapping.unique],value:t[this.attributeMapping.value],label:t[this.attributeMapping.label]};return n},events:{"click button":"onChange"},getValueFromDOM:function(e){var t=$(e.currentTarget).hasClass("checked-true")?!1:!0;return t},onChange:function(e){var t=this.getValueFromDOM(e);this.model.set(this.attributeMapping.value,t)},onBeforeRender:function(){this.collection instanceof e.Collection||(this.collection=new e.Collection(this.collection))},onRender:function(){this.$el.append(this.buttonTemplate(this.serializeData()))}}),r=e.Marionette.ItemView.extend({initialize:function(e){this.field=e.model.attributes,this.attributeMapping=e.attributeMapping},template:n.compile(['<div class="row">','<div class="col-xs-10">{{label}}</div>','<div class="col-xs-2">','<button type="button" class="btn btn-icon all-padding-no checked-{{value}}" title="Press enter to {{#if value}}remove{{else}}add{{/if}} {{label}}."><i class="right-padding-xs left-padding-xs fa {{#if value}}fa-times-circle{{else}}fa-plus{{/if}}"></i></button>',"</div>","</div>"].join("\n")),modelEvents:{change:"render"},tagName:"li",className:"list-group-item",events:{"click button":"onChange"},getValueFromDOM:function(e){var t=$(e.currentTarget).hasClass("checked-true")?!1:!0;return t},onChange:function(e){var t=this.getValueFromDOM(e);this.model.set(this.attributeMapping.value,t)},serializeModel:function(e){var t=e.toJSON(),n={name:t[this.attributeMapping.unique],value:t[this.attributeMapping.value],label:t[this.attributeMapping.label]};return n}}),a={defaults:{type:"checkbox",label:"",controlLabel:" ","class":[]},className:function(){return""},getChildView:function(){return this.filter?o:r},getTemplate:function(){return this.filter?this.selectedTemplate:this.availableTemplate},selectedTemplate:n.compile(['<div class="faux-table">','<div class="sr-only"> This table contains the available options to select</div>','<div class="header">','<div class="table-row">',"<div>Selected</div>",'{{#each selectedItems}}<div class="{{this.extraClasses}}">{{this.headerName}}</div>{{/each}}','<div class="pixel-width-35"> </div>',"</div>","</div>",'<div class="body childView-container"/>'].join("\n")),availableTemplate:n.compile(['<div class="panel panel-default panel-w-list-group">',"{{#if smallSize}}",'<div class="panel-heading panel-heading-small">','<div class="row">','<div class="mssbs-header mssbs-header-sm col-xs-12">',"<h6>{{#if filter}}Selected {{else}}Available {{/if}}{{label}}</h6>","</div>","</div>","</div>",'<div class="row left-padding-xs right-padding-xs">','<div class="mssbs-input mssbs-input-sm col-xs-12">',"{{#if notFilter}}",'<div class="control form-group bottom-margin-none">','<label for="{{#if filter}}selected{{else}}available{{/if}}-{{clean-for-id label}}-modifiers-filter-results" class="sr-only">Filter</label>','<input id="{{#if filter}}selected{{else}}available{{/if}}-{{clean-for-id label}}-modifiers-filter-results" type="text" class="form-control input-sm filter" name="{{#if filter}}selected{{else}}available{{/if}}-{{clean-for-id label}}-filter" title="Enter text to filter the {{#if filter}}Selected{{else}}Available{{/if}} {{label}} results" placeholder="Filter Results"/>',"</div>","{{/if}}","</div>","</div>","{{else}}",'<div class="panel-heading">','<div class="row">','<div class="mssbs-header col-xs-6">',"<h6>{{#if filter}}Selected {{else}}Available {{/if}}{{label}}</h6>","</div>",'<div class="mssbs-input col-xs-6">',"{{#if notFilter}}",'<div class="control form-group pull-right">','<label for="{{#if filter}}selected{{else}}available{{/if}}-{{clean-for-id label}}-modifiers-filter-results" class="sr-only">Filter</label>','<input id="{{#if filter}}selected{{else}}available{{/if}}-{{clean-for-id label}}-modifiers-filter-results" type="text" class="form-control input-sm filter" name="{{#if filter}}selected{{else}}available{{/if}}-{{clean-for-id label}}-filter" title="Enter text to filter the {{#if filter}}Selected{{else}}Available{{/if}} {{label}} results" placeholder="Filter Results"/>',"</div>","{{/if}}","</div>","</div>","</div>","{{/if}}",'<ul class="list-group{{#if smallSize}} list-group-small{{/if}} childView-container{{#if (has-puppetForm-prop "controlsClassName")}} {{PuppetForm "controlsClassName"}}{{/if}}"></ul>',"</div>"].join("\n")),ui:{ChildViewContainer:".childView-container"},emptyView:i,emptyViewOptions:function(){return{model:new e.Model({keyword:this.field.get("label"),filter:this.filter,selectedItems:this.selectedItems||[]})}},childViewContainer:"@ui.ChildViewContainer",childViewOptions:function(e,t){return this.filter?{attributeMapping:this.attributeMapping,selectedItems:this.selectedItems}:{attributeMapping:this.attributeMapping}},addChild:function(e,t,n){this.filter||e.get(this.attributeMapping.value)||!_.isBoolean(e.get(this.attributeMapping.value))?this.filter&&e.get(this.attributeMapping.value)&&_.isBoolean(e.get(this.attributeMapping.value))&&Marionette.CollectionView.prototype.addChild.apply(this,arguments):Marionette.CollectionView.prototype.addChild.apply(this,arguments)},initialize:function(e){this.initOptions(e),this.filter=e.filter,this.attributeMapping=e.attributeMapping,this.selectedItems=e.field.get("selectedItems")||[],this.setFormatter(),this.setExtraClasses(),this.listenToFieldName(),this.filter||(this.listenTo(this.collection,"filterStringUpdated",this.filterCollection),this.listenTo(this.collection,"change:"+this.attributeMapping.value,function(e){this.filterCollection()})),_.each(this.selectedItems,function(e){this.stopListening(this.collection,"change:"+e.name)},this)},onRender:function(){this.$el.addClass(this.field.get("name")),this.updateInvalid()},events:{"keyup input.filter":"triggerFilter"},triggerFilter:function(){this.collection.reset(this.collection.originalModels,{silent:!0}),this.collection.trigger("filterStringUpdated")},filterCollection:function(){var e=this.$("input.filter")[0].value.toLowerCase(),t=_.bind(this.makeMatcher(e),this);this.collection.reset(this.collection.filter(t),{reindex:!1})},makeMatcher:function(e){var t=this.filter,n=this.makeRegExp(e);return function(e){if(e.get(this.attributeMapping.value)===t){for(var i=this.fields||e.keys(),o=0,r=i.length;r>o;o++)if(n.test(e.get(i[o])+""))return!0;return!1}return!0}},makeRegExp:function(e){return new RegExp(e.trim().split(/\s+/).join("|"),"i")},serializeModel:function(e){var t=_.defaults(this.field.toJSON(),this.defaults),n=e.toJSON(),i=t.name.split("."),o=i.shift(),r=i.join("."),a=this.keyPathAccessor(n[o],r),s=_.extend(t,{notFilter:!this.filter,filter:this.filter,rawValue:a,value:this.formatter.fromRaw(a,e),attributes:n,formatter:this.formatter,smallSize:"small"===(t.size||"normal")});return s},clearInvalid:function(){return this.$el.removeClass(t.errorClassName).find("."+t.helpClassName+".error").remove(),this},updateInvalid:function(){var n=this.model.errorModel;if(!(n instanceof e.Model))return this;this.clearInvalid();var i=this.field.get("name").split("."),o=i.shift(),r=i.join("."),a=n.get(o);if(!_.isEmpty(a)&&(_.isObject(a)&&(a=this.keyPathAccessor(a,r)),!_.isEmpty(a)))return this.$el.addClass(t.errorClassName),this.$el.append('<span class="'+t.helpClassName+' error">'+(_.isArray(a)?a.join(", "):a)+"</span>"),this},keyPathAccessor:function(e,t){var n=e;t=t.split(".");for(var i=0;i<t.length;i++){if(_.isNull(n))return null;_.isEmpty(t[i])||_.isUndefined(n[t[i]])||(n=n[t[i]])}return _.isObject(n)&&!_.isArray(n)?null:n}},s=e.Marionette.CompositeView.extend(_.defaults(a,_.defaults(t.CommonPrototype,t.CommonEventsFunctions))),l={ui:{AvailableModifiersRegion:".available-region",SelectedModifiersRegion:".selected-region"},regions:{AvailableModifiersRegion:"@ui.AvailableModifiersRegion",SelectedModifiersRegion:"@ui.SelectedModifiersRegion"},className:"row control",attributeMappingDefaults:{unique:"name",value:"value",label:"label"},template:n.compile(['<div class="mssbs">','<div class="available-region col-md-6"></div><div class="selected-region col-md-6"></div>',"</div>"].join("\n")),initialize:function(e){this.initOptions(e),this.setAttributeMapping(),this.setExtraClasses(),this.initCollection("collection");var t=_.find(this.collection.models,function(e){return _.isBoolean(e.get(this.attributeMapping.value),this)?!1:!0},this);t&&t.set(this.attributeMapping.value,!1),this.collection.originalModels=this.collection.models,this.model.set(name,this.collection);var n=this;this.listenTo(this.collection,"change:"+n.attributeMapping.value,function(){var e=n.collection.models;n.collection.reset(n.collection.originalModels,{silent:!0}),n.model.trigger("change:"+n.field.get(n.attributeMapping.unique)),n.collection.reset(e,{silent:!0})}),_.each(e.field.get("selectedItems"),function(e){this.stopListening(this.model,"change:"+e.name)},this),this.availableModifiersView=new s({field:this.field,model:this.model,collection:this.collection,attributeMapping:this.attributeMapping,filter:!1}),this.selectedModifiersView=new s({field:this.field,model:this.model,collection:this.collection,attributeMapping:this.attributeMapping,filter:!0})},onRender:function(){t.Control.prototype.onRender.apply(this,arguments),this.showChildView("AvailableModifiersRegion",this.availableModifiersView),this.showChildView("SelectedModifiersRegion",this.selectedModifiersView)},serializeModel:function(e,t){var n=_.defaults(this.field.toJSON(),this.defaults);return n}},d=t.MultiselectSideBySideControl=e.Marionette.LayoutView.extend(_.defaults(l,_.defaults(t.CommonPrototype,t.CommonEventsFunctions)));return d}),define("main/ui_components/forms/controls/yesNoChecklist",["backbone","puppetForm","handlebars","main/ui_components/forms/component"],function(e,t,n){"use strict";var i=e.Marionette.ItemView.extend({initialize:function(e){this.attributeMapping=e.attributeMapping},template:n.compile(['<div class="col-md-6 col-xs-6">','<p class="faux-label">{{label}}</p>',"</div>",'<div class="col-md-6 col-xs-6">',n.helpers["ui-form-label"].apply(this,["N/A",{hash:{forID:"{{name}}-undefined",classes:t.radioLabelClassName,content:'<input type="radio" id="{{clean-for-id name}}-undefined" name="{{name}}" value="" {{#compare undefined value}}checked="checked"{{/compare}}{{#if disabled}} disabled{{else}}{{#if ../../disabled}} disabled{{/if}}{{/if}}{{#if ../required}} required{{/if}}{{#if title}} title="{{title}}"{{else}} title="Press enter to select, to view next option use arrow keys"{{/if}}/>'}}]),n.helpers["ui-form-label"].apply(this,["Yes",{hash:{forID:"{{name}}-yes",classes:t.radioLabelClassName,content:'<input type="radio" id="{{clean-for-id name}}-yes" name="{{name}}" value=true {{#compare true value}}checked="checked"{{/compare}}{{#if disabled}} disabled{{else}}{{#if ../../disabled}} disabled{{/if}}{{/if}}{{#if ../required}} required{{/if}}{{#if title}} title="{{title}}"{{else}} title="Press enter to select, to view next option use arrow keys"{{/if}}/>'}}]),n.helpers["ui-form-label"].apply(this,["No",{hash:{forID:"{{name}}-no",classes:t.radioLabelClassName,content:'<input type="radio" id="{{clean-for-id name}}-no" name="{{name}}" value=false {{#compare false value}}checked="checked"{{/compare}}{{#if disabled}} disabled{{else}}{{#if ../../disabled}} disabled{{/if}}{{/if}}{{#if ../required}} required{{/if}}{{#if title}} title="{{title}}"{{else}} title="Press enter to select, to view next option use arrow keys"{{/if}}/>'}}]),"</div>"].join("\n")),className:"row",modelEvents:{optionUpdated:"render",change:"render"},events:_.defaults({"change input":"onChange"},t.ChecklistControl.events),getValueFromDOM:function(){var e=this.$el.find("input:checked").val();return e?JSON.parse(e):e},onChange:function(e){e.preventDefault();var t=this.$(e.target),n=this.getValueFromDOM(t);this.model.set(this.attributeMapping.value,n),this.trigger("checklist-value-change")},serializeModel:function(e){var t=e.toJSON(),n={name:t[this.attributeMapping.unique],value:t[this.attributeMapping.value],label:t[this.attributeMapping.label],disabled:t[this.attributeMapping.disabled]};return n}}),o=t.YesNoChecklistControl=t.ChecklistControl.extend({getChildView:function(e){return i}});return o}),function(e){define("typeahead",["jquery"],function(){return function(){!function(e){var t=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return"undefined"==typeof e},toStr:function(e){return t.isUndefined(e)||null===e?"":e+""},bind:e.proxy,each:function(t,n){function i(e,t){return n(t,e)}e.each(t,i)},map:e.map,filter:e.grep,every:function(t,n){var i=!0;return t?(e.each(t,function(e,o){return(i=n.call(null,o,e,t))?void 0:!1}),!!i):i},some:function(t,n){var i=!1;return t?(e.each(t,function(e,o){return(i=n.call(null,o,e,t))?!1:void 0}),!!i):i},mixin:e.extend,getUniqueId:function(){var e=0;return function(){return e++}}(),templatify:function(t){function n(){return String(t)}return e.isFunction(t)?t:n},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var i,o;return function(){var r,a,s=this,l=arguments;return r=function(){i=null,n||(o=e.apply(s,l))},a=n&&!i,clearTimeout(i),i=setTimeout(r,t),a&&(o=e.apply(s,l)),o}},throttle:function(e,t){var n,i,o,r,a,s;return a=0,s=function(){a=new Date,o=null,r=e.apply(n,i)},function(){var l=new Date,d=t-(l-a);return n=this,i=arguments,0>=d?(clearTimeout(o),o=null,a=l,r=e.apply(n,i)):o||(o=setTimeout(s,d)),r}},noop:function(){}}}(),n="0.10.5",i=function(){"use strict";function e(e){return e=t.toStr(e),e?e.split(/\s+/):[]}function n(e){return e=t.toStr(e),e?e.split(/\W+/):[]}function i(e){return function(){var n=[].slice.call(arguments,0);return function(i){var o=[];return t.each(n,function(n){o=o.concat(e(t.toStr(i[n])))}),o}}}return{nonword:n,whitespace:e,obj:{nonword:i(n),whitespace:i(e)}}}(),o=function(){"use strict";function n(n){this.maxSize=t.isNumber(n)?n:100,this.reset(),this.maxSize<=0&&(this.set=this.get=e.noop)}function i(){this.head=this.tail=null}function o(e,t){this.key=e,this.val=t,this.prev=this.next=null}return t.mixin(n.prototype,{set:function(e,t){var n,i=this.list.tail;this.size>=this.maxSize&&(this.list.remove(i),delete this.hash[i.key]),(n=this.hash[e])?(n.val=t,this.list.moveToFront(n)):(n=new o(e,t),this.list.add(n),this.hash[e]=n,this.size++)},get:function(e){var t=this.hash[e];return t?(this.list.moveToFront(t),t.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new i}}),t.mixin(i.prototype,{add:function(e){this.head&&(e.next=this.head,this.head.prev=e),this.head=e,this.tail=this.tail||e},remove:function(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev},moveToFront:function(e){this.remove(e),this.add(e)}}),n}(),r=function(){"use strict";function e(e){this.prefix=["__",e,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+t.escapeRegExChars(this.prefix))}function n(){return(new Date).getTime()}function i(e){return JSON.stringify(t.isUndefined(e)?null:e)}function o(e){return JSON.parse(e)}var r,a;try{r=window.localStorage,r.setItem("~~~","!"),r.removeItem("~~~")}catch(s){r=null}return a=r&&window.JSON?{_prefix:function(e){return this.prefix+e},_ttlKey:function(e){return this._prefix(e)+this.ttlKey},get:function(e){return this.isExpired(e)&&this.remove(e),o(r.getItem(this._prefix(e)))},set:function(e,o,a){return t.isNumber(a)?r.setItem(this._ttlKey(e),i(n()+a)):r.removeItem(this._ttlKey(e)),r.setItem(this._prefix(e),i(o))},remove:function(e){return r.removeItem(this._ttlKey(e)),r.removeItem(this._prefix(e)),this},clear:function(){var e,t,n=[],i=r.length;for(e=0;i>e;e++)(t=r.key(e)).match(this.keyMatcher)&&n.push(t.replace(this.keyMatcher,""));for(e=n.length;e--;)this.remove(n[e]);return this},isExpired:function(e){var i=o(r.getItem(this._ttlKey(e)));return t.isNumber(i)&&n()>i?!0:!1}}:{get:t.noop,set:t.noop,remove:t.noop,clear:t.noop,isExpired:t.noop},t.mixin(e.prototype,a),e}(),a=function(){"use strict";function n(t){t=t||{},this.cancelled=!1,this.lastUrl=null,this._send=t.transport?i(t.transport):e.ajax,this._get=t.rateLimiter?t.rateLimiter(this._get):this._get,this._cache=t.cache===!1?new o(0):l}function i(n){return function(i,o){function r(e){t.defer(function(){s.resolve(e)})}function a(e){t.defer(function(){s.reject(e)})}var s=e.Deferred();return n(i,o,r,a),s}}var r=0,a={},s=6,l=new o(10);return n.setMaxPendingRequests=function(e){s=e},n.resetCache=function(){l.reset()},t.mixin(n.prototype,{_get:function(e,t,n){function i(t){n&&n(null,t),c._cache.set(e,t)}function o(){n&&n(!0)}function l(){r--,delete a[e],c.onDeckRequestArgs&&(c._get.apply(c,c.onDeckRequestArgs),c.onDeckRequestArgs=null)}var d,c=this;this.cancelled||e!==this.lastUrl||((d=a[e])?d.done(i).fail(o):s>r?(r++,a[e]=this._send(e,t).done(i).fail(o).always(l)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(e,n,i){var o;return t.isFunction(n)&&(i=n,n={}),this.cancelled=!1,this.lastUrl=e,(o=this._cache.get(e))?t.defer(function(){i&&i(null,o)}):this._get(e,n,i),!!o},cancel:function(){this.cancelled=!0}}),n}(),s=function(){"use strict";function n(t){t=t||{},t.datumTokenizer&&t.queryTokenizer||e.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=t.datumTokenizer,this.queryTokenizer=t.queryTokenizer,this.reset()}function i(e){return e=t.filter(e,function(e){return!!e}),e=t.map(e,function(e){return e.toLowerCase()})}function o(){return{ids:[],children:{}}}function r(e){for(var t={},n=[],i=0,o=e.length;o>i;i++)t[e[i]]||(t[e[i]]=!0,n.push(e[i]));return n}function a(e,t){function n(e,t){return e-t}var i=0,o=0,r=[];e=e.sort(n),t=t.sort(n);for(var a=e.length,s=t.length;a>i&&s>o;)e[i]<t[o]?i++:e[i]>t[o]?o++:(r.push(e[i]),i++,o++);return r}return t.mixin(n.prototype,{bootstrap:function(e){this.datums=e.datums,this.trie=e.trie},add:function(e){var n=this;e=t.isArray(e)?e:[e],t.each(e,function(e){var r,a;r=n.datums.push(e)-1,a=i(n.datumTokenizer(e)),t.each(a,function(e){var t,i,a;for(t=n.trie,i=e.split("");a=i.shift();)t=t.children[a]||(t.children[a]=o()),t.ids.push(r)})})},get:function(e){var n,o,s=this;return n=i(this.queryTokenizer(e)),t.each(n,function(e){var t,n,i,r;if(o&&0===o.length)return!1;for(t=s.trie,n=e.split("");t&&(i=n.shift());)t=t.children[i];return t&&0===n.length?(r=t.ids.slice(0),void(o=o?a(o,r):r)):(o=[],!1)}),o?t.map(r(o),function(e){return s.datums[e]}):[]},reset:function(){this.datums=[],this.trie=o()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),n}(),l=function(){"use strict";function i(e){return e.local||null}function o(i){var o,r;return r={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(o=i.prefetch||null)&&(o=t.isString(o)?{url:o}:o,o=t.mixin(r,o),o.thumbprint=n+o.thumbprint,o.ajax.type=o.ajax.type||"GET",o.ajax.dataType=o.ajax.dataType||"json",!o.url&&e.error("prefetch requires url to be set")),o}function r(n){function i(e){return function(n){return t.debounce(n,e)}}function o(e){return function(n){return t.throttle(n,e)}}var r,a;return a={url:null,cache:!0,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(r=n.remote||null)&&(r=t.isString(r)?{url:r}:r,r=t.mixin(a,r),r.rateLimiter=/^throttle$/i.test(r.rateLimitBy)?o(r.rateLimitWait):i(r.rateLimitWait),r.ajax.type=r.ajax.type||"GET",r.ajax.dataType=r.ajax.dataType||"json",delete r.rateLimitBy,delete r.rateLimitWait,!r.url&&e.error("remote requires url to be set")),r}return{local:i,prefetch:o,remote:r}}();!function(n){"use strict";function o(t){t&&(t.local||t.prefetch||t.remote)||e.error("one of local, prefetch, or remote is required"),this.limit=t.limit||5,this.sorter=d(t.sorter),this.dupDetector=t.dupDetector||c,this.local=l.local(t),this.prefetch=l.prefetch(t),this.remote=l.remote(t),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new s({datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),this.storage=this.cacheKey?new r(this.cacheKey):null}function d(e){function n(t){return t.sort(e)}function i(e){return e}return t.isFunction(e)?n:i}function c(){return!1}var u,h;return u=n.Bloodhound,h={data:"data",protocol:"protocol",thumbprint:"thumbprint"},n.Bloodhound=o,o.noConflict=function(){return n.Bloodhound=u,o},o.tokenizers=i,t.mixin(o.prototype,{_loadPrefetch:function(t){function n(e){r.clear(),r.add(t.filter?t.filter(e):e),r._saveToStorage(r.index.serialize(),t.thumbprint,t.ttl)}var i,o,r=this;return(i=this._readFromStorage(t.thumbprint))?(this.index.bootstrap(i),o=e.Deferred().resolve()):o=e.ajax(t.url,t.ajax).done(n),o},_getFromRemote:function(e,t){function n(e,n){t(e?[]:r.remote.filter?r.remote.filter(n):n)}var i,o,r=this;if(this.transport)return e=e||"",o=encodeURIComponent(e),i=this.remote.replace?this.remote.replace(this.remote.url,e):this.remote.url.replace(this.remote.wildcard,o),this.transport.get(i,this.remote.ajax,n)},_cancelLastRemoteRequest:function(){this.transport&&this.transport.cancel()},_saveToStorage:function(e,t,n){this.storage&&(this.storage.set(h.data,e,n),this.storage.set(h.protocol,location.protocol,n),this.storage.set(h.thumbprint,t,n))},_readFromStorage:function(e){var t,n={};return this.storage&&(n.data=this.storage.get(h.data),n.protocol=this.storage.get(h.protocol),n.thumbprint=this.storage.get(h.thumbprint)),t=n.thumbprint!==e||n.protocol!==location.protocol,n.data&&!t?n.data:null},_initialize:function(){function n(){o.add(t.isFunction(r)?r():r)}var i,o=this,r=this.local;return i=this.prefetch?this._loadPrefetch(this.prefetch):e.Deferred().resolve(),r&&i.done(n),this.transport=this.remote?new a(this.remote):null,this.initPromise=i.promise()},initialize:function(e){return!this.initPromise||e?this._initialize():this.initPromise},add:function(e){this.index.add(e)},get:function(e,n){function i(e){var i=r.slice(0);t.each(e,function(e){var n;return n=t.some(i,function(t){return o.dupDetector(e,t)}),!n&&i.push(e),i.length<o.limit}),n&&n(o.sorter(i))}var o=this,r=[],a=!1;r=this.index.get(e),r=this.sorter(r).slice(0,this.limit),r.length<this.limit?a=this._getFromRemote(e,i):this._cancelLastRemoteRequest(),a||(r.length>0||!this.transport)&&n&&n(r)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&a.resetCache()},ttAdapter:function(){return t.bind(this.get,this)}}),o}(this);var d=function(){return{wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'}}(),c=function(){"use strict";var e={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return t.isMsie()&&t.mixin(e.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t.isMsie()&&t.isMsie()<=7&&t.mixin(e.input,{marginTop:"-1px"
}),e}(),u=function(){"use strict";function n(t){t&&t.el||e.error("EventBus initialized without el"),this.$el=e(t.el)}var i="typeahead:";return t.mixin(n.prototype,{trigger:function(e){var t=[].slice.call(arguments,1);this.$el.trigger(i+e,t)}}),n}(),h=function(){"use strict";function e(e,t,n,i){var o;if(!n)return this;for(t=t.split(l),n=i?s(n,i):n,this._callbacks=this._callbacks||{};o=t.shift();)this._callbacks[o]=this._callbacks[o]||{sync:[],async:[]},this._callbacks[o][e].push(n);return this}function t(t,n,i){return e.call(this,"async",t,n,i)}function n(t,n,i){return e.call(this,"sync",t,n,i)}function i(e){var t;if(!this._callbacks)return this;for(e=e.split(l);t=e.shift();)delete this._callbacks[t];return this}function o(e){var t,n,i,o,a;if(!this._callbacks)return this;for(e=e.split(l),i=[].slice.call(arguments,1);(t=e.shift())&&(n=this._callbacks[t]);)o=r(n.sync,this,[t].concat(i)),a=r(n.async,this,[t].concat(i)),o()&&d(a);return this}function r(e,t,n){function i(){for(var i,o=0,r=e.length;!i&&r>o;o+=1)i=e[o].apply(t,n)===!1;return!i}return i}function a(){var e;return e=window.setImmediate?function(e){setImmediate(function(){e()})}:function(e){setTimeout(function(){e()},0)}}function s(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}var l=/\s+/,d=a();return{onSync:n,onAsync:t,off:i,trigger:o}}(),p=function(e){"use strict";function n(e,n,i){for(var o,r=[],a=0,s=e.length;s>a;a++)r.push(t.escapeRegExChars(e[a]));return o=i?"\\b("+r.join("|")+")\\b":"("+r.join("|")+")",n?new RegExp(o):new RegExp(o,"i")}var i={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(o){function r(t){var n,i,r;return(n=s.exec(t.data))&&(r=e.createElement(o.tagName),o.className&&(r.className=o.className),i=t.splitText(n.index),i.splitText(n[0].length),r.appendChild(i.cloneNode(!0)),t.parentNode.replaceChild(r,i)),!!n}function a(e,t){for(var n,i=3,o=0;o<e.childNodes.length;o++)n=e.childNodes[o],n.nodeType===i?o+=t(n)?1:0:a(n,t)}var s;o=t.mixin({},i,o),o.node&&o.pattern&&(o.pattern=t.isArray(o.pattern)?o.pattern:[o.pattern],s=n(o.pattern,o.caseSensitive,o.wordsOnly),a(o.node,r))}}(window.document),g=function(){"use strict";function n(n){var o,r,s,l,d=this;n=n||{},n.input||e.error("input is missing"),o=t.bind(this._onBlur,this),r=t.bind(this._onFocus,this),s=t.bind(this._onKeydown,this),l=t.bind(this._onInput,this),this.$hint=e(n.hint),this.$input=e(n.input).on("blur.tt",o).on("focus.tt",r).on("keydown.tt",s),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=t.noop),t.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(e){a[e.which||e.keyCode]||t.defer(t.bind(d._onInput,d,e))}):this.$input.on("input.tt",l),this.query=this.$input.val(),this.$overflowHelper=i(this.$input)}function i(t){return e('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function o(e,t){return n.normalizeQuery(e)===n.normalizeQuery(t)}function r(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}var a;return a={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},n.normalizeQuery=function(e){return(e||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},t.mixin(n.prototype,h,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(e){var t=a[e.which||e.keyCode];this._managePreventDefault(t,e),t&&this._shouldTrigger(t,e)&&this.trigger(t+"Keyed",e)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(e,t){var n,i,o;switch(e){case"tab":i=this.getHint(),o=this.getInputValue(),n=i&&i!==o&&!r(t);break;case"up":case"down":n=!r(t);break;default:n=!1}n&&t.preventDefault()},_shouldTrigger:function(e,t){var n;switch(e){case"tab":n=!r(t);break;default:n=!0}return n},_checkInputValue:function(){var e,t,n;e=this.getInputValue(),t=o(e,this.query),n=t?this.query.length!==e.length:!1,this.query=e,t?n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(e){this.query=e},getInputValue:function(){return this.$input.val()},setInputValue:function(e,t){this.$input.val(e),t?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(e){this.$hint.val(e)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var e,t,n,i;e=this.getInputValue(),t=this.getHint(),n=e!==t&&0===t.indexOf(e),i=""!==e&&n&&!this.hasOverflow(),!i&&this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var e,n,i;return e=this.$input.val().length,n=this.$input[0].selectionStart,t.isNumber(n)?n===e:document.selection?(i=document.selection.createRange(),i.moveStart("character",-e),e===i.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),n}(),f=function(){"use strict";function n(n){n=n||{},n.templates=n.templates||{},n.source||e.error("missing source"),n.name&&!r(n.name)&&e.error("invalid dataset name: "+n.name),this.query=null,this.highlight=!!n.highlight,this.name=n.name||t.getUniqueId(),this.source=n.source,this.displayFn=i(n.display||n.displayKey),this.templates=o(n.templates,this.displayFn),this.$el=e(d.dataset.replace("%CLASS%",this.name))}function i(e){function n(t){return t[e]}return e=e||"value",t.isFunction(e)?e:n}function o(e,n){function i(e){return"<p>"+n(e)+"</p>"}return{empty:e.empty&&t.templatify(e.empty),header:e.header&&t.templatify(e.header),footer:e.footer&&t.templatify(e.footer),suggestion:e.suggestion||i}}function r(e){return/^[_a-zA-Z0-9-]+$/.test(e)}var a="ttDataset",s="ttValue",l="ttDatum";return n.extractDatasetName=function(t){return e(t).data(a)},n.extractValue=function(t){return e(t).data(s)},n.extractDatum=function(t){return e(t).data(l)},t.mixin(n.prototype,h,{_render:function(n,i){function o(){return f.templates.empty({query:n,isEmpty:!0})}function r(){function o(t){var n;return null!==t&&(n=e(d.suggestion).append(f.templates.suggestion(t)).data(a,f.name).data(s,f.displayFn(t)).data(l,t),n.children().each(function(){e(this).css(c.suggestionChild)})),n}var r,u;return r=e(d.suggestions).css(c.suggestions),u=t.map(i,o),r.append.apply(r,u),f.highlight&&p({className:"tt-highlight",node:r[0],pattern:n}),r}function u(){return f.templates.header({query:n,isEmpty:!g})}function h(){return f.templates.footer({query:n,isEmpty:!g})}if(this.$el){var g,f=this;this.$el.empty(),g=i&&i.length,!g&&this.templates.empty?this.$el.html(o()).prepend(f.templates.header?u():null).append(f.templates.footer?h():null):g&&this.$el.html(r()).prepend(f.templates.header?u():null).append(f.templates.footer?h():null),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(e){function t(t){n.canceled||e!==n.query||n._render(e,t)}var n=this;this.query=e,this.canceled=!1,this.source(e,t)},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),n}(),m=function(){"use strict";function n(n){var o,r,a,s=this;n=n||{},n.menu||e.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=t.map(n.datasets,i),o=t.bind(this._onSuggestionClick,this),r=t.bind(this._onSuggestionMouseEnter,this),a=t.bind(this._onSuggestionMouseLeave,this),this.$menu=e(n.menu).on("click.tt",".tt-suggestion",o).on("mouseenter.tt",".tt-suggestion",r).on("mouseleave.tt",".tt-suggestion",a),t.each(this.datasets,function(e){s.$menu.append(e.getRoot()),e.onSync("rendered",s._onRendered,s)})}function i(e){return new f(e)}return t.mixin(n.prototype,h,{_onSuggestionClick:function(t){this.trigger("suggestionClicked",e(t.currentTarget))},_onSuggestionMouseEnter:function(t){this._removeCursor(),this._setCursor(e(t.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function e(e){return e.isEmpty()}this.isEmpty=t.every(this.datasets,e),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(e,t){e.first().addClass("tt-cursor"),!t&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(e){var t,n,i,o;if(this.isOpen){if(n=this._getCursor(),t=this._getSuggestions(),this._removeCursor(),i=t.index(n)+e,i=(i+1)%(t.length+1)-1,-1===i)return void this.trigger("cursorRemoved");-1>i&&(i=t.length-1),this._setCursor(o=t.eq(i)),this._ensureVisible(o)}},_ensureVisible:function(e){var t,n,i,o;t=e.position().top,n=t+e.outerHeight(!0),i=this.$menu.scrollTop(),o=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),0>t?this.$menu.scrollTop(i+t):n>o&&this.$menu.scrollTop(i+(n-o))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(e){this.$menu.css("ltr"===e?c.ltr:c.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(e){var t=null;return e.length&&(t={raw:f.extractDatum(e),value:f.extractValue(e),datasetName:f.extractDatasetName(e)}),t},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(e){function n(t){t.update(e)}t.each(this.datasets,n)},empty:function(){function e(e){e.clear()}t.each(this.datasets,e),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function e(e){e.destroy()}this.$menu.off(".tt"),this.$menu=null,t.each(this.datasets,e)}}),n}(),v=function(){"use strict";function n(n){var o,r,a;n=n||{},n.input||e.error("missing input"),this.isActivated=!1,this.autoselect=!!n.autoselect,this.minLength=t.isNumber(n.minLength)?n.minLength:1,this.$node=i(n.input,n.withHint),o=this.$node.find(".tt-dropdown-menu"),r=this.$node.find(".tt-input"),a=this.$node.find(".tt-hint"),r.on("blur.tt",function(e){var n,i,a;n=document.activeElement,i=o.is(n),a=o.has(n).length>0,t.isMsie()&&(i||a)&&(e.preventDefault(),e.stopImmediatePropagation(),t.defer(function(){r.focus()}))}),o.on("mousedown.tt",function(e){e.preventDefault()}),this.eventBus=n.eventBus||new u({el:r}),this.dropdown=new m({menu:o,datasets:n.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new g({input:r,hint:a}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function i(t,n){var i,r,s,l;i=e(t),r=e(d.wrapper).css(c.wrapper),s=e(d.dropdown).css(c.dropdown),l=i.clone().css(c.hint).css(o(i)),l.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly",!0).attr({autocomplete:"off",spellcheck:"false",tabindex:-1}),i.data(a,{dir:i.attr("dir"),autocomplete:i.attr("autocomplete"),spellcheck:i.attr("spellcheck"),style:i.attr("style")}),i.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(n?c.input:c.inputWithNoHint);try{!i.attr("dir")&&i.attr("dir","auto")}catch(u){}return i.wrap(r).parent().prepend(n?l:null).append(s)}function o(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}function r(e){var n=e.find(".tt-input");t.each(n.data(a),function(e,i){t.isUndefined(e)?n.removeAttr(i):n.attr(i,e)}),n.detach().removeData(a).removeClass("tt-input").insertAfter(e),e.remove()}var a="ttAttrs";return t.mixin(n.prototype,{_onSuggestionClicked:function(e,t){var n;(n=this.dropdown.getDatumForSuggestion(t))&&this._select(n)},_onCursorMoved:function(){var e=this.dropdown.getDatumForCursor();this.input.setInputValue(e.value,!0),this.eventBus.trigger("cursorchanged",e.raw,e.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0,this.dropdown.open()},_onBlurred:function(){this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()},_onEnterKeyed:function(e,t){var n,i;n=this.dropdown.getDatumForCursor(),i=this.dropdown.getDatumForTopSuggestion(),n?(this._select(n),t.preventDefault()):this.autoselect&&i&&(this._select(i),t.preventDefault())},_onTabKeyed:function(e,t){var n;(n=this.dropdown.getDatumForCursor())?(this._select(n),t.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(e,t){this.input.clearHintIfInvalid(),t.length>=this.minLength?this.dropdown.update(t):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var e;this.dir!==(e=this.input.getLanguageDirection())&&(this.dir=e,this.$node.css("direction",e),this.dropdown.setLanguageDirection(e))},_updateHint:function(){var e,n,i,o,r,a;e=this.dropdown.getDatumForTopSuggestion(),e&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(n=this.input.getInputValue(),i=g.normalizeQuery(n),o=t.escapeRegExChars(i),r=new RegExp("^(?:"+o+")(.+$)","i"),a=r.exec(e.value),a?this.input.setHint(n+a[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(e){var t,n,i,o;t=this.input.getHint(),n=this.input.getQuery(),i=e||this.input.isCursorAtEnd(),t&&n!==t&&i&&(o=this.dropdown.getDatumForTopSuggestion(),o&&this.input.setInputValue(o.value),this.eventBus.trigger("autocompleted",o.raw,o.datasetName))},_select:function(e){this.input.setQuery(e.value),this.input.setInputValue(e.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",e.raw,e.datasetName),this.dropdown.close(),t.defer(t.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(e){e=t.toStr(e),this.isActivated?this.input.setInputValue(e):(this.input.setQuery(e),this.input.setInputValue(e,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),r(this.$node),this.$node=null}}),n}();!function(){"use strict";var n,i,o;n=e.fn.typeahead,i="ttTypeahead",o={initialize:function(n,o){function r(){var r,a,s=e(this);t.each(o,function(e){e.highlight=!!n.highlight}),a=new v({input:s,eventBus:r=new u({el:s}),withHint:t.isUndefined(n.hint)?!0:!!n.hint,minLength:n.minLength,autoselect:n.autoselect,datasets:o}),s.data(i,a)}return o=t.isArray(o)?o:[].slice.call(arguments,1),n=n||{},this.each(r)},open:function(){function t(){var t,n=e(this);(t=n.data(i))&&t.open()}return this.each(t)},close:function(){function t(){var t,n=e(this);(t=n.data(i))&&t.close()}return this.each(t)},val:function(t){function n(){var n,o=e(this);(n=o.data(i))&&n.setVal(t)}function o(e){var t,n;return(t=e.data(i))&&(n=t.getVal()),n}return arguments.length?this.each(n):o(this.first())},destroy:function(){function t(){var t,n=e(this);(t=n.data(i))&&(t.destroy(),n.removeData(i))}return this.each(t)}},e.fn.typeahead=function(t){var n;return o[t]&&"initialize"!==t?(n=this.filter(function(){return!!e(this).data(i)}),o[t].apply(n,[].slice.call(arguments,1))):o.initialize.apply(this,arguments)},e.fn.typeahead.noConflict=function(){return e.fn.typeahead=n,this}}()}(window.jQuery)}.apply(e,arguments)})}(this),define("main/ui_components/forms/controls/typeahead",["backbone","puppetForm","handlebars","underscore","typeahead"],function(e,t,n,i,o){"use strict";var r={defaults:{label:"",options:{hint:!1,highlight:!0,minLength:0},extraClasses:[],type:"text",fetchLabel:"Click to fetch more data",title:"The type ahead feature will begin searching for content as you type. The results are listed below. Use the up and down arrow keys to review the results."},attributeMappingDefaults:{value:"value",label:"label"},setFormatter:function(){var e=function(){},t=this;e=i.extend(e.prototype,{fromRaw:function(e,n){var i=t.pickList.find(function(n){return n.get(t.mappedAttribute("value"))===e});return void 0!==i&&null!==i?i.get(t.mappedAttribute("label")):e},toRaw:function(e,n){var i=t.pickList.find(function(n){return n.get(t.mappedAttribute("label"))===e});return void 0!==i&&null!==i?i.get(t.mappedAttribute("value")):e}}),this.formatter=e},getTemplate:function(){return n.compile(["{{ui-form-label (add-required-indicator label required) forID=(clean-for-id name) classes=(is-sr-only-label srOnlyLabel)}}",'<input type="{{type}}" id="{{clean-for-id name}}" name="{{name}}" value="{{value}}" class="typeahead {{PuppetForm "controlClassName"}}"{{#if title}} title="{{title}}"{{/if}}{{#if disabled}} disabled{{/if}}{{#if required}} required{{/if}}{{#if placeholder}} placeholder="{{placeholder}}"{{/if}}{{#if readonly}} readonly{{/if}}/>','{{#if helpMessage}} <span {{#if (has-puppetForm-prop "helpMessageClassName")}}class="{{PuppetForm "helpMessageClassName"}}"{{/if}}>{{helpMessage}}</span>{{/if}}'].join("\n"))},events:{"change input":"onChange","blur input":"onChange","typeahead:selected":"onChange","click button":"fetchMore","control:label":function(e,t){e.preventDefault(),this.setStringFieldOption("label",t,e)},"control:disabled":function(e,t){e.preventDefault(),this.setBooleanFieldOption("disabled",t,e)},"control:required":function(e,t){e.preventDefault(),this.setBooleanFieldOption("required",t,e)},"control:picklist:set":function(e,t){e.preventDefault(),this.setPickList({pickList:t})},"control:loading:hide":function(e){e.preventDefault(),this.hideLoading()},"control:loading:show":function(e){e.preventDefault(),this.showLoading()}},requiredFields:["name","label","pickList"],initialize:function(t){this.pickList=new e.Collection,this.initOptions(t),this.hasAllRequiredOptionsDefined(),void 0!==this.field.get("fetchFunction")&&null!==this.field.get("fetchFunction")&&"function"==typeof this.field.get("fetchFunction")&&this.field.set("fetchEnabled",!0),this.setFormatter(),this.setAttributeMapping(),this.listenToFieldName(),this.setExtraClasses(this.defaults.extraClasses),this.registerToComponentList(this),this.setPickList({pickList:this.field.get("pickList")}),this.listenToPickList(),this.listenToFieldOptions()},showLoading:function(){this.$el.find("input").addClass("loading")},hideLoading:function(){this.$el.find("input").removeClass("loading")},setPickList:function(t){var n=t.pickList,i=t.input;n=n instanceof e.Collection?n||new e.Collection:new e.Collection(n,this.mappedAttribute("label")),this.pickList.reset(n.models),void 0!==i&&null!==i&&this.$el.find("input.tt-input").val(i).trigger("input")},fetchMore:function(){var e=this.$el.find("input").val(),t=i.bind(this.setPickList,this),n=i.bind(this.onFetchError,this),o=i.bind(this.needMoreInput,this);this.field.get("fetchFunction")(e,t,n,o)},onFetchError:function(e){console.error("TODO implement onFetchError")},needMoreInput:function(e){console.error("TODO implement needMoreInput")},listenToPickList:function(){var e=this;this.pickList.bind("reset",function(){e.render()})},onRender:function(){this.$el.addClass(this.field.get("name")).addClass(this.extraClasses),this.updateInvalid();var e=this.field.get("matcher")||this.substringMatcher,t=this.$el.find("#"+this.field.get("name")),o=i.defaults(this.field.get("options")||{},this.defaults.options),r={name:this.mappedAttribute("value"),display:this.mappedAttribute("label"),limit:100,source:e(this.pickList,this.mappedAttribute("label"))};this.field.get("fetchEnabled")&&(r.templates={footer:n.compile('<button type="button" class="btn btn-link">'+(this.field.get("fetchLabel")||this.defaults.fetchLabel)+"</button>")}),t.typeahead(o,r)},substringMatcher:function(e,t){return function(n,i){var o=[],r=new RegExp(n,"i");e.each(function(e){r.test(e.get(t))&&o.push(e.toJSON())}),0===o.length&&o.push(null),i(o)}},getValueFromDOM:function(){var e=this.$el.find("#"+this.field.get("name")).typeahead("val");return this.formatter.toRaw(e,this.model)}},a=t.TypeaheadControl=t.Control.extend(i.defaults(r,i.defaults(t.CommonPrototype,t.CommonEventsFunctions)));return a}),function(e){define("jquery.inputmask",["jquery"],function(){return function(){!function(e){function t(e){var t=document.createElement("input"),n="on"+e,i=n in t;return i||(t.setAttribute(n,"return;"),i="function"==typeof t[n]),t=null,i}function n(e){var t=document.createElement("input");t.setAttribute("type",e);var n="text"!==t.type;return t=null,n}function i(t,n,o){var r=o.aliases[t];return r?(r.alias&&i(r.alias,void 0,o),e.extend(!0,o,r),e.extend(!0,o,n),!0):!1}function o(t,n){function i(e){function n(e,t,n,i){this.matches=[],this.isGroup=e||!1,this.isOptional=t||!1,this.isQuantifier=n||!1,this.isAlternator=i||!1,this.quantifier={min:1,max:1}}function i(e,n,i){var o=t.definitions[n],r=0==e.matches.length;if(i=void 0!=i?i:e.matches.length,o&&!u){for(var a=o.prevalidator,s=a?a.length:0,l=1;l<o.cardinality;l++){var d=s>=l?a[l-1]:[],c=d.validator,h=d.cardinality;e.matches.splice(i++,0,{fn:c?"string"==typeof c?new RegExp(c):new function(){this.test=c}:new RegExp("."),cardinality:h?h:1,optionality:e.isOptional,newBlockMarker:r,casing:o.casing,def:o.definitionSymbol||n,placeholder:o.placeholder,mask:n})}e.matches.splice(i++,0,{fn:o.validator?"string"==typeof o.validator?new RegExp(o.validator):new function(){this.test=o.validator}:new RegExp("."),cardinality:o.cardinality,optionality:e.isOptional,newBlockMarker:r,casing:o.casing,def:o.definitionSymbol||n,placeholder:o.placeholder,mask:n})}else e.matches.splice(i++,0,{fn:null,cardinality:0,optionality:e.isOptional,newBlockMarker:r,casing:null,def:n,placeholder:void 0,mask:n}),u=!1}for(var o,r,a,s,l,d,c=/(?:[?*+]|\{[0-9\+\*]+(?:,[0-9\+\*]*)?\})\??|[^.?*+^${[]()|\\]+|./g,u=!1,h=new n,p=[],g=[];o=c.exec(e);)switch(r=o[0],r.charAt(0)){case t.optionalmarker.end:case t.groupmarker.end:if(a=p.pop(),p.length>0){if(s=p[p.length-1],s.matches.push(a),s.isAlternator){l=p.pop();for(var f=0;f<l.matches.length;f++)l.matches[f].isGroup=!1;p.length>0?(s=p[p.length-1],s.matches.push(l)):h.matches.push(l)}}else h.matches.push(a);break;case t.optionalmarker.start:p.push(new n(!1,!0));break;case t.groupmarker.start:p.push(new n(!0));break;case t.quantifiermarker.start:var m=new n(!1,!1,!0);r=r.replace(/[{}]/g,"");var v=r.split(","),b=isNaN(v[0])?v[0]:parseInt(v[0]),y=1==v.length?b:isNaN(v[1])?v[1]:parseInt(v[1]);if(("*"==y||"+"==y)&&(b="*"==y?0:1),m.quantifier={min:b,max:y},p.length>0){var w=p[p.length-1].matches;if(o=w.pop(),!o.isGroup){var A=new n(!0);A.matches.push(o),o=A}w.push(o),w.push(m)}else{if(o=h.matches.pop(),!o.isGroup){var A=new n(!0);A.matches.push(o),o=A}h.matches.push(o),h.matches.push(m)}break;case t.escapeChar:u=!0;break;case t.alternatormarker:p.length>0?(s=p[p.length-1],d=s.matches.pop()):d=h.matches.pop(),d.isAlternator?p.push(d):(l=new n(!1,!1,!1,!0),l.matches.push(d),p.push(l));break;default:if(p.length>0){if(s=p[p.length-1],s.matches.length>0&&(d=s.matches[s.matches.length-1],d.isGroup&&(d.isGroup=!1,i(d,t.groupmarker.start,0),i(d,t.groupmarker.end))),i(s,r),s.isAlternator){l=p.pop();for(var f=0;f<l.matches.length;f++)l.matches[f].isGroup=!1;p.length>0?(s=p[p.length-1],s.matches.push(l)):h.matches.push(l)}}else h.matches.length>0&&(d=h.matches[h.matches.length-1],d.isGroup&&(d.isGroup=!1,i(d,t.groupmarker.start,0),i(d,t.groupmarker.end))),i(h,r)}return h.matches.length>0&&(d=h.matches[h.matches.length-1],d.isGroup&&(d.isGroup=!1,i(d,t.groupmarker.start,0),i(d,t.groupmarker.end)),g.push(h)),g}function o(n,o){if(t.numericInput&&t.multi!==!0){n=n.split("").reverse();for(var r=0;r<n.length;r++)n[r]==t.optionalmarker.start?n[r]=t.optionalmarker.end:n[r]==t.optionalmarker.end?n[r]=t.optionalmarker.start:n[r]==t.groupmarker.start?n[r]=t.groupmarker.end:n[r]==t.groupmarker.end&&(n[r]=t.groupmarker.start);n=n.join("")}if(void 0!=n&&""!=n){if(1==n.length&&0==t.greedy&&0!=t.repeat&&(t.placeholder=""),t.repeat>0||"*"==t.repeat||"+"==t.repeat){var a="*"==t.repeat?0:"+"==t.repeat?1:t.repeat;n=t.groupmarker.start+n+t.groupmarker.end+t.quantifiermarker.start+a+","+t.repeat+t.quantifiermarker.end}return void 0==e.inputmask.masksCache[n]&&(e.inputmask.masksCache[n]={mask:n,maskToken:i(n),validPositions:{},_buffer:void 0,buffer:void 0,tests:{},metadata:o}),e.extend(!0,{},e.inputmask.masksCache[n])}}var r=void 0;if(e.isFunction(t.mask)&&(t.mask=t.mask.call(this,t)),e.isArray(t.mask))if(n)r=[],e.each(t.mask,function(t,n){r.push(void 0==n.mask||e.isFunction(n.mask)?o(n.toString(),n):o(n.mask.toString(),n))});else{t.keepStatic=void 0==t.keepStatic?!0:t.keepStatic;var a="(";e.each(t.mask,function(t,n){a.length>1&&(a+=")|("),a+=void 0==n.mask||e.isFunction(n.mask)?n.toString():n.mask.toString()}),a+=")",r=o(a,t.mask)}else t.mask&&(r=void 0==t.mask.mask||e.isFunction(t.mask.mask)?o(t.mask.toString(),t.mask):o(t.mask.mask.toString(),t.mask));return r}function r(t,i,o){function r(e,t,n){t=t||0;var i,o,r,a=[],l=0;do{if(e===!0&&s().validPositions[l]){var d=s().validPositions[l];o=d.match,i=d.locator.slice(),a.push(n===!0?d.input:P(l,o))}else{if(t>l){var c=A(l,i,l-1);r=c[0]}else r=b(l,i,l-1);o=r.match,i=r.locator.slice(),a.push(P(l,o))}l++}while((void 0==oe||oe>l-1)&&null!=o.fn||null==o.fn&&""!=o.def||t>=l);return a.pop(),a}function s(){return i}function g(e){var t=s();t.buffer=void 0,t.tests={},e!==!0&&(t._buffer=void 0,t.validPositions={},t.p=0)}function f(e){var t=s(),n=-1,i=t.validPositions;void 0==e&&(e=-1);var o=n,r=n;for(var a in i){var l=parseInt(a);(-1==e||null!=i[l].match.fn)&&(e>l&&(o=l),l>=e&&(r=l))}return n=e-o>1||e>r?o:r}function m(t,n,i){if(o.insertMode&&void 0!=s().validPositions[t]&&void 0==i){var r,a=e.extend(!0,{},s().validPositions),l=f();for(r=t;l>=r;r++)delete s().validPositions[r];s().validPositions[t]=n;var d=!0;for(r=t;l>=r;r++){var c=a[r];if(void 0!=c){var u=null==c.match.fn?r+1:$(r);d=w(u,c.match.def)?d&&S(u,c.input,!0,!0)!==!1:!1}if(!d)break}if(!d)return s().validPositions=e.extend(!0,{},a),!1}else s().validPositions[t]=n;return!0}function v(e,t){var n,i=e;for(void 0!=s().validPositions[e]&&s().validPositions[e].input==o.radixPoint&&(t++,i++),n=i;t>n;n++)void 0==s().validPositions[n]||s().validPositions[n].input==o.radixPoint&&n!=f()||delete s().validPositions[n];for(n=t;n<=f();){var r=s().validPositions[n],a=s().validPositions[i];void 0!=r&&void 0==a?(w(i,r.match.def)&&S(i,r.input,!0)!==!1&&(delete s().validPositions[n],n++),i++):n++}var l=f();l>=e&&void 0!=s().validPositions[l]&&s().validPositions[l].input==o.radixPoint&&delete s().validPositions[l],g(!0)}function b(t,n,i){for(var r,a=A(t,n,i),l=f(),d=s().validPositions[l]||A(0)[0],c=void 0!=d.alternation?d.locator[d.alternation].split(","):[],u=0;u<a.length&&(r=a[u],!o.greedy&&(!r.match||r.match.optionality!==!1&&r.match.newBlockMarker!==!1||r.match.optionalQuantifier===!0||void 0!=d.alternation&&(void 0==r.locator[d.alternation]||-1!=e.inArray(r.locator[d.alternation].toString(),c))));u++);return r}function y(e){return s().validPositions[e]?s().validPositions[e].match:A(e)[0].match}function w(e,t){for(var n=!1,i=A(e),o=0;o<i.length;o++)if(i[o].match&&i[o].match.def==t){n=!0;break}return n}function A(t,n,i){function r(n,i,a,d){function h(a,d,g){if(l>1e4)return alert("jquery.inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+s().mask),!0;if(l==t&&void 0==a.matches)return c.push({match:a,locator:d.reverse()}),!0;if(void 0!=a.matches){if(a.isGroup&&g!==!0){if(a=h(n.matches[p+1],d))return!0}else if(a.isOptional){var f=a;if(a=r(a,i,d,g)){var m=c[c.length-1].match,v=0==e.inArray(m,f.matches);v&&(u=!0),l=t}}else if(a.isAlternator){var b,y=a,w=[],A=c.slice(),N=d.length,_=i.length>0?i.shift():-1;if(-1==_||"string"==typeof _){var C,x=l,S=i.slice();"string"==typeof _&&(C=_.split(","));for(var T=0;T<y.matches.length;T++){c=[],a=h(y.matches[T],[T].concat(d),g)||a,b=c.slice(),l=x,c=[];for(var k=0;k<S.length;k++)i[k]=S[k];for(var $=0;$<b.length;$++)for(var D=b[$],M=0;M<w.length;M++){var E=w[M];if(D.match.mask==E.match.mask&&("string"!=typeof _||-1!=e.inArray(D.locator[N].toString(),C))){b.splice($,1),E.locator[N]=E.locator[N]+","+D.locator[N],E.alternation=N;break}}w=w.concat(b)}"string"==typeof _&&(w=e.map(w,function(t,n){if(isFinite(n)){var i,o=t.locator[N].toString().split(",");t.locator[N]=void 0,t.alternation=void 0;for(var r=0;r<o.length;r++)i=-1!=e.inArray(o[r],C),i&&(void 0!=t.locator[N]?(t.locator[N]+=",",t.alternation=N,t.locator[N]+=o[r]):t.locator[N]=parseInt(o[r]));if(void 0!=t.locator[N])return t}})),c=A.concat(w),u=!0}else a=h(y.matches[_],[_].concat(d),g);if(a)return!0}else if(a.isQuantifier&&g!==!0){var P=a;o.greedy=o.greedy&&isFinite(P.quantifier.max);for(var I=i.length>0&&g!==!0?i.shift():0;I<(isNaN(P.quantifier.max)?I+1:P.quantifier.max)&&t>=l;I++){var O=n.matches[e.inArray(P,n.matches)-1];if(a=h(O,[I].concat(d),!0)){var m=c[c.length-1].match;m.optionalQuantifier=I>P.quantifier.min-1;var v=0==e.inArray(m,O.matches);if(v){if(I>P.quantifier.min-1){u=!0,l=t;break}return!0}return!0}}}else if(a=r(a,i,d,g))return!0}else l++}for(var p=i.length>0?i.shift():0;p<n.matches.length;p++)if(n.matches[p].isQuantifier!==!0){var g=h(n.matches[p],[p].concat(a),d);if(g&&l==t)return g;if(l>t)break}}var a=s().maskToken,l=n?i:0,d=n||[0],c=[],u=!1;if(void 0==n){for(var h,p=t-1;void 0==(h=s().validPositions[p])&&p>-1;)p--;if(void 0!=h&&p>-1)l=p,
d=h.locator.slice();else{for(p=t-1;void 0==(h=s().tests[p])&&p>-1;)p--;void 0!=h&&p>-1&&(l=p,d=h[0].locator.slice())}}for(var g=d.shift();g<a.length;g++){var f=r(a[g],d,[g]);if(f&&l==t||l>t)break}return(0==c.length||u)&&c.push({match:{fn:null,cardinality:0,optionality:!0,casing:null,def:""},locator:[]}),s().tests[t]=e.extend(!0,[],c),s().tests[t]}function N(){return void 0==s()._buffer&&(s()._buffer=r(!1,1)),s()._buffer}function _(){return void 0==s().buffer&&(s().buffer=r(!0,f(),!0)),s().buffer}function C(e,t){var n=_().slice();if(e===!0)g(),e=0,t=n.length;else for(var i=e;t>i;i++)delete s().validPositions[i],delete s().tests[i];for(var i=e;t>i;i++)n[i]!=o.skipOptionalPartCharacter&&S(i,n[i],!0,!0)}function x(e,t){switch(t.casing){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e}function S(t,n,i,r){function a(t,n,i,r){var a=!1;return e.each(A(t),function(l,d){for(var c=d.match,u=n?1:0,h="",p=(_(),c.cardinality);p>u;p--)h+=M(t-(p-1));if(n&&(h+=n),a=null!=c.fn?c.fn.test(h,s(),t,i,o):n!=c.def&&n!=o.skipOptionalPartCharacter||""==c.def?!1:{c:c.def,pos:t},a!==!1){var b=void 0!=a.c?a.c:n;b=b==o.skipOptionalPartCharacter&&null===c.fn?c.def:b;var y=t;if(void 0!=a.remove&&v(a.remove,a.remove+1),a.refreshFromBuffer){var w=a.refreshFromBuffer;if(i=!0,C(w===!0?w:w.start,w.end),void 0==a.pos&&void 0==a.c)return a.pos=f(),!1;if(y=void 0!=a.pos?a.pos:t,y!=t)return a=e.extend(a,S(y,b,!0)),!1}else if(a!==!0&&void 0!=a.pos&&a.pos!=t&&(y=a.pos,C(t,y),y!=t))return a=e.extend(a,S(y,b,!0)),!1;return 1!=a&&void 0==a.pos&&void 0==a.c?!1:(l>0&&g(!0),m(y,e.extend({},d,{input:x(b,c)}),r)||(a=!1),!1)}}),a}function l(t,n,i,r){if(o.keepStatic){var a,l,d=e.extend(!0,{},s().validPositions);for(a=f();a>=0;a--)if(s().validPositions[a]&&void 0!=s().validPositions[a].alternation){l=s().validPositions[a].alternation;break}if(void 0!=l)for(var c in s().validPositions)if(parseInt(c)>parseInt(a)&&void 0===s().validPositions[c].alternation){for(var u=s().validPositions[c],h=u.locator[l],p=s().validPositions[a].locator[l].split(","),m=0;m<p.length;m++)if(h<p[m]){for(var v,b,y=c-1;y>=0;y--)if(v=s().validPositions[y],void 0!=v){b=v.locator[l],v.locator[l]=p[m];break}if(h!=v.locator[l]){for(var w=_().slice(),A=c;A<f()+1;A++)delete s().validPositions[A],delete s().tests[A];g(!0),o.keepStatic=!o.keepStatic;for(var A=c;A<w.length;A++)w[A]!=o.skipOptionalPartCharacter&&S(f()+1,w[A],!1,!0);v.locator[l]=b;var N=f()+1==t&&S(t,n,i,r);if(o.keepStatic=!o.keepStatic,N)return N;g(),s().validPositions=e.extend(!0,{},d)}}break}}return!1}i=i===!0;for(var d=_(),c=t-1;c>-1&&(!s().validPositions[c]||null!=s().validPositions[c].match.fn);c--)void 0==s().validPositions[c]&&(!T(c)||d[c]!=P(c))&&A(c).length>1&&a(c,d[c],!0);var u=t;if(u>=k()){if(!r)return l(t,n,i,r);if(g(!0),u>=k())return l(t,n,i,r)}var h=a(u,n,i,r);if(!i&&h===!1){var p=s().validPositions[u];if(!p||null!=p.match.fn||p.match.def!=n&&n!=o.skipOptionalPartCharacter){if((o.insertMode||void 0==s().validPositions[$(u)])&&!T(u))for(var b=u+1,y=$(u);y>=b;b++)if(h=a(b,n,i,r),h!==!1){u=b;break}}else h={caret:$(u)}}return h===!0&&(h={pos:u}),h}function T(e){var t=y(e);return null!=t.fn?t.fn:!1}function k(){var e;if(oe=ie.prop("maxLength"),-1==oe&&(oe=void 0),0==o.greedy){var t,n=f(),i=s().validPositions[n],r=void 0!=i?i.locator.slice():void 0;for(t=n+1;void 0==i||null!=i.match.fn||null==i.match.fn&&""!=i.match.def;t++)i=b(t,r,t-1),r=i.locator.slice();e=t}else e=_().length;return void 0==oe||oe>e?e:oe}function $(e){var t=k();if(e>=t)return t;for(var n=e;++n<t&&!T(n)&&(o.nojumps!==!0||o.nojumpsThreshold>n););return n}function D(e){var t=e;if(0>=t)return 0;for(;--t>0&&!T(t););return t}function M(e){return void 0==s().validPositions[e]?P(e):s().validPositions[e].input}function E(e,t,n){e._valueSet(t.join("")),void 0!=n&&L(e,n)}function P(t,n){return n=n||y(t),(e.isFunction(n.placeholder)?n.placeholder.call(this,o):n.placeholder)||(null==n.fn?n.def:o.placeholder.charAt(t%o.placeholder.length))}function I(t,n,i,r,a){var l=void 0!=r?r.slice():R(t._valueGet()).split("");if(g(),n&&t._valueSet(""),e.each(l,function(n,o){if(a===!0){var r=f(),l=-1==r?n:$(r);-1==e.inArray(o,N().slice(r+1,l))&&K.call(t,void 0,!0,o.charCodeAt(0),!1,i,i?n:s().p)}else K.call(t,void 0,!0,o.charCodeAt(0),!1,i,i?n:s().p),i=i||n>0&&n>s().p}),n){var d=o.onKeyPress.call(this,void 0,_(),0,o);q(t,d),E(t,_(),e(t).is(":focus")?$(f(0)):void 0)}}function O(t){return e.inputmask.escapeRegex.call(this,t)}function R(e){return e.replace(new RegExp("("+O(N().join(""))+")*$"),"")}function F(t){if(t.data("_inputmask")&&!t.hasClass("hasDatepicker")){var n=[],i=s().validPositions;for(var r in i)i[r].match&&null!=i[r].match.fn&&n.push(i[r].input);var a=(re?n.reverse():n).join(""),l=(re?_().slice().reverse():_()).join("");return e.isFunction(o.onUnMask)&&(a=o.onUnMask.call(t,l,a,o)),a}return t[0]._valueGet()}function V(e){if(re&&"number"==typeof e&&(!o.greedy||""!=o.placeholder)){var t=_().length;e=t-e}return e}function L(t,n,i){var r,a=t.jquery&&t.length>0?t[0]:t;if("number"!=typeof n){var s=e(a).data("_inputmask");return!e(a).is(":visible")&&s&&void 0!=s.caret?(n=s.caret.begin,i=s.caret.end):a.setSelectionRange?(n=a.selectionStart,i=a.selectionEnd):document.selection&&document.selection.createRange&&(r=document.selection.createRange(),n=0-r.duplicate().moveStart("character",-1e5),i=n+r.text.length),n=V(n),i=V(i),{begin:n,end:i}}n=V(n),i=V(i),i="number"==typeof i?i:n;var s=e(a).data("_inputmask")||{};s.caret={begin:n,end:i},e(a).data("_inputmask",s),e(a).is(":visible")&&(a.scrollLeft=a.scrollWidth,0==o.insertMode&&n==i&&i++,a.setSelectionRange?(a.selectionStart=n,a.selectionEnd=i):a.createTextRange&&(r=a.createTextRange(),r.collapse(!0),r.moveEnd("character",i),r.moveStart("character",n),r.select()))}function U(t){var n,i,o=_(),r=o.length,a=f(),l={},d=s().validPositions[a],c=void 0!=d?d.locator.slice():void 0;for(n=a+1;n<o.length;n++)i=b(n,c,n-1),c=i.locator.slice(),l[n]=e.extend(!0,{},i);var u=d&&void 0!=d.alternation?d.locator[d.alternation].split(","):[];for(n=r-1;n>a&&(i=l[n].match,(i.optionality||i.optionalQuantifier||d&&void 0!=d.alternation&&void 0!=l[n].locator[d.alternation]&&-1!=e.inArray(l[n].locator[d.alternation].toString(),u))&&o[n]==P(n,i));n--)r--;return t?{l:r,def:l[r]?l[r].match:void 0}:r}function H(e){for(var t=_(),n=t.slice(),i=U(),o=n.length-1;o>i&&!T(o);o--);n.splice(i,o+1-i),E(e,n)}function B(t){if(e.isFunction(o.isComplete))return o.isComplete.call(ie,t,o);if("*"!=o.repeat){var n=!1,i=U(!0),r=D(i.l),a=f();if(a==r&&(void 0==i.def||i.def.newBlockMarker||i.def.optionalQuantifier)){n=!0;for(var s=0;r>=s;s++){var l=T(s);if(l&&(void 0==t[s]||t[s]==P(s))||!l&&t[s]!=P(s)){n=!1;break}}}return n}}function z(e,t){return re?e-t>1||e-t==1&&o.insertMode:t-e>1||t-e==1&&o.insertMode}function Y(t){var n=e._data(t).events;e.each(n,function(t,n){e.each(n,function(e,t){if("inputmask"==t.namespace&&"setvalue"!=t.type){var n=t.handler;t.handler=function(e){return this.readOnly||this.disabled?void e.preventDefault:n.apply(this,arguments)}}})})}function G(t){function n(t){if(void 0==e.valHooks[t]||1!=e.valHooks[t].inputmaskpatch){var n=e.valHooks[t]&&e.valHooks[t].get?e.valHooks[t].get:function(e){return e.value},i=e.valHooks[t]&&e.valHooks[t].set?e.valHooks[t].set:function(e,t){return e.value=t,e};e.valHooks[t]={get:function(t){var i=e(t);if(i.data("_inputmask")){if(i.data("_inputmask").opts.autoUnmask)return i.inputmask("unmaskedvalue");var o=n(t),r=i.data("_inputmask"),a=r.maskset,s=a._buffer;return s=s?s.join(""):"",o!=s?o:""}return n(t)},set:function(t,n){var o,r=e(t),a=r.data("_inputmask");return a?(o=i(t,e.isFunction(a.opts.onBeforeMask)?a.opts.onBeforeMask.call(pe,n,a.opts):n),r.triggerHandler("setvalue.inputmask")):o=i(t,n),o},inputmaskpatch:!0}}}function i(){var t=e(this),n=e(this).data("_inputmask");return n?n.opts.autoUnmask?t.inputmask("unmaskedvalue"):a.call(this)!=N().join("")?a.call(this):"":a.call(this)}function o(t){var n=e(this).data("_inputmask");n?(s.call(this,e.isFunction(n.opts.onBeforeMask)?n.opts.onBeforeMask.call(pe,t,n.opts):t),e(this).triggerHandler("setvalue.inputmask")):s.call(this,t)}function r(t){var n=e._data(t).events,i=n.mouseover;if(i){for(var o=i[i.length-1],r=i.length-1;r>0;r--)i[r]=i[r-1];i[0]=o}}var a,s;t._valueGet||(Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(t,"value"),document.__lookupGetter__&&t.__lookupGetter__("value")?(a=t.__lookupGetter__("value"),s=t.__lookupSetter__("value"),t.__defineGetter__("value",i),t.__defineSetter__("value",o)):(a=function(){return t.value},s=function(e){t.value=e},n(t.type),r(t)),t._valueGet=function(){return re?a.call(this).split("").reverse().join(""):a.call(this)},t._valueSet=function(e){s.call(this,re?e.split("").reverse().join(""):e)})}function j(e,t,n){if((o.numericInput||re)&&(t==o.keyCode.BACKSPACE?t=o.keyCode.DELETE:t==o.keyCode.DELETE&&(t=o.keyCode.BACKSPACE),re)){var i=n.end;n.end=n.begin,n.begin=i}t==o.keyCode.BACKSPACE&&n.end-n.begin<=1?n.begin=D(n.begin):t==o.keyCode.DELETE&&n.begin==n.end&&n.end++,v(n.begin,n.end);var r=f(n.begin);s().p=r<n.begin?$(r):n.begin}function q(e,t,n){if(t&&t.refreshFromBuffer){var i=t.refreshFromBuffer;C(i===!0?i:i.start,i.end),g(!0),void 0!=n&&(E(e,_()),L(e,t.caret||n.begin,t.caret||n.end))}}function W(t){ae=!1;var n=this,i=e(n),r=t.keyCode,a=L(n);r==o.keyCode.BACKSPACE||r==o.keyCode.DELETE||l&&127==r||t.ctrlKey&&88==r?(t.preventDefault(),88==r&&(ne=_().join("")),j(n,r,a),E(n,_(),s().p),n._valueGet()==N().join("")&&i.trigger("cleared"),o.showTooltip&&i.prop("title",s().mask)):r==o.keyCode.END||r==o.keyCode.PAGE_DOWN?setTimeout(function(){var e=$(f());o.insertMode||e!=k()||t.shiftKey||e--,L(n,t.shiftKey?a.begin:e,e)},0):r==o.keyCode.HOME&&!t.shiftKey||r==o.keyCode.PAGE_UP?L(n,0,t.shiftKey?a.begin:0):r==o.keyCode.ESCAPE||90==r&&t.ctrlKey?(I(n,!0,!1,ne.split("")),i.click()):r!=o.keyCode.INSERT||t.shiftKey||t.ctrlKey?0!=o.insertMode||t.shiftKey||(r==o.keyCode.RIGHT?setTimeout(function(){var e=L(n);L(n,e.begin)},0):r==o.keyCode.LEFT&&setTimeout(function(){var e=L(n);L(n,re?e.begin+1:e.begin-1)},0)):(o.insertMode=!o.insertMode,L(n,o.insertMode||a.begin!=k()?a.begin:a.begin-1));var d=L(n),c=o.onKeyDown.call(this,t,_(),d.begin,o);q(n,c,d),le=-1!=e.inArray(r,o.ignorables)}function K(t,n,i,r,a,l){if(void 0==i&&ae)return!1;ae=!0;var d=this,c=e(d);t=t||window.event;var i=n?i:t.which||t.charCode||t.keyCode;if(!(n===!0||t.ctrlKey&&t.altKey)&&(t.ctrlKey||t.metaKey||le))return!0;if(i){n!==!0&&46==i&&0==t.shiftKey&&","==o.radixPoint&&(i=44);var u,h=n?{begin:l,end:l}:L(d),p=String.fromCharCode(i),f=z(h.begin,h.end);f&&(s().undoPositions=e.extend(!0,{},s().validPositions),j(d,o.keyCode.DELETE,h),o.insertMode||(o.insertMode=!o.insertMode,m(h.begin,a),o.insertMode=!o.insertMode),f=!o.multi),s().writeOutBuffer=!0;var v=re&&!f?h.end:h.begin,b=S(v,p,a);if(b!==!1){if(b!==!0&&(v=void 0!=b.pos?b.pos:v,p=void 0!=b.c?b.c:p),g(!0),void 0!=b.caret)u=b.caret;else{var y=s().validPositions;u=!o.keepStatic&&(void 0!=y[v+1]&&A(v+1,y[v].locator.slice(),v).length>1||void 0!=y[v].alternation)?v+1:$(v)}s().p=u}if(r!==!1){var w=this;if(setTimeout(function(){o.onKeyValidation.call(w,b,o)},0),s().writeOutBuffer&&b!==!1){var N=_();E(d,N,n?void 0:o.numericInput?D(u):u),n!==!0&&setTimeout(function(){B(N)===!0&&c.trigger("complete"),se=!0,c.trigger("input")},0)}else f&&(s().buffer=void 0,s().validPositions=s().undoPositions)}else f&&(s().buffer=void 0,s().validPositions=s().undoPositions);if(o.showTooltip&&c.prop("title",s().mask),t&&1!=n){t.preventDefault();var C=L(d),x=o.onKeyPress.call(this,t,_(),C.begin,o);q(d,x,C)}}}function X(t){var n=e(this),i=this,r=t.keyCode,a=_(),s=L(i),l=o.onKeyUp.call(this,t,a,s.begin,o);q(i,l,s),r==o.keyCode.TAB&&o.showMaskOnFocus&&(n.hasClass("focus-inputmask")&&0==i._valueGet().length?(g(),a=_(),E(i,a),L(i,0),ne=_().join("")):(E(i,a),L(i,V(0),V(k()))))}function J(t){if(se===!0&&"input"==t.type)return se=!1,!0;var n=this,i=e(n),r=n._valueGet();if("propertychange"==t.type&&n._valueGet().length<=k())return!0;"paste"==t.type&&(window.clipboardData&&window.clipboardData.getData?r=window.clipboardData.getData("Text"):t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.getData&&(r=t.originalEvent.clipboardData.getData("text/plain")));var a=e.isFunction(o.onBeforePaste)?o.onBeforePaste.call(n,r,o):r;return I(n,!0,!1,re?a.split("").reverse():a.split(""),!0),i.click(),B(_())===!0&&i.trigger("complete"),!1}function Z(e){if(se===!0&&"input"==e.type)return se=!1,!0;var t=this,n=L(t),i=t._valueGet();i=i.replace(new RegExp("("+O(N().join(""))+")*"),""),n.begin>i.length&&(L(t,i.length),n=L(t)),_().length-i.length!=1||i.charAt(n.begin)==_()[n.begin]||i.charAt(n.begin+1)==_()[n.begin]||T(n.begin)||(e.keyCode=o.keyCode.BACKSPACE,W.call(t,e)),e.preventDefault()}function Q(t){if(se===!0&&"input"==t.type)return se=!1,!0;var n=this,i=L(n),r=n._valueGet();L(n,i.begin-1);var a=e.Event("keypress");a.which=r.charCodeAt(i.begin-1),ae=!1,le=!1,K.call(n,a,void 0,void 0,!1);var l=s().p;E(n,_(),o.numericInput?D(l):l),t.preventDefault()}function ee(t){se=!0;var n=this;return setTimeout(function(){L(n,L(n).begin-1);var i=e.Event("keypress");i.which=t.originalEvent.data.charCodeAt(0),ae=!1,le=!1,K.call(n,i,void 0,void 0,!1);var r=s().p;E(n,_(),o.numericInput?D(r):r)},0),!1}function te(t){if(ie=e(t),ie.is(":input")&&!n(ie.attr("type"))){if(ie.data("_inputmask",{maskset:i,opts:o,isRTL:!1}),o.showTooltip&&ie.prop("title",s().mask),("rtl"==t.dir||o.rightAlign)&&ie.css("text-align","right"),"rtl"==t.dir||o.numericInput){t.dir="ltr",ie.removeAttr("dir");var r=ie.data("_inputmask");r.isRTL=!0,ie.data("_inputmask",r),re=!0}ie.unbind(".inputmask"),ie.removeClass("focus-inputmask"),ie.closest("form").bind("submit",function(){ne!=_().join("")&&ie.change(),ie[0]._valueGet&&ie[0]._valueGet()==N().join("")&&ie[0]._valueSet(""),o.autoUnmask&&o.removeMaskOnSubmit&&ie.inputmask("remove")}).bind("reset",function(){setTimeout(function(){ie.trigger("setvalue")},0)}),ie.bind("blur.inputmask",function(){var t=e(this),n=this;if(t.data("_inputmask")){var i=n._valueGet(),r=_();t.removeClass("focus-inputmask"),ne!=_().join("")&&t.change(),o.clearMaskOnLostFocus&&""!=i&&(i==N().join("")?n._valueSet(""):H(n)),B(r)===!1&&(t.trigger("incomplete"),o.clearIncomplete&&(g(),o.clearMaskOnLostFocus?n._valueSet(""):(r=N().slice(),E(n,r))))}}).bind("focus.inputmask",function(){var t=e(this),n=this,i=n._valueGet();o.showMaskOnFocus&&!t.hasClass("focus-inputmask")&&(!o.showMaskOnHover||o.showMaskOnHover&&""==i)&&n._valueGet()!=_().join("")&&E(n,_(),$(f())),t.addClass("focus-inputmask"),ne=_().join("")}).bind("click.inputmask",function(){var t=this;e(t).is(":focus")&&setTimeout(function(){var n=L(t);if(n.begin==n.end){var i=re?V(n.begin):n.begin,r=f(i),a=$(r);a>=i?T(i)?L(t,i):L(t,-1==r&&""!=o.radixPoint?e.inArray(o.radixPoint,_()):$(i)):L(t,a)}},0)}).bind("dblclick.inputmask",function(){var e=this;setTimeout(function(){L(e,0,$(f()))},0)}).bind(p+".inputmask dragdrop.inputmask drop.inputmask",J).bind("setvalue.inputmask",function(){var e=this;I(e,!0,!1,void 0,!0),ne=_().join(""),(o.clearMaskOnLostFocus||o.clearIncomplete)&&e._valueGet()==N().join("")&&e._valueSet("")}).bind("complete.inputmask",o.oncomplete).bind("incomplete.inputmask",o.onincomplete).bind("cleared.inputmask",o.oncleared),ie.bind("keydown.inputmask",W).bind("keypress.inputmask",K).bind("keyup.inputmask",X).bind("compositionupdate.inputmask",ee),"paste"!==p||a||ie.bind("input.inputmask",Q),a&&ie.bind("input.inputmask",J),(d||u||c||h)&&("input"==p&&ie.unbind(p+".inputmask"),ie.bind("input.inputmask",Z)),G(t);var l=e.isFunction(o.onBeforeMask)?o.onBeforeMask.call(t,t._valueGet(),o):t._valueGet();I(t,!0,!1,l.split(""),!0),ne=_().join("");var m;try{m=document.activeElement}catch(v){}B(_())===!1&&o.clearIncomplete&&g(),o.clearMaskOnLostFocus?_().join("")==N().join("")?t._valueSet(""):H(t):E(t,_()),m===t&&(ie.addClass("focus-inputmask"),L(t,$(f()))),Y(t)}}var ne,ie,oe,re=!1,ae=!1,se=!1,le=!1;if(void 0!=t)switch(t.action){case"isComplete":return ie=e(t.el),i=ie.data("_inputmask").maskset,o=ie.data("_inputmask").opts,B(t.buffer);case"unmaskedvalue":return ie=t.$input,i=ie.data("_inputmask").maskset,o=ie.data("_inputmask").opts,re=t.$input.data("_inputmask").isRTL,F(t.$input);case"mask":ne=_().join(""),te(t.el);break;case"format":ie=e({}),ie.data("_inputmask",{maskset:i,opts:o,isRTL:o.numericInput}),o.numericInput&&(re=!0);var de=(e.isFunction(o.onBeforeMask)?o.onBeforeMask.call(ie,t.value,o):t.value).split("");return I(ie,!1,!1,re?de.reverse():de,!0),o.onKeyPress.call(this,void 0,_(),0,o),t.metadata?{value:re?_().slice().reverse().join(""):_().join(""),metadata:ie.inputmask("getmetadata")}:re?_().slice().reverse().join(""):_().join("");case"isValid":ie=e({}),ie.data("_inputmask",{maskset:i,opts:o,isRTL:o.numericInput}),o.numericInput&&(re=!0);var de=t.value.split("");I(ie,!1,!0,re?de.reverse():de);for(var ce=_(),ue=U(),he=ce.length-1;he>ue&&!T(he);he--);return ce.splice(ue,he+1-ue),B(ce)&&t.value==ce.join("");case"getemptymask":return ie=e(t.el),i=ie.data("_inputmask").maskset,o=ie.data("_inputmask").opts,N();case"remove":var pe=t.el;ie=e(pe),i=ie.data("_inputmask").maskset,o=ie.data("_inputmask").opts,pe._valueSet(F(ie)),ie.unbind(".inputmask"),ie.removeClass("focus-inputmask"),ie.removeData("_inputmask");var ge;Object.getOwnPropertyDescriptor&&(ge=Object.getOwnPropertyDescriptor(pe,"value")),ge&&ge.get?pe._valueGet&&Object.defineProperty(pe,"value",{get:pe._valueGet,set:pe._valueSet}):document.__lookupGetter__&&pe.__lookupGetter__("value")&&pe._valueGet&&(pe.__defineGetter__("value",pe._valueGet),pe.__defineSetter__("value",pe._valueSet));try{delete pe._valueGet,delete pe._valueSet}catch(fe){pe._valueGet=void 0,pe._valueSet=void 0}break;case"getmetadata":if(ie=e(t.el),i=ie.data("_inputmask").maskset,o=ie.data("_inputmask").opts,e.isArray(i.metadata)){for(var me,ve=f(),be=ve;be>=0;be--)if(s().validPositions[be]&&void 0!=s().validPositions[be].alternation){me=s().validPositions[be].alternation;break}return void 0!=me?i.metadata[s().validPositions[ve].locator[me]]:i.metadata[0]}return i.metadata}}if(void 0===e.fn.inputmask){var a="function"==typeof ScriptEngineMajorVersion?ScriptEngineMajorVersion():new Function("/*@cc_on return @_jscript_version; @*/")()>=10,s=navigator.userAgent,l=null!==s.match(new RegExp("iphone","i")),d=null!==s.match(new RegExp("android.*safari.*","i")),c=null!==s.match(new RegExp("android.*chrome.*","i")),u=null!==s.match(new RegExp("android.*firefox.*","i")),h=/Kindle/i.test(s)||/Silk/i.test(s)||/KFTT/i.test(s)||/KFOT/i.test(s)||/KFJWA/i.test(s)||/KFJWI/i.test(s)||/KFSOWI/i.test(s)||/KFTHWA/i.test(s)||/KFTHWI/i.test(s)||/KFAPWA/i.test(s)||/KFAPWI/i.test(s),p=t("paste")?"paste":t("input")?"input":"propertychange";e.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},alternatormarker:"|",escapeChar:"\\",mask:null,oncomplete:e.noop,onincomplete:e.noop,oncleared:e.noop,repeat:0,greedy:!0,autoUnmask:!1,removeMaskOnSubmit:!0,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},alias:null,onKeyUp:e.noop,onKeyPress:e.noop,onKeyDown:e.noop,onBeforeMask:void 0,onBeforePaste:void 0,onUnMask:void 0,showMaskOnFocus:!0,showMaskOnHover:void 0,onKeyValidation:e.noop,skipOptionalPartCharacter:" ",showTooltip:!1,numericInput:!1,rightAlign:!1,radixPoint:"",nojumps:!1,nojumpsThreshold:0,keepStatic:void 0,definitions:{9:{validator:"[0-9]",cardinality:1,definitionSymbol:"*"},a:{validator:"[A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,definitionSymbol:"*"},"*":{validator:"[0-9A-Za-zА-яЁёÀ-ÿµ]",cardinality:1}},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],isComplete:void 0},masksCache:{},escapeRegex:function(e){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];return e.replace(new RegExp("(\\"+t.join("|\\")+")","gim"),"\\$1")},format:function(t,n,a){var s=e.extend(!0,{},e.inputmask.defaults,n);return i(s.alias,n,s),r({action:"format",value:t,metadata:a},o(s),s)},isValid:function(t,n){var a=e.extend(!0,{},e.inputmask.defaults,n);return i(a.alias,n,a),r({action:"isValid",value:t},o(a),a)}},e.fn.inputmask=function(t,n,a,s,l){function d(t,n,o){var r=e(t);r.data("inputmask-alias")&&i(r.data("inputmask-alias"),{},n);for(var a in n){var s=r.data("inputmask-"+a.toLowerCase());void 0!=s&&("mask"==a&&0==s.indexOf("[")?(n[a]=s.replace(/[\s[\]]/g,"").split("','"),n[a][0]=n[a][0].replace("'",""),n[a][n[a].length-1]=n[a][n[a].length-1].replace("'","")):n[a]="boolean"==typeof s?s:s.toString(),o&&(o[a]=n[a]))}return n}a=a||r,s=s||"_inputmask";var c,u=e.extend(!0,{},e.inputmask.defaults,n);if("string"==typeof t)switch(t){case"mask":return i(u.alias,n,u),c=o(u,a!==r),void 0==c?this:this.each(function(){a({action:"mask",el:this},e.extend(!0,{},c),d(this,u))});case"unmaskedvalue":var h=e(this);return h.data(s)?a({action:"unmaskedvalue",$input:h}):h.val();case"remove":return this.each(function(){var t=e(this);t.data(s)&&a({action:"remove",el:this})});case"getemptymask":return this.data(s)?a({action:"getemptymask",el:this}):"";case"hasMaskedValue":return this.data(s)?!this.data(s).opts.autoUnmask:!1;case"isComplete":return this.data(s)?a({action:"isComplete",buffer:this[0]._valueGet().split(""),el:this}):!0;case"getmetadata":return this.data(s)?a({action:"getmetadata",el:this}):void 0;case"_detectScope":return i(u.alias,n,u),void 0==l||i(l,n,u)||-1!=e.inArray(l,["mask","unmaskedvalue","remove","getemptymask","hasMaskedValue","isComplete","getmetadata","_detectScope"])||(u.mask=l),e.isFunction(u.mask)&&(u.mask=u.mask.call(this,u)),e.isArray(u.mask);default:return i(u.alias,n,u),i(t,n,u)||(u.mask=t),c=o(u,a!==r),void 0==c?this:this.each(function(){a({action:"mask",el:this},e.extend(!0,{},c),d(this,u))})}else{if("object"==typeof t)return u=e.extend(!0,{},e.inputmask.defaults,t),i(u.alias,t,u),c=o(u,a!==r),void 0==c?this:this.each(function(){a({action:"mask",el:this},e.extend(!0,{},c),d(this,u))});if(void 0==t)return this.each(function(){var t=e(this).attr("data-inputmask");if(t&&""!=t)try{t=t.replace(new RegExp("'","g"),'"');var o=e.parseJSON("{"+t+"}");e.extend(!0,o,n),u=e.extend(!0,{},e.inputmask.defaults,o),u=d(this,u),i(u.alias,o,u),u.alias=void 0,e(this).inputmask("mask",u,a)}catch(r){}if(e(this).attr("data-inputmask-mask")||e(this).attr("data-inputmask-alias")){u=e.extend(!0,{},e.inputmask.defaults,{});var s={};u=d(this,u,s),i(u.alias,s,u),u.alias=void 0,e(this).inputmask("mask",u,a)}})}}}return e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.definitions,{h:{validator:"[01][0-9]|2[0-3]",cardinality:2,prevalidator:[{validator:"[0-2]",cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:"[0-5]",cardinality:1}]},d:{validator:"0[1-9]|[12][0-9]|3[01]",cardinality:2,prevalidator:[{validator:"[0-3]",cardinality:1}]},m:{validator:"0[1-9]|1[012]",cardinality:2,prevalidator:[{validator:"[01]",cardinality:1}]},y:{validator:"(19|20)\\d{2}",cardinality:4,prevalidator:[{validator:"[12]",cardinality:1},{validator:"(19|20)",cardinality:2},{validator:"(19|20)\\d",cardinality:3}]}}),e.extend(e.inputmask.defaults.aliases,{"dd/mm/yyyy":{mask:"1/2/y",placeholder:"dd/mm/yyyy",regex:{val1pre:new RegExp("[0-3]"),val1:new RegExp("0[1-9]|[12][0-9]|3[01]"),val2pre:function(t){var n=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|[12][0-9]|3[01])"+n+"[01])")},val2:function(t){var n=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|[12][0-9])"+n+"(0[1-9]|1[012]))|(30"+n+"(0[13-9]|1[012]))|(31"+n+"(0[13578]|1[02]))")}},leapday:"29/02/",separator:"/",yearrange:{minyear:1900,maxyear:2099},isInYearRange:function(e,t,n){if(isNaN(e))return!1;var i=parseInt(e.concat(t.toString().slice(e.length))),o=parseInt(e.concat(n.toString().slice(e.length)));return(isNaN(i)?!1:i>=t&&n>=i)||(isNaN(o)?!1:o>=t&&n>=o)},determinebaseyear:function(e,t,n){var i=(new Date).getFullYear();if(e>i)return e;if(i>t){for(var o=t.toString().slice(0,2),r=t.toString().slice(2,4);o+n>t;)o--;var a=o+r;return e>a?e:a}return i},onKeyUp:function(t,n,i,o){var r=e(this);if(t.ctrlKey&&t.keyCode==o.keyCode.RIGHT){var a=new Date;r.val(a.getDate().toString()+(a.getMonth()+1).toString()+a.getFullYear().toString())}},definitions:{1:{validator:function(e,t,n,i,o){var r=o.regex.val1.test(e);return i||r||e.charAt(1)!=o.separator&&-1=="-./".indexOf(e.charAt(1))||!(r=o.regex.val1.test("0"+e.charAt(0)))?r:(t.buffer[n-1]="0",{refreshFromBuffer:{start:n-1,end:n},pos:n,c:e.charAt(0)})},cardinality:2,prevalidator:[{validator:function(e,t,n,i,o){isNaN(t.buffer[n+1])||(e+=t.buffer[n+1]);var r=1==e.length?o.regex.val1pre.test(e):o.regex.val1.test(e);return i||r||!(r=o.regex.val1.test("0"+e))?r:(t.buffer[n]="0",n++,{pos:n})},cardinality:1}]},2:{validator:function(e,t,n,i,o){var r=o.mask.indexOf("2")==o.mask.length-1?t.buffer.join("").substr(5,3):t.buffer.join("").substr(0,3);-1!=r.indexOf(o.placeholder[0])&&(r="01"+o.separator);var a=o.regex.val2(o.separator).test(r+e);if(!i&&!a&&(e.charAt(1)==o.separator||-1!="-./".indexOf(e.charAt(1)))&&(a=o.regex.val2(o.separator).test(r+"0"+e.charAt(0))))return t.buffer[n-1]="0",{refreshFromBuffer:{start:n-1,end:n},pos:n,c:e.charAt(0)};if(o.mask.indexOf("2")==o.mask.length-1&&a){var s=t.buffer.join("").substr(4,4)+e;if(s!=o.leapday)return!0;var l=parseInt(t.buffer.join("").substr(0,4),10);return l%4===0?l%100===0?l%400===0?!0:!1:!0:!1}return a},cardinality:2,prevalidator:[{validator:function(e,t,n,i,o){isNaN(t.buffer[n+1])||(e+=t.buffer[n+1]);var r=o.mask.indexOf("2")==o.mask.length-1?t.buffer.join("").substr(5,3):t.buffer.join("").substr(0,3);-1!=r.indexOf(o.placeholder[0])&&(r="01"+o.separator);var a=1==e.length?o.regex.val2pre(o.separator).test(r+e):o.regex.val2(o.separator).test(r+e);return i||a||!(a=o.regex.val2(o.separator).test(r+"0"+e))?a:(t.buffer[n]="0",n++,{pos:n})},cardinality:1}]},y:{validator:function(e,t,n,i,o){if(o.isInYearRange(e,o.yearrange.minyear,o.yearrange.maxyear)){var r=t.buffer.join("").substr(0,6);if(r!=o.leapday)return!0;var a=parseInt(e,10);return a%4===0?a%100===0?a%400===0?!0:!1:!0:!1}return!1},cardinality:4,prevalidator:[{validator:function(e,t,n,i,o){var r=o.isInYearRange(e,o.yearrange.minyear,o.yearrange.maxyear);if(!i&&!r){var a=o.determinebaseyear(o.yearrange.minyear,o.yearrange.maxyear,e+"0").toString().slice(0,1);if(r=o.isInYearRange(a+e,o.yearrange.minyear,o.yearrange.maxyear))return t.buffer[n++]=a.charAt(0),{pos:n};if(a=o.determinebaseyear(o.yearrange.minyear,o.yearrange.maxyear,e+"0").toString().slice(0,2),r=o.isInYearRange(a+e,o.yearrange.minyear,o.yearrange.maxyear))return t.buffer[n++]=a.charAt(0),t.buffer[n++]=a.charAt(1),{pos:n}}return r},cardinality:1},{validator:function(e,t,n,i,o){var r=o.isInYearRange(e,o.yearrange.minyear,o.yearrange.maxyear);if(!i&&!r){var a=o.determinebaseyear(o.yearrange.minyear,o.yearrange.maxyear,e).toString().slice(0,2);if(r=o.isInYearRange(e[0]+a[1]+e[1],o.yearrange.minyear,o.yearrange.maxyear))return t.buffer[n++]=a.charAt(1),{pos:n};if(a=o.determinebaseyear(o.yearrange.minyear,o.yearrange.maxyear,e).toString().slice(0,2),o.isInYearRange(a+e,o.yearrange.minyear,o.yearrange.maxyear)){var s=t.buffer.join("").substr(0,6);if(s!=o.leapday)r=!0;else{var l=parseInt(e,10);r=l%4===0?l%100===0?l%400===0?!0:!1:!0:!1}}else r=!1;if(r)return t.buffer[n-1]=a.charAt(0),t.buffer[n++]=a.charAt(1),t.buffer[n++]=e.charAt(0),{refreshFromBuffer:{start:n-3,end:n},pos:n}}return r},cardinality:2},{validator:function(e,t,n,i,o){return o.isInYearRange(e,o.yearrange.minyear,o.yearrange.maxyear)},cardinality:3}]}},insertMode:!1,autoUnmask:!1},"mm/dd/yyyy":{placeholder:"mm/dd/yyyy",alias:"dd/mm/yyyy",regex:{val2pre:function(t){var n=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[13-9]|1[012])"+n+"[0-3])|(02"+n+"[0-2])")},val2:function(t){var n=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|1[012])"+n+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+n+"30)|((0[13578]|1[02])"+n+"31)")},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},leapday:"02/29/",onKeyUp:function(t,n,i,o){var r=e(this);if(t.ctrlKey&&t.keyCode==o.keyCode.RIGHT){var a=new Date;r.val((a.getMonth()+1).toString()+a.getDate().toString()+a.getFullYear().toString())}}},"yyyy/mm/dd":{mask:"y/1/2",placeholder:"yyyy/mm/dd",alias:"mm/dd/yyyy",leapday:"/02/29",onKeyUp:function(t,n,i,o){var r=e(this);if(t.ctrlKey&&t.keyCode==o.keyCode.RIGHT){var a=new Date;r.val(a.getFullYear().toString()+(a.getMonth()+1).toString()+a.getDate().toString())}}},"dd.mm.yyyy":{mask:"1.2.y",placeholder:"dd.mm.yyyy",leapday:"29.02.",separator:".",alias:"dd/mm/yyyy"},"dd-mm-yyyy":{mask:"1-2-y",placeholder:"dd-mm-yyyy",leapday:"29-02-",separator:"-",alias:"dd/mm/yyyy"},"mm.dd.yyyy":{mask:"1.2.y",placeholder:"mm.dd.yyyy",leapday:"02.29.",separator:".",alias:"mm/dd/yyyy"},"mm-dd-yyyy":{mask:"1-2-y",placeholder:"mm-dd-yyyy",leapday:"02-29-",separator:"-",alias:"mm/dd/yyyy"},"yyyy.mm.dd":{mask:"y.1.2",placeholder:"yyyy.mm.dd",leapday:".02.29",separator:".",alias:"yyyy/mm/dd"},"yyyy-mm-dd":{mask:"y-1-2",placeholder:"yyyy-mm-dd",leapday:"-02-29",separator:"-",alias:"yyyy/mm/dd"},datetime:{mask:"1/2/y h:s",placeholder:"dd/mm/yyyy hh:mm",alias:"dd/mm/yyyy",regex:{hrspre:new RegExp("[012]"),hrs24:new RegExp("2[0-4]|1[3-9]"),hrs:new RegExp("[01][0-9]|2[0-4]"),ampm:new RegExp("^[a|p|A|P][m|M]"),mspre:new RegExp("[0-5]"),ms:new RegExp("[0-5][0-9]")},timeseparator:":",hourFormat:"24",definitions:{h:{validator:function(e,t,n,i,o){if("24"==o.hourFormat&&24==parseInt(e,10))return t.buffer[n-1]="0",t.buffer[n]="0",{refreshFromBuffer:{start:n-1,end:n},c:"0"};var r=o.regex.hrs.test(e);if(!i&&!r&&(e.charAt(1)==o.timeseparator||-1!="-.:".indexOf(e.charAt(1)))&&(r=o.regex.hrs.test("0"+e.charAt(0))))return t.buffer[n-1]="0",t.buffer[n]=e.charAt(0),n++,{refreshFromBuffer:{start:n-2,end:n},pos:n,c:o.timeseparator};if(r&&"24"!==o.hourFormat&&o.regex.hrs24.test(e)){var a=parseInt(e,10);return 24==a?(t.buffer[n+5]="a",t.buffer[n+6]="m"):(t.buffer[n+5]="p",t.buffer[n+6]="m"),a-=12,10>a?(t.buffer[n]=a.toString(),t.buffer[n-1]="0"):(t.buffer[n]=a.toString().charAt(1),t.buffer[n-1]=a.toString().charAt(0)),{refreshFromBuffer:{start:n-1,end:n+6},c:t.buffer[n]}}return r},cardinality:2,prevalidator:[{validator:function(e,t,n,i,o){var r=o.regex.hrspre.test(e);return i||r||!(r=o.regex.hrs.test("0"+e))?r:(t.buffer[n]="0",n++,{pos:n})},cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:function(e,t,n,i,o){var r=o.regex.mspre.test(e);return i||r||!(r=o.regex.ms.test("0"+e))?r:(t.buffer[n]="0",n++,{pos:n})},cardinality:1}]},t:{validator:function(e,t,n,i,o){return o.regex.ampm.test(e+"m")},casing:"lower",cardinality:1}},insertMode:!1,autoUnmask:!1},datetime12:{mask:"1/2/y h:s t\\m",placeholder:"dd/mm/yyyy hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:s t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm:ss":{mask:"h:s:s",placeholder:"hh:mm:ss",alias:"datetime",autoUnmask:!1},"hh:mm":{mask:"h:s",placeholder:"hh:mm",alias:"datetime",autoUnmask:!1},date:{alias:"dd/mm/yyyy"},"mm/yyyy":{mask:"1/y",placeholder:"mm/yyyy",leapday:"donotuse",separator:"/",alias:"mm/dd/yyyy"}}),e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.definitions,{A:{validator:"[A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,casing:"upper"},"#":{validator:"[0-9A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,casing:"upper"}}),e.extend(e.inputmask.defaults.aliases,{url:{mask:"ir",
placeholder:"",separator:"",defaultPrefix:"http://",regex:{urlpre1:new RegExp("[fh]"),urlpre2:new RegExp("(ft|ht)"),urlpre3:new RegExp("(ftp|htt)"),urlpre4:new RegExp("(ftp:|http|ftps)"),urlpre5:new RegExp("(ftp:/|ftps:|http:|https)"),urlpre6:new RegExp("(ftp://|ftps:/|http:/|https:)"),urlpre7:new RegExp("(ftp://|ftps://|http://|https:/)"),urlpre8:new RegExp("(ftp://|ftps://|http://|https://)")},definitions:{i:{validator:function(){return!0},cardinality:8,prevalidator:function(){for(var e=[],t=8,n=0;t>n;n++)e[n]=function(){var e=n;return{validator:function(t,n,i,o,r){if(r.regex["urlpre"+(e+1)]){var a,s=t;e+1-t.length>0&&(s=n.buffer.join("").substring(0,e+1-t.length)+""+s);var l=r.regex["urlpre"+(e+1)].test(s);if(!o&&!l){for(i-=e,a=0;a<r.defaultPrefix.length;a++)n.buffer[i]=r.defaultPrefix[a],i++;for(a=0;a<s.length-1;a++)n.buffer[i]=s[a],i++;return{pos:i}}return l}return!1},cardinality:e}}();return e}()},r:{validator:".",cardinality:50}},insertMode:!1,autoUnmask:!1},ip:{mask:"i[i[i]].i[i[i]].i[i[i]].i[i[i]]",definitions:{i:{validator:function(e,t,n){return n-1>-1&&"."!=t.buffer[n-1]?(e=t.buffer[n-1]+e,e=n-2>-1&&"."!=t.buffer[n-2]?t.buffer[n-2]+e:"0"+e):e="00"+e,new RegExp("25[0-5]|2[0-4][0-9]|[01][0-9][0-9]").test(e)},cardinality:1}}},email:{mask:"*{1,20}[.*{1,20}][.*{1,20}][.*{1,20}]@*{1,20}[.*{2,20}][.*{2,6}][.*{1,2}]",greedy:!1,onBeforePaste:function(e){return e=e.toLowerCase(),e.replace("mailto:","")},definitions:{"*":{validator:"[0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",cardinality:1,casing:"lower"}}}}),e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.aliases,{numeric:{mask:function(e){if(0!==e.repeat&&isNaN(e.integerDigits)&&(e.integerDigits=e.repeat),e.repeat=0,e.groupSeparator==e.radixPoint&&(e.groupSeparator="."==e.radixPoint?",":","==e.radixPoint?".":"")," "===e.groupSeparator&&(e.skipOptionalPartCharacter=void 0),e.autoGroup=e.autoGroup&&""!=e.groupSeparator,e.autoGroup&&isFinite(e.integerDigits)){var t=Math.floor(e.integerDigits/e.groupSize),n=e.integerDigits%e.groupSize;e.integerDigits+=0==n?t-1:t}e.definitions[";"]=e.definitions["~"];var i=e.prefix;return i+="[+]",i+="~{1,"+e.integerDigits+"}",void 0!=e.digits&&(isNaN(e.digits)||parseInt(e.digits)>0)&&(i+=e.digitsOptional?"["+(e.decimalProtect?":":e.radixPoint)+";{"+e.digits+"}]":(e.decimalProtect?":":e.radixPoint)+";{"+e.digits+"}"),i+=e.suffix},placeholder:"",greedy:!1,digits:"*",digitsOptional:!0,groupSeparator:"",radixPoint:".",groupSize:3,autoGroup:!1,allowPlus:!0,allowMinus:!0,integerDigits:"+",prefix:"",suffix:"",rightAlign:!0,decimalProtect:!0,postFormat:function(t,n,i,o){var r=!1,a=t[n];if(""==o.groupSeparator||-1!=e.inArray(o.radixPoint,t)&&n>=e.inArray(o.radixPoint,t)||new RegExp("[-+]").test(a))return{pos:n};var s=t.slice();a==o.groupSeparator&&(s.splice(n--,1),a=s[n]),i?s[n]="?":s.splice(n,0,"?");var l=s.join("");if(o.autoGroup||i&&-1!=l.indexOf(o.groupSeparator)){var d=e.inputmask.escapeRegex.call(this,o.groupSeparator);r=0==l.indexOf(o.groupSeparator),l=l.replace(new RegExp(d,"g"),"");var c=l.split(o.radixPoint);if(l=c[0],l!=o.prefix+"?0"&&l.length>=o.groupSize+o.prefix.length){r=!0;for(var u=new RegExp("([-+]?[\\d?]+)([\\d?]{"+o.groupSize+"})");u.test(l);)l=l.replace(u,"$1"+o.groupSeparator+"$2"),l=l.replace(o.groupSeparator+o.groupSeparator,o.groupSeparator)}c.length>1&&(l+=o.radixPoint+c[1])}t.length=l.length;for(var h=0,p=l.length;p>h;h++)t[h]=l.charAt(h);var g=e.inArray("?",t);return i?t[g]=a:t.splice(g,1),{pos:g,refreshFromBuffer:r}},onKeyDown:function(t,n,i,o){if(t.keyCode==o.keyCode.TAB&&"0"!=o.placeholder.charAt(0)){var r=e.inArray(o.radixPoint,n);if(-1!=r&&isFinite(o.digits)){for(var a=1;a<=o.digits;a++)(void 0==n[r+a]||n[r+a]==o.placeholder.charAt(0))&&(n[r+a]="0");return{refreshFromBuffer:{start:++r,end:r+o.digits}}}}else if(o.autoGroup&&(t.keyCode==o.keyCode.DELETE||t.keyCode==o.keyCode.BACKSPACE)){var s=o.postFormat(n,i-1,!0,o);return s.caret=s.pos+1,s}},onKeyPress:function(e,t,n,i){if(i.autoGroup){var o=i.postFormat(t,n-1,!0,i);return o.caret=o.pos+1,o}},regex:{integerPart:function(){return new RegExp("[-+]?\\d+")}},negationhandler:function(e,t,n,i,o){if(!i&&o.allowMinus&&"-"===e){var r=t.join("").match(o.regex.integerPart(o));if(r.length>0)return"+"==t[r.index]?{pos:r.index,c:"-",remove:r.index,caret:n}:"-"==t[r.index]?{remove:r.index,caret:n-1}:{pos:r.index,c:"-",caret:n+1}}return!1},radixhandler:function(t,n,i,o,r){if(!o&&t===r.radixPoint){var a=e.inArray(r.radixPoint,n.buffer),s=n.buffer.join("").match(r.regex.integerPart(r));if(-1!=a)return n.validPositions[a-1]?{caret:a+1}:{pos:s.index,c:s[0],caret:a+1}}return!1},leadingZeroHandler:function(t,n,i,o,r){var a=n.buffer.join("").match(r.regex.integerPart(r)),s=e.inArray(r.radixPoint,n.buffer);if(a&&!o&&(-1==s||a.index<s))if(0==a[0].indexOf("0")&&i>=r.prefix.length){if(-1==s||s>=i&&void 0==n.validPositions[s])return n.buffer.splice(a.index,1),i=i>a.index?i-1:a.index,{pos:i,remove:a.index};if(i>a.index&&s>=i)return n.buffer.splice(a.index,1),i=i>a.index?i-1:a.index,{pos:i,remove:a.index}}else if("0"==t&&i<=a.index)return!1;return!0},definitions:{"~":{validator:function(t,n,i,o,r){var a=r.negationhandler(t,n.buffer,i,o,r);if(!a&&(a=r.radixhandler(t,n,i,o,r),!a&&(a=o?new RegExp("[0-9"+e.inputmask.escapeRegex.call(this,r.groupSeparator)+"]").test(t):new RegExp("[0-9]").test(t),a===!0&&(a=r.leadingZeroHandler(t,n,i,o,r),a===!0)))){var s=e.inArray(r.radixPoint,n.buffer);return r.digitsOptional===!1&&i>s&&!o?{pos:i,remove:i}:{pos:i}}return a},cardinality:1,prevalidator:null},"+":{validator:function(e,t,n,i,o){var r="[";return o.allowMinus===!0&&(r+="-"),o.allowPlus===!0&&(r+="+"),r+="]",new RegExp(r).test(e)},cardinality:1,prevalidator:null},":":{validator:function(t,n,i,o,r){var a=r.negationhandler(t,n.buffer,i,o,r);if(!a){var s="["+e.inputmask.escapeRegex.call(this,r.radixPoint)+"]";a=new RegExp(s).test(t),a&&n.validPositions[i]&&n.validPositions[i].match.placeholder==r.radixPoint&&(a={pos:i,remove:i})}return a},cardinality:1,prevalidator:null,placeholder:function(e){return e.radixPoint}}},insertMode:!0,autoUnmask:!1,onUnMask:function(t,n,i){var o=t.replace(i.prefix,"");return o=o.replace(i.suffix,""),o=o.replace(new RegExp(e.inputmask.escapeRegex.call(this,i.groupSeparator),"g"),"")},isComplete:function(t,n){var i=t.join(""),o=t.slice();if(n.postFormat(o,0,!0,n),o.join("")!=i)return!1;var r=i.replace(n.prefix,"");return r=r.replace(n.suffix,""),r=r.replace(new RegExp(e.inputmask.escapeRegex.call(this,n.groupSeparator),"g"),""),r=r.replace(e.inputmask.escapeRegex.call(this,n.radixPoint),"."),isFinite(r)},onBeforeMask:function(t,n){if(isFinite(t))return t.toString().replace(".",n.radixPoint);var i=t.match(/,/g),o=t.match(/\./g);return o&&i?o.length>i.length?(t=t.replace(/\./g,""),t=t.replace(",",n.radixPoint)):i.length>o.length&&(t=t.replace(/,/g,""),t=t.replace(".",n.radixPoint)):t=t.replace(new RegExp(e.inputmask.escapeRegex.call(this,n.groupSeparator),"g"),""),t}},currency:{prefix:"$ ",groupSeparator:",",radixPoint:".",alias:"numeric",placeholder:"0",autoGroup:!0,digits:2,digitsOptional:!1,clearMaskOnLostFocus:!1,decimalProtect:!0},decimal:{alias:"numeric"},integer:{alias:"numeric",digits:"0"}}),e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.aliases,{phone:{url:"phone-codes/phone-codes.js",maskInit:"+pp(pp)pppppppp",mask:function(t){t.definitions={p:{validator:function(){return!1},cardinality:1},"#":{validator:"[0-9]",cardinality:1}};var n=[];return e.ajax({url:t.url,async:!1,dataType:"json",success:function(e){n=e}}),n.splice(0,0,t.maskInit),n.sort(function(e,t){return e.length-t.length}),n},nojumps:!0,nojumpsThreshold:1},phonebe:{alias:"phone",url:"phone-codes/phone-be.js",maskInit:"+32(pp)pppppppp",nojumpsThreshold:4}}),e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.aliases,{Regex:{mask:"r",greedy:!1,repeat:"*",regex:null,regexTokens:null,tokenizer:/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,quantifierFilter:/[0-9]+[^,]/,isComplete:function(e,t){return new RegExp(t.regex).test(e.join(""))},definitions:{r:{validator:function(t,n,i,o,r){function a(e,t){this.matches=[],this.isGroup=e||!1,this.isQuantifier=t||!1,this.quantifier={min:1,max:1},this.repeaterPart=void 0}function s(){var e,t,n=new a,i=[];for(r.regexTokens=[];e=r.tokenizer.exec(r.regex);)switch(t=e[0],t.charAt(0)){case"(":i.push(new a(!0));break;case")":var o=i.pop();i.length>0?i[i.length-1].matches.push(o):n.matches.push(o);break;case"{":case"+":case"*":var s=new a(!1,!0);t=t.replace(/[{}]/g,"");var l=t.split(","),d=isNaN(l[0])?l[0]:parseInt(l[0]),c=1==l.length?d:isNaN(l[1])?l[1]:parseInt(l[1]);if(s.quantifier={min:d,max:c},i.length>0){var u=i[i.length-1].matches;if(e=u.pop(),!e.isGroup){var o=new a(!0);o.matches.push(e),e=o}u.push(e),u.push(s)}else{if(e=n.matches.pop(),!e.isGroup){var o=new a(!0);o.matches.push(e),e=o}n.matches.push(e),n.matches.push(s)}break;default:i.length>0?i[i.length-1].matches.push(t):n.matches.push(t)}n.matches.length>0&&r.regexTokens.push(n)}function l(t,n){var i=!1;n&&(c+="(",h++);for(var o=0;o<t.matches.length;o++){var r=t.matches[o];if(1==r.isGroup)i=l(r,!0);else if(1==r.isQuantifier){var a=e.inArray(r,t.matches),s=t.matches[a-1],d=c;if(isNaN(r.quantifier.max)){for(;r.repeaterPart&&r.repeaterPart!=c&&r.repeaterPart.length>c.length&&!(i=l(s,!0)););i=i||l(s,!0),i&&(r.repeaterPart=c),c=d+r.quantifier.max}else{for(var u=0,g=r.quantifier.max-1;g>u&&!(i=l(s,!0));u++);c=d+"{"+r.quantifier.min+","+r.quantifier.max+"}"}}else if(void 0!=r.matches)for(var f=0;f<r.length&&!(i=l(r[f],n));f++);else{var m;if("["==r.charAt(0)){m=c,m+=r;for(var v=0;h>v;v++)m+=")";var b=new RegExp("^("+m+")$");i=b.test(p)}else for(var y=0,w=r.length;w>y;y++)if("\\"!=r.charAt(y)){m=c,m+=r.substr(0,y+1),m=m.replace(/\|$/,"");for(var v=0;h>v;v++)m+=")";var b=new RegExp("^("+m+")$");if(i=b.test(p))break}c+=r}if(i)break}return n&&(c+=")",h--),i}null==r.regexTokens&&s();var d=n.buffer.slice(),c="",u=!1,h=0;d.splice(i,0,t);for(var p=d.join(""),g=0;g<r.regexTokens.length;g++){var a=r.regexTokens[g];if(u=l(a,a.isGroup))break}return u},cardinality:1}}}}),e.fn.inputmask}(jQuery)}.apply(e,arguments)})}(this),function(e){define("bootstrap-datepicker",["jquery"],function(){return function(){!function(e,t){function n(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var e=new Date;return n(e.getFullYear(),e.getMonth(),e.getDate())}function o(e,t){return e.getUTCFullYear()===t.getUTCFullYear()&&e.getUTCMonth()===t.getUTCMonth()&&e.getUTCDate()===t.getUTCDate()}function r(e){return function(){return this[e].apply(this,arguments)}}function a(t,n){function i(e,t){return t.toLowerCase()}var o,r=e(t).data(),a={},s=new RegExp("^"+n.toLowerCase()+"([A-Z])");n=new RegExp("^"+n.toLowerCase());for(var l in r)n.test(l)&&(o=l.replace(s,i),a[o]=r[l]);return a}function s(t){var n={};if(f[t]||(t=t.split("-")[0],f[t])){var i=f[t];return e.each(g,function(e,t){t in i&&(n[t]=i[t])}),n}}var l=function(){var t={get:function(e){return this.slice(e)[0]},contains:function(e){for(var t=e&&e.valueOf(),n=0,i=this.length;i>n;n++)if(this[n].valueOf()===t)return n;return-1},remove:function(e){this.splice(e,1)},replace:function(t){t&&(e.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.length=0},copy:function(){var e=new l;return e.replace(this),e}};return function(){var n=[];return n.push.apply(n,arguments),e.extend(n,t),n}}(),d=function(t,n){this._process_options(n),this.dates=new l,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=e(t),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.hasClass("date")?this.element.find(".add-on, .input-group-addon, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=e(m.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot .today, tfoot .clear").attr("colspan",function(e,t){return parseInt(t)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.setDatesDisabled(this.o.datesDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};d.prototype={constructor:d,_process_options:function(o){this._o=e.extend({},this._o,o);var r=this.o=e.extend({},this._o),a=r.language;switch(f[a]||(a=a.split("-")[0],f[a]||(a=p.language)),r.language=a,r.startView){case 2:case"decade":r.startView=2;break;case 1:case"year":r.startView=1;break;default:r.startView=0}switch(r.minViewMode){case 1:case"months":r.minViewMode=1;break;case 2:case"years":r.minViewMode=2;break;default:r.minViewMode=0}r.startView=Math.max(r.startView,r.minViewMode),r.multidate!==!0&&(r.multidate=Number(r.multidate)||!1,r.multidate!==!1&&(r.multidate=Math.max(0,r.multidate))),r.multidateSeparator=String(r.multidateSeparator),r.weekStart%=7,r.weekEnd=(r.weekStart+6)%7;var s=m.parseFormat(r.format);if(r.startDate!==-(1/0)&&(r.startDate?r.startDate instanceof Date?r.startDate=this._local_to_utc(this._zero_time(r.startDate)):r.startDate=m.parseDate(r.startDate,s,r.language):r.startDate=-(1/0)),r.endDate!==1/0&&(r.endDate?r.endDate instanceof Date?r.endDate=this._local_to_utc(this._zero_time(r.endDate)):r.endDate=m.parseDate(r.endDate,s,r.language):r.endDate=1/0),r.daysOfWeekDisabled=r.daysOfWeekDisabled||[],e.isArray(r.daysOfWeekDisabled)||(r.daysOfWeekDisabled=r.daysOfWeekDisabled.split(/[,\s]*/)),r.daysOfWeekDisabled=e.map(r.daysOfWeekDisabled,function(e){return parseInt(e,10)}),r.datesDisabled=r.datesDisabled||[],!e.isArray(r.datesDisabled)){var l=[];l.push(m.parseDate(r.datesDisabled,s,r.language)),r.datesDisabled=l}r.datesDisabled=e.map(r.datesDisabled,function(e){return m.parseDate(e,s,r.language)});var d=String(r.orientation).toLowerCase().split(/\s+/g),c=r.orientation.toLowerCase();if(d=e.grep(d,function(e){return/^auto|left|right|top|bottom$/.test(e)}),r.orientation={x:"auto",y:"auto"},c&&"auto"!==c)if(1===d.length)switch(d[0]){case"top":case"bottom":r.orientation.y=d[0];break;case"left":case"right":r.orientation.x=d[0]}else c=e.grep(d,function(e){return/^left|right$/.test(e)}),r.orientation.x=c[0]||"auto",c=e.grep(d,function(e){return/^top|bottom$/.test(e)}),r.orientation.y=c[0]||"auto";else;if(r.defaultViewDate){var u=r.defaultViewDate.year||(new Date).getFullYear(),h=r.defaultViewDate.month||0,g=r.defaultViewDate.day||1;r.defaultViewDate=n(u,h,g)}else r.defaultViewDate=i();r.showOnFocus=r.showOnFocus!==t?r.showOnFocus:!0},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var n,i,o,r=0;r<e.length;r++)n=e[r][0],2===e[r].length?(i=t,o=e[r][1]):3===e[r].length&&(i=e[r][1],o=e[r][2]),n.on(o,i)},_unapplyEvents:function(e){for(var n,i,o,r=0;r<e.length;r++)n=e[r][0],2===e[r].length?(o=t,i=e[r][1]):3===e[r].length&&(o=e[r][1],i=e[r][2]),n.off(i,o)},_buildEvents:function(){var t={keyup:e.proxy(function(t){-1===e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:e.proxy(this.keydown,this)};this.o.showOnFocus===!0&&(t.focus=e.proxy(this.show,this)),this.isInput?this._events=[[this.element,t]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),t],[this.component,{click:e.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:e.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:e.proxy(function(e){this._focused_from=e.target},this)}]),this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{"mousedown touchstart":e.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,n){var i=n||this.dates.get(-1),o=this._utc_to_local(i);this.element.trigger({type:t,date:o,dates:e.map(this.dates,this._utc_to_local),format:e.proxy(function(e,t){0===arguments.length?(e=this.dates.length-1,t=this.o.format):"string"==typeof e&&(t=e,e=this.dates.length-1),t=t||this.o.format;var n=this.dates.get(e);return m.formatDate(n,t,this.o.language)},this)})},show:function(){return this.element.attr("readonly")&&this.o.enableOnReadonly===!1?void 0:(this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&e(this.element).blur(),this)},hide:function(){return this.isInline?this:this.picker.is(":visible")?(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"),this):this},remove:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},_utc_to_local:function(e){return e&&new Date(e.getTime()+6e4*e.getTimezoneOffset())},_local_to_utc:function(e){return e&&new Date(e.getTime()-6e4*e.getTimezoneOffset())},_zero_time:function(e){return e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return e&&new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()))},getDates:function(){return e.map(this.dates,this._utc_to_local)},getUTCDates:function(){return e.map(this.dates,function(e){return new Date(e)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var e=this.dates.get(-1);return"undefined"!=typeof e?new Date(e):null},clearDates:function(){var e;this.isInput?e=this.element:this.component&&(e=this.element.find("input")),e&&e.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,t),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,e.map(t,this._utc_to_local)),this._trigger("changeDate"),this.setValue(),this},setDate:r("setDates"),setUTCDate:r("setUTCDates"),setValue:function(){var e=this.getFormattedDate();return this.isInput?this.element.val(e).change():this.component&&this.element.find("input").val(e).change(),this},getFormattedDate:function(n){n===t&&(n=this.o.format);var i=this.o.language;return e.map(this.dates,function(e){return m.formatDate(e,n,i)}).join(this.o.multidateSeparator)},setStartDate:function(e){return this._process_options({startDate:e}),this.update(),this.updateNavArrows(),this},setEndDate:function(e){return this._process_options({endDate:e}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(e){return this._process_options({daysOfWeekDisabled:e}),this.update(),this.updateNavArrows(),this},setDatesDisabled:function(e){this._process_options({datesDisabled:e}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return this;var t=this.picker.outerWidth(),n=this.picker.outerHeight(),i=10,o=e(this.o.container).width(),r=e(this.o.container).height(),a=e(this.o.container).scrollTop(),s=e(this.o.container).offset(),l=[];this.element.parents().each(function(){var t=e(this).css("z-index");"auto"!==t&&0!==t&&l.push(parseInt(t))});var d=Math.max.apply(Math,l)+10,c=this.component?this.component.parent().offset():this.element.offset(),u=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),h=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),p=c.left-s.left,g=c.top-s.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(p-=t-h)):c.left<0?(this.picker.addClass("datepicker-orient-left"),p-=c.left-i):p+t>o?(this.picker.addClass("datepicker-orient-right"),p=c.left+h-t):this.picker.addClass("datepicker-orient-left");var f,m,v=this.o.orientation.y;if("auto"===v&&(f=-a+g-n,m=a+r-(g+u+n),v=Math.max(f,m)===m?"top":"bottom"),this.picker.addClass("datepicker-orient-"+v),"top"===v?g+=u:g-=n+parseInt(this.picker.css("padding-top")),this.o.rtl){var b=o-(p+h);this.picker.css({top:g,right:b,zIndex:d})}else this.picker.css({top:g,left:p,zIndex:d});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var t=this.dates.copy(),n=[],i=!1;return arguments.length?(e.each(arguments,e.proxy(function(e,t){t instanceof Date&&(t=this._local_to_utc(t)),n.push(t)},this)),i=!0):(n=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),n=n&&this.o.multidate?n.split(this.o.multidateSeparator):[n],delete this.element.data().date),n=e.map(n,e.proxy(function(e){return m.parseDate(e,this.o.format,this.o.language)},this)),n=e.grep(n,e.proxy(function(e){return e<this.o.startDate||e>this.o.endDate||!e},this),!0),this.dates.replace(n),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),i?this.setValue():n.length&&String(t)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&t.length&&this._trigger("clearDate"),this.fill(),this},fillDow:function(){var e=this.o.weekStart,t="<tr>";if(this.o.calendarWeeks){this.picker.find(".datepicker-days thead tr:first-child .datepicker-switch").attr("colspan",function(e,t){return parseInt(t)+1});var n='<th class="cw">&#160;</th>';t+=n}for(;e<this.o.weekStart+7;)t+='<th class="dow">'+f[this.o.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){for(var e="",t=0;12>t;)e+='<span class="month">'+f[this.o.language].monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").html(e)},setRange:function(t){t&&t.length?this.range=e.map(t,function(e){return e.valueOf()}):delete this.range,this.fill()},getClassNames:function(t){var n=[],i=this.viewDate.getUTCFullYear(),r=this.viewDate.getUTCMonth(),a=new Date;return t.getUTCFullYear()<i||t.getUTCFullYear()===i&&t.getUTCMonth()<r?n.push("old"):(t.getUTCFullYear()>i||t.getUTCFullYear()===i&&t.getUTCMonth()>r)&&n.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&t.getUTCFullYear()===a.getFullYear()&&t.getUTCMonth()===a.getMonth()&&t.getUTCDate()===a.getDate()&&n.push("today"),-1!==this.dates.contains(t)&&n.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||-1!==e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled))&&n.push("disabled"),this.o.datesDisabled.length>0&&e.grep(this.o.datesDisabled,function(e){return o(t,e)}).length>0&&n.push("disabled","disabled-date"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&n.push("range"),-1!==e.inArray(t.valueOf(),this.range)&&n.push("selected")),n},fill:function(){var i,o=new Date(this.viewDate),r=o.getUTCFullYear(),a=o.getUTCMonth(),s=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),l=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),d=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,c=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,u=f[this.o.language].today||f.en.today||"",h=f[this.o.language].clear||f.en.clear||"";if(!isNaN(r)&&!isNaN(a)){this.picker.find(".datepicker-days thead .datepicker-switch").text(f[this.o.language].months[a]+" "+r),this.picker.find("tfoot .today").text(u).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot .clear").text(h).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var p=n(r,a-1,28),g=m.getDaysInMonth(p.getUTCFullYear(),p.getUTCMonth());p.setUTCDate(g),p.setUTCDate(g-(p.getUTCDay()-this.o.weekStart+7)%7);var v=new Date(p);v.setUTCDate(v.getUTCDate()+42),v=v.valueOf();for(var b,y=[];p.valueOf()<v;){if(p.getUTCDay()===this.o.weekStart&&(y.push("<tr>"),this.o.calendarWeeks)){var w=new Date(+p+(this.o.weekStart-p.getUTCDay()-7)%7*864e5),A=new Date(Number(w)+(11-w.getUTCDay())%7*864e5),N=new Date(Number(N=n(A.getUTCFullYear(),0,1))+(11-N.getUTCDay())%7*864e5),_=(A-N)/864e5/7+1;y.push('<td class="cw">'+_+"</td>")}if(b=this.getClassNames(p),b.push("day"),this.o.beforeShowDay!==e.noop){var C=this.o.beforeShowDay(this._utc_to_local(p));C===t?C={}:"boolean"==typeof C?C={enabled:C}:"string"==typeof C&&(C={classes:C}),C.enabled===!1&&b.push("disabled"),C.classes&&(b=b.concat(C.classes.split(/\s+/))),C.tooltip&&(i=C.tooltip)}b=e.unique(b),y.push('<td class="'+b.join(" ")+'"'+(i?' title="'+i+'"':"")+">"+p.getUTCDate()+"</td>"),i=null,p.getUTCDay()===this.o.weekEnd&&y.push("</tr>"),p.setUTCDate(p.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(y.join(""));var x=this.picker.find(".datepicker-months").find("th:eq(1)").text(r).end().find("span").removeClass("active");if(e.each(this.dates,function(e,t){t.getUTCFullYear()===r&&x.eq(t.getUTCMonth()).addClass("active")}),(s>r||r>d)&&x.addClass("disabled"),r===s&&x.slice(0,l).addClass("disabled"),r===d&&x.slice(c+1).addClass("disabled"),this.o.beforeShowMonth!==e.noop){var S=this;e.each(x,function(t,n){if(!e(n).hasClass("disabled")){var i=new Date(r,t,1),o=S.o.beforeShowMonth(i);o===!1&&e(n).addClass("disabled")}})}y="",r=10*parseInt(r/10,10);var T=this.picker.find(".datepicker-years").find("th:eq(1)").text(r+"-"+(r+9)).end().find("td");r-=1;for(var k,$=e.map(this.dates,function(e){return e.getUTCFullYear()}),D=-1;11>D;D++)k=["year"],-1===D?k.push("old"):10===D&&k.push("new"),-1!==e.inArray(r,$)&&k.push("active"),(s>r||r>d)&&k.push("disabled"),y+='<span class="'+k.join(" ")+'">'+r+"</span>",r+=1;T.html(y)}},updateNavArrows:function(){if(this._allow_update){var e=new Date(this.viewDate),t=e.getUTCFullYear(),n=e.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-(1/0)&&t<=this.o.startDate.getUTCFullYear()&&n<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&t>=this.o.endDate.getUTCFullYear()&&n>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-(1/0)&&t<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&t>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(t){t.preventDefault();var i,o,r,a=e(t.target).closest("span, td, th");if(1===a.length)switch(a[0].nodeName.toLowerCase()){case"th":switch(a[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var s=m.modes[this.viewMode].navStep*("prev"===a[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,s),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,s),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var l=new Date;l=n(l.getFullYear(),l.getMonth(),l.getDate(),0,0,0),this.showMode(-2);var d="linked"===this.o.todayBtn?null:"view";this._setDate(l,d);break;case"clear":this.clearDates()}break;case"span":a.hasClass("disabled")||(this.viewDate.setUTCDate(1),a.hasClass("month")?(r=1,o=a.parent().find("span").index(a),i=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(o),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(n(i,o,r))):(r=1,o=0,i=parseInt(a.text(),10)||0,this.viewDate.setUTCFullYear(i),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(n(i,o,r))),this.showMode(-1),this.fill());break;case"td":a.hasClass("day")&&!a.hasClass("disabled")&&(r=parseInt(a.text(),10)||1,i=this.viewDate.getUTCFullYear(),o=this.viewDate.getUTCMonth(),a.hasClass("old")?0===o?(o=11,i-=1):o-=1:a.hasClass("new")&&(11===o?(o=0,i+=1):o+=1),this._setDate(n(i,o,r)))}this.picker.is(":visible")&&this._focused_from&&e(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(e){var t=this.dates.contains(e);if(e||this.dates.clear(),-1!==t?(this.o.multidate===!0||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(t):this.o.multidate===!1?(this.dates.clear(),this.dates.push(e)):this.dates.push(e),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(e,t){t&&"date"!==t||this._toggle_multidate(e&&new Date(e)),t&&"view"!==t||(this.viewDate=e&&new Date(e)),this.fill(),this.setValue(),t&&"view"===t||this._trigger("changeDate");var n;this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&n.change(),!this.o.autoclose||t&&"date"!==t||this.hide()},moveMonth:function(e,n){if(!e)return t;if(!n)return e;var i,o,r=new Date(e.valueOf()),a=r.getUTCDate(),s=r.getUTCMonth(),l=Math.abs(n);if(n=n>0?1:-1,1===l)o=-1===n?function(){return r.getUTCMonth()===s}:function(){return r.getUTCMonth()!==i},i=s+n,r.setUTCMonth(i),(0>i||i>11)&&(i=(i+12)%12);else{for(var d=0;l>d;d++)r=this.moveMonth(r,n);i=r.getUTCMonth(),r.setUTCDate(a),o=function(){return i!==r.getUTCMonth()}}for(;o();)r.setUTCDate(--a),r.setUTCMonth(i);return r},moveYear:function(e,t){return this.moveMonth(e,12*t)},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(!this.picker.is(":visible"))return void(27===e.keyCode&&this.show());var t,n,o,r=!1,a=this.focusDate||this.viewDate;switch(e.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;t=37===e.keyCode?-1:1,e.ctrlKey?(n=this.moveYear(this.dates.get(-1)||i(),t),o=this.moveYear(a,t),this._trigger("changeYear",this.viewDate)):e.shiftKey?(n=this.moveMonth(this.dates.get(-1)||i(),t),o=this.moveMonth(a,t),this._trigger("changeMonth",this.viewDate)):(n=new Date(this.dates.get(-1)||i()),n.setUTCDate(n.getUTCDate()+t),o=new Date(a),o.setUTCDate(a.getUTCDate()+t)),this.dateWithinRange(o)&&(this.focusDate=this.viewDate=o,this.setValue(),this.fill(),e.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;t=38===e.keyCode?-1:1,e.ctrlKey?(n=this.moveYear(this.dates.get(-1)||i(),t),o=this.moveYear(a,t),this._trigger("changeYear",this.viewDate)):e.shiftKey?(n=this.moveMonth(this.dates.get(-1)||i(),t),o=this.moveMonth(a,t),this._trigger("changeMonth",this.viewDate)):(n=new Date(this.dates.get(-1)||i()),n.setUTCDate(n.getUTCDate()+7*t),o=new Date(a),o.setUTCDate(a.getUTCDate()+7*t)),this.dateWithinRange(o)&&(this.focusDate=this.viewDate=o,this.setValue(),this.fill(),e.preventDefault());break;case 32:break;case 13:a=this.focusDate||this.dates.get(-1)||this.viewDate,
this.o.keyboardNavigation&&(this._toggle_multidate(a),r=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(e.preventDefault(),"function"==typeof e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(r){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var s;this.isInput?s=this.element:this.component&&(s=this.element.find("input")),s&&s.change()}},showMode:function(e){e&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+e))),this.picker.children("div").hide().filter(".datepicker-"+m.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var c=function(t,n){this.element=e(t),this.inputs=e.map(n.inputs,function(e){return e.jquery?e[0]:e}),delete n.inputs,h.call(e(this.inputs),n).bind("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(t){return e(t).data("datepicker")}),this.updateDates()};c.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.getUTCDate()}),this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,n){n.setRange(t)})},dateUpdated:function(t){if(!this.updating){this.updating=!0;var n=e(t.target).data("datepicker"),i=n.getUTCDate(),o=e.inArray(t.target,this.inputs),r=o-1,a=o+1,s=this.inputs.length;if(-1!==o){if(e.each(this.pickers,function(e,t){t.getUTCDate()||t.setUTCDate(i)}),i<this.dates[r])for(;r>=0&&i<this.dates[r];)this.pickers[r--].setUTCDate(i);else if(i>this.dates[a])for(;s>a&&i>this.dates[a];)this.pickers[a++].setUTCDate(i);this.updateDates(),delete this.updating}}},remove:function(){e.map(this.pickers,function(e){e.remove()}),delete this.element.data().datepicker}};var u=e.fn.datepicker,h=function(n){var i=Array.apply(null,arguments);i.shift();var o;return this.each(function(){var r=e(this),l=r.data("datepicker"),u="object"==typeof n&&n;if(!l){var h=a(this,"date"),g=e.extend({},p,h,u),f=s(g.language),m=e.extend({},p,f,h,u);if(r.hasClass("input-daterange")||m.inputs){var v={inputs:m.inputs||r.find("input").toArray()};r.data("datepicker",l=new c(this,e.extend(m,v)))}else r.data("datepicker",l=new d(this,m))}return"string"==typeof n&&"function"==typeof l[n]&&(o=l[n].apply(l,i),o!==t)?!1:void 0}),o!==t?o:this};e.fn.datepicker=h;var p=e.fn.datepicker.defaults={autoclose:!1,beforeShowDay:e.noop,beforeShowMonth:e.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,container:"body"},g=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=d;var f=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},m={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,m.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,"\x00").split("\x00"),n=e.match(this.validParts);if(!t||!t.length||!n||0===n.length)throw new Error("Invalid date format.");return{separators:t,parts:n}},parseDate:function(i,o,r){function a(){var e=this.slice(0,h[c].length),t=h[c].slice(0,e.length);return e.toLowerCase()===t.toLowerCase()}if(!i)return t;if(i instanceof Date)return i;"string"==typeof o&&(o=m.parseFormat(o));var s,l,c,u=/([\-+]\d+)([dmwy])/,h=i.match(/([\-+]\d+)([dmwy])/g);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i)){for(i=new Date,c=0;c<h.length;c++)switch(s=u.exec(h[c]),l=parseInt(s[1]),s[2]){case"d":i.setUTCDate(i.getUTCDate()+l);break;case"m":i=d.prototype.moveMonth.call(d.prototype,i,l);break;case"w":i.setUTCDate(i.getUTCDate()+7*l);break;case"y":i=d.prototype.moveYear.call(d.prototype,i,l)}return n(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),0,0,0)}h=i&&i.match(this.nonpunctuation)||[],i=new Date;var p,g,v={},b=["yyyy","yy","M","MM","m","mm","d","dd"],y={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){if(isNaN(e))return e;for(t-=1;0>t;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!==t;)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}};y.M=y.MM=y.mm=y.m,y.dd=y.d,i=n(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);var w=o.parts.slice();if(h.length!==w.length&&(w=e(w).filter(function(t,n){return-1!==e.inArray(n,b)}).toArray()),h.length===w.length){var A;for(c=0,A=w.length;A>c;c++){if(p=parseInt(h[c],10),s=w[c],isNaN(p))switch(s){case"MM":g=e(f[r].months).filter(a),p=e.inArray(g[0],f[r].months)+1;break;case"M":g=e(f[r].monthsShort).filter(a),p=e.inArray(g[0],f[r].monthsShort)+1}v[s]=p}var N,_;for(c=0;c<b.length;c++)_=b[c],_ in v&&!isNaN(v[_])&&(N=new Date(i),y[_](N,v[_]),isNaN(N)||(i=N))}return i},formatDate:function(t,n,i){if(!t)return"";"string"==typeof n&&(n=m.parseFormat(n));var o={d:t.getUTCDate(),D:f[i].daysShort[t.getUTCDay()],DD:f[i].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:f[i].monthsShort[t.getUTCMonth()],MM:f[i].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};o.dd=(o.d<10?"0":"")+o.d,o.mm=(o.m<10?"0":"")+o.m,t=[];for(var r=e.extend([],n.separators),a=0,s=n.parts.length;s>=a;a++)r.length&&t.push(r.shift()),t.push(o[n.parts[a]]);return t.join("")},headTemplate:'<thead><tr><th class="prev">&#171;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&#187;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};m.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+m.headTemplate+"<tbody></tbody>"+m.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+"</table></div></div>",e.fn.datepicker.DPGlobal=m,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=u,this},e.fn.datepicker.version="1.4.1",e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var n=e(this);n.data("datepicker")||(t.preventDefault(),h.call(n,"show"))}),e(function(){h.call(e('[data-provide="datepicker-inline"]'))})}(window.jQuery)}.apply(e,arguments)})}(this),define("main/ui_components/forms/controls/datepicker",["backbone","puppetForm","handlebars","main/adk_utils/dateUtils","underscore","moment","jquery","jquery.inputmask","bootstrap-datepicker"],function(e,t,n,i,o,r,a,s,l){"use strict";var d=t.DatepickerControl=t.DefaultInputControl.extend({defaults:{type:"text",label:"",options:{todayBtn:"linked",orientation:"top left",autoclose:!0,todayHighlight:!0,showOnFocus:!1,endDate:"12/31/2099"},extraClasses:[],helpMessage:"",title:"Please enter in a date in the following format, MM/DD/YYYY"},template:n.compile(["{{ui-form-label (add-required-indicator label required) forID=(clean-for-id name) classes=(is-sr-only-label srOnlyLabel)}}",'<div id="{{clean-for-id name}}-calendar-container" class="input-group date">','<span class="input-group-addon" aria-hidden="true" for="{{clean-for-id name}}"><i class="fa fa-calendar"></i></span>','<input type="{{type}}" id="{{clean-for-id name}}" name="{{name}}" maxlength="{{maxlength}}" value="{{value}}" class="{{PuppetForm "controlClassName"}}" id="{{clean-for-id name}}" name="{{name}}" maxlength="{{maxlength}}" value="{{value}}"{{#if title}} title="{{title}}"{{/if}}{{#if placeholder}} placeholder="{{placeholder}}"{{/if}}{{#if disabled}} disabled{{/if}}{{#if required}} required{{/if}}{{#if readonly}} readonly{{/if}}/>',"</div>",'{{#if helpMessage}} <span {{#if (has-puppetForm-prop "helpMessageClassName")}}class="{{PuppetForm "helpMessageClassName"}}"{{/if}}>{{helpMessage}}</span>{{/if}}'].join("\n")),events:o.defaults({"control:required":function(e,t){this.setBooleanFieldOption("required",t,e)},"control:disabled":function(e,t){this.setBooleanFieldOption("disabled",t,e)},"control:title":function(e,t){this.setStringFieldOption("title",t,e)},"control:placeholder":function(e,t){this.setStringFieldOption("placeholder",t,e)},"control:helpMessage":function(e,t){this.setStringFieldOption("helpMessage",t,e)},"click .input-group-addon":function(e){this.$("input").datepicker("show")},"change input":function(e){var n=this.getValueFromDOM();this.currVal===n?e.stopPropagation():(this.currVal=n,t.DefaultInputControl.prototype.onChange.call(this,e))}},t.DefaultInputControl.prototype.events),render:function(){t.DefaultInputControl.prototype.render.apply(this,arguments);var e=this.field.get("options")||{};return e.container="#"+this.field.get("name")+"-calendar-container",e=o.defaults(e,this.defaults.options),i.datepicker(this.$("input"),e),this.currVal=this.getValueFromDOM(),this},getValueFromDOM:function(){var e=this.$el.find("#"+this.field.get("name")).val();return e}});return d}),define("main/ui_components/forms/controls/timepicker",["backbone","puppetForm","handlebars","main/adk_utils/dateUtils","underscore","moment","jquery","jquery.inputmask"],function(e,t,n,i,o,r,a,s){"use strict";var l=t.TimepickerControl=t.DefaultInputControl.extend({defaults:{type:"text",label:"",options:{showMeridian:!1,defaultTime:"current",minuteStep:5},extraClasses:[],helpMessage:""},template:n.compile(["{{ui-form-label (add-required-indicator label required) forID=(clean-for-id name) classes=(is-sr-only-label srOnlyLabel)}}",'<div class="input-group bootstrap-timepicker">','<span class="input-group-addon border-top-left-radius" aria-hidden="true"><i class="fa fa-clock-o"></i></span>','<input type="{{type}}" id="{{clean-for-id name}}" name="{{name}}" value="{{value}}" class="{{PuppetForm "controlClassName"}}"{{#if title}} title="{{title}}"{{/if}}{{#if placeholder}} placeholder="{{placeholder}}"{{/if}}{{#if disabled}} disabled{{/if}}{{#if required}} required{{/if}}{{#if readonly}} readonly{{/if}}/>',"</div>",'{{#if helpMessage}} <span {{#if (has-puppetForm-prop "helpMessageClassName")}}class="{{PuppetForm "helpMessageClassName"}}"{{/if}}>{{helpMessage}}</span>{{/if}}'].join("\n")),getFormattedValue:function(){var e=o.defaults(this.field.toJSON(),this.defaults),t=this.model.toJSON(),n=e.name.split("."),i=n.shift(),r=n.join("."),a=this.keyPathAccessor(t[i],r);return this.formatter.fromRaw(a,this.model)},events:o.defaults({"control:required":function(e,t){this.setBooleanFieldOption("required",t,e)},"control:disabled":function(e,t){this.setBooleanFieldOption("disabled",t,e)},"control:title":function(e,t){this.setStringFieldOption("title",t,e)},"control:placeholder":function(e,t){this.setStringFieldOption("placeholder",t,e)},"control:helpMessage":function(e,t){this.setStringFieldOption("helpMessage",t,e)},"change input":function(e){var n=this.getValueFromDOM();this.currVal===n?e.stopPropagation():(this.currVal=n,t.DefaultInputControl.prototype.onChange.call(this,e))}},t.DefaultInputControl.prototype.events),render:function(){t.DefaultInputControl.prototype.render.apply(this,arguments);var e=this.field.get("options")||{};e=o.defaults(e,this.defaults.options);var n=this.getFormattedValue();return n||(e.setTime=n),this.currVal=n,this.$("input").inputmask("h:s",{placeholder:"HH:MM"}),this.$("input").timepicker(e),this.currVal=this.getValueFromDOM(),this},getValueFromDOM:function(){var e=this.$el.find("#"+this.field.get("name")).val();return e}});return l}),define("main/ui_components/forms/controls/commentBox",["backbone","puppetForm","handlebars","api/UserService","moment"],function(e,t,n,i,o){"use strict";var r=e.Marionette.ItemView.extend({template:n.compile(['<div class="table-cell"><span>{{comment}} {{timeStamp}} - {{name}}</span></div>','<div class="table-cell pixel-width-55 text-right">',"{{#if userIsAllowedEditDelete}}<span>",'<button type="button" class="comment-edit-button btn btn-icon right-padding-xs left-padding-xs" title="Press enter to edit comment: {{comment}} {{timeStamp}} - {{name}}"><i class="fa fa-pencil"></i></button>','<button type="button" class="comment-delete-button button btn btn-icon right-padding-xs left-padding-xs" title="Press enter to delete this comment"><i class="fa fa-trash"></i></button>',"</span>{{/if}}","</div>"].join("\n")),ui:{CommentEditButton:".comment-edit-button",CommentDeleteButton:".comment-delete-button"},events:{"click @ui.CommentEditButton":"queueEditComment","click @ui.CommentDeleteButton":"removeComment"},initialize:function(e){this.formModel=e.formModel,this.attributeMapping=e.attributeMapping,this.field=e.field,this.commentInputModel=e.commentInputModel},modelEvents:{change:"render"},serializeModel:function(e){return{comment:e.get(this.attributeMapping.comment),author:e.get(this.attributeMapping.author),timeStamp:e.get(this.attributeMapping.timeStamp),name:e.get(this.attributeMapping.author)?e.get(this.attributeMapping.author).name:""}},queueEditComment:function(e){this.triggerMethod("queue:edit:comment")},removeComment:function(e){this.triggerMethod("remove:comment")},className:"table-row",templateHelpers:function(){var e=this;return{userIsAllowedEditDelete:function(){var t=i.getUserSession();return this[e.attributeMapping.author]&&_.isEqual(t.get("duz"),this[e.attributeMapping.author].duz)?!0:!1}}},onDomRefresh:function(){(!_.isNull(this.commentInputModel.get("commentIndex"))&&this._index===this.commentInputModel.get("commentIndex")||_.isNull(this.commentInputModel.get("commentIndex"))&&!this.commentInputModel.get("editMode"))&&this.ui.CommentEditButton.focus()}}),a=e.Marionette.ItemView.extend({template:n.compile(['{{#if editMode}}<div class="col-xs-6">','<button type="button" class="cancel-edit-comment-button btn btn-default btn-block btn-sm" title="Press enter to cancel edit of comment">Cancel</button>',"</div>",'<div class="col-xs-6">','<button type="button" class="edit-comment-button btn btn-default btn-block btn-sm" title="Press enter to save edit of comment">Save</button>',"</div>",'{{else}}<div class="col-xs-12">','<button type="button" class="add-comment-button btn btn-default btn-block btn-sm" title="Press enter to add comment" disabled="disabled">Add Comment</button>',"</div>{{/if}}"].join("\n")),ui:{AddCommentButton:".add-comment-button",EditCommentButton:".edit-comment-button",CancelEditCommentButton:".cancel-edit-comment-button"},events:{"click @ui.AddCommentButton":"addComment","click @ui.EditCommentButton":"editComment","click @ui.CancelEditCommentButton":"cancelEditComment","addbutton:disabled":function(e,t){this.ui.AddCommentButton.attr("disabled",t)}},addComment:function(e){this.triggerMethod("add:comment")},editComment:function(e){this.triggerMethod("edit:comment")},cancelEditComment:function(e){this.triggerMethod("cancel:edit:comment")},modelEvents:{"change:editMode":"render"}}),s=e.Marionette.CollectionView.extend({childView:r,childViewOptions:function(){return{attributeMapping:this.attributeMapping,formModel:this.formModel,field:this.field,commentInputModel:this.commentInputModel}},initialize:function(e){this.attributeMapping=e.attributeMapping,this.formModel=e.formModel,this.field=e.field,this.commentInputModel=e.commentInputModel},className:"body"}),l={attributeMappingDefaults:{comment:"commentString",author:"author",timeStamp:"timeStamp"},className:function(){return t.CommonPrototype.className()+" comment-box bottom-margin-none"},template:n.compile(['<div class="faux-table-container comments-container"><div class="comment-region faux-table all-margin-no top-border"></div></div>','<div class="comment enter-comment-region top-margin-xs">','<div class="enter-comment-input-region col-xs-10"></div>','<div class="enter-comment-button-region col-xs-2"></div>',"</div>"].join("\n")),ui:{CommentRegion:".comment-region",EnterCommentRegion:".enter-comment-region",EnterCommentInputRegion:".enter-comment-input-region",EnterCommentButtonRegion:".enter-comment-button-region"},regions:{CommentRegion:"@ui.CommentRegion",EnterCommentRegion:"@ui.EnterCommentRegion",EnterCommentInputRegion:"@ui.EnterCommentInputRegion",EnterCommentButtonRegion:"@ui.EnterCommentButtonRegion"},events:_.defaults({"input @ui.EnterCommentInputRegion input":function(e){var t=this.$(e.target).val();t.length>0&&0===this.previousInputString.length?this.commentButtonView.$el.trigger("addbutton:disabled",!1):0===t.length&&this.previousInputString.length>t.length&&this.commentButtonView.$el.trigger("addbutton:disabled",!0),this.previousInputString=t}},t.CommonPrototype.events),initialize:function(n){this.formModel=n.formModel||null,this.initOptions(n),this.setAttributeMapping(),this.setFormatter(),this.listenToFieldOptions();var i=this.getComponentInstanceName();this.initCollection("collection"),this.collection=n.collection||this.collection;var o=new t.Field({control:"input",name:"inputString",title:"Please enter in a comment",placeholder:"Add comment",maxlength:60,charCount:!0,label:"Enter a comment",srOnlyLabel:!0}),r=e.Model.extend({defaults:{inputString:"",editMode:!1,commentIndex:null}});this.commentInputModel=new r,this.commentInputView=new t.InputControl({field:o,model:this.commentInputModel}),this.commentButtonView=new a({model:this.commentInputModel,field:this.field}),this.commentCollectionView=new s({collection:this.collection,formModel:this.formModel,attributeMapping:this.attributeMapping,field:this.field,commentInputModel:this.commentInputModel}),this.stopListening(this.model,"change:"+i,this.render),this.model.set(i,this.collection),this.listenTo(this.model,"change:"+i,this.render),this.listenToFieldName();var l=this;this.listenTo(this.collection,"change add remove",function(){l.model.trigger("change")}),this.previousInputString=""},childEvents:{"queue:edit:comment":function(e){$.fn.focusTextToEnd=function(){this.focus();var e=this.val();return this.val("").val(e),this},this.commentInputModel.set({inputString:e.model.get(this.attributeMapping.comment),editMode:!0,commentIndex:e._index}),this.ui.EnterCommentInputRegion.find("input").trigger("input").focusTextToEnd()},"remove:comment":function(t){var i=this;t.$el.addClass("hidden");var o=new ADK.UI.Alert({title:"Comment Deleted",icon:"fa-exclamation-triangle",messageView:e.Marionette.ItemView.extend({template:n.compile(["<p>You have deleted a comment.</p>"].join("\n"))}),footerView:e.Marionette.ItemView.extend({template:n.compile(['{{ui-button "Restore" type="button" classes="btn-sm btn-default restore-button" title="Press enter to restore."}}','{{ui-button "Okay" type="button" classes="btn-sm btn-primary no-button" title="Press enter to continue."}}'].join("\n")),ui:{NoButton:".no-button",RestoreButton:".restore-button"},events:{"click @ui.RestoreButton":function(){ADK.UI.Alert.hide(),t.$el.removeClass("hidden"),t.ui.CommentEditButton.focus()},"click @ui.NoButton":function(){if(ADK.UI.Alert.hide(),i.commentInputModel.get("editMode")===!0&&i.commentInputModel.set({inputString:i.ui.EnterCommentInputRegion.find("input").val(""),editMode:!1}),i.collection.remove(t.model),_.isUndefined(i.collection.at(t._index)))i.ui.EnterCommentInputRegion.find("input").focus();else{var e=i.CommentCollectionView.children.find(function(e){return e._index===t._index});e&&e.ui.CommentEditButton.focus()}}}})});o.show()},"add:comment":function(e){this.saveComment()},"edit:comment":function(e){this.saveComment()},"cancel:edit:comment":function(e){this.ui.EnterCommentInputRegion.find("input").val("").trigger("input"),this.commentInputModel.set({inputString:this.ui.EnterCommentInputRegion.find("input").val(),editMode:!1});var t=this.commentCollectionView.children.find(function(e){return e._index===this.commentInputModel.get("commentIndex")},this);t&&t.ui.CommentEditButton.focus()}},commonRender:t.CommonPrototype.onRender,onRender:function(){this.commonRender(),this.showChildView("CommentRegion",this.commentCollectionView),this.showChildView("EnterCommentInputRegion",this.commentInputView),this.showChildView("EnterCommentButtonRegion",this.commentButtonView)},saveComment:function(){if(this.commentInputModel.set("inputString",this.ui.EnterCommentInputRegion.find("input").val()),this.commentInputModel.get("inputString").length>0){var t=i.getUserSession(),n={name:t.get("lastname")+","+t.get("firstname"),duz:t.get("duz")},r=this.commentInputModel.get("commentIndex");if(this.commentInputModel.get("editMode")){if(this.commentInputModel.get("editMode")&&this.collection.at(r).get(this.attributeMapping.comment)!=this.commentInputModel.get("inputString")){var a=this.collection.at(r);a.set(this.attributeMapping.comment,this.commentInputModel.get("inputString")),a.set(this.attributeMapping.author,n),a.set(this.attributeMapping.timeStamp,(new o).format("MM/DD/YYYY h:mma"))}}else{var s={};s[this.attributeMapping.comment]=this.commentInputModel.get("inputString"),s[this.attributeMapping.author]=n,s[this.attributeMapping.timeStamp]=(new o).format("MM/DD/YYYY h:mma"),this.commentInputModel.set("commentIndex",this.collection.length),this.collection.add(new e.Model(s))}this.ui.EnterCommentInputRegion.find("input").val("").trigger("input"),this.commentInputModel.set({inputString:this.ui.EnterCommentInputRegion.find("input").val(),editMode:!1})}}},d=t.CommentBoxControl=e.Marionette.LayoutView.extend(_.defaults(l,_.defaults(t.CommonPrototype,t.CommonEventsFunctions)));return d}),define("main/ui_components/forms/controls/nestedCommentBox",["backbone","puppetForm","handlebars","main/ui_components/forms/controls/commentBox"],function(e,t,n){"use strict";var i=e.Marionette.ItemView.extend({template:n.compile(['{{#if comments.models}}<button type="button" class="btn btn-icon all-padding-no show-comments-button" aria-exanded="true" title="Press enter to view comments"><i class="fa fa-file-text"><span class="sr-only">Press enter to expand or collapse the comments for this row</span></i></button>{{else}}<a type="button" href="#" aria-expanded="true"  class="show-comments-button" title="Press enter to add a comment">Add</a>{{/if}}'].join("\n")),initialize:function(e){this.attributeMapping=e.attributeMapping},ui:{ShowCommentsButton:".show-comments-button"},events:{"click @ui.ShowCommentsButton":"toggleComments"},toggleComments:function(e){e.preventDefault(),this.triggerMethod("toggle:comments")},modelEvents:{change:"render"},serializeModel:function(e){var t=e.toJSON(),n={comments:t[this.attributeMapping.commentsCollection]};return n},tagName:"div"}),o=e.Marionette.ItemView.extend({template:n.compile(["{{label}}"].join("\n")),initialize:function(e){this.attributeMapping=e.attributeMapping,this.field=e.field},serializeModel:function(e){var t=e.toJSON(),n={value:t[this.attributeMapping.value],label:t[this.attributeMapping.label]};return n},tagName:"span"}),r=e.Marionette.ItemView.extend({template:n.compile(['<button type="button" class="btn btn-icon all-padding-no remove-panel-button"><i class="fa fa-times-circle"></i><span class="sr-only">Press enter to remove this item.</span></button>'].join("\n")),ui:{RemoveButton:".remove-panel-button"},events:{"click @ui.RemoveButton":function(e){e.preventDefault(),this.triggerMethod("remove:panel")}},className:"right-padding-xs"}),a=e.Marionette.LayoutView.extend({defaults:{additionalColumns:[]},ui:{NCBCommentContainerRegion:".ncb-comment-container-region",NCBShowCommentsButtonRegion:".ncb-show-comment-button-region",NCBDescriptiveTextRegion:".ncb-descriptive-text-region",NCBCommentCollapseContainer:".ncb-comment-collapse-container",NCBRemoveButtonRegion:".ncb-remove-button-region"},regions:{NCBCommentContainerRegion:"@ui.NCBCommentContainerRegion",NCBShowCommentsButtonRegion:"@ui.NCBShowCommentsButtonRegion",NCBDescriptiveTextRegion:"@ui.NCBDescriptiveTextRegion",NCBRemoveButtonRegion:"@ui.NCBRemoveButtonRegion"},template:n.compile(['{{#if value}}<div class="panel-heading">','<div class="panel-title">','<div class="sr-only"><span>This list represents the summary of your selections that contains available options such as adding and viewing comments.</span></div>','<div class="table-cell ncb-descriptive-text-region{{#each itemColumn.columnClasses}} {{this}}{{/each}}"></div>','<div class="table-cell ncb-show-comment-button-region{{#each commentColumn.columnClasses}} {{this}}{{/each}}"></div>','{{#each additionalColumns}}<div class="table-cell {{clean-for-id columnTitle}}-region{{#each columnClasses}} {{this}}{{/each}}"></div>{{/each}}<div class="table-cell ncb-remove-button-region pixel-width-10"></div>',"</div>","</div>",'<div class="ncb-comment-collapse-container panel-collapse collapse" role="tabpanel" aria-expanded="true"><div class="ncb-comment-container-region panel-body top-padding-no bottom-padding-no"></div></div>{{/if}}'].join("\n")),className:"panel panel-default",attributes:{role:"tab"},childEvents:{"toggle:comments":function(e){var t=this;this.ui.NCBCommentCollapseContainer.one("shown.bs.collapse",function(){0===e.model.get(t.attributeMapping.commentsCollection).length&&(console.log("comments collection is empty!"),t.commentView.$el.find("input").focus())}),this.ui.NCBCommentCollapseContainer.one("hidden.bs.collapse",function(){t.ui.NCBCommentCollapseContainer.off("shown.bs.collapse")}),this.toggleCommentsContainer()},"remove:panel":function(e){this.model.set(this.attributeMapping.value,!1),this.formModel.trigger("change"),this.parent.setFocusNextRow(this)}},toggleCommentsContainer:function(){this.ui.NCBShowCommentsButtonRegion.find(".show-comments-button").focus(),this.ui.NCBCommentCollapseContainer.collapse("toggle")},initialize:function(n){this.parent=n.parent,this.formModel=n.formModel,this.attributeMapping=n.attributeMapping,this.field=n.field,this.commentsCollection=this.model.get(this.attributeMapping.commentsCollection)||new e.Collection,this.commentView=new t.CommentBoxControl({attributeMapping:this.attributeMapping,collection:this.commentsCollection,formModel:this.formModel,field:this.field,model:this.model}),this.showCommentButtonView=new i({attributeMapping:this.attributeMapping,model:this.model}),this.descriptiveTextView=new o({attributeMapping:this.attributeMapping,model:this.model}),_.each(this.field.get("additionalColumns"),function(e){e.columnTitle=e.columnTitle||"";var n=e.columnTitle.replace(/[^A-Z0-9]+/gi,"-");this.addRegion(n+"Region","."+n+"-region");var i=t.resolveNameToClass(e.control,"Control");this[n+"View"]=new i({field:new t.Field(e),model:this.model})},this),this.removeButtonView=new r;var a=this;this.listenTo(this.commentsCollection,"change add remove",function(){a.model.trigger("change")})},onRender:function(){this.model.get(this.attributeMapping.value)&&(this.showChildView("NCBCommentContainerRegion",this.commentView),this.showChildView("NCBShowCommentsButtonRegion",this.showCommentButtonView),this.showChildView("NCBDescriptiveTextRegion",this.descriptiveTextView),_.each(this.field.get("additionalColumns"),function(e){e.columnTitle=e.columnTitle||"";var t=e.columnTitle.replace(/[^A-Z0-9]+/gi,"-");this.showChildView(t+"Region",this[t+"View"])},this),this.showChildView("NCBRemoveButtonRegion",this.removeButtonView))},serializeModel:function(e){var t=e.toJSON(),n={itemColumn:this.field.get(this.attributeMapping.itemColumn),commentColumn:this.field.get(this.attributeMapping.commentColumn),additionalColumns:this.field.get(this.attributeMapping.additionalColumns),unique:t[this.attributeMapping.unique],value:t[this.attributeMapping.value],label:t[this.attributeMapping.label],comments:t[this.attributeMapping.commentsCollection]};return n},onDestroy:function(){this.ui.NCBCommentCollapseContainer.off()}}),s=e.Marionette.CollectionView.extend({childView:a,addChild:function(e,t,n){e.get(this.attributeMapping.value)&&_.isBoolean(e.get(this.attributeMapping.value))&&Marionette.CollectionView.prototype.addChild.apply(this,arguments)},setFocusNextRow:function(e){if(_.isUndefined(e._index)||e._index!==this.children.length){if(!_.isUndefined(e._index)&&this.children.length>e._index){var t=this.children.findByIndex(e._index);t.ui.NCBRemoveButtonRegion.find("button").focus()}}else this.parent.setFocusNextRow(this)},childViewOptions:function(){return{attributeMapping:this.attributeMapping,formModel:this.formModel,field:this.field,parent:this}},buildCollection:function(e,t){var n=this;return _.each(e.models,function(e){e._changing&&(e.attributes[n.attributeMapping.value]?t.add(e):t.remove(e))}),t},initialize:function(t){this.parent=t.parent,this.collection=new e.Collection,this.formModel=t.formModel,this.attributeMapping=t.attributeMapping,this.field=t.field,this.faux_collection=this.model.get(this.attributeMapping.collection);var n=this;_.each(this.faux_collection.models,function(e){e.attributes[n.attributeMapping.value]&&n.collection.add(e)}),this.listenTo(this.faux_collection,"change",function(){n.model.trigger("change")}),this.listenTo(this.faux_collection,"change:"+this.attributeMapping.value,function(){this.buildCollection(this.faux_collection,this.collection)})},className:"panel-container"}),l={ui:{NCBBodyRegion:".ncb-body-region"},className:function(){return t.CommonPrototype.className()+" ftar-container"},template:n.compile(['<div class="sr-only display-no"><span>You are on an accordion heading. The accordion is collapsed. To expanded the accordion press enter on the accordion heading.</span></div>','<div class="main-header ncb-header-region">','<div class="table-cell{{#each itemColumn.columnClasses}} {{this}}{{/each}}"><span>{{itemColumn.columnTitle}}</span></div>','<div class="table-cell{{#each commentColumn.columnClasses}} {{this}}{{/each}}"><span>{{commentColumn.columnTitle}}</span></div>','{{#each additionalColumns}}<div class="table-cell{{#each columnClasses}} {{this}}{{/each}}"><span>{{columnTitle}}</span></div>{{/each}}','<div class="table-cell pixel-width-10"></div>',"</div>",'<div class="panel-group accordion-container small ftar ncb-body-region" aria-multiselectable="true" role="tablist"></div>'].join("\n")),attributeMappingDefaults:{unique:"id",value:"value",label:"label",collection:"listItems",commentsCollection:"comments",comment:"comment",author:"author",timeStamp:"timeStamp",additionalColumns:"additionalColumns",itemColumn:"itemColumn",commentColumn:"commentColumn"},childView:s,childViewOptions:function(){return{attributeMapping:this.attributeMapping,formModel:this.model,field:this.field,parent:this}},childViewContainer:"@ui.NCBBodyRegion",getNonEmptyChildrenCount:function(e){var t=0,n=0;return this.children&&this.children.each(function(i){i.nonEmptyIndex=null,i.children.length>0?(i.nonEmptyIndex=t,t++,n++):i==e&&(i.nonEmptyIndex=t,t++)}),n},unsetNonEmptyIndex:function(){this.children&&this.children.each(function(e){e.nonEmptyIndex=null})},setFocusNextRow:function(e){var t=this.getNonEmptyChildrenCount(e);if(t>0){var n;if(t>e.nonEmptyIndex+1&&e.children.length>0||t>e.nonEmptyIndex&&0===e.children.length){var i=this.children.find(function(t){return t.nonEmptyIndex==e.nonEmptyIndex+1});n=i.children.findByIndex(0)}else if(0===e.children.length){
var o=this.children.find(function(t){return t.nonEmptyIndex==e.nonEmptyIndex-1});n=o.children.findByIndex(o.children.length-1)}else n=e.children.findByIndex(e.children.length-1);n&&n.ui.NCBRemoveButtonRegion.find("button").focus()}else console.log("All children should be empty!");this.unsetNonEmptyIndex()},initialize:function(e){this.initOptions(e),this.setAttributeMapping(),this.setFormatter(),this.setExtraClasses(),this.initCollection("collection"),this.listenToFieldName();var t=this.getComponentInstanceName();this.stopListening(this.model,"change:"+t,this.render),this.model.set(t,this.collection),this.listenTo(this.model,"change:"+t,this.render);var n=this;this.listenTo(this.collection,"change",function(){n.model.trigger("change")})}},d=t.NestedCommentBoxControl=e.Marionette.CompositeView.extend(_.defaults(l,_.defaults(t.CommonPrototype,t.CommonEventsFunctions)));return d}),define("main/ui_components/forms/controls/alertBanner",["backbone","puppetForm","handlebars"],function(e,t,n){"use strict";var i={requiredFields:["name"],template:n.compile(["{{#if value}}",'<div class="alert alert-{{#if type}}{{type}}{{else}}info{{/if}}{{#if dismissible}} alert-dismissible{{/if}} alert-user" role="alert">','<div class="alert-content">','{{#if icon}}<p><strong>{{else}}{{#if title}}<p><strong>{{/if}}{{/if}}{{#if icon}}<i class="fa {{icon}}"></i>{{/if}}{{#if title}} {{title}}{{/if}}{{#if icon}}</strong>{{#if title}}</p>{{/if}}{{else}}{{#if title}}</strong></p>{{/if}}{{/if}}{{#if title}}<p>{{/if}} {{value}}</p></div>','{{#if dismissible}}<button type="button" class="close" title="To close this alert, press enter">','<span aria-hidden="true">&times;</span>',"</button>{{/if}}","</div>{{/if}}"].join("\n")),events:{"click button.close":function(e){e.preventDefault(),this.model.unset(this.field.get("name"))},"control:message":function(e,t){e.preventDefault(),e.stopPropagation(),_.isString(t)&&this.model.set(this.field.get("name"),t)},"control:title":function(e,t){e.preventDefault(),this.setStringFieldOption("title",t,e)},"control:type":function(e,t){e.preventDefault(),this.setStringFieldOption("type",t,e)},"control:icon":function(e,t){e.preventDefault(),this.setStringFieldOption("icon",t,e)},"control:dismissible":function(e,t){e.preventDefault(),this.setBooleanFieldOption("dismissible",t,e)}}},o=t.AlertBannerControl=t.Control.extend(i);return o}),!function(){"use strict";function e(e){return e.split("").reverse().join("")}function t(e,t){return e.substring(0,t.length)===t}function n(e,t){return e.slice(-1*t.length)===t}function i(e,t,n){if((e[t]||e[n])&&e[t]===e[n])throw new Error(t)}function o(e){return"number"==typeof e&&isFinite(e)}function r(e,t){var n=Math.pow(10,t);return(Math.round(e*n)/n).toFixed(t)}function a(t,n,i,a,s,l,d,c,u,h,p,g){var f,m,v,b=g,y="",w="";return l&&(g=l(g)),o(g)?(t!==!1&&0===parseFloat(g.toFixed(t))&&(g=0),0>g&&(f=!0,g=Math.abs(g)),t!==!1&&(g=r(g,t)),g=g.toString(),-1!==g.indexOf(".")?(m=g.split("."),v=m[0],i&&(y=i+m[1])):v=g,n&&(v=e(v).match(/.{1,3}/g),v=e(v.join(e(n)))),f&&c&&(w+=c),a&&(w+=a),f&&u&&(w+=u),w+=v,w+=y,s&&(w+=s),h&&(w=h(w,b)),w):!1}function s(e,i,r,a,s,l,d,c,u,h,p,g){var f,m="";return p&&(g=p(g)),g&&"string"==typeof g?(c&&t(g,c)&&(g=g.replace(c,""),f=!0),a&&t(g,a)&&(g=g.replace(a,"")),u&&t(g,u)&&(g=g.replace(u,""),f=!0),s&&n(g,s)&&(g=g.slice(0,-1*s.length)),i&&(g=g.split(i).join("")),r&&(g=g.replace(r,".")),f&&(m+="-"),m+=g,m=m.replace(/[^0-9\.\-.]/g,""),""===m?!1:(m=Number(m),d&&(m=d(m)),o(m)?m:!1)):!1}function l(e){var t,n,o,r={};for(t=0;t<u.length;t+=1)if(n=u[t],o=e[n],void 0===o)r[n]="negative"!==n||r.negativeBefore?"mark"===n&&"."!==r.thousand?".":!1:"-";else if("decimals"===n){if(!(o>=0&&8>o))throw new Error(n);r[n]=o}else if("encoder"===n||"decoder"===n||"edit"===n||"undo"===n){if("function"!=typeof o)throw new Error(n);r[n]=o}else{if("string"!=typeof o)throw new Error(n);r[n]=o}return i(r,"mark","thousand"),i(r,"prefix","negative"),i(r,"prefix","negativeBefore"),r}function d(e,t,n){var i,o=[];for(i=0;i<u.length;i+=1)o.push(e[u[i]]);return o.push(n),t.apply("",o)}function c(e){return this instanceof c?void("object"==typeof e&&(e=l(e),this.to=function(t){return d(e,a,t)},this.from=function(t){return d(e,s,t)})):new c(e)}var u=["decimals","thousand","mark","prefix","postfix","encoder","decoder","negativeBefore","negative","edit","undo"];window.wNumb=c}(),function(e){"use strict";function t(t){return t instanceof e||e.zepto&&e.zepto.isZ(t)}function n(t,n){return"string"==typeof t&&0===t.indexOf("-inline-")?(this.method=n||"html",this.target=this.el=e(t.replace("-inline-","")||"<div/>"),!0):void 0}function i(t){if("string"==typeof t&&0!==t.indexOf("-")){this.method="val";var n=document.createElement("input");return n.name=t,n.type="hidden",this.target=this.el=e(n),!0}}function o(e){return"function"==typeof e?(this.target=!1,this.method=e,!0):void 0}function r(e,n){return t(e)&&!n?(e.is("input, select, textarea")?(this.method="val",this.target=e.on("change.liblink",this.changeHandler)):(this.target=e,this.method="html"),!0):void 0}function a(e,n){return t(e)&&("function"==typeof n||"string"==typeof n&&e[n])?(this.method=n,this.target=e,!0):void 0}function s(t,n,i){var o=this,r=!1;if(this.changeHandler=function(t){var n=o.formatInstance.from(e(this).val());return n===!1||isNaN(n)?(e(this).val(o.lastSetValue),!1):void o.changeHandlerMethod.call("",t,n)},this.el=!1,this.formatInstance=i,e.each(c,function(e,i){return r=i.call(o,t,n),!r}),!r)throw new RangeError("(Link) Invalid Link.")}function l(e){this.items=[],this.elements=[],this.origin=e}function d(t,n,i,o){0===t&&(t=this.LinkDefaultFlag),this.linkAPI||(this.linkAPI={}),this.linkAPI[t]||(this.linkAPI[t]=new l(this));var r=new s(n,i,o||this.LinkDefaultFormatter);r.target||(r.target=e(this)),r.changeHandlerMethod=this.LinkConfirm(t,r.el),this.linkAPI[t].push(r,r.el),this.LinkUpdate(t)}var c=[n,i,o,r,a];s.prototype.set=function(e){var t=Array.prototype.slice.call(arguments),n=t.slice(1);this.lastSetValue=this.formatInstance.to(e),n.unshift(this.lastSetValue),("function"==typeof this.method?this.method:this.target[this.method]).apply(this.target,n)},l.prototype.push=function(e,t){this.items.push(e),t&&this.elements.push(t)},l.prototype.reconfirm=function(e){var t;for(t=0;t<this.elements.length;t+=1)this.origin.LinkConfirm(e,this.elements[t])},l.prototype.remove=function(){var e;for(e=0;e<this.items.length;e+=1)this.items[e].target.off(".liblink");for(e=0;e<this.elements.length;e+=1)this.elements[e].remove()},l.prototype.change=function(e){if(this.origin.LinkIsEmitting)return!1;this.origin.LinkIsEmitting=!0;var t,n=Array.prototype.slice.call(arguments,1);for(n.unshift(e),t=0;t<this.items.length;t+=1)this.items[t].set.apply(this.items[t],n);this.origin.LinkIsEmitting=!1},e.fn.Link=function(t){var n=this;if(t===!1)return n.each(function(){this.linkAPI&&(e.map(this.linkAPI,function(e){e.remove()}),delete this.linkAPI)});if(void 0===t)t=0;else if("string"!=typeof t)throw new Error("Flag must be string.");return{to:function(e,i,o){return n.each(function(){d.call(this,t,e,i,o)})}}}}(window.jQuery||window.Zepto),function(e){"use strict";function t(t){return e.grep(t,function(n,i){return i===e.inArray(n,t)})}function n(e,t){return Math.round(e/t)*t}function i(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function o(e){var t=Math.pow(10,7);return Number((Math.round(e*t)/t).toFixed(7))}function r(e,t,n){e.addClass(t),setTimeout(function(){e.removeClass(t)},n)}function a(e){return Math.max(Math.min(e,100),0)}function s(t){return e.isArray(t)?t:[t]}function l(e){var t=e.split(".");return t.length>1?t[1].length:0}function d(e,t){return 100/(t-e)}function c(e,t){return 100*t/(e[1]-e[0])}function u(e,t){return c(e,e[0]<0?t+Math.abs(e[0]):t-e[0])}function h(e,t){return t*(e[1]-e[0])/100+e[0]}function p(e,t){for(var n=1;e>=t[n];)n+=1;return n}function g(e,t,n){if(n>=e.slice(-1)[0])return 100;var i,o,r,a,s=p(n,e);return i=e[s-1],o=e[s],r=t[s-1],a=t[s],r+u([i,o],n)/d(r,a)}function f(e,t,n){if(n>=100)return e.slice(-1)[0];var i,o,r,a,s=p(n,t);return i=e[s-1],o=e[s],r=t[s-1],a=t[s],h([i,o],(n-r)*d(r,a))}function m(e,t,i,o){if(100===o)return o;var r,a,s=p(o,e);return i?(r=e[s-1],a=e[s],o-r>(a-r)/2?a:r):t[s-1]?e[s-1]+n(o-e[s-1],t[s-1]):o}function v(e,t,n){var o;if("number"==typeof t&&(t=[t]),"[object Array]"!==Object.prototype.toString.call(t))throw new Error("noUiSlider: 'range' contains invalid value.");if(o="min"===e?0:"max"===e?100:parseFloat(e),!i(o)||!i(t[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");n.xPct.push(o),n.xVal.push(t[0]),o?n.xSteps.push(isNaN(t[1])?!1:t[1]):isNaN(t[1])||(n.xSteps[0]=t[1])}function b(e,t,n){return t?void(n.xSteps[e]=c([n.xVal[e],n.xVal[e+1]],t)/d(n.xPct[e],n.xPct[e+1])):!0}function y(e,t,n,i){this.xPct=[],this.xVal=[],this.xSteps=[i||!1],this.xNumSteps=[!1],this.snap=t,this.direction=n;var o,r=[];for(o in e)e.hasOwnProperty(o)&&r.push([e[o],o]);for(r.sort(function(e,t){return e[0]-t[0]}),o=0;o<r.length;o++)v(r[o][1],r[o][0],this);for(this.xNumSteps=this.xSteps.slice(0),o=0;o<this.xNumSteps.length;o++)b(o,this.xNumSteps[o],this)}function w(e,t){if(!i(t))throw new Error("noUiSlider: 'step' is not numeric.");e.singleStep=t}function A(t,n){if("object"!=typeof n||e.isArray(n))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===n.min||void 0===n.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");t.spectrum=new y(n,t.snap,t.dir,t.singleStep)}function N(t,n){if(n=s(n),!e.isArray(n)||!n.length||n.length>2)throw new Error("noUiSlider: 'start' option is incorrect.");t.handles=n.length,t.start=n}function _(e,t){if(e.snap=t,"boolean"!=typeof t)throw new Error("noUiSlider: 'snap' option must be a boolean.")}function C(e,t){if(e.animate=t,"boolean"!=typeof t)throw new Error("noUiSlider: 'animate' option must be a boolean.")}function x(e,t){if("lower"===t&&1===e.handles)e.connect=1;else if("upper"===t&&1===e.handles)e.connect=2;else if(t===!0&&2===e.handles)e.connect=3;else{if(t!==!1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");e.connect=0}}function S(e,t){switch(t){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function T(e,t){if(!i(t))throw new Error("noUiSlider: 'margin' option must be numeric.");if(e.margin=e.spectrum.getMargin(t),!e.margin)throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.")}function k(e,t){if(!i(t))throw new Error("noUiSlider: 'limit' option must be numeric.");if(e.limit=e.spectrum.getMargin(t),!e.limit)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders.")}function $(e,t){switch(t){case"ltr":e.dir=0;break;case"rtl":e.dir=1,e.connect=[0,2,1,3][e.connect];break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function D(e,t){if("string"!=typeof t)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var n=t.indexOf("tap")>=0,i=t.indexOf("drag")>=0,o=t.indexOf("fixed")>=0,r=t.indexOf("snap")>=0;e.events={tap:n||r,drag:i,fixed:o,snap:r}}function M(e,t){if(e.format=t,"function"==typeof t.to&&"function"==typeof t.from)return!0;throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}function E(t){var n,i={margin:0,limit:0,animate:!0,format:J};return n={step:{r:!1,t:w},start:{r:!0,t:N},connect:{r:!0,t:x},direction:{r:!0,t:$},snap:{r:!1,t:_},animate:{r:!1,t:C},range:{r:!0,t:A},orientation:{r:!1,t:S},margin:{r:!1,t:T},limit:{r:!1,t:k},behaviour:{r:!0,t:D},format:{r:!1,t:M}},t=e.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},t),e.each(n,function(e,n){if(void 0===t[e]){if(n.r)throw new Error("noUiSlider: '"+e+"' is required.");return!0}n.t(i,t[e])}),i.style=i.ort?"top":"left",i}function P(e,t,n){var i=e+t[0],o=e+t[1];return n?(0>i&&(o+=Math.abs(i)),o>100&&(i-=o-100),[a(i),a(o)]):[i,o]}function I(e){e.preventDefault();var t,n,i=0===e.type.indexOf("touch"),o=0===e.type.indexOf("mouse"),r=0===e.type.indexOf("pointer"),a=e;return 0===e.type.indexOf("MSPointer")&&(r=!0),e.originalEvent&&(e=e.originalEvent),i&&(t=e.changedTouches[0].pageX,n=e.changedTouches[0].pageY),(o||r)&&(r||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),t=e.clientX+window.pageXOffset,n=e.clientY+window.pageYOffset),a.points=[t,n],a.cursor=o,a}function O(t,n){var i=e("<div><div/></div>").addClass(X[2]),o=["-lower","-upper"];return t&&o.reverse(),i.children().addClass(X[3]+" "+X[3]+o[n]),i}function R(e,t,n){switch(e){case 1:t.addClass(X[7]),n[0].addClass(X[6]);break;case 3:n[1].addClass(X[6]);case 2:n[0].addClass(X[7]);case 0:t.addClass(X[6])}}function F(e,t,n){var i,o=[];for(i=0;e>i;i+=1)o.push(O(t,i).appendTo(n));return o}function V(t,n,i){return i.addClass([X[0],X[8+t],X[4+n]].join(" ")),e("<div/>").appendTo(i).addClass(X[1])}function L(t,n,i){function o(){return k[["width","height"][n.ort]]()}function d(e){var t,n=[D.val()];for(t=0;t<e.length;t+=1)D.trigger(e[t],n)}function c(e){return 1===e.length?e[0]:n.dir?e.reverse():e}function u(e){return function(t,n){D.val([e?null:n,e?n:null],!0)}}function h(t){var n=e.inArray(t,L);D[0].linkAPI&&D[0].linkAPI[t]&&D[0].linkAPI[t].change(O[n],$[n].children(),D)}function p(t,i){var o=e.inArray(t,L);return i&&i.appendTo($[o].children()),n.dir&&n.handles>1&&(o=1===o?0:1),u(o)}function g(){var e,t;for(e=0;e<L.length;e+=1)this.linkAPI&&this.linkAPI[t=L[e]]&&this.linkAPI[t].reconfirm(t)}function f(e,t,i,o){return e=e.replace(/\s/g,W+" ")+W,t.on(e,function(e){return D.attr("disabled")?!1:D.hasClass(X[14])?!1:(e=I(e),e.calcPoint=e.points[n.ort],void i(e,o))})}function m(e,t){var n,i=t.handles||$,r=!1,a=100*(e.calcPoint-t.start)/o(),s=i[0][0]!==$[0][0]?1:0;n=P(a,t.positions,i.length>1),r=A(i[0],n[s],1===i.length),i.length>1&&(r=A(i[1],n[s?0:1],!1)||r),r&&d(["slide"])}function v(t){e("."+X[15]).removeClass(X[15]),t.cursor&&e("body").css("cursor","").off(W),j.off(W),D.removeClass(X[12]),d(["set","change"])}function b(t,n){1===n.handles.length&&n.handles[0].children().addClass(X[15]),t.stopPropagation(),f(K.move,j,m,{start:t.calcPoint,handles:n.handles,positions:[M[0],M[$.length-1]]}),f(K.end,j,v,null),t.cursor&&(e("body").css("cursor",e(t.target).css("cursor")),$.length>1&&D.addClass(X[12]),e("body").on("selectstart"+W,!1))}function y(t){var i,a=t.calcPoint,s=0;t.stopPropagation(),e.each($,function(){s+=this.offset()[n.style]}),s=s/2>a||1===$.length?0:1,a-=k.offset()[n.style],i=100*a/o(),n.events.snap||r(D,X[14],300),A($[s],i),d(["slide","set","change"]),n.events.snap&&b(t,{handles:[$[s]]})}function w(e){var t,n;if(!e.fixed)for(t=0;t<$.length;t+=1)f(K.start,$[t].children(),b,{handles:[$[t]]});e.tap&&f(K.start,k,y,{handles:$}),e.drag&&(n=k.find("."+X[7]).addClass(X[10]),e.fixed&&(n=n.add(k.children().not(n).children())),f(K.start,n,b,{handles:$}))}function A(e,t,i){var o=e[0]!==$[0][0]?1:0,r=M[0]+n.margin,s=M[1]-n.margin,l=M[0]+n.limit,d=M[1]-n.limit;return $.length>1&&(t=o?Math.max(t,r):Math.min(t,s)),i!==!1&&n.limit&&$.length>1&&(t=o?Math.min(t,l):Math.max(t,d)),t=E.getStep(t),t=a(parseFloat(t.toFixed(7))),t===M[o]?!1:(e.css(n.style,t+"%"),e.is(":first-child")&&e.toggleClass(X[17],t>50),M[o]=t,O[o]=E.fromStepping(t),h(L[o]),!0)}function N(e,t){var i,o,r;for(n.limit&&(e+=1),i=0;e>i;i+=1)o=i%2,r=t[o],null!==r&&r!==!1&&("number"==typeof r&&(r=String(r)),r=n.format.from(r),(r===!1||isNaN(r)||A($[o],E.toStepping(r),i===3-n.dir)===!1)&&h(L[o]))}function _(e){if(D[0].LinkIsEmitting)return this;var t,i=s(e);return n.dir&&n.handles>1&&i.reverse(),n.animate&&-1!==M[0]&&r(D,X[14],300),t=$.length>1?3:1,1===i.length&&(t=1),N(t,i),d(["set"]),this}function C(){var e,t=[];for(e=0;e<n.handles;e+=1)t[e]=n.format.to(O[e]);return c(t)}function x(){return e(this).off(W).removeClass(X.join(" ")).empty(),delete this.LinkUpdate,delete this.LinkConfirm,delete this.LinkDefaultFormatter,delete this.LinkDefaultFlag,delete this.reappend,delete this.vGet,delete this.vSet,delete this.getCurrentStep,delete this.getInfo,delete this.destroy,i}function S(){var t=e.map(M,function(e,t){var n=E.getApplicableStep(e),i=l(String(n[2])),o=O[t],r=100===e?null:n[2],a=Number((o-n[2]).toFixed(i)),s=0===e?null:a>=n[1]?n[2]:n[0]||!1;return[[s,r]]});return c(t)}function T(){return i}var k,$,D=e(t),M=[-1,-1],E=n.spectrum,O=[],L=["lower","upper"].slice(0,n.handles);if(n.dir&&L.reverse(),t.LinkUpdate=h,t.LinkConfirm=p,t.LinkDefaultFormatter=n.format,t.LinkDefaultFlag="lower",t.reappend=g,D.hasClass(X[0]))throw new Error("Slider was already initialized.");k=V(n.dir,n.ort,D),$=F(n.handles,n.dir,k),R(n.connect,D,$),w(n.events),t.vSet=_,t.vGet=C,t.destroy=x,t.getCurrentStep=S,t.getOriginalOptions=T,t.getInfo=function(){return[E,n.style,n.ort]},D.val(n.start)}function U(e){var t=E(e,this);return this.each(function(){L(this,t,e)})}function H(t){return this.each(function(){if(!this.destroy)return void e(this).noUiSlider(t);var n=e(this).val(),i=this.destroy(),o=e.extend({},i,t);e(this).noUiSlider(o),this.reappend(),i.start===o.start&&e(this).val(n)})}function B(){return this[0][arguments.length?"vSet":"vGet"].apply(this[0],arguments)}function z(t,n,i,o){if("range"===n||"steps"===n)return t.xVal;if("count"===n){var r,a=100/(i-1),s=0;for(i=[];(r=s++*a)<=100;)i.push(r);n="positions"}return"positions"===n?e.map(i,function(e){return t.fromStepping(o?t.getStep(e):e)}):"values"===n?o?e.map(i,function(e){return t.fromStepping(t.getStep(t.toStepping(e)))}):i:void 0}function Y(n,i,o,r){var a=n.direction,s={},l=n.xVal[0],d=n.xVal[n.xVal.length-1],c=!1,u=!1,h=0;return n.direction=0,r=t(r.slice().sort(function(e,t){return e-t})),r[0]!==l&&(r.unshift(l),c=!0),r[r.length-1]!==d&&(r.push(d),u=!0),e.each(r,function(t){var a,l,d,p,g,f,m,v,b,y,w=r[t],A=r[t+1];if("steps"===o&&(a=n.xNumSteps[t]),a||(a=A-w),w!==!1&&void 0!==A)for(l=w;A>=l;l+=a){for(p=n.toStepping(l),g=p-h,v=g/i,b=Math.round(v),y=g/b,d=1;b>=d;d+=1)f=h+d*y,s[f.toFixed(5)]=["x",0];m=e.inArray(l,r)>-1?1:"steps"===o?2:0,!t&&c&&(m=0),l===A&&u||(s[p.toFixed(5)]=[l,m]),h=p}}),n.direction=a,s}function G(t,n,i,o,r,a){function s(e){return["-normal","-large","-sub"][e]}function l(e,n,i){return'class="'+n+" "+n+"-"+c+" "+n+s(i[1],i[0])+'" style="'+t+": "+e+'%"'}function d(e,t){i&&(e=100-e),t[1]=t[1]&&r?r(t[0],t[1]):t[1],u.append("<div "+l(e,"noUi-marker",t)+"></div>"),t[1]&&u.append("<div "+l(e,"noUi-value",t)+">"+a.to(t[0])+"</div>")}var c=["horizontal","vertical"][n],u=e("<div/>");return u.addClass("noUi-pips noUi-pips-"+c),e.each(o,d),u}var j=e(document),q=e.fn.val,W=".nui",K=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},X=["noUi-target","noUi-base","noUi-origin","noUi-handle","noUi-horizontal","noUi-vertical","noUi-background","noUi-connect","noUi-ltr","noUi-rtl","noUi-dragable","","noUi-state-drag","","noUi-state-tap","noUi-active","","noUi-stacking"];y.prototype.getMargin=function(e){return 2===this.xPct.length?c(this.xVal,e):!1},y.prototype.toStepping=function(e){return e=g(this.xVal,this.xPct,e),this.direction&&(e=100-e),e},y.prototype.fromStepping=function(e){return this.direction&&(e=100-e),o(f(this.xVal,this.xPct,e))},y.prototype.getStep=function(e){return this.direction&&(e=100-e),e=m(this.xPct,this.xSteps,this.snap,e),this.direction&&(e=100-e),e},y.prototype.getApplicableStep=function(e){var t=p(e,this.xPct),n=100===e?2:1;return[this.xNumSteps[t-2],this.xVal[t-n],this.xNumSteps[t-n]]},y.prototype.convert=function(e){return this.getStep(this.toStepping(e))};var J={to:function(e){return e.toFixed(2)},from:Number};e.fn.val=function(t){function n(e){return e.hasClass(X[0])?B:q}if(!arguments.length){var i=e(this[0]);return n(i).call(i)}var o=e.isFunction(t);return this.each(function(i){var r=t,a=e(this);o&&(r=t.call(this,i,a.val())),n(a).call(a,r)})},e.fn.noUiSlider=function(e,t){switch(e){case"step":return this[0].getCurrentStep();case"options":return this[0].getOriginalOptions()}return(t?H:U).call(this,e)},e.fn.noUiSlider_pips=function(t){var n=t.mode,i=t.density||1,o=t.filter||!1,r=t.values||!1,a=t.format||{to:Math.round},s=t.stepped||!1;return this.each(function(){var t=this.getInfo(),l=z(t[0],n,r,s),d=Y(t[0],i,n,l);return e(this).append(G(t[1],t[2],t[0].direction,d,o,a))})}}(window.jQuery||window.Zepto),define("nouislider",function(){}),define("main/ui_components/forms/controls/rangeSlider",["backbone","puppetForm","handlebars","nouislider"],function(e,t,n,i){"use strict";var o={defaults:{type:"number",label:"",sliderTitle:"",maxlength:2,extraClasses:[],min:0,max:10,step:1,density:10,decimals:0,stepPrefix:"",stepPostfix:"",filter:function(e,t){return 1}},requiredFields:["name"],template:n.compile(['{{#if sliderTitle}}{{sliderTitle}}{{/if}}<div id="{{#if id}}{{clean-for-id id}}{{else}}{{clean-for-id name}}{{/if}}" class="range-slider"></div>','<label for="range-slider-input" class="sr-only">{{#if label}}{{label}}{{else}}Enter in the level using the slider or input.{{/if}}</label>','<input type="number" id="range-slider-input" value="{{value}}" name="{{name}}" class="range-value-input form-control input-sm" maxlength="{{maxlength}}" min="{{min}}" max="{{max}}" step="{{step}}" {{#if required}} required{{/if}}/>'].join("\n")),events:_.defaults({"change @ui.RangeSlider":"onChange","change @ui.RangeSliderInput":"onChange","focus @ui.RangeSliderInput":"clearInvalid"},t.CommonPrototype.events),ui:{RangeSlider:".range-slider",RangeSliderInput:".range-value-input"},initialize:function(e){if(this.initOptions(e),this.hasAllRequiredOptionsDefined(),this.setFormatter(),this.listenToFieldName(),this.listenToFieldOptions(),this.setExtraClasses(),((this.field.get("max")||this.defaults.max)-(this.field.get("min")||this.defaults.min))%(this.field.get("step")||this.defaults.step)>0&&this.field.set("step",1),!this.field.get("maxlength")){var t=Math.floor(Math.log(this.field.get("max")||this.defaults.max)/Math.LN10+1);this.field.set("maxlength",t+((this.field.get("decimals")||this.defaults.decimals)>0?(this.field.get("decimals")||this.defaults.decimals)+1:0))}},commonOnRender:t.CommonPrototype.onRender,onRender:function(){this.commonOnRender(),this.initSlider()},initSlider:function(){var e=this.ui.RangeSlider;e.noUiSlider({start:this.serializeModel(this.model).value||0,step:this.field.get("step")||this.defaults.step,range:{min:this.field.get("min")||this.defaults.min,max:this.field.get("max")||this.defaults.max},format:wNumb({decimals:this.field.get("decimals")||0})},this);e.noUiSlider_pips({mode:"steps",density:this.field.get("density")||this.defaults.density,filter:this.field.get("filter")||this.defaults.filter,format:wNumb({decimals:this.field.get("decimals")||this.defaults.decimals,prefix:this.field.get("stepPrefix")||this.defaults.stepPrefix,postfix:this.field.get("stepPostfix")||this.defaults.stepPostfix})}),e.Link("lower").to(this.ui.RangeSliderInput,null,wNumb({decimals:this.field.get("decimals")||this.defaults.decimals}))},className:function(){return t.CommonPrototype.className()+" form-group-slider"}},r=t.RangeSliderControl=t.DefaultInputControl.extend(_.defaults(o,_.defaults(t.CommonPrototype,t.CommonEventsFunctions)));return r}),define("main/ui_components/forms/controls/selectableTable",["backbone","puppetForm","handlebars","main/ui_components/forms/controls/commentBox"],function(e,t,n){"use strict";var i=e.Marionette.ItemView.extend({template:n.compile(['{{#each columns}}<div class="table-cell"><span>{{value}}</span></div>{{/each}}'].join("\n")),tagName:"a",className:"table-row",attributes:{href:"#"},initialize:function(e){this.field=e.field,this.formModel=e.formModel},onRender:function(){this.formModel.get(this.field.get("name"))&&_.isEqual(this.model.attributes,this.formModel.get(this.field.get("name")).attributes)&&this.$el.addClass("active")},serializeModel:function(e){var t=e.toJSON();return{columns:_.map(this.field.get("columns"),function(e){return _.extend(e,{value:t[e.id]})})}},events:{click:"assignModel"},assignModel:function(e){e.preventDefault(),this.formModel.set(this.field.get("name"),this.model),this.trigger("click:table:row",this)}}),o={template:n.compile(['<div class="col-xs-12">','<div id="{{#if id}}{{clean-for-id id}}{{else}}{{clean-for-id name}}{{/if}}" class="faux-table-container">','<div class="faux-table">','<div class="header">','<div class="table-row">','{{#each columns}}<div class="table-cell"><div>{{title}}</div></div>{{/each}}',"</div>","</div>",'<div class="body"></div>',"</div>","</div>","</div>"].join("\n")),ui:{BodyContainer:".faux-table-container .body"},requiredFields:["name","collection","columns"],initialize:function(t){this.initOptions(t),this.hasAllRequiredOptionsDefined(),this.setAttributeMapping(),this.setFormatter(),this.setExtraClasses(),this.field.get("collection")instanceof e.Collection?this.collection=this.field.get("collection")||new e.Collection:this.collection=new e.Collection(this.field.get("collection"))},childView:i,childViewContainer:"@ui.BodyContainer",childViewOptions:function(){return{attributeMapping:this.attributeMapping,field:this.field,formModel:this.model}},onChildviewClickTableRow:function(e){e.$el.hasClass("active")||(this.children.each(function(e){e.$el.removeClass("active")}),e.$el.addClass("active"))}},r=t.SelectableTableControl=e.Marionette.CompositeView.extend(_.defaults(o,_.defaults(t.CommonPrototype,t.CommonEventsFunctions)));return r}),define("main/ui_components/tabs/component",["backbone","marionette","jquery","handlebars"],function(e,t,n,i){"use strict";var o=e.Marionette.ItemView.extend({template:i.compile(['<a href="#{{clean-for-id label}}-tab-panel" aria-controls="{{clean-for-id label}}-tab-panel" data-toggle="tab" role="tab">{{label}}<span class="sr-only">You are currently on a tab. There is content below. Continue to arrow down until it indicates that the content is being read.</span></a>'].join("\n")),tagName:"li",className:function(){return this.model===this.model.collection.at(0)?"active":void 0},attributes:{role:"presentation"}}),r=e.Marionette.LayoutView.extend({template:i.compile(['<span class="sr-only">This is the content for tab 1.</span>',"<div></div>"].join("\n")),className:function(){var e="tab-pane";return this.model===this.model.collection.at(0)?e+" active":e},regions:{PanelView:"div"},attributes:{role:"tabpanel"},initialize:function(){this.View=this.model.get("view"),_.isFunction(this.View.initialize)||(this.View=new this.View)},onRender:function(){this.showChildView("PanelView",this.View);var e=this.model.get("label").replace(/[^A-Z0-9]+/gi,"-");e+="-tab-panel",this.$el.attr("id",e)}}),a=e.Marionette.CollectionView.extend({initialize:function(e){this.collection=e.collection},childView:o,tagName:"ul",className:"nav nav-tabs",attributes:{role:"tablist"}}),s=e.Marionette.CollectionView.extend({initialize:function(e){this.collection=e.collection},childView:r,className:"tab-content"});return e.Marionette.LayoutView.extend({template:i.compile(['<div class="tab-list-container"></div>','<div class="tab-content-container"></div>'].join("\n")),ui:{TabListContainer:".tab-list-container",TabContentContainer:".tab-content-container"},regions:{TabListRegion:"@ui.TabListContainer",TabContentRegion:"@ui.TabContentContainer"},className:"tab-container",initialize:function(e){this.tabOptions=e.tabs},onBeforeShow:function(){this.tabOptions instanceof e.Collection?this.tabCollection=this.tabOptions||new e.Collection:this.tabCollection=new e.Collection(this.tabOptions),this.tabListView=new a({collection:this.tabCollection}),this.tabContentView=new s({collection:this.tabCollection}),this.showChildView("TabListRegion",this.tabListView),this.showChildView("TabContentRegion",this.tabContentView)}})}),define("main/ui_components/forms/controls/tabs",["backbone","puppetForm","handlebars","main/ui_components/tabs/component"],function(e,t,n,i){"use strict";var o={template:n.compile(['<div class="form-tabs-region"></div>'].join("\n")),ui:{FormTabsRegion:".form-tabs-region"},regions:{FormTabsRegion:"@ui.FormTabsRegion"},defaults:{tabs:[],extraClasses:[]},requiredFields:["tabs"],initialize:function(n){this.initOptions(n),this.hasAllRequiredOptionsDefined(),this.setFormatter(),this.listenToFieldName(),this.listenToFieldOptions(),this.setExtraClasses();var i=this.field.get("tabs");i instanceof e.Collection?this.tabs=i||new e.Collection:this.tabs=new e.Collection(i),this.collection=this.tabs,this.collection.bind("change remove add reset",function(){var e=this;this.tabContent=_.map(this.collection.models,function(n){return{label:n.get("title"),view:function(){var i=new t.Field({control:"container",items:n.get("items")});return new t.ContainerControl({field:i,model:e.model,componentList:e.componentList})}()}},this),this.render()},this);var o=this;this.tabContent=_.map(this.collection.models,function(e){return{label:e.get("title"),view:function(){var n=new t.Field({control:"container",items:e.get("items")});return new t.ContainerControl({field:n,model:o.model,componentList:o.componentList})}()}})},commonOnRender:t.CommonPrototype.onRender,onRender:function(){this.commonOnRender(),this.showChildView("FormTabsRegion",new i({tabs:this.tabContent}))},events:_.defaults({},t.CommonPrototype.events,t.CommonContainerEvents.events)},r=t.TabsControl=e.Marionette.LayoutView.extend(_.defaults(o,_.defaults(t.CommonPrototype,t.CommonEventsFunctions,t.CommonContainerEventsFunctions)));return r}),define("main/ui_components/forms/controls/dropdown",["backbone","puppetForm","handlebars"],function(e,t,n){"use strict";var i={defaults:{split:!1,label:"",icon:"",id:"",type:"button",extraClasses:[],items:[]},requiredFields:["split","label","items"],template:n.compile("{{ui-dropdown label split=split icon=icon id=id type=type items=items srOnlyLabel=srOnlyLabel}}"),events:_.defaults({"click a":function(e){e.preventDefault()}},t.CommonPrototype.events)},o=t.DropdownControl=t.Control.extend(i);return o}),define("main/ui_components/forms/component",["puppetForm","handlebars","backbone","underscore","main/ui_components/forms/controls/toggleOptionsChecklist","main/ui_components/forms/controls/collapsibleContainer","main/ui_components/forms/controls/popover","main/ui_components/forms/controls/input","main/ui_components/forms/controls/checklist","main/ui_components/forms/controls/drilldownChecklist","main/ui_components/forms/controls/searchbar","main/ui_components/forms/controls/fieldset","main/ui_components/forms/controls/container","main/ui_components/forms/controls/multiselectSideBySide","main/ui_components/forms/controls/yesNoChecklist","main/ui_components/forms/controls/typeahead","main/ui_components/forms/controls/datepicker","main/ui_components/forms/controls/timepicker","main/ui_components/forms/controls/commentBox","main/ui_components/forms/controls/nestedCommentBox","main/ui_components/forms/controls/alertBanner","main/ui_components/forms/controls/rangeSlider","main/ui_components/forms/controls/selectableTable","main/ui_components/forms/controls/tabs","main/ui_components/forms/controls/select","main/ui_components/forms/controls/dropdown"],function(e,t,n,i){"use strict";return e.SpacerControl=n.View.extend({tagName:"hr"}),e.ButtonControl=e.DefaultButtonControl.extend({template:t.compile(["{{ui-button label type=type icon=icon disabled=disabled title=title classes=extraClasses id=(clean-for-id id) size=size srOnlyLabel=srOnlyLabel}}",'{{#compare type "submit"}}',"{{#if value}}{{#if value.status}}",'<span class="status pull-right{{#compare value.status "error"}} {{PuppetForm "buttonStatusErrorClassName"}}{{/compare}}{{#compare value.status "success"}} {{PuppetForm "buttonStatusSuccessClassname"}}{{/compare}}"> {{value.message}}</span>',"{{/if}}{{/if}}","{{/compare}}"].join("\n")),keyPathAccessor:function(e,t){var n=e;t=t.split(".");for(var o=0;o<t.length;o++){
if(i.isNull(n))return null;i.isEmpty(t[o])||i.isUndefined(n[t[o]])||(n=n[t[o]])}return n},events:i.defaults({"control:disabled":function(e,t){this.setBooleanFieldOption("disabled",t,e)},"control:label":function(e,t){this.setStringFieldOption("label",t,e)},"control:icon":function(e,t){this.setStringFieldOption("icon",t,e)},"control:title":function(e,t){this.setStringFieldOption("title",t,e)}},e.DefaultButtonControl.prototype.events),className:function(){return"control visible-inline"},onRender:function(){this.$el.addClass(this.field.get("controlName")+"-control "+this.field.get("name").split(".").shift()),this.updateInvalid()}}),e.CheckboxControl=e.BooleanControl=e.DefaultBooleanControl.extend({template:t.compile(["{{ui-form-checkbox label id=(clean-for-id name) name=name title=title checked=value disabled=disabled srOnlyLabel=srOnlyLabel}}"].join("\n")),events:i.defaults({"control:disabled":function(e,t){this.setBooleanFieldOption("disabled",t,e)},"control:label":function(e,t){this.setStringFieldOption("label",t,e)},"control:title":function(e,t){this.setStringFieldOption("title",t,e)}},e.DefaultBooleanControl.prototype.events)}),e.RadioControl=e.DefaultRadioControl.extend({template:t.compile(['<p class="faux-label {{is-sr-only-label srOnlyLabel}}">{{add-required-indicator label required}}</p>','<div id="{{clean-for-id name}}" class="{{PuppetForm "radioControlsClassName"}}{{#if (has-puppetForm-prop "controlsClassName")}} {{PuppetForm "controlsClassName"}}{{/if}}"{{#if title}} title="{{title}}"{{/if}}>',"{{#each options}}",t.helpers["ui-form-label"].apply(this,["{{label}}",{hash:{forID:"{{../name}}-{{clean-for-id value}}",classes:[e.radioLabelClassName],extraClassLogic:"{{#if disabled}}disabled {{else}}{{#if ../../disabled}}disabled {{/if}}{{/if}}",content:'<input type="{{../type}}" id="{{../name}}-{{clean-for-id value}}" name="{{../name}}" {{#if title}}title="{{title}}"{{else}}title="Press enter twice to select, to view more options use the left and right arrow keys."{{/if}} value="{{formatter-from-raw ../formatter value}}" {{#compare value ../rawValue}}checked="checked"{{/compare}}{{#if disabled}} disabled{{else}}{{#if ../../disabled}} disabled{{/if}}{{/if}}{{#if ../required}} required{{/if}}/>'}}]),"{{/each}}",'{{#if helpMessage}} <span {{#if (has-puppetForm-prop "helpMessageClassName")}}class="{{PuppetForm "helpMessageClassName"}}"{{/if}}>{{helpMessage}}</span>{{/if}}',"</div>"].join("\n")),events:i.defaults({"control:disabled":function(e,t){this.setBooleanFieldOption("disabled",t,e)},"control:required":function(e,t){this.setBooleanFieldOption("required",t,e)},"control:label":function(e,t){this.setStringFieldOption("label",t,e)},"control:helpMessage":function(e,t){this.setStringFieldOption("helpMessage",t,e)}},e.DefaultRadioControl.prototype.events)}),e.TextareaControl=e.DefaultTextareaControl.extend({template:t.compile(["{{ui-form-label (add-required-indicator label required) forID=(clean-for-id name) classes=(is-sr-only-label srOnlyLabel)}}",'<textarea class="{{PuppetForm "controlClassName"}}"{{#if placeholder}} placeholder="{{placeholder}}"{{/if}}{{#if maxlength}} maxlength="{{maxlength}}"{{/if}}{{#if cols}} cols="{{cols}}"{{/if}}{{#if rows}} rows="{{rows}}"{{/if}} name="{{name}}"{{#if title}} title="{{title}}"{{/if}} id={{clean-for-id name}}{{#if disabled}} disabled{{/if}}{{#if required}} required{{/if}}>{{value}}</textarea>','{{#if helpMessage}} <span {{#if (has-puppetForm-prop "helpMessageClassName")}}class="{{PuppetForm "helpMessageClassName"}}"{{/if}}>{{helpMessage}}</span>{{/if}}'].join("\n")),events:i.defaults({"control:required":function(e,t){this.setBooleanFieldOption("required",t,e)},"control:disabled":function(e,t){this.setBooleanFieldOption("disabled",t,e)},"control:cols":function(e,t){this.setIntegerFieldOption("cols",t,e)},"control:rows":function(e,t){this.setIntegerFieldOption("rows",t,e)},"control:title":function(e,t){this.setStringFieldOption("title",t,e)},"control:placeholder":function(e,t){this.setStringFieldOption("placeholder",t,e)},"control:helpMessage":function(e,t){this.setStringFieldOption("helpMessage",t,e)},"control:maxlength":function(e,t){this.setIntegerFieldOption("maxlength",t,e)}},e.DefaultTextareaControl.prototype.events)}),e}),define("main/ui_components/workflow/controllerView",["backbone","marionette","jquery","underscore","handlebars"],function(e,t,n,i,o){var r=e.Marionette.CollectionView.extend({modelEvents:{"change:currentIndex":"updateProgressIndicator"},initialize:function(e){this.model=e.model,this.collection=this.model.get("steps"),this.parentViewInstance=e.parentViewInstance},onBeforeShow:function(){this.collection.length>0&&this.callBeforeShowStepMethod(this._getImmediateChildren()[0].beforeGoingToStep)},getCurrentFormView:function(){return this.children.findByIndex(this.model.get("currentIndex"))},updateProgressIndicator:function(){var e=0;i.each(this.collection.models,function(t){t.unset("currentStep");var n=this.model.get("currentIndex");e===n?t.set({currentStep:!0,completed:!0,currentIndex:n+1}):n>e?t.set("completed",!0):t.unset("completed"),e++},this)},getChildView:function(e){return e===e.collection.at(0)?e.get("view"):e.get("view").extend({className:function(){return e.get("view").prototype.className()+" hidden"}})},childViewOptions:function(e,t){return{workflow:this,viewIndex:t,beforeGoingToStep:e.get("onBeforeShow")||null}},buildChildView:function(e,t,n){var o=i.extend({model:e.get("viewModel")},n),r=new t(o);return r},checkIndex:function(e){return this._getImmediateChildren()[e]?!0:!1},goToNext:function(){var e=this.model.get("currentIndex");return this.checkIndex(e+1)?(this._getImmediateChildren()[e].$el.addClass("hidden"),this.callBeforeShowStepMethod(this._getImmediateChildren()[e+1].beforeGoingToStep),this._getImmediateChildren()[e+1].$el.removeClass("hidden"),this.model.set("currentIndex",e+1),!0):!1},goToPrevious:function(){var e=this.model.get("currentIndex");return this.checkIndex(e-1)?(this._getImmediateChildren()[e].$el.addClass("hidden"),this.callBeforeShowStepMethod(this._getImmediateChildren()[e-1].beforeGoingToStep),this._getImmediateChildren()[e-1].$el.removeClass("hidden"),this.model.set("currentIndex",e-1),!0):!1},goToIndex:function(e){if(this.checkIndex(e)){var t=this;return i.each(this._getImmediateChildren(),function(n,i){i===e?(n.$el.removeClass("hidden"),t.callBeforeShowStepMethod(n.beforeGoingToStep)):n.$el.addClass("hidden")}),this.model.set("currentIndex",e),!0}return!1},callBeforeShowStepMethod:function(e){i.isFunction(e)&&i.bind(e,this.parentViewInstance)()}});return r}),define("main/ui_components/workflow/containerView",["backbone","marionette","jquery","underscore","handlebars"],function(e,t,n,i,o){var r=e.Model.extend({defaults:{sizeClass:"",backdrop:!0,keyboard:!0}}),a=e.Marionette.LayoutView.extend({className:"modal fade",tagName:"div",attributes:{role:"dialog","aria-hidden":"true",id:"mainWorkflow","aria-labelledby":"main-workflow-label"},modelEvents:{change:"render"},ui:{WorkflowRegion:".modal-dialog"},regions:{workflowRegion:"@ui.WorkflowRegion"},template:o.compile('<div class="workflow-container"><div class="modal-dialog{{#if sizeClass}} {{sizeClass}}{{/if}}"></div></div>'),initialize:function(e){this.workflowOptions=e.workflowOptions,this.controllerView=e.controllerView,this.model=new r},onBeforeShow:function(){this.workflowOptions.keyboard===!1&&this.model.set("keyboard",this.workflowOptions.keyboard),(this.workflowOptions.backdrop===!1||"static"===this.workflowOptions.backdrop)&&this.model.set("backdrop",this.workflowOptions.backdrop),this.$el.attr({"data-backdrop":this.model.get("backdrop"),"data-keyboard":this.model.get("keyboard")}),"small"===this.workflowOptions.size?this.model.set("sizeClass","modal-sm"):"large"===this.workflowOptions.size?this.model.set("sizeClass","modal-lg"):"xlarge"===this.workflowOptions.size&&this.model.set("sizeClass","modal-xlg"),this.showChildView("workflowRegion",this.controllerView)}});return a}),define("main/ui_components/workflow/component",["backbone","marionette","jquery","underscore","handlebars","api/Messaging","main/ui_components/workflow/controllerView","main/ui_components/workflow/containerView"],function(e,t,n,i,o,r,a,s){var l=e.Model.extend({defaults:{title:"",actionItems:!1,popOutToggle:!1}}),d=e.Marionette.LayoutView.extend({template:o.compile('<div class="{{classPrefix}}-content{{#if showProgress}} with-progress-indicator{{/if}}">{{#if showHeader}}<div class="workflow-header"></div>{{/if}}{{#if showProgress}}<div class="workflow-progressIndicator"></div>{{/if}}<div class="workflow-controller"></div></div>'),ui:{HeaderRegion:".workflow-header",ProgressIndicatorRegion:".workflow-progressIndicator",ControllerRegion:".workflow-controller"},regions:{ControllerRegion:"@ui.ControllerRegion"},events:{"keydown input":function(e){13===e.which&&e.preventDefault()}},changeHeaderTitle:function(e){i.isString(e)&&this.headerModel.set("title",e)},changeHeaderActionItems:function(e){i.isArray(e)&&this.headerModel.set("actionItems",e)},changeHeaderCloseButtonOptions:function(e){i.isObject(e)&&(i.isFunction(e.onClick)?(this.headerView.events["click button.close.custom-on-close-method"]=i.bind(e.onClick,this.workflowControllerView.getCurrentFormView()),this.headerView.delegateEvents(),this.headerModel.set("defaultCloseButtonAction",!1)):this.headerModel.set("defaultCloseButtonAction",!0),i.isString(e.title)&&this.headerModel.set("closeButtonTitle",e.title))},modelEvents:{"change:title":"render","change:showProgress":"render","change:showHeader":"render"},workflowOptionsDefaults:{title:"",size:"",steps:[],backdrop:!1,keyboard:!0,headerOptions:{}},initialize:function(t){this.workflowOptions=i.defaults(t,this.workflowOptionsDefaults),this.model=new e.Model,this.model.set({title:this.workflowOptions.title,actionItems:this.workflowOptions.headerOptions.actionItems,closeButtonOptions:this.workflowOptions.headerOptions.closeButtonOptions,popOutToggle:this.workflowOptions.headerOptions.popOutToggle,steps:new e.Collection(this.workflowOptions.steps),currentIndex:0,showProgress:this.workflowOptions.steps.length>1?this.workflowOptions.showProgress||!1:!1,showHeader:i.isBoolean(this.workflowOptions.showHeader)?this.workflowOptions.showHeader:!0,classPrefix:this.workflowOptions.classPrefix||"modal"})},getFormView:function(e){return this.workflowControllerView.children.findByIndex(e)},showHeader:function(){this.addRegion("HeaderRegion",this.ui.HeaderRegion);var t=this.model.get("title"),n=this.model.get("popOutToggle"),r=this.model.get("closeButtonOptions")||{},a=this.model.get("actionItems");(t||a||this.workflowOptions.header)&&(this.workflowOptions.header?this.HeaderView=this.workflowOptions.header.extend({className:this.model.get("classPrefix")+"-header"}):(this.headerModel=new l({title:t,actionItems:a,popOutToggle:n,closeButtonTitle:r.title,defaultCloseButtonAction:!i.isFunction(r.onClick)}),r=i.defaults(r,{title:"",onClick:function(){}}),this.HeaderView=e.Marionette.ItemView.extend({modelEvents:{change:"render"},initialize:function(e){this.workflowControllerView=e.workflowControllerView,this.model=e.model},events:{"click .dropdown-menu li a":function(e){e.preventDefault();var t=this.model.get("actionItems")[this.$(e.currentTarget).attr("data-item-index")];i.bind(t.onClick,this.workflowControllerView.getCurrentFormView())()},"click button.close.custom-on-close-method":i.bind(r.onClick,this.workflowControllerView.getCurrentFormView())},template:o.compile(['<div class="row">','<div class="col-md-10 col-xs-10">','<h4 class="all-padding-no '+this.model.get("classPrefix")+'-title" id="main-workflow-label">{{title}}</h4>',"</div>",'<div class="col-md-2 col-xs-2">','<div class="header-btns">',"{{#if actionItems}}",'<div class="col-xs-6 all-padding-no">','<div class="dropdown">','<button class="btn btn-icon dropdown-toggle" type="button" id="action-items-dropdown" data-toggle="dropdown" aria-expanded="true">','<i class="fa fa-ellipsis-v"><span class="sr-only">Settings</span></i>',"</button>",'<ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="action-items-dropdown">',"{{#each actionItems}}",'<li role="presentation"><a role="menuitem" data-item-index={{@index}} href="#">{{label}}</a></li>',"{{/each}}","</ul>","</div>","</div>","{{/if}}",'<div class="right-padding-no{{#if actionItems}} left-padding-xs col-xs-6{{else}} col-xs-6 col-xs-offset-6{{/if}}">','<button type="button" class="close{{#if defaultCloseButtonAction}}" data-dismiss="modal"{{else}} custom-on-close-method"{{/if}} title="{{#if closeButtonTitle}}{{closeButtonTitle}}{{else}}Press enter to close.{{/if}}">','<span aria-hidden="true">&times;</span>',"</button>","</div>","</div>","</div>","</div>"].join("\n")),className:this.model.get("classPrefix")+"-header"})),this.headerView=new this.HeaderView({workflowControllerView:this.workflowControllerView,model:this.headerModel}),this.showChildView("HeaderRegion",this.headerView))},showProgressBar:function(){this.addRegion("ProgressIndicatorRegion",this.ui.ProgressIndicatorRegion);var t=e.Marionette.ItemView.extend({tagName:"li",template:o.compile('<div{{#if completed}} class="completed"{{/if}}><span class="bubble"></span>{{stepTitle}}{{#if currentStep}}<span class="sr-only">You are currently on step {{currentIndex}} of {{numberOfSteps}}</span>{{/if}}'),modelEvents:{change:"render"}});this.WorkflowProgressIndicatorView=e.Marionette.CollectionView.extend({collection:this.model.get("steps"),tagName:"ul",className:"progress-indicator",childView:t}),this.workflowProgressIndicatorView=new this.WorkflowProgressIndicatorView,this.showChildView("ProgressIndicatorRegion",this.workflowProgressIndicatorView)},onBeforeShow:function(){var e=this.model.get("steps");e.at(0).set({completed:!0,currentStep:!0,currentIndex:this.model.get("currentIndex")+1}),i.each(e.models,function(t){t.set("numberOfSteps",e.length)}),this.workflowControllerView=new a({model:this.model,parentViewInstance:this}),this.model.get("showHeader")===!0&&this.showHeader(),this.model.get("showProgress")===!0&&this.showProgressBar(),this.showChildView("ControllerRegion",this.workflowControllerView)},show:function(){var e=n(":focus"),t=r.request("get:adkApp:region","workflowRegion");if(!i.isUndefined(t)){var o=new s({workflowOptions:this.workflowOptions,controllerView:this});t.show(o),t.currentView.$el.one("hidden.bs.modal",function(n){t.empty(),e.focus()}),t.currentView.$el.modal("show")}}});return d.hide=function(){var e=r.request("get:adkApp:region","workflowRegion").currentView;e&&e.$el.modal("hide")},d}),define("hbs!main/ui_components/modal/bootstrapModalTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div class="modal-content">\n    <div id="modal-header"></div>\n    <div id="modal-body" class="modal-body dataValue"></div>\n    <div id="modal-footer" class="modal-footer"></div>\n</div>'}});return t.registerPartial("main/ui_components/modal/bootstrapModalTemplate",n),n}),define("hbs!main/ui_components/modal/bootstrapModalHeaderTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l='<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true" aria-label="Close">&times;</span></button>\n<h4 class="modal-title" id="mainModalLabel">';return r=null!=(r=t["modal-title"]||(null!=e?e["modal-title"]:e))?r:s,o=typeof r===a?r.call(e,{name:"modal-title",hash:{}}):r,null!=o&&(l+=o),l+"</h4>"}});return t.registerPartial("main/ui_components/modal/bootstrapModalHeaderTemplate",n),n}),define("main/ui_components/modal/containerView",["backbone","marionette","jquery","underscore","handlebars"],function(e,t,n,i,o){var r=e.Model.extend({defaults:{sizeClass:"",backdrop:!0,keyboard:!0}}),a=e.Marionette.LayoutView.extend({template:o.compile('<div id="mainModalDialog" class="modal-dialog {{sizeClass}}"></div>'),initialize:function(e){this.model=new r;var t=e.view,n=t.modalOptions;n.keyboard||this.model.set("keyboard",n.keyboard),(n.backdrop===!1||"static"===n.backdrop)&&this.model.set("backdrop",n.backdrop),"small"===n.size?this.model.set("sizeClass","modal-sm"):"large"===n.size?this.model.set("sizeClass","modal-lg"):"xlarge"===n.size&&this.model.set("sizeClass","modal-xlg"),this.modalLayoutView=t},className:"modal fade",attributes:{role:"dialog",tabindex:"-1","aria-hidden":"true",id:"mainModal"},regions:{modalDialogRegion:"#mainModalDialog"},onBeforeShow:function(){this.showChildView("modalDialogRegion",this.modalLayoutView)},onRender:function(){this.$el.attr({"data-backdrop":this.model.get("backdrop"),"data-keyboard":this.model.get("keyboard")})}});return a}),define("main/ui_components/modal/component",["backbone","marionette","jquery","underscore","handlebars","api/Messaging","hbs!main/ui_components/modal/bootstrapModalTemplate","hbs!main/ui_components/modal/bootstrapModalHeaderTemplate","main/ui_components/modal/containerView"],function(e,t,n,i,o,r,a,s,l){var d=e.Marionette.ItemView.extend({template:i.template("Close"),className:"btn btn-default",tagName:"button",attributes:{type:"button","data-dismiss":"modal",id:"modal-close-button",title:"To close the modal, select the close button."}}),c=e.Marionette.LayoutView.extend({template:a,initialize:function(t){var n={title:"",size:"",headerView:"",footerView:"",keyboard:!1,callShow:!0},o=t.options||{};if(this.modalOptions=i.defaults(o,n),this.modalTitle=this.modalOptions.title,this.modalHeader=this.modalOptions.headerView,this.ModalButtonControlView=this.modalOptions.footerView,this.modalTitle||this.modalHeader){var r;if(this.modalHeader)r=this.modalHeader.extend({className:"modal-header"});else{var a=e.Model.extend({defaults:{"modal-title":this.modalTitle}}),l=new a;r=e.Marionette.ItemView.extend({template:s,model:l,className:"modal-header"})}this.modalHeaderView=new r}this.modalRegionView=t.view,this.ModalButtonControlView&&"none"!==this.ModalButtonControlView?i.isFunction(this.ModalButtonControlView)?this.modalButtonControlView=new this.ModalButtonControlView:this.modalButtonControlView=this.ModalButtonControlView:this.modalButtonControlView=new d},events:{"keydown input":function(e){13===e.which&&e.preventDefault()}},regions:{modalHeaderRegion:"#modal-header",modalRegion:"#modal-body",modalButtonControlRegion:"#modal-footer"},onBeforeShow:function(){this.showChildView("modalRegion",this.modalRegionView),"none"===this.ModalButtonControlView?this.$("#modal-footer").addClass("hidden"):this.showChildView("modalButtonControlRegion",this.modalButtonControlView),this.modalHeaderView&&this.showChildView("modalHeaderRegion",this.modalHeaderView)},show:function(){var e=n(":focus"),t=r.request("get:adkApp:region","modalRegion");if(t.$el&&0===t.$el.children().length){var o=new l({view:this});t.show(o)}else t.currentView.modalDialogRegion.show(this);t.currentView.$el.one("hidden.bs.modal",function(n){t.empty(),e.focus()}),i.isBoolean(this.modalOptions.callShow)&&this.modalOptions.callShow&&t.currentView.$el.modal("show")}});return c.hide=function(){var e=r.request("get:adkApp:region","modalRegion").currentView;e&&e.$el.modal("hide")},c}),define("main/ui_components/fullscreen_overlay/component",["backbone","marionette","jquery","underscore","handlebars","api/Messaging"],function(e,t,n,i,o,r){var a=e.Model.extend({defaults:{keyboard:!0}}),s=e.Marionette.LayoutView.extend({initialize:function(e){this.model=new a;var t={callShow:!1},n=e.options||{};this.overlayOptions=i.defaults(n,t),this.overlayView=e.view,i.isBoolean(this.overlayOptions.keyboard)&&!this.overlayOptions&&this.model.set("keyboard",this.overlayOptions.keyboard),this.$el.attr({"data-keyboard":this.model.get("keyboard")})},onBeforeShow:function(){this.showChildView("overlayViewRegion",this.overlayView)},template:o.compile('<div id="mainOverlayRegion"></div>'),className:"overlay overlay-scale",tagName:"div",attributes:{role:"dialog",tabindex:"-1","aria-hidden":"true",id:"mainOverlay","data-backdrop":"static"},regions:{overlayViewRegion:"#mainOverlayRegion"},show:function(){var e=r.request("get:adkApp:region","modalRegion");e.show(this),e.currentView.$el.one("hidden.bs.modal",function(e){n("body").removeClass("overlay-open"),ADK.ADKApp.modalRegion.empty()}),this.overlayOptions.callShow===!0&&e.currentView.$el.modal("show"),n("body").addClass("overlay-open")}});return s.hide=function(){var e=r.request("get:adkApp:region","modalRegion").currentView;e&&e.$el.modal("hide")},s}),define("main/ui_components/alert/component",["backbone","marionette","jquery","handlebars","api/Messaging"],function(e,t,n,i,o){"use strict";var r=e.Model.extend({defaults:{title:"Alert",icon:"fa-exclamation-triangle",messageView:void 0,footerView:void 0}}),a=e.Marionette.LayoutView.extend({collection:new e.Collection,model:new r,className:"modal alert-modal",tagName:"div",attributes:{role:"dialog",tabindex:"-1","aria-hidden":"true",id:"mainAlert","data-backdrop":"static"},initialize:function(e){this.model.set(e),e&&(e.messageView&&(this.messageView=new e.messageView),e.footerView&&(this.footerView=new e.footerView))},regions:{MessageRegion:".modal-body",FooterRegion:".modal-footer"},onShow:function(){this.messageView&&this.showChildView("MessageRegion",this.messageView),this.footerView&&this.showChildView("FooterRegion",this.footerView)},template:i.compile(['<div class="alert-container modal-dialog">','<div class="modal-content">','<div class="modal-header">','<h4 class="modal-title all-padding-no" id="newNotesModalLabel"><i class="alert-icon fa {{icon}}"></i> {{title}}</h4>',"</div>",'<div class="modal-body"></div>','<div class="modal-footer"></div>',"</div>","</div>"].join("\n")),show:function(){var e=o.request("get:adkApp:region","alertRegion");if(!_.isUndefined(e)&&!_.isUndefined(this)){var t=n(":focus");return e.show(this),e.currentView.$el.one("hidden.bs.modal",function(n){e.empty(),t.focus()}),e.currentView.$el.one("shown.bs.modal",function(e){n(".modal-backdrop").last().css("z-index","1052")}),e.currentView.$el.one("hidden.bs.modal",function(e){n(".modal-backdrop").css("z-index","1030")}),e.currentView.$el.modal("show").css("z-index","1053"),e.currentView}return!1}});return a.hide=function(){var e=o.request("get:adkApp:region","alertRegion").currentView;e&&e.$el.modal("hide")},a}),function(e){"function"==typeof define&&define.amd?define("bootstrap-notify",["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function t(t,i,o){var i={content:{message:"object"==typeof i?i.message:i,title:i.title?i.title:"",icon:i.icon?i.icon:"",url:i.url?i.url:"#",target:i.target?i.target:"-"}};o=e.extend(!0,{},i,o),this.settings=e.extend(!0,{},n,o),this._defaults=n,"-"==this.settings.content.target&&(this.settings.content.target=this.settings.url_target),this.animations={start:"webkitAnimationStart oanimationstart MSAnimationStart animationstart",end:"webkitAnimationEnd oanimationend MSAnimationEnd animationend"},"number"==typeof this.settings.offset&&(this.settings.offset={x:this.settings.offset,y:this.settings.offset}),this.init()}var n={element:"body",position:null,type:"info",allow_dismiss:!0,newest_on_top:!1,showProgressbar:!1,placement:{from:"top",align:"right"},offset:20,spacing:10,z_index:1031,delay:5e3,timer:1e3,url_target:"_blank",mouse_over:null,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},onShow:null,onShown:null,onClose:null,onClosed:null,icon_type:"class",template:'<div data-notify="container" class="col-xs-11 col-sm-4 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">&times;</button><span data-notify="icon"></span> <span data-notify="title">{1}</span> <span data-notify="message">{2}</span><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a></div>'};String.format=function(){for(var e=arguments[0],t=1;t<arguments.length;t++)e=e.replace(RegExp("\\{"+(t-1)+"\\}","gm"),arguments[t]);return e},e.extend(t.prototype,{init:function(){var e=this;this.buildNotify(),this.settings.content.icon&&this.setIcon(),"#"!=this.settings.content.url&&this.styleURL(),this.placement(),this.bind(),this.notify={$ele:this.$ele,update:function(t,n){var i={};"string"==typeof t?i[t]=n:i=t;for(var t in i)switch(t){case"type":this.$ele.removeClass("alert-"+e.settings.type),this.$ele.find('[data-notify="progressbar"] > .progress-bar').removeClass("progress-bar-"+e.settings.type),e.settings.type=i[t],this.$ele.addClass("alert-"+i[t]).find('[data-notify="progressbar"] > .progress-bar').addClass("progress-bar-"+i[t]);break;case"icon":var o=this.$ele.find('[data-notify="icon"]');"class"==e.settings.icon_type.toLowerCase()?o.removeClass(e.settings.content.icon).addClass(i[t]):(o.is("img")||o.find("img"),o.attr("src",i[t]));break;case"progress":var r=e.settings.delay-e.settings.delay*(i[t]/100);this.$ele.data("notify-delay",r),this.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",i[t]).css("width",i[t]+"%");break;case"url":this.$ele.find('[data-notify="url"]').attr("href",i[t]);break;case"target":this.$ele.find('[data-notify="url"]').attr("target",i[t]);break;default:this.$ele.find('[data-notify="'+t+'"]').html(i[t])}var a=this.$ele.outerHeight()+parseInt(e.settings.spacing)+parseInt(e.settings.offset.y);e.reposition(a)},close:function(){e.close()}}},buildNotify:function(){var t=this.settings.content;this.$ele=e(String.format(this.settings.template,this.settings.type,t.title,t.message,t.url,t.target)),this.$ele.attr("data-notify-position",this.settings.placement.from+"-"+this.settings.placement.align),this.settings.allow_dismiss||this.$ele.find('[data-notify="dismiss"]').css("display","none"),(this.settings.delay<=0&&!this.settings.showProgressbar||!this.settings.showProgressbar)&&this.$ele.find('[data-notify="progressbar"]').remove()},setIcon:function(){"class"==this.settings.icon_type.toLowerCase()?this.$ele.find('[data-notify="icon"]').addClass(this.settings.content.icon):this.$ele.find('[data-notify="icon"]').is("img")?this.$ele.find('[data-notify="icon"]').attr("src",this.settings.content.icon):this.$ele.find('[data-notify="icon"]').append('<img src="'+this.settings.content.icon+'" alt="Notify Icon" />')},styleURL:function(){this.$ele.find('[data-notify="url"]').css({backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)",height:"100%",left:"0px",position:"absolute",top:"0px",width:"100%",zIndex:this.settings.z_index+1}),this.$ele.find('[data-notify="dismiss"]').css({position:"absolute",right:"10px",top:"5px",zIndex:this.settings.z_index+2})},placement:function(){var t=this,n=this.settings.offset.y,i={display:"inline-block",margin:"0px auto",position:this.settings.position?this.settings.position:"body"===this.settings.element?"fixed":"absolute",transition:"all .5s ease-in-out",zIndex:this.settings.z_index},o=!1,r=this.settings;switch(e('[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])').each(function(){return n=Math.max(n,parseInt(e(this).css(r.placement.from))+parseInt(e(this).outerHeight())+parseInt(r.spacing))}),1==this.settings.newest_on_top&&(n=this.settings.offset.y),i[this.settings.placement.from]=n+"px",this.settings.placement.align){case"left":case"right":i[this.settings.placement.align]=this.settings.offset.x+"px";break;case"center":i.left=0,i.right=0}this.$ele.css(i).addClass(this.settings.animate.enter),e.each(Array("webkit","moz","o","ms",""),function(e,n){t.$ele[0].style[n+"AnimationIterationCount"]=1}),e(this.settings.element).append(this.$ele),1==this.settings.newest_on_top&&(n=parseInt(n)+parseInt(this.settings.spacing)+this.$ele.outerHeight(),this.reposition(n)),e.isFunction(t.settings.onShow)&&t.settings.onShow.call(this.$ele),this.$ele.one(this.animations.start,function(e){o=!0}).one(this.animations.end,function(n){e.isFunction(t.settings.onShown)&&t.settings.onShown.call(this)}),setTimeout(function(){o||e.isFunction(t.settings.onShown)&&t.settings.onShown.call(this)},600)},bind:function(){var t=this;if(this.$ele.find('[data-notify="dismiss"]').on("click",function(){t.close()}),this.$ele.mouseover(function(t){e(this).data("data-hover","true")}).mouseout(function(t){e(this).data("data-hover","false")}),this.$ele.data("data-hover","false"),this.settings.delay>0){t.$ele.data("notify-delay",t.settings.delay);var n=setInterval(function(){var e=parseInt(t.$ele.data("notify-delay"))-t.settings.timer;if("false"===t.$ele.data("data-hover")&&"pause"==t.settings.mouse_over||"pause"!=t.settings.mouse_over){var i=(t.settings.delay-e)/t.settings.delay*100;t.$ele.data("notify-delay",e),t.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",i).css("width",i+"%")}e<=-t.settings.timer&&(clearInterval(n),t.close())},t.settings.timer)}},close:function(){var t=this,n=parseInt(this.$ele.css(this.settings.placement.from)),i=!1;this.$ele.data("closing","true").addClass(this.settings.animate.exit),t.reposition(n),e.isFunction(t.settings.onClose)&&t.settings.onClose.call(this.$ele),this.$ele.one(this.animations.start,function(e){i=!0}).one(this.animations.end,function(n){e(this).remove(),e.isFunction(t.settings.onClosed)&&t.settings.onClosed.call(this)}),setTimeout(function(){i||(t.$ele.remove(),t.settings.onClosed&&t.settings.onClosed(t.$ele))},600)},reposition:function(t){var n=this,i='[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])',o=this.$ele.nextAll(i);1==this.settings.newest_on_top&&(o=this.$ele.prevAll(i)),o.each(function(){e(this).css(n.settings.placement.from,t),t=parseInt(t)+parseInt(n.settings.spacing)+e(this).outerHeight()})}}),e.notify=function(e,n){var i=new t(this,e,n);return i.notify},e.notifyDefaults=function(t){return n=e.extend(!0,{},n,t)},e.notifyClose=function(t){"undefined"==typeof t||"all"==t?e("[data-notify]").find('[data-notify="dismiss"]').trigger("click"):e('[data-notify-position="'+t+'"]').find('[data-notify="dismiss"]').trigger("click")}}),define("main/ui_components/notification/component",["backbone","marionette","jquery","handlebars","api/Messaging","bootstrap-notify"],function(e,t,n,i,o,r){"use strict";var a=function(e){var t=e||{};this.show=function(){var e=n.notify;return e({icon:this.icon||null,title:this.title||null,message:this.message||""},{delay:"10000",type:this.type?"custom "+this.type:"custom basic",placement:{from:"top",align:"right"},offset:{y:32,x:20},animate:{enter:"animated bounceIn",exit:"animated bounceOut"},z_index:1060,template:'<div data-notify="container" class="growl-alert growl-alert-user col-xs-11 col-sm-3 alert alert-{0}" role="alert">   <div class="alert-content">       <span data-notify="icon"></span>       <span class="notify-message">           <span data-notify="title">{1}</span>           <span data-notify="message">{2}</span>       </span>       <button type="button" class="close" data-notify="dismiss" title="Press enter to close the alert, or wait ten seconds for autodismissal"><i class="fa fa-times"></i></button>       <div class="progress" data-notify="progressbar">           <div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>       </div>       <a href="{3}" target="{4}" data-notify="url"></a>   </div></div>',onShown:function(){n(this).focus()}}),!0},this.message=t.message||t.notificationText||"",this.type=t.type||t.notificationType||null,this.title=t.title||"",this.icon=t.icon?"fa "+t.icon:void 0};return a.hide=function(){n.notifyClose()},a}),define("main/ui_components/tray/component",["backbone","marionette","jquery","handlebars","api/Messaging"],function(e,t,n,i,o){"use strict";var r=n.prototype.tooltip.Constructor.prototype.getUID,a={
position:"right",preventFocusoutClose:!1},s=2e3,l=e.Marionette.LayoutView.extend({template:i.compile(['<button id={{tray_id}} type="button" class="btn" data-toggle="sidebar-tray" aria-haspopup="true" aria-expanded="false">{{buttonLabel}}</button>','<div class="sidebar-tray {{position}}" aria-labelledby="{{tray_id}}" aria-hidden="true" tabindex="-1"/>'].join("\r\n")),options:a,attributes:function(e){return{id:this.tray_id}},className:"sidebar",isOpen:function(){return this.$el.hasClass("open")},eventString:function(){return["focusin."+this.cid,"click."+this.cid].join(" ")},ui:{ButtonContainer:"[data-toggle=sidebar-tray]",TrayContainer:".sidebar-tray"},regions:{TrayRegion:"@ui.TrayContainer"},events:{"tray.show":function(e,t){this.trigger("tray.show",t),this.isOpen()||this.open(t)},"tray.shown":function(e,t){this.options.preventFocusoutClose||(n(document).off(this.eventString(),"body"),n(document).on(this.eventString(),"body",[this],this.documentHandler)),this.trigger("tray.shown",t)},"tray.hide":function(e,t){this.trigger("tray.hide",t),this.isOpen()&&this.close(t)},"tray.hidden":function(e,t){n(document).off(this.eventString(),"body"),this.ui.ButtonContainer.off("focusin"),this.trigger("tray.hidden",t)},"click @ui.ButtonContainer":function(e){this.toggle(e)},"keydown @ui.ButtonContainer":function(e){this.keyHandler(e,this.ui.ButtonContainer)},"keydown @ui.TrayContainer":function(e){this.keyHandler(e,this.ui.TrayContainer)},"click [data-dismiss=tray]":function(e){this.$el.trigger("tray.hide",e)},"select2:open":function(e){var t=this;this.options.preventFocusoutClose=!0,n(e.target).off("select2:close"),n(e.target).one("select2:close",function(){t.options.preventFocusoutClose=!1})}},documentHandler:function(e){var t=e.data[0];t.$(e.target).length||t.options.preventFocusoutClose||(t.stopListening(t,"tray.hidden."+t.cid),t.$el.trigger("tray.hide"))},keyHandler:function(e,t){if(/(38|40|27|32|9)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var i=t,o=this.isOpen();if(9==e.which){var r=this.$("[role=menuitem]")[0];return void(r&&o&&e.target===this.ui.ButtonContainer[0]&&!this.options.preventFocusoutClose?(e.preventDefault(),e.stopImmediatePropagation(),n(r).trigger("focus")):o&&e.shiftKey&&(this.ui.TrayContainer.find(e.target).length||e.target===this.ui.TrayContainer[0])&&n(document).one("focusin.buttoncontainer."+this.tray_id,"body",[this.ui.ButtonContainer[0]],function(e){e.target===e.data[0]&&n(e.target).parent().trigger("tray.hide")}))}if(e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled")){if(!o&&27!=e.which||o&&27==e.which)return 27==e.which?this.ui.ButtonContainer.trigger("focus").trigger("click"):i.trigger("click");var a=" li:not(.disabled):visible a",s=this.$('[role="menu"]'+a+', [role="listbox"]'+a);if(s.length){var l=s.index(e.target);38==e.which&&l>0&&l--,40==e.which&&l<s.length-1&&l++,~l||(l=0),s.eq(l).trigger("focus")}}}},initialize:function(){this.tray_id=r("tray"),this.model||(this.model=new e.Model),this.model.set("tray_id",this.tray_id),this.model.set("buttonLabel",this.options.buttonLabel),this.model.set("position",this.options.position),this.tray=this.options.tray instanceof e.Marionette.View?this.options.tray:"function"==typeof this.options.tray?new this.options.tray:void 0;var t,i=this;n(window).on("resize."+this.cid,function(){i.isOpen()&&(t&&clearTimeout(t),t=setTimeout(function(){i.resetBounds(),i.resetContainerPosition()},50))}),this.listenTo(o,"tray.close",function(e){i.cid!==e&&i.isOpen()&&i.close(this,!0)}),this.listenTo(this,"tray.show",function(){this.onAttach()})},onRender:function(){this.tray&&this.showChildView("TrayRegion",this.tray)},onAttach:function(){this.resetBounds(),this.resetContainerPosition()},resetBounds:function(){if(this.options.viewport)this.containerBounds=_.clone(n(this.options.viewport)[0].getBoundingClientRect());else{this.containerBounds=_.clone(n("#center-region")[0].getBoundingClientRect());var e=this.ui.ButtonContainer[0].getBoundingClientRect(),t={top:e.bottom,height:this.containerBounds.bottom-e.bottom};_.extend(this.containerBounds,t)}},resetContainerPosition:function(){this.ui.TrayContainer.offset({top:this.containerBounds.top}).height(this.containerBounds.height)},childEvents:{show:function(){var e=this.ui.TrayContainer.children().first();e.is("ul")&&(e.attr("role","menu"),e.attr("tabindex","-1"),e.children().attr("role","presentation"),e.find("[role=presentation]").children().attr("role","menuitem").attr("tabindex","-1").on("keydown",function(e){var t=e.which||e.keycode;/(13|32)/.test(t)&&(n(this).trigger("click"),e.preventDefault())}))}},toggle:function(e){var t=this.$el;this.isOpen()?t.trigger("tray.hide",e):t.trigger("tray.show",e)},open:function(e,t){var i=this.$("[role=menuitem]")[0],r=this.$el;this.triggerEl=e.currentTarget,o.trigger("tray.close",this.cid),t||(i?this.listenToOnce(this,"tray.shown",function(){i.focus()}):this.listenToOnce(this,"tray.shown",function(){this.ui.TrayContainer.focus()})),this.ui.TrayContainer.one("bsTransitionEnd",function(){n(this).attr("aria-hidden","false"),r.trigger("tray.shown")}).emulateTransitionEnd(s),this.ui.ButtonContainer.attr("aria-expanded",!0),r.addClass("open")},close:function(e,t){var i=this.$el;this.triggerEl&&!t&&this.listenToOnce(this,"tray.hidden",function(){this.triggerEl.focus()}),this.ui.TrayContainer.one("bsTransitionEnd",function(){n(this).attr("aria-hidden","true"),i.trigger("tray.hidden")}).emulateTransitionEnd(s),this.ui.ButtonContainer.attr("aria-expanded",!1),i.removeClass("open")},setTrayView:function(e){this.TrayRegion.show(e)},onDestroy:function(){n(document).off(this.eventString(),"body"),n(document).off("focusin.buttoncontainer."+this.tray_id,"body"),n(window).off("resize."+this.cid)}}),d=l,c=d.extend({constructor:function(){this.options=_.extend({},a,this.options);var e=Array.prototype.slice.call(arguments),t=this.initialize,n=this.onRender,i=this.onAttach,o=this.onDestroy,r=(this.events,e[0]?_.extend({},this.options.events||{},e[0].events):_.extend({},this.options.events));this.initialize=function(){var e=Array.prototype.slice.call(arguments);d.prototype.initialize.apply(this,e),d.prototype.initialize!==t&&t.apply(this,e)},this.onRender=function(){var e=Array.prototype.slice.call(arguments);d.prototype.onRender.apply(this,e),d.prototype.onRender!==n&&n.apply(this,e)},this.onAttach=function(){var e=Array.prototype.slice.call(arguments);d.prototype.onAttach.apply(this,e),d.prototype.onAttach!==i&&i.apply(this,e)},this.onDestroy=function(){var e=Array.prototype.slice.call(arguments);d.prototype.onDestroy.apply(this,e),d.prototype.onDestroy!==o&&o.apply(this,e)},this.events=_.extend({},"function"==typeof d.prototype.events?d.prototype.events():d.prototype.events,"function"==typeof this.events?this.events():this.events,"function"==typeof r?r():r),e[0]&&e[0].events&&delete e[0].events,this.options.events&&delete this.options.events,d.apply(this,e)}});return l=c}),define("main/ui_components/components",["main/ui_components/forms/component","main/ui_components/workflow/component","main/ui_components/modal/component","main/ui_components/fullscreen_overlay/component","main/ui_components/tabs/component","main/ui_components/alert/component","main/ui_components/notification/component","main/ui_components/tray/component","main/ui_components/collapsible_container/component"],function(e,t,n,i,o,r,a,s,l){"use strict";var d={Form:e.Form,FormViews:e,Workflow:t,Modal:n,FullScreenOverlay:i,Tabs:o,Alert:r,Notification:a,Tray:s,CollapsibleContainer:l};return d}),define("hbs!main/components/views/popupTemplate",["hbs","handlebars"],function(e,t){var n=t.template({1:function(e,t,n,i){return'		<div class="modal-footer">\n            <a href="#" id="LgtBtn" class="btn btn-default" aria-hidden="false">Logout</a>\n            <a href="#" id="ContBtn" class="btn btn-primary" aria-hidden="false">Continue</a>\n		</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d='<div class="modal-dialog">\n	<div class="modal-content">\n		<div class="modal-header">\n			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n			<h2 class="modal-title" aria-hidden="false">'+l((r=null!=(r=t.title||(null!=e?e.title:e))?r:s,typeof r===a?r.call(e,{name:"title",hash:{}}):r))+'</h2>\n		</div>\n		<div class="modal-body">\n            <h3 aria-hidden="false">'+l((r=null!=(r=t.header||(null!=e?e.header:e))?r:s,typeof r===a?r.call(e,{name:"header",hash:{}}):r))+'</h3>\n            <p aria-hidden="false">'+l((r=null!=(r=t.body||(null!=e?e.body:e))?r:s,typeof r===a?r.call(e,{name:"body",hash:{}}):r))+'</p>\n            <p aria-hidden="false" id="footercontent">'+l((r=null!=(r=t.footer||(null!=e?e.footer:e))?r:s,typeof r===a?r.call(e,{name:"footer",hash:{}}):r))+"</p>\n		</div>\n";return o=t["if"].call(e,null!=e?e.buttons:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop}),null!=o&&(d+=o),d+"	</div>\n</div>"}});return t.registerPartial("main/components/views/popupTemplate",n),n}),define("main/components/views/popupView",["backbone","jquery","marionette","underscore","api/Messaging","hbs!main/components/views/popupTemplate"],function(e,t,n,i,o,r){var a={title:"",header:"",body:"",footer:"",buttons:!0},s=new e.Model(a),l=!1,d=e.Marionette.ItemView.extend({tag:"div",attributes:{role:"dialog",tabindex:"-1"},id:"base-modal",className:"modal fade",template:r,regions:{dialog:"#autologoff-alert-dialog"},events:{"shown.bs.modal":"focus","click #ContBtn":"continue","click #LgtBtn":"logoff","show.bs.modal":function(){this.isVisible=!0},"hide.bs.modal":function(){this.isVisible=!1,this.triggerContinue()}},modelEvents:{change:"fieldsChanged"},fieldsChanged:function(){this.show()},initialize:function(){i(this).bindAll(),this.render()},"continue":function(e){e.preventDefault(),this.resetModel(),this.hide()},resetModel:function(){this.setModel(a,!0)},show:function(){l=!1,this.render(),this.$el.modal("show"),t(this.dialog).show()},hide:function(){this.$el.modal("hide")},dialogReset:function(){t(this.dialog).blur(),this.dialog.reset()},triggerContinue:function(){l===!1&&(o.trigger("autologoff:continue"),this.setModel(a,!0))},focus:function(){t(this.dialog).focus()},logoff:function(e){l=!0,this.hide(),this.setModel(a,!0),o.trigger("app:logout")},logout:function(e){this.setModel(e,!0),this.isVisible?this.render():this.show(),l=!0,o.trigger("app:logout"),this.resetModel()},setModel:function(e,t){i.isBoolean(t)||(t=!1),this.model.set(e,{silent:t})},getDefaultModel:function(){return i.clone(a)}}),c=new d({model:s});return c}),define("api/AutoLogoff",["underscore","jquery","api/Navigation","api/UserService","api/Messaging","main/components/views/popupView"],function(e,t,n,i,o,r){var a=function(){var n,a,s=this||{},l=!0,d=!1;s.tokenInterval=15e3;var c="mouseup.autologoff mousedown.autologoff mousemove.autologoff keyup.autologoff keydown.autologoff",u=function(){l&&(i.refreshUserToken(),l=!1)},h=function(){n&&clearInterval(n)},p=function(t){e.isObject(t)&&(l=!1,r.setModel(t),f())},g=function(t){e.isObject(t)&&(l=!1,r.logout(t))},f=function(){t(document).off(c)},m=function(){t(document).on(c,function(e){l=!0})},v=function(e,t){f(),e.header+=t+" minute",t>1&&(e.header+="s"),e.header+=".",p(e),l=!1},b=function(){u();var e=i.checkUserToken(),t=r.getDefaultModel();switch(t.title="Warning: Login Session Ending.",t.header="Your user session will time out in ",t.body="To help ensure/protect your information, your user session times out after 15 minutes",t.footer="If you are actively using your app, simply tap Continue to reset the session. You can also tap Logout to logout of your user session now.",t.buttons=!0,e){case 3:v(t,e);break;case 2:v(t,e);break;case 1:v(t,e);break;case 0:t.title="Warning: You Have Been Logged Out",t.header="You've been logged out due to inactivity.",t.body="",t.footer="To help ensure/protect your information, your user session times out after 15 minutes",t.buttons=!1,g(t)}},y=function(){a&&clearInterval(a)},w=function(){y(),a=setInterval(b,s.tokenInterval)},A=function(e){d||(f(),m(),w(),d=!0)},N=function(e){y(),h(),f(),d=!1};return o.on("user:sessionStart user:sessionCheck",function(){i.getStatus()===i.STATUS.LOGGEDIN&&(A(),l=!0)}),o.on("app:logout",N),o.on("autologoff:continue",function(){l=!0,u(),w(),f(),m()}),s},s=new a;return s}),define("api/ErrorMessaging",["jquery","underscore"],function(e,t){var n={};return n.statusCodeMessages={401:"Unauthorized User.",308:"Sensitive Patient not acknowledged.",500:"Internal Server Error: The server encountered an unexpected condition which prevented it from fulfilling the request.",502:"Server Error: The server encountered a temporary error and could not complete your request.","default":"An error has occurred."},n.getMessage=function(e){return this.statusCodeMessages.hasOwnProperty(e)?this.statusCodeMessages[e]:this.statusCodeMessages["default"]},n}),define("hbs!main/backgrid/dataGridTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<span class="data-grid-header-left"></span>\n<span class="data-grid-header-right"></span>\n<div class="data-grid"></div>'}});return t.registerPartial("main/backgrid/dataGridTemplate",n),n}),define("main/backgrid/dataGridView",["backbone","marionette","underscore","hbs!main/backgrid/dataGridTemplate"],function(e,t,n,i){"use strict";var o=e.Marionette.LayoutView.extend({template:i,regions:{dataGridHeaderLeft:".data-grid-header-left",dataGridHeaderRight:".data-grid-header-right",dataGrid:".data-grid"}});return o}),define("main/backgrid/extensions/clickableRow",["backbone","backgrid"],function(e){"use strict";var t=Backgrid.Row.extend({className:"selectable",attributes:{tabindex:"0"},render:function(){t.__super__.render.apply(this,arguments),this.$el.data("model",this.model);var e=this.model.get("id")||this.model.get("uid");return e&&(this.el.id=e.replace(/:/g,"-").replace(/;/g,"-").replace(/\./g,"-")),this},events:{},clickRow:function(e){13==e.which}});return t}),define("main/backgrid/extensions/modalRow",["backbone","backgrid"],function(e){"use strict";var t=Backgrid.Row.extend({className:"selectable",attributes:{tabindex:"0"},render:function(){t.__super__.render.apply(this,arguments),this.$el.data("model",this.model);var e=this.model.get("id")||this.model.get("uid");return e&&(this.el.id=e.replace(/:/g,"-").replace(/;/g,"-").replace(/\./g,"-")),this},events:{},clickRow:function(e){13==e.which}});return t}),define("main/backgrid/extensions/headerCell",["backbone","backgrid"],function(e){"use strict";var t=Backgrid.HeaderCell.extend({attributes:{tabindex:"0",scope:"col"},render:function(){return t.__super__.render.apply(this,arguments),this.el.className=this.el.className.replace(this.column.get("name"),"grid-header-"+this.column.get("name")),this.el.id=this.column.get("appletId")+"-"+this.column.get("name"),this}});return t}),define("main/backgrid/extensions/groupBy/groupByHelper",[],function(){var e={aggregateBy:function(e,t){var n=[];return _.each(e,function(e){var i=t(e),o=_.find(n,function(e){return e[0]===i});void 0!==o&&o[0]===i?o[1].push(e):n.push([i,[e]])}),n},isEmptyCollection:function(e){return e.length<=0}};return e}),define("hbs!main/backgrid/extensions/groupBy/groupByCellTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return"\n<b>"+s((o=null!=(o=t.title||(null!=e?e.title:e))?o:a,typeof o===r?o.call(e,{name:"title",hash:{}}):o))+"</b>   <span class='groupByCountBadge badge hidden' id=\""+s((o=null!=(o=t.id||(null!=e?e.id:e))?o:a,typeof o===r?o.call(e,{name:"id",hash:{}}):o))+'_groupCount">'+s((o=null!=(o=t.count||(null!=e?e.count:e))?o:a,typeof o===r?o.call(e,{name:"count",hash:{}}):o))+"</span>"}});return t.registerPartial("main/backgrid/extensions/groupBy/groupByCellTemplate",n),n}),define("main/backgrid/extensions/groupBy/groupByBody",["backbone","backgrid","main/backgrid/extensions/groupBy/groupByHelper","hbs!main/backgrid/extensions/groupBy/groupByCellTemplate"],function(e,t,n,i){var o=t.Row.extend({attributes:{tabindex:"0"},events:{click:"toggleRows",keydown:"onEnter"},className:"groupByHeader",toggleRows:function(e){e.preventDefault(),this.$el.nextUntil(".groupByHeader").toggle()},onEnter:function(e){(13==e.which||32==e.which)&&(e.preventDefault(),$(e.target).find("td.groupByHeader").click())}}),r=t.Cell.extend({events:{click:"toggleChevron"},className:"groupByHeader selectable fa fa-chevron-down",render:function(){return this.$el.html(i(this.model.toJSON())),this.el.setAttribute("colspan",this.model.get("spanSize")),this},toggleChevron:function(){this.$el.toggleClass("fa-chevron-right"),this.$el.toggleClass("fa-chevron-down"),this.$el.find(".groupByCountBadge").toggleClass("hidden")}}),a=t.Body.extend({initialize:function(e){this.options=e,this.primaryColumn=_.find(this.options.columns.models,function(e){return e.get("groupableOptions")&&e.get("groupableOptions").primary}),this.primaryColumn&&this.primaryColumn.get("groupableOptions")&&(this.groupByFunction=this.primaryColumn.get("groupableOptions").groupByFunction,this.groupByRowFormatter=this.primaryColumn.get("groupableOptions").groupByRowFormatter),this.groupByFunction||(this.groupByFunction=function(e){return e.model.get(primaryColumn.name)}),this.groupByRowFormatter||(this.groupByRowFormatter=function(e){return e}),this._super=t.Body.prototype,this._super.initialize.apply(this,arguments),this.listenTo(this.collection,"backgrid:groupBy",this.sortForGroupBy)},render:function(){this.$el.empty();var t=document.createDocumentFragment();if(void 0===this.collection||n.isEmptyCollection(this.collection)?this.groupedRows=void 0:this.groupedRows=n.aggregateBy(this.rows,this.groupByFunction),void 0===this.groupedRows)for(var i=0;i<this.rows.length;i++){var a=this.rows[i];t.appendChild(a.render().el)}else _.each(this.groupedRows,function(n){var i=n[0],a=n[1],s=this.groupByRowFormatter(i),l=new o({columns:{name:"title",hidden:!0,editable:!1,cell:r},model:new e.Model({id:i,title:s,count:a.length,spanSize:this.columns.length,cell:"string"})});t.appendChild(l.render().el),_.each(a,function(e){t.appendChild(e.render().el)})},this);return this.el.appendChild(t),this.delegateEvents(),this},sortForGroupBy:function(t,n){var i,o,r=this.convertDirection(n);r?o=t:(o=this.primaryColumn,r=1),i=this.makeComparator(o,r);var a=function(e){var t=moment(e.get("referenceDateTime"),"YYYYMMDDHHmmss");return-t*r};return this.groupByFunction=o.get("groupableOptions")&&o.get("groupableOptions").groupByFunction||function(e){return e.model.get(o.get("name"))},this.groupByRowFormatter=o.get("groupableOptions")&&o.get("groupableOptions").groupByRowFormatter||function(e){return e},e.PageableCollection&&this.collection instanceof e.PageableCollection?this.collection.fullCollection?(o.get("groupableOptions").groupByDate?this.collection.fullCollection.comparator=a:this.collection.fullCollection.comparator=i,this.collection.fullCollection.sort()):this.collection.fetch({reset:!0}):(o.get("groupableOptions").groupByDate?this.collection.comparator=a:this.collection.comparator=i,this.collection.sort()),t.set("direction",n),this},convertDirection:function(e){var t;return t="ascending"===e?-1:"descending"===e?1:null},makeComparator:function(e,t){var n=this.modelExtractor,i=e.get("groupableOptions").innerSort,o=e.get("groupableOptions").innerSortValue||function(e,t){return e==t?0:e>t?-1:1};return function(r,a){var s,l,d;if(e.get("groupableOptions")&&e.get("groupableOptions").groupByFunction&&(s=e.get("groupableOptions").groupByFunction({model:r}),l=e.get("groupableOptions").groupByFunction({model:a})),s=s||n(r,e.get("name")),l=l||n(a,e.get("name")),1===t&&(d=s,s=l,l=d),s===l){if(i){var c=n(r,i),u=n(a,i);return o(c,u)}return 0}return l>s?-1:1}},modelExtractor:function(e,t){return e.get(t)?e.get(t).toLowerCase():""}});return a}),define("main/backgrid/extensions/groupBy/groupByHeader",["backbone","backgrid","main/backgrid/extensions/headerCell"],function(e,t,n){_.each(["groupable"],function(e){t.Column.prototype[e]=function(){var t=this.get(e);return _.isString(t)?this[t]:_.isFunction(t)?t:!!t}});var i=n.extend({initialize:function(e){this._super=n.prototype,this._super.initialize.apply(this,arguments),t.callByNeed(this.column.groupable(),this.column,this.collection)&&this.$el.addClass("sortable")},onClick:function(e){function n(e,t){"ascending"===o.get("direction")?r.trigger(a,t,"descending"):"descending"===o.get("direction")?r.trigger(a,t,null):r.trigger(a,t,"ascending")}function i(e,t){"ascending"===o.get("direction")?r.trigger(a,t,"descending"):r.trigger(a,t,"ascending")}e.preventDefault();var o=this.column,r=this.collection,a="backgrid:groupBy",s=t.callByNeed(o.groupable(),o,r);if(s){var l=o.get("sortType");"toggle"===l?i(this,o):n(this,o)}}});return i}),function(e){define("backgrid-moment-cell",["backgrid"],function(){return function(){!function(e,t){"object"==typeof exports?module.exports=t(require("underscore"),require("backgrid"),require("moment")):t(e._,e.Backgrid,e.moment)}(this,function(e,t,n){var i=t.Extension.MomentFormatter=function(t){e.extend(this,this.defaults,t)};i.prototype=new t.CellFormatter,e.extend(i.prototype,{defaults:{modelInUnixOffset:!1,modelInUnixTimestamp:!1,modelInUTC:!0,modelLang:n.lang(),modelFormat:n.defaultFormat,displayInUnixOffset:!1,displayInUnixTimestamp:!1,displayInUTC:!0,displayLang:n.lang(),displayFormat:n.defaultFormat},fromRaw:function(e){if(null==e)return"";var t=this.modelInUnixOffset?n(e):this.modelInUnixTimestamp?n.unix(e):this.modelInUTC?n.utc(e,this.modelFormat,this.modelLang):n(e,this.modelFormat,this.modelLang);return this.displayInUnixOffset?+t:this.displayInUnixTimestamp?t.unix():(this.displayLang&&t.lang(this.displayLang),this.displayInUTC?t.utc():t.local(),t.format(this.displayFormat))},toRaw:function(e){var t=this.displayInUnixOffset?n(+e):this.displayInUnixTimestamp?n.unix(+e):this.displayInUTC?n.utc(e,this.displayFormat,this.displayLang):n(e,this.displayFormat,this.displayLang);return t&&t.isValid()?this.modelInUnixOffset?+t:this.modelInUnixTimestamp?t.unix():(this.modelLang&&t.lang(this.modelLang),this.modelInUTC?t.utc():t.local(),t.format(this.modelFormat)):void 0}});var o=t.Extension.MomentCell=t.Cell.extend({editor:t.InputCellEditor,className:"moment-cell",formatter:i,initialize:function(t){o.__super__.initialize.apply(this,arguments);var n=i.prototype.defaults,r=e.keys(n),a=e.pick(this,r),s=e.pick(t,r);e.extend(this.formatter,n,a,s),this.editor=this.editor.extend({attributes:e.extend({},this.editor.prototype.attributes||this.editor.attributes||{},{placeholder:this.formatter.displayFormat})})}});e.extend(o.prototype,i.prototype.defaults)})}.apply(e,arguments)})}(this),define("main/backgrid/extensions/screenReaderCell",[],function(){"use strict";var e=function(e,t){var n=e.column.attributes.label;return void 0===n||""===n?t:(void 0===t&&(t="",n+=" is empty"),'<span class="sr-only">'+n+" </span>"+t)},t=function(e){var t=e.column.get("template"),n=t(e.model.toJSON());return n},n=function(e){var t=e.column.attributes.name,n=e.model.get(t);return n},i=function(t,n){var i=e(t,n);t.$el.html(i)};return{setTemplateWithScreenReaderText:function(e){var n=t(e);i(e,n)},setModelValueWithScreenReader:function(e){var t=n(e);i(e,t)},setHtmlWithScreenReader:function(e,t){i(e,t)}}}),define("main/backgrid/extensions/defaultOverrides",["backgrid","backgrid-moment-cell","main/backgrid/extensions/screenReaderCell"],function(e,t,n){"use strict";Backgrid.HandlebarsCell=Backgrid.Cell.extend({className:"handlebars-cell",render:function(){return this.$el.empty(),this.$el.html(this.column.get("template")(this.model.toJSON())),this.delegateEvents(),this}})}),function(e){define("backgrid.filter",["backgrid"],function(){return function(){!function(e,t){"object"==typeof exports?!function(){var e;try{e=require("lunr")}catch(n){}module.exports=t(require("underscore"),require("backbone"),require("backgrid"),e)}():t(e._,e.Backbone,e.Backgrid,e.lunr)}(this,function(e,t,n,i){"use strict";var o=n.Extension.ServerSideFilter=t.View.extend({tagName:"form",className:"backgrid-filter form-search",template:e.template('<span class="search">&nbsp;</span><input type="search" <% if (placeholder) { %> placeholder="<%- placeholder %>" <% } %> name="<%- name %>" /><a class="clear" data-backgrid-action="clear" href="#">&times;</a>',null,{variable:null}),events:{"keyup input[type=search]":"showClearButtonMaybe","click a[data-backgrid-action=clear]":"clear",submit:"search"},name:"q",placeholder:null,initialize:function(e){o.__super__.initialize.apply(this,arguments),this.name=e.name||this.name,this.placeholder=e.placeholder||this.placeholder,this.template=e.template||this.template;var n=this.collection,i=this;t.PageableCollection&&n instanceof t.PageableCollection&&"server"==n.mode&&(n.queryParams[this.name]=function(){return i.searchBox().val()||null})},showClearButtonMaybe:function(){var e=this.clearButton(),t=this.searchBox().val();t?e.show():e.hide()},searchBox:function(){return this.$el.find("input[type=search]")},clearButton:function(){return this.$el.find("a[data-backgrid-action=clear]")},search:function(e){e&&e.preventDefault();var n={},i=this.searchBox().val();i&&(n[this.name]=i);var o=this.collection;t.PageableCollection&&o instanceof t.PageableCollection?o.getFirstPage({data:n,reset:!0,fetch:!0}):o.fetch({data:n,reset:!0})},clear:function(e){e&&e.preventDefault(),this.searchBox().val(null),this.showClearButtonMaybe();var n=this.collection;t.PageableCollection&&n instanceof t.PageableCollection?n.getFirstPage({reset:!0,fetch:!0}):n.fetch({reset:!0})},render:function(){return this.$el.empty().append(this.template({name:this.name,placeholder:this.placeholder,value:this.value})),this.showClearButtonMaybe(),this.delegateEvents(),this}}),r=n.Extension.ClientSideFilter=o.extend({events:e.extend({},o.prototype.events,{"click a[data-backgrid-action=clear]":function(e){e.preventDefault(),this.clear()},"keydown input[type=search]":"search",submit:function(e){e.preventDefault(),this.search()}}),fields:null,wait:149,initialize:function(t){r.__super__.initialize.apply(this,arguments),this.fields=t.fields||this.fields,this.wait=t.wait||this.wait,this._debounceMethods(["search","clear"]);var n=this.collection=this.collection.fullCollection||this.collection,i=this.shadowCollection=n.clone();this.listenTo(n,"add",function(e,t,n){i.add(e,n)}),this.listenTo(n,"remove",function(e,t,n){i.remove(e,n)}),this.listenTo(n,"sort",function(e){this.searchBox().val()||i.reset(e.models)}),this.listenTo(n,"reset",function(t,n){n=e.extend({reindex:!0},n||{}),n.reindex&&null==n.from&&null==n.to&&i.reset(t.models)})},_debounceMethods:function(t){e.isString(t)&&(t=[t]),this.undelegateEvents();for(var n=0,i=t.length;i>n;n++){var o=t[n],r=this[o];this[o]=e.debounce(r,this.wait)}this.delegateEvents()},makeRegExp:function(e){return new RegExp(e.trim().split(/\s+/).join("|"),"i")},makeMatcher:function(e){var t=this.makeRegExp(e);return function(e){for(var n=this.fields||e.keys(),i=0,o=n.length;o>i;i++)if(t.test(e.get(n[i])+""))return!0;return!1}},search:function(){var t=e.bind(this.makeMatcher(this.searchBox().val()),this),n=this.collection;n.pageableCollection&&n.pageableCollection.getFirstPage({silent:!0}),n.reset(this.shadowCollection.filter(t),{reindex:!1})},clear:function(){this.searchBox().val(null),this.showClearButtonMaybe();var e=this.collection;e.pageableCollection&&e.pageableCollection.getFirstPage({silent:!0}),e.reset(this.shadowCollection.models,{reindex:!1})}}),a=n.Extension.LunrFilter=r.extend({ref:"id",fields:null,initialize:function(e){a.__super__.initialize.apply(this,arguments),this.ref=e.ref||this.ref;var t=this.collection=this.collection.fullCollection||this.collection;this.listenTo(t,"add",this.addToIndex),this.listenTo(t,"remove",this.removeFromIndex),this.listenTo(t,"reset",this.resetIndex),this.listenTo(t,"change",this.updateIndex),this.resetIndex(t)},resetIndex:function(t,n){if(n=e.extend({reindex:!0},n||{}),n.reindex){var o=this;this.index=i(function(){e.each(o.fields,function(e,t){this.field(t,e),this.ref(o.ref)},this)}),t.each(function(e){this.addToIndex(e)},this)}},addToIndex:function(e){var t=this.index,n=e.toJSON();t.documentStore.has(n[this.ref])?t.update(n):t.add(n)},removeFromIndex:function(e){var t=this.index,n=e.toJSON();t.documentStore.has(n[this.ref])&&t.remove(n)},updateIndex:function(t){var n=t.changedAttributes();n&&!e.isEmpty(e.intersection(e.keys(this.fields),e.keys(n)))&&this.index.update(t.toJSON())},search:function(){var e=this.collection;if(!this.searchBox().val())return void e.reset(this.shadowCollection.models,{reindex:!1});for(var t=this.index.search(this.searchBox().val()),n=[],i=0;i<t.length;i++){var o=t[i];n.push(this.shadowCollection.get(o.ref))}e.pageableCollection&&e.pageableCollection.getFirstPage({silent:!0}),e.reset(n,{reindex:!1})}})})}.apply(e,arguments)})}(this),function(e,t){"object"==typeof exports&&(module.exports=t(require("underscore"),require("backbone"),require("backgrid"),require("backbone.paginator"))),"function"==typeof define&&define.amd?define("backgrid.paginator",["underscore","backbone","backgrid","backbone.paginator"],t):t(e._,e.Backbone,e.Backgrid)}(this,function(e,t,n){"use strict";var i=n.Extension.PageHandle=t.View.extend({tagName:"li",events:{"click [title='Next']":"changePage","click [title='Previous']":"changePage"},title:function(e){return"Page "+e.label},isRewind:!1,isBack:!1,isForward:!1,isFastForward:!1,initialize:function(t){var n=this.collection,i=n.state,o=i.currentPage,r=i.firstPage,a=i.lastPage;e.extend(this,e.pick(t,["isRewind","isBack","isForward","isFastForward"]));var s;this.isRewind?s=r:this.isBack?s=Math.max(r,o-1):this.isForward?s=Math.min(a,o+1):this.isFastForward?s=a:(s=+t.pageIndex,s=r?s+1:s),this.pageIndex=s,this.label=(t.label||(r?s:s+1))+"";var l=t.title||this.title;this.title=e.isFunction(l)?l({label:this.label}):l},render:function(){this.$el.empty();var e=document.createElement("a");e.href="#",this.title&&(e.title=this.title),e.innerHTML=this.label,this.el.appendChild(e);var t=this.collection,n=t.state,i=n.currentPage,o=this.pageIndex;return this.isRewind&&i==n.firstPage||this.isBack&&!t.hasPreviousPage()||this.isForward&&!t.hasNextPage()||this.isFastForward&&(i==n.lastPage||n.totalPages<1)?this.$el.addClass("disabled"):this.isRewind||this.isBack||this.isForward||this.isFastForward||n.currentPage!=o||this.$el.addClass("active"),this.delegateEvents(),this},changePage:function(e){e.preventDefault();var t=this.$el,n=this.collection;return t.hasClass("active")||t.hasClass("disabled")||(this.isRewind?n.getFirstPage():this.isBack?n.getPreviousPage():this.isForward?n.getNextPage():this.isFastForward?n.getLastPage():n.getPage(this.pageIndex,{reset:!0})),this}}),o=n.Extension.Paginator=t.View.extend({className:"backgrid-paginator",windowSize:25,slideScale:.5,controls:{rewind:{label:"《",title:"First"},forward:{label:" ",title:"Next"},back:{label:" ",title:"Previous"},fastForward:{label:"》",title:"Last"}},renderIndexedPageHandles:!0,pageHandle:i,goBackFirstOnSort:!0,initialize:function(t){var n=this;n.controls=e.defaults(t.controls||{},n.controls,o.prototype.controls),e.extend(n,e.pick(t||{},"windowSize","pageHandle","slideScale","goBackFirstOnSort","renderIndexedPageHandles"));var i=n.collection;n.listenTo(i,"add",n.render),n.listenTo(i,"remove",n.render),n.listenTo(i,"reset",n.render),n.listenTo(i,"backgrid:sorted",function(){n.goBackFirstOnSort&&i.getFirstPage({reset:!0})})},slideMaybe:function(e,t,n,i,o){return Math.round(n%i/i)},slideThisMuch:function(e,t,n,i,o){return~~(i*o)},_calculateWindow:function(){var e=this.collection,t=e.state,n=t.firstPage,i=+t.lastPage;i=Math.max(0,n?i-1:i);var o=Math.max(t.currentPage,t.firstPage);o=n?o-1:o;var r=this.windowSize,a=this.slideScale,s=Math.floor(o/r)*r;o<=i-this.slideThisMuch()&&(s+=this.slideMaybe(n,i,o,r,a)*this.slideThisMuch(n,i,o,r,a));
var l=Math.min(i+1,s+r);return[s,l]},makeHandles:function(){var t=[],n=this.collection,i=this._calculateWindow(),o=i[0],r=i[1];if(this.renderIndexedPageHandles)for(var a=o;r>a;a++)t.push(new this.pageHandle({collection:n,pageIndex:a}));var s=this.controls;return e.each(["back","null","forward","null"],function(e){var i=s[e];if(i){var o={collection:n,title:i.title,label:i.label};o["is"+e.slice(0,1).toUpperCase()+e.slice(1)]=!0;var r=new this.pageHandle(o);t.push(r)}},this),t},render:function(){if(this.$el.empty(),this.handles)for(var e=0,t=this.handles.length;t>e;e++)this.handles[e].remove();for(var n=this.handles=this.makeHandles(),i=document.createElement("ul"),e=0;e<n.length;e++)i.appendChild(n[e].render().el);return this.el.appendChild(i),this}})}),define("main/backgrid/datagrid",["backbone","marionette","jquery","underscore","backgrid","main/backgrid/dataGridView","main/backgrid/extensions/clickableRow","main/backgrid/extensions/modalRow","main/backgrid/extensions/headerCell","main/backgrid/extensions/groupBy/groupByBody","main/backgrid/extensions/groupBy/groupByHeader","backgrid-moment-cell","main/backgrid/extensions/defaultOverrides","backgrid.filter","backgrid.paginator"],function(e,t,n,i,o,r,a,s,l,d,c){"use strict";var u={};return u.returnView=function(e){var t=r.extend({initialize:function(){this.options=e,this.appletConfig=e.appletConfig;var t={};i.each(e.columns,function(t){t.editable=!1,t.headerCell=l,t.sortType="toggle",e.groupable&&t.groupable&&(t.headerCell=c,t.sortable=!0,t.sortType="cycle"),t.appletId=e.appletConfig.id,void 0===t.cell&&(t.cell="string"),void 0===t.sortValue&&(t.sortValue=function(e,t){return e.get(t)?e.get(t).toLowerCase():""})});var n=e.groupable?d:e.body||void 0;e.enableModal===!0?this.gridView=new o.Grid({id:"data-grid-"+e.appletConfig.id,className:"backgrid table table-hover",row:s,body:n,columns:e.columns,collection:e.collection,emptyText:e.emptyText,groupableOptions:t}):this.gridView=new o.Grid({id:"data-grid-"+e.appletConfig.id,className:"backgrid table table-hover",row:a,body:n,columns:e.columns,collection:e.collection,emptyText:e.emptyText,groupableOptions:t})},onRender:function(){this.dataGrid.show(this.gridView)},events:{"click tr.selectable":"onClickRow","keydown tr.selectable":"onEnterRow","keydown th":"onEnterHeader"},onDestroy:function(){try{this.loadingView&&!this.loadingView.isDestroyed&&(this.loadingView.destroy(),this.loadingView=null)}catch(e){console.error("Error destroying loadingView in applet:",this.appletConfig.id,e)}try{this.gridView&&(i.isFunction(this.gridView.remove)&&this.gridView.remove(),i.isFunction(this.gridView.destroy)&&this.gridView.destroy(),delete this.gridView)}catch(e){console.error("Error destroying gridView in applet:",this.appletConfig.id,e)}},onEnterRow:function(e){(13==e.which||32==e.which)&&n(e.target).click()},onEnterHeader:function(e){(13==e.which||32==e.which)&&n(e.target).find("a").click()},onClickRow:function(e){function t(e,t){var i=n(t.target).closest("tr"),o=i.data("model");e.options.onClickRow?e.options.onClickRow(o,t,e):e.options.DetailsView&&e.expandRow(o,t)}ADK.utils.infoButtonUtils.onClickFunc(this,e,t)},expandRow:function(e,t){var o=this.options.collection,r=this.options.DetailsView,a=n(t.currentTarget).closest("tr");a.removeAttr("data-toggle"),a.removeAttr("data-target");var s=a.attr("id").replace(/[^\w\s]/gi,""),l="details-"+s,d="#details-"+s;if(n(d).hasClass("hide")?(n(d).removeClass("hide"),a.focus()):n(d).addClass("hide"),0===n(d).length){a.focus();var c=a.children().length,u=n("<td/>").addClass("renderable").attr("colspan",c).attr("id",l).addClass("expanded-row"),h=n("<tr/>");u.appendTo(h),h.insertAfter(a);var p={};p[l]=d,this.addRegions(p);var g=new r({model:e,collection:o});this[l].show(g),o.length>0&&!i.isUndefined(this.options.tblRowSelector)&&n(d).find("tbody tr").each(function(){n(this).attr("data-infobutton",n(this).find("td:nth-child(2)").text())})}}});return t},u.create=function(e){var t=this.returnView(e);return new t},u}),define("main/backgrid/filterTagView",["backbone","marionette","underscore","api/ResourceService","main/api/WorkspaceFilters"],function(e,t,n,i,o){"use strict";var r=(e.Model.extend({defaults:{name:"",workspaceId:"",instanceId:"",status:""}}),e.Marionette.ItemView.extend({tagName:"span",className:"udaf-tag",events:{"click a.clear-udaf-tag":"clear"},clear:function(e){if(e.preventDefault(),1===this.model.collection.length)return void this.$el.parent().parent().find(".remove-all").click();var t,n,i;i=this.model.get("name"),t=this.model.get("workspaceId"),n=this.model.get("instanceId"),this.model.collection.remove(this.model),this.remove();var r=this.options.fullScreen;r?o.deleteFilterFromSession(t,n,i):o.deleteFilterFromJDS(t,n,i)},initialize:function(e){var t,i,r=this.model.get("name");if(e.onUserWorkspace?this.template=n.template('<span class="btn btn-default btn-sm">'+r+'<a href="#" class="clear-udaf-tag"><i class="fa fa-times-circle"></i><span class="sr-only">Press enter to delete '+r+" filter</span></a></span>",null,{variable:null}):this.template=n.template('<span class="btn btn-default btn-sm">'+r+"</span>",null,{variable:null}),t=this.model.get("workspaceId"),i=this.model.get("instanceId"),"new"===this.model.get("status")){var a=e.fullScreen;a?o.saveFilterToSession(t,i,r):o.saveFilterToJDS(t,i,r)}},render:function(){return this.$el.html(this.template()),this}}));return r}),define("hbs!main/backgrid/filterTemplate",["hbs","handlebars"],function(e,t){var n=t.template({1:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'	placeholder="'+s((o=null!=(o=t.placeholder||(null!=e?e.placeholder:e))?o:a,typeof o===r?o.call(e,{name:"placeholder",hash:{}}):o))+'"\n'},3:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'	value="'+s((o=null!=(o=t.value||(null!=e?e.value:e))?o:a,typeof o===r?o.call(e,{name:"value",hash:{}}):o))+'"\n'},5:function(e,t,n,i){return'		<button type="submit" class="filter-add btn btn-default" value="ADD">Add</button>\n'},7:function(e,t,n,i){return'		<div class="filter-wrapper">\n			<div class="filter-name">\n				<label for="filtername">Filter Name:</label>\n				<span class="text-left filter-title">Filtered</span>\n		 	 	<input id="filtername" class="input-mini filter-title-input hidden" type="text" maxlength="30"  />\n		 	</div>\n			<div class="remove-all-div"><a href="javascript:" title="Remove All" class="remove-all">Remove All</a></div>\n		</div>\n		<br>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d='<fieldset>\n	<legend class="sr-only">Search for filter</legend>\n	<label class="sr-only" for="input-filter-search">Enter Filter</label>\n	<span class="search">&nbsp;</span>\n	<input pattern="[^\\*%&\\^$#\\!]*" id="input-filter-search" type="search" title="Enter Filter"\n';return o=t["if"].call(e,null!=e?e.placeholder:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop}),null!=o&&(d+=o),d+='	name="'+l((r=null!=(r=t.name||(null!=e?e.name:e))?r:s,typeof r===a?r.call(e,{name:"name",hash:{}}):r))+'"\n',o=t["if"].call(e,null!=e?e.value:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop}),null!=o&&(d+=o),d+='	/>\n	<a class="clear" data-backgrid-action="clear" href="#">\n		<i class="fa fa-times"></i>\n		<span class="sr-only">Press enter to clear filter text</span>\n	</a>\n',o=t["if"].call(e,null!=e?e.onUserWorkspace:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop}),null!=o&&(d+=o),d+='	<div class="filter-container hidden">\n',o=t["if"].call(e,null!=e?e.onUserWorkspace:e,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop}),null!=o&&(d+=o),d+'		<div class="udaf-border"></div>\n		<div class="udaf"></div>\n	</div>\n</fieldset>\n'}});return t.registerPartial("main/backgrid/filterTemplate",n),n}),define("main/backgrid/filter",["backbone","marionette","jquery","underscore","moment","backgrid","main/backgrid/filterTagView","api/ResourceService","hbs!main/backgrid/filterTemplate","api/Messaging","main/api/WorkspaceFilters","main/Utils"],function(e,t,n,i,o,r,a,s,l,d,c,u){"use strict";var h,p,g={},f=window.navigator.userAgent,m=f.indexOf("MSIE "),v=e.Model.extend({defaults:{name:"",workspaceId:"",instanceId:"",status:""}}),b=e.Collection.extend({model:v});return g.create=function(t){r.ClientSideFilterWithDateRangePickerFilter=r.Extension.ClientSideFilter.extend({preFilterCollection:null,dateField:null,setDateField:function(e){this.dateField=e},events:i.extend({},r.Extension.ClientSideFilter.prototype.events,{submit:"addFilterOnSubmit","click a.remove-all":"removeAllFilters","click .filter-title":"filterEditModeFromUi","focusout .filter-title-input":"filterEditModeFromUi","change .filter-title-input":"saveFilter","keypress .filter-title-input":"filterKeypress"}),addFilter:function(e){if(!(e.length<1)){var t=this.userDefinedFilters.findWhere({name:e});if(!t){var n,i;n=new v({name:e,workspaceId:this.workspaceId,instanceId:this.instanceId,status:"new"}),this.userDefinedFilters.add(n),i=new a({model:n,onUserWorkspace:this.onUserWorkspace,fullScreen:this.fullScreen}),this.$(".udaf").append(i.render().el),ADK.SessionStorage.setAppletStorageModel(this.instanceId,"filterText","",!0),this.searchBox().val(""),void 0!==this.collection._events.customfilter?this.doCustomSearch():this.doSearch(),this.userDefinedFiltersCollectionChanged(),this.listenTo(this.userDefinedFilters,"model: remove",this.onUserDefinedFilterRemove)}}},addFilterOnSubmit:function(e){if(e.preventDefault(),this.onUserWorkspace){var t=this.searchBox().val().trim();if(0!==t.length){var n=t.split(" ");i.each(n,this.addFilter,this)}}},getFilterTextbox:function(){return this.$el.find(".filter-title-input")},getFilterLabel:function(){return this.$el.find(".filter-title")},filterKeypress:function(e){13==e.which&&this.getFilterTextbox().focusout()},saveFilter:function(){var e=this.getFilterTextbox(),t=e.val();if(""!==t){var n=this.getFilterLabel();n.text(t),this.$el.parents(".gs-w").attr("data-filter-name",t),d.trigger("gridster:saveAppletsConfig"),this.$el.parents(".gs-w").find(".applet-filter-title").text(t)}},removeAllFilters:function(e){e.preventDefault(),this.fullScreen?c.removeAllFiltersFromAppletFromSession(this.workspaceId,this.instanceId):c.removeAllFiltersFromApplet(this.workspaceId,this.instanceId),ADK.SessionStorage.setAppletStorageModel(this.instanceId,"filterText","",!0),this.userDefinedFilters.reset(),this.clear(),this.$(".udaf").html(""),this.userDefinedFiltersCollectionChanged()},filterEditModeFromUi:function(e){var t=n(e.target).hasClass("filter-title-input");this.filterEditMode(!t)},filterEditMode:function(e){var t=this.getFilterLabel(),n=this.getFilterTextbox();if(this.setVisible(t,!e),this.setVisible(n,e),e){var i=t.text();n.focus().val(i)}},setVisible:function(e,t){t?e.removeClass("hidden"):e.addClass("hidden")},setVisibleWithTransition:function(e,t){t?(e.removeClass("hidden"),e.collapse("show")):e.collapse("hide")},onShow:function(){var e=this;c.onRetrieveWorkspaceFilters(e.instanceId,function(t){var n,i,o,r,s,l=e.$el.parents(".gs-w").attr("data-filter-name");for(e.getFilterLabel().text(l),i=t.applet?t.applet.filters:t.applet,o=i?i.length:0,n=0;o>n;n++)r=new v({name:i[n],workspaceId:e.workspaceId,instanceId:e.instanceId,status:"SAVED"}),e.userDefinedFilters.add(r),s=new a({model:r,onUserWorkspace:e.onUserWorkspace,fullScreen:e.fullScreen}),e.$(".udaf").append(s.render().el),e.listenTo(e.userDefinedFilters,"model: remove",e.onUserDefinedFilterRemove);e.userDefinedFiltersCollectionChanged.call(e);var d=e,c=0,u=setInterval(function(){d.collection.size()>0||c>=10?(d.search(),clearInterval(u)):c++},500);e.search()}),this.listenTo(d,"globalDate:selected",this.onCollectionChange),this.listenTo(this.collection,"fetchSuccessfull",this.onFetchCollection),this.listenTo(this.collection,"backgrid:sorted",this.onSort),this.listenTo(this.collection,"baseGistView:sortNone",this.onSortNone),this.listenTo(this.collection,"baseGistView:sortManual",this.onSortManual)},render:function(){var e,t=this,n=0;this.$el.html(this.template(this)),u.applyMaskingForSpecialCharacters(this.$el.find(".filter-title-input"));var i=setInterval(function(){t.$el.parents(".gs-w").length>0||n>=10?(clearInterval(i),e=t.$el.parents(".gs-w").attr("data-filter-name"),t.getFilterLabel().text(e)):n++},100);return this},initialize:function(e){r.ClientSideFilterWithDateRangePickerFilter.__super__.initialize.apply(this,arguments),this.userDefinedFilters=new b,this.instanceId=e.instanceId,this.workspaceId=e.workspaceId,this.fullScreen=e.fullScreen,this.collection=e.collection,this.maximizedScreen=e.maximizedScreen,this.model=e.model;var t=d.request("get:current:screen");this.onUserWorkspace=t.config.predefined===!1?!0:!1;var n=t.config.locked;n&&(this.onUserWorkspace=!n.filters),this.prevSearchTextLength=0,this.hasActiveSearch=!1},updateAdvancedFilterOptionsVisibility:function(){var e=this.$el.find(".filter-container"),t=this.userDefinedFilters.length>0,n=t;this.setVisibleWithTransition(e,n)},userDefinedFiltersCollectionChanged:function(){this.updateAdvancedFilterOptionsVisibility();var e=this.userDefinedFilters.length>0;c.triggerGlobalFiltersChangedAlert(this.instanceId,e)},onCollectionChange:function(e){return this.searchBox().focus(),this.preFilterCollection=null,void 0!==this.collection._events.customfilter?this.doCustomSearch():this.doSearch(),!0},onUserDefinedFilterRemove:function(){ADK.SessionStorage.setAppletStorageModel(this.instanceId,"filterText","",!0),this.searchBox().focus(),void 0!==this.collection._events.customfilter?this.doCustomSearch():this.doSearch(),this.userDefinedFiltersCollectionChanged()},search:function(){var e=0,n=this;return void 0!==this.collection._events.customfilter?(p&&clearTimeout(p),void(p=setTimeout(function(){n.doCustomSearch()},400))):(void 0!==this.collection.pageableCollection&&void 0!==this.collection.pageableCollection.originalModels?e=this.collection.pageableCollection.originalModels.length:void 0!==this.collection.originalModels&&(e=this.collection.originalModels.length),this.searchBox().val().length<1&&this.searchBox().val().length>this.prevSearchTextLength&&this.collection.models.length===e&&0===this.userDefinedFilters.length||!this.patternIsMatched(this.searchBox())?void(this.prevSearchTextLength=this.searchBox().val().length):(this.prevSearchTextLength=this.searchBox().val().length,h&&clearTimeout(h),h=setTimeout(function(){n.doSearch()},400),void(void 0!==this.collection._events.filterDone&&t.collection.trigger("filterDone"))))},doCustomSearch:function(){var e=this.getFilterRegExp();t.collection.trigger("customfilter",e)},getFilterRegExp:function(){var e=this.searchBox().val().trim();void 0!==this.userDefinedFilters&&this.userDefinedFilters.length>0&&this.userDefinedFilters.each(function(t){e=e+(e.length>0?" ":"")+t.get("name")});var t;try{t=this.makeRegExp(e)}catch(n){return!0}return t},getFilterValues:function(){var e=[];void 0!==this.userDefinedFilters&&(e=i.map(this.userDefinedFilters.models,function(e){return e.get("name")}));var t=this.searchBox().val().trim();return e.push(t),i.filter(e,function(e){return""!==e})},doSearch:function(t){var n=this.getFilterValues(),o=i.reduce(n,function(e,t){var n=""===e?"":" ";return e+n+t},"");m>0&&(o=o.replace(/[\%&\^$\!]/gi,"")),o=o.replace(/\s/g,"|");var r=!0;if(0===o.length?this.hasActiveSearch?this.hasActiveSearch=!1:r=!1:this.hasActiveSearch=!0,r){if(null===this.preFilterCollection||0===this.preFilterCollection.length){var a=this.collection.fullCollection||this.collection;this.preFilterCollection=a.clone()}var s=i.bind(this.makeMatcher(o),this),l=this.collection;l.pageableCollection&&l.pageableCollection.getFirstPage({silent:!0}),l instanceof e.PageableCollection?(l.fullCollection.reset(this.preFilterCollection.models,{silent:!0}),l.getFirstPage({silent:!0}),l.fullCollection.reset(l.fullCollection.filter(s),{reindex:!0})):l.reset(this.preFilterCollection.filter(s),{reindex:!1}),l.comparator&&l.sort(),l.markInfobutton&&l.markInfobutton.func(l.markInfobutton.that)}},destroy:function(){this.collection.fullCollection&&this.collection.fullCollection.markInfobutton&&(this.collection.fullCollection.markInfobutton=null),this.collection&&this.collection.markInfobutton&&(this.collection.markInfobutton=null),this.remove()},onFetchCollection:function(){this.preFilterCollection=null},onSort:function(){void 0!==this.collection._events.customfilter?this.doCustomSearch():this.doSearch()},onSortNone:function(){this.preFilterCollection=null,void 0!==this.collection._events.customfilter?this.doCustomSearch():this.doSearch()},onSortManual:function(e){i.isUndefined(e)?this.preFilterCollection=null:this.preFilterCollection=e,void 0!==this.collection._events.customfilter?this.doCustomSearch():this.doSearch()},clear:function(){if(this.searchBox().val(""),this.toggleClearButton(),void 0!==this.collection._events.filterDone&&t.collection.trigger("filterDone"),void 0!==this.collection._events.clear_customfilter){var e=this.getFilterRegExp();return void t.collection.trigger("clear_customfilter",e)}this.searchBox().focus(),void 0!==this.collection._events.customfilter?this.doCustomSearch():this.doSearch(),t.collection.markInfobutton&&t.collection.markInfobutton.func(t.collection.markInfobutton.that)},toggleClearButton:function(){var e=this.clearButton(),t=this.searchBox().val();t.length>0?e.show():e.hide()},invalidInput:function(e){var t=/[^\%&\^$\!]/gi;t.test(e)},patternIsMatched:function(e){var t=[];return m>0?(t=n(e).parent().find("input").val(),!this.invalidInput(t)):(t=n(e).parent().find("input:valid"),t.length>0?!0:!1)},makeMatcher:function(e){var t;try{t=this.makeRegExp(e)}catch(n){return!0}var i=function(e){return t.test(e)},o=function(e,t){return"string"==typeof t?e[t]:t(e)};return function(e){for(var t=e.toJSON(),n=this.fields,r=this.fields||e.keys(),a=0,s=r.length;s>a;a++){var l=r[a],d=o(t,l);if(("observed"===l||"entered"===l)&&void 0!==d){var c=d+"";c=d.slice(0,8),c=d.replace(/(\d{4})(\d{2})(\d{2})/,"$2/$3/$1");var u=d+"";if(u=d.slice(0,8),i(c)||i(u))return!0}if(i(d+""))return!0}var h=!1,p=e.get("isPanel");if(void 0!==p&&null!==p&&"Panel"===p){var g=e.get("labs");void 0!==g&&null!==g&&g.each(function(e){for(var r=(e.toJSON(),n||e.keys()),a=0,s=r.length;s>a;a++){var l=r[a],d=o(t,l);if("observed"===l){var c=d+"";c=d.slice(0,8),c=d.replace(/(\d{4})(\d{2})(\d{2})/,"$2/$3/$1");var u=d+"";u=d.slice(0,8),(i(c)||i(u))&&(h=!0)}i(d+"")&&(h=!0)}})}return h}}});var o=new r.ClientSideFilterWithDateRangePickerFilter({instanceId:t.id,workspaceId:t.workspaceId,maximizedScreen:t.maximizedScreen,fullScreen:t.fullScreen,collection:t.collection,fields:t.filterFields,placeholder:"Enter your text filter",name:"q-"+t.id,template:l,model:t.model});return t.filterDateRangeEnabled&&o.setDateField(t.filterDateRangeField),o},g}),define("main/backgrid/paginator",["backbone","marionette","jquery","underscore","backgrid","backgrid.paginator"],function(e,t,n,i,o){"use strict";var r={};return r.create=function(e){var t=o.Extension.PageHandle.extend({render:function(e){this.$el.empty();var t;"Next"!==this.title&&"Previous"!==this.title?t=document.createElement("span"):(t=document.createElement("a"),t.href="#"),t.title=this.title,t.innerHTML=this.label,this.el.appendChild(t);var n=this.collection,i=n.state,o=i.currentPage,r=this.pageIndex;return this.isRewind&&o==i.firstPage||this.isBack&&!n.hasPreviousPage()||this.isForward&&!n.hasNextPage()||this.isFastForward&&(o==i.lastPage||i.totalPages<1)?this.$el.addClass("disabled"):this.isRewind||this.isBack||this.isForward||this.isFastForward||i.currentPage!=r||this.$el.addClass("active"),this.delegateEvents(),this}}),n={slideScale:0,pageHandle:t};i.extend(n,e);var r=new o.Extension.Paginator(n);return r},r}),define("hbs!main/components/applet_chrome/templates/containerTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'<div class="panel panel-primary">\n  <div class="panel-heading grid-applet-heading" title="'+s((o=null!=(o=t.title||(null!=e?e.title:e))?o:a,typeof o===r?o.call(e,{name:"title",hash:{}}):o))+'">\n    <span class="pull-right right-button-region">\n    </span>\n    <span class="pull-right">\n      <span class="grid-refresh-button"></span>\n    </span>\n    <span class="panel-title center-block">\n      <h5 class="panel-title-label">\n        '+s((o=null!=(o=t.title||(null!=e?e.title:e))?o:a,typeof o===r?o.call(e,{name:"title",hash:{}}):o))+'\n      </h5>\n      <input type="text" class="form-control input-sm center-block hidden panel-title-textbox text-align-center" value="'+s((o=null!=(o=t.title||(null!=e?e.title:e))?o:a,typeof o===r?o.call(e,{name:"title",hash:{}}):o))+'" maxlength="30" />\n    </span>\n  </div>\n\n  <div class="appletDiv_ChromeContainer"></div>\n  <div class="switchboard-container hide"></div>\n\n  <div class="grid-footer">\n    <span class="gs-resize-handle gs-resize-handle-both"></span>\n  </div>\n</div>\n'}});return t.registerPartial("main/components/applet_chrome/templates/containerTemplate",n),n}),define("hbs!main/components/applet_chrome/templates/addButtonTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<button type="button" class="applet-add-button btn btn-sm btn-link" tabindex="0" title="Add Item" tooltip-data-key=\'Add Item\'>\n	<span class="applet-title-button fa fa-plus">\n		<span class="sr-only">Add Item</span>\n	</span>\n</button>\n'}});return t.registerPartial("main/components/applet_chrome/templates/addButtonTemplate",n),n}),define("main/components/applet_chrome/views/addButtonView",["backbone","marionette","hbs!main/components/applet_chrome/templates/addButtonTemplate"],function(e,t,n){"use strict";var i=e.Marionette.ItemView.extend({tagName:"span",template:n});return i}),define("hbs!main/components/applet_chrome/templates/exitOptionsButtonTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<button type="button" class="applet-exit-options-button btn btn-sm btn-link" tabindex="0" title="Exit Options" tooltip-data-key="Exit Options">\n	<span class="applet-title-button fa fa-close">\n		<span class="sr-only">Exit Options</span>\n	</span>\n</button>\n'}});return t.registerPartial("main/components/applet_chrome/templates/exitOptionsButtonTemplate",n),n}),define("main/components/applet_chrome/views/exitOptionsButtonView",["backbone","marionette","hbs!main/components/applet_chrome/templates/exitOptionsButtonTemplate"],function(e,t,n){"use strict";var i=e.Marionette.ItemView.extend({tagName:"span",template:n});return i}),define("hbs!main/components/applet_chrome/templates/optionsButtonTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'<button type="button" id="grid-options-button-'+s((o=null!=(o=t.instanceId||(null!=e?e.instanceId:e))?o:a,typeof o===r?o.call(e,{name:"instanceId",hash:{}}):o))+'" data-toggle="collapse" data-target="#grid-options-'+s((o=null!=(o=t.instanceId||(null!=e?e.instanceId:e))?o:a,typeof o===r?o.call(e,{name:"instanceId",hash:{}}):o))+'" class="applet-options-button btn btn-sm btn-link" tabindex="0" title="Show Options" tooltip-data-key="Show Options">\n	<span class="applet-title-button fa fa-cog">\n		<span class="sr-only">Show Options</span>\n	</span>\n</button>\n'}});return t.registerPartial("main/components/applet_chrome/templates/optionsButtonTemplate",n),n}),define("main/components/applet_chrome/views/optionsButtonView",["backbone","marionette","jquery","underscore","hbs!main/components/applet_chrome/templates/optionsButtonTemplate","hbs!main/components/applet_chrome/templates/exitOptionsButtonTemplate"],function(e,t,n,i,o,r){"use strict";var a=e.Marionette.ItemView.extend({tagName:"span",modelEvents:{"change openContext":"render"},getTemplate:function(){return this.model.get("openContext")?r:o}});return a}),define("hbs!main/components/applet_chrome/templates/refreshButtonTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<button type="button" class="applet-refresh-button btn btn-sm btn-link" tabindex="0" title="Refresh" tooltip-data-key="Refresh">\n	<i class="applet-title-button fa fa-refresh"></i>\n	<span class="sr-only">Refresh</span>\n</button>\n\n'}});return t.registerPartial("main/components/applet_chrome/templates/refreshButtonTemplate",n),n}),define("main/components/applet_chrome/views/refreshButtonView",["backbone","marionette","hbs!main/components/applet_chrome/templates/refreshButtonTemplate"],function(e,t,n){"use strict";var i=e.Marionette.ItemView.extend({tagName:"span",template:n});return i}),define("hbs!main/components/applet_chrome/templates/maximizeTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<button type="button" class="applet-maximize-button btn btn-sm btn-link" tabindex="0" title="Maximize Applet" tooltip-data-key="Maximize Applet">\n	<span class="applet-title-button fa fa-expand">\n		<span class="sr-only">Maximize Applet</span>\n	</span>\n</button>\n\n\n'}});return t.registerPartial("main/components/applet_chrome/templates/maximizeTemplate",n),n}),define("hbs!main/components/applet_chrome/templates/minimizeTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<button type="button" class="applet-minimize-button btn btn-sm btn-link" tabindex="0" title="Minimize Applet" tooltip-data-key="Minimize Applet">\n	<span class="applet-title-button fa fa-close">\n		<span class="sr-only">Minimize Applet</span>\n	</span>\n</button>'}});return t.registerPartial("main/components/applet_chrome/templates/minimizeTemplate",n),n}),define("main/components/applet_chrome/views/resizeView",["backbone","marionette","jquery","underscore","hbs!main/components/applet_chrome/templates/maximizeTemplate","hbs!main/components/applet_chrome/templates/minimizeTemplate"],function(e,t,n,i,o,r){"use strict";var a=e.Marionette.ItemView.extend({tagName:"span",getTemplate:function(){return this.model.has("maximizeScreen")?o:this.model.get("fullScreen")===!0?r:i.template("")}});return a}),define("hbs!main/components/applet_chrome/templates/filterButtonTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'<button type="button" id="grid-filter-button-'+s((o=null!=(o=t.instanceId||(null!=e?e.instanceId:e))?o:a,typeof o===r?o.call(e,{name:"instanceId",hash:{}}):o))+'" data-toggle="collapse" data-target="#grid-filter-'+s((o=null!=(o=t.instanceId||(null!=e?e.instanceId:e))?o:a,typeof o===r?o.call(e,{name:"instanceId",hash:{}}):o))+'" class="applet-filter-button btn btn-sm btn-link" tabindex="0" title="Show Filter" tooltip-data-key="Show Filter">\n	<span class="applet-title-button">\n		<i class="fa fa-filter"></i>\n		<span class="sr-only">Show Filter</span>\n		<span class="applet-filter-title hidden">'+s((o=null!=(o=t.filterName||(null!=e?e.filterName:e))?o:a,typeof o===r?o.call(e,{name:"filterName",hash:{}}):o))+"</span>\n	</span>\n</button>\n"}});return t.registerPartial("main/components/applet_chrome/templates/filterButtonTemplate",n),n}),define("main/components/applet_chrome/views/filterButtonView",["backbone","marionette","jquery","underscore","hbs!main/components/applet_chrome/templates/filterButtonTemplate","api/SessionStorage","api/Messaging","main/api/WorkspaceFilters"],function(e,t,n,i,o,r,a,s){"use strict";var l=e.Marionette.ItemView.extend({tagName:"span",template:o,onShow:function(){var e=this.model.get("instanceId");s.onAppletFilterCollectionChanged(e,this.setVisibilityIfFilters,this)},onBeforeDestroy:function(){var e=this.model.get("instanceId");s.offAppletFilterCollectionChanged(e)},setVisibilityIfFilters:function(e){var t=this.$(".applet-filter-title");this.setVisible(t,e.anyFilters)},setVisible:function(e,t){t?e.removeClass("hidden"):e.addClass("hidden")},events:{"click button":"toggleFilterButtonEvent"},toggleFilterButtonEvent:function(){var e=this.model.get("instanceId"),t=n("#grid-filter-"+e),i=this.$el;t.hasClass("in")?(t.one("hidden.bs.collapse",function(){i.find("button").removeClass("filterOpen").attr("title","Show Filter"),i.find("button .sr-only").html("Show Filter");var t=r.getAppletStorageModel(e,"filterText");if(void 0!==t&&null!==t&&t.trim().length>0){var o="input[name='q-"+e+"']";n(o).val("").change().keydown()}}),t.collapse("hide")):(t.one("shown.bs.collapse",function(){i.find("button").addClass("filterOpen").attr("title","Hide Filters"),i.find("button .sr-only").html("Hide Filters")}),t.one("shown.bs.collapse",function(){t.find("input[type=search]").focus()}),t.collapse("show")),t.collapse("toggle")}});return l}),define("hbs!main/components/applet_chrome/templates/helpButtonTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'<a id="help-button-'+s((o=null!=(o=t.instanceId||(null!=e?e.instanceId:e))?o:a,typeof o===r?o.call(e,{name:"instanceId",hash:{}}):o))+'" class="test applet-help-button btn btn-sm btn-link" title="'+s((o=null!=(o=t.helpTooltip||(null!=e?e.helpTooltip:e))?o:a,typeof o===r?o.call(e,{name:"helpTooltip",hash:{}}):o))+'" tooltip-data-key="'+s((o=null!=(o=t.helpTooltip||(null!=e?e.helpTooltip:e))?o:a,typeof o===r?o.call(e,{name:"helpTooltip",hash:{}}):o))+'" href="#">\n	<i class="applet-title-button fa fa-question fa-lg"></i>\n	<span class="sr-only">Press enter to access the help content. You will be redirected to a new browser window.</span>\n</a>\n'}});return t.registerPartial("main/components/applet_chrome/templates/helpButtonTemplate",n),n}),define("main/components/applet_chrome/views/helpButtonView",["backbone","marionette","hbs!main/components/applet_chrome/templates/helpButtonTemplate"],function(e,t,n){"use strict";var i=e.Marionette.ItemView.extend({tagName:"span",template:n});return i}),define("main/components/applet_chrome/views/buttonCollectionView",["jquery","underscore","handlebars"],function(e,t,n){"use strict";var i=Backbone.Marionette.LayoutView.extend({template:n.compile('<span class="grid-{{id}}"></span>'),regions:{mainRegion:"span"},onShow:function(){this.mainRegion.show(this.model.get("view"))},tagName:"span"}),o=Backbone.Marionette.CollectionView.extend({childView:i});return o}),define("main/components/applet_chrome/chromeView",["jquery","underscore","api/Messaging","main/Utils","api/Navigation","api/ResourceService","api/SessionStorage","hbs!main/components/applet_chrome/templates/containerTemplate","main/components/applet_chrome/views/addButtonView","main/components/applet_chrome/views/exitOptionsButtonView","main/components/applet_chrome/views/optionsButtonView","main/components/applet_chrome/views/refreshButtonView","main/components/applet_chrome/views/resizeView","main/components/applet_chrome/views/filterButtonView","main/components/applet_chrome/views/helpButtonView","main/components/applet_chrome/views/buttonCollectionView","main/api/WorkspaceFilters"],function(e,t,n,i,o,r,a,s,l,d,c,u,h,p,g,f,m){"use strict";function v(e){var t=e.options.appletConfig.id,n=e.options.appletConfig.viewType;return t+=void 0!==n?"_"+n.replace("summary","standard"):"_expanded"}function b(e){var t=v(e);return i.helpUtils.getUrl(t)}function y(e){var t=v(e);return i.helpUtils.getTooltip(t)}var w=Backbone.Model.extend({defaults:{id:"",view:void 0}}),A=Backbone.Model.extend({defaults:{instanceId:void 0,workspaceId:void 0,maximizedAppletId:void 0,maximizedScreenId:void 0,filterName:""}}),N=Backbone.Marionette.LayoutView.extend({
initialize:function(e){this.buttonCollection=new Backbone.Collection,this.appletScreenConfig=this.appletScreenConfig||e.appletScreenConfig,this.model=new Backbone.Model(this.appletScreenConfig),this.AppletView=this.AppletView||e.AppletView,this.options=e,this.predefinedScreen=dd(e)("screenModule")("config")("predefined").val,dd(this.predefinedScreen).exists||(this.predefinedScreen=!0)},onShow:function(){this.createViews(),this.appletDiv.show(this.viewToDisplay),this.createPredefinedButtons(),this.buttonCollectionView=new f({collection:this.buttonCollection}),this.buttonRegion.show(this.buttonCollectionView),this.refreshButtonView&&this.chromeRefreshButton.show(this.refreshButtonView),this.ensureEditableTitleCssClass();var e=this.model.get("instanceId");m.onAppletFilterCollectionChanged(e,this.refreshAppletTitleColor,this)},onBeforeDestroy:function(){var e=this.model.get("instanceId");m.offAppletFilterCollectionChanged(e)},refreshAppletTitleColor:function(e){var t=e.anyFilters,n=this.$el.find(".panel-heading");t?n.addClass("panel-heading-filtered"):n.removeClass("panel-heading-filtered")},createViews:function(){this.AppletController?(this.viewToDisplay=new this.AppletController(this.options),this.listenTo(this.viewToDisplay.model,"change:currentView",this.appletViewTypeChange),this.appletView=this.viewToDisplay.model.get("currentView")):(this.viewToDisplay=new this.AppletView(this.options),this.appletView=this.viewToDisplay),this.appletView.eventMapper&&(this.eventMapper=this.appletView.eventMapper)},createPredefinedButtons:function(){this.refreshEnabled()&&(this.refreshButtonView=new u);var n=i.appletUtils.getViewTypeConfig(this.options,this.model.get("viewType"));dd(n)("chromeOptions")("additionalButtons").val&&n.chromeOptions.additionalButtons instanceof Array&&t.forEach(n.chromeOptions.additionalButtons,function(e){e.id&&e.view&&this.buttonCollection.add(new w({id:e.id,view:new e.view}))},this),this.helpEnabled()&&this.buttonCollection.add(new w({id:"help-button",view:new g({model:this.model.clone().set("helpTooltip",y(this.appletView))})})),this.appletView.hasOwnProperty("onClickAdd")&&this.buttonCollection.add(new w({id:"add-button",view:new l})),(this.appletView.hasOwnProperty("filterDateRangeView")||this.appletView.hasOwnProperty("filterView"))&&(this.model.get("filterName")||this.model.set("filterName","Filtered"),this.buttonCollection.add(new w({id:"filter-button",view:new p({model:this.model})}))),!this.predefinedScreen&&!this.model.has("fullScreen")&&e(".gridster").length>0&&this.AppletController&&this.buttonCollection.add(new w({id:"options-button",view:new c({model:new Backbone.Model({openContext:!1})})})),(this.model.has("maximizeScreen")||this.model.has("fullScreen")&&this.model.get("fullScreen")===!0)&&this.buttonCollection.add(new w({id:"resize",view:new h({model:this.model})}))},appletViewTypeChange:function(e){this.appletView=this.viewToDisplay.model.get("currentView"),this.model.set("viewType",e.get("currentViewType")),this.resetButtons(),this.$el.find(".appletDiv_ChromeContainer").removeClass("hide"),this.$el.find(".switchboard-container").addClass("hide"),this.$el.find(".grid-applet-heading").toggleClass("optionsPanelStyle panel-heading"),this.$el.find(".grid-refresh-button").removeClass("hide"),this.$el.find(".panel-title-label").text().indexOf("- Select a View")>-1?this.$el.find(".panel-title-label").text(this.model.attributes.title):this.$el.find(".panel-title-label").text(this.model.attributes.title+" - Select a View"),this.switchboardContainer.reset()},resetButtons:function(){this.buttonCollection.reset(),this.refreshButtonView=null,this.chromeRefreshButton.empty(),this.createPredefinedButtons(),this.refreshButtonView&&this.chromeRefreshButton.show(this.refreshButtonView)},ensureEditableTitleCssClass:function(){this.isTitleEditable()&&this.$el.addClass("editable-title")},onRender:function(){i.applyMaskingForSpecialCharacters(this.$el.find(".panel-title-textbox"))},template:s,regions:{appletDiv:".appletDiv_ChromeContainer",chromeContainer:".chrome-container",buttonRegion:".right-button-region",chromeRefreshButton:".grid-refresh-button",chromeFooter:".grid-footer",switchboardContainer:".switchboard-container"},events:{"click .applet-maximize-button":"expandApplet","click .applet-minimize-button":"minimizeApplet","click .applet-refresh-button":function(e){this.onClickButton("refresh",e)},"click .applet-add-button":function(e){this.onClickButton("add",e)},"click .applet-help-button":"showHelp","click .applet-options-button":"displaySwitchboard","click .applet-exit-options-button":"closeSwitchboard","click .panel-title-label":"setTitleModeFromUi","focusout .panel-title-textbox":"setTitleModeFromUi","change .panel-title-textbox":"saveTitle","keypress .panel-title-textbox":"titleKeypress"},titleKeypress:function(e){13==e.which&&this.getPanelTitleTextbox().focusout()},isTitleEditable:function(){var t=!n.request("get:current:screen").config.predefined,i="stackedGraph"===this.model.id,o=e(".panel-heading.grid-applet-heading",this.$el).length;return t&&i&&o},saveTitle:function(){var e=this.getPanelTitleTextbox(),t=e.val();if(""!==t){this.model.set("title",t);var i=this.getPanelTitleLabel();i.text(t).focus(),n.trigger("gridster:saveAppletsConfig")}},getPanelTitleTextbox:function(){return this.$el.find(".panel-title-textbox")},setVisible:function(e,t){t?e.removeClass("hidden"):e.addClass("hidden")},setTitleModeFromUi:function(t){var n=e(t.target).hasClass("panel-title-label");this.setTitleMode(n)},getPanelTitleLabel:function(){return this.$el.find(".panel-title-label")},setTitleMode:function(e){if(!this.isTitleEditable())return void console.log("Can't edit non-user defined workspaces");e=void 0===e?!0:e;var t=this.getPanelTitleLabel();t.width();this.setVisible(t,!e);var n=this.getPanelTitleTextbox();if(this.setVisible(n,e),n.width(350),e){var i=this.model.get("title");n.focus().val(i.trim())}},refreshEnabled:function(){if(this.eventMapper&&this.eventMapper.refresh){var e=this.eventMapper.refresh;if(t.isFunction(this.appletView[e]))return!0}return!1},helpEnabled:function(){var e=b(this.appletView);return""!==e},expandApplet:function(t){e(".popover").popover("hide"),e(".tooltip").tooltip("hide");var n=ADK.Messaging.request("get:current:screen").config.id,i=this;ADK.Messaging.reply("applet:maximized",function(){return new A({instanceId:i.options.appletConfig.instanceId,workspaceId:n,maximizedAppletId:i.options.appletConfig.id,maximizedScreenId:i.options.appletConfig.maximizeScreen,filterName:i.options.appletConfig.filterName})}),a.set.sessionModel("lastWorkspace",new Backbone.Model({workspace:n})),a.set.sessionModel("expandedAppletId",new Backbone.Model({id:this.options.appletConfig.instanceId})),o.navigate(this.model.get("maximizeScreen"))},minimizeApplet:function(t){e(".tooltip").tooltip("hide"),Backbone.history.history.back()},onClickButton:function(e,t){if(this.eventMapper&&this.eventMapper[e]&&null!==e){var n=this.eventMapper[e];this.appletView[n](t)}},toggleClasses_SwitchBoard_show_hide:function(){this.$el.find(".grid-applet-heading").toggleClass("optionsPanelStyle panel-heading"),this.$el.find(".grid-filter, .grid-toolbar, .grid-refresh-button").toggleClass("hide"),t.forEach(this.buttonCollection.models,function(e){"options-button"!=e.get("id")&&this.$el.find(".grid-"+e.get("id")).toggleClass("hide")},this),this.$el.find(".panel-title-label").text().indexOf("- Select a View")>-1?this.$el.find(".panel-title-label").text(this.model.attributes.title):this.$el.find(".panel-title-label").text(this.model.attributes.title+" - Select a View")},toolTipHide:function(t){e(".tooltip").tooltip("hide")},displaySwitchboard:function(e){this.toolTipHide(e);var i={appletController:this.viewToDisplay,region:this.viewToDisplay.appletRegion,containerRegion:this.options.region,appletId:this.appletScreenConfig.id,appletConfig:this.options.appletConfig,switchOnClick:!0,appletChrome:this},o=n.request("switchboard : display",i);this.switchboardContainer.show(o),this.$el.find(".appletDiv_ChromeContainer").addClass("hide"),this.$el.find(".switchboard-container").removeClass("hide"),t.find(this.buttonCollection.models,{id:"options-button"}).get("view").model.set("openContext",!0),this.toggleClasses_SwitchBoard_show_hide()},closeSwitchboard:function(e){this.toolTipHide(e),t.find(this.buttonCollection.models,{id:"options-button"}).get("view").model.set("openContext",!1),this.$el.find(".appletDiv_ChromeContainer").removeClass("hide"),this.$el.find(".switchboard-container").addClass("hide"),this.toggleClasses_SwitchBoard_show_hide(),this.switchboardContainer.reset()},addFilterOpenClass:function(){this.$el.find("#grid-filter-"+this.appletScreenConfig.id+":not(.collapse)").length>0&&this.filterButtonView.$el.find("button").addClass("filterOpen")},showHelp:function(e){var t=b(this.appletView);""!==t&&i.helpUtils.popupCenter(t,"helpIconUniqueWindow","715","300"),e.preventDefault()}});return N}),define("main/components/views/appletControllerView",["backbone","marionette","underscore","main/components/applet_chrome/chromeView","main/Utils"],function(e,t,n,i,o){"use strict";var r=e.Marionette.LayoutView.extend({template:n.template('<div class="gridContainer"><div>'),regions:{appletRegion:".gridContainer"},initialize:function(t){this.options=t,this.model=new e.Model,this.setView(this.viewType)},onShow:function(){this.showView()},modelEvents:{"change currentView":"showView"},showView:function(e){this.appletRegion.show(this.model.get("currentView"))},setView:function(e){var t=o.appletUtils.getViewTypeConfig(this.options,e);n.isUndefined(t)?this.options.defaultView?this.model.set({currentViewType:this.options.defaultView,currentView:new this.options.defaultView(this.options)}):console.log("View Type: '"+e+"' is not available for the "+this.options.appletConfig.id+" applet."):this.model.set({currentViewType:e,currentView:new t.view(this.options)})},changeView:function(e){this.setView(e)}});return r}),define("hbs!main/components/views/loadingTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<p><i class="fa fa-spinner fa-spin"></i> Loading...</p>\n'}});return t.registerPartial("main/components/views/loadingTemplate",n),n}),define("main/components/views/loadingView",["backbone","marionette","underscore","hbs!main/components/views/loadingTemplate"],function(e,t,n,i){"use strict";var o=e.Marionette.ItemView.extend({template:i}),r={create:function(e){return new o}};return r}),define("hbs!main/components/views/errorTemplate",["hbs","handlebars"],function(e,t){var n=t.template({1:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return"	"+s((o=null!=(o=t.message||(null!=e?e.message:e))?o:a,typeof o===r?o.call(e,{name:"message",hash:{}}):o))+"\n"},3:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return"	"+s((o=null!=(o=t.status||(null!=e?e.status:e))?o:a,typeof o===r?o.call(e,{name:"status",hash:{}}):o))+" - "+s((o=null!=(o=t.statusText||(null!=e?e.statusText:e))?o:a,typeof o===r?o.call(e,{name:"statusText",hash:{}}):o))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r='<h5><span class="fa fa-exclamation-circle"></span>\n';return o=t["if"].call(e,null!=e?e.message:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i)}),null!=o&&(r+=o),r+"</h5>\n"}});return t.registerPartial("main/components/views/errorTemplate",n),n}),define("main/components/views/errorView",["backbone","marionette","underscore","hbs!main/components/views/errorTemplate","api/ErrorMessaging"],function(e,t,n,i,o){"use strict";var r=e.Marionette.ItemView.extend({template:i,initialize:function(e){console.log("----------- ERROR -----------"),console.log("Error Object: "),console.log(JSON.stringify(this.model.attributes)),console.log("Response Text: "+this.model.get("responseText")),console.log("Response Status Text: "+this.model.get("statusText")),console.log("Response Status: "+this.model.get("status")),console.log("----------- END ERROR -----------"),this.model.set("message",o.getMessage(this.model.get("status")))}}),a={create:function(e){var t=new r(e);return t}};return a}),define("hbs!main/components/applets/grid_applet/templates/dateRangePickerTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'<button id="all-range-'+s((o=null!=(o=t.appletId||(null!=e?e.appletId:e))?o:a,typeof o===r?o.call(e,{name:"appletId",hash:{}}):o))+'" name="all-range-'+s((o=null!=(o=t.appletId||(null!=e?e.appletId:e))?o:a,typeof o===r?o.call(e,{name:"appletId",hash:{}}):o))+'" type="button" class="daterange btn btn-primary btn-sm default-range" tabindex="0" title="All range">All</button>\n<button id="2yr-range-'+s((o=null!=(o=t.appletId||(null!=e?e.appletId:e))?o:a,typeof o===r?o.call(e,{name:"appletId",hash:{}}):o))+'" name="2yr-range-'+s((o=null!=(o=t.appletId||(null!=e?e.appletId:e))?o:a,typeof o===r?o.call(e,{name:"appletId",hash:{}}):o))+'" type="button" class="daterange btn btn-primary btn-sm default-range" tabindex="0" title="2 years range"><span class="sr-only">2 years date range.</span>2yr</button>\n<button id="1yr-range-'+s((o=null!=(o=t.appletId||(null!=e?e.appletId:e))?o:a,typeof o===r?o.call(e,{name:"appletId",hash:{}}):o))+'" name="1yr-range-'+s((o=null!=(o=t.appletId||(null!=e?e.appletId:e))?o:a,typeof o===r?o.call(e,{name:"appletId",hash:{}}):o))+'" type="button" class="daterange btn btn-primary btn-sm default-range active-range-'+s((o=null!=(o=t.appletId||(null!=e?e.appletId:e))?o:a,typeof o===r?o.call(e,{name:"appletId",hash:{}}):o))+'" tabindex="0" title="1 year range"><span class="sr-only">1 year date range.</span>1yr</button>\n<button id="3mo-range-'+s((o=null!=(o=t.appletId||(null!=e?e.appletId:e))?o:a,typeof o===r?o.call(e,{name:"appletId",hash:{}}):o))+'" name="3mo-range-'+s((o=null!=(o=t.appletId||(null!=e?e.appletId:e))?o:a,typeof o===r?o.call(e,{name:"appletId",hash:{}}):o))+'" type="button" class="daterange btn btn-primary btn-sm default-range" tabindex="0" title="3 months range"><span class="sr-only">3 months date range.</span>3mo</button>\n<button id="1mo-range-'+s((o=null!=(o=t.appletId||(null!=e?e.appletId:e))?o:a,typeof o===r?o.call(e,{name:"appletId",hash:{}}):o))+'" name="1mo-range-'+s((o=null!=(o=t.appletId||(null!=e?e.appletId:e))?o:a,typeof o===r?o.call(e,{name:"appletId",hash:{}}):o))+'" type="button" class="daterange btn btn-primary btn-sm default-range" tabindex="0" title="1 month range"><span class="sr-only">1 month date range.</span>1mo</button>\n<button id="7d-range-'+s((o=null!=(o=t.appletId||(null!=e?e.appletId:e))?o:a,typeof o===r?o.call(e,{name:"appletId",hash:{}}):o))+'" name="7d-range-'+s((o=null!=(o=t.appletId||(null!=e?e.appletId:e))?o:a,typeof o===r?o.call(e,{name:"appletId",hash:{}}):o))+'" type="button" class="daterange btn btn-primary btn-sm default-range" tabindex="0" title="7 days range"><span class="sr-only">7 days date range.</span>7d</button>\n<button id="72hr-range-'+s((o=null!=(o=t.appletId||(null!=e?e.appletId:e))?o:a,typeof o===r?o.call(e,{name:"appletId",hash:{}}):o))+'" name="72hr-range-'+s((o=null!=(o=t.appletId||(null!=e?e.appletId:e))?o:a,typeof o===r?o.call(e,{name:"appletId",hash:{}}):o))+'" type="button" class="daterange btn btn-primary btn-sm default-range" tabindex="0" title="72 hours range"><span class="sr-only">72 hours date range.</span>72hr</button>\n<button id="24hr-range-'+s((o=null!=(o=t.appletId||(null!=e?e.appletId:e))?o:a,typeof o===r?o.call(e,{name:"appletId",hash:{}}):o))+'" name="24hr-range-'+s((o=null!=(o=t.appletId||(null!=e?e.appletId:e))?o:a,typeof o===r?o.call(e,{name:"appletId",hash:{}}):o))+'" type="button" class="daterange btn btn-primary btn-sm default-range" tabindex="0" title="24 hours range"><span class="sr-only">24 hours date range.</span>24hr</button>\n\n&nbsp;\n\n<div class="input-group date" id="custom-date-range1-'+s((o=null!=(o=t.appletId||(null!=e?e.appletId:e))?o:a,typeof o===r?o.call(e,{name:"appletId",hash:{}}):o))+'">\n  <input type="text" class="form-control input-sm" id="filter-from-date-'+s((o=null!=(o=t.appletId||(null!=e?e.appletId:e))?o:a,typeof o===r?o.call(e,{name:"appletId",hash:{}}):o))+'" name="filter-from-date-'+s((o=null!=(o=t.appletId||(null!=e?e.appletId:e))?o:a,typeof o===r?o.call(e,{name:"appletId",hash:{}}):o))+'" size="11" title="Enter or pick the first custom range date." tabindex="0"><span class="input-group-addon"><i class="fa fa-calendar"></i></span>\n</div>\n\n<span class="add-on">to</span>&nbsp;\n\n<div class="input-group date" id="custom-date-range2-'+s((o=null!=(o=t.appletId||(null!=e?e.appletId:e))?o:a,typeof o===r?o.call(e,{name:"appletId",hash:{}}):o))+'">\n  <input type="text" class="form-control input-sm" id="filter-to-date-vitals" name="filter-to-date-'+s((o=null!=(o=t.appletId||(null!=e?e.appletId:e))?o:a,typeof o===r?o.call(e,{name:"appletId",hash:{}}):o))+'" size="11" title="Enter or pick a date on or after the first custom range date." tabindex="0"><span class="input-group-addon"><i class="fa fa-calendar"></i></span>\n</div>\n\n&nbsp;\n<button id="custom-range-apply-'+s((o=null!=(o=t.appletId||(null!=e?e.appletId:e))?o:a,typeof o===r?o.call(e,{name:"appletId",hash:{}}):o))+'" name="custom-range-apply-'+s((o=null!=(o=t.appletId||(null!=e?e.appletId:e))?o:a,typeof o===r?o.call(e,{name:"appletId",hash:{}}):o))+'" type="button" class="btn btn-primary btn-sm" title="Apply custom date range filtering." tabindex="0" disabled>Apply</button>\n'}});return t.registerPartial("main/components/applets/grid_applet/templates/dateRangePickerTemplate",n),n}),define("main/components/applets/grid_applet/views/filterDateRangeView",["jquery","underscore","jquery.inputmask","bootstrap-datepicker","moment","hbs!main/components/applets/grid_applet/templates/dateRangePickerTemplate","api/SessionStorage"],function(e,t,n,i,o,r,a){"use strict";var s=Backbone.Marionette.ItemView.extend({tagName:"form",className:"form-inline",events:{"click button":"clickButton","keydown button":"handleEnterOrSpaceBar","keyup input":"monitorCustomDateRange","blur input":"monitorCustomDateRange","change input":"monitorCustomDateRange"},getTemplate:function(){return this.model.get("filterDateRangeEnabled")?r:t.template("")},monitorCustomDateRange:function(e){if(e.currentTarget.id==="filter-from-date-"+this.options.appletId){var t=this.$el.find("#filter-from-date-"+this.options.appletId).val(),n=o(t,"MM/DD/YYYY",!0);n.isValid()&&this.$(".input-group.date#custom-date-range2-"+this.options.appletId).datepicker("setStartDate",t)}this.checkCustomRangeCondition()?this.$el.find("#custom-range-apply-"+this.options.appletId).removeAttr("disabled"):this.$el.find("#custom-range-apply-"+this.options.appletId).prop("disabled",!0)},checkCustomRangeCondition:function(){var t=!1,n=this.$el.find("#filter-from-date-"+this.options.appletId).val(),i=this.$el.find("#filter-to-date-"+this.options.appletId).val(),r=o(n,"MM/DD/YYYY",!0),a=o(i,"MM/DD/YYYY",!0);return r.isValid()&&a.isValid()&&(r>a?(this.$el.find("#filter-to-date-"+this.options.appletId).tooltip({placement:"bottom"}).tooltip("show").val(""),t=!1):(e("#filter-to-date-"+this.options.appletId).tooltip("destroy"),t=!0)),t},enableDatePickers:function(){this.$(".input-group.date#custom-date-range1-"+this.options.appletId).datepicker({format:"mm/dd/yyyy",autoclose:!0}),this.$(".input-group.date#custom-date-range2-"+this.options.appletId).datepicker({format:"mm/dd/yyyy",autoclose:!0}),this.$("#filter-from-date-"+this.options.appletId).datepicker("remove"),this.$("#filter-to-date-"+this.options.appletId).datepicker("remove")},handleEnterOrSpaceBar:function(e){var t=e&&e.which?e.which:e.keyCode;if(13==t||32==t){var n=this.$el.find("#"+e.currentTarget.id);n.focus(),n.trigger("click")}},clickButton:function(e){var t=this.options.appletId;this.$el.find("button").removeClass("active-range"),e.currentTarget.id!=="custom-range-apply-"+this.options.appletId&&this.$el.find("#"+e.currentTarget.id).addClass("active-range");var n=null,i=o().add("months",6);switch(-1!==e.currentTarget.id.indexOf("-range-")&&-1===e.currentTarget.id.indexOf("custom-range-apply-"+this.options.appletId)&&(this.$el.find("#filter-from-date-"+t).val(""),this.$el.find("#filter-to-date-"+t).val(""),this.$el.find("#custom-range-apply-"+this.options.appletId).prop("disabled",!0)),e.currentTarget.id){case"all-range-"+t:i=o().add("years",100);break;case"2yr-range-"+t:n=o().subtract("years",2);break;case"1yr-range-"+t:n=o().subtract("years",1);break;case"3mo-range-"+t:n=o().subtract("months",3);break;case"1mo-range-"+t:n=o().subtract("months",1);break;case"7d-range-"+t:n=o().subtract("days",7);break;case"72hr-range-"+t:n=o().subtract("days",3);break;case"24hr-range-"+t:n=o().subtract("days",1);break;default:var r=this.$el.find("#filter-from-date-"+t).val(),a=this.$el.find("#filter-to-date-"+t).val();if(void 0!==r&&null!==r&&r.trim().length>0&&(n=o(r,"MM/DD/YYYY")),void 0!==a&&null!==a&&a.trim().length>0&&(i=o(a,"MM/DD/YYYY")),n>i){var s=n;n=i,i=s}}var l={isOverrideGlobalDate:!0,customFilter:this.options.appletView.dataGridOptions.collection.fetchOptions.criteria.customFilter};null!==n&&(l.fromDate=n.format("MM/DD/YYYY")),null!==i&&(l.toDate=i.format("MM/DD/YYYY"));var d=this.model.get("filterDateRangeField").name;this.options.appletView.dateRangeRefresh(d,l)},onRender:function(e){this.$("#filter-from-date-"+this.options.appletId).inputmask("m/d/y",{placeholder:"MM/DD/YYYY"}),this.$("#filter-to-date-"+this.options.appletId).inputmask("m/d/y",{placeholder:"MM/DD/YYYY"}),this.enableDatePickers();var t=a.getModel("globalDate"),n=t.get("selectedId");if(void 0!==n&&null!==n){var i=t.get("customFromDate"),o=t.get("customToDate");if(this.$(".input-group.date#custom-date-range1-"+this.options.appletId).datepicker("update",i),this.$(".input-group.date#custom-date-range2-"+this.options.appletId).datepicker("update",o),"custom-range-apply-global"!==n){var r="#"+n.slice(0,-6)+this.options.appletId;this.$el.find(r).addClass("active-range"),this.$el.find("#filter-from-date-"+this.options.appletId).val(""),this.$el.find("#filter-to-date-"+this.options.appletId).val(""),this.$el.find("#custom-range-apply-"+this.options.appletId).prop("disabled",!0)}}else this.$el.find("1yr-range-"+this.options.appletId).addClass("active-range")}});return s}),define("hbs!main/components/applets/grid_applet/templates/containerTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'<div class="panel-body grid-applet-panel" id="grid-panel-'+s((o=null!=(o=t.instanceId||(null!=e?e.instanceId:e))?o:a,typeof o===r?o.call(e,{name:"instanceId",hash:{}}):o))+'">\n    <div id="grid-filter-'+s((o=null!=(o=t.instanceId||(null!=e?e.instanceId:e))?o:a,typeof o===r?o.call(e,{name:"instanceId",hash:{}}):o))+'" class="collapse">\n        <div class="grid-filter-daterange"></div>\n        <div class="grid-filter"></div>\n    </div>\n    <div class="grid-toolbar"></div>\n    <div class="grid-container"></div>\n</div>'}});return t.registerPartial("main/components/applets/grid_applet/templates/containerTemplate",n),n}),define("main/components/applets/grid_applet/gists/gistViewConfig",[],function(){"use strict";var e={debug:!1,defaultTimeFormat:!0};return e}),define("hbs!main/components/applets/grid_applet/gists/templates/interventions",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'<div id="'+s((o=null!=(o=t.id||(null!=e?e.id:e))?o:a,typeof o===r?o.call(e,{name:"id",hash:{}}):o))+'" tabindex="0" data-content="'+s((o=null!=(o=t.tooltip||(null!=e?e.tooltip:e))?o:a,typeof o===r?o.call(e,{name:"tooltip",hash:{}}):o))+'" data-toggle="popover"   class=\'col-sm-12 gistItem selectable changecolor\'>\n    <!--<span class="label label-primary pull-left">'+s((o=null!=(o=t.group_items||(null!=e?e.group_items:e))?o:a,typeof o===r?o.call(e,{name:"group_items",hash:{}}):o))+'</span>-->\n    <span class="col-sm-8 info-display">\n    	<span id="name" name="name" class="col-sm-12">'+s((o=null!=(o=t.name||(null!=e?e.name:e))?o:a,typeof o===r?o.call(e,{name:"name",hash:{}}):o))+'</span>\n    	<span id="description" description="description" class="col-sm-12">'+s((o=null!=(o=t.description||(null!=e?e.description:e))?o:a,typeof o===r?o.call(e,{name:"description",hash:{}}):o))+'</span>\n    </span>\n    <span id="graphic" graphic="'+s((o=null!=(o=t.graphic||(null!=e?e.graphic:e))?o:a,typeof o===r?o.call(e,{name:"graphic",hash:{}}):o))+'" class="col-sm-2"></span>\n    <span id="age" age="age" class="col-sm-1 col-condensed">'+s((o=null!=(o=t.age||(null!=e?e.age:e))?o:a,typeof o===r?o.call(e,{name:"age",hash:{}}):o))+'</span>\n    <span class="col-sm-1">\n        <span id="count" count="count">'+s((o=null!=(o=t.count||(null!=e?e.count:e))?o:a,typeof o===r?o.call(e,{name:"count",hash:{}}):o))+"</span>\n    </span>\n</div>\n"}});return t.registerPartial("main/components/applets/grid_applet/gists/templates/interventions",n),n}),define("hbs!main/components/applets/grid_applet/gists/templates/problems",["hbs","handlebars"],function(e,t){var n=t.template({1:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return"        <span id='comment_"+s((o=null!=(o=t.id||(null!=e?e.id:e))?o:a,typeof o===r?o.call(e,{name:"id",hash:{}}):o))+'\' class="fa fa-comment col-sm-1 seven-top-padding" style="width:10%"></span> \n'},3:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return"        <span id='transparent_"+s((o=null!=(o=t.id||(null!=e?e.id:e))?o:a,typeof o===r?o.call(e,{name:"id",hash:{}}):o))+'\' class="fa fa-transparent-comment col-sm-1" style="width:10%"></span> \n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d='\n<div tabindex="0" id=\'problem_'+l((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===a?r.call(e,{name:"id",hash:{}}):r))+"' class=\"col-sm-12 gistItem changecolor\">\n    <span class='col-sm-6 info-display' tabindex=\"0\">\n        <span id='problem_name_"+l((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===a?r.call(e,{name:"id",hash:{}}):r))+'\' class="col-sm-5" style="width:90%"><strong>'+l((r=null!=(r=t.name||(null!=e?e.name:e))?r:s,typeof r===a?r.call(e,{name:"name",hash:{}}):r))+"</strong> - "+l((r=null!=(r=t.acuityName||(null!=e?e.acuityName:e))?r:s,typeof r===a?r.call(e,{name:"acuityName",hash:{}}):r))+"</span>\n";return o=t["if"].call(e,null!=e?e.allGroupedComments:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i)}),null!=o&&(d+=o),d+'    </span>\n    <span class="col-sm-6 quickDraw selectable" id=\'quickDraw_'+l((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===a?r.call(e,{name:"id",hash:{}}):r))+'\' data-toggle="popover" data-content="Tooltip in the house" tabindex="0">\n    <span id="quickLook_'+l((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===a?r.call(e,{name:"id",hash:{}}):r))+'" class="quickviewOverlay"></span>\n        <span id=\'encounter_count_'+l((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===a?r.call(e,{name:"id",hash:{}}):r))+'\' class="col-sm-1" style="width:15%">'+l((r=null!=(r=t.encounterCount||(null!=e?e.encounterCount:e))?r:s,typeof r===a?r.call(e,{name:"encounterCount",hash:{}}):r))+'</span>\n        <span class="col-sm-4 graphContainer chart" style="width:70%"><span class="gChartMin" id=\'graph_'+l((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===a?r.call(e,{name:"id",hash:{}}):r))+"'></span></span>\n        <span id='time_since_"+l((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===a?r.call(e,{name:"id",hash:{}}):r))+'\' class="col-sm-1" style="width:15%">'+l((r=null!=(r=t.timeSince||(null!=e?e.timeSince:e))?r:s,typeof r===a?r.call(e,{name:"timeSince",hash:{}}):r))+"</span>\n    </span>\n</div>\n"}});return t.registerPartial("main/components/applets/grid_applet/gists/templates/problems",n),n}),define("hbs!main/components/applets/grid_applet/gists/templates/pill",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'<div tabindex="0" id=\''+s((o=null!=(o=t.name||(null!=e?e.name:e))?o:a,typeof o===r?o.call(e,{name:"name",hash:{}}):o))+"' data-content=\""+s((o=null!=(o=t.tooltip||(null!=e?e.tooltip:e))?o:a,typeof o===r?o.call(e,{name:"tooltip",hash:{}}):o))+'"\n     data-toggle="popover" \n     class=\'gistItem immunGist selectable changecolor\'> \n    <span class="pull-left">&nbsp;'+s((o=null!=(o=t.name||(null!=e?e.name:e))?o:a,typeof o===r?o.call(e,{name:"name",hash:{}}):o))+"</span>&nbsp;\n    <b>"+s((o=null!=(o=t.seriesNorm||(null!=e?e.seriesNorm:e))?o:a,typeof o===r?o.call(e,{name:"seriesNorm",hash:{}}):o))+'</b>&nbsp;\n    <span id="age" age="age" class="pull-right">'+s((o=null!=(o=t.timeSince||(null!=e?e.timeSince:e))?o:a,typeof o===r?o.call(e,{name:"timeSince",hash:{}}):o))+"</span>\n</div>\n"}});return t.registerPartial("main/components/applets/grid_applet/gists/templates/pill",n),n}),define("_assets/templates/helpers/ifExp",["handlebars"],function(e){function t(e,t,n,i){switch(t){case"==":return e==n?i.fn(this):i.inverse(this);case"!=":return e!=n?i.fn(this):i.inverse(this);case"===":return e===n?i.fn(this):i.inverse(this);case"!==":return e!==n?i.fn(this):i.inverse(this);case"<":return n>e?i.fn(this):i.inverse(this);case"<=":return n>=e?i.fn(this):i.inverse(this);case">":return e>n?i.fn(this):i.inverse(this);case">=":return e>=n?i.fn(this):i.inverse(this);case"&&":return e&&n?i.fn(this):i.inverse(this);case"||":return e||n?i.fn(this):i.inverse(this);default:return i.inverse(this)}}return e.registerHelper("ifExp",t),t}),define("_assets/templates/helpers/exp",["handlebars"],function(e){function t(e,t,n,i){switch(t){case"+":return e+n;case"-":return e-n;case"/":return e/n;case"*":return e*n;default:return"UNKNOWN OPERATOR!"}}return e.registerHelper("exp",t),t}),define("hbs!_assets/templates/sparkline",["hbs","handlebars","_assets/templates/helpers/ifExp","_assets/templates/helpers/exp"],function(e,t){var n=t.template({1:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'id="'+s((o=null!=(o=t.id||(null!=e?e.id:e))?o:a,typeof o===r?o.call(e,{name:"id",hash:{},data:i}):o))+'"'},3:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s='		<g class="range'+a(r(i&&i.index,e))+'" ';return o=t["if"].call(e,null!=e?e.low:e,{name:"if",hash:{},fn:this.program(4,i),inverse:this.program(6,i),data:i}),null!=o&&(s+=o),o=t["if"].call(e,null!=e?e.high:e,{name:"if",hash:{},fn:this.program(8,i),inverse:this.program(10,i),data:i}),null!=o&&(s+=o),s+'>\n			<rect class="'+a(r(null!=e?e.rangeClass:e,e))+'" x="'+a(r(null!=e?e.x:e,e))+'" y="'+a(r(null!=e?e.y:e,e))+'" width="'+a(r(null!=e?e.width:e,e))+'" height="'+a(r(null!=e?e.height:e,e))+'" />\n		</g>\n'},4:function(e,t,n,i){var o=this.lambda,r=this.escapeExpression;return'data-low="'+r(o(null!=e?e.low:e,e))+'" '},6:function(e,t,n,i){var o,r=t.helperMissing;return o=(t.ifExp||e&&e.ifExp||r).call(e,null!=e?e.low:e,"===",0,{name:"ifExp",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=o?o:""},8:function(e,t,n,i){var o=this.lambda,r=this.escapeExpression;return'data-high="'+r(o(null!=e?e.high:e,e))+'" '},10:function(e,t,n,i){var o,r=t.helperMissing;return o=(t.ifExp||e&&e.ifExp||r).call(e,null!=e?e.high:e,"===",0,{name:"ifExp",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=o?o:""},12:function(e,t,n,i){var o;return o=t["if"].call(e,null!=e?e.previousValue:e,{name:"if",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=o?o:""},13:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s=t.helperMissing;
return'\n		<path class="trendLine" d="M '+a(r(null!=(o=null!=e?e.previousValue:e)?o.x:o,e))+" "+a(r(null!=(o=null!=e?e.previousValue:e)?o.y:o,e))+" l "+a((t.exp||e&&e.exp||s).call(e,null!=(o=null!=e?e.currentValue:e)?o.x:o,"-",null!=(o=null!=e?e.previousValue:e)?o.x:o,{name:"exp",hash:{},data:i}))+" "+a((t.exp||e&&e.exp||s).call(e,null!=(o=null!=e?e.currentValue:e)?o.y:o,"-",null!=(o=null!=e?e.previousValue:e)?o.y:o,{name:"exp",hash:{},data:i}))+'" fill="none" />\n	'},15:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression,s=this.lambda,l='	<svg x="'+a((t.exp||e&&e.exp||r).call(e,null!=(o=null!=e?e.currentValue:e)?o.x:o,"/",(t.exp||e&&e.exp||r).call(e,null!=e?e.width:e,"/",100,{name:"exp",hash:{},data:i}),{name:"exp",hash:{},data:i}))+'%" y="50%" width="'+a((t.exp||e&&e.exp||r).call(e,2,"*",null!=(o=null!=e?e.currentValue:e)?o.b:o,{name:"exp",hash:{},data:i}))+'" height="'+a((t.exp||e&&e.exp||r).call(e,2,"*",null!=(o=null!=e?e.currentValue:e)?o.a:o,{name:"exp",hash:{},data:i}))+'" class="valueMarker">\n		<g class="'+a(s(null!=(o=null!=e?e.currentValue:e)?o["class"]:o,e))+'" data-value="'+a(s(null!=(o=null!=e?e.currentValue:e)?o.value:o,e))+'" >\n			<polygon points="0,-'+a(s(null!=(o=null!=e?e.currentValue:e)?o.a:o,e))+" -"+a(s(null!=(o=null!=e?e.currentValue:e)?o.b:o,e))+",0 0,"+a(s(null!=(o=null!=e?e.currentValue:e)?o.a:o,e))+" "+a(s(null!=(o=null!=e?e.currentValue:e)?o.b:o,e))+',0" />\n';return o=t["if"].call(e,null!=(o=null!=e?e.currentValue:e)?o.isCritical:o,{name:"if",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+"	    </g>\n	</svg>\n"},16:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s=t.helperMissing;return'			<rect class="'+a(r(null!=(o=null!=e?e.currentValue:e)?o["class"]:o,e))+'" x="-'+a(r(null!=(o=null!=e?e.currentValue:e)?o.b2:o,e))+'" y="-'+a(r(null!=(o=null!=e?e.currentValue:e)?o.a2:o,e))+'" width="'+a((t.exp||e&&e.exp||s).call(e,null!=(o=null!=e?e.currentValue:e)?o.b2:o,"*",2,{name:"exp",hash:{},data:i}))+'" height="'+a((t.exp||e&&e.exp||s).call(e,null!=(o=null!=e?e.currentValue:e)?o.a2:o,"*",2,{name:"exp",hash:{},data:i}))+'" />\n'},18:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression,s=this.lambda;return'	<svg x="'+a((t.exp||e&&e.exp||r).call(e,null!=(o=null!=e?e.previousValue:e)?o.x:o,"/",(t.exp||e&&e.exp||r).call(e,null!=e?e.width:e,"/",100,{name:"exp",hash:{},data:i}),{name:"exp",hash:{},data:i}))+'%" y="50%" width="'+a((t.exp||e&&e.exp||r).call(e,2,"*",null!=(o=null!=e?e.previousValue:e)?o.r:o,{name:"exp",hash:{},data:i}))+'" height="'+a((t.exp||e&&e.exp||r).call(e,2,"*",null!=(o=null!=e?e.previousValue:e)?o.r:o,{name:"exp",hash:{},data:i}))+'" class="valueMarker">\n		<g class="previousValue" data-value="'+a(s(null!=(o=null!=e?e.previousValue:e)?o.value:o,e))+'" >\n			<circle cx="0" cy="0" r="'+a(s(null!=(o=null!=e?e.previousValue:e)?o.r:o,e))+'" />\n		</g>\n	</svg>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d=this.lambda,c='<span class="sr-only">'+l((r=null!=(r=t.description||(null!=e?e.description:e))?r:s,typeof r===a?r.call(e,{name:"description",hash:{},data:i}):r))+"</span>\n<svg ";return o=t["if"].call(e,null!=e?e.id:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+=' class="gistTrendGraph" width="1" height="100%" style="padding: '+l((r=null!=(r=t.paddingTop||(null!=e?e.paddingTop:e))?r:s,typeof r===a?r.call(e,{name:"paddingTop",hash:{},data:i}):r))+" "+l((r=null!=(r=t.paddingLeft||(null!=e?e.paddingLeft:e))?r:s,typeof r===a?r.call(e,{name:"paddingLeft",hash:{},data:i}):r))+'">\n	<svg x="0" y="0" width="100%" height="100%" viewBox="0 0 '+l((r=null!=(r=t.width||(null!=e?e.width:e))?r:s,typeof r===a?r.call(e,{name:"width",hash:{},data:i}):r))+" "+l((r=null!=(r=t.height||(null!=e?e.height:e))?r:s,typeof r===a?r.call(e,{name:"height",hash:{},data:i}):r))+'" preserveAspectRatio="none">\n		<pattern id="textureHashed" class="textureHashed" x="0" y="0" width="4" height="4" patternUnits="userSpaceOnUse">\n			<rect x="0" y="0" width="4" height="4" />\n			<path d="M -1 1 l 2 -2 M 0 4 l 4 -4 M 3 5 l 2 -2" />\n		</pattern>\n',o=t.each.call(e,null!=e?e.ranges:e,{name:"each",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+="	",o=t["if"].call(e,null!=e?e.currentValue:e,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+='\n	</svg>\n	<svg x="'+l(d(null!=(o=null!=e?e.border:e)?o.x:o,e))+'%" y="'+l(d(null!=(o=null!=e?e.border:e)?o.y:o,e))+'%" width="'+l((t.exp||e&&e.exp||s).call(e,100,"-",(t.exp||e&&e.exp||s).call(e,2,"*",null!=(o=null!=e?e.border:e)?o.x:o,{name:"exp",hash:{},data:i}),{name:"exp",hash:{},data:i}))+'%" height="100%">\n		<g class="border0">\n			<rect class="outterBorder" x="0" y="0" width="100%" height="100%" />\n		</g>\n	</svg>\n',o=t["if"].call(e,null!=e?e.currentValue:e,{name:"if",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=o&&(c+=o),o=t["if"].call(e,null!=e?e.previousValue:e,{name:"if",hash:{},fn:this.program(18,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+"</svg>\n"},useData:!0});return t.registerPartial("_assets/templates/sparkline",n),n}),define("_assets/templates/helpers/sparkline",["handlebars","hbs!_assets/templates/sparkline"],function(e,t){function n(e,t,n,i,o,r){var a;if(!isNaN(t)&&t>e)a=Math.floor(r/2);else if(!isNaN(n)&&e>n)a=o-Math.floor(r/2);else{var s=o-(t?r:0)-(n?r:0);a=isNaN(t)||isNaN(n)?Math.floor((isNaN(t)?0:r)+s/2):Math.floor((isNaN(t)?0:r)+s*(e-t)/(n-t))}return a}function i(e){return"HH"===e||"LL"===e||"H*"===e||"L*"===e}function o(e,t,n,i,o){var r=!1;return o&&void 0!==e?r="H"===e||"L"===e||"HH"===e||"LL"===e||"H*"===e||"L*"===e:o||(r=!isNaN(n)&&n>t||!isNaN(i)&&t>i),r}function r(e,t,n,i,r,a){var s="";if(isNaN(n)&&isNaN(i)||(s+="Normal range"+(isNaN(n)?"":" from "+n)+(isNaN(i)?"":" to "+i)+";"),!isNaN(e)){if(s+="Current value "+e+" is ",a)switch(r){case"H":s+="abnormal high";break;case"HH":case"H*":s+="critical high";break;case"L":s+="abnormal low";break;case"LL":case"L*":s+="critical low";break;default:s+="normal"}else s+=o(r,e,n,i,a)?"abnormal":"normal",s+=!isNaN(n)&&n>e?" low":"",s+=!isNaN(i)&&e>i?"high":"";isNaN(t)||(s+=" and ",s+=e>t?"increased from ":t>e?"decreased from ":"the same as ",s+="previous value "+t)}return s}function a(e,t,n,i,o,r,a,s){var l,d,c=[],u=r,h=0;if(n&&i){var p=(e+t)/2;l=p-p*i,d=p+p*i}return n&&l&&c.push({high:l,includeHigh:!0,width:0,height:a,x:h,y:0,positionValues:"center",rangeClass:"abnormalRange lowRange",interpretations:[{valueClass:"abnormalValue",flag:"L",description:"abnormal low"},{valueClass:"criticalValue",flag:"L*",description:"critical low"}]}),(n||!isNaN(e))&&c.push({low:l,high:e,width:o,height:a,x:h,y:0,positionValues:n?"scaled":"relative",rangeClass:"abnormalRange lowRange",interpretations:[{valueClass:"abnormalValue",flag:"L",description:"abnormal low"},{valueClass:"criticalValue",flag:"L*",description:"critical low"}]}),c.push({low:e,high:t,includeLow:!0,includeHigh:!0,width:u-(n||!isNaN(e)?o:0)-(n||!isNaN(t)?o:0),height:a,x:h+(n||!isNaN(e)?o:0),y:0,positionValues:"scaled",rangeClass:"normalRange",interpretations:[{valueClass:"normalValue",flag:"N",description:"normal"}]}),(n||!isNaN(t))&&c.push({low:t,high:d,width:o,height:a,x:h+u-o,y:0,positionValues:n?"scaled":"relative",rangeClass:"abnormalRange highRange",interpretations:[{valueClass:"abnormalValue",flag:"H",description:"abnormal high"},{valueClass:"criticalValue",flag:"H*",description:"critical high"}]}),n&&d&&c.push({low:d,includeLow:!0,width:0,height:a,x:h+u,y:0,positionValues:"center",rangeClass:"abnormalRange highRange",interpretations:[{valueClass:"abnormalValue",flag:"H",description:"abnormal high"},{valueClass:"criticalValue",flag:"H*",description:"critical high"}]}),c}function s(e,t,n){var i=0;e&&_.each(e,function(o){o.x=o.x||i,o.y=o.y||0,o.width=o.width||t/e.length,o.height=o.height||n,o.positionValues=o.positionValues||"center",o.rangeClass=o.rangeClass||"normalRange",o.valueClass=o.valueClass||"normalValue",o.flag=o.flag||"N",o.description=o.description||"normal",i+=o.width})}function l(e,t){var n=_.filter(e,function(e){return e.low<t&&e.high>t||e.includeLow&&e.low==t||e.includeHigh&&e.high==t});if(n.length)return _.first(n);var i=_.filter(e,function(e){return e.high>t||e.includeHigh&&e.high==t});if(i.length)return _.first(i);var o=_.filter(e,function(e){return e.low<t||e.includeLow&&e.low==t});return o.length?_.last(o):_.find(e,function(e){return isNaN(e.low)&&isNaN(e.high)})}function d(e,t,n,i){var o;if(i){var r=_.filter(e,function(e){return _.some(e.interpretations,function(e){return e.flag===n||"N"})});r.length&&(o=1===r.length?r[0]:l(r,t))}else o=l(e,t);return o}function c(e,t,i,o){var r;if(e)switch(e.positionValues){case"relative":r=e.x+e.width/2,i&&i==e&&(o>t?r=e.x+.25*e.width:t>o&&(r=e.x+.75*e.width));break;case"scaled":r=e.x+n(t,e.low,e.high,e.height,e.width,0);break;case"center":r=e.x+e.width/2;break;default:r=e.x+e.width/2}return r}function u(e,t){var n="normalValue";if(e){var i;i=_.findWhere(e.interpretations,{flag:t}),i||(i=_.first(e.interpretations)),i&&(n=i.valueClass)}return n}function h(e,t,n){if(e.Range&&t.Range&&e.Range==t.Range&&"scaled"===e.Range.positionValues){var i=parseInt(e.Range.minimumDistance||n);if(e.Val!==t.Val&&Math.abs(e.X-t.X)<i){var o=e.Range.x,r=e.Range.x+e.Range.width,a=i-Math.abs(e.X-t.X);e.Val>t.Val?t.X-a>o?t.X=t.X-a:e.X+a<r&&(e.X=e.X+a):t.X+a<r?t.X=t.X+a:e.X-a>o&&(e.X=e.X-a)}}}function p(e,n,o,l,p,g,f,m,v){var b="";e=e||{};var y=$.isNumeric(l)?Number(l):NaN,w=$.isNumeric(p)?Number(p):NaN,A={},N={};A.Val=$.isNumeric(n)?Number(n):NaN,N.Val=$.isNumeric(o)?Number(o):NaN;var C=g?g.split(":").pop():g,x=f?f.split(":").pop():f,S=m||2.5,T=parseInt(e.height||20),k=parseInt(e.width||80),D=e.id||"",M=parseInt(e.abnormalRangeWidth||Math.floor(k/4)),E=parseInt(e.rhombusA||Math.floor(T/2*.7)),P=parseInt(e.rhombusB||Math.floor(M/2*.4)),I=.7*E,O=.7*P,R=parseInt(e.radius||2.5),F=Boolean(e.hasCriticalInterpretation),V=e.ranges||[];0===V.length?V=a(y,w,F,S,M,k,T,P):s(V,k,T);var L=Math.floor(T/2);A.Range=d(V,A.Val,C,F),N.Range=d(V,N.Val,x,F),A.Flag=F?C:(_.first((A.Range||{}).interpretations)||{}).flag||C,A.IsCritical=i(A.Flag),A.X=c(A.Range,A.Val,N.Range,N.Val),N.X=c(N.Range,N.Val,A.Range,A.Val),A.Range&&!A.Range.noMinimumDistance&&h(A,N,P+R+1||10);var U={description:r(A.Val,N.Val,y,w,A.Flag,F),id:D,width:k,height:T,paddingTop:0,paddingLeft:P,border:{x:0,y:0,width:k-(F&&S?2*P:0),height:T},ranges:V};return isNaN(N.Val)||$.extend(U,{previousValue:{value:N.Val,x:N.X,y:L,r:R}}),isNaN(A.Val)||$.extend(U,{currentValue:{value:A.Val,x:A.X,y:L,"class":u(A.Range,A.Flag),isCritical:A.IsCritical,a:E,b:P,a2:I,b2:O}}),b+=t(U)}setInterval(function(){_.each($("svg.gistTrendGraph"),function(e){e&&e.parentNode&&e.clientWidth!=e.parentNode.clientWidth&&(e.setAttribute("width",1),e.setAttribute("width",e.parentNode.clientWidth))})},100);return e.registerHelper("sparkline",p),p}),define("hbs!main/components/applets/grid_applet/gists/templates/observations",["hbs","handlebars","_assets/templates/helpers/sparkline"],function(e,t){var n=t.template({1:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d='	<span class="sr-only">'+l((r=null!=(r=t.fullName||(null!=e?e.fullName:e))?r:s,typeof r===a?r.call(e,{name:"fullName",hash:{},data:i}):r))+'</span>\n	<span id="'+l((r=null!=(r=t.observationType||(null!=e?e.observationType:e))?r:s,typeof r===a?r.call(e,{name:"observationType",hash:{},data:i}):r))+"_problem_name_"+l((r=null!=(r=t.normalizedName||(null!=e?e.normalizedName:e))?r:s,typeof r===a?r.call(e,{name:"normalizedName",hash:{},data:i}):r))+'" class="col-sm-3">';return r=null!=(r=t.descriptionColumn||(null!=e?e.descriptionColumn:e))?r:s,o=typeof r===a?r.call(e,{name:"descriptionColumn",hash:{},data:i}):r,null!=o&&(d+=o),d+="</span>\n",o=t["if"].call(e,null!=e?e.isValid:e,{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(9,i),data:i}),null!=o&&(d+=o),d},2:function(e,t,n,i){var o,r="";return o=t["if"].call(e,null!=e?e.resultAndUnitsMerged:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.program(5,i),data:i}),null!=o&&(r+=o),o=t["if"].call(e,null!=e?e.interpretationField:e,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=o&&(r+=o),r},3:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'			<span id="'+s((o=null!=(o=t.observationType||(null!=e?e.observationType:e))?o:a,typeof o===r?o.call(e,{name:"observationType",hash:{},data:i}):o))+"_problem_result_"+s((o=null!=(o=t.normalizedName||(null!=e?e.normalizedName:e))?o:a,typeof o===r?o.call(e,{name:"normalizedName",hash:{},data:i}):o))+'" class="col-sm-4 paddingLeft">'+s((o=null!=(o=t.finalResult||(null!=e?e.finalResult:e))?o:a,typeof o===r?o.call(e,{name:"finalResult",hash:{},data:i}):o))+"</span>\n"},5:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'			<span id="'+s((o=null!=(o=t.observationType||(null!=e?e.observationType:e))?o:a,typeof o===r?o.call(e,{name:"observationType",hash:{},data:i}):o))+"_problem_result_"+s((o=null!=(o=t.normalizedName||(null!=e?e.normalizedName:e))?o:a,typeof o===r?o.call(e,{name:"normalizedName",hash:{},data:i}):o))+'" class="col-sm-2 vitalsResult paddingLeft">'+s((o=null!=(o=t.result||(null!=e?e.result:e))?o:a,typeof o===r?o.call(e,{name:"result",hash:{},data:i}):o))+'</span>\n			<span id="'+s((o=null!=(o=t.observationType||(null!=e?e.observationType:e))?o:a,typeof o===r?o.call(e,{name:"observationType",hash:{},data:i}):o))+"_problem_units_"+s((o=null!=(o=t.normalizedName||(null!=e?e.normalizedName:e))?o:a,typeof o===r?o.call(e,{name:"normalizedName",hash:{},data:i}):o))+'" class="col-sm-2 vitalsUnits">'+s((o=null!=(o=t.finalUnits||(null!=e?e.finalUnits:e))?o:a,typeof o===r?o.call(e,{name:"finalUnits",hash:{},data:i}):o))+"</span>\n"},7:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'			<span class="sr-only">'+s((o=null!=(o=t.interpretationField||(null!=e?e.interpretationField:e))?o:a,typeof o===r?o.call(e,{name:"interpretationField",hash:{},data:i}):o))+"</span>\n"},9:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'		<span class="col-sm-4 paddingLeft no-value">'+s((o=null!=(o=t.result||(null!=e?e.result:e))?o:a,typeof o===r?o.call(e,{name:"result",hash:{},data:i}):o))+"</span>\n"},11:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'	<span id="'+s((o=null!=(o=t.observationType||(null!=e?e.observationType:e))?o:a,typeof o===r?o.call(e,{name:"observationType",hash:{},data:i}):o))+"_problem_name_"+s((o=null!=(o=t.displayName||(null!=e?e.displayName:e))?o:a,typeof o===r?o.call(e,{name:"displayName",hash:{},data:i}):o))+'" class="col-sm-5 overflowEllipsis">'+s((o=null!=(o=t.shortName||(null!=e?e.shortName:e))?o:a,typeof o===r?o.call(e,{name:"shortName",hash:{},data:i}):o))+'</span>\n	<span id="'+s((o=null!=(o=t.observationType||(null!=e?e.observationType:e))?o:a,typeof o===r?o.call(e,{name:"observationType",hash:{},data:i}):o))+"_problem_result_"+s((o=null!=(o=t.displayName||(null!=e?e.displayName:e))?o:a,typeof o===r?o.call(e,{name:"displayName",hash:{},data:i}):o))+'" class="col-sm-1 labsResult overflowEllipsis">'+s((o=null!=(o=t.result||(null!=e?e.result:e))?o:a,typeof o===r?o.call(e,{name:"result",hash:{},data:i}):o))+'</span>\n	<span id="'+s((o=null!=(o=t.observationType||(null!=e?e.observationType:e))?o:a,typeof o===r?o.call(e,{name:"observationType",hash:{},data:i}):o))+"_problem_units_"+s((o=null!=(o=t.displayName||(null!=e?e.displayName:e))?o:a,typeof o===r?o.call(e,{name:"displayName",hash:{},data:i}):o))+'" class="labsUnits col-sm-2">'+s((o=null!=(o=t.units||(null!=e?e.units:e))?o:a,typeof o===r?o.call(e,{name:"units",hash:{},data:i}):o))+"</span>\n"},13:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d='	<span id="'+l((r=null!=(r=t.observationType||(null!=e?e.observationType:e))?r:s,typeof r===a?r.call(e,{name:"observationType",hash:{},data:i}):r))+"_graph_"+l((r=null!=(r=t.displayName||(null!=e?e.displayName:e))?r:s,typeof r===a?r.call(e,{name:"displayName",hash:{},data:i}):r))+'" class="col-sm-3 graph-container">';return o=(t.sparkline||e&&e.sparkline||s).call(e,null!=e?e.graphOptions:e,null!=e?e.result:e,null!=e?e.previousResult:e,null!=e?e.low:e,null!=e?e.high:e,null!=e?e.interpretationCode:e,null!=e?e.previousInterpretationCode:e,null!=e?e.standardDeviation:e,{name:"sparkline",hash:{},data:i}),null!=o&&(d+=o),d+"</span>\n"},15:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'	<span id="'+s((o=null!=(o=t.observationType||(null!=e?e.observationType:e))?o:a,typeof o===r?o.call(e,{name:"observationType",hash:{},data:i}):o))+"_no_record_"+s((o=null!=(o=t.displayName||(null!=e?e.displayName:e))?o:a,typeof o===r?o.call(e,{name:"displayName",hash:{},data:i}):o))+'" class="col-sm-3 no-record">No record</span>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=this.lambda,s=this.escapeExpression,l="function",d=t.helperMissing,c="<div id='"+s(a(i&&i.index,e))+'\' tabindex="0" data-content="'+s((r=null!=(r=t.tooltip||(null!=e?e.tooltip:e))?r:d,typeof r===l?r.call(e,{name:"tooltip",hash:{},data:i}):r))+'" data-toggle="popover"  class=\'gistItem columnItem selectable changecolor\'>\n\n';return o=t["if"].call(e,null!=e?e.vitalColumns:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(11,i),data:i}),null!=o&&(c+=o),o=t["if"].call(e,null!=e?e.result:e,{name:"if",hash:{},fn:this.program(13,i),inverse:this.program(15,i),data:i}),null!=o&&(c+=o),c+'<span class="sr-only">'+s((r=null!=(r=t.numericTime||(null!=e?e.numericTime:e))?r:d,typeof r===l?r.call(e,{name:"numericTime",hash:{},data:i}):r))+'</span>\n<span id="'+s((r=null!=(r=t.observationType||(null!=e?e.observationType:e))?r:d,typeof r===l?r.call(e,{name:"observationType",hash:{},data:i}):r))+"_time_since_"+s((r=null!=(r=t.displayName||(null!=e?e.displayName:e))?r:d,typeof r===l?r.call(e,{name:"displayName",hash:{},data:i}):r))+'" class="col-sm-1">'+s((r=null!=(r=t.timeSince||(null!=e?e.timeSince:e))?r:d,typeof r===l?r.call(e,{name:"timeSince",hash:{},data:i}):r))+"</span>\n</div>\n"},useData:!0});return t.registerPartial("main/components/applets/grid_applet/gists/templates/observations",n),n}),define("main/components/applets/grid_applet/gists/gistBuilderHelper",["jquery","underscore","hbs!main/components/applets/grid_applet/gists/templates/interventions","hbs!main/components/applets/grid_applet/gists/templates/problems","hbs!main/components/applets/grid_applet/gists/templates/pill","hbs!main/components/applets/grid_applet/gists/templates/observations","api/ResourceService","api/Messaging"],function(e,t,n,i,o,r,a,s){"use strict";var l={getGistItemGraphicClass:function(e){switch(e.toUpperCase()){case"NONE":return"";case"UPARROW":return"fa fa-arrow-up changeArrow";case"DOWNARROW":return"fa fa-arrow-down changeArrow";default:return""}},getInterventionSeverityClass:function(e){switch(e.toUpperCase()){case"0":return"label label-danger";case"1":return"label label-warning";case"EXP":return"expiredMedWarning";default:return""}},getGistItem:function(t,r,l){var d=this,c={AppletID:r,className:"gistItem",template:"",detailTrigger:"getDetailView",events:{"click button#closeGist":function(t){t.preventDefault(),t.stopImmediatePropagation(),e(this.el).find(".sub-elements").hide()},"click button.groupItem":function(e){e.preventDefault(),e.stopImmediatePropagation()},"hover div.gistItem":function(t){var n=e(t.target).attr("id");e("#"+n).blur()},"focus div.gistItem":function(t){var n=e(document.activeElement);n.keypress(function(e){(13===e.which||32===e.which)&&n.trigger("click")})},"click div.gistItem":function(t){console.log("=-=-=-="),l&&e(".customPopover").popover("hide"),t.preventDefault(),t.stopImmediatePropagation();var n=a.patientRecordService.getCurrentPatient(),i={model:this.model,uid:this.model.get("uid"),patient:{icn:n.attributes.icn,pid:n.attributes.pid}};console.log("++++++",i),s.getChannel(c.AppletID).trigger(c.detailTrigger,i)}},onRender:function(){}};switch(t.toUpperCase()){case"INTERVENTION":c.className="gistItem col-sm-12",c.template=n,c.onRender=function(){var t=e(this.el).find("span[count]"),n=e(this.el).find("span[graphic]");t.addClass(d.getInterventionSeverityClass(t.text())),n.addClass(d.getGistItemGraphicClass(n.attr("graphic")))};break;case"PROBLEM":c.className="gistItem col-sm-12",c.template=i;break;case"PILL":c.template=o}return this.buildGistItem(c)},buildGistItem:function(e){var t=Backbone.Marionette.ItemView.extend({className:e.className,template:e.template,events:e.events,onRender:e.onRender});return t}};return l}),define("hbs!main/components/applets/grid_applet/gists/templates/interventionsHeader",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'<div id="gistGrid" class="col-sm-12 header-bar">\n        <span class="col-sm-4 selectable header">'+s((o=null!=(o=t.name||(null!=e?e.name:e))?o:a,typeof o===r?o.call(e,{name:"name",hash:{},data:i}):o))+'</span>\n        <span class="col-sm-4 selectable header">'+s((o=null!=(o=t.description||(null!=e?e.description:e))?o:a,typeof o===r?o.call(e,{name:"description",hash:{},data:i}):o))+'</span>\n        <span id="Dose-header" class="col-sm-2 selectable header">'+s((o=null!=(o=t.graphic||(null!=e?e.graphic:e))?o:a,typeof o===r?o.call(e,{name:"graphic",hash:{},data:i}):o))+'</span>\n        <span id="Age-header" class="col-sm-1 selectable header">'+s((o=null!=(o=t.age||(null!=e?e.age:e))?o:a,typeof o===r?o.call(e,{name:"age",hash:{},data:i}):o))+'</span>\n        <span id="Severity-header" class="col-sm-1 selectable header">'+s((o=null!=(o=t.count||(null!=e?e.count:e))?o:a,typeof o===r?o.call(e,{name:"count",hash:{},data:i}):o))+"</span>\n</div>"},useData:!0});return t.registerPartial("main/components/applets/grid_applet/gists/templates/interventionsHeader",n),n}),define("hbs!main/components/applets/grid_applet/gists/templates/gistLayout",["hbs","handlebars"],function(e,t){var n=t.template({1:function(e,t,n,i){return'    <div id="vertLine" />\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d='<div id="'+l((r=null!=(r=t.appletID||(null!=e?e.appletID:e))?r:s,typeof r===a?r.call(e,{name:"appletID",hash:{},data:i}):r))+"-"+l((r=null!=(r=t.gistType||(null!=e?e.gistType:e))?r:s,typeof r===a?r.call(e,{name:"gistType",hash:{},data:i}):r))+'-gist">\n	';return r=null!=(r=t.headerOptionsTemplate||(null!=e?e.headerOptionsTemplate:e))?r:s,o=typeof r===a?r.call(e,{name:"headerOptionsTemplate",hash:{},data:i}):r,null!=o&&(d+=o),d+='\n    <div id="'+l((r=null!=(r=t.appletID||(null!=e?e.appletID:e))?r:s,typeof r===a?r.call(e,{name:"appletID",hash:{},data:i}):r))+"-"+l((r=null!=(r=t.gistType||(null!=e?e.gistType:e))?r:s,typeof r===a?r.call(e,{name:"gistType",hash:{},data:i}):r))+'-gist-items" class="gistList"></div>\n',o=t["if"].call(e,null!=e?e.verticalLine:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+"</div>"},useData:!0});return t.registerPartial("main/components/applets/grid_applet/gists/templates/gistLayout",n),n}),define("hbs!main/components/applets/grid_applet/gists/templates/problemsHeader",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d=this.lambda;return'<div id="'+l((r=null!=(r=t.appletID||(null!=e?e.appletID:e))?r:s,typeof r===a?r.call(e,{name:"appletID",hash:{},data:i}):r))+"-"+l((r=null!=(r=t.gistType||(null!=e?e.gistType:e))?r:s,typeof r===a?r.call(e,{name:"gistType",hash:{},data:i}):r))+'-gist">\n<div id="problemGistGrid" class="col-sm-12 header-bar">\n		<span id="name-header" class="col-sm-5 selectable header">'+l(d(null!=(o=null!=e?e.gistHeaders:e)?o.name:o,e))+'</span>\n		<span id="comment-header" class="col-sm-1 selectable header">'+l(d(null!=(o=null!=e?e.gistHeaders:e)?o.comment:o,e))+'</span>\n		<span id="count-header1" class="col-sm-2 selectable header" style="padding-left:0px;">'+l(d(null!=(o=null!=e?e.gistHeaders:e)?o.itemsInGraphCount:o,e))+'</span>\n		<span id="graph-header" class="col-sm-3 quikDraw header">'+l(d(null!=(o=null!=e?e.gistHeaders:e)?o.graph:o,e))+'</span>\n		<span id="count-header" class="col-sm-1 header">'+l(d(null!=(o=null!=e?e.gistHeaders:e)?o.age:o,e))+'</span>\n</div>\n    <div id="'+l((r=null!=(r=t.appletID||(null!=e?e.appletID:e))?r:s,typeof r===a?r.call(e,{name:"appletID",hash:{},data:i}):r))+"-"+l((r=null!=(r=t.gistType||(null!=e?e.gistType:e))?r:s,typeof r===a?r.call(e,{name:"gistType",hash:{},data:i}):r))+'-gist-items" class="gistItemList"></div>\n</div>\n'},useData:!0});return t.registerPartial("main/components/applets/grid_applet/gists/templates/problemsHeader",n),n}),define("main/components/applets/grid_applet/gists/gistView",["jquery","underscore","backbone","marionette","main/components/applets/grid_applet/gists/gistViewConfig","main/components/applets/grid_applet/gists/gistBuilderHelper","hbs!main/components/applets/grid_applet/gists/templates/interventionsHeader","hbs!main/components/applets/grid_applet/gists/templates/gistLayout","hbs!main/components/applets/grid_applet/gists/templates/problemsHeader"],function(e,t,n,i,o,r,a,s,l,d){"use strict";var c=null,u=null,h=o.debug,p=n.Marionette.CompositeView.extend({events:{"click #interventions-header":function(e){console.log("clicked")},"click button.groupItem":function(e){e.preventDefault(),e.stopImmediatePropagation()},"focus .info-display":function(t){var n=e(document.activeElement);n.keypress(function(e){(13===e.which||32===e.which)&&n.trigger("click")})},"click .info-display":function(t){e(".customPopover").popover("hide"),t.preventDefault(),t.stopImmediatePropagation();var n=ResourceService.patientRecordService.getCurrentPatient(),i={model:this.model,uid:this.model.get("uid"),patient:{icn:n.attributes.icn,pid:n.attributes.pid}};console.log(i),Messaging.getChannel(c).trigger("detailView",i)}},initialize:function(i){e("html").click(function(){e(".customPopover").popover("hide")}),this.gistOptions=i.gistOptions,this.collection=i.collection,this.viewType=i.appletConfiguration.defaultView,this.headersTemplate="";this.collection.on("filterDone",function(){h&&console.log("filterDone"),this.render()},this),t.isUndefined(i.appletConfig.instanceId)&&(i.appletConfig.instanceId=i.appletConfig.id),this.AppletID=i.appletConfig.id;var o="";this.hover=!1,"INTERVENTION"===this.viewType.toUpperCase()?(o=i.appletConfiguration.gistHeaders,this.headersTemplate=a(o),this.hover=!0):"PROBLEM"===this.viewType.toUpperCase()?(o=i.appletConfiguration.gistHeaders,this.headersTemplate=l(o)):"PILL"===this.viewType.toUpperCase()&&(this.hover=!0),this.childView=r.getGistItem(this.viewType.toUpperCase(),this.AppletID,this.hover),this.childViewContainer="#"+this.AppletID+"-"+this.viewType.toUpperCase()+"-gist-items",this.template=s({headerOptionsTemplate:this.headersTemplate,appletID:this.AppletID,gistType:this.viewType.toUpperCase(),verticalLine:2==i.appletConfiguration.viewColumns?!0:!1}),this.maximizeScreen=i.appletConfig.maximizeScreen,this._super=n.Marionette.CompositeView.prototype,this._super.initialize.apply(this,arguments)},onStop:function(){e(".customPopover").popover("hide")},onRender:function(){var t="click";this.hover&&(t="hover"),this.$el.find("[data-toggle=popover]").popover({trigger:"manual",html:"true",container:"body",template:'<div class="popover customPopover" role="tooltip" style="max-width: 100%;"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"><div class="data-content"></div></div></div>',placement:function(t,n){var i=e(n).position();return e("div.gistItem").blur(),i.left>515&&i.top>80?"left":i.left<515&&i.top>80?"right":i.top<110?"bottom":"top"}}).click(function(t){null!==u&&u[0]===e(this)[0]?e(this).popover("toggle"):(e(".customPopover").popover("hide"),e(this).popover("toggle"),u=e(this))}),0===this.collection.length&&this.$el.find(".gistList").after('<div class="emptyGistList">No Records Found</div>')}});return p}),define("main/components/applets/grid_applet/gridAppletView",["jquery","underscore","main/Utils","main/backgrid/datagrid","main/backgrid/filter","api/ResourceService","api/SessionStorage","main/components/views/loadingView","main/components/views/errorView","main/components/applets/grid_applet/views/filterDateRangeView","hbs!main/components/applets/grid_applet/templates/containerTemplate","main/components/applets/grid_applet/gists/gistView"],function(e,t,n,i,o,r,a,s,l,d,c,u){"use strict";function h(n){n.dataGridOptions.collection.length>0&&!t.isUndefined(n.dataGridOptions.tblRowSelector)&&e(n.dataGridOptions.tblRowSelector).each(function(){e(this).attr("data-infobutton",e(this).find("td:first").text())})}var p=40,g=100,f=30;return Backbone.Marionette.LayoutView.extend({initialize:function(e){this.options.appletConfig&&t.isUndefined(this.options.appletConfig.instanceId)?this.options.appletConfig.instanceId=this.options.appletConfig.id:this.options.appletConfig||(this.options.appletConfig={},this.options.appletConfig.id=this.dataGridOptions.appletConfig.id,this.options.appletConfig.instanceId=this.dataGridOptions.appletConfig.instanceId);var n=ADK.Messaging.request("applet:maximized");t.isUndefined(n)||(this.options.appletConfig.filterName=n.get("filterName"),ADK.Messaging.reply("applet:maximized",function(){}));var i=this.options.appletConfig;this.appletConfig=i;var o=this.dataGridOptions||{};if(this.dataGridOptions=o,this.dataGridOptions.emptyText=o.emptyText||"No Records Found",this.dataGridOptions.appletConfig=i,this.routeParam=this.options.routeParam,this.expandedAppletId=this.appletConfig.instanceId,this.appletConfig.fullScreen){this.parentWorkspace=ADK.Messaging.request("get:current:workspace");var r=a.get.sessionModel("expandedAppletId");t.isUndefined(r)||t.isUndefined(r.get("id"))||(this.expandedAppletId=r.get("id"),a.set.sessionModel("expandedAppletId",new Backbone.Model({id:void 0})))}void 0===this.dataGridOptions.filterEnabled&&(this.dataGridOptions.filterEnabled=!0),i.fullScreen?(o.columns=o.fullScreenColumns||o.summaryColumns||o.columns,a.setAppletStorageModel(this.appletConfig.instanceId,"fullScreen",!0)):(o.columns=o.summaryColumns||o.columns,a.setAppletStorageModel(this.appletConfig.instanceId,"fullScreen",!1)),i.workspaceId=ADK.Messaging.request("get:current:screen").config.id,this.model=new Backbone.Model(i),this.initFilterView(),this.dataGridOptions.hasOwnProperty("onClickAdd")&&(this.onClickAdd=this.dataGridOptions.onClickAdd),this.dataGridOptions.toolbarView&&(this.toolbarView=this.dataGridOptions.toolbarView),this.createDataGridView(),this.loadingView=s.create(),this.listenTo(o.collection,"sync",this.onSync),this.listenTo(o.collection,"error",this.onError),this.dataGridOptions.collection.markInfobutton={that:this,func:h};var l=this;if(this.listenTo(this.dataGridOptions.collection,"backgrid:sort",function(){l.dataGridOptions.collection.markInfobutton.func(l.dataGridOptions.collection.markInfobutton.that)}),"gist"===this.options.appletConfig.viewType){var d=function(){l.$("[data-toggle=popover]").popover("hide")};this.listenTo(this,"show",function(){this.$(".grid-applet-panel").on("mousewheel",function(){d()}),this.$(".grid-applet-panel").on("keydown",function(e){(38===e.which||40===e.which)&&d()})}),this.listenTo(this,"destroy",function(){this.$(".grid-applet-panel").off("mousewheel"),this.$(".grid-applet-panel").off("keydown")})}},initFilterView:function(){if(this.dataGridOptions.filterEnabled===!0){var e;e=this.dataGridOptions.filterFields?this.dataGridOptions.filterFields:t.pluck(this.dataGridOptions.columns,"name");var n=!1;t.isUndefined(this.options.appletConfig.filterName)||(n=!0);
var i={collection:this.dataGridOptions.collection,filterFields:e,filterDateRangeEnabled:this.dataGridOptions.filterDateRangeEnabled,filterDateRangeField:this.dataGridOptions.filterDateRangeField,formattedFilterFields:this.dataGridOptions.formattedFilterFields,id:this.appletConfig.instanceId,workspaceId:ADK.Messaging.request("get:current:screen").config.id,model:this.model,maximizedScreen:n,fullScreen:this.appletConfig.fullScreen};this.filterView=o.create(i),this.dataGridOptions.appletId=this.appletConfig.id,this.dataGridOptions.instanceId=this.appletConfig.instanceId,this.dataGridOptions.filterDateRangeEnabled&&this.appletConfig.fullScreen&&(this.filterDateRangeView=new d({model:new Backbone.Model(this.dataGridOptions),appletId:this.dataGridOptions.appletId,appletView:this}))}},createDataGridView:function(){if(this.dataGridOptions.collection instanceof Backbone.PageableCollection&&(this.appletConfig.fullScreen||this.appletConfig.fullScreen===!0?this.dataGridOptions.collection.setPageSize(100,{silent:!0}):this.dataGridOptions.collection.setPageSize(f,{silent:!0})),!this.appletConfig.fullScreen&&this.dataGridOptions.SummaryView){var e=this.dataGridOptions.SummaryViewOptions||{};e.collection=this.dataGridOptions.collection,e.appletConfig=this.appletConfig,this.dataGridView=new this.dataGridOptions.SummaryView(e)}else this.dataGridOptions.gistView?this.dataGridView=new u(this.dataGridOptions):this.dataGridView=i.create(this.dataGridOptions)},onRender:function(){this.loading();var t=this;if(this.filterView){e(this.filterView.el).css({marginLeft:"0px",marginTop:"0px",marginBottom:"6px"}),this.gridFilter.show(this.filterView);"input[name='q-"+this.appletConfig.instanceId+"']";this.filterView.$el.find("input[type=search]").on("change",function(){a.setAppletStorageModel(t.expandedAppletId,"filterText",e(this).val(),!0,this.parentWorkspace)}),this.filterView.$el.find("a[data-backgrid-action=clear]").on("click",function(){a.setAppletStorageModel(t.expandedAppletId,"filterText",e(this).val(),!0,this.parentWorkspace)}),this.filterDateRangeView&&this.gridFilterDateRange.show(this.filterDateRangeView),this.listenTo(this,"destroy",function(){this.filterView.$el.find("input[type=search]").off("change"),this.filterView.$el.find("a[data-backgrid-action=clear]").off("click")}),e(".grid-filter").find("input").attr("tabindex","0")}this.dataGridOptions.collection instanceof Backbone.PageableCollection&&(this.appletConfig.fullScreen&&this.appletConfig.fullScreen===!0||this.$el.find("#grid-panel-"+this.appletConfig.instanceId).on("scroll",function(e){t.fetchRows(e)}),this.listenTo(this,"destroy",function(){this.$el.find("#grid-panel-"+this.appletConfig.instanceId).off("scroll")}))},onShow:function(){this.showFilterView()},template:c,regions:{gridContainer:".grid-container",gridToolbar:".grid-toolbar",gridFilterDateRange:".grid-filter-daterange",gridFilter:".grid-filter"},eventMapper:{refresh:"refresh",add:"onClickAdd"},fetchRows:function(n){var i=n.currentTarget;i.scrollTop+i.clientHeight+p>i.scrollHeight&&this.dataGridOptions.collection.hasNextPage()&&(n.preventDefault(),this.dataGridOptions.collection.setPageSize(this.dataGridOptions.collection.state.pageSize+g),this.dataGridOptions.collection.length>0&&!t.isUndefined(this.dataGridOptions.tblRowSelector)&&e(this.dataGridOptions.tblRowSelector).each(function(){e(this).attr("data-infobutton",e(this).find("td:first").text())}))},toolbar:function(){this.toolbarView&&this.gridToolbar.show(this.toolbarView)},onSync:function(){var n=this.$("[data-instanceid='"+this.appletConfig.instanceId+"']");if(0===n.length&&(n=this.$el.closest("[data-instanceid='"+this.appletConfig.instanceId+"']")),n.find(".fa-refresh").removeClass("fa-spin"),this.toolbar(),this.filterView){var i=a.getAppletStorageModel(this.expandedAppletId,"filterText",!0,this.parentWorkspace);(this.filterView.userDefinedFilters.length>0||void 0!==i&&null!==i&&i.trim().length>0)&&this.filterView.search()}if(this.dataGridOptions.gistView){var o=this.dataGridOptions;this.dataGridOptions.collection.each(function(e){t.each(o.appletConfiguration.gistModel,function(t){e.set(t.id,e.get(t.field))})}),this.dataGridView.collection!==this.dataGridOptions.collection&&this.dataGridView.collection.reset(this.dataGridOptions.collection.models)}else this.dataGridView.collection?this.dataGridView.collection!==this.dataGridOptions.collection&&this.dataGridView.collection.reset(this.dataGridOptions.collection.models):this.dataGridView.gridView.collection!==this.dataGridOptions.collection&&this.dataGridView.gridView.collection.reset(this.dataGridOptions.collection.models);if(this.showViewInGridContainer(this.dataGridView),this.dataGridOptions.collection instanceof Backbone.PageableCollection)if(this.appletConfig.fullScreen||this.appletConfig.fullScreen===!0){var r=this;this.$el.find(".data-grid").on("scroll",function(e){r.fetchRows(e)}),this.$el.find(".data-grid").trigger("scroll"),this.listenTo(this,"destroy",function(){this.$el.find(".data-grid").off("scroll")})}else this.$el.find("#grid-panel-"+this.appletConfig.instanceId).trigger("scroll");this.dataGridOptions.collection.length>0&&!t.isUndefined(this.dataGridOptions.tblRowSelector)&&e(this.dataGridOptions.tblRowSelector).each(function(){e(this).attr("data-infobutton",e(this).find("td:first").text())});var s;t.each(this.dataGridOptions.columns,function(t,i){s=i+1,e(n).find("thead th:nth-child("+s+") a").attr("tooltip-data-key",t.hoverTip)})},onError:function(e,t){var n=new Backbone.Model(t),i=l.create({model:n});this.showViewInGridContainer(i)},loading:function(){this.showViewInGridContainer(this.loadingView)},showViewInGridContainer:function(e,t){t=t||{},t.preventDestroy=this.gridContainer.currentView==this.loadingView,this.gridContainer.show(e,t)},refresh:function(e){if(void 0!==this.dataGridOptions.refresh)return this.loading(),void this.dataGridOptions.refresh(this);var t=this.dataGridOptions.collection;this.dataGridOptions.collection instanceof Backbone.PageableCollection&&t.setPageSize(f,{silent:!0}),this.loading(),this.createDataGridView(),t instanceof Backbone.PageableCollection?t.fullCollection.reset():t.reset(),r.clearCache(t.url),this.fetchData()},fetchData:function(){r.fetchCollection(this.dataGridOptions.collection.fetchOptions,this.dataGridOptions.collection)},buildJdsDateFilter:function(e,i){var o,r,s,l,d;if(i=i||{},t.defaults(i,{isOverrideGlobalDate:!1,operator:"and"}),o=i.isOverrideGlobalDate,l=i.customFilter,d=i.operator,o)r=i.fromDate,s=i.toDate;else{var c=a.getModel("globalDate");void 0!==c.get("selectedId")&&null!==c.get("selectedId")&&(r=c.get("fromDate"),s=c.get("toDate"))}r=void 0===r||null===r||0===r.trim().length?"":'"'+n.formatDate(r,"YYYYMMDD","MM/DD/YYYY")+'"',s=void 0===s||null===s||0===s.trim().length?"":'"'+n.formatDate(s,"YYYYMMDD","MM/DD/YYYY")+'235959"';var u;return""!==r&&""!==s?u="between("+e+","+r+","+s+")":""===r&&""!==s?u="lte("+e+","+s+")":""!==r&&""===s?u="gte("+e+","+r+")":console.error("gridAppletView buildJdsDateFilter both fromDate and toDate are empty."),void 0!==l&&null!==l&&(u=d+"("+u+","+l+")"),u},dateRangeRefresh:function(e,t){this.dataGridOptions.collection.fetchOptions.criteria.filter=this.buildJdsDateFilter(e,t),this.dataGridOptions.filterRemoved&&(this.dataGridOptions.collection.fetchOptions.criteria.filter="and(ne(removed, true),"+this.dataGridOptions.collection.fetchOptions.criteria.filter+")");var n=this.dataGridOptions.collection;this.dataGridOptions.collection instanceof Backbone.PageableCollection&&n.setPageSize(f,{silent:!0}),this.loading(),this.dataGridOptions.gistView?this.dataGridView=new u(this.dataGridOptions):this.dataGridView=i.create(this.dataGridOptions),n instanceof Backbone.PageableCollection?n.fullCollection.reset():n.reset(),r.fetchCollection(n.fetchOptions,n)},onClickAdd:function(e){this.onClickAdd(e)},expandRowDetails:function(t){if(t){var n=e("#"+t);n.click();var i=e(window).height(),o=n.offset().top;o+n.next().height()+50>i&&e("html, body").animate({scrollTop:o-100},0)}},showFilterView:function(){var e=a.getAppletStorageModel(this.expandedAppletId,"filterText",!0,this.parentWorkspace);this.dataGridOptions.filterEnabled===!0&&void 0!==e&&null!==e&&e.length>0?(this.$el.find("#grid-filter-"+this.appletConfig.instanceId).toggleClass("collapse in"),this.$el.find("input[name='q-"+this.appletConfig.instanceId+"']").val(e),this.filterView.showClearButtonMaybe()):this.dataGridOptions.filterDateRangeEnabled&&this.appletConfig.fullScreen&&this.$el.find("#grid-filter-"+this.appletConfig.instanceId).toggleClass("collapse in")},onDestroy:function(){try{this.loadingView&&!this.loadingView.isDestroyed&&(this.loadingView.destroy(),this.loadingView=null)}catch(e){console.error("Error destroying loadingView in applet:",this.appletConfig.id,e)}try{this.dataGridView&&!this.dataGridView.isDestroyed&&(this.dataGridView.destroy(),this.dataGridView=null)}catch(e){console.error("Error destroying dataGridView in applet:",this.appletConfig.id,e)}}})}),define("hbs!main/components/views/serverSideErrorTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<button type="button" class="close errorMessageClose">\n    <span aria-hidden="true">&times;</span>\n    <span class="sr-only">Dismiss Error</span>\n</button>\n<ul id="server-side-error-list" class="list-unstyled" role="alert" aria-atomic="true" aria-relevant="additions removals"/>'},useData:!0});return t.registerPartial("main/components/views/serverSideErrorTemplate",n),n}),define("hbs!main/components/views/serverSideError",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'<h6>\n    <div class="errorMsg applet-error" aria-describedby="'+s((o=null!=(o=t.errormsg||(null!=e?e.errormsg:e))?o:a,typeof o===r?o.call(e,{name:"errormsg",hash:{},data:i}):o))+'"><span class="fa fa-exclamation-circle" aria-hidden="true"></span> '+s((o=null!=(o=t.prefix||(null!=e?e.prefix:e))?o:a,typeof o===r?o.call(e,{name:"prefix",hash:{},data:i}):o))+": "+s((o=null!=(o=t.errormsg||(null!=e?e.errormsg:e))?o:a,typeof o===r?o.call(e,{name:"errormsg",hash:{},data:i}):o))+"</div>\n</h6>"},useData:!0});return t.registerPartial("main/components/views/serverSideError",n),n}),define("main/components/views/serverSideErrorView",["backbone","marionette","underscore","hbs!main/components/views/serverSideErrorTemplate","hbs!main/components/views/serverSideError"],function(e,t,n,i,o){var r=e.Model.extend({defaults:{errormsg:"Server timed out",prefix:"Error"}}),a=e.Collection.extend({model:r,comparator:"errormsg"}),s=e.Marionette.ItemView.extend({template:o,tagName:"li",model:r}),l=e.Marionette.CompositeView.extend({template:i,childViewContainer:"#server-side-error-list",id:"server-side-errors",className:"well well-sm",childView:s,collection:new a,attributes:{hidden:"true"},events:{"click .errorMessageClose":"clearErrors"},initialize:function(){this.listenTo(this.collection,"change",this.render())},addError:function(e,t){if(n.isString(e))try{e=JSON.parse(e)}catch(i){}n.isObject(e)&&n.has(e,"message")&&(e=e.message),this.collection.add(new r({errormsg:e,prefix:t})),this.el.removeAttribute("hidden"),this.$el.attr("hidden",!1)},clearErrors:function(){this.collection.reset(),this.$el.attr("hidden",!0)}});return l}),define("hbs!main/components/sign/confirmationViewTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div id="idConfirmation" class="deleteConfirmation">\n    <div class="row">\n        <div class="col-md-12">\n            <p>\n            	<b>There are unselected treatment factors.<br>Are you sure you want to continue with signing?</b>\n            </p>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-md-2">\n        </div>\n        <div class="col-md-10 text-right">\n           <button type="button" class="btn btn-default cancelButton" data-dismiss="modal">No</button>\n             <button type="button" class="btn btn-danger deleteButton" data-dismiss="modal">Yes</button>\n        </div>\n    </div>\n</div>'},useData:!0});return t.registerPartial("main/components/sign/confirmationViewTemplate",n),n}),define("main/components/sign/confirmationView",["backbone","marionette","hbs!main/components/sign/confirmationViewTemplate"],function(e,t,n){return e.Marionette.ItemView.extend({template:n,events:{"click .deleteButton":"yes","click .cancelButton":"no"},initialize:function(t){this.options=t,this.model=new e.Model,this.model.set({graphTitle:this.options.graphTitle})},yes:function(){this.options.callback()},no:function(){}})}),define("hbs!main/components/sign/signListTemplate",["hbs","handlebars","_assets/templates/helpers/ifExp"],function(e,t){var n=t.template({1:function(e,t,n,i,o){var r,a=t.helperMissing,s="";return r=(t.ifExp||e&&e.ifExp||a).call(e,null!=o[1]?o[1].totalGroups:o[1],">",1,{name:"ifExp",hash:{},fn:this.program(2,i,o),inverse:this.noop,data:i}),null!=r&&(s+=r),r=(t.ifExp||e&&e.ifExp||a).call(e,i&&i.key,"===","Medication, Outpatient",{name:"ifExp",hash:{},fn:this.program(4,i,o),inverse:this.program(43,i,o),data:i}),null!=r&&(s+=r),s},2:function(e,t,n,i){var o=this.lambda,r=this.escapeExpression;return'		<div class="sign-view-group">'+r(o(i&&i.key,e))+"</div>\n"},4:function(e,t,n,i,o){var r,a='		<div class="inside-title">Please indicate if the order is related to the following treatment factors. All Orders Except Controlled Substance Orders<i id="help-tooltip" class="question-mark fa fa-question-circle" data-toggle="tooltip" data-placement="auto top" data-original-title="<table class=\'tooltip-table-format\'><tr><td>SC</td><td>Service Connected Condition</td></tr><tr><td>CV</td><td>Combat Veteran</td></tr><tr><td>AO</td><td>Agent Orange Exposure</td></tr><tr><td>IR</td><td>Ionizing Radiation Exposure</td></tr><tr><td>SWAC</td><td>Southwest Asia Conditions</td></tr><tr><td>SHD</td><td>Shipboard Hazard and Defense</td></tr><tr><td>MST</td><td>Military Sexual Trauma</td></tr><tr><td>HNC</td><td>Head and/or Neck Cancer</td></tr></table>" data-container="body"></i></div>\n		<div class="sign-inside">\n		<div class="t-row">\n			<div class="cell"></div>\n			<div class="cell"></div>\n';return r=t["if"].call(e,null!=(r=null!=(r=null!=o[2]?o[2].patientInfo:o[2])?r.outpatient_med_related_to:r)?r.SC:r,{name:"if",hash:{},fn:this.program(5,i,o),inverse:this.noop,data:i}),null!=r&&(a+=r),r=t["if"].call(e,null!=(r=null!=(r=null!=o[2]?o[2].patientInfo:o[2])?r.outpatient_med_related_to:r)?r.CV:r,{name:"if",hash:{},fn:this.program(7,i,o),inverse:this.noop,data:i}),null!=r&&(a+=r),r=t["if"].call(e,null!=(r=null!=(r=null!=o[2]?o[2].patientInfo:o[2])?r.outpatient_med_related_to:r)?r.AO:r,{name:"if",hash:{},fn:this.program(9,i,o),inverse:this.noop,data:i}),null!=r&&(a+=r),r=t["if"].call(e,null!=(r=null!=(r=null!=o[2]?o[2].patientInfo:o[2])?r.outpatient_med_related_to:r)?r.IR:r,{name:"if",hash:{},fn:this.program(11,i,o),inverse:this.noop,data:i}),null!=r&&(a+=r),r=t["if"].call(e,null!=(r=null!=(r=null!=o[2]?o[2].patientInfo:o[2])?r.outpatient_med_related_to:r)?r.SWAC:r,{name:"if",hash:{},fn:this.program(13,i,o),inverse:this.noop,data:i}),null!=r&&(a+=r),r=t["if"].call(e,null!=(r=null!=(r=null!=o[2]?o[2].patientInfo:o[2])?r.outpatient_med_related_to:r)?r.SHD:r,{name:"if",hash:{},fn:this.program(15,i,o),inverse:this.noop,data:i}),null!=r&&(a+=r),r=t["if"].call(e,null!=(r=null!=(r=null!=o[2]?o[2].patientInfo:o[2])?r.outpatient_med_related_to:r)?r.MST:r,{name:"if",hash:{},fn:this.program(17,i,o),inverse:this.noop,data:i}),null!=r&&(a+=r),r=t["if"].call(e,null!=(r=null!=(r=null!=o[2]?o[2].patientInfo:o[2])?r.outpatient_med_related_to:r)?r.HNC:r,{name:"if",hash:{},fn:this.program(19,i,o),inverse:this.noop,data:i}),null!=r&&(a+=r),a+="		</div>\n",r=t.each.call(e,e,{name:"each",hash:{},fn:this.program(21,i,o),inverse:this.noop,data:i}),null!=r&&(a+=r),a+"		</div>\n"},5:function(e,t,n,i){return'				<div class="orders_category">\n					<div tooltip-data-key=\'sign_outpatientMeds_relatedTo_SC\' class="checkbox-title" data-category="SC">SC</div>\n				</div><div class="empty-cell"></div>\n'},7:function(e,t,n,i){return'				<div class="orders_category">\n					<div tooltip-data-key=\'sign_outpatientMeds_relatedTo_CV\' class="checkbox-title" data-category="CV">CV</div>\n				</div><div class="empty-cell"></div>\n'},9:function(e,t,n,i){return'				<div class="orders_category">\n					<div tooltip-data-key=\'sign_outpatientMeds_relatedTo_AO\' class="checkbox-title" data-category="AO">AO</div>\n				</div><div class="empty-cell"></div>\n'},11:function(e,t,n,i){return'				<div class="orders_category">\n					<div tooltip-data-key=\'sign_outpatientMeds_relatedTo_IR\' class="checkbox-title" data-category="IR">IR</div>\n				</div><div class="empty-cell"></div>\n'},13:function(e,t,n,i){return'				<div class="orders_category">\n					<div tooltip-data-key=\'sign_outpatientMeds_relatedTo_SWAC\' class="checkbox-title" data-category="SWAC">SWAC</div>\n				</div><div class="empty-cell"></div>\n'},15:function(e,t,n,i){return'				<div class="orders_category">\n					<div tooltip-data-key=\'sign_outpatientMeds_relatedTo_SHD\' class="checkbox-title" data-category="SHD">SHD</div>\n				</div><div class="empty-cell"></div>\n'},17:function(e,t,n,i){return'				<div class="orders_category">\n					<div tooltip-data-key=\'sign_outpatientMeds_relatedTo_MST\' class="checkbox-title" data-category="MST">MST</div>\n				</div><div class="empty-cell"></div>\n'},19:function(e,t,n,i){return'				<div class="orders_category">\n					<div tooltip-data-key=\'sign_outpatientMeds_relatedTo_HNC\' class="checkbox-title" data-category="HNC">HNC</div>\n				</div><div class="empty-cell"></div>\n'},21:function(e,t,n,i,o){var r,a,s="function",l=t.helperMissing,d=this.escapeExpression,c='			<div class="each-row" data-uid="'+d((a=null!=(a=t.uid||(null!=e?e.uid:e))?a:l,typeof a===s?a.call(e,{name:"uid",hash:{},data:i}):a))+'">\n';return r=(t.ifExp||e&&e.ifExp||l).call(e,null!=o[3]?o[3].totalItems:o[3],">",1,{name:"ifExp",hash:{},fn:this.program(22,i,o),inverse:this.program(25,i,o),data:i}),null!=r&&(c+=r),c+='					<div class="description">'+d((a=null!=(a=t.description||(null!=e?e.description:e))?a:l,typeof a===s?a.call(e,{name:"description",hash:{},data:i}):a))+"</div>\n",r=t["if"].call(e,null!=(r=null!=(r=null!=o[3]?o[3].patientInfo:o[3])?r.outpatient_med_related_to:r)?r.SC:r,{name:"if",hash:{},fn:this.program(27,i,o),inverse:this.noop,data:i}),null!=r&&(c+=r),r=t["if"].call(e,null!=(r=null!=(r=null!=o[3]?o[3].patientInfo:o[3])?r.outpatient_med_related_to:r)?r.CV:r,{name:"if",hash:{},fn:this.program(29,i,o),inverse:this.noop,data:i}),null!=r&&(c+=r),r=t["if"].call(e,null!=(r=null!=(r=null!=o[3]?o[3].patientInfo:o[3])?r.outpatient_med_related_to:r)?r.AO:r,{name:"if",hash:{},fn:this.program(31,i,o),inverse:this.noop,data:i}),null!=r&&(c+=r),r=t["if"].call(e,null!=(r=null!=(r=null!=o[3]?o[3].patientInfo:o[3])?r.outpatient_med_related_to:r)?r.IR:r,{name:"if",hash:{},fn:this.program(33,i,o),inverse:this.noop,data:i}),null!=r&&(c+=r),r=t["if"].call(e,null!=(r=null!=(r=null!=o[3]?o[3].patientInfo:o[3])?r.outpatient_med_related_to:r)?r.SWAC:r,{name:"if",hash:{},fn:this.program(35,i,o),inverse:this.noop,data:i}),null!=r&&(c+=r),r=t["if"].call(e,null!=(r=null!=(r=null!=o[3]?o[3].patientInfo:o[3])?r.outpatient_med_related_to:r)?r.SHD:r,{name:"if",hash:{},fn:this.program(37,i,o),inverse:this.noop,data:i}),null!=r&&(c+=r),r=t["if"].call(e,null!=(r=null!=(r=null!=o[3]?o[3].patientInfo:o[3])?r.outpatient_med_related_to:r)?r.MST:r,{name:"if",hash:{},fn:this.program(39,i,o),inverse:this.noop,data:i}),null!=r&&(c+=r),r=t["if"].call(e,null!=(r=null!=(r=null!=o[3]?o[3].patientInfo:o[3])?r.outpatient_med_related_to:r)?r.HNC:r,{name:"if",hash:{},fn:this.program(41,i,o),inverse:this.noop,data:i}),null!=r&&(c+=r),c+'			</div>\n			<div  class="empty-row"></div>\n'},22:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s='					<div class="selected">\n						<input type="checkbox" id="esig-med-item-'+a(r(i&&i.index,e))+'" class="item-selected" ';return o=t["if"].call(e,null!=e?e.selected:e,{name:"if",hash:{},fn:this.program(23,i),inverse:this.noop,data:i}),null!=o&&(s+=o),s+">\n					</div>\n"},23:function(e,t,n,i){return"checked"},25:function(e,t,n,i){return'					<div class="replace-checkbox"></div>\n'},27:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s=t.helperMissing,l='				<div class="inside-row">\n					<div>\n					<input type="radio" name="SC_check-'+a(r(i&&i.index,e))+'" data-category="SC" id="esig-med-SC-yes-'+a(r(i&&i.index,e))+"\" data-status='yes'";return o=(t.ifExp||e&&e.ifExp||s).call(e,null!=e?e.SC:e,"===",!0,{name:"ifExp",hash:{},fn:this.program(23,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='>\n					<label class="label_format" for="esig-med-SC-yes-'+a(r(i&&i.index,e))+'">Yes</label></div>\n					<div>\n					<input type="radio" name="SC_check-'+a(r(i&&i.index,e))+'" data-category="SC" id="esig-med-SC-no-'+a(r(i&&i.index,e))+"\" data-status='no'",o=(t.ifExp||e&&e.ifExp||s).call(e,null!=e?e.SC:e,"===",!0,{name:"ifExp",hash:{},fn:this.program(23,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+'>\n					<label class="label_format" for="esig-med-SC-no-'+a(r(i&&i.index,e))+'">No</label></div>\n				</div><div class="empty-cell"></div>\n'},29:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s=t.helperMissing,l='				<div class="inside-row">\n					<div>\n					<input type="radio" name="CV_check-'+a(r(i&&i.index,e))+'" data-category="CV" id="esig-med-CV-yes-'+a(r(i&&i.index,e))+"\" data-status='yes'";return o=(t.ifExp||e&&e.ifExp||s).call(e,null!=e?e.CV:e,"===",!0,{name:"ifExp",hash:{},fn:this.program(23,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='>\n					<label class="label_format" for="esig-med-CV-yes-'+a(r(i&&i.index,e))+'">Yes</label></div>\n					<div>\n					<input type="radio" name="CV_check-'+a(r(i&&i.index,e))+'" data-category="CV" id="esig-med-CV-no-'+a(r(i&&i.index,e))+"\" data-status='no'",o=(t.ifExp||e&&e.ifExp||s).call(e,null!=e?e.CV:e,"===",!0,{name:"ifExp",hash:{},fn:this.program(23,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+'>\n					<label class="label_format" for="esig-med-CV-no-'+a(r(i&&i.index,e))+'">No</label></div>\n				</div><div class="empty-cell"></div>\n'},31:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s=t.helperMissing,l='				<div class="inside-row">\n					<div>\n					<input type="radio" name="AO_check-'+a(r(i&&i.index,e))+'" data-category="AO" id="esig-med-AO-yes-'+a(r(i&&i.index,e))+"\" data-status='yes'";return o=(t.ifExp||e&&e.ifExp||s).call(e,null!=e?e.AO:e,"===",!0,{name:"ifExp",hash:{},fn:this.program(23,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='>\n					<label class="label_format" for="esig-med-AO-yes-'+a(r(i&&i.index,e))+'">Yes</label></div>\n					<div>\n					<input type="radio" name="AO_check-'+a(r(i&&i.index,e))+'" data-category="AO" id="esig-med-AO-no-'+a(r(i&&i.index,e))+"\" data-status='no'",o=(t.ifExp||e&&e.ifExp||s).call(e,null!=e?e.AO:e,"===",!0,{name:"ifExp",hash:{},fn:this.program(23,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+'>\n					<label class="label_format" for="esig-med-AO-no-'+a(r(i&&i.index,e))+'">No</label></div>\n				</div><div class="empty-cell"></div>\n'},33:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s=t.helperMissing,l='				<div class="inside-row">\n					<div>\n					<input type="radio" name="IR_check-'+a(r(i&&i.index,e))+'" data-category="IR" id="esig-med-IR-yes-'+a(r(i&&i.index,e))+"\" data-status='yes'";return o=(t.ifExp||e&&e.ifExp||s).call(e,null!=e?e.IR:e,"===",!0,{name:"ifExp",hash:{},fn:this.program(23,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='>\n					<label class="label_format" for="esig-med-IR-yes-'+a(r(i&&i.index,e))+'">Yes</label></div>\n					<div>\n					<input type="radio" name="IR_check-'+a(r(i&&i.index,e))+'" data-category="IR" id="esig-med-IR-no-'+a(r(i&&i.index,e))+"\" data-status='no'",o=(t.ifExp||e&&e.ifExp||s).call(e,null!=e?e.IR:e,"===",!0,{name:"ifExp",hash:{},fn:this.program(23,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+'>\n					<label class="label_format" for="esig-med-IR-no-'+a(r(i&&i.index,e))+'">No</label></div>\n				</div><div class="empty-cell"></div>\n'},35:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s=t.helperMissing,l='				<div class="inside-row">\n					<div>\n					<input type="radio" name="SWAC_check-'+a(r(i&&i.index,e))+'" data-category="SWAC" id="esig-med-SWAC-yes-'+a(r(i&&i.index,e))+"\" data-status='yes'";return o=(t.ifExp||e&&e.ifExp||s).call(e,null!=e?e.SWAC:e,"===",!0,{name:"ifExp",hash:{},fn:this.program(23,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='>\n					<label class="label_format" for="esig-med-SWAC-yes-'+a(r(i&&i.index,e))+'">Yes</label></div>\n					<div>\n					<input type="radio" name="SWAC_check-'+a(r(i&&i.index,e))+'" data-category="SWAC" id="esig-med-SWAC-no-'+a(r(i&&i.index,e))+"\"  data-status='no'",o=(t.ifExp||e&&e.ifExp||s).call(e,null!=e?e.SWAC:e,"===",!0,{name:"ifExp",hash:{},fn:this.program(23,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+'>\n					<label class="label_format" for="esig-med-SWAC-no-'+a(r(i&&i.index,e))+'">No</label></div>\n				</div><div class="empty-cell"></div>\n'},37:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s=t.helperMissing,l='				<div class="inside-row">\n					<div>\n					<input type="radio" name="SHD_check-'+a(r(i&&i.index,e))+'" data-category="SHD" id="esig-med-SHD-yes-'+a(r(i&&i.index,e))+"\" data-status='yes'";return o=(t.ifExp||e&&e.ifExp||s).call(e,null!=e?e.SHD:e,"===",!0,{name:"ifExp",hash:{},fn:this.program(23,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='>\n					<label class="label_format" for="esig-med-SHD-yes-'+a(r(i&&i.index,e))+'">Yes</label></div>\n					<div>\n					<input type="radio" name="SHD_check-'+a(r(i&&i.index,e))+'" data-category="SHD" id="esig-med-SHD-no-'+a(r(i&&i.index,e))+"\" data-status='no'",o=(t.ifExp||e&&e.ifExp||s).call(e,null!=e?e.SHD:e,"===",!0,{name:"ifExp",hash:{},fn:this.program(23,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+'>\n					<label class="label_format" for="esig-med-SHD-no-'+a(r(i&&i.index,e))+'">No</label></div>\n				</div><div class="empty-cell"></div>\n'},39:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s=t.helperMissing,l='				<div class="inside-row">\n					<div>\n					<input type="radio" name="MST_check-'+a(r(i&&i.index,e))+'" data-category="MST" id="esig-med-MST-yes-'+a(r(i&&i.index,e))+"\" data-status='yes'";return o=(t.ifExp||e&&e.ifExp||s).call(e,null!=e?e.MST:e,"===",!0,{name:"ifExp",hash:{},fn:this.program(23,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='>\n					<label class="label_format" for="esig-med-MST-yes-'+a(r(i&&i.index,e))+'">Yes</label></div>\n					<div>\n					<input type="radio" name="MST_check-'+a(r(i&&i.index,e))+'" data-category="MST" id="esig-med-MST-no-'+a(r(i&&i.index,e))+"\" data-status='no'",o=(t.ifExp||e&&e.ifExp||s).call(e,null!=e?e.MST:e,"===",!0,{name:"ifExp",hash:{},fn:this.program(23,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+'>\n					<label class="label_format" for="esig-med-MST-no-'+a(r(i&&i.index,e))+'">No</label></div>\n				</div><div class="empty-cell"></div>\n'},41:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s=t.helperMissing,l='				<div class="inside-row">\n					<div>\n					<input type="radio" name="HNC_check-'+a(r(i&&i.index,e))+'" data-category="HNC" id="esig-med-HNC-yes-'+a(r(i&&i.index,e))+"\" data-status='yes'";return o=(t.ifExp||e&&e.ifExp||s).call(e,null!=e?e.HNC:e,"===",!0,{name:"ifExp",hash:{},fn:this.program(23,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='>\n					<label class="label_format" for="esig-med-HNC-yes-'+a(r(i&&i.index,e))+'">Yes</label></div>\n					<div>\n					<input type="radio" name="HNC_check-'+a(r(i&&i.index,e))+'" data-category="HNC" id="esig-med-HNC-no-'+a(r(i&&i.index,e))+"\" data-status='no'",o=(t.ifExp||e&&e.ifExp||s).call(e,null!=e?e.HNC:e,"===",!0,{name:"ifExp",hash:{},fn:this.program(23,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+'>\n					<label class="label_format" for="esig-med-HNC-no-'+a(r(i&&i.index,e))+'">No</label></div>\n				</div><div class="empty-cell"></div>\n'},43:function(e,t,n,i,o){var r,a=t.helperMissing,s="";return r=(t.ifExp||e&&e.ifExp||a).call(e,i&&i.key,"===","Documents",{name:"ifExp",hash:{},fn:this.program(44,i,o),inverse:this.program(50,i,o),data:i}),null!=r&&(s+=r),s},44:function(e,t,n,i,o){var r,a='			<div class="sign-inside">\n';return r=t.each.call(e,e,{name:"each",hash:{},fn:this.program(45,i,o),inverse:this.noop,data:i}),null!=r&&(a+=r),a+"			</div>\n"},45:function(e,t,n,i,o){var r,a,s="function",l=t.helperMissing,d=this.escapeExpression,c='				<div class="each-row" data-uid="'+d((a=null!=(a=t.uid||(null!=e?e.uid:e))?a:l,typeof a===s?a.call(e,{name:"uid",hash:{},data:i}):a))+'">\n';return r=(t.ifExp||e&&e.ifExp||l).call(e,null!=o[4]?o[4].totalItems:o[4],">",1,{name:"ifExp",hash:{},fn:this.program(46,i,o),inverse:this.program(48,i,o),data:i}),null!=r&&(c+=r),c+'					<div class="description border-right"><span style="font-weight:bold;">'+d((a=null!=(a=t.description||(null!=e?e.description:e))?a:l,typeof a===s?a.call(e,{name:"description",hash:{},data:i}):a))+"</span> - "+d((a=null!=(a=t.date||(null!=e?e.date:e))?a:l,typeof a===s?a.call(e,{name:"date",hash:{},data:i}):a))+'</div>\n					<div class="empty-cell"></div>\n				</div>\n				<div class="empty-row"></div>\n'},46:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s='						<div class="selected">\n							<input type="checkbox" id="esig-doc-item-'+a(r(i&&i.index,e))+'" class="item-selected" ';return o=t["if"].call(e,null!=e?e.selected:e,{name:"if",hash:{},fn:this.program(23,i),inverse:this.noop,data:i}),null!=o&&(s+=o),s+">\n						</div>\n"},48:function(e,t,n,i){return'						<div class="replace-checkbox"></div>\n'},50:function(e,t,n,i,o){var r,a='			<div class="sign-inside">\n';return r=t.each.call(e,e,{name:"each",hash:{},fn:this.program(51,i,o),inverse:this.noop,data:i}),null!=r&&(a+=r),a+"			</div>\n"},51:function(e,t,n,i,o){var r,a,s="function",l=t.helperMissing,d=this.escapeExpression,c='				<div class="each-row" data-uid="'+d((a=null!=(a=t.uid||(null!=e?e.uid:e))?a:l,typeof a===s?a.call(e,{name:"uid",hash:{},data:i}):a))+'">\n';return r=(t.ifExp||e&&e.ifExp||l).call(e,null!=o[4]?o[4].totalItems:o[4],">",1,{name:"ifExp",hash:{},fn:this.program(52,i,o),inverse:this.program(48,i,o),data:i}),null!=r&&(c+=r),c+'					<span class="description border-right">'+d((a=null!=(a=t.description||(null!=e?e.description:e))?a:l,typeof a===s?a.call(e,{name:"description",hash:{},data:i}):a))+'</span>\n					<div class="empty-cell"></div>\n				</div>\n				<div class="empty-row"></div>\n'},52:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s='						<span class="selected">\n							<input type="checkbox" id="esig-lab-item-'+a(r(i&&i.index,e))+'" class="item-selected" ';return o=t["if"].call(e,null!=e?e.selected:e,{name:"if",hash:{},fn:this.program(23,i),inverse:this.noop,data:i}),null!=o&&(s+=o),s+">\n						</span>\n"},54:function(e,t,n,i,o){var r,a=t.helperMissing,s="";return r=(t.ifExp||e&&e.ifExp||a).call(e,i&&i.key,"===","Medication, Outpatient",{name:"ifExp",hash:{},fn:this.program(55,i,o),inverse:this.noop,data:i}),null!=r&&(s+=r),s},55:function(e,t,n,i,o){var r,a=t.helperMissing,s='		<div class="service-title">Service Connection & Rated Disabilities</div>\n		<div class="border-smoke">\n			<div class="serv-conn">\n				<div>Service Connected: ';return r=(t.ifExp||e&&e.ifExp||a).call(e,null!=(r=null!=o[2]?o[2].patientInfo:o[2])?r.scPercent:r,"!==",null!=e?e.undefined:e,{name:"ifExp",hash:{},fn:this.program(56,i,o),inverse:this.program(58,i,o),data:i}),null!=r&&(s+=r),s+="\n				</div>\n				<div>Rated Disabilities: ",r=t["if"].call(e,null!=(r=null!=o[2]?o[2].patientInfo:o[2])?r.disabilities:r,{
name:"if",hash:{},fn:this.program(60,i,o),inverse:this.program(58,i,o),data:i}),null!=r&&(s+=r),s+"\n				</div>\n			</div>\n		</div>\n"},56:function(e,t,n,i,o){var r,a=this.lambda,s=this.escapeExpression;return" "+s(a(null!=(r=null!=o[3]?o[3].patientInfo:o[3])?r.scPercent:r,e))+" %"},58:function(e,t,n,i){return"None Stated"},60:function(e,t,n,i,o){var r,a='\n					<ul class="style-none">\n';return r=t.each.call(e,null!=(r=null!=o[3]?o[3].patientInfo:o[3])?r.disabilities:r,{name:"each",hash:{},fn:this.program(61,i,o),inverse:this.noop,data:i}),null!=r&&(a+=r),a+"					</ul>"},61:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d="						<li>"+l((r=null!=(r=t.name||(null!=e?e.name:e))?r:s,typeof r===a?r.call(e,{name:"name",hash:{},data:i}):r))+" (";return o=(t.ifExp||e&&e.ifExp||s).call(e,null!=e?e.scPercent:e,"!==",null!=e?e.undefined:e,{name:"ifExp",hash:{},fn:this.program(62,i),inverse:this.noop,data:i}),null!=o&&(d+=o),o=t["if"].call(e,null!=e?e.serviceConnected:e,{name:"if",hash:{},fn:this.program(64,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+")</li>\n"},62:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return s((o=null!=(o=t.scPercent||(null!=e?e.scPercent:e))?o:a,typeof o===r?o.call(e,{name:"scPercent",hash:{},data:i}):o))+"%"},64:function(e,t,n,i){return" - SC"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i,o){var r,a='<div style="margin-top:-15px;"></div>\n<div class="container-fluid sign-container">\n';return r=t.each.call(e,null!=e?e.groups:e,{name:"each",hash:{},fn:this.program(1,i,o),inverse:this.noop,data:i}),null!=r&&(a+=r),r=t.each.call(e,null!=e?e.groups:e,{name:"each",hash:{},fn:this.program(54,i,o),inverse:this.noop,data:i}),null!=r&&(a+=r),a+'<div class="signature-title">Enter Electronic Signature Code</div>\n<div class="padding-lt">\n	<input id="SignatureCode" type="password" class="form-control signature-code" autocomplete="off" id="signatureCode" value="">\n</div>\n\n</div>\n<div style=\'margin-bottom:-15px\'></div>'},useData:!0,useDepths:!0});return t.registerPartial("main/components/sign/signListTemplate",n),n}),define("hbs!main/components/sign/signFooterTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div>\n	<button id="SignBtn" data-toggle="modal" href="#idConfirmation" type="button" disabled class="find-it btn btn-primary fl-right margin-t">Sign</button>\n	<button id="CancelSignBtn" type="button" class="btn btn-default fl-right margin-r">Cancel</button>\n</div>'},useData:!0});return t.registerPartial("main/components/sign/signFooterTemplate",n),n}),define("hbs!main/components/sign/signHeaderTemplate",["hbs","handlebars","_assets/templates/helpers/ifExp"],function(e,t){var n=t.template({1:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<span id="resultSignCount" class="sign-title-count">'+a(r(null!=(o=null!=e?e.items:e)?o.length:o,e))+" / "+a(r(null!=(o=null!=e?e.items:e)?o.length:o,e))+"</span>"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=t.helperMissing,a='<div>\n	<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n	<h4 class="modal-title padding-bt" id="mainModalLabel">Sign ';return o=(t.ifExp||e&&e.ifExp||r).call(e,null!=(o=null!=e?e.items:e)?o.length:o,">",1,{name:"ifExp",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(a+=o),a+"</h4>\n</div>"},useData:!0});return t.registerPartial("main/components/sign/signHeaderTemplate",n),n}),define("main/components/sign/signView",["handlebars","backbone","marionette","underscore","main/components/sign/confirmationView","hbs!main/components/sign/signListTemplate","hbs!main/components/sign/signFooterTemplate","hbs!main/components/sign/signHeaderTemplate","api/ResourceService","moment"],function(e,t,n,i,o,r,a,s,l,d){"use strict";var c=["wkEo-ZJt!dG)49K{nX1BS$vH<&:Myf*>Ae0jQW=;|#PsO`'%+rmb[gpqN,l6/hFC@DcUa ]z~R}\"V\\iIxu?872.(TYL5_3","rKv`R;M/9BqAF%&tSs#Vh)dO1DZP> *fX'u[.4lY=-mg_ci802N7LTG<]!CWo:3?{+,5Q}(@jaExn$~p\\IyHwzU\"|k6Jeb","\\pV(ZJk\"WQmCn!Y,y@1d+~8s?[lNMxgHEt=uw|X:qSLjAI*}6zoF{T3#;ca)/h5%`P4$r]G'9e2if_>UDKb7<v0&- RBO.","depjt3g4W)qD0V~NJar\\B \"?OYhcu[<Ms%Z`RIL_6:]AX-zG.#}$@vk7/5x&*m;(yb2Fn+l'PwUof1K{9,|EQi>H=CT8S!","NZW:1}K$byP;jk)7'`x90B|cq@iSsEnu,(l-hf.&Y_?J#R]+voQXU8mrV[!p4tg~OMez CAaGFD6H53%L/dT2<*>\"{\\wI=","vCiJ<oZ9|phXVNn)m K`t/SI%]A5qOWe\\&?;jT~M!fz1l>[D_0xR32c*4.P\"G{r7}E8wUgyudF+6-:B=$(sY,LkbHa#'@Q","hvMX,'4Ty;[a8/{6l~F_V\"}qLI\\!@x(D7bRmUH]W15J%N0BYPkrs&9:$)Zj>u|zwQ=ieC-oGA.#?tfdcO3gp`S+En K2*<","jd!W5[];4'<C$/&x|rZ(k{>?ghBzIFN}fAK\"#`p_TqtD*1E37XGVs@0nmSe+Y6Qyo-aUu%i8c=H2vJ\\) R:MLb.9,wlO~P","2ThtjEM+!=xXb)7,ZV{*ci3\"8@_l-HS69L>]\\AUF/Q%:qD?1~m(yvO0e'<#o$p4dnIzKP|`NrkaGg.ufCRB[; sJYwW}5&","vB\\5/zl-9y:Pj|=(R'7QJI *&CTX\"p0]_3.idcuOefVU#omwNZ`$Fs?L+1Sk<,b)hM4A6[Y%aDrg@~KqEW8t>H};n!2xG{","sFz0Bo@_HfnK>LR}qWXV+D6`Y28=4Cm~G/7-5A\\b9!a#rP.l&M$hc3ijQk;),TvUd<[:I\"u1'NZSOw]*gxtE{eJp|y (?%","M@,D}|LJyGO8`$*ZqH .j>c~h<d=fimszv[#-53F!+a;NC'6T91IV?(0x&/{B)w\"]Q\\YUWprk4:ol%g2nE7teRKbAPuS_X",".mjY#_0*H<B=Q+FML6]s;r2:e8R}[ic&KA 1w{)vV5d,$u\"~xD/Pg?IyfthO@CzWp%!`N4Z'3-(o|J9XUE7k\\TlqSb>anG","xVa1']_GU<X`|\\NgM?LS9{\"jT%s$}y[nvtlefB2RKJW~(/cIDCPow4,>#zm+:5b@06O3Ap8=*7ZFY!H-uEQk; .q)i&rhd","I]Jz7AG@QX.\"%3Lq>METUo{Pp_ |a6<0dYVSv8:b)~W9NK`(r'4fs&wim\\kReC2hg=HOj$1B*/nxt,;c#y+![?lFuZ-5D}","Rr(Ge6F Hx>q$m&C%M~Tn,:\"o'tX/*yP.{lZ!YkiVhuw_<KE5a[;}W0gjsz3]@7cI2\\QN?f#4p|vb1OUBD9)=-LJA+d`S8","I~k>y|m};d)-7DZ\"Fe/Y<B:xwojR,Vh]O0Sc[`$sg8GXE!1&Qrzp._W%TNK(=J 3i*2abuHA4C'?Mv\\Pq{n#56LftUl@9+","~A*>9 WidFN,1KsmwQ)GJM{I4:C%}#Ep(?HB/r;t.&U8o|l['Lg\"2hRDyZ5`nbf]qjc0!zS-TkYO<_=76a\\X@$Pe3+xVvu","yYgjf\"5VdHc#uA,W1i+v'6|@pr{n;DJ!8(btPGaQM.LT3oe?NB/&9>Z`-}02*%x<7lsqz4OS ~E$\\R]KI[:UwC_=h)kXmF","5:iar.{YU7mBZR@-K|2 \"+~`M%8sq4JhPo<_X\\Sg3WC;Tuxz,fvEQ1p9=w}FAI&j/keD0c?)LN6OHV]lGy'$*>nd[(tb!#"],u=t.Marionette.ItemView.extend({template:a,events:{"click #CancelSignBtn":"cancelSign","click #SignBtn":"sign"},cancelSign:function(){ADK.UI.Modal.hide()},initialize:function(e){this.template=e.template,this.model=e.model,this.originalModel=e.originalModel,this.callback=e.callback},validateCheckboxes:function(){var e=!1;return this.model.attributes.groups["Medication, Outpatient"]&&i.forEach(i.where(this.model.attributes.groups["Medication, Outpatient"],{selected:!0}),function(t,n){i.each(t,function(t){null===t&&(e=!0)})}),e},buildReturnModel:function(e,t){var n=[],o=[],r=[];return t.set("patientInfo",e.get("patientInfo")),i.each(e.get("groups"),function(e){n=i.union(n,i.where(e,{selected:!0}))}),n=i.map(n,function(t,n){var o=e.get("patientInfo").outpatient_med_related_to,r={uid:t.uid};return i.each(o,function(e,n){i.isUndefined(t[n])||(r.factors||(r.factors={}),r.factors[n]=t[n])}),r}),o=i.pluck(n,"uid"),r=i.filter(t.get("items"),function(e){return i.contains(o,e.uid)}),r=i.map(r,function(e){return e.factors=i.findWhere(n,{uid:e.uid}).factors,e}),t.set("items",r),t},sign:function(){var e=this;this.$("#SignBtn").addClass("disabled"),this.$("#CancelSignBtn").addClass("disabled");var t,n,o,r,a=$("#SignatureCode").val(),s=e.buildEncryptedParamString(a),l=ADK.PatientRecordService.getCurrentPatient().get("visit");if(void 0===l||void 0===l.localId){var d=new ADK.UI.Notification({title:"Signing not complete",icon:"fa-exclamation-circle",message:"The signing failed because there was no visit set."});return ADK.UI.Modal.hide(),d.show(),void(this.callback&&this.callback("No visit set!"))}o=l.localId.split(";"),r=i.last(o),o=this.originalModel.attributes.items[0].pid.split(";");var c=i.last(o);if(this.model.attributes.groups.Documents){var u={param:{signatureCode:s,note:this.originalModel.attributes.items[0],patientIEN:c}},h="resource/write-health-data/writeback/notes/sign";$.ajax({url:h,type:"POST",data:JSON.stringify(u),contentType:"application/json",dataType:"json",callback:this.callback,success:function(e,t,n){var i=new ADK.UI.Notification({title:"Signing complete",icon:"fa-check",type:"success",message:"The signing succeded."});ADK.UI.Modal.hide(),i.show(),this.callback&&this.callback(e)},error:function(e){var t=new ADK.UI.Notification({title:"Signing not complete",icon:"fa-exclamation-circle",message:"The signing of the specified note failed."});ADK.UI.Modal.hide(),t.show(),this.callback&&this.callback(e)}})}else if(this.model.attributes.groups["Medication, Outpatient"]){if(this.validateCheckboxes()){if(!confirm("There are unselected treatment factors.\nAre you sure you want to continue with signing?"))return!1;t={param:{signatureCode:s,order:this.originalModel.attributes.items[0],locationIEN:r,patientIEN:c}},n="/resource/write-health-data/writeback/orders/sign",$.ajax({url:n,type:"POST",data:JSON.stringify(t),contentType:"application/json",dataType:"json",callback:this.callback,success:function(e,t,n){var i=new ADK.UI.Notification({title:"Signing complete",icon:"fa-check",type:"success",message:"The signing succeded."});ADK.UI.Modal.hide(),i.show(),this.callback&&this.callback(e)},error:function(e){var t=new ADK.UI.Notification({title:"Signing not complete",icon:"fa-exclamation-circle",message:"The signing of the specified order failed."});ADK.UI.Modal.hide(),t.show(),this.callback&&this.callback(e)}})}}else{var p={};i.each(i.pluck(this.originalModel.attributes.items,"localId"),function(e){p[e]=""}),t={param:{signatureCode:s,orders:p,locationIEN:r,patientIEN:c}},n="/resource/write-health-data/writeback/orders/sign",$.ajax({url:n,type:"POST",data:JSON.stringify(t),contentType:"application/json",dataType:"json",callback:this.callback,success:function(e,t,n){var i=new ADK.UI.Notification({title:"Signing complete",icon:"fa-check",type:"success",message:"The signing succeded."});ADK.UI.Modal.hide(),i.show(),this.callback&&this.callback(e)},error:function(e){var t=new ADK.UI.Notification({title:"Signing not complete",icon:"fa-exclamation-circle",message:"The signing of the specified orders failed."});ADK.UI.Modal.hide(),t.show(),this.callback&&this.callback(e)}})}},buildEncryptedParamString:function(e,t,n){if(0>t||t>=c.length||0>n||n>=c.length)throw new Error(util.format("Encryption Indexes must be from 0 to %s inclusive",c.length-1));if(null===t||void 0===t||null===n||void 0===n)for(t=i.random(0,9),n=i.random(0,9);t===n;)n=i.random(0,9);var o=c[t],r=c[n],a=Array.prototype.reduce.call(e,function(e,t){var n=o.indexOf(t);return e+(-1===n?t:r.charAt(n))},""),s=String.fromCharCode(t+32)+a+String.fromCharCode(n+32);return s}}),h=t.Marionette.LayoutView.extend({fetchOptions:{},events:{"click .item-selected":"selectRow","click div[data-category]":"checkAll","input input[type=password]":"setStateSignButton","change input[type=radio]":"changeRelatedTo"},initialize:function(e){this.template=r,this.model=e.model,this.originalModel=this.model.clone(),this.callback=e.callback},getHeaderView:function(e){var n=t.Marionette.ItemView.extend({template:s,model:e});return n},footer:{},modelChangeEvent:!1,getFooterView:function(e){return this.footer=new u({model:this.model,originalModel:this.originalModel,template:a,callback:this.callback}),this.footer},modelChanged:function(e,t){this.footer.model=this.model},changeRelatedTo:function(e){var t=$(e.currentTarget);if(t[0].checked){var n=t.data("category"),i=t.data("status"),o=t.parents(".each-row"),r=o.data("uid"),a=this.model.attributes.getItem(r);a[n]="yes"===i}},checkAll:function(e){var t=$(e.currentTarget),n=t.data("category"),o=t.data("status");o=!o,t.data("status",o);var r=$(".inside-row").find("[data-category="+n+"]").not("[disabled]");i.forEach(this.model.attributes.groups,function(e,t){"Medication, Outpatient"===t&&i.each(e,function(e){e.selected===!0&&(e[n]=o)})}),r.filter("[data-status]").each(function(){this.checked=$(this).data("status")===(o?"yes":"no")})},selectRow:function(e){$("#resultSignCount").text($(".item-selected:checked").length+" / "+this.model.attributes.totalItems),this.model.set("selectedItems",$(".item-selected:checked").length);var t=$(e.currentTarget),n=t.parents(".each-row"),i=e.currentTarget.checked,o=n.data("uid"),r=this.model.attributes.getItem(o);return r.selected=!!i,i?(n.removeClass("disabled-row"),n.find(".inside-row :radio").removeAttr("disabled")):(n.addClass("disabled-row"),n.find(".inside-row :radio").attr("disabled","disabled")),this.setStateSignButton(),!0},setStateSignButton:function(e){$(".signature-code").val()&&this.model.get("selectedItems")>0?$("button.find-it").removeAttr("disabled"):$("button.find-it").attr("disabled","disabled")},onDestroy:function(){$("body").off("click",".item-selected")},parseModel:function(e){var n=l.patientRecordService.getCurrentPatient(),o={};o.patientInfo={serviceConnected:n.attributes.serviceConnected,scPercent:n.attributes.scPercent,disabilities:[],outpatient_med_related_to:{SC:!0}},o.patientInfo.disabilities=i.map(n.attributes.disability,function(e){return{name:e.name,scPercent:e.disPercent,serviceConnected:e.serviceConnected}}),i.each(n.attributes.exposure,function(e){switch(e.uid){case"urn:va:agent-orange:Y":o.patientInfo.outpatient_med_related_to.AO=!0;break;case"urn:va:ionizing-radiation:Y":o.patientInfo.outpatient_med_related_to.IR=!0;break;case"urn:va:sw-asia:Y":o.patientInfo.outpatient_med_related_to.SWAC=!0;break;case"urn:va:head-neck-cancer:Y":o.patientInfo.outpatient_med_related_to.HNC=!0;break;case"urn:va:mst:Y":o.patientInfo.outpatient_med_related_to.MST=!0;break;case"urn:va:combat-vet:Y":o.patientInfo.outpatient_med_related_to.CV=!0}});var r=e,a=i.map(r.attributes.items,function(e){1===this.attributes.items.length&&void 0===this.attributes.items[0].uid&&(e.uid="urn:va:document:"+e.pid+":1");var t={selected:!0,uid:e.uid,description:e.content};if(e.uid.indexOf("document")>-1?t.kind="Documents":t.kind=e.kind,"Medication, Outpatient"===t.kind)i.forEach(o.patientInfo.outpatient_med_related_to,function(e,n){t[n]=null});else if("Documents"===t.kind){t.description=e.summary;var n={};void 0!==e.stampTime?n=e.stampTime:void 0!==e.text&&e.text.length>0&&void 0!==e.text[0].dateTime&&(n=e.text[0].dateTime),t.date=d(n,"YYYYMMDDHHmmss").format("MM/DD/YYYY HH:mm")}return t},r);o.totalGroups=0,o.totalItems=a.length,o.selectedItems=a.length,o.groups=i.groupBy(a,"kind"),o.getItem=function(e){var t;for(var n in this.groups)if(t=i.findWhere(this.groups[n],{uid:e}))break;return t};var s;for(s in o.groups)o.groups.hasOwnProperty(s)&&o.totalGroups++;var c=t.Model.extend({}),u=new c({});return i.each(o,function(e,t){u.set(t,e)}),u},onBeforeRender:function(){this.model=this.parseModel(this.model),this.modelChangeEvent||this.listenTo(this.model,"change",this.modelChanged),this.footer.model=this.model,this.modelChangeEvent=!0},onRender:function(e){var t=this.$el;$("body").on("mouseenter focus","#help-tooltip, .checkbox-title",function(e){t.find("#help-tooltip").tooltip({html:!0,delay:{show:500,hide:100}}),$(e.currentTarget).data("bs.tooltip").options.placement="right"})}});return h}),define("main/components/sign/signApi",["backbone","marionette","jquery","underscore"],function(e,t,n,i){"use strict";var o={};return o.sign=function(e,t){var n=new ADK.Views.SignForm({model:e,callback:t}),i=n.getFooterView(e),o=n.getHeaderView(e),r={title:"Sign",size:"large",backdrop:!0,keyboard:!0,callShow:!0,headerView:o,footerView:i},a=new ADK.UI.Modal({view:n,options:r});a.show()},o}),define("hbs!main/components/appletToolbar/templates/toolbarTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div class="toolbarPopover" >\n	<div class="btn-toolbar" role="toolbar" >\n		<div class="btn-group" role="application">\n		</div>\n	</div>\n</div>\n'},useData:!0});return t.registerPartial("main/components/appletToolbar/templates/toolbarTemplate",n),n}),define("hbs!main/components/appletToolbar/templates/buttonTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'<i class="fa '+s((o=null!=(o=t.icon||(null!=e?e.icon:e))?o:a,typeof o===r?o.call(e,{name:"icon",hash:{},data:i}):o))+'"/>'},useData:!0});return t.registerPartial("main/components/appletToolbar/templates/buttonTemplate",n),n}),define("hbs!main/components/appletToolbar/templates/dropdownTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'<div class="btn-group dropdown" role="group">\n	<div class="dropdown-toggle" data-toggle="dropdown">\n		<a class="btn btn-default" aria-haspopup="true" tooltip-data-key="toolbar_submenu" tabindex="0">\n			<i class="fa '+s((o=null!=(o=t.icon||(null!=e?e.icon:e))?o:a,typeof o===r?o.call(e,{name:"icon",hash:{},data:i}):o))+'"></i>\n		</a>\n	</div>\n	<ul class="dropdown-menu" role="menu">\n		<li class="appletToolbar-submenu-title">Select Associated Workspace</li>\n	</ul>\n</div>'},useData:!0});return t.registerPartial("main/components/appletToolbar/templates/dropdownTemplate",n),n}),define("main/components/appletToolbar/appletToolbarView",["jquery","underscore","backbone","marionette","handlebars","api/Messaging","api/ResourceService","hbs!main/components/appletToolbar/templates/toolbarTemplate","hbs!main/components/appletToolbar/templates/buttonTemplate","hbs!main/components/appletToolbar/templates/dropdownTemplate"],function(e,t,n,i,o,r,a,s,l,d){var c=function(i,s){switch(s.toLowerCase()){case"detailsviewbutton":return{icon:"fa-file-text-o",view:u.extend({options:i,attributes:t.extend({},u.prototype.attributes,{"tooltip-data-key":"toolbar_detailview","button-type":"detailView-button-toolbar"}),events:t.extend({},u.prototype.events,{click:function(e){e.preventDefault();var t=a.patientRecordService.getCurrentPatient(),n={model:this.options.targetElement.model,uid:this.options.targetElement.model.get("uid"),patient:{icn:t.attributes.icn,pid:t.attributes.pid}};this.options.targetElement.applet&&(n.applet=this.options.targetElement.applet),r.getChannel("gists").trigger("close:quicklooks"),r.getChannel(this.options.targetElement.model.get("applet_id")).trigger("detailView",n),this.$el.tooltip("hide")}})})};case"quicklookbutton":return{icon:"fa-eye",view:u.extend({options:i,attributes:t.extend({},u.prototype.attributes,{"tooltip-data-key":"toolbar_quicklook","button-type":"quick-look-button-toolbar"}),events:t.extend({},u.prototype.events,{click:function(e){e.preventDefault(),e.stopImmediatePropagation();var t=this.options.targetElement.$("[data-toggle=popover]");t.trigger("click")}}),initialize:function(){u.prototype.initialize.apply(this,arguments);var t=this,n=this.options.targetElement.$("[data-toggle=popover]");e(document).on("click."+t.cid,function(t){t.target!==n[0]&&(e.contains(n[0],t.target)||e(t.target).is(".popover.gistPopover")||e(t.target).parents(".popover.gistPopover").length||n.popover("hide"))})},onBeforeDestroy:function(){e(document).off("click."+this.cid)}})};case"submenubutton":return 0===i.submenuItems.length?{icon:"fa-share-alt",view:u.extend({options:i,attributes:t.extend({},u.prototype.attributes,{"tooltip-data-key":"toolbar_submenu","button-type":"submenu-button-toolbar",disabled:!0}),onRender:function(){this.$("i").attr("disabled",!0)}})}:1===i.submenuItems.length?{icon:"fa-share-alt",view:u.extend({options:i,attributes:t.extend({},u.prototype.attributes,{"tooltip-data-key":"toolbar_submenu","button-type":"submenu-button-toolbar",href:i.submenuItems[0].url})})}:{icon:"fa-share-alt",view:h.extend({options:i,childViewContainer:".dropdown-menu",childView:n.Marionette.ItemView.extend({tagName:"li",className:"appletToolbar-submenu-title",template:o.compile('<a href="{{url}}">{{displayText}}</a>')}),attributes:t.extend({},h.prototype.attributes,{"button-type":"submenu-button-toolbar"}),onRender:function(){t.each(this.options.submenuItems,function(e){this.addChild(new n.Model(e),this.childView)},this),this.ui.dropdownEl.dropdown()}})};case"infobutton":return{icon:"fa-info",view:u.extend({options:i,attributes:t.extend({},u.prototype.attributes,{"tooltip-data-key":"toolbar_infobutton","button-type":"info-button-toolbar"}),events:t.extend({},u.prototype.events,{click:function(e){e.preventDefault();var t=a.patientRecordService.getCurrentPatient(),n={model:this.options.targetElement.model,uid:this.options.targetElement.model.get("uid"),patient:t};ADK.utils.infoButtonUtils.callProvider(n)}})})};case"deletestackedgraphbutton":return{icon:"fa-times",view:u.extend({options:i,className:"btn",attributes:t.extend({},u.prototype.attributes,{"tooltip-data-key":"toolbar_deletestackedgraph","button-type":"deletestackedgraph-button-toolbar"}),events:t.extend({},u.prototype.events,{click:function(e){e.preventDefault(),r.getChannel("stackedGraph").trigger("delete",{model:this.options.targetElement.model})}})})};case"tilesortbutton":return{icon:"fa-arrows-v",view:u.extend({options:i,className:"btn tilesort-button-toolbar",attributes:t.extend({},u.prototype.attributes,{"tooltip-data-key":"toolbar_tilesortbutton","button-type":"tilesort-button-toolbar"}),events:t.extend({},u.prototype.events,{click:function(e){e.preventDefault()},keydown:function(t){var n="tilesort-keydown-dragging",i=this.$el.closest(".gistItem"),o=e(i).parent().find(".gistItem").index(i),r=this.$el.closest(".gistItem").parent(),a=e(r).find(".problem-name").length>0?e(r).find(".problem-name"):e(r).find('[name="name"]'),s="";if(this.$el.hasClass(n)){t.preventDefault(),t.stopPropagation();var l=a.length;switch(t.which){case 38:case 87:this.$el.find(".sr-only").remove(),o>0?(e(r).children(".gistItem").eq(o-1).before(e(r).children(".gistItem").eq(o)),s=a[o-1].textContent,this.$el.append('<span class="sr-only">You are above the '+s+" tile</span>"),o--):this.$el.append('<span class="sr-only">You\'ve reached the top of the list</span>'),this.$el.focus(),this.$el.addClass(n);break;case 40:case 90:l>o&&(e(r).children(".gistItem").eq(o+1).after(e(r).children(".gistItem").eq(o)),o++),this.$el.focus(),this.$el.addClass(n),this.$el.find(".sr-only").remove(),a[o]?(s=a[o].textContent,this.$el.append('<span class="sr-only">You are below the '+s+" tile</span>")):this.$el.append('<span class="sr-only">You\'ve reached the end of the list.</span>');break;case 13:case 32:s=a[o].textContent,this.$el.find(".sr-only").remove(),this.$el.append('<span class="sr-only">You just dropped the '+s+" tile</span>"),this.$el.removeClass(n);var d=this.$el.closest(".gistItem");e(d).trigger("drop"),e(d).focus()}this.$el.focus()}else{var c;if(c=this.options.isStackedGraph?this.$el.closest(".appletToolbar").parent().parent().siblings('[draggable="true"]'):this.$el.closest(".appletToolbar").parent().siblings('[draggable="true"]'),c.length)switch(t.which){case 13:case 32:t.preventDefault(),t.stopPropagation(),this.$el.addClass(n),i.trigger("dragstart"),this.$el.tooltip("destroy"),s=a[o].textContent,this.$el.append('<span class="sr-only">You are on the Sort Tile button for the '+s+" tile. To sort each tile, press enter on the sort tile button, then use the Up and Down arrow keys to reorder the selected tile. Press the enter key again to deselect the tile and lock into position. </span>")}}}})})};case"additembutton":return{icon:"fa-plus",view:u.extend({options:i,className:"btn additem-button-toolbar",attributes:t.extend({},u.prototype.attributes,{"tooltip-data-key":"toolbar_addorders","button-type":"additem-button-toolbar"}),events:t.extend({},u.prototype.events,{click:function(e){e.preventDefault(),e.stopImmediatePropagation();var t={model:this.options.targetElement.model};this.options.targetElement.applet&&(t.applet=this.options.targetElement.applet),e.preventDefault();var i=ADK.utils.appletUtils.getAppletView("orders","writeback"),o=new n.Model,r={size:"large",title:"Order a Lab Test",showProgress:!1,keyboard:!0,steps:[{view:i,viewModel:o,stepTitle:"Step 1"}]};ADK.UI.Workflow.show(r)}})})}}return{icon:"",view:u.extend({options:i,events:t.extend({},u.prototype.events,{click:function(e){e.preventDefault()}})})}},u=n.Marionette.ItemView.extend({tagName:"a",template:l,className:"btn",initialize:function(e){this.options=e},attributes:{"data-toggle":"tooltip","data-container":"body","data-placement":"auto top",tabindex:0},events:{focusin:"handleTrigger",keydown:function(e){/(13|32)/.test(e.which)&&(e.preventDefault(),e.stopPropagation(),this.$el.trigger("click"))}},handleTrigger:function(e){this.trigger("before:click"),this.$el.addClass("toolbar-btn-hover")},onDestroy:function(e){this.$el.tooltip("destroy")}}),h=n.Marionette.CompositeView.extend({template:d,className:"btn-group",attributes:{role:"group"},ui:{dropdownEl:"[data-toggle=dropdown]"},events:{keydown:function(e){/(13|32)/.test(e.which)&&(e.preventDefault(),this.$el.trigger("click"))}}}),p=n.Marionette.CompositeView.extend({fade:100,template:s,className:"appletToolbar",childViewContainer:".btn-group",childEvents:{"before:click":function(e){this.$(".toolbar-btn-hover").removeClass("toolbar-btn-hover")},focusout:function(e){this.$(".toolbar-btn-hover").removeClass("toolbar-btn-hover")}},initialize:function(e){this.options=e},onRender:function(e){t.each(this.options.buttonTypes,function(e){var t=c(this.options,e);this.addChild(new n.Model({icon:t.icon}),t.view)},this)},show:function(n){this.trigger("show:toolbar"),this.$el.fadeIn(this.fade,t.bind(function(e){this.trigger("shown:toolbar")},this)),this.$el.find("a").on("show.bs.tooltip",function(t){e(this).siblings().tooltip("hide")})},onDestroy:function(){this.$el.find("a").off("show.bs.tooltip")},hide:function(e){this.trigger("hide:toolbar"),this.$(".toolbar-btn-hover").removeClass("toolbar-btn-hover"),this.$el.fadeOut(this.fade,t.bind(function(e){this.trigger("hidden:toolbar")},this))}});return p}),define("hbs!main/components/views/appletViews/sharedTemplates/gistPopover",["hbs","handlebars"],function(e,t){var n=t.template({1:function(e,t,n,i){return'<div class="col-md-12 popover-title-container">\n        <div class="col-md-11 popover-title"></div>\n        <div class="col-md-1 applet-title-button popover-close-button">\n            <button type="button" class="applet-filter-button btn btn-sm btn-link" title="Close Popover">\n                <span class="applet-title-button popover-close-button-icon fa fa-times"></span>\n            </button>\n        </div>\n    </div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r='<div class="popover gistPopover" role="tooltip">\n    ';return o=t["if"].call(e,null!=e?e.header:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(r+=o),r+'    <div class="col-md-12 popover-content">\n        <div class="data-content"></div>\n    </div>\n</div>'},useData:!0});return t.registerPartial("main/components/views/appletViews/sharedTemplates/gistPopover",n),n}),define("main/components/applets/baseDisplayApplet/baseDisplayAppletItem",["jquery","underscore","backbone","api/Messaging","main/components/appletToolbar/appletToolbarView","hbs!main/components/views/appletViews/sharedTemplates/gistPopover"],function(e,t,n,i,o,r){"use strict";var a,s,l={dragstart:function(t){var n=e(this.el).parent().find(".gistItem").index(this.el).toString();if(t.originalEvent){s=t.currentTarget;var i={startIndex:n,appletID:this.options.AppletID};a=this.options.AppletID,t.originalEvent.dataTransfer.setData("text",JSON.stringify(i))}else this.performManualDragStart(n);this.trigger("after:dragstart")},dragover:function(t){t.preventDefault(),t.stopImmediatePropagation();var n=this.options.AppletID;if(n==a&&(s.style.display="none","placeholder"!==t.target.className)){var i=e(this.el).parent().find(".placeholder");e(i).removeClass("hidden"),e(this.el).parent().find(".gistItem:first-child").is(e(this.el))?e(i).insertBefore(e(this.el)):e(i).insertAfter(e(this.el))}},drop:function(t){t.preventDefault(),t.stopImmediatePropagation();var n=this.manualOriginalIndex,i=e(this.el).parent().find(".gistItem").index(this.el),o={oldIndex:n,newIndex:i};this.$el.trigger("reorder",o),this.trigger("after:drop")},dragend:function(t){t.preventDefault(),e(this.el).parent().find(".placeholder").addClass("hidden"),s.style.display="block"}},d=n.Marionette.LayoutView.extend({className:"gistItem item",regions:{toolbarView:".toolbarContainer"},attributes:{tabindex:0},ui:{popoverEl:"[data-toggle=popover]",toolbarToggler:".selectable:not([data-toggle=popover])"},chartPointer:null,events:{"click @ui.toolbarToggler":function(e){e.preventDefault(),this.toggleToolbar(),this.$el.trigger("focus")},"click @ui.popoverEl":function(e){this.trigger("toggle:quicklook")},keydown:function(e){var t=e.which||e.keydode;/(13|32)/.test(t)&&(this.ui.toolbarToggler.trigger("click"),e.preventDefault(),e.stopPropagation())},"keydown @ui.popoverEl":function(t){var n=t.which||t.keydode;/(13|32)/.test(n)&&(e(t.target).trigger("click"),t.preventDefault(),t.stopPropagation())}},initialize:function(e){this.appletOptions=e.appletOptions,this.model&&this.model.set("userWorkspace",this._enableTileSorting)},createPopover:function(){var t=this;this.ui.popoverEl.popup({trigger:"manual",html:"true",container:"body",template:r(this.model),referenceEl:this.$el,placement:"bottom",yoffset:function(e){return t.isToolbarActive()&&"top"===e?-t.$(".toolbarPopover").height():0},autoHandler:function(t){return t[3]+t[1].bottom>e(window).height()?"top":"bottom"}}),this.ui.popoverEl.on("shown.bs.popover",function(){e(window).one("resize."+this.cid,function(){t.ui.popoverEl.popup("hide")})}),this.ui.popoverEl.off("hidden.bs.popover",function(){e(window).off("resize."+this.cid)})},isToolbarActive:function(){return this.$el.hasClass("toolbarActive")},toggleToolbar:function(){this.ui.popoverEl.popup("hide"),this.isToolbarActive()?this.hideToolbar():this.showToolbar()},showToolbar:function(){var e=this.toolbarView.currentView;this.trigger("before:showtoolbar"),e.show(),this.$el.addClass("toolbarActive"),this.trigger("after:showtoolbar",e)},hideToolbar:function(){var e=this.toolbarView.currentView;this.trigger("before:hidetoolbar"),e.hide(),this.$el.removeClass("toolbarActive"),this.trigger("after:hidetoolbar")},performManualDragStart:function(e){this.manualOriginalIndex=e},onDestroy:function(){this.ui.popoverEl.popup("destroy")},onRender:function(){var e=new o(this.toolbarOptions);this.toolbarView.show(e),this.createPopover()}}),c=d,u=c.extend({constructor:function(){this.options||(this.options={});var e=Array.prototype.slice.call(arguments),o=this.initialize,r=this.onDestroy,a=this.onRender,s=i.request("get:current:screen"),d=s.config?""|s.config.predefined:!0,u=e[0]?e[0]:null,h=u&&u.appletOptions?u.appletOptions:{},p=(u&&u.model?u.model:new n.Model,h.enableTileSorting&&!d?!0:!1),g=e[0]?t.extend({},this.options.events||{},e[0].events):t.extend({},this.options.events),f=p?l:{};this.initialize=function(){var e=Array.prototype.slice.call(arguments);this._enableTileSorting=p,c.prototype.initialize.apply(this,e),c.prototype.initialize!==o&&o.apply(this,e)},this.onDestroy=function(){var e=Array.prototype.slice.call(arguments);c.prototype.onDestroy.apply(this,e),c.prototype.onDestroy!==r&&r.apply(this,e)},this.onRender=function(){var e=Array.prototype.slice.call(arguments);a.apply(this,e),c.prototype.onRender!==a&&c.prototype.onRender.apply(this,e)},this.events=t.extend({},"function"==typeof c.prototype.events?c.prototype.events():c.prototype.events,"function"==typeof this.events?this.events():this.events,"function"==typeof g?g():g,f),e[0]&&e[0].events&&delete e[0].events,this.options.events&&delete this.options.events,c.apply(this,e)}});return d=u}),define("main/components/views/appletViews/TileSortManager",["api/ResourceService","api/Messaging","api/UserDefinedScreens"],function(e,t,n){"use strict";var i={},o=function(e,t,n){function i(e){return e.attributes[t]==n[r]}var o=!1;_.isUndefined(t)&&(t="uid");for(var r=0;r<n.length;r++){o=!0;var a=_.find(e.models,i);e.remove(a),e.add(a,{at:r})}return o};i.getSortOptions=function(e,i,r,a){
var s=!1,l=t.request("get:current:screen");if(l.config.predefined&&"function"==typeof a)return void a(s,e);var d=l.id,c=n.getUserConfigFromSession();if(c&&c.userDefinedSorts){var u=_.findWhere(c.userDefinedSorts,{id:d});if(u){var h=_.find(u.applets,function(e){return e.instanceId==i});if(void 0===h)return void("function"==typeof a&&a(s,e));var p=h.orderSequence[0].split(",");if(s=o(e,r,p),"function"==typeof a)return void a(s,e)}}"function"==typeof a&&a(s,e)},i.reorderRows=function(i,o,r,a,s,l){_.isUndefined(a)&&(a="uid");var d=o.at(i.oldIndex),c=i.listElement,u=$(c).find("div.gistItem:eq("+i.oldIndex+")").detach();o.remove(d,{silent:!0}),i.newIndex===o.models.length?$(c).append(u):$(c).find("div.gistItem:eq("+i.newIndex+")").before(u),o.add(d,{at:i.newIndex,silent:!0});var h=[];o.models.forEach(function(e){_.isUndefined(e.attributes)||_.isUndefined(e.attributes[a])||h.push(e.attributes[a])});var p=t.request("get:current:screen").id,g=Backbone.Model.extend({sync:function(e,t,n){var i={type:"POST",url:t.url(),contentType:"application/json",data:JSON.stringify(t.toJSON()),dataType:"json"};$.ajax(_.extend(i,n))},url:function(){var t=p;return e.buildUrl("user-defined-sort",{id:t,instanceId:r})}}),f={};f.instanceId=r,f.keyField=a,f.orderAfter="",f.fieldValue=h.join(",");var m=new g(f);m.save(null,{success:function(e,t){var i=n.getUserConfigFromSession();i.userDefinedSorts=t.data.userDefinedSorts,n.saveUserConfigToSession(i),l&&l()},error:function(e){}})};var r=function(e,t,n){for(var i=-1,o=e?e.length:0;++i<o;)if(t(e[i],i,e))return i;return-1},a=function(e,t){var n=r(e.userDefinedSorts,function(e){return e.id===t});return n},s=function(e,t){var n=r(e.applets,function(e){return e.instanceId===t});return n};return i.hasSort=function(e,t){var n=ADK.UserDefinedScreens.getUserConfigFromSession(),i=a(n,e);if(-1===i)return!1;var o=n.userDefinedSorts[i],r=s(o,t);return-1===r?!1:!0},i.removeSort=function(o,r){var a=t.request("get:current:screen").id;if(!i.hasSort(a,o))return void(r&&r());var s={resourceTitle:"user-defined-sort",fetchType:"DELETE",criteria:{id:a,instanceId:o},onSuccess:function(e,t){var i=n.getUserConfigFromSession();i.userDefinedSorts=t.data.userDefinedSorts,n.saveUserConfigToSession(i),r&&r()}};e.patientRecordService.fetchCollection(s)},i}),define("main/components/applets/baseDisplayApplet/baseGistView",["jquery","underscore","backbone","main/Utils","main/components/views/appletViews/TileSortManager","api/Messaging"],function(e,t,n,i,o,r){"use strict";function a(e){return t.isUndefined(e.appletConfig.instanceId)?t.isUndefined(e.appletConfig.gistSubName)?e.appletConfig.id:e.appletConfig.id+e.appletConfig.gistSubName:t.isUndefined(e.appletConfig.gistSubName)?e.appletConfig.instanceId:e.appletConfig.instanceId+e.appletConfig.gistSubName}var s=n.Marionette.CompositeView.extend({manualOrder:!1,reorderOnSort:!0,emptyView:n.Marionette.ItemView.extend({template:t.template('<div class="emptyGistList">No Records Found</div>')}),eventString:function(){return["focusin."+this.cid,"click."+this.cid].join(" ")},events:{reorder:"reorderRows",'click [data-event="tilesort_remove-sort"]':function(e){e.preventDefault(),e.stopImmediatePropagation(),this.removeManualOrder()},'focus [data-event="tilesort_remove-sort"]':function(t){t.preventDefault(),t.stopImmediatePropagation();var n=e(t.target),i=this;n.keypress(function(e){(13===e.which||32===e.which)&&i.removeManualOrder()})},"click .header":function(t){t.preventDefault(),t.stopImmediatePropagation(),this.hidePopovers(),this.sortCollection(e(t.target))},"focus .header":function(t){t.preventDefault(),t.stopImmediatePropagation();var n=e(t.target),i=this;this.hidePopovers(),n.keypress(function(e){(13===e.which||32===e.which)&&i.sortCollection(n)})},"focusout .header":function(t){var n=e(t.target);n.off("keypress")}},childEvents:{"before:showtoolbar":function(e){r.getChannel("gists").trigger("close:gists"),this.hidePopovers(),this.closeToolbar()},"after:showtoolbar":function(e,t){this.activeToolbar=t,this.setDocHandler()},"after:hidetoolbar":function(t){this.activeToolbar="",this.hidePopovers(),e(document).off(this.eventString())},"after:dragstart":function(e){this.activeToolbar&&(this.sortItemModel=e.model)},"after:drop":function(e){this.sortItemModel&&this.children.findByModel(this.sortItemModel).showToolbar()},"toggle:quicklook":function(t){var n=e(t.ui.popoverEl);this.setDocHandler(),r.getChannel("gists").trigger("close:quicklooks",n),n.popup("toggle")}},onAddChild:function(e){e.model.get("applet_id")||e.model.set("applet_id",this.AppletID)},setDocHandler:function(){e(document).off(this.eventString()),e(document).on(this.eventString(),{view:this},this.documentHandler)},documentHandler:function(t){var n=t.data.view;n.$(t.target).length||(r.getChannel("gists").trigger("close:gists").trigger("close:quicklooks"),e(document).off(n.eventString()))},initialize:function(e){this.appletOptions=e,this.AppletID=a(e),this.listenTo(r.getChannel("gists"),"close:gists",function(e){this.closeToolbar()}),this.listenTo(r.getChannel("gists"),"close:quicklooks",function(e){this.$("[data-toggle=popover]").not(e).popup("hide")})},render:function(){this.appletOptions.enableTileSorting||(this.off("reorder"),this.$el.unbind('[data-event="tilesort_remove-sort"]',"click"),this.$el.unbind('[data-event="tilesort_remove-sort"]',"focus")),this.collection=this.collectionParser(this.collection),this.unsortedModels=this.collection.clone().models;var e=this.options.appletConfig.instanceId+"_"+this.options.appletConfig.id,i=this;o.getSortOptions(this.collection,e,this.appletOptions.tileSortingUniqueId,function(e,o){i.collection=o,i.manualSortModels=o.models,t.each(i.collection.models,function(e){t.each(i.gistModel,function(t){e.set(t.id,e.get(t.field))})},i),e&&(i.manualOrder=!0,i.addManualOrder(),i.collection.comparator=null),n.Marionette.CompositeView.prototype.render.apply(i,arguments)})},onRender:function(){if(this.manualOrder&&this.addManualOrder(),this.appletOptions.enableTileSorting){var t=this,n="activeMeds"===this.options.appletConfig.id?"col-sm-12":"";e(this.el).find(".gistItemList, .gistList").append('<div class="placeholder hidden '+n+'"/>'),e(this.el).find(".placeholder").on("dragover",function(e){e.preventDefault()}),e(this.el).find(".placeholder").on("drop",function(n){var i=n.originalEvent.dataTransfer.getData("text"),o=JSON.parse(i),r=o.appletID;if(r==t.AppletID){var a=Number(o.startIndex),s=e(this).index()-1;e(this).addClass("hidden"),a>s&&s++;var l={oldIndex:a,newIndex:s,listElement:e(t.el).find(".gistItemList, .gistList")};t.reorderRows(n,l),t.sortItemModel&&t.children.findByModel(t.sortItemModel).showToolbar()}});var i=e("#"+this.options.appletConfig.instanceId).find(".grid-applet-panel").first();e('<div id="'+this.options.appletConfig.instanceId+'-scroll-bottom" style="position: relative; top: -10px; height: 10px;"/>').insertAfter(e(i)).on("dragenter",function(n){t.bottomInterval=setInterval(function(){var t=e(i).scrollTop();e(i).scrollTop(t+10)},25)}).on("dragleave",function(e){t.bottomInterval&&clearInterval(t.bottomInterval)}),e('<div id="'+this.options.appletConfig.instanceId+'-scroll-top" style="position: relative; top: 0px; height: 4px; background-color: white;"/>').insertBefore(e(i)).on("dragenter",function(n){t.topInterval=setInterval(function(){var t=e(i).scrollTop();e(i).scrollTop(t-10)},25)}).on("dragleave",function(e){t.topInterval&&clearInterval(t.topInterval)})}},sortCollection:function(t){if(this.collection.comparator=null,"true"===t.attr("sortable")){var n="";switch(t.attr("sortDirection")){case"asc":n="desc";break;case"desc":n=this.manualOrder?"manual":"none";break;case"manual":n="none";break;case"none":n="asc"}if(this.$el.find(".header").attr("sortDirection","none"),t.attr("sortDirection",n),this.$el.find(".header").find("[sortArrow=headerDirectionalIndicator]").addClass("header-hide"),this.$el.find(".header").find("[sortArrow=headerDirectionalIndicator]").removeClass("fa-caret-up"),this.$el.find(".header").find("[sortArrow=headerDirectionalIndicator]").removeClass("fa-caret-down"),e(".tilesort-remove-sort",this.$el).remove(),"asc"===n?(t.find("[sortArrow=headerDirectionalIndicator]").removeClass("header-hide"),t.find("[sortArrow=headerDirectionalIndicator]").addClass("fa-caret-up")):"desc"===n?(t.find("[sortArrow=headerDirectionalIndicator]").removeClass("header-hide"),t.find("[sortArrow=headerDirectionalIndicator]").addClass("fa-caret-down")):"manual"===n&&this.addManualOrder(),"none"===n)this.collection.reset(this.unsortedModels),this.collection.trigger("baseGistView:sortNone",this.collection);else if("manual"===n)this.collection.reset(this.manualSortModels),this.collection.trigger("baseGistView:sortManual",this.collection);else{var o=t.attr("sortType"),r=t.attr("sortKey");i.CollectionTools.sort(this.collection,r,n,o)}}},reorderRows:function(t,n){var i=this,r=this.options.appletConfig.instanceId+"_"+this.options.appletConfig.id;o.reorderRows(n,this.collection,r,this.appletOptions.tileSortingUniqueId,this.unsortedModels,function(){i.manualSortModels=i.collection.models}),0===e(".tilesort-remove-sort",this.$el).length&&(this.addManualOrder(),this.$el.find(".header").find("[sortArrow=headerDirectionalIndicator]").removeClass("fa-caret-up"),this.$el.find(".header").find("[sortArrow=headerDirectionalIndicator]").removeClass("fa-caret-down"))},addManualOrder:function(){this.manualOrder=!0,e(".header:first",this.$el).attr("sortDirection","manual"),this.$el.find(".header").find("[sortArrow=headerDirectionalIndicator]").addClass("header-hide"),e(".header:first",this.$el).append('<span class="tilesort-remove-sort">/Manual <a title="Clear your manual sort" data-event="tilesort_remove-sort" role="button" aria-selected="false" tabindex="0"><span class="sr-only">Clear your manual sort</span><i class="fa fa-times-circle"></i></a></span>')},removeManualOrder:function(){var t=this.options.appletConfig.instanceId+"_"+this.options.appletConfig.id;this.manualOrder=!1,this.sortCollection(e(".header:first",this.$el)),o.removeSort(t)},clickTileRemoveSort:function(e){e.preventDefault(),e.stopImmediatePropagation(),this.removeManualOrder()},focusTileRemoveSort:function(t){t.preventDefault(),t.stopImmediatePropagation();var n=e(t.target),i=this;n.keypress(function(e){(13===e.which||32===e.which)&&i.removeManualOrder()})},closeToolbar:function(e){var t=this.$childViewContainer;t&&this.activeToolbar&&(this.activeToolbar.hide(),t.find(".toolbarActive").removeClass("toolbarActive")),this.activeToolbar=null},hidePopovers:function(e){r.getChannel("gists").trigger("close:quicklooks")},onDestroy:function(t){e(this.el).find(".placeholder").remove(),e("#"+this.options.appletConfig.instanceId+"-scroll-top").remove(),e("#"+this.options.appletConfig.instanceId+"-scroll-bottom").remove(),e(document).off(this.eventString())}}),l=s,d=l.extend({constructor:function(){this.options||(this.options={});var e=Array.prototype.slice.call(arguments),n=this.initialize,i=this.onAddChild,o=this.onRender,r=this.onDestroy,a=e[0]?t.extend({},this.options.events||{},e[0].events):t.extend({},this.options.events);this.initialize=function(){var e=Array.prototype.slice.call(arguments);l.prototype.initialize.apply(this,e),l.prototype.initialize!==n&&n.apply(this,e)},this.onAddChild=function(){var e=Array.prototype.slice.call(arguments);l.prototype.onAddChild.apply(this,e),l.prototype.onAddChild!==i&&i.apply(this,e)},this.onDestroy=function(){var e=Array.prototype.slice.call(arguments);l.prototype.onDestroy.apply(this,e),l.prototype.onDestroy!==r&&r.apply(this,e)},this.onRender=function(){var e=Array.prototype.slice.call(arguments);o.apply(this,e),l.prototype.onRender!==o&&l.prototype.onRender.apply(this,e)},this.events=t.extend({},"function"==typeof l.prototype.events?l.prototype.events():l.prototype.events,"function"==typeof this.events?this.events():this.events,"function"==typeof a?a():a),e[0]&&e[0].events&&delete e[0].events,this.options.events&&delete this.options.events,l.apply(this,e)}});return s=d}),define("hbs!main/components/views/appletViews/eventsGistView/templates/eventsGistLayout",["hbs","handlebars"],function(e,t){var n=t.template({1:function(e,t,n,i){return"selectable"},3:function(e,t,n,i){return'                        tabindex="0"\n'},5:function(e,t,n,i){return' tabindex="0"'},7:function(e,t,n,i){return'                        tabindex="0"\n                     '},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d=this.lambda,c='<div id="'+l((r=null!=(r=t.appletID||(null!=e?e.appletID:e))?r:s,typeof r===a?r.call(e,{name:"appletID",hash:{},data:i}):r))+'-event-gist" gistviewtype="events">\n	<div id="eventGistGrid" class="row header-bar noMargin">\n        <div class="col-sm-6">\n            <div class="row noMargin">\n                <div id="name-header"\n                     class="col-sm-9 noPadding ';return o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.name:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+=' header"\n                     sortable="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.name:o)?o.sortable:o,e))+'"\n                     sortType="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.name:o)?o.sortType:o,e))+'"\n                     sortDirection="none"\n                     sortKey="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.name:o)?o.key:o,e))+'"\n',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.name:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+='                     tooltip-data-key="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.name:o)?o.hoverTip:o,e))+'">\n                        '+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.name:o)?o.title:o,e))+'\n                        <span sortArrow="headerDirectionalIndicator" class="sort-caret fa"></span>\n                </div>\n                <div id="comment-header"\n                     class="col-sm-3 noPadding ',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.acuityName:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+=' header"\n                     sortable="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.acuityName:o)?o.sortable:o,e))+'"\n                     sortType="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.acuityName:o)?o.sortType:o,e))+'"\n                     sortDirection="none"\n                     sortKey="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.acuityName:o)?o.key:o,e))+'"\n',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.acuityName:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+='                     tooltip-data-key="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.acuityName:o)?o.hoverTip:o,e))+'">\n                        '+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.acuityName:o)?o.title:o,e))+'\n                        <span sortArrow="headerDirectionalIndicator" class="sort-caret fa"></span>\n                </div>\n            </div>\n        </div>\n        <div class="col-sm-6 noPadding">\n            <div class="row noMargin">\n                <div id="count-header2"\n                     class="col-sm-3 ',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.age:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+=' header noPadding text-center"\n                     sortable="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.age:o)?o.sortable:o,e))+'"\n                     sortType="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.age:o)?o.sortType:o,e))+'"\n                     sortDirection="none"\n                     sortKey="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.age:o)?o.key:o,e))+'"\n                     ',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.age:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+='\n                     tooltip-data-key="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.age:o)?o.hoverTip:o,e))+'">\n                        '+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.age:o)?o.title:o,e))+'\n                        <span sortArrow="headerDirectionalIndicator"\n                              class="sort-caret fa">\n                        </span>\n                </div>\n                <div id="count-header1"\n                     class="col-sm-2 noPadding ',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.itemsInGraphCount:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+=' header"\n                     sortable="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.itemsInGraphCount:o)?o.sortable:o,e))+'"\n                     sortType="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.itemsInGraphCount:o)?o.sortType:o,e))+'"\n                     sortDirection="none"\n                     sortKey="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.itemsInGraphCount:o)?o.key:o,e))+'"\n',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.itemsInGraphCount:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+='                     tooltip-data-key="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.itemsInGraphCount:o)?o.hoverTip:o,e))+'">\n                        '+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.itemsInGraphCount:o)?o.title:o,e))+'\n                        <span sortArrow="headerDirectionalIndicator" class="sort-caret fa"></span>\n                </div>\n                <div id="graph-header"\n                     class="col-sm-7 noPadding ',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.graph:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+=' header"\n                     sortable="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.graph:o)?o.sortable:o,e))+'"\n                     sortType="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.graph:o)?o.sortType:o,e))+'"\n                     sortDirection="none"\n                     sortKey="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.graph:o)?o.key:o,e))+'"\n',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.graph:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+" >\n                        "+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.graph:o)?o.title:o,e))+'\n                        <span sortArrow="headerDirectionalIndicator" class="sort-caret fa"></span>\n                </div>\n            </div>\n        </div>\n	</div>\n	<div id="'+l((r=null!=(r=t.appletID||(null!=e?e.appletID:e))?r:s,typeof r===a?r.call(e,{name:"appletID",hash:{},data:i}):r))+'-event-gist-items" class="gistItemList"></div>\n</div>\n'},useData:!0});return t.registerPartial("main/components/views/appletViews/eventsGistView/templates/eventsGistLayout",n),n}),define("_assets/templates/helpers/formatNewLine",["handlebars"],function(e){function t(t){var n=t?t.split("//"):[];return n.length>1?new e.SafeString(n.join("</br>")):t}return e.registerHelper("formatNewLine",t),t}),define("hbs!main/components/views/appletViews/eventsGistView/templates/eventsGistChild",["hbs","handlebars","_assets/templates/helpers/formatNewLine"],function(e,t){var n=t.template({1:function(e,t,n,i){return" draggable='true' "},3:function(e,t,n,i){return" col-sm-8 "},5:function(e,t,n,i){return" col-sm-12"},7:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return"                <sup>\n                    <span id='comment_"+s((o=null!=(o=t.id||(null!=e?e.id:e))?o:a,typeof o===r?o.call(e,{name:"id",hash:{},data:i}):o))+'\' class="fa fa-comment"></span>\n                </sup>\n'},9:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return"                <sup>\n                    <span id='transparent_"+s((o=null!=(o=t.id||(null!=e?e.id:e))?o:a,typeof o===r?o.call(e,{name:"id",hash:{},data:i}):o))+'\' class="fa fa-transparent-comment"></span>\n                </sup>\n'},11:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return"            <div id='acuity_"+s((o=null!=(o=t.id||(null!=e?e.id:e))?o:a,typeof o===r?o.call(e,{name:"id",hash:{},data:i}):o))+'\'\n                 class="col-sm-4 eventsAcuity">\n                    '+s((o=null!=(o=t.acuityName||(null!=e?e.acuityName:e))?o:a,typeof o===r?o.call(e,{name:"acuityName",hash:{},data:i}):o))+"\n            </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d='<div class="toolbarContainer"/>\n<div id=\'event_'+l((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===a?r.call(e,{name:"id",hash:{},data:i}):r))+'\' class="row equalHeights noMargin gistItemInner" ';return o=t["if"].call(e,null!=e?e.userWorkspace:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+=">\n    <div class='col-sm-6 quickDraw selectable info-display noPadding'>\n        <div class=\"row equalHeights noMargin border-vertical\">\n            <div id='event_name_"+l((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===a?r.call(e,{name:"id",hash:{},data:i}):r))+"' class=\"",o=t["if"].call(e,null!=e?e.acuityName:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.program(5,i),data:i}),null!=o&&(d+=o),d+=' problem-name">\n                '+l((t.formatNewLine||e&&e.formatNewLine||s).call(e,null!=e?e.groupName:e,{name:"formatNewLine",hash:{},data:i}))+"\n",o=t["if"].call(e,null!=e?e.allGroupedComments:e,{name:"if",hash:{},fn:this.program(7,i),inverse:this.program(9,i),data:i}),null!=o&&(d+=o),d+="            </div>\n",o=t["if"].call(e,null!=e?e.acuityName:e,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+'        </div>\n    </div>\n    <div class="col-sm-6 quickDraw selectable noPadding" id=\'quickDraw_'+l((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===a?r.call(e,{name:"id",hash:{},data:i}):r))+'\' data-toggle="popover" title="'+l((r=null!=(r=t.groupName||(null!=e?e.groupName:e))?r:s,typeof r===a?r.call(e,{name:"groupName",hash:{},data:i}):r))+" "+l((r=null!=(r=t.acuityName||(null!=e?e.acuityName:e))?r:s,typeof r===a?r.call(e,{name:"acuityName",hash:{},data:i}):r))+'" data-content="'+l((r=null!=(r=t.tooltip||(null!=e?e.tooltip:e))?r:s,typeof r===a?r.call(e,{name:"tooltip",hash:{},data:i}):r))+'" tabindex="0">\n        <div class="row equalHeights noMargin">\n            <div id="quickLook_'+l((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===a?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="quickviewOverlay right-side"></div>\n            <div class="border-vertical col-sm-3">\n                <div id=\'time_since_'+l((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===a?r.call(e,{name:"id",hash:{},data:i}):r))+'\'\n                     class="eventsTimeSince counter2 text-center">'+l((r=null!=(r=t.timeSince||(null!=e?e.timeSince:e))?r:s,typeof r===a?r.call(e,{name:"timeSince",hash:{},data:i}):r))+"</div>\n            </div>\n            <div id='encounter_count_"+l((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===a?r.call(e,{name:"id",hash:{},data:i}):r))+'\'\n                 class="eventsCount col-sm-2 counter2 text-center">'+l((r=null!=(r=t.encounterCount||(null!=e?e.encounterCount:e))?r:s,typeof r===a?r.call(e,{name:"encounterCount",hash:{},data:i}):r))+'</div>\n            <div id="chartArea"\n                 class="col-sm-7 chart text-center noPadding">\n                    <div id=\'graph_'+l((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===a?r.call(e,{name:"id",hash:{},data:i}):r))+'\'\n                         class="gChartMin"></div>\n            </div>\n        </div>\n    </div>\n</div>\n'},useData:!0});return t.registerPartial("main/components/views/appletViews/eventsGistView/templates/eventsGistChild",n),n}),function(e){define("highcharts",["jquery"],function(){return function(){return function(){function e(e,t){var n;e||(e={});for(n in t)e[n]=t[n];return e}function t(){var e,t,n=arguments,i={},o=function(e,t){var n,i;"object"!=typeof e&&(e={});for(i in t)t.hasOwnProperty(i)&&(n=t[i],n&&"object"==typeof n&&"[object Array]"!==Object.prototype.toString.call(n)&&"renderTo"!==i&&"number"!=typeof n.nodeType?e[i]=o(e[i]||{},n):e[i]=t[i]);return e};for(n[0]===!0&&(i=n[1],n=Array.prototype.slice.call(n,2)),t=n.length,e=0;t>e;e++)i=o(i,n[e]);return i}function n(e,t){return parseInt(e,t||10)}function i(e){return"string"==typeof e}function o(e){return e&&"object"==typeof e}function r(e){return"[object Array]"===Object.prototype.toString.call(e)}function a(e){return"number"==typeof e}function s(e){return fe.log(e)/fe.LN10}function l(e){return fe.pow(10,e)}function d(e,t){for(var n=e.length;n--;)if(e[n]===t){e.splice(n,1);break}}function c(e){return e!==H&&null!==e}function u(e,t,n){var r,a;if(i(t))c(n)?e.setAttribute(t,n):e&&e.getAttribute&&(a=e.getAttribute(t));else if(c(t)&&o(t))for(r in t)e.setAttribute(r,t[r]);return a}function h(e){return r(e)?e:[e]}function p(){var e,t,n=arguments,i=n.length;for(e=0;i>e;e++)if(t=n[e],t!==H&&null!==t)return t}function g(t,n){ke&&!Ie&&n&&n.opacity!==H&&(n.filter="alpha(opacity="+100*n.opacity+")"),e(t.style,n)}function f(t,n,i,o,r){var a=pe.createElement(t);return n&&e(a,n),r&&g(a,{padding:0,border:Je,margin:0}),i&&g(a,i),o&&o.appendChild(a),a}function m(t,n){var i=function(){return H};return i.prototype=new t,e(i.prototype,n),i}function v(e,t,i,o){var r=he.numberFormat,a=G.lang,s=+e||0,l=-1===t?(s.toString().split(".")[1]||"").length:isNaN(t=Ae(t))?2:t,d=void 0===i?a.decimalPoint:i,c=void 0===o?a.thousandsSep:o,u=0>s?"-":"",h=String(n(s=Ae(s).toFixed(l))),p=h.length>3?h.length%3:0;return r!==v?r(e,t,i,o):u+(p?h.substr(0,p)+c:"")+h.substr(p).replace(/(\d{3})(?=\d)/g,"$1"+c)+(l?d+Ae(s-h).toFixed(l).slice(2):"")}function b(e,t){return new Array((t||2)+1-String(e).length).join(0)+e}function y(e,t,n){var i=e[t];e[t]=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(i),n.apply(this,e)}}function w(e,t){var n,i=/f$/,o=/\.([0-9])/,r=G.lang;return i.test(e)?(n=e.match(o),n=n?n[1]:-1,null!==t&&(t=v(t,n,r.decimalPoint,e.indexOf(",")>-1?r.thousandsSep:""))):t=j(e,t),t}function A(e,t){for(var n,i,o,r,a,s,l,d="{",c=!1,u=[];-1!==(l=e.indexOf(d));){if(n=e.slice(0,l),c){for(i=n.split(":"),o=i.shift().split("."),a=o.length,s=t,r=0;a>r;r++)s=s[o[r]];i.length&&(s=w(i.join(":"),s)),u.push(s)}else u.push(n);e=e.slice(l+1),c=!c,d=c?"}":"{"}return u.push(e),u.join("")}function N(e){return fe.pow(10,ve(fe.log(e)/fe.LN10))}function _(e,t,n,i){var o,r;for(n=p(n,1),o=e/n,t||(t=[1,2,2.5,5,10],i===!1&&(1===n?t=[1,2,5,10]:.1>=n&&(t=[1/n]))),r=0;r<t.length&&(e=t[r],!(o<=(t[r]+(t[r+1]||t[r]))/2));r++);return e*=n}function C(e,t){var n,i,o=e.length;for(i=0;o>i;i++)e[i].ss_i=i;for(e.sort(function(e,i){return n=t(e,i),0===n?e.ss_i-i.ss_i:n}),i=0;o>i;i++)delete e[i].ss_i}function x(e){for(var t=e.length,n=e[0];t--;)e[t]<n&&(n=e[t]);return n}function S(e){for(var t=e.length,n=e[0];t--;)e[t]>n&&(n=e[t]);return n}function T(e,t){var n;for(n in e)e[n]&&e[n]!==t&&e[n].destroy&&e[n].destroy(),delete e[n]}function k(e){Y||(Y=f(Ye)),e&&Y.appendChild(e),Y.innerHTML=""}function $(e){return parseFloat(e.toPrecision(14))}function D(e,t){q=p(e,t.animation)}function M(){var e=G.global.useUTC,t=e?"getUTC":"get",n=e?"setUTC":"set";Z=G.global.Date||window.Date,ee=6e4*(e&&G.global.timezoneOffset||0),Q=e?Z.UTC:function(e,t,n,i,o,r){return new Z(e,t,p(n,1),p(i,0),p(o,0),p(r,0)).getTime()},te=t+"Minutes",ne=t+"Hours",ie=t+"Day",oe=t+"Date",re=t+"Month",ae=t+"FullYear",se=n+"Minutes",le=n+"Hours",de=n+"Date",ce=n+"Month",ue=n+"FullYear"}function E(e){return G=t(!0,G,e),M(),G}function P(){return G}function I(){}function O(e,t,n,i){this.axis=e,this.pos=t,this.type=n||"",this.isNew=!0,n||i||this.addLabel()}function R(){this.init.apply(this,arguments)}function F(){this.init.apply(this,arguments)}function V(e,t,n,i,o){var r=e.chart.inverted;this.axis=e,this.isNegative=n,this.options=t,this.x=i,this.total=null,this.points={},this.stack=o,this.alignOptions={align:t.align||(r?n?"left":"right":"center"),verticalAlign:t.verticalAlign||(r?"middle":n?"bottom":"top"),y:p(t.y,r?4:n?14:-6),x:p(t.x,r?n?-6:6:0)},this.textAlign=t.textAlign||(r?n?"right":"left":"center")}function L(e){var t=e.options,n=t.navigator,i=n.enabled,o=t.scrollbar,r=o.enabled,a=i?n.height:0,s=r?o.height:0;this.handles=[],this.scrollbarButtons=[],this.elementsToDestroy=[],this.chart=e,this.setBaseSeries(),this.height=a,this.scrollbarHeight=s,this.scrollbarEnabled=r,this.navigatorEnabled=i,this.navigatorOptions=n,this.scrollbarOptions=o,this.outlineHeight=a+s,this.init()}function U(e){this.init(e)}var H,B,z,Y,G,j,q,W,K,X,J,Z,Q,ee,te,ne,ie,oe,re,ae,se,le,de,ce,ue,he,pe=document,ge=window,fe=Math,me=fe.round,ve=fe.floor,be=fe.ceil,ye=fe.max,we=fe.min,Ae=fe.abs,Ne=fe.cos,_e=fe.sin,Ce=fe.PI,xe=2*Ce/360,Se=navigator.userAgent,Te=ge.opera,ke=/msie/i.test(Se)&&!Te,$e=8===pe.documentMode,De=/AppleWebKit/.test(Se),Me=/Firefox/.test(Se),Ee=/(Mobile|Android|Windows Phone)/.test(Se),Pe="http://www.w3.org/2000/svg",Ie=!!pe.createElementNS&&!!pe.createElementNS(Pe,"svg").createSVGRect,Oe=Me&&parseInt(Se.split("Firefox/")[1],10)<4,Re=!Ie&&!ke&&!!pe.createElement("canvas").getContext,Fe={},Ve=0,Le=function(){return H},Ue=[],He=0,Be="Highstock",ze="2.0.4",Ye="div",Ge="absolute",je="relative",qe="hidden",We="highcharts-",Ke="visible",Xe="px",Je="none",Ze="M",Qe="L",et=/^[0-9]+$/,tt="",nt="hover",it="select",ot="stroke-width",rt={};ge.Highcharts?X(16,!0):he=ge.Highcharts={},j=function(t,n,i){if(!c(n)||isNaN(n))return"Invalid date";t=p(t,"%Y-%m-%d %H:%M:%S");var o,r=new Z(n-ee),a=r[ne](),s=r[ie](),l=r[oe](),d=r[re](),u=r[ae](),h=G.lang,g=h.weekdays,f=e({a:g[s].substr(0,3),A:g[s],d:b(l),e:l,b:h.shortMonths[d],B:h.months[d],m:b(d+1),y:u.toString().substr(2,2),Y:u,H:b(a),I:b(a%12||12),l:a%12||12,M:b(r[te]()),p:12>a?"AM":"PM",P:12>a?"am":"pm",S:b(r.getSeconds()),L:b(me(n%1e3),3)},he.dateFormats);for(o in f)for(;-1!==t.indexOf("%"+o);)t=t.replace("%"+o,"function"==typeof f[o]?f[o](n):f[o]);return i?t.substr(0,1).toUpperCase()+t.substr(1):t},X=function(e,t){var n="Highcharts error #"+e+": www.highcharts.com/errors/"+e;if(t)throw n;ge.console&&console.log(n)},K={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:26784e5,year:31556952e3},W={init:function(e,t,n){t=t||"";var i,o,r,a,s,l=e.shift,d=t.indexOf("C")>-1,c=d?7:3,u=t.split(" "),h=[].concat(n),p=function(e){for(r=e.length;r--;)e[r]===Ze&&e.splice(r+1,0,e[r+1],e[r+2],e[r+1],e[r+2])};if(d&&(p(u),p(h)),e.isArea&&(a=u.splice(u.length-6,6),s=h.splice(h.length-6,6)),l<=h.length/c&&u.length===h.length)for(;l--;)h=[].concat(h).splice(0,c).concat(h);if(e.shift=0,u.length)for(i=h.length;u.length<i;)o=[].concat(u).splice(u.length-c,c),d&&(o[c-6]=o[c-2],o[c-5]=o[c-1]),u=u.concat(o);return a&&(u=u.concat(a),h=h.concat(s)),[u,h]},step:function(e,t,n,i){var o,r=[],a=e.length;if(1===n)r=i;else if(a===t.length&&1>n)for(;a--;)o=parseFloat(e[a]),r[a]=isNaN(o)?e[a]:n*parseFloat(t[a]-o)+o;else r=t;return r}},function(t){ge.HighchartsAdapter=ge.HighchartsAdapter||t&&{init:function(e){var n=t.fx;t.extend(t.easing,{easeOutQuad:function(e,t,n,i,o){return-i*(t/=o)*(t-2)+n}}),t.each(["cur","_default","width","height","opacity"],function(e,i){var o,r=n.step;"cur"===i?r=n.prototype:"_default"===i&&t.Tween&&(r=t.Tween.propHooks[i],i="set"),o=r[i],o&&(r[i]=function(t){var n;return t=e?t:this,"align"!==t.prop?(n=t.elem,n.attr?n.attr(t.prop,"cur"===i?H:t.now):o.apply(this,arguments)):void 0})}),y(t.cssHooks.opacity,"get",function(e,t,n){return t.attr?t.opacity||0:e.call(this,t,n)}),this.addAnimSetter("d",function(t){
var n,i=t.elem;t.started||(n=e.init(i,i.d,i.toD),t.start=n[0],t.end=n[1],t.started=!0),i.attr("d",e.step(t.start,t.end,t.pos,i.toD))}),this.each=Array.prototype.forEach?function(e,t){return Array.prototype.forEach.call(e,t)}:function(e,t){var n,i=e.length;for(n=0;i>n;n++)if(t.call(e[n],e[n],n,e)===!1)return n},t.fn.highcharts=function(){var e,t,n,o="Chart",r=arguments;return this[0]&&(i(r[0])&&(o=r[0],r=Array.prototype.slice.call(r,1)),e=r[0],e!==H&&(e.chart=e.chart||{},e.chart.renderTo=this[0],n=new he[o](e,r[1]),t=this),e===H&&(t=Ue[u(this[0],"data-highcharts-chart")])),t}},addAnimSetter:function(e,n){t.Tween?t.Tween.propHooks[e]={set:n}:t.fx.step[e]=n},getScript:t.getScript,inArray:t.inArray,adapterRun:function(e,n){return t(e)[n]()},grep:t.grep,map:function(e,t){for(var n=[],i=0,o=e.length;o>i;i++)n[i]=t.call(e[i],e[i],i,e);return n},offset:function(e){return t(e).offset()},addEvent:function(e,n,i){t(e).bind(n,i)},removeEvent:function(e,n,i){var o=pe.removeEventListener?"removeEventListener":"detachEvent";pe[o]&&e&&!e[o]&&(e[o]=function(){}),t(e).unbind(n,i)},fireEvent:function(n,i,o,r){var a,s=t.Event(i),l="detached"+i;!ke&&o&&(delete o.layerX,delete o.layerY,delete o.returnValue),e(s,o),n[i]&&(n[l]=n[i],n[i]=null),t.each(["preventDefault","stopPropagation"],function(e,t){var n=s[t];s[t]=function(){try{n.call(s)}catch(e){"preventDefault"===t&&(a=!0)}}}),t(n).trigger(s),n[l]&&(n[i]=n[l],n[l]=null),!r||s.isDefaultPrevented()||a||r(s)},washMouseEvent:function(e){var t=e.originalEvent||e;return t.pageX===H&&(t.pageX=e.pageX,t.pageY=e.pageY),t},animate:function(e,n,i){var o=t(e);e.style||(e.style={}),n.d&&(e.toD=n.d,n.d=1),o.stop(),n.opacity!==H&&e.attr&&(n.opacity+="px"),e.hasAnim=1,o.animate(n,i)},stop:function(e){e.hasAnim&&t(e).stop()}}}(ge.jQuery);var at=ge.HighchartsAdapter,st=at||{};at&&at.init.call(at,W);var lt=st.adapterRun,dt=st.getScript,ct=st.inArray,ut=st.each,ht=st.grep,pt=st.offset,gt=st.map,ft=st.addEvent,mt=st.removeEvent,vt=st.fireEvent,bt=st.washMouseEvent,yt=st.animate,wt=st.stop,At={enabled:!0,x:0,y:15,style:{color:"#606060",cursor:"default",fontSize:"11px"}};G={colors:["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#8085e8","#8d4653","#91e8e1"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/stock/2.0.4/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/stock/2.0.4/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"}},subtitle:{text:"",align:"center",style:{color:"#555555"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0,lineWidthPlus:1,radiusPlus:2},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:t(At,{align:"center",enabled:!1,formatter:function(){return null===this.y?"":v(this.y,-1)},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,states:{hover:{lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3}},labels:{style:{position:Ge,color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:Ge,width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:je,top:"45%"},style:{position:Ge,backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:Ie,backgroundColor:"rgba(249, 249, 249, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">●</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:Ee?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var Nt=G.plotOptions,_t=Nt.line;M();var Ct=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,xt=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,St=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,Tt=function(e){function i(e){e&&e.stops?d=gt(e.stops,function(e){return Tt(e[1])}):(l=Ct.exec(e),l?c=[n(l[1]),n(l[2]),n(l[3]),parseFloat(l[4],10)]:(l=xt.exec(e),l?c=[n(l[1],16),n(l[2],16),n(l[3],16),1]:(l=St.exec(e),l&&(c=[n(l[1]),n(l[2]),n(l[3]),1]))))}function o(n){var i;return d?(i=t(e),i.stops=[].concat(i.stops),ut(d,function(e,t){i.stops[t]=[i.stops[t][0],e.get(n)]})):i=c&&!isNaN(c[0])?"rgb"===n?"rgb("+c[0]+","+c[1]+","+c[2]+")":"a"===n?c[3]:"rgba("+c.join(",")+")":e,i}function r(e){if(d)ut(d,function(t){t.brighten(e)});else if(a(e)&&0!==e){var t;for(t=0;3>t;t++)c[t]+=n(255*e),c[t]<0&&(c[t]=0),c[t]>255&&(c[t]=255)}return this}function s(e){return c[3]=e,this}var l,d,c=[];return i(e),{get:o,brighten:r,rgba:c,setOpacity:s}};I.prototype={opacity:1,textProps:["fontSize","fontWeight","fontFamily","color","lineHeight","width","textDecoration","textShadow","HcTextStroke"],init:function(e,t){var n=this;n.element="span"===t?f(t):pe.createElementNS(Pe,t),n.renderer=e},animate:function(e,n,i){var o=p(n,q,!0);return wt(this),o?(o=t(o,{}),i&&(o.complete=i),yt(this,e,o)):(this.attr(e),i&&i()),this},colorGradient:function(e,n,i){var o,a,s,l,d,u,h,p,g,f,m,v=this.renderer,b=[];if(e.linearGradient?a="linearGradient":e.radialGradient&&(a="radialGradient"),a){s=e[a],l=v.gradients,u=e.stops,g=i.radialReference,r(s)&&(e[a]=s={x1:s[0],y1:s[1],x2:s[2],y2:s[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===a&&g&&!c(s.gradientUnits)&&(s=t(s,{cx:g[0]-g[2]/2+s.cx*g[2],cy:g[1]-g[2]/2+s.cy*g[2],r:s.r*g[2],gradientUnits:"userSpaceOnUse"}));for(f in s)"id"!==f&&b.push(f,s[f]);for(f in u)b.push(u[f]);b=b.join(","),l[b]?m=l[b].attr("id"):(s.id=m=We+Ve++,l[b]=d=v.createElement(a).attr(s).add(v.defs),d.stops=[],ut(u,function(e){var t;0===e[1].indexOf("rgba")?(o=Tt(e[1]),h=o.get("rgb"),p=o.get("a")):(h=e[1],p=1),t=v.createElement("stop").attr({offset:e[0],"stop-color":h,"stop-opacity":p}).add(d),d.stops.push(t)})),i.setAttribute(n,"url("+v.url+"#"+m+")")}},attr:function(e,t){var n,i,o,r,a=this.element,s=this;if("string"==typeof e&&t!==H&&(n=e,e={},e[n]=t),"string"==typeof e)s=(this[e+"Getter"]||this._defaultGetter).call(this,e,a);else{for(n in e)i=e[n],r=!1,this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(n)&&(o||(this.symbolAttr(e),o=!0),r=!0),!this.rotation||"x"!==n&&"y"!==n||(this.doTransform=!0),r||(this[n+"Setter"]||this._defaultSetter).call(this,i,n,a),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(n)&&this.updateShadows(n,i);this.doTransform&&(this.updateTransform(),this.doTransform=!1)}return s},updateShadows:function(e,t){for(var n=this.shadows,i=n.length;i--;)n[i].setAttribute(e,"height"===e?ye(t-(n[i].cutHeight||0),0):"d"===e?this.d:t)},addClass:function(e){var t=this.element,n=u(t,"class")||"";return-1===n.indexOf(e)&&u(t,"class",n+" "+e),this},symbolAttr:function(e){var t=this;ut(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(n){t[n]=p(e[n],t[n])}),t.attr({d:t.renderer.symbols[t.symbolName](t.x,t.y,t.width,t.height,t)})},clip:function(e){return this.attr("clip-path",e?"url("+this.renderer.url+"#"+e.id+")":Je)},crisp:function(e){var t,n,i=this,o={},r=e.strokeWidth||i.strokeWidth||0;n=me(r)%2/2,e.x=ve(e.x||i.x||0)+n,e.y=ve(e.y||i.y||0)+n,e.width=ve((e.width||i.width||0)-2*n),e.height=ve((e.height||i.height||0)-2*n),e.strokeWidth=r;for(t in e)i[t]!==e[t]&&(i[t]=o[t]=e[t]);return o},css:function(t){var i,o,r,a=this,s=a.styles,l={},d=a.element,c="",h=!s;if(t&&t.color&&(t.fill=t.color),s)for(o in t)t[o]!==s[o]&&(l[o]=t[o],h=!0);if(h){if(i=a.textWidth=t&&t.width&&"text"===d.nodeName.toLowerCase()&&n(t.width),s&&(t=e(s,l)),a.styles=t,i&&(Re||!Ie&&a.renderer.forExport)&&delete t.width,ke&&!Ie)g(a.element,t);else{r=function(e,t){return"-"+t.toLowerCase()};for(o in t)c+=o.replace(/([A-Z])/g,r)+":"+t[o]+";";u(d,"style",c)}i&&a.added&&a.renderer.buildText(a)}return a},on:function(e,t){var n=this,i=n.element;return z&&"click"===e?(i.ontouchstart=function(e){n.touchEventFired=Z.now(),e.preventDefault(),t.call(i,e)},i.onclick=function(e){(-1===Se.indexOf("Android")||Z.now()-(n.touchEventFired||0)>1100)&&t.call(i,e)}):i["on"+e]=t,this},setRadialReference:function(e){return this.element.radialReference=e,this},translate:function(e,t){return this.attr({translateX:e,translateY:t})},invert:function(){var e=this;return e.inverted=!0,e.updateTransform(),e},updateTransform:function(){var e,t=this,n=t.translateX||0,i=t.translateY||0,o=t.scaleX,r=t.scaleY,a=t.inverted,s=t.rotation,l=t.element;a&&(n+=t.attr("width"),i+=t.attr("height")),e=["translate("+n+","+i+")"],a?e.push("rotate(90) scale(-1,1)"):s&&e.push("rotate("+s+" "+(l.getAttribute("x")||0)+" "+(l.getAttribute("y")||0)+")"),(c(o)||c(r))&&e.push("scale("+p(o,1)+" "+p(r,1)+")"),e.length&&l.setAttribute("transform",e.join(" "))},toFront:function(){var e=this.element;return e.parentNode.appendChild(e),this},align:function(e,t,n){var o,r,a,s,l,c={},u=this.renderer,h=u.alignedObjects;return e?(this.alignOptions=e,this.alignByTranslate=t,(!n||i(n))&&(this.alignTo=l=n||"renderer",d(h,this),h.push(this),n=null)):(e=this.alignOptions,t=this.alignByTranslate,l=this.alignTo),n=p(n,u[l],u),o=e.align,r=e.verticalAlign,a=(n.x||0)+(e.x||0),s=(n.y||0)+(e.y||0),("right"===o||"center"===o)&&(a+=(n.width-(e.width||0))/{right:1,center:2}[o]),c[t?"translateX":"x"]=me(a),("bottom"===r||"middle"===r)&&(s+=(n.height-(e.height||0))/({bottom:1,middle:2}[r]||1)),c[t?"translateY":"y"]=me(s),this[this.placed?"animate":"attr"](c),this.placed=!0,this.alignAttr=c,this},getBBox:function(){var t,n,i,o=this,r=o.bBox,a=o.renderer,s=o.rotation,l=o.element,d=o.styles,c=s*xe,u=o.textStr;if((""===u||et.test(u))&&(i="num."+u.toString().length+(d?"|"+d.fontSize+"|"+d.fontFamily:"")),i&&(r=a.cache[i]),!r){if(l.namespaceURI===Pe||a.forExport){try{r=l.getBBox?e({},l.getBBox()):{width:l.offsetWidth,height:l.offsetHeight}}catch(h){}(!r||r.width<0)&&(r={width:0,height:0})}else r=o.htmlGetBBox();a.isSVG&&(t=r.width,n=r.height,ke&&d&&"11px"===d.fontSize&&"16.9"===n.toPrecision(3)&&(r.height=n=14),s&&(r.width=Ae(n*_e(c))+Ae(t*Ne(c)),r.height=Ae(n*Ne(c))+Ae(t*_e(c)))),o.bBox=r,i&&(a.cache[i]=r)}return r},show:function(e){return e&&this.element.namespaceURI===Pe?this.element.removeAttribute("visibility"):this.attr({visibility:e?"inherit":Ke}),this},hide:function(){return this.attr({visibility:qe})},fadeOut:function(e){var t=this;t.animate({opacity:0},{duration:e||150,complete:function(){t.attr({y:-9999})}})},add:function(e){var t,i,o,r,a,s=this.renderer,l=e||s,d=l.element||s.box,h=this.element,p=this.zIndex;if(e&&(this.parentGroup=e),this.parentInverted=e&&e.inverted,void 0!==this.textStr&&s.buildText(this),p&&(l.handleZ=!0,p=n(p)),l.handleZ)for(t=d.childNodes,r=0;r<t.length;r++)if(i=t[r],o=u(i,"zIndex"),i!==h&&(n(o)>p||!c(p)&&c(o))){d.insertBefore(h,i),a=!0;break}return a||d.appendChild(h),this.added=!0,this.onAdd&&this.onAdd(),this},safeRemoveChild:function(e){var t=e.parentNode;t&&t.removeChild(e)},destroy:function(){var e,t,n,i=this,o=i.element||{},r=i.shadows,a=i.renderer.isSVG&&"SPAN"===o.nodeName&&i.parentGroup;if(o.onclick=o.onmouseout=o.onmouseover=o.onmousemove=o.point=null,wt(i),i.clipPath&&(i.clipPath=i.clipPath.destroy()),i.stops){for(n=0;n<i.stops.length;n++)i.stops[n]=i.stops[n].destroy();i.stops=null}for(i.safeRemoveChild(o),r&&ut(r,function(e){i.safeRemoveChild(e)});a&&a.div&&0===a.div.childNodes.length;)e=a.parentGroup,i.safeRemoveChild(a.div),delete a.div,a=e;i.alignTo&&d(i.renderer.alignedObjects,i);for(t in i)delete i[t];return null},shadow:function(e,t,n){var i,o,r,a,s,l,d=[],c=this.element;if(e){for(a=p(e.width,3),s=(e.opacity||.15)/a,l=this.parentInverted?"(-1,-1)":"("+p(e.offsetX,1)+", "+p(e.offsetY,1)+")",i=1;a>=i;i++)o=c.cloneNode(0),r=2*a+1-2*i,u(o,{isShadow:"true",stroke:e.color||"black","stroke-opacity":s*i,"stroke-width":r,transform:"translate"+l,fill:Je}),n&&(u(o,"height",ye(u(o,"height")-r,0)),o.cutHeight=r),t?t.element.appendChild(o):c.parentNode.insertBefore(o,c),d.push(o);this.shadows=d}return this},xGetter:function(e){return"circle"===this.element.nodeName&&(e={x:"cx",y:"cy"}[e]||e),this._defaultGetter(e)},_defaultGetter:function(e){var t=p(this[e],this.element?this.element.getAttribute(e):null,0);return/^[\-0-9\.]+$/.test(t)&&(t=parseFloat(t)),t},dSetter:function(e,t,n){e&&e.join&&(e=e.join(" ")),/(NaN| {2}|^$)/.test(e)&&(e="M 0 0"),n.setAttribute(t,e),this[t]=e},dashstyleSetter:function(e){var t;if(e=e&&e.toLowerCase()){for(e=e.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),t=e.length;t--;)e[t]=n(e[t])*this["stroke-width"];e=e.join(",").replace("NaN","none"),this.element.setAttribute("stroke-dasharray",e)}},alignSetter:function(e){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[e])},opacitySetter:function(e,t,n){this[t]=e,n.setAttribute(t,e)},titleSetter:function(e){var t=this.element.getElementsByTagName("title")[0];t||(t=pe.createElementNS(Pe,"title"),this.element.appendChild(t)),t.textContent=p(e,"").replace(/<[^>]*>/g,"")},textSetter:function(e){e!==this.textStr&&(delete this.bBox,this.textStr=e,this.added&&this.renderer.buildText(this))},fillSetter:function(e,t,n){"string"==typeof e?n.setAttribute(t,e):e&&this.colorGradient(e,t,n)},zIndexSetter:function(e,t,n){n.setAttribute(t,e),this[t]=e},_defaultSetter:function(e,t,n){n.setAttribute(t,e)}},I.prototype.yGetter=I.prototype.xGetter,I.prototype.translateXSetter=I.prototype.translateYSetter=I.prototype.rotationSetter=I.prototype.verticalAlignSetter=I.prototype.scaleXSetter=I.prototype.scaleYSetter=function(e,t){this[t]=e,this.doTransform=!0},I.prototype["stroke-widthSetter"]=I.prototype.strokeSetter=function(e,t,n){this[t]=e,this.stroke&&this["stroke-width"]?(this.strokeWidth=this["stroke-width"],I.prototype.fillSetter.call(this,this.stroke,"stroke",n),n.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===t&&0===e&&this.hasStroke&&(n.removeAttribute("stroke"),this.hasStroke=!1)};var kt=function(){this.init.apply(this,arguments)};kt.prototype={Element:I,init:function(e,t,n,i,o){var r,a,s,l=this,d=location;r=l.createElement("svg").attr({version:"1.1"}).css(this.getStyle(i)),a=r.element,e.appendChild(a),-1===e.innerHTML.indexOf("xmlns")&&u(a,"xmlns",Pe),l.isSVG=!0,l.box=a,l.boxWrapper=r,l.alignedObjects=[],l.url=(Me||De)&&pe.getElementsByTagName("base").length?d.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",s=this.createElement("desc").add(),s.element.appendChild(pe.createTextNode("Created with "+Be+" "+ze)),l.defs=this.createElement("defs").add(),l.forExport=o,l.gradients={},l.cache={},l.setSize(t,n,!1);var c,h;Me&&e.getBoundingClientRect&&(l.subPixelFix=c=function(){g(e,{left:0,top:0}),h=e.getBoundingClientRect(),g(e,{left:be(h.left)-h.left+Xe,top:be(h.top)-h.top+Xe})},c(),ft(ge,"resize",c))},getStyle:function(t){return this.style=e({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},t)},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var e=this,t=e.defs;return e.box=null,e.boxWrapper=e.boxWrapper.destroy(),T(e.gradients||{}),e.gradients=null,t&&(e.defs=t.destroy()),e.subPixelFix&&mt(ge,"resize",e.subPixelFix),e.alignedObjects=null,null},createElement:function(e){var t=new this.Element;return t.init(this,e),t},draw:function(){},buildText:function(e){for(var t,i,o,r=e.element,a=this,s=a.forExport,l=p(e.textStr,"").toString(),d=-1!==l.indexOf("<"),c=r.childNodes,h=u(r,"x"),f=e.styles,m=e.textWidth,v=f&&f.lineHeight,b=f&&f.HcTextStroke,y=c.length,w=function(e){return v?n(v):a.fontMetrics(/(px|em)$/.test(e&&e.style.fontSize)?e.style.fontSize:f&&f.fontSize||a.style.fontSize||12,e).h};y--;)r.removeChild(c[y]);return d||b||-1!==l.indexOf(" ")?(i=/<.*style="([^"]+)".*>/,o=/<.*href="(http[^"]+)".*>/,m&&!e.added&&this.box.appendChild(r),t=d?l.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[l],""===t[t.length-1]&&t.pop(),ut(t,function(t,n){var l,d=0;t=t.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),l=t.split("|||"),ut(l,function(t){if(""!==t||1===l.length){var c,p={},v=pe.createElementNS(Pe,"tspan");if(i.test(t)&&(c=t.match(i)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),u(v,"style",c)),o.test(t)&&!s&&(u(v,"onclick",'location.href="'+t.match(o)[1]+'"'),g(v,{cursor:"pointer"})),t=(t.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">")," "!==t){if(v.appendChild(pe.createTextNode(t)),d?p.dx=0:n&&null!==h&&(p.x=h),u(v,p),r.appendChild(v),!d&&n&&(!Ie&&s&&g(v,{display:"block"}),u(v,"dy",w(v))),m)for(var b,y,A,N=t.replace(/([^\^])-/g,"$1- ").split(" "),_=l.length>1||N.length>1&&"nowrap"!==f.whiteSpace,C=f.HcHeight,x=[],S=w(v),T=1;_&&(N.length||x.length);)delete e.bBox,A=e.getBBox(),y=A.width,!Ie&&a.forExport&&(y=a.measureSpanWidth(v.firstChild.data,e.styles)),b=y>m,b&&1!==N.length?(v.removeChild(v.firstChild),x.unshift(N.pop())):(N=x,x=[],N.length&&(T++,C&&T*S>C?(N=["..."],e.attr("title",e.textStr)):(v=pe.createElementNS(Pe,"tspan"),u(v,{dy:S,x:h}),c&&u(v,"style",c),r.appendChild(v))),y>m&&(m=y)),N.length&&v.appendChild(pe.createTextNode(N.join(" ").replace(/- /g,"-")));d++}}})}),void 0):void r.appendChild(pe.createTextNode(l))},button:function(n,i,o,r,a,s,l,d,c){var u,h,p,g,f,m,v=this.label(n,i,o,c,null,null,null,null,"button"),b=0,y={x1:0,y1:0,x2:0,y2:1};return a=t({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:y,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},a),p=a.style,delete a.style,s=t(a,{stroke:"#68A",fill:{linearGradient:y,stops:[[0,"#FFF"],[1,"#ACF"]]}},s),g=s.style,delete s.style,l=t(a,{stroke:"#68A",fill:{linearGradient:y,stops:[[0,"#9BD"],[1,"#CDF"]]}},l),f=l.style,delete l.style,d=t(a,{style:{color:"#CCC"}},d),m=d.style,delete d.style,ft(v.element,ke?"mouseover":"mouseenter",function(){3!==b&&v.attr(s).css(g)}),ft(v.element,ke?"mouseout":"mouseleave",function(){3!==b&&(u=[a,s,l][b],h=[p,g,f][b],v.attr(u).css(h))}),v.setState=function(e){v.state=b=e,e?2===e?v.attr(l).css(f):3===e&&v.attr(d).css(m):v.attr(a).css(p)},v.on("click",function(){3!==b&&r.call(v)}).attr(a).css(e({cursor:"default"},p))},crispLine:function(e,t){return e[1]===e[4]&&(e[1]=e[4]=me(e[1])-t%2/2),e[2]===e[5]&&(e[2]=e[5]=me(e[2])+t%2/2),e},path:function(t){var n={fill:Je};return r(t)?n.d=t:o(t)&&e(n,t),this.createElement("path").attr(n)},circle:function(e,t,n){var i=o(e)?e:{x:e,y:t,r:n},r=this.createElement("circle");return r.xSetter=function(e){this.element.setAttribute("cx",e)},r.ySetter=function(e){this.element.setAttribute("cy",e)},r.attr(i)},arc:function(e,t,n,i,r,a){var s;return o(e)&&(t=e.y,n=e.r,i=e.innerR,r=e.start,a=e.end,e=e.x),s=this.symbol("arc",e||0,t||0,n||0,n||0,{innerR:i||0,start:r||0,end:a||0}),s.r=n,s},rect:function(e,t,n,i,r,a){r=o(e)?e.r:r;var s=this.createElement("rect"),l=o(e)?e:e===H?{}:{x:e,y:t,width:ye(n,0),height:ye(i,0)};return a!==H&&(l.strokeWidth=a,l=s.crisp(l)),r&&(l.r=r),s.rSetter=function(e){u(this.element,{rx:e,ry:e})},s.attr(l)},setSize:function(e,t,n){var i=this,o=i.alignedObjects,r=o.length;for(i.width=e,i.height=t,i.boxWrapper[p(n,!0)?"animate":"attr"]({width:e,height:t});r--;)o[r].align()},g:function(e){var t=this.createElement("g");return c(e)?t.attr({"class":We+e}):t},image:function(t,n,i,o,r){var a,s={preserveAspectRatio:Je};return arguments.length>1&&e(s,{x:n,y:i,width:o,height:r}),a=this.createElement("image").attr(s),a.element.setAttributeNS?a.element.setAttributeNS("http://www.w3.org/1999/xlink","href",t):a.element.setAttribute("hc-svg-href",t),a},symbol:function(t,n,i,o,r,a){var s,l,d,c,u,h=this.symbols[t],p=h&&h(me(n),me(i),o,r,a),g=/^url\((.*?)\)$/;return p?(s=this.path(p),e(s,{symbolName:t,x:n,y:i,width:o,height:r}),a&&e(s,a)):g.test(t)&&(u=function(e,t){e.element&&(e.attr({width:t[0],height:t[1]}),e.alignByTranslate||e.translate(me((o-t[0])/2),me((r-t[1])/2)))},d=t.match(g)[1],c=Fe[d]||a&&a.width&&a.height&&[a.width,a.height],s=this.image(d).attr({x:n,y:i}),s.isImg=!0,c?u(s,c):(s.attr({width:0,height:0}),l=f("img",{onload:function(){u(s,Fe[d]=[this.width,this.height])},src:d}))),s},symbols:{circle:function(e,t,n,i){var o=.166*n;return[Ze,e+n/2,t,"C",e+n+o,t,e+n+o,t+i,e+n/2,t+i,"C",e-o,t+i,e-o,t,e+n/2,t,"Z"]},square:function(e,t,n,i){return[Ze,e,t,Qe,e+n,t,e+n,t+i,e,t+i,"Z"]},triangle:function(e,t,n,i){return[Ze,e+n/2,t,Qe,e+n,t+i,e,t+i,"Z"]},"triangle-down":function(e,t,n,i){return[Ze,e,t,Qe,e+n,t,e+n/2,t+i,"Z"]},diamond:function(e,t,n,i){return[Ze,e+n/2,t,Qe,e+n,t+i/2,e+n/2,t+i,e,t+i/2,"Z"]},arc:function(e,t,n,i,o){var r=o.start,a=o.r||n||i,s=o.end-.001,l=o.innerR,d=o.open,c=Ne(r),u=_e(r),h=Ne(s),p=_e(s),g=o.end-r<Ce?0:1;return[Ze,e+a*c,t+a*u,"A",a,a,0,g,1,e+a*h,t+a*p,d?Ze:Qe,e+l*h,t+l*p,"A",l,l,0,g,0,e+l*c,t+l*u,d?"":"Z"]},callout:function(e,t,n,i,o){var r,a=6,s=6,l=we(o&&o.r||0,n,i),d=l+s,c=o&&o.anchorX,u=o&&o.anchorY,h=me(o.strokeWidth||0)%2/2;return e+=h,t+=h,r=["M",e+l,t,"L",e+n-l,t,"C",e+n,t,e+n,t,e+n,t+l,"L",e+n,t+i-l,"C",e+n,t+i,e+n,t+i,e+n-l,t+i,"L",e+l,t+i,"C",e,t+i,e,t+i,e,t+i-l,"L",e,t+l,"C",e,t,e,t,e+l,t],c&&c>n&&u>t+d&&t+i-d>u?r.splice(13,3,"L",e+n,u-s,e+n+a,u,e+n,u+s,e+n,t+i-l):c&&0>c&&u>t+d&&t+i-d>u?r.splice(33,3,"L",e,u+s,e-a,u,e,u-s,e,t+l):u&&u>i&&c>e+d&&e+n-d>c?r.splice(23,3,"L",c+s,t+i,c,t+i+a,c-s,t+i,e+l,t+i):u&&0>u&&c>e+d&&e+n-d>c&&r.splice(3,3,"L",c-s,t,c,t-a,c+s,t,n-l,t),r}},clipRect:function(e,t,n,i){var o,r=We+Ve++,a=this.createElement("clipPath").attr({id:r}).add(this.defs);return o=this.rect(e,t,n,i,0).add(a),o.id=r,o.clipPath=a,o},text:function(e,t,n,i){var o,r=this,a=Re||!Ie&&r.forExport,s={};return i&&!r.forExport?r.html(e,t,n):(s.x=Math.round(t||0),n&&(s.y=Math.round(n)),(e||0===e)&&(s.text=e),o=r.createElement("text").attr(s),a&&o.css({position:Ge}),i||(o.xSetter=function(e,t,n){var i,o,r=n.getElementsByTagName("tspan"),a=n.getAttribute(t);for(o=0;o<r.length;o++)i=r[o],i.getAttribute(t)===a&&i.setAttribute(t,e);n.setAttribute(t,e)}),o)},fontMetrics:function(e,t){e=e||this.style.fontSize,t&&ge.getComputedStyle&&(t=t.element||t,e=ge.getComputedStyle(t,"").fontSize),e=/px/.test(e)?n(e):/em/.test(e)?12*parseFloat(e):12;var i=24>e?e+4:me(1.2*e),o=me(.8*i);return{h:i,b:o,f:e}},label:function(n,i,o,r,a,s,l,d,u){function h(){var t,n,i=x.element.style;m=(void 0===v||void 0===b||C.styles.textAlign)&&x.textStr&&x.getBBox(),C.width=(v||m.width||0)+2*T+k,C.height=(b||m.height||0)+2*T,A=T+_.fontMetrics(i&&i.fontSize,x).b,N&&(f||(t=me(-S*T),n=d?-A:0,C.box=f=r?_.symbol(r,t,n,C.width,C.height,D):_.rect(t,n,C.width,C.height,0,D[ot]),f.attr("fill",Je).add(C)),f.isImg||f.attr(e({width:me(C.width),height:me(C.height)},D)),D=null)}function p(){var e,t=C.styles,n=t&&t.textAlign,i=k+T*(1-S);e=d?0:A,c(v)&&m&&("center"===n||"right"===n)&&(i+={center:.5,right:1}[n]*(v-m.width)),(i!==x.x||e!==x.y)&&(x.attr("x",i),e!==H&&x.attr("y",e)),x.x=i,x.y=e}function g(e,t){f?f.attr(e,t):D[e]=t}var f,m,v,b,y,w,A,N,_=this,C=_.g(u),x=_.text("",0,0,l).attr({zIndex:1}),S=0,T=3,k=0,$=0,D={};C.onAdd=function(){x.add(C),C.attr({text:n||0===n?n:"",x:i,y:o}),f&&c(a)&&C.attr({anchorX:a,anchorY:s})},C.widthSetter=function(e){v=e},C.heightSetter=function(e){b=e},C.paddingSetter=function(e){c(e)&&e!==T&&(T=e,p())},C.paddingLeftSetter=function(e){c(e)&&e!==k&&(k=e,p())},C.alignSetter=function(e){S={left:0,center:.5,right:1}[e]},C.textSetter=function(e){e!==H&&x.textSetter(e),h(),p()},C["stroke-widthSetter"]=function(e,t){e&&(N=!0),$=e%2/2,g(t,e)},C.strokeSetter=C.fillSetter=C.rSetter=function(e,t){"fill"===t&&e&&(N=!0),g(t,e)},C.anchorXSetter=function(e,t){a=e,g(t,e+$-y)},C.anchorYSetter=function(e,t){s=e,g(t,e-w)},C.xSetter=function(e){C.x=e,S&&(e-=S*((v||m.width)+T)),y=me(e),C.attr("translateX",y)},C.ySetter=function(e){w=C.y=me(e),C.attr("translateY",w)};var M=C.css;return e(C,{css:function(e){if(e){var n={};e=t(e),ut(C.textProps,function(t){e[t]!==H&&(n[t]=e[t],delete e[t])}),x.css(n)}return M.call(C,e)},getBBox:function(){return{width:m.width+2*T,height:m.height+2*T,x:m.x-T,y:m.y-T}},shadow:function(e){return f&&f.shadow(e),C},destroy:function(){mt(C.element,"mouseenter"),mt(C.element,"mouseleave"),x&&(x=x.destroy()),f&&(f=f.destroy()),I.prototype.destroy.call(C),C=_=h=p=g=null}})}},B=kt,e(I.prototype,{htmlCss:function(t){var n=this,i=n.element,o=t&&"SPAN"===i.tagName&&t.width;return o&&(delete t.width,n.textWidth=o,n.updateTransform()),n.styles=e(n.styles,t),g(n.element,t),n},htmlGetBBox:function(){var e=this,t=e.element,n=e.bBox;return n||("text"===t.nodeName&&(t.style.position=Ge),n=e.bBox={x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}),n},htmlUpdateTransform:function(){if(!this.added)return void(this.alignOnAdd=!0);var e=this,t=e.renderer,i=e.element,o=e.translateX||0,r=e.translateY||0,a=e.x||0,s=e.y||0,l=e.textAlign||"left",d={left:0,center:.5,right:1}[l],u=e.shadows;if(g(i,{marginLeft:o,marginTop:r}),u&&ut(u,function(e){g(e,{marginLeft:o+1,marginTop:r+1})}),e.inverted&&ut(i.childNodes,function(e){t.invertChild(e,i)}),"SPAN"===i.tagName){var h,f,m=e.rotation,v=n(e.textWidth),b=[m,l,i.innerHTML,e.textWidth].join(",");b!==e.cTT&&(f=t.fontMetrics(i.style.fontSize).b,c(m)&&e.setSpanRotation(m,d,f),h=p(e.elemWidth,i.offsetWidth),h>v&&/[ \-]/.test(i.textContent||i.innerText)&&(g(i,{width:v+Xe,display:"block",whiteSpace:"normal"}),h=v),e.getSpanCorrection(h,f,d,m,l)),g(i,{left:a+(e.xCorr||0)+Xe,top:s+(e.yCorr||0)+Xe}),De&&(f=i.offsetHeight),e.cTT=b}},setSpanRotation:function(e,t,n){var i={},o=ke?"-ms-transform":De?"-webkit-transform":Me?"MozTransform":Te?"-o-transform":"";i[o]=i.transform="rotate("+e+"deg)",i[o+(Me?"Origin":"-origin")]=i.transformOrigin=100*t+"% "+n+"px",g(this.element,i)},getSpanCorrection:function(e,t,n){this.xCorr=-e*n,this.yCorr=-t}}),e(kt.prototype,{html:function(t,n,i){var o=this.createElement("span"),r=o.element,a=o.renderer;return o.textSetter=function(e){e!==r.innerHTML&&delete this.bBox,r.innerHTML=this.textStr=e},o.xSetter=o.ySetter=o.alignSetter=o.rotationSetter=function(e,t){"align"===t&&(t="textAlign"),o[t]=e,o.htmlUpdateTransform()},o.attr({text:t,x:me(n),y:me(i)}).css({position:Ge,whiteSpace:"nowrap",fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),o.css=o.htmlCss,a.isSVG&&(o.add=function(t){var n,i,s=a.box.parentNode,l=[];if(this.parentGroup=t,t){if(n=t.div,!n){for(i=t;i;)l.push(i),i=i.parentGroup;ut(l.reverse(),function(t){var i;n=t.div=t.div||f(Ye,{className:u(t.element,"class")},{position:Ge,left:(t.translateX||0)+Xe,top:(t.translateY||0)+Xe},n||s),i=n.style,e(t,{translateXSetter:function(e,n){i.left=e+Xe,t[n]=e,t.doTransform=!0},translateYSetter:function(e,n){i.top=e+Xe,t[n]=e,t.doTransform=!0},visibilitySetter:function(e,t){i[t]=e}})})}}else n=s;return n.appendChild(r),o.added=!0,o.alignOnAdd&&o.htmlUpdateTransform(),o}),o}});var $t,Dt;if(!Ie&&!Re){Dt={init:function(e,t){var n=this,i=["<",t,' filled="f" stroked="f"'],o=["position: ",Ge,";"],r=t===Ye;("shape"===t||r)&&o.push("left:0;top:0;width:1px;height:1px;"),o.push("visibility: ",r?qe:Ke),i.push(' style="',o.join(""),'"/>'),t&&(i=r||"span"===t||"img"===t?i.join(""):e.prepVML(i),n.element=f(i)),n.renderer=e},add:function(e){var t=this,n=t.renderer,i=t.element,o=n.box,r=e&&e.inverted,a=e?e.element||e:o;return r&&n.invertChild(i,a),a.appendChild(i),t.added=!0,t.alignOnAdd&&!t.deferUpdateTransform&&t.updateTransform(),t.onAdd&&t.onAdd(),t},updateTransform:I.prototype.htmlUpdateTransform,setSpanRotation:function(){var e=this.rotation,t=Ne(e*xe),n=_e(e*xe);g(this.element,{filter:e?["progid:DXImageTransform.Microsoft.Matrix(M11=",t,", M12=",-n,", M21=",n,", M22=",t,", sizingMethod='auto expand')"].join(""):Je})},getSpanCorrection:function(e,t,n,i,o){var r,a=i?Ne(i*xe):1,s=i?_e(i*xe):0,l=p(this.elemHeight,this.element.offsetHeight),d=o&&"left"!==o;this.xCorr=0>a&&-e,this.yCorr=0>s&&-l,r=0>a*s,this.xCorr+=s*t*(r?1-n:n),this.yCorr-=a*t*(i?r?n:1-n:1),d&&(this.xCorr-=e*n*(0>a?-1:1),i&&(this.yCorr-=l*n*(0>s?-1:1)),g(this.element,{textAlign:o}))},pathToVML:function(e){for(var t=e.length,n=[];t--;)a(e[t])?n[t]=me(10*e[t])-5:"Z"===e[t]?n[t]="x":(n[t]=e[t],!e.isArc||"wa"!==e[t]&&"at"!==e[t]||(n[t+5]===n[t+7]&&(n[t+7]+=e[t+7]>e[t+5]?1:-1),n[t+6]===n[t+8]&&(n[t+8]+=e[t+8]>e[t+6]?1:-1)));return n.join(" ")||"x"},clip:function(e){var t,n,i=this;return e?(t=e.members,d(t,i),t.push(i),i.destroyClip=function(){d(t,i)},n=e.getCSS(i)):(i.destroyClip&&i.destroyClip(),n={clip:$e?"inherit":"rect(auto)"}),i.css(n)},css:I.prototype.htmlCss,safeRemoveChild:function(e){e.parentNode&&k(e)},destroy:function(){return this.destroyClip&&this.destroyClip(),I.prototype.destroy.apply(this)},on:function(e,t){return this.element["on"+e]=function(){var e=ge.event;e.target=e.srcElement,t(e)},this},cutOffPath:function(e,t){var i;return e=e.split(/[ ,]/),i=e.length,(9===i||11===i)&&(e[i-4]=e[i-2]=n(e[i-2])-10*t),e.join(" ")},shadow:function(e,t,i){var o,r,a,s,l,d,c,u=[],h=this.element,g=this.renderer,m=h.style,v=h.path;if(v&&"string"!=typeof v.value&&(v="x"),l=v,e){for(d=p(e.width,3),c=(e.opacity||.15)/d,o=1;3>=o;o++)s=2*d+1-2*o,i&&(l=this.cutOffPath(v.value,s+.5)),a=['<shape isShadow="true" strokeweight="',s,'" filled="false" path="',l,'" coordsize="10 10" style="',h.style.cssText,'" />'],r=f(g.prepVML(a),null,{left:n(m.left)+p(e.offsetX,1),top:n(m.top)+p(e.offsetY,1)}),i&&(r.cutOff=s+1),a=['<stroke color="',e.color||"black",'" opacity="',c*o,'"/>'],f(g.prepVML(a),null,null,r),t?t.element.appendChild(r):h.parentNode.insertBefore(r,h),u.push(r);this.shadows=u}return this},updateShadows:Le,setAttr:function(e,t){$e?this.element[e]=t:this.element.setAttribute(e,t)},classSetter:function(e){this.element.className=e},dashstyleSetter:function(e,t,n){var i=n.getElementsByTagName("stroke")[0]||f(this.renderer.prepVML(["<stroke/>"]),null,null,n);i[t]=e||"solid",this[t]=e},dSetter:function(e,t,n){var i,o=this.shadows;if(e=e||[],this.d=e.join&&e.join(" "),n.path=e=this.pathToVML(e),o)for(i=o.length;i--;)o[i].path=o[i].cutOff?this.cutOffPath(e,o[i].cutOff):e;this.setAttr(t,e)},fillSetter:function(e,t,n){var i=n.nodeName;"SPAN"===i?n.style.color=e:"IMG"!==i&&(n.filled=e!==Je,this.setAttr("fillcolor",this.renderer.color(e,n,t,this)));
},opacitySetter:Le,rotationSetter:function(e,t,n){var i=n.style;this[t]=i[t]=e,i.left=-me(_e(e*xe)+1)+Xe,i.top=me(Ne(e*xe))+Xe},strokeSetter:function(e,t,n){this.setAttr("strokecolor",this.renderer.color(e,n,t))},"stroke-widthSetter":function(e,t,n){n.stroked=!!e,this[t]=e,a(e)&&(e+=Xe),this.setAttr("strokeweight",e)},titleSetter:function(e,t){this.setAttr(t,e)},visibilitySetter:function(e,t,n){"inherit"===e&&(e=Ke),this.shadows&&ut(this.shadows,function(n){n.style[t]=e}),"DIV"===n.nodeName&&(e=e===qe?"-999em":0,$e||(n.style[t]=e?Ke:qe),t="top"),n.style[t]=e},xSetter:function(e,t,n){this[t]=e,"x"===t?t="left":"y"===t&&(t="top"),this.updateClipping?(this[t]=e,this.updateClipping()):n.style[t]=e},zIndexSetter:function(e,t,n){n.style[t]=e}},he.VMLElement=Dt=m(I,Dt),Dt.prototype.ySetter=Dt.prototype.widthSetter=Dt.prototype.heightSetter=Dt.prototype.xSetter;var Mt={Element:Dt,isIE8:Se.indexOf("MSIE 8.0")>-1,init:function(t,n,i,o){var r,a,s,l=this;if(l.alignedObjects=[],r=l.createElement(Ye).css(e(this.getStyle(o),{position:je})),a=r.element,t.appendChild(r.element),l.isVML=!0,l.box=a,l.boxWrapper=r,l.cache={},l.setSize(n,i,!1),!pe.namespaces.hcv){pe.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),s="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ";try{pe.createStyleSheet().cssText=s}catch(d){pe.styleSheets[0].cssText+=s}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(t,n,i,r){var a=this.createElement(),s=o(t);return e(a,{members:[],left:(s?t.x:t)+1,top:(s?t.y:n)+1,width:(s?t.width:i)-1,height:(s?t.height:r)-1,getCSS:function(t){var n=t.element,i=n.nodeName,o="shape"===i,r=t.inverted,a=this,s=a.top-(o?n.offsetTop:0),l=a.left,d=l+a.width,c=s+a.height,u={clip:"rect("+me(r?l:s)+"px,"+me(r?c:d)+"px,"+me(r?d:c)+"px,"+me(r?s:l)+"px)"};return!r&&$e&&"DIV"===i&&e(u,{width:d+Xe,height:c+Xe}),u},updateClipping:function(){ut(a.members,function(e){e.element&&e.css(a.getCSS(e))})}})},color:function(e,t,n,i){var o,r,a,s=this,l=/^rgba/,d=Je;if(e&&e.linearGradient?a="gradient":e&&e.radialGradient&&(a="pattern"),a){var c,u,h,p,g,m,v,b,y,w,A,N,_=e.linearGradient||e.radialGradient,C="",x=e.stops,S=[],T=function(){r=['<fill colors="'+S.join(",")+'" opacity="',b,'" o:opacity2="',v,'" type="',a,'" ',C,'focus="100%" method="any" />'],f(s.prepVML(r),null,null,t)};if(A=x[0],N=x[x.length-1],A[0]>0&&x.unshift([0,A[1]]),N[0]<1&&x.push([1,N[1]]),ut(x,function(e,t){l.test(e[1])?(o=Tt(e[1]),c=o.get("rgb"),u=o.get("a")):(c=e[1],u=1),S.push(100*e[0]+"% "+c),t?(b=u,y=c):(v=u,w=c)}),"fill"===n)if("gradient"===a)h=_.x1||_[0]||0,p=_.y1||_[1]||0,g=_.x2||_[2]||0,m=_.y2||_[3]||0,C='angle="'+(90-180*fe.atan((m-p)/(g-h))/Ce)+'"',T();else{var k,$=_.r,D=2*$,M=2*$,E=_.cx,P=_.cy,I=t.radialReference,O=function(){I&&(k=i.getBBox(),E+=(I[0]-k.x)/k.width-.5,P+=(I[1]-k.y)/k.height-.5,D*=I[2]/k.width,M*=I[2]/k.height),C='src="'+G.global.VMLRadialGradientURL+'" size="'+D+","+M+'" origin="0.5,0.5" position="'+E+","+P+'" color2="'+w+'" ',T()};i.added?O():i.onAdd=O,d=y}else d=c}else if(l.test(e)&&"IMG"!==t.tagName)o=Tt(e),r=["<",n,' opacity="',o.get("a"),'"/>'],f(this.prepVML(r),null,null,t),d=o.get("rgb");else{var R=t.getElementsByTagName(n);R.length&&(R[0].opacity=1,R[0].type="solid"),d=e}return d},prepVML:function(e){var t="display:inline-block;behavior:url(#default#VML);",n=this.isIE8;return e=e.join(""),n?(e=e.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),e=-1===e.indexOf('style="')?e.replace("/>",' style="'+t+'" />'):e.replace('style="','style="'+t)):e=e.replace("<","<hcv:"),e},text:kt.prototype.html,path:function(t){var n={coordsize:"10 10"};return r(t)?n.d=t:o(t)&&e(n,t),this.createElement("shape").attr(n)},circle:function(e,t,n){var i=this.symbol("circle");return o(e)&&(n=e.r,t=e.y,e=e.x),i.isCircle=!0,i.r=n,i.attr({x:e,y:t})},g:function(e){var t,n;return e&&(n={className:We+e,"class":We+e}),t=this.createElement(Ye).attr(n)},image:function(e,t,n,i,o){var r=this.createElement("img").attr({src:e});return arguments.length>1&&r.attr({x:t,y:n,width:i,height:o}),r},createElement:function(e){return"rect"===e?this.symbol(e):kt.prototype.createElement.call(this,e)},invertChild:function(e,t){var i=this,o=t.style,r="IMG"===e.tagName&&e.style;g(e,{flip:"x",left:n(o.width)-(r?n(r.top):1),top:n(o.height)-(r?n(r.left):1),rotation:-90}),ut(e.childNodes,function(t){i.invertChild(t,e)})},symbols:{arc:function(e,t,n,i,o){var r,a=o.start,s=o.end,l=o.r||n||i,d=o.innerR,c=Ne(a),u=_e(a),h=Ne(s),p=_e(s);return s-a===0?["x"]:(r=["wa",e-l,t-l,e+l,t+l,e+l*c,t+l*u,e+l*h,t+l*p],o.open&&!d&&r.push("e",Ze,e,t),r.push("at",e-d,t-d,e+d,t+d,e+d*h,t+d*p,e+d*c,t+d*u,"x","e"),r.isArc=!0,r)},circle:function(e,t,n,i,o){return o&&(n=i=2*o.r),o&&o.isCircle&&(e-=n/2,t-=i/2),["wa",e,t,e+n,t+i,e+n,t+i/2,e+n,t+i/2,"e"]},rect:function(e,t,n,i,o){return kt.prototype.symbols[c(o)&&o.r?"callout":"square"].call(0,e,t,n,i,o)}}};he.VMLRenderer=$t=function(){this.init.apply(this,arguments)},$t.prototype=t(kt.prototype,Mt),B=$t}kt.prototype.measureSpanWidth=function(e,t){var n,i=pe.createElement("span"),o=pe.createTextNode(e);return i.appendChild(o),g(i,t),this.box.appendChild(i),n=i.offsetWidth,k(i),n};var Et,Pt;Re&&(he.CanVGRenderer=Et=function(){Pe="http://www.w3.org/1999/xhtml"},Et.prototype.symbols={},Pt=function(){function e(){var e,n=t.length;for(e=0;n>e;e++)t[e]();t=[]}var t=[];return{push:function(n,i){0===t.length&&dt(i,e),t.push(n)}}}(),B=Et),O.prototype={addLabel:function(){var t,n,i,o,r=this,s=r.axis,d=s.options,u=s.chart,h=s.horiz,g=s.categories,f=s.names,m=r.pos,v=d.labels,b=v.rotation,y=s.tickPositions,w=h&&g&&!v.step&&!v.staggerLines&&!v.rotation&&u.plotWidth/y.length||!h&&(u.margin[3]||.33*u.chartWidth),A=m===y[0],N=m===y[y.length-1],_=g?p(g[m],f[m],m):m,C=r.label,x=y.info;s.isDatetimeAxis&&x&&(o=d.dateTimeLabelFormats[x.higherRanks[m]||x.unitName]),r.isFirst=A,r.isLast=N,t=s.labelFormatter.call({axis:s,chart:u,isFirst:A,isLast:N,dateTimeLabelFormat:o,value:s.isLog?$(l(_)):_}),n=w&&{width:ye(1,me(w-2*(v.padding||10)))+Xe},c(C)?C&&C.attr({text:t}).css(n):(i={align:s.labelAlign},a(b)&&(i.rotation=b),w&&v.ellipsis&&(n.HcHeight=s.len/y.length),r.label=C=c(t)&&v.enabled?u.renderer.text(t,0,0,v.useHTML).attr(i).css(e(n,v.style)).add(s.labelGroup):null,s.tickBaseline=u.renderer.fontMetrics(v.style.fontSize,C).b,b&&2===s.side&&(s.tickBaseline*=Ne(b*xe))),r.yOffset=C?p(v.y,s.tickBaseline+(2===s.side?8:-(C.getBBox().height/2))):0},getLabelSize:function(){var e=this.label,t=this.axis;return e?e.getBBox()[t.horiz?"height":"width"]:0},getLabelSides:function(){var e=this.label.getBBox(),t=this.axis,n=t.horiz,i=t.options,o=i.labels,r=n?e.width:e.height,a=n?o.x-r*{left:0,center:.5,right:1}[t.labelAlign]:0,s=n?r+a:r;return[a,s]},handleOverflow:function(e,t){var n,i,o,r,a,s=!0,l=this.axis,d=this.isFirst,c=this.isLast,u=l.horiz,h=u?t.x:t.y,p=l.reversed,g=l.tickPositions,f=this.getLabelSides(),m=f[0],v=f[1],b=this.label.line,y=b||0,w=l.labelEdge,A=l.justifyLabels&&(d||c);if(w[y]===H||h+m>w[y]?w[y]=h+v:A||(s=!1),A){a=l.justifyToPlot,n=a?l.pos:0,i=a?n+l.len:l.chart.chartWidth;do e+=d?1:-1,o=l.ticks[g[e]];while(g[e]&&(!o||!o.label||o.label.line!==b));r=o&&o.label.xy&&o.label.xy.x+o.getLabelSides()[d?0:1],d&&!p||c&&p?n>h+m&&(h=n-m,o&&h+v>r&&(s=!1)):h+v>i&&(h=i-v,o&&r>h+m&&(s=!1)),t.x=h}return s},getPosition:function(e,t,n,i){var o=this.axis,r=o.chart,a=i&&r.oldChartHeight||r.chartHeight;return{x:e?o.translate(t+n,null,null,i)+o.transB:o.left+o.offset+(o.opposite?(i&&r.oldChartWidth||r.chartWidth)-o.right-o.left:0),y:e?a-o.bottom+o.offset-(o.opposite?o.height:0):a-o.translate(t+n,null,null,i)-o.transB}},getLabelPosition:function(e,t,n,i,o,r,a,s){var l=this.axis,d=l.transA,c=l.reversed,u=l.staggerLines;return e=e+o.x-(r&&i?r*d*(c?-1:1):0),t=t+this.yOffset-(r&&!i?r*d*(c?1:-1):0),u&&(n.line=a/(s||1)%u,t+=n.line*(l.labelOffset/u)),{x:e,y:t}},getMarkPath:function(e,t,n,i,o,r){return r.crispLine([Ze,e,t,Qe,e+(o?0:-n),t+(o?n:0)],i)},render:function(e,t,n){var i,o,r,a=this,s=a.axis,l=s.options,d=s.chart,c=d.renderer,u=s.horiz,h=a.type,g=a.label,f=a.pos,m=l.labels,v=a.gridLine,b=h?h+"Grid":"grid",y=h?h+"Tick":"tick",w=l[b+"LineWidth"],A=l[b+"LineColor"],N=l[b+"LineDashStyle"],_=l[y+"Length"],C=l[y+"Width"]||0,x=l[y+"Color"],S=l[y+"Position"],T=a.mark,k=m.step,$=!0,D=s.tickmarkOffset,M=a.getPosition(u,f,D,t),E=M.x,P=M.y,I=u&&E===s.pos+s.len||!u&&P===s.pos?-1:1;n=p(n,1),this.isActive=!0,w&&(i=s.getPlotLinePath(f+D,w*I,t,!0),v===H&&(r={stroke:A,"stroke-width":w},N&&(r.dashstyle=N),h||(r.zIndex=1),t&&(r.opacity=0),a.gridLine=v=w?c.path(i).attr(r).add(s.gridGroup):null),!t&&v&&i&&v[a.isNew?"attr":"animate"]({d:i,opacity:n})),C&&_&&("inside"===S&&(_=-_),s.opposite&&(_=-_),o=a.getMarkPath(E,P,_,C*I,u,c),T?T.animate({d:o,opacity:n}):a.mark=c.path(o).attr({stroke:x,"stroke-width":C,opacity:n}).add(s.axisGroup)),g&&!isNaN(E)&&(g.xy=M=a.getLabelPosition(E,P,g,u,m,D,e,k),a.isFirst&&!a.isLast&&!p(l.showFirstLabel,1)||a.isLast&&!a.isFirst&&!p(l.showLastLabel,1)?$=!1:s.isRadial||m.step||m.rotation||t||0===n||($=a.handleOverflow(e,M)),k&&e%k&&($=!1),$&&!isNaN(M.y)?(M.opacity=n,g[a.isNew?"attr":"animate"](M),a.isNew=!1):g.attr("y",-9999))},destroy:function(){T(this,this.axis)}},he.PlotLineOrBand=function(e,t){this.axis=e,t&&(this.options=t,this.id=t.id)},he.PlotLineOrBand.prototype={render:function(){var e,n,i,o,r,a,l=this,d=l.axis,u=d.horiz,h=(d.pointRange||0)/2,p=l.options,g=p.label,f=l.label,m=p.width,v=p.to,b=p.from,y=c(b)&&c(v),w=p.value,A=p.dashStyle,N=l.svgElem,_=[],C=p.color,T=p.zIndex,k=p.events,$={},D=d.chart.renderer;if(d.isLog&&(b=s(b),v=s(v),w=s(w)),m)_=d.getPlotLinePath(w,m),$={stroke:C,"stroke-width":m},A&&($.dashstyle=A);else{if(!y)return;b=ye(b,d.min-h),v=we(v,d.max+h),_=d.getPlotBandPath(b,v,p),C&&($.fill=C),p.borderWidth&&($.stroke=p.borderColor,$["stroke-width"]=p.borderWidth)}if(c(T)&&($.zIndex=T),N)_?N.animate({d:_},null,N.onGetPath):(N.hide(),N.onGetPath=function(){N.show()},f&&(l.label=f=f.destroy()));else if(_&&_.length&&(l.svgElem=N=D.path(_).attr($).add(),k)){e=function(e){N.on(e,function(t){k[e].apply(l,[t])})};for(n in k)e(n)}return g&&c(g.text)&&_&&_.length&&d.width>0&&d.height>0?(g=t({align:u&&y&&"center",x:u?!y&&4:10,verticalAlign:!u&&y&&"middle",y:u?y?16:10:y?6:-4,rotation:u&&!y&&90},g),f||($={align:g.textAlign||g.align,rotation:g.rotation},c(T)&&($.zIndex=T),l.label=f=D.text(g.text,0,0,g.useHTML).attr($).css(g.style).add()),i=[_[1],_[4],y?_[6]:_[1]],o=[_[2],_[5],y?_[7]:_[2]],r=x(i),a=x(o),f.align(g,!1,{x:r,y:a,width:S(i)-r,height:S(o)-a}),f.show()):f&&f.hide(),l},destroy:function(){d(this.axis.plotLinesAndBands,this),delete this.axis,T(this)}},J={getPlotBandPath:function(e,t){var n=this.getPlotLinePath(t),i=this.getPlotLinePath(e);return i&&n?i.push(n[4],n[5],n[1],n[2]):i=null,i},addPlotBand:function(e){return this.addPlotBandOrLine(e,"plotBands")},addPlotLine:function(e){return this.addPlotBandOrLine(e,"plotLines")},addPlotBandOrLine:function(e,t){var n=new he.PlotLineOrBand(this,e).render(),i=this.userOptions;return n&&(t&&(i[t]=i[t]||[],i[t].push(e)),this.plotLinesAndBands.push(n)),n},removePlotBandOrLine:function(e){for(var t=this.plotLinesAndBands,n=this.options,i=this.userOptions,o=t.length;o--;)t[o].id===e&&t[o].destroy();ut([n.plotLines||[],i.plotLines||[],n.plotBands||[],i.plotBands||[]],function(t){for(o=t.length;o--;)t[o].id===e&&d(t,t[o])})}},R.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:At,lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return v(this.total,-1)},style:At.style}},defaultLeftAxisOptions:{labels:{x:-15,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{x:0,y:null},title:{rotation:0}},defaultTopAxisOptions:{labels:{x:0,y:-15},title:{rotation:0}},init:function(e,t){var n=t.isX,i=this;i.horiz=e.inverted?!n:n,i.isXAxis=n,i.coll=n?"xAxis":"yAxis",i.opposite=t.opposite,i.side=t.side||(i.horiz?i.opposite?0:2:i.opposite?1:3),i.setOptions(t);var o=this.options,r=o.type,a="datetime"===r;i.labelFormatter=o.labels.formatter||i.defaultLabelFormatter,i.userOptions=t,i.minPixelPadding=0,i.chart=e,i.reversed=o.reversed,i.zoomEnabled=o.zoomEnabled!==!1,i.categories=o.categories||"category"===r,i.names=[],i.isLog="logarithmic"===r,i.isDatetimeAxis=a,i.isLinked=c(o.linkedTo),i.tickmarkOffset=i.categories&&"between"===o.tickmarkPlacement&&1===p(o.tickInterval,1)?.5:0,i.ticks={},i.labelEdge=[],i.minorTicks={},i.plotLinesAndBands=[],i.alternateBands={},i.len=0,i.minRange=i.userMinRange=o.minRange||o.maxZoom,i.range=o.range,i.offset=o.offset||0,i.stacks={},i.oldStacks={},i.max=null,i.min=null,i.crosshair=p(o.crosshair,h(e.options.tooltip.crosshairs)[n?0:1],!1);var d,u=i.options.events;-1===ct(i,e.axes)&&(n&&!this.isColorAxis?e.axes.splice(e.xAxis.length,0,i):e.axes.push(i),e[i.coll].push(i)),i.series=i.series||[],e.inverted&&n&&i.reversed===H&&(i.reversed=!0),i.removePlotBand=i.removePlotBandOrLine,i.removePlotLine=i.removePlotBandOrLine;for(d in u)ft(i,d,u[d]);i.isLog&&(i.val2lin=s,i.lin2val=l)},setOptions:function(e){this.options=t(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],t(G[this.coll],e))},defaultLabelFormatter:function(){var e,t,n=this.axis,i=this.value,o=n.categories,r=this.dateTimeLabelFormat,a=G.lang.numericSymbols,s=a&&a.length,l=n.options.labels.format,d=n.isLog?i:n.tickInterval;if(l)t=A(l,this);else if(o)t=i;else if(r)t=j(r,i);else if(s&&d>=1e3)for(;s--&&t===H;)e=Math.pow(1e3,s+1),d>=e&&null!==a[s]&&(t=v(i/e,-1)+a[s]);return t===H&&(t=Ae(i)>=1e4?v(i,0):v(i,-1,H,"")),t},getSeriesExtremes:function(){var e=this,t=e.chart;e.hasVisibleSeries=!1,e.dataMin=e.dataMax=e.ignoreMinPadding=e.ignoreMaxPadding=null,e.buildStacks&&e.buildStacks(),ut(e.series,function(n){if(n.visible||!t.options.chart.ignoreHiddenSeries){var i,o,r,a=n.options,s=a.threshold;e.hasVisibleSeries=!0,e.isLog&&0>=s&&(s=null),e.isXAxis?(i=n.xData,i.length&&(e.dataMin=we(p(e.dataMin,i[0]),x(i)),e.dataMax=ye(p(e.dataMax,i[0]),S(i)))):(n.getExtremes(),r=n.dataMax,o=n.dataMin,c(o)&&c(r)&&(e.dataMin=we(p(e.dataMin,o),o),e.dataMax=ye(p(e.dataMax,r),r)),c(s)&&(e.dataMin>=s?(e.dataMin=s,e.ignoreMinPadding=!0):e.dataMax<s&&(e.dataMax=s,e.ignoreMaxPadding=!0)))}})},translate:function(e,t,n,i,o,r){var s,l=this,d=1,c=0,u=i?l.oldTransA:l.transA,h=i?l.oldMin:l.min,p=l.minPixelPadding,g=(l.options.ordinal||l.isLog&&o)&&l.lin2val;return u||(u=l.transA),n&&(d*=-1,c=l.len),l.reversed&&(d*=-1,c-=d*(l.sector||l.len)),t?(e=e*d+c,e-=p,s=e/u+h,g&&(s=l.lin2val(s))):(g&&(e=l.val2lin(e)),"between"===r&&(r=.5),s=d*(e-h)*u+c+d*p+(a(r)?u*r*l.pointRange:0)),s},toPixels:function(e,t){return this.translate(e,!1,!this.horiz,null,!0)+(t?0:this.pos)},toValue:function(e,t){return this.translate(e-(t?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(e,t,n,i,o){var r,a,s,l,d,c=this,u=c.chart,h=c.left,g=c.top,f=n&&u.oldChartHeight||u.chartHeight,m=n&&u.oldChartWidth||u.chartWidth,v=c.transB;return o=p(o,c.translate(e,null,null,n)),r=s=me(o+v),a=l=me(f-o-v),isNaN(o)?d=!0:c.horiz?(a=g,l=f-c.bottom,(h>r||r>h+c.width)&&(d=!0)):(r=h,s=m-c.right,(g>a||a>g+c.height)&&(d=!0)),d&&!i?null:u.renderer.crispLine([Ze,r,a,Qe,s,l],t||1)},getLinearTickPositions:function(e,t,n){var i,o,r=$(ve(t/e)*e),s=$(be(n/e)*e),l=[];if(t===n&&a(t))return[t];for(i=r;s>=i&&(l.push(i),i=$(i+e),i!==o);)o=i;return l},getMinorTickPositions:function(){var e,t,n,i=this,o=i.options,r=i.tickPositions,a=i.minorTickInterval,s=[];if(i.isLog)for(n=r.length,t=1;n>t;t++)s=s.concat(i.getLogTickPositions(a,r[t-1],r[t],!0));else if(i.isDatetimeAxis&&"auto"===o.minorTickInterval)s=s.concat(i.getTimeTicks(i.normalizeTimeTickInterval(a),i.min,i.max,o.startOfWeek)),s[0]<i.min&&s.shift();else for(e=i.min+(r[0]-i.min)%a;e<=i.max;e+=a)s.push(e);return s},adjustForMinRange:function(){var e,t,n,i,o,r,a,s,l=this,d=l.options,u=l.min,h=l.max,g=l.dataMax-l.dataMin>=l.minRange;if(l.isXAxis&&l.minRange===H&&!l.isLog&&(c(d.min)||c(d.max)?l.minRange=null:(ut(l.series,function(e){for(o=e.xData,r=e.xIncrement?1:o.length-1,n=r;n>0;n--)i=o[n]-o[n-1],(t===H||t>i)&&(t=i)}),l.minRange=we(5*t,l.dataMax-l.dataMin))),h-u<l.minRange){var f=l.minRange;e=(f-h+u)/2,a=[u-e,p(d.min,u-e)],g&&(a[2]=l.dataMin),u=S(a),s=[u+f,p(d.max,u+f)],g&&(s[2]=l.dataMax),h=x(s),f>h-u&&(a[0]=h-f,a[1]=p(d.min,h-f),u=S(a))}l.min=u,l.max=h},setAxisTranslation:function(e){var t,n,o=this,r=o.max-o.min,a=o.axisPointRange||0,s=0,l=0,d=o.linkedParent,u=!!o.categories,h=o.transA;(o.isXAxis||u||a)&&(d?(s=d.minPointOffset,l=d.pointRangePadding):ut(o.series,function(e){var n=u?1:o.isXAxis?e.pointRange:o.axisPointRange||0,d=e.options.pointPlacement,h=e.closestPointRange;n>r&&(n=0),a=ye(a,n),s=ye(s,i(d)?0:n/2),l=ye(l,"on"===d?0:n),!e.noSharedTooltip&&c(h)&&(t=c(t)?we(t,h):h)}),n=o.ordinalSlope&&t?o.ordinalSlope/t:1,o.minPointOffset=s*=n,o.pointRangePadding=l*=n,o.pointRange=we(a,r),o.closestPointRange=t),e&&(o.oldTransA=h),o.translationSlope=o.transA=h=o.len/(r+l||1),o.transB=o.horiz?o.left:o.bottom,o.minPixelPadding=h*s},setTickPositions:function(e){var t,n,i,o,r=this,l=r.chart,d=r.options,u=d.startOnTick,h=d.endOnTick,g=r.isLog,f=r.isDatetimeAxis,m=r.isXAxis,v=r.isLinked,b=r.options.tickPositioner,y=d.maxPadding,w=d.minPadding,A=d.tickInterval,C=d.minTickInterval,x=d.tickPixelInterval,S=r.categories;if(v?(r.linkedParent=l[r.coll][d.linkedTo],n=r.linkedParent.getExtremes(),r.min=p(n.min,n.dataMin),r.max=p(n.max,n.dataMax),d.type!==r.linkedParent.options.type&&X(11,1)):(r.min=p(r.userMin,d.min,r.dataMin),r.max=p(r.userMax,d.max,r.dataMax)),g&&(!e&&we(r.min,p(r.dataMin,r.min))<=0&&X(10,1),r.min=$(s(r.min)),r.max=$(s(r.max))),r.range&&c(r.max)&&(r.userMin=r.min=ye(r.min,r.max-r.range),r.userMax=r.max,r.range=null),r.beforePadding&&r.beforePadding(),r.adjustForMinRange(),S||r.axisPointRange||r.usePercentage||v||!c(r.min)||!c(r.max)||(t=r.max-r.min,t&&(c(d.min)||c(r.userMin)||!w||!(r.dataMin<0)&&r.ignoreMinPadding||(r.min-=t*w),c(d.max)||c(r.userMax)||!y||!(r.dataMax>0)&&r.ignoreMaxPadding||(r.max+=t*y))),a(d.floor)&&(r.min=ye(r.min,d.floor)),a(d.ceiling)&&(r.max=we(r.max,d.ceiling)),r.min===r.max||void 0===r.min||void 0===r.max?r.tickInterval=1:v&&!A&&x===r.linkedParent.options.tickPixelInterval?r.tickInterval=r.linkedParent.tickInterval:(r.tickInterval=p(A,S?1:(r.max-r.min)*x/ye(r.len,x)),!c(A)&&r.len<x&&!this.isRadial&&!this.isLog&&!S&&u&&h&&(o=!0,r.tickInterval/=4)),m&&!e&&ut(r.series,function(e){e.processData(r.min!==r.oldMin||r.max!==r.oldMax)}),r.setAxisTranslation(!0),r.beforeSetTickPositions&&r.beforeSetTickPositions(),r.postProcessTickInterval&&(r.tickInterval=r.postProcessTickInterval(r.tickInterval)),r.pointRange&&(r.tickInterval=ye(r.pointRange,r.tickInterval)),!A&&r.tickInterval<C&&(r.tickInterval=C),f||g||A||(r.tickInterval=_(r.tickInterval,null,N(r.tickInterval),p(d.allowDecimals,!(r.tickInterval>1&&r.tickInterval<5&&r.max>1e3&&r.max<9999)))),r.minorTickInterval="auto"===d.minorTickInterval&&r.tickInterval?r.tickInterval/5:d.minorTickInterval,r.tickPositions=i=d.tickPositions?[].concat(d.tickPositions):b&&b.apply(r,[r.min,r.max]),i||(!r.ordinalPositions&&(r.max-r.min)/r.tickInterval>ye(2*r.len,200)&&X(19,!0),i=f?r.getTimeTicks(r.normalizeTimeTickInterval(r.tickInterval,d.units),r.min,r.max,d.startOfWeek,r.ordinalPositions,r.closestPointRange,!0):g?r.getLogTickPositions(r.tickInterval,r.min,r.max):r.getLinearTickPositions(r.tickInterval,r.min,r.max),o&&i.splice(1,i.length-2),r.tickPositions=i),!v){var T,k=i[0],D=i[i.length-1],M=r.minPointOffset||0;u?r.min=k:r.min-M>k&&i.shift(),h?r.max=D:r.max+M<D&&i.pop(),0===i.length&&c(k)&&i.push((D+k)/2),1===i.length&&(T=Ae(r.max)>1e13?1:.001,r.min-=T,r.max+=T)}},setMaxTicks:function(){var e=this.chart,t=e.maxTicks||{},n=this.tickPositions,i=this._maxTicksKey=[this.coll,this.pos,this.len].join("-");!this.isLinked&&!this.isDatetimeAxis&&n&&n.length>(t[i]||0)&&this.options.alignTicks!==!1&&(t[i]=n.length),e.maxTicks=t},adjustTickAmount:function(){var e=this,t=e.chart,n=e._maxTicksKey,i=e.tickPositions,o=t.maxTicks;if(o&&o[n]&&!e.isDatetimeAxis&&!e.categories&&!e.isLinked&&e.options.alignTicks!==!1&&this.min!==H){var r,a=e.tickAmount,s=i.length;if(e.tickAmount=r=o[n],r>s){for(;i.length<r;)i.push($(i[i.length-1]+e.tickInterval));e.transA*=(s-1)/(r-1),e.max=i[i.length-1]}c(a)&&r!==a&&(e.isDirty=!0)}},setScale:function(){var e,t,n,i,o=this,r=o.stacks;if(o.oldMin=o.min,o.oldMax=o.max,o.oldAxisLength=o.len,o.setAxisSize(),i=o.len!==o.oldAxisLength,ut(o.series,function(e){(e.isDirtyData||e.isDirty||e.xAxis.isDirty)&&(n=!0)}),i||n||o.isLinked||o.forceRedraw||o.userMin!==o.oldUserMin||o.userMax!==o.oldUserMax){if(!o.isXAxis)for(e in r)for(t in r[e])r[e][t].total=null,r[e][t].cum=0;o.forceRedraw=!1,o.getSeriesExtremes(),o.setTickPositions(),o.oldUserMin=o.userMin,o.oldUserMax=o.userMax,o.isDirty||(o.isDirty=i||o.min!==o.oldMin||o.max!==o.oldMax)}else if(!o.isXAxis){o.oldStacks&&(r=o.stacks=o.oldStacks);for(e in r)for(t in r[e])r[e][t].cum=r[e][t].total}o.setMaxTicks()},setExtremes:function(t,n,i,o,r){var a=this,s=a.chart;i=p(i,!0),r=e(r,{min:t,max:n}),vt(a,"setExtremes",r,function(){a.userMin=t,a.userMax=n,a.eventArgs=r,a.isDirtyExtremes=!0,i&&s.redraw(o)})},zoom:function(e,t){var n=this.dataMin,i=this.dataMax,o=this.options;return this.allowZoomOutside||(c(n)&&e<=we(n,p(o.min,n))&&(e=H),c(i)&&t>=ye(i,p(o.max,i))&&(t=H)),this.displayBtn=e!==H||t!==H,this.setExtremes(e,t,!1,H,{trigger:"zoom"}),!0},setAxisSize:function(){var e=this.chart,t=this.options,n=t.offsetLeft||0,i=t.offsetRight||0,o=this.horiz,r=p(t.width,e.plotWidth-n+i),a=p(t.height,e.plotHeight),s=p(t.top,e.plotTop),l=p(t.left,e.plotLeft+n),d=/%$/;d.test(a)&&(a=parseInt(a,10)/100*e.plotHeight),d.test(s)&&(s=parseInt(s,10)/100*e.plotHeight+e.plotTop),this.left=l,this.top=s,this.width=r,this.height=a,this.bottom=e.chartHeight-a-s,this.right=e.chartWidth-r-l,this.len=ye(o?r:a,0),this.pos=o?l:s},getExtremes:function(){var e=this,t=e.isLog;return{min:t?$(l(e.min)):e.min,max:t?$(l(e.max)):e.max,dataMin:e.dataMin,dataMax:e.dataMax,userMin:e.userMin,userMax:e.userMax}},getThreshold:function(e){var t=this,n=t.isLog,i=n?l(t.min):t.min,o=n?l(t.max):t.max;return i>e||null===e?e=i:e>o&&(e=o),t.translate(e,0,1,0,1)},autoLabelAlign:function(e){var t,n=(p(e,0)-90*this.side+720)%360;return t=n>15&&165>n?"right":n>195&&345>n?"left":"center"},getOffset:function(){var e,t,n,i,o,r,a,s,l,d,u,h,g,f,m,v=this,b=v.chart,y=b.renderer,w=v.options,A=v.tickPositions,N=v.ticks,_=v.horiz,C=v.side,x=b.inverted?[1,0,3,2][C]:C,S=0,T=0,k=w.title,$=w.labels,D=0,M=b.axisOffset,E=b.clipOffset,P=[-1,1,1,-1][C],I=1,R=p($.maxStaggerLines,5);if(v.hasData=e=v.hasVisibleSeries||c(v.min)&&c(v.max)&&!!A,v.showAxis=t=e||p(w.showEmpty,!0),v.staggerLines=v.horiz&&$.staggerLines,v.axisGroup||(v.gridGroup=y.g("grid").attr({zIndex:w.gridZIndex||1}).add(),v.axisGroup=y.g("axis").attr({zIndex:w.zIndex||2}).add(),v.labelGroup=y.g("axis-labels").attr({zIndex:$.zIndex||7}).addClass(We+v.coll.toLowerCase()+"-labels").add()),e||v.isLinked){if(v.labelAlign=p($.align||v.autoLabelAlign($.rotation)),ut(A,function(e){N[e]?N[e].addLabel():N[e]=new O(v,e)}),v.horiz&&!v.staggerLines&&R&&!$.rotation){for(a=v.reversed?[].concat(A).reverse():A;R>I;){for(s=[],l=!1,r=0;r<a.length;r++)d=a[r],u=N[d].label&&N[d].label.getBBox(),g=u?u.width:0,f=r%I,g&&(h=v.translate(d),s[f]!==H&&h<s[f]&&(l=!0),s[f]=h+g);if(!l)break;I++}I>1&&(v.staggerLines=I)}ut(A,function(e){(0===C||2===C||{1:"left",3:"right"}[C]===v.labelAlign)&&(D=ye(N[e].getLabelSize(),D))}),v.staggerLines&&(D*=v.staggerLines,v.labelOffset=D)}else for(o in N)N[o].destroy(),delete N[o];k&&k.text&&k.enabled!==!1&&(v.axisTitle||(v.axisTitle=y.text(k.text,0,0,k.useHTML).attr({zIndex:7,rotation:k.rotation||0,align:k.textAlign||{low:"left",middle:"center",high:"right"}[k.align]}).addClass(We+this.coll.toLowerCase()+"-title").css(k.style).add(v.axisGroup),v.axisTitle.isNew=!0),t&&(S=v.axisTitle.getBBox()[_?"height":"width"],n=k.offset,T=c(n)?0:p(k.margin,_?5:10)),v.axisTitle[t?"show":"hide"]()),v.offset=P*p(w.offset,M[C]),m=2===C?v.tickBaseline:0,i=D+T+(D&&P*(_?p($.y,v.tickBaseline+8):$.x)-m),v.axisTitleMargin=p(n,i),M[C]=ye(M[C],v.axisTitleMargin+S+P*v.offset,i),E[x]=ye(E[x],2*ve(w.lineWidth/2))},getLinePath:function(e){var t=this.chart,n=this.opposite,i=this.offset,o=this.horiz,r=this.left+(n?this.width:0)+i,a=t.chartHeight-this.bottom-(n?this.height:0)+i;return n&&(e*=-1),t.renderer.crispLine([Ze,o?this.left:r,o?a:this.top,Qe,o?t.chartWidth-this.right:r,o?a:t.chartHeight-this.bottom],e)},getTitlePosition:function(){var e=this.horiz,t=this.left,i=this.top,o=this.len,r=this.options.title,a=e?t:i,s=this.opposite,l=this.offset,d=n(r.style.fontSize||12),c={low:a+(e?0:o),middle:a+o/2,high:a+(e?o:0)}[r.align],u=(e?i+this.height:t)+(e?1:-1)*(s?-1:1)*this.axisTitleMargin+(2===this.side?d:0);return{x:e?c:u+(s?this.width:0)+l+(r.x||0),y:e?u-(s?this.height:0)+l:c+(r.y||0)}},render:function(){var e,t,n,i,o=this,r=o.horiz,a=o.reversed,s=o.chart,d=s.renderer,u=o.options,h=o.isLog,p=o.isLinked,g=o.tickPositions,f=o.axisTitle,m=o.ticks,v=o.minorTicks,b=o.alternateBands,y=u.stackLabels,w=u.alternateGridColor,A=o.tickmarkOffset,N=u.lineWidth,_=s.hasRendered,C=_&&c(o.oldMin)&&!isNaN(o.oldMin),x=o.hasData,S=o.showAxis,T=u.labels.overflow,k=o.justifyLabels=r&&T!==!1;o.labelEdge.length=0,o.justifyToPlot="justify"===T,ut([m,v,b],function(e){var t;for(t in e)e[t].isActive=!1}),(x||p)&&(o.minorTickInterval&&!o.categories&&ut(o.getMinorTickPositions(),function(e){v[e]||(v[e]=new O(o,e,"minor")),C&&v[e].isNew&&v[e].render(null,!0),v[e].render(null,!1,1)}),g.length&&(e=g.slice(),(r&&a||!r&&!a)&&e.reverse(),k&&(e=e.slice(1).concat([e[0]])),ut(e,function(t,n){k&&(n=n===e.length-1?0:n+1),(!p||t>=o.min&&t<=o.max)&&(m[t]||(m[t]=new O(o,t)),C&&m[t].isNew&&m[t].render(n,!0,.1),m[t].render(n))}),A&&0===o.min&&(m[-1]||(m[-1]=new O(o,-1,null,!0)),m[-1].render(-1))),w&&ut(g,function(e,t){t%2===0&&e<o.max&&(b[e]||(b[e]=new he.PlotLineOrBand(o)),n=e+A,i=g[t+1]!==H?g[t+1]+A:o.max,b[e].options={from:h?l(n):n,to:h?l(i):i,color:w},b[e].render(),b[e].isActive=!0)}),o._addedPlotLB||(ut((u.plotLines||[]).concat(u.plotBands||[]),function(e){o.addPlotBandOrLine(e)}),o._addedPlotLB=!0)),ut([m,v,b],function(e){var t,n,i=[],o=q?q.duration||500:0,r=function(){for(n=i.length;n--;)e[i[n]]&&!e[i[n]].isActive&&(e[i[n]].destroy(),delete e[i[n]])};for(t in e)e[t].isActive||(e[t].render(t,!1,0),e[t].isActive=!1,i.push(t));e!==b&&s.hasRendered&&o?o&&setTimeout(r,o):r()}),N&&(t=o.getLinePath(N),o.axisLine?o.axisLine.animate({d:t}):o.axisLine=d.path(t).attr({stroke:u.lineColor,"stroke-width":N,zIndex:7}).add(o.axisGroup),o.axisLine[S?"show":"hide"]()),f&&S&&(f[f.isNew?"attr":"animate"](o.getTitlePosition()),f.isNew=!1),y&&y.enabled&&o.renderStackTotals(),o.isDirty=!1},redraw:function(){this.render(),ut(this.plotLinesAndBands,function(e){e.render()}),ut(this.series,function(e){e.isDirty=!0})},destroy:function(e){var t,n,i=this,o=i.stacks,r=i.plotLinesAndBands;e||mt(i);for(t in o)T(o[t]),o[t]=null;for(ut([i.ticks,i.minorTicks,i.alternateBands],function(e){T(e)}),n=r.length;n--;)r[n].destroy();ut(["stackTotalGroup","axisLine","axisTitle","axisGroup","cross","gridGroup","labelGroup"],function(e){i[e]&&(i[e]=i[e].destroy())}),this.cross&&this.cross.destroy()},drawCrosshair:function(e,t){if(this.crosshair){if((c(t)||!p(this.crosshair.snap,!0))===!1)return void this.hideCrosshair();var n,i,o=this.crosshair,r=o.animation;if(p(o.snap,!0)?c(t)&&(i=this.chart.inverted!=this.horiz?t.plotX:this.len-t.plotY):i=this.horiz?e.chartX-this.pos:this.len-e.chartY+this.pos,n=this.isRadial?this.getPlotLinePath(this.isXAxis?t.x:p(t.stackY,t.y)):this.getPlotLinePath(null,null,null,null,i),null===n)return void this.hideCrosshair();if(this.cross)this.cross.attr({visibility:Ke})[r?"animate":"attr"]({d:n},r);else{var a={"stroke-width":o.width||1,stroke:o.color||"#C0C0C0",zIndex:o.zIndex||2};o.dashStyle&&(a.dashstyle=o.dashStyle),this.cross=this.chart.renderer.path(n).attr(a).add()}}},hideCrosshair:function(){this.cross&&this.cross.hide()}},e(R.prototype,J),R.prototype.getTimeTicks=function(t,n,i,o){var r,a,s=[],l={},d=G.global.useUTC,u=new Z(n-ee),h=t.unitRange,g=t.count;if(c(n)){h>=K.second&&(u.setMilliseconds(0),u.setSeconds(h>=K.minute?0:g*ve(u.getSeconds()/g))),h>=K.minute&&u[se](h>=K.hour?0:g*ve(u[te]()/g)),h>=K.hour&&u[le](h>=K.day?0:g*ve(u[ne]()/g)),h>=K.day&&u[de](h>=K.month?1:g*ve(u[oe]()/g)),h>=K.month&&(u[ce](h>=K.year?0:g*ve(u[re]()/g)),a=u[ae]()),h>=K.year&&(a-=a%g,u[ue](a)),h===K.week&&u[de](u[oe]()-u[ie]()+p(o,1)),r=1,ee&&(u=new Z(u.getTime()+ee)),a=u[ae]();for(var f=u.getTime(),m=u[re](),v=u[oe](),b=(K.day+(d?ee:60*u.getTimezoneOffset()*1e3))%K.day;i>f;)s.push(f),h===K.year?f=Q(a+r*g,0):h===K.month?f=Q(a,m+r*g):d||h!==K.day&&h!==K.week?f+=h*g:f=Q(a,m,v+r*g*(h===K.day?1:7)),r++;s.push(f),ut(ht(s,function(e){return h<=K.hour&&e%K.day===b}),function(e){l[e]="day"})}return s.info=e(t,{higherRanks:l,totalRange:h*g}),s},R.prototype.normalizeTimeTickInterval=function(e,t){var n,i,o=t||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],r=o[o.length-1],a=K[r[0]],s=r[1];for(i=0;i<o.length;i++)if(r=o[i],a=K[r[0]],s=r[1],o[i+1]){var l=(a*s[s.length-1]+K[o[i+1][0]])/2;if(l>=e)break}return a===K.year&&5*a>e&&(s=[1,2,5]),n=_(e/a,s,"year"===r[0]?ye(N(e/a),1):1),{unitRange:a,count:n,unitName:r[0]}},R.prototype.getLogTickPositions=function(e,t,n,i){var o=this,r=o.options,a=o.len,d=[];if(i||(o._minorAutoInterval=null),e>=.5)e=me(e),d=o.getLinearTickPositions(e,t,n);else if(e>=.08){var c,u,h,g,f,m,v,b=ve(t);for(c=e>.3?[1,2,4]:e>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],u=b;n+1>u&&!v;u++)for(g=c.length,h=0;g>h&&!v;h++)f=s(l(u)*c[h]),f>t&&(!i||n>=m)&&m!==H&&d.push(m),m>n&&(v=!0),m=f}else{var y=l(t),w=l(n),A=r[i?"minorTickInterval":"tickInterval"],C="auto"===A?null:A,x=r.tickPixelInterval/(i?5:1),S=i?a/o.tickPositions.length:a;e=p(C,o._minorAutoInterval,(w-y)*x/(S||1)),e=_(e,null,N(e)),d=gt(o.getLinearTickPositions(e,y,w),s),i||(o._minorAutoInterval=e/5)}return i||(o.tickInterval=e),d};var It=he.Tooltip=function(){this.init.apply(this,arguments)};It.prototype={init:function(e,t){var i=t.borderWidth,o=t.style,r=n(o.padding);this.chart=e,this.options=t,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=e.renderer.label("",0,0,t.shape||"callout",null,null,t.useHTML,null,"tooltip").attr({padding:r,fill:t.backgroundColor,"stroke-width":i,r:t.borderRadius,zIndex:8}).css(o).css({padding:0}).add().attr({y:-9999}),Re||this.label.shadow(t.shadow),this.shared=t.shared},destroy:function(){this.label&&(this.label=this.label.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(t,n,i,o){var r=this,a=r.now,s=r.options.animation!==!1&&!r.isHidden&&(Ae(t-a.x)>1||Ae(n-a.y)>1),l=r.followPointer||r.len>1;e(a,{x:s?(2*a.x+t)/3:t,y:s?(a.y+n)/2:n,anchorX:l?H:s?(2*a.anchorX+i)/3:i,anchorY:l?H:s?(a.anchorY+o)/2:o}),r.label.attr(a),s&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){r&&r.move(t,n,i,o)},32))},hide:function(e){
var t,n=this;clearTimeout(this.hideTimer),this.isHidden||(t=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){n.label.fadeOut(),n.isHidden=!0},p(e,this.options.hideDelay,500)),t&&ut(t,function(e){e.setState()}),this.chart.hoverPoints=null)},getAnchor:function(e,t){var n,i,o=this.chart,r=o.inverted,a=o.plotTop,s=0,l=0;return e=h(e),n=e[0].tooltipPos,this.followPointer&&t&&(t.chartX===H&&(t=o.pointer.normalize(t)),n=[t.chartX-o.plotLeft,t.chartY-a]),n||(ut(e,function(e){i=e.series.yAxis,s+=e.plotX,l+=(e.plotLow?(e.plotLow+e.plotHigh)/2:e.plotY)+(!r&&i?i.top-a:0)}),s/=e.length,l/=e.length,n=[r?o.plotWidth-l:s,this.shared&&!r&&e.length>1&&t?t.chartY-a:r?o.plotHeight-s:l]),gt(n,me)},getPosition:function(e,t,n){var i,o=this.chart,r=this.distance,a={},s=["y",o.chartHeight,t,n.plotY+o.plotTop],l=["x",o.chartWidth,e,n.plotX+o.plotLeft],d=n.ttBelow||o.inverted&&!n.negative||!o.inverted&&n.negative,c=function(e,t,n,i){var o=i-r>n,s=t>i+r+n,l=i-r-n,c=i+r;if(d&&s)a[e]=c;else if(!d&&o)a[e]=l;else if(o)a[e]=l;else{if(!s)return!1;a[e]=c}},u=function(e,t,n,i){return r>i||i>t-r?!1:void(n/2>i?a[e]=1:i>t-n/2?a[e]=t-n-2:a[e]=i-n/2)},h=function(e){var t=s;s=l,l=t,i=e},p=function(){c.apply(0,s)!==!1?u.apply(0,l)!==!1||i||(h(!0),p()):i?a.x=a.y=0:(h(!0),p())};return(o.inverted||this.len>1)&&h(),p(),a},defaultFormatter:function(e){var t,n=this.points||h(this),i=n[0].series;return t=[e.tooltipHeaderFormatter(n[0])],ut(n,function(e){i=e.series,t.push(i.tooltipFormatter&&i.tooltipFormatter(e)||e.point.tooltipFormatter(i.tooltipOptions.pointFormat))}),t.push(e.options.footerFormat||""),t.join("")},refresh:function(e,t){var n,i,o,r,a,s,l=this,d=l.chart,c=l.label,u=l.options,g={},f=[],m=u.formatter||l.defaultFormatter,v=d.hoverPoints,b=l.shared;clearTimeout(this.hideTimer),l.followPointer=h(e)[0].series.tooltipOptions.followPointer,o=l.getAnchor(e,t),n=o[0],i=o[1],!b||e.series&&e.series.noSharedTooltip?g=e.getLabelConfig():(d.hoverPoints=e,v&&ut(v,function(e){e.setState()}),ut(e,function(e){e.setState(nt),f.push(e.getLabelConfig())}),g={x:e[0].category,y:e[0].y},g.points=f,this.len=f.length,e=e[0]),r=m.call(g,l),s=e.series,this.distance=p(s.tooltipOptions.distance,16),r===!1?this.hide():(l.isHidden&&(wt(c),c.attr("opacity",1).show()),c.attr({text:r}),a=u.borderColor||e.color||s.color||"#606060",c.attr({stroke:a}),l.updatePosition({plotX:n,plotY:i,negative:e.negative,ttBelow:e.ttBelow}),this.isHidden=!1),vt(d,"tooltipRefresh",{text:r,x:n+d.plotLeft,y:i+d.plotTop,borderColor:a})},updatePosition:function(e){var t=this.chart,n=this.label,i=(this.options.positioner||this.getPosition).call(this,n.width,n.height,e);this.move(me(i.x),me(i.y),e.plotX+t.plotLeft,e.plotY+t.plotTop)},tooltipHeaderFormatter:function(e){var t,n=e.series,i=n.tooltipOptions,o=i.dateTimeLabelFormats,r=i.xDateFormat,s=n.xAxis,l=s&&"datetime"===s.options.type&&a(e.key),d=i.headerFormat,c=s&&s.closestPointRange;if(l&&!r){if(c){for(t in K)if(K[t]>=c||K[t]<=K.day&&e.key%K[t]>0){r=o[t];break}}else r=o.day;r=r||o.year}return l&&r&&(d=d.replace("{point.key}","{point.key:"+r+"}")),A(d,{point:e,series:n})}};var Ot;z=pe.documentElement.ontouchstart!==H;var Rt=he.Pointer=function(e,t){this.init(e,t)};if(Rt.prototype={init:function(e,t){var n,i,o=t.chart,r=o.events,a=Re?"":o.zoomType,s=e.inverted;this.options=t,this.chart=e,this.zoomX=n=/x/.test(a),this.zoomY=i=/y/.test(a),this.zoomHor=n&&!s||i&&s,this.zoomVert=i&&!s||n&&s,this.hasZoom=n||i,this.runChartClick=r&&!!r.click,this.pinchDown=[],this.lastValidTouch={},he.Tooltip&&t.tooltip.enabled&&(e.tooltip=new It(e,t.tooltip),this.followTouchMove=t.tooltip.followTouchMove),this.setDOMEvents()},normalize:function(t,n){var i,o,r;return t=t||window.event,t=bt(t),t.target||(t.target=t.srcElement),r=t.touches?t.touches.length?t.touches.item(0):t.changedTouches[0]:t,n||(this.chartPosition=n=pt(this.chart.container)),r.pageX===H?(i=ye(t.x,t.clientX-n.left),o=t.y):(i=r.pageX-n.left,o=r.pageY-n.top),e(t,{chartX:me(i),chartY:me(o)})},getCoordinates:function(e){var t={xAxis:[],yAxis:[]};return ut(this.chart.axes,function(n){t[n.isXAxis?"xAxis":"yAxis"].push({axis:n,value:n.toValue(e[n.horiz?"chartX":"chartY"])})}),t},getIndex:function(e){var t=this.chart;return t.inverted?t.plotHeight+t.plotTop-e.chartY:e.chartX-t.plotLeft},runPointActions:function(e){var t,n,i,o,r,a,s=this,l=s.chart,d=l.series,c=l.tooltip,u=l.hoverPoint,h=l.hoverSeries,g=l.chartWidth,f=s.getIndex(e);if(c&&s.options.tooltip.shared&&(!h||!h.noSharedTooltip)){for(i=[],o=d.length,r=0;o>r;r++)d[r].visible&&d[r].options.enableMouseTracking!==!1&&!d[r].noSharedTooltip&&d[r].singularTooltips!==!0&&d[r].tooltipPoints.length&&(n=d[r].tooltipPoints[f],n&&n.series&&(n._dist=Ae(f-n.clientX),g=we(g,n._dist),i.push(n)));for(o=i.length;o--;)i[o]._dist>g&&i.splice(o,1);i.length&&i[0].clientX!==s.hoverX&&(c.refresh(i,e),s.hoverX=i[0].clientX)}t=h&&h.tooltipOptions.followPointer,h&&h.tracker&&!t?(n=h.tooltipPoints[f],n&&n!==u&&n.onMouseOver(e)):c&&t&&!c.isHidden&&(a=c.getAnchor([{}],e),c.updatePosition({plotX:a[0],plotY:a[1]})),c&&!s._onDocumentMouseMove&&(s._onDocumentMouseMove=function(e){Ue[Ot]&&Ue[Ot].pointer.onDocumentMouseMove(e)},ft(pe,"mousemove",s._onDocumentMouseMove)),ut(l.axes,function(t){t.drawCrosshair(e,p(n,u))})},reset:function(e,t){var n=this,i=n.chart,o=i.hoverSeries,r=i.hoverPoint,a=i.tooltip,s=a&&a.shared?i.hoverPoints:r;e=e&&a&&s,e&&h(s)[0].plotX===H&&(e=!1),e?(a.refresh(s),r&&r.setState(r.state,!0)):(r&&r.onMouseOut(),o&&o.onMouseOut(),a&&a.hide(t),n._onDocumentMouseMove&&(mt(pe,"mousemove",n._onDocumentMouseMove),n._onDocumentMouseMove=null),ut(i.axes,function(e){e.hideCrosshair()}),n.hoverX=null)},scaleGroups:function(e,t){var n,i=this.chart;ut(i.series,function(o){n=e||o.getPlotBox(),o.xAxis&&o.xAxis.zoomEnabled&&(o.group.attr(n),o.markerGroup&&(o.markerGroup.attr(n),o.markerGroup.clip(t?i.clipRect:null)),o.dataLabelsGroup&&o.dataLabelsGroup.attr(n))}),i.clipRect.attr(t||i.clipBox)},dragStart:function(e){var t=this.chart;t.mouseIsDown=e.type,t.cancelClick=!1,t.mouseDownX=this.mouseDownX=e.chartX,t.mouseDownY=this.mouseDownY=e.chartY},drag:function(e){var t,n,i=this.chart,o=i.options.chart,r=e.chartX,a=e.chartY,s=this.zoomHor,l=this.zoomVert,d=i.plotLeft,c=i.plotTop,u=i.plotWidth,h=i.plotHeight,p=this.mouseDownX,g=this.mouseDownY,f=o.panKey&&e[o.panKey+"Key"];d>r?r=d:r>d+u&&(r=d+u),c>a?a=c:a>c+h&&(a=c+h),this.hasDragged=Math.sqrt(Math.pow(p-r,2)+Math.pow(g-a,2)),this.hasDragged>10&&(t=i.isInsidePlot(p-d,g-c),i.hasCartesianSeries&&(this.zoomX||this.zoomY)&&t&&!f&&(this.selectionMarker||(this.selectionMarker=i.renderer.rect(d,c,s?1:u,l?1:h,0).attr({fill:o.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add())),this.selectionMarker&&s&&(n=r-p,this.selectionMarker.attr({width:Ae(n),x:(n>0?0:n)+p})),this.selectionMarker&&l&&(n=a-g,this.selectionMarker.attr({height:Ae(n),y:(n>0?0:n)+g})),t&&!this.selectionMarker&&o.panning&&i.pan(e,o.panning))},drop:function(t){var n=this.chart,i=this.hasPinched;if(this.selectionMarker){var o,r={xAxis:[],yAxis:[],originalEvent:t.originalEvent||t},a=this.selectionMarker,s=a.attr?a.attr("x"):a.x,l=a.attr?a.attr("y"):a.y,d=a.attr?a.attr("width"):a.width,c=a.attr?a.attr("height"):a.height;(this.hasDragged||i)&&(ut(n.axes,function(e){if(e.zoomEnabled){var n=e.horiz,i="touchend"===t.type?e.minPixelPadding:0,a=e.toValue((n?s:l)+i),u=e.toValue((n?s+d:l+c)-i);isNaN(a)||isNaN(u)||(r[e.coll].push({axis:e,min:we(a,u),max:ye(a,u)}),o=!0)}}),o&&vt(n,"selection",r,function(t){n.zoom(e(t,i?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),i&&this.scaleGroups()}n&&(g(n.container,{cursor:n._cursor}),n.cancelClick=this.hasDragged>10,n.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(e){e=this.normalize(e),e.preventDefault&&e.preventDefault(),this.dragStart(e)},onDocumentMouseUp:function(e){Ue[Ot]&&Ue[Ot].pointer.drop(e)},onDocumentMouseMove:function(e){var t=this.chart,n=this.chartPosition,i=t.hoverSeries;e=this.normalize(e,n),n&&i&&!this.inClass(e.target,"highcharts-tracker")&&!t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop)&&this.reset()},onContainerMouseLeave:function(){var e=Ue[Ot];e&&(e.pointer.reset(),e.pointer.chartPosition=null)},onContainerMouseMove:function(e){var t=this.chart;Ot=t.index,e=this.normalize(e),e.returnValue=!1,"mousedown"===t.mouseIsDown&&this.drag(e),!this.inClass(e.target,"highcharts-tracker")&&!t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop)||t.openMenu||this.runPointActions(e)},inClass:function(e,t){for(var n;e;){if(n=u(e,"class")){if(-1!==n.indexOf(t))return!0;if(-1!==n.indexOf(We+"container"))return!1}e=e.parentNode}},onTrackerMouseOut:function(e){var t=this.chart.hoverSeries,n=e.relatedTarget||e.toElement,i=n&&n.point&&n.point.series;!t||t.options.stickyTracking||this.inClass(n,We+"tooltip")||i===t||t.onMouseOut()},onContainerClick:function(t){var n=this.chart,i=n.hoverPoint,o=n.plotLeft,r=n.plotTop;t=this.normalize(t),t.cancelBubble=!0,n.cancelClick||(i&&this.inClass(t.target,We+"tracker")?(vt(i.series,"click",e(t,{point:i})),n.hoverPoint&&i.firePointEvent("click",t)):(e(t,this.getCoordinates(t)),n.isInsidePlot(t.chartX-o,t.chartY-r)&&vt(n,"click",t)))},setDOMEvents:function(){var e=this,t=e.chart.container;t.onmousedown=function(t){e.onContainerMouseDown(t)},t.onmousemove=function(t){e.onContainerMouseMove(t)},t.onclick=function(t){e.onContainerClick(t)},ft(t,"mouseleave",e.onContainerMouseLeave),1===He&&ft(pe,"mouseup",e.onDocumentMouseUp),z&&(t.ontouchstart=function(t){e.onContainerTouchStart(t)},t.ontouchmove=function(t){e.onContainerTouchMove(t)},1===He&&ft(pe,"touchend",e.onDocumentTouchEnd))},destroy:function(){var e;mt(this.chart.container,"mouseleave",this.onContainerMouseLeave),He||(mt(pe,"mouseup",this.onDocumentMouseUp),mt(pe,"touchend",this.onDocumentTouchEnd)),clearInterval(this.tooltipTimeout);for(e in this)this[e]=null}},e(he.Pointer.prototype,{pinchTranslate:function(e,t,n,i,o,r){(this.zoomHor||this.pinchHor)&&this.pinchTranslateDirection(!0,e,t,n,i,o,r),(this.zoomVert||this.pinchVert)&&this.pinchTranslateDirection(!1,e,t,n,i,o,r)},pinchTranslateDirection:function(e,t,n,i,o,r,a,s){var l,d,c,u,h,p,g=this.chart,f=e?"x":"y",m=e?"X":"Y",v="chart"+m,b=e?"width":"height",y=g["plot"+(e?"Left":"Top")],w=s||1,A=g.inverted,N=g.bounds[e?"h":"v"],_=1===t.length,C=t[0][v],x=n[0][v],S=!_&&t[1][v],T=!_&&n[1][v],k=function(){!_&&Ae(C-S)>20&&(w=s||Ae(x-T)/Ae(C-S)),c=(y-x)/w+C,l=g["plot"+(e?"Width":"Height")]/w};k(),d=c,d<N.min?(d=N.min,u=!0):d+l>N.max&&(d=N.max-l,u=!0),u?(x-=.8*(x-a[f][0]),_||(T-=.8*(T-a[f][1])),k()):a[f]=[x,T],A||(r[f]=c-y,r[b]=l),p=A?e?"scaleY":"scaleX":"scale"+m,h=A?1/w:w,o[b]=l,o[f]=d,i[p]=w,i["translate"+m]=h*y+(x-h*C)},pinch:function(t){var n=this,i=n.chart,o=n.pinchDown,r=n.followTouchMove,a=t.touches,s=a.length,l=n.lastValidTouch,d=n.hasZoom,c=n.selectionMarker,u={},h=1===s&&(n.inClass(t.target,We+"tracker")&&i.runTrackerClick||n.runChartClick),g={};!d&&!r||h||t.preventDefault(),gt(a,function(e){return n.normalize(e)}),"touchstart"===t.type?(ut(a,function(e,t){o[t]={chartX:e.chartX,chartY:e.chartY}}),l.x=[o[0].chartX,o[1]&&o[1].chartX],l.y=[o[0].chartY,o[1]&&o[1].chartY],ut(i.axes,function(e){if(e.zoomEnabled){var t=i.bounds[e.horiz?"h":"v"],n=e.minPixelPadding,o=e.toPixels(p(e.options.min,e.dataMin)),r=e.toPixels(p(e.options.max,e.dataMax)),a=we(o,r),s=ye(o,r);t.min=we(e.pos,a-n),t.max=ye(e.pos+e.len,s+n)}}),n.res=!0):o.length&&(c||(n.selectionMarker=c=e({destroy:Le},i.plotBox)),n.pinchTranslate(o,a,u,c,g,l),n.hasPinched=d,n.scaleGroups(u,g),!d&&r&&1===s?this.runPointActions(n.normalize(t)):n.res&&(n.res=!1,this.reset(!1,0)))},onContainerTouchStart:function(e){var t=this.chart;Ot=t.index,1===e.touches.length?(e=this.normalize(e),t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop)?(this.runPointActions(e),this.pinch(e)):this.reset()):2===e.touches.length&&this.pinch(e)},onContainerTouchMove:function(e){(1===e.touches.length||2===e.touches.length)&&this.pinch(e)},onDocumentTouchEnd:function(e){Ue[Ot]&&Ue[Ot].pointer.drop(e)}}),ge.PointerEvent||ge.MSPointerEvent){var Ft={},Vt=!!ge.PointerEvent,Lt=function(){var e,t=[];t.item=function(e){return this[e]};for(e in Ft)Ft.hasOwnProperty(e)&&t.push({pageX:Ft[e].pageX,pageY:Ft[e].pageY,target:Ft[e].target});return t},Ut=function(e,t,n,i){var o;e=e.originalEvent||e,"touch"!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_TOUCH||!Ue[Ot]||(i(e),o=Ue[Ot].pointer,o[t]({type:n,target:e.currentTarget,preventDefault:Le,touches:Lt()}))};e(Rt.prototype,{onContainerPointerDown:function(e){Ut(e,"onContainerTouchStart","touchstart",function(e){Ft[e.pointerId]={pageX:e.pageX,pageY:e.pageY,target:e.currentTarget}})},onContainerPointerMove:function(e){Ut(e,"onContainerTouchMove","touchmove",function(e){Ft[e.pointerId]={pageX:e.pageX,pageY:e.pageY},Ft[e.pointerId].target||(Ft[e.pointerId].target=e.currentTarget)})},onDocumentPointerUp:function(e){Ut(e,"onContainerTouchEnd","touchend",function(e){delete Ft[e.pointerId]})},batchMSEvents:function(e){e(this.chart.container,Vt?"pointerdown":"MSPointerDown",this.onContainerPointerDown),e(this.chart.container,Vt?"pointermove":"MSPointerMove",this.onContainerPointerMove),e(pe,Vt?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),y(Rt.prototype,"init",function(e,t,n){e.call(this,t,n),(this.hasZoom||this.followTouchMove)&&g(t.container,{"-ms-touch-action":Je,"touch-action":Je})}),y(Rt.prototype,"setDOMEvents",function(e){e.apply(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(ft)}),y(Rt.prototype,"destroy",function(e){this.batchMSEvents(mt),e.call(this)})}var Ht=he.Legend=function(e,t){this.init(e,t)};Ht.prototype={init:function(e,n){var i=this,o=n.itemStyle,r=p(n.padding,8),a=n.itemMarginTop||0;this.options=n,n.enabled&&(i.itemStyle=o,i.itemHiddenStyle=t(o,n.itemHiddenStyle),i.itemMarginTop=a,i.padding=r,i.initialItemX=r,i.initialItemY=r-5,i.maxItemWidth=0,i.chart=e,i.itemHeight=0,i.lastLineHeight=0,i.symbolWidth=p(n.symbolWidth,16),i.pages=[],i.render(),ft(i.chart,"endResize",function(){i.positionCheckboxes()}))},colorizeItem:function(e,t){var n,i,o=this,r=o.options,a=e.legendItem,s=e.legendLine,l=e.legendSymbol,d=o.itemHiddenStyle.color,c=t?r.itemStyle.color:d,u=t?e.legendColor||e.color||"#CCC":d,h=e.options&&e.options.marker,p={fill:u};if(a&&a.css({fill:c,color:c}),s&&s.attr({stroke:u}),l){if(h&&l.isMarker){p.stroke=u,h=e.convertAttribs(h);for(n in h)i=h[n],i!==H&&(p[n]=i)}l.attr(p)}},positionItem:function(e){var t=this,n=t.options,i=n.symbolPadding,o=!n.rtl,r=e._legendItemPos,a=r[0],s=r[1],l=e.checkbox;e.legendGroup&&e.legendGroup.translate(o?a:t.legendWidth-a-2*i-4,s),l&&(l.x=a,l.y=s)},destroyItem:function(e){var t=e.checkbox;ut(["legendItem","legendLine","legendSymbol","legendGroup"],function(t){e[t]&&(e[t]=e[t].destroy())}),t&&k(e.checkbox)},destroy:function(){var e=this,t=e.group,n=e.box;n&&(e.box=n.destroy()),t&&(e.group=t.destroy())},positionCheckboxes:function(e){var t,n=this.group.alignAttr,i=this.clipHeight||this.legendHeight;n&&(t=n.translateY,ut(this.allItems,function(o){var r,a=o.checkbox;a&&(r=t+a.y+(e||0)+3,g(a,{left:n.translateX+o.checkboxOffset+a.x-20+Xe,top:r+Xe,display:r>t-6&&t+i-6>r?"":Je}))}))},renderTitle:function(){var e,t=this.options,n=this.padding,i=t.title,o=0;i.text&&(this.title||(this.title=this.chart.renderer.label(i.text,n-3,n-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(i.style).add(this.group)),e=this.title.getBBox(),o=e.height,this.offsetWidth=e.width,this.contentGroup.attr({translateY:o})),this.titleHeight=o},renderItem:function(e){var n,i,o,r=this,a=r.chart,s=a.renderer,l=r.options,d="horizontal"===l.layout,c=r.symbolWidth,u=l.symbolPadding,h=r.itemStyle,g=r.itemHiddenStyle,f=r.padding,m=d?p(l.itemDistance,20):0,v=!l.rtl,b=l.width,y=l.itemMarginBottom||0,w=r.itemMarginTop,N=r.initialItemX,_=e.legendItem,C=e.series&&e.series.drawLegendSymbol?e.series:e,x=C.options,S=r.createCheckboxForItem&&x&&x.showCheckbox,T=l.useHTML;_||(e.legendGroup=s.g("legend-item").attr({zIndex:1}).add(r.scrollGroup),e.legendItem=_=s.text(l.labelFormat?A(l.labelFormat,e):l.labelFormatter.call(e),v?c+u:-u,r.baseline||0,T).css(t(e.visible?h:g)).attr({align:v?"left":"right",zIndex:2}).add(e.legendGroup),r.baseline||(r.baseline=s.fontMetrics(h.fontSize,_).f+3+w,_.attr("y",r.baseline)),C.drawLegendSymbol(r,e),r.setItemEvents&&r.setItemEvents(e,_,T,h,g),r.colorizeItem(e,e.visible),S&&r.createCheckboxForItem(e)),i=_.getBBox(),o=e.checkboxOffset=l.itemWidth||e.legendItemWidth||c+u+i.width+m+(S?20:0),r.itemHeight=n=me(e.legendItemHeight||i.height),d&&r.itemX-N+o>(b||a.chartWidth-2*f-N-l.x)&&(r.itemX=N,r.itemY+=w+r.lastLineHeight+y,r.lastLineHeight=0),r.maxItemWidth=ye(r.maxItemWidth,o),r.lastItemY=w+r.itemY+y,r.lastLineHeight=ye(n,r.lastLineHeight),e._legendItemPos=[r.itemX,r.itemY],d?r.itemX+=o:(r.itemY+=w+n+y,r.lastLineHeight=n),r.offsetWidth=b||ye((d?r.itemX-N-m:o)+f,r.offsetWidth)},getAllItems:function(){var e=[];return ut(this.chart.series,function(t){var n=t.options;p(n.showInLegend,c(n.linkedTo)?!1:H,!0)&&(e=e.concat(t.legendItems||("point"===n.legendType?t.data:t)))}),e},render:function(){var t,n,i,o,r=this,a=r.chart,s=a.renderer,l=r.group,d=r.box,c=r.options,u=r.padding,h=c.borderWidth,p=c.backgroundColor;r.itemX=r.initialItemX,r.itemY=r.initialItemY,r.offsetWidth=0,r.lastItemY=0,l||(r.group=l=s.g("legend").attr({zIndex:7}).add(),r.contentGroup=s.g().attr({zIndex:1}).add(l),r.scrollGroup=s.g().add(r.contentGroup)),r.renderTitle(),t=r.getAllItems(),C(t,function(e,t){return(e.options&&e.options.legendIndex||0)-(t.options&&t.options.legendIndex||0)}),c.reversed&&t.reverse(),r.allItems=t,r.display=n=!!t.length,ut(t,function(e){r.renderItem(e)}),i=c.width||r.offsetWidth,o=r.lastItemY+r.lastLineHeight+r.titleHeight,o=r.handleOverflow(o),(h||p)&&(i+=u,o+=u,d?i>0&&o>0&&(d[d.isNew?"attr":"animate"](d.crisp({width:i,height:o})),d.isNew=!1):(r.box=d=s.rect(0,0,i,o,c.borderRadius,h||0).attr({stroke:c.borderColor,"stroke-width":h||0,fill:p||Je}).add(l).shadow(c.shadow),d.isNew=!0),d[n?"show":"hide"]()),r.legendWidth=i,r.legendHeight=o,ut(t,function(e){r.positionItem(e)}),n&&l.align(e({width:i,height:o},c),!0,"spacingBox"),a.isResizing||this.positionCheckboxes()},handleOverflow:function(e){var t,n,i=this,o=this.chart,r=o.renderer,a=this.options,s=a.y,l="top"===a.verticalAlign,d=o.spacingBox.height+(l?-s:s)-this.padding,c=a.maxHeight,u=this.clipRect,h=a.navigation,g=p(h.animation,!0),f=h.arrowSize||12,m=this.nav,v=this.pages,b=this.allItems;return"horizontal"===a.layout&&(d/=2),c&&(d=we(d,c)),v.length=0,e>d&&!a.useHTML?(this.clipHeight=t=ye(d-20-this.titleHeight-this.padding,0),this.currentPage=p(this.currentPage,1),this.fullHeight=e,ut(b,function(e,i){var o=e._legendItemPos[1],r=me(e.legendItem.getBBox().height),a=v.length;(!a||o-v[a-1]>t&&(n||o)!==v[a-1])&&(v.push(n||o),a++),i===b.length-1&&o+r-v[a-1]>t&&v.push(o),o!==n&&(n=o)}),u||(u=i.clipRect=r.clipRect(0,this.padding,9999,0),i.contentGroup.clip(u)),u.attr({height:t}),m||(this.nav=m=r.g().attr({zIndex:1}).add(this.group),this.up=r.symbol("triangle",0,0,f,f).on("click",function(){i.scroll(-1,g)}).add(m),this.pager=r.text("",15,10).css(h.style).add(m),this.down=r.symbol("triangle-down",0,0,f,f).on("click",function(){i.scroll(1,g)}).add(m)),i.scroll(0),e=d):m&&(u.attr({height:o.chartHeight}),m.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),e},scroll:function(e,t){var n,i=this.pages,o=i.length,r=this.currentPage+e,a=this.clipHeight,s=this.options.navigation,l=s.activeColor,d=s.inactiveColor,c=this.pager,u=this.padding;r>o&&(r=o),r>0&&(t!==H&&D(t,this.chart),this.nav.attr({translateX:u,translateY:a+this.padding+7+this.titleHeight,visibility:Ke}),this.up.attr({fill:1===r?d:l}).css({cursor:1===r?"default":"pointer"}),c.attr({text:r+"/"+o}),this.down.attr({x:18+this.pager.getBBox().width,fill:r===o?d:l}).css({cursor:r===o?"default":"pointer"}),n=-i[r-1]+this.initialItemY,this.scrollGroup.animate({translateY:n}),this.currentPage=r,this.positionCheckboxes(n))}};var Bt=he.LegendSymbolMixin={drawRectangle:function(e,t){var n=e.options.symbolHeight||12;t.legendSymbol=this.chart.renderer.rect(0,e.baseline-5-n/2,e.symbolWidth,n,e.options.symbolRadius||0).attr({zIndex:3}).add(t.legendGroup)},drawLineMarker:function(e){var t,n,i,o=this.options,r=o.marker,a=e.options,s=e.symbolWidth,l=this.chart.renderer,d=this.legendGroup,c=e.baseline-me(.3*l.fontMetrics(a.itemStyle.fontSize,this.legendItem).b);o.lineWidth&&(i={"stroke-width":o.lineWidth},o.dashStyle&&(i.dashstyle=o.dashStyle),this.legendLine=l.path([Ze,0,c,Qe,s,c]).attr(i).add(d)),r&&r.enabled!==!1&&(t=r.radius,this.legendSymbol=n=l.symbol(this.symbol,s/2-t,c-t,2*t,2*t).add(d),n.isMarker=!0)}};(/Trident\/7\.0/.test(Se)||Me)&&y(Ht.prototype,"positionItem",function(e,t){var n=this,i=function(){t._legendItemPos&&e.call(n,t)};i(),setTimeout(i)}),F.prototype={init:function(e,n){var i,o=e.series;e.series=null,i=t(G,e),i.series=e.series=o,this.userOptions=e;var r=i.chart;this.margin=this.splashArray("margin",r),this.spacing=this.splashArray("spacing",r);var a=r.events;this.bounds={h:{},v:{}},this.callback=n,this.isResizing=0,this.options=i,this.axes=[],this.series=[],this.hasCartesianSeries=r.showAxes;var s,l=this;if(l.index=Ue.length,Ue.push(l),He++,r.reflow!==!1&&ft(l,"load",function(){l.initReflow()}),a)for(s in a)ft(l,s,a[s]);l.xAxis=[],l.yAxis=[],l.animation=Re?!1:p(r.animation,!0),l.pointCount=l.colorCounter=l.symbolCounter=0,l.firstRender()},initSeries:function(e){var t,n=this,i=n.options.chart,o=e.type||i.type||i.defaultSeriesType,r=rt[o];return r||X(17,!0),t=new r,t.init(this,e),t},isInsidePlot:function(e,t,n){var i=n?t:e,o=n?e:t;return i>=0&&i<=this.plotWidth&&o>=0&&o<=this.plotHeight},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&ut(this.axes,function(e){e.adjustTickAmount()}),this.maxTicks=null},redraw:function(t){var n,i,o,r=this,a=r.axes,s=r.series,l=r.pointer,d=r.legend,c=r.isDirtyLegend,u=r.hasCartesianSeries,h=r.isDirtyBox,p=s.length,g=p,f=r.renderer,m=f.isHidden(),v=[];for(D(t,r),m&&r.cloneRenderTo(),r.layOutTitles();g--;)if(o=s[g],o.options.stacking&&(n=!0,o.isDirty)){i=!0;break}if(i)for(g=p;g--;)o=s[g],o.options.stacking&&(o.isDirty=!0);ut(s,function(e){e.isDirty&&"point"===e.options.legendType&&(c=!0)}),c&&d.options.enabled&&(d.render(),r.isDirtyLegend=!1),n&&r.getStacks(),u&&(r.isResizing||(r.maxTicks=null,ut(a,function(e){e.setScale()})),r.adjustTickAmounts()),r.getMargins(),u&&(ut(a,function(e){e.isDirty&&(h=!0)}),ut(a,function(t){t.isDirtyExtremes&&(t.isDirtyExtremes=!1,v.push(function(){vt(t,"afterSetExtremes",e(t.eventArgs,t.getExtremes())),delete t.eventArgs})),(h||n)&&t.redraw()})),h&&r.drawChartBox(),ut(s,function(e){e.isDirty&&e.visible&&(!e.isCartesian||e.xAxis)&&e.redraw()}),l&&l.reset(!0),f.draw(),vt(r,"redraw"),m&&r.cloneRenderTo(!0),ut(v,function(e){e.call()})},get:function(e){var t,n,i,o=this,r=o.axes,a=o.series;for(t=0;t<r.length;t++)if(r[t].options.id===e)return r[t];for(t=0;t<a.length;t++)if(a[t].options.id===e)return a[t];for(t=0;t<a.length;t++)for(i=a[t].points||[],n=0;n<i.length;n++)if(i[n].id===e)return i[n];return null},getAxes:function(){var e,t,n=this,i=this.options,o=i.xAxis=h(i.xAxis||{}),r=i.yAxis=h(i.yAxis||{});ut(o,function(e,t){e.index=t,e.isX=!0}),ut(r,function(e,t){e.index=t}),e=o.concat(r),ut(e,function(e){t=new R(n,e)}),n.adjustTickAmounts()},getSelectedPoints:function(){var e=[];return ut(this.series,function(t){e=e.concat(ht(t.points||[],function(e){return e.selected}))}),e},getSelectedSeries:function(){return ht(this.series,function(e){return e.selected})},getStacks:function(){var e=this;ut(e.yAxis,function(e){e.stacks&&e.hasVisibleSeries&&(e.oldStacks=e.stacks)}),ut(e.series,function(t){!t.options.stacking||t.visible!==!0&&e.options.chart.ignoreHiddenSeries!==!1||(t.stackKey=t.type+p(t.options.stack,""))})},setTitle:function(e,n,i){var o,r,a=this,s=a.options;o=s.title=t(s.title,e),r=s.subtitle=t(s.subtitle,n),ut([["title",e,o],["subtitle",n,r]],function(e){var t=e[0],n=a[t],i=e[1],o=e[2];n&&i&&(a[t]=n=n.destroy()),o&&o.text&&!n&&(a[t]=a.renderer.text(o.text,0,0,o.useHTML).attr({align:o.align,"class":We+t,zIndex:o.zIndex||4}).css(o.style).add())}),a.layOutTitles(i)},layOutTitles:function(t){var n,i=0,o=this.title,r=this.subtitle,a=this.options,s=a.title,l=a.subtitle,d=this.renderer,c=this.spacingBox.width-44;o&&(o.css({width:(s.width||c)+Xe}).align(e({y:d.fontMetrics(s.style.fontSize,o).b-3},s),!1,"spacingBox"),s.floating||s.verticalAlign||(i=o.getBBox().height)),r&&(r.css({width:(l.width||c)+Xe}).align(e({y:i+(s.margin-13)+d.fontMetrics(s.style.fontSize,r).b},l),!1,"spacingBox"),l.floating||l.verticalAlign||(i=be(i+r.getBBox().height))),n=this.titleOffset!==i,this.titleOffset=i,!this.isDirtyBox&&n&&(this.isDirtyBox=n,this.hasRendered&&p(t,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var e=this,t=e.options.chart,n=t.width,i=t.height,o=e.renderToClone||e.renderTo;c(n)||(e.containerWidth=lt(o,"width")),c(i)||(e.containerHeight=lt(o,"height")),e.chartWidth=ye(0,n||e.containerWidth||600),e.chartHeight=ye(0,p(i,e.containerHeight>19?e.containerHeight:400))},cloneRenderTo:function(e){var t=this.renderToClone,n=this.container;e?t&&(this.renderTo.appendChild(n),k(t),delete this.renderToClone):(n&&n.parentNode===this.renderTo&&this.renderTo.removeChild(n),this.renderToClone=t=this.renderTo.cloneNode(0),g(t,{position:Ge,top:"-9999px",display:"block"}),t.style.setProperty&&t.style.setProperty("display","block","important"),pe.body.appendChild(t),n&&t.appendChild(n))},getContainer:function(){var t,o,r,a,s,l,d=this,c=d.options.chart,h="data-highcharts-chart";d.renderTo=a=c.renderTo,l=We+Ve++,i(a)&&(d.renderTo=a=pe.getElementById(a)),a||X(13,!0),s=n(u(a,h)),!isNaN(s)&&Ue[s]&&Ue[s].hasRendered&&Ue[s].destroy(),u(a,h,d.index),a.innerHTML="",c.skipClone||a.offsetWidth||d.cloneRenderTo(),d.getChartSize(),o=d.chartWidth,r=d.chartHeight,d.container=t=f(Ye,{className:We+"container"+(c.className?" "+c.className:""),id:l},e({position:je,overflow:qe,width:o+Xe,height:r+Xe,textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},c.style),d.renderToClone||a),d._cursor=t.style.cursor,d.renderer=c.forExport?new kt(t,o,r,c.style,!0):new B(t,o,r,c.style),Re&&d.renderer.create(d,t,o,r)},getMargins:function(){var e,t=this,n=t.spacing,i=t.legend,o=t.margin,r=t.options.legend,a=p(r.margin,20),s=r.x,l=r.y,d=r.align,u=r.verticalAlign,h=t.titleOffset;t.resetMargins(),e=t.axisOffset,h&&!c(o[0])&&(t.plotTop=ye(t.plotTop,h+t.options.title.margin+n[0])),i.display&&!r.floating&&("right"===d?c(o[1])||(t.marginRight=ye(t.marginRight,i.legendWidth-s+a+n[1])):"left"===d?c(o[3])||(t.plotLeft=ye(t.plotLeft,i.legendWidth+s+a+n[3])):"top"===u?c(o[0])||(t.plotTop=ye(t.plotTop,i.legendHeight+l+a+n[0])):"bottom"===u&&(c(o[2])||(t.marginBottom=ye(t.marginBottom,i.legendHeight-l+a+n[2])))),t.extraBottomMargin&&(t.marginBottom+=t.extraBottomMargin),t.extraTopMargin&&(t.plotTop+=t.extraTopMargin),t.hasCartesianSeries&&ut(t.axes,function(e){e.getOffset()}),c(o[3])||(t.plotLeft+=e[3]),c(o[0])||(t.plotTop+=e[0]),c(o[2])||(t.marginBottom+=e[2]),c(o[1])||(t.marginRight+=e[1]),t.setChartSize()},reflow:function(e){var t=this,n=t.options.chart,i=t.renderTo,o=n.width||lt(i,"width"),r=n.height||lt(i,"height"),a=e?e.target:ge,s=function(){t.container&&(t.setSize(o,r,!1),t.hasUserSize=null)};t.hasUserSize||!o||!r||a!==ge&&a!==pe||((o!==t.containerWidth||r!==t.containerHeight)&&(clearTimeout(t.reflowTimeout),e?t.reflowTimeout=setTimeout(s,100):s()),t.containerWidth=o,t.containerHeight=r)},initReflow:function(){var e=this,t=function(t){e.reflow(t)};ft(ge,"resize",t),ft(e,"destroy",function(){mt(ge,"resize",t)})},setSize:function(e,t,n){var i,o,r,a=this;a.isResizing+=1,r=function(){a&&vt(a,"endResize",null,function(){a.isResizing-=1})},D(n,a),a.oldChartHeight=a.chartHeight,a.oldChartWidth=a.chartWidth,c(e)&&(a.chartWidth=i=ye(0,me(e)),a.hasUserSize=!!i),c(t)&&(a.chartHeight=o=ye(0,me(t))),(q?yt:g)(a.container,{width:i+Xe,height:o+Xe},q),a.setChartSize(!0),a.renderer.setSize(i,o,n),a.maxTicks=null,ut(a.axes,function(e){e.isDirty=!0,e.setScale()}),ut(a.series,function(e){e.isDirty=!0}),a.isDirtyLegend=!0,a.isDirtyBox=!0,a.layOutTitles(),a.getMargins(),a.redraw(n),a.oldChartHeight=null,vt(a,"resize"),q===!1?r():setTimeout(r,q&&q.duration||500)},setChartSize:function(e){var t,n,i,o,r,a,s,l=this,d=l.inverted,c=l.renderer,u=l.chartWidth,h=l.chartHeight,p=l.options.chart,g=l.spacing,f=l.clipOffset;l.plotLeft=i=me(l.plotLeft),l.plotTop=o=me(l.plotTop),l.plotWidth=r=ye(0,me(u-i-l.marginRight)),l.plotHeight=a=ye(0,me(h-o-l.marginBottom)),l.plotSizeX=d?a:r,l.plotSizeY=d?r:a,l.plotBorderWidth=p.plotBorderWidth||0,l.spacingBox=c.spacingBox={x:g[3],y:g[0],width:u-g[3]-g[1],height:h-g[0]-g[2]},l.plotBox=c.plotBox={x:i,y:o,width:r,height:a},s=2*ve(l.plotBorderWidth/2),t=be(ye(s,f[3])/2),n=be(ye(s,f[0])/2),l.clipBox={x:t,y:n,width:ve(l.plotSizeX-ye(s,f[1])/2-t),height:ye(0,ve(l.plotSizeY-ye(s,f[2])/2-n))},e||ut(l.axes,function(e){e.setAxisSize(),e.setAxisTranslation()})},resetMargins:function(){var e=this,t=e.spacing,n=e.margin;e.plotTop=p(n[0],t[0]),e.marginRight=p(n[1],t[1]),e.marginBottom=p(n[2],t[2]),e.plotLeft=p(n[3],t[3]),e.axisOffset=[0,0,0,0],e.clipOffset=[0,0,0,0]},drawChartBox:function(){var e,t,n=this,i=n.options.chart,o=n.renderer,r=n.chartWidth,a=n.chartHeight,s=n.chartBackground,l=n.plotBackground,d=n.plotBorder,c=n.plotBGImage,u=i.borderWidth||0,h=i.backgroundColor,p=i.plotBackgroundColor,g=i.plotBackgroundImage,f=i.plotBorderWidth||0,m=n.plotLeft,v=n.plotTop,b=n.plotWidth,y=n.plotHeight,w=n.plotBox,A=n.clipRect,N=n.clipBox;e=u+(i.shadow?8:0),(u||h)&&(s?s.animate(s.crisp({width:r-e,height:a-e})):(t={fill:h||Je},u&&(t.stroke=i.borderColor,t["stroke-width"]=u),n.chartBackground=o.rect(e/2,e/2,r-e,a-e,i.borderRadius,u).attr(t).addClass(We+"background").add().shadow(i.shadow))),p&&(l?l.animate(w):n.plotBackground=o.rect(m,v,b,y,0).attr({fill:p}).add().shadow(i.plotShadow)),g&&(c?c.animate(w):n.plotBGImage=o.image(g,m,v,b,y).add()),A?A.animate({width:N.width,height:N.height}):n.clipRect=o.clipRect(N),f&&(d?d.animate(d.crisp({x:m,y:v,width:b,height:y,strokeWidth:-f})):n.plotBorder=o.rect(m,v,b,y,0,-f).attr({stroke:i.plotBorderColor,"stroke-width":f,fill:Je,zIndex:1}).add()),n.isDirtyBox=!1},propFromSeries:function(){var e,t,n,i=this,o=i.options.chart,r=i.options.series;ut(["inverted","angular","polar"],function(a){for(e=rt[o.type||o.defaultSeriesType],n=i[a]||o[a]||e&&e.prototype[a],t=r&&r.length;!n&&t--;)e=rt[r[t].type],e&&e.prototype[a]&&(n=!0);i[a]=n})},linkSeries:function(){var e=this,t=e.series;ut(t,function(e){e.linkedSeries.length=0}),ut(t,function(t){var n=t.options.linkedTo;i(n)&&(n=":previous"===n?e.series[t.index-1]:e.get(n),n&&(n.linkedSeries.push(t),t.linkedParent=n))})},renderSeries:function(){ut(this.series,function(e){e.translate(),e.setTooltipPoints&&e.setTooltipPoints(),e.render()})},renderLabels:function(){var t=this,i=t.options.labels;i.items&&ut(i.items,function(o){var r=e(i.style,o.style),a=n(r.left)+t.plotLeft,s=n(r.top)+t.plotTop+12;delete r.left,delete r.top,t.renderer.text(o.html,a,s).attr({zIndex:2}).css(r).add()})},render:function(){var e=this,t=e.axes,n=e.renderer,i=e.options;e.setTitle(),e.legend=new Ht(e,i.legend),e.getStacks(),ut(t,function(e){e.setScale()}),e.getMargins(),e.maxTicks=null,ut(t,function(e){e.setTickPositions(!0),e.setMaxTicks()}),e.adjustTickAmounts(),e.getMargins(),e.drawChartBox(),e.hasCartesianSeries&&ut(t,function(e){e.render()}),e.seriesGroup||(e.seriesGroup=n.g("series-group").attr({zIndex:3}).add()),e.renderSeries(),e.renderLabels(),e.showCredits(i.credits),e.hasRendered=!0},showCredits:function(e){e.enabled&&!this.credits&&(this.credits=this.renderer.text(e.text,0,0).on("click",function(){e.href&&(location.href=e.href)}).attr({align:e.position.align,zIndex:8}).css(e.style).add().align(e.position))},destroy:function(){var e,t=this,n=t.axes,i=t.series,o=t.container,r=o&&o.parentNode;
for(vt(t,"destroy"),Ue[t.index]=H,He--,t.renderTo.removeAttribute("data-highcharts-chart"),mt(t),e=n.length;e--;)n[e]=n[e].destroy();for(e=i.length;e--;)i[e]=i[e].destroy();ut(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","scroller","rangeSelector","legend","resetZoomButton","tooltip","renderer"],function(e){var n=t[e];n&&n.destroy&&(t[e]=n.destroy())}),o&&(o.innerHTML="",mt(o),r&&k(o));for(e in t)delete t[e]},isReadyToRender:function(){var e=this;return!Ie&&ge==ge.top&&"complete"!==pe.readyState||Re&&!ge.canvg?(Re?Pt.push(function(){e.firstRender()},e.options.global.canvasToolsURL):pe.attachEvent("onreadystatechange",function(){pe.detachEvent("onreadystatechange",e.firstRender),"complete"===pe.readyState&&e.firstRender()}),!1):!0},firstRender:function(){var e=this,t=e.options,n=e.callback;e.isReadyToRender()&&(e.getContainer(),vt(e,"init"),e.resetMargins(),e.setChartSize(),e.propFromSeries(),e.getAxes(),ut(t.series||[],function(t){e.initSeries(t)}),e.linkSeries(),vt(e,"beforeRender"),he.Pointer&&(e.pointer=new Rt(e,t)),e.render(),e.renderer.draw(),n&&n.apply(e,[e]),ut(e.callbacks,function(t){t.apply(e,[e])}),e.cloneRenderTo(!0),vt(e,"load"))},splashArray:function(e,t){var n=t[e],i=o(n)?n:[n,n,n,n];return[p(t[e+"Top"],i[0]),p(t[e+"Right"],i[1]),p(t[e+"Bottom"],i[2]),p(t[e+"Left"],i[3])]}},F.prototype.callbacks=[];var zt=he.CenteredSeriesMixin={getCenter:function(){var e,t,i=this.options,o=this.chart,r=2*(i.slicedOffset||0),a=o.plotWidth-2*r,s=o.plotHeight-2*r,l=i.center,d=[p(l[0],"50%"),p(l[1],"50%"),i.size||"100%",i.innerSize||0],c=we(a,s);return gt(d,function(i,o){return t=/%$/.test(i),e=2>o||2===o&&t,(t?[a,s,c,c][o]*n(i)/100:i)+(e?r:0)})}},Yt=function(){};Yt.prototype={init:function(e,t,n){var i,o=this;return o.series=e,o.applyOptions(t,n),o.pointAttr={},e.options.colorByPoint&&(i=e.options.colors||e.chart.options.colors,o.color=o.color||i[e.colorCounter++],e.colorCounter===i.length&&(e.colorCounter=0)),e.chart.pointCount++,o},applyOptions:function(t,n){var i=this,o=i.series,r=o.options.pointValKey||o.pointValKey;return t=Yt.prototype.optionsToObject.call(this,t),e(i,t),i.options=i.options?e(i.options,t):t,r&&(i.y=i[r]),i.x===H&&o&&(i.x=n===H?o.autoIncrement():n),i},optionsToObject:function(e){var t,n={},i=this.series,o=i.pointArrayMap||["y"],a=o.length,s=0,l=0;if("number"==typeof e||null===e)n[o[0]]=e;else if(r(e))for(e.length>a&&(t=typeof e[0],"string"===t?n.name=e[0]:"number"===t&&(n.x=e[0]),s++);a>l;)n[o[l++]]=e[s++];else"object"==typeof e&&(n=e,e.dataLabels&&(i._hasPointLabels=!0),e.marker&&(i._hasPointMarkers=!0));return n},destroy:function(){var e,t=this,n=t.series,i=n.chart,o=i.hoverPoints;i.pointCount--,o&&(t.setState(),d(o,t),o.length||(i.hoverPoints=null)),t===i.hoverPoint&&t.onMouseOut(),(t.graphic||t.dataLabel)&&(mt(t),t.destroyElements()),t.legendItem&&i.legend.destroyItem(t);for(e in t)t[e]=null},destroyElements:function(){for(var e,t=this,n=["graphic","dataLabel","dataLabelUpper","group","connector","shadowGroup"],i=6;i--;)e=n[i],t[e]&&(t[e]=t[e].destroy())},getLabelConfig:function(){var e=this;return{x:e.category,y:e.y,key:e.name||e.category,series:e.series,point:e,percentage:e.percentage,total:e.total||e.stackTotal}},tooltipFormatter:function(e){var t=this.series,n=t.tooltipOptions,i=p(n.valueDecimals,""),o=n.valuePrefix||"",r=n.valueSuffix||"";return ut(t.pointArrayMap||["y"],function(t){t="{point."+t,(o||r)&&(e=e.replace(t+"}",o+t+"}"+r)),e=e.replace(t+"}",t+":,."+i+"f}")}),A(e,{point:this,series:this.series})},firePointEvent:function(e,t,n){var i=this,o=this.series,r=o.options;(r.point.events[e]||i.options&&i.options.events&&i.options.events[e])&&this.importEvents(),"click"===e&&r.allowPointSelect&&(n=function(e){i.select(null,e.ctrlKey||e.metaKey||e.shiftKey)}),vt(this,e,t,n)}};var Gt=function(){};Gt.prototype={isCartesian:!0,type:"line",pointClass:Yt,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(t,n){var i,o,r=this,a=t.series,s=function(e,t){return p(e.options.index,e._i)-p(t.options.index,t._i)};r.chart=t,r.options=n=r.setOptions(n),r.linkedSeries=[],r.bindAxes(),e(r,{name:n.name,state:tt,pointAttr:{},visible:n.visible!==!1,selected:n.selected===!0}),Re&&(n.animation=!1),o=n.events;for(i in o)ft(r,i,o[i]);(o&&o.click||n.point&&n.point.events&&n.point.events.click||n.allowPointSelect)&&(t.runTrackerClick=!0),r.getColor(),r.getSymbol(),ut(r.parallelArrays,function(e){r[e+"Data"]=[]}),r.setData(n.data,!1),r.isCartesian&&(t.hasCartesianSeries=!0),a.push(r),r._i=a.length-1,C(a,s),this.yAxis&&C(this.yAxis.series,s),ut(a,function(e,t){e.index=t,e.name=e.name||"Series "+(t+1)})},bindAxes:function(){var e,t=this,n=t.options,i=t.chart;ut(t.axisTypes||[],function(o){ut(i[o],function(i){e=i.options,(n[o]===e.index||n[o]!==H&&n[o]===e.id||n[o]===H&&0===e.index)&&(i.series.push(t),t[o]=i,i.isDirty=!0)}),t[o]||t.optionalAxis===o||X(18,!0)})},updateParallelArrays:function(e,t){var n=e.series,i=arguments,o="number"==typeof t?function(i){var o="y"===i&&n.toYData?n.toYData(e):e[i];n[i+"Data"][t]=o}:function(e){Array.prototype[t].apply(n[e+"Data"],Array.prototype.slice.call(i,2))};ut(n.parallelArrays,o)},autoIncrement:function(){var e=this,t=e.options,n=e.xIncrement;return n=p(n,t.pointStart,0),e.pointInterval=p(e.pointInterval,t.pointInterval,1),e.xIncrement=n+e.pointInterval,n},getSegments:function(){var e,t=this,n=-1,i=[],o=t.points,r=o.length;if(r)if(t.options.connectNulls){for(e=r;e--;)null===o[e].y&&o.splice(e,1);o.length&&(i=[o])}else ut(o,function(e,t){null===e.y?(t>n+1&&i.push(o.slice(n+1,t)),n=t):t===r-1&&i.push(o.slice(n+1,t+1))});t.segments=i},setOptions:function(e){var n,i=this.chart,o=i.options,r=o.plotOptions,a=i.userOptions||{},s=a.plotOptions||{},l=r[this.type];return this.userOptions=e,n=t(l,r.series,e),this.tooltipOptions=t(G.tooltip,G.plotOptions[this.type].tooltip,a.tooltip,s.series&&s.series.tooltip,s[this.type]&&s[this.type].tooltip,e.tooltip),null===l.marker&&delete n.marker,n},getCyclic:function(e,t,n){var i,o=this.userOptions,r="_"+e+"Index",a=e+"Counter";t||(c(o[r])?i=o[r]:(o[r]=i=this.chart[a]%n.length,this.chart[a]+=1),t=n[i]),this[e]=t},getColor:function(){this.options.colorByPoint||this.getCyclic("color",this.options.color||Nt[this.type].color,this.chart.options.colors)},getSymbol:function(){var e=this.options.marker;this.getCyclic("symbol",e.symbol,this.chart.options.symbols),/^url/.test(this.symbol)&&(e.radius=0)},drawLegendSymbol:Bt.drawLineMarker,setData:function(e,t,n,o){var s,l,d,c=this,u=c.points,h=u&&u.length||0,g=c.options,f=c.chart,m=null,v=c.xAxis,b=v&&!!v.categories,y=c.tooltipPoints,w=g.turboThreshold,A=this.xData,N=this.yData,_=c.pointArrayMap,C=_&&_.length;if(e=e||[],s=e.length,t=p(t,!0),o===!1||!s||h!==s||c.cropped||c.hasGroupedData){if(c.xIncrement=null,c.pointRange=b?1:g.pointRange,c.colorCounter=0,ut(this.parallelArrays,function(e){c[e+"Data"].length=0}),w&&s>w){for(l=0;null===m&&s>l;)m=e[l],l++;if(a(m)){var x=p(g.pointStart,0),S=p(g.pointInterval,1);for(l=0;s>l;l++)A[l]=x,N[l]=e[l],x+=S;c.xIncrement=x}else if(r(m))if(C)for(l=0;s>l;l++)d=e[l],A[l]=d[0],N[l]=d.slice(1,C+1);else for(l=0;s>l;l++)d=e[l],A[l]=d[0],N[l]=d[1];else X(12)}else for(l=0;s>l;l++)e[l]!==H&&(d={series:c},c.pointClass.prototype.applyOptions.apply(d,[e[l]]),c.updateParallelArrays(d,l),b&&d.name&&(v.names[d.x]=d.name));for(i(N[0])&&X(14,!0),c.data=[],c.options.data=e,l=h;l--;)u[l]&&u[l].destroy&&u[l].destroy();y&&(y.length=0),v&&(v.minRange=v.userMinRange),c.isDirty=c.isDirtyData=f.isDirtyBox=!0,n=!1}else ut(e,function(e,t){u[t].update(e,!1,null,!1)});t&&f.redraw(n)},processData:function(e){var t,n,i,o,r,a,s,l,d=this,c=d.xData,u=d.yData,h=c.length,p=0,g=d.xAxis,f=d.options,m=f.cropThreshold,v=0,b=d.isCartesian;if(b&&!d.isDirty&&!g.isDirty&&!d.yAxis.isDirty&&!e)return!1;for(g&&(a=g.getExtremes(),s=a.min,l=a.max),b&&d.sorted&&(!m||h>m||d.forceCrop)&&(c[h-1]<s||c[0]>l?(c=[],u=[]):(c[0]<s||c[h-1]>l)&&(t=this.cropData(d.xData,d.yData,s,l),c=t.xData,u=t.yData,p=t.start,n=!0,v=c.length)),r=c.length-1;r>=0;r--)i=c[r]-c[r-1],!n&&c[r]>s&&c[r]<l&&v++,i>0&&(o===H||o>i)?o=i:0>i&&d.requireSorting&&X(15);d.cropped=n,d.cropStart=p,d.processedXData=c,d.processedYData=u,d.activePointCount=v,null===f.pointRange&&(d.pointRange=o||1),d.closestPointRange=o},cropData:function(e,t,n,i){var o,r=e.length,a=0,s=r,l=p(this.cropShoulder,1);for(o=0;r>o;o++)if(e[o]>=n){a=ye(0,o-l);break}for(;r>o;o++)if(e[o]>i){s=o+l;break}return{xData:e.slice(a,s),yData:t.slice(a,s),start:a,end:s}},generatePoints:function(){var e,t,n,i,o=this,r=o.options,a=r.data,s=o.data,l=o.processedXData,d=o.processedYData,c=o.pointClass,u=l.length,p=o.cropStart||0,g=o.hasGroupedData,f=[];if(!s&&!g){var m=[];m.length=a.length,s=o.data=m}for(i=0;u>i;i++)t=p+i,g?f[i]=(new c).init(o,[l[i]].concat(h(d[i]))):(s[t]?n=s[t]:a[t]!==H&&(s[t]=n=(new c).init(o,a[t],l[i])),f[i]=n),f[i].index=t;if(s&&(u!==(e=s.length)||g))for(i=0;e>i;i++)i!==p||g||(i+=u),s[i]&&(s[i].destroyElements(),s[i].plotX=H);o.data=s,o.points=f},getExtremes:function(e){var t,n,i,o,r,a,s,l,d,c=this.xAxis,u=this.yAxis,h=this.processedXData,g=[],f=0,m=c.getExtremes(),v=m.min,b=m.max;for(e=e||this.stackedYData||this.processedYData,t=e.length,l=0;t>l;l++)if(a=h[l],s=e[l],n=null!==s&&s!==H&&(!u.isLog||s.length||s>0),i=this.getExtremesFromAll||this.cropped||(h[l+1]||a)>=v&&(h[l-1]||a)<=b,n&&i)if(d=s.length)for(;d--;)null!==s[d]&&(g[f++]=s[d]);else g[f++]=s;this.dataMin=p(o,x(g)),this.dataMax=p(r,S(g))},translate:function(){this.processedXData||this.processData(),this.generatePoints();var e,t=this,n=t.options,i=n.stacking,o=t.xAxis,r=o.categories,s=t.yAxis,l=t.points,d=l.length,u=!!t.modifyValue,h=n.pointPlacement,g="between"===h||a(h),f=n.threshold;for(e=0;d>e;e++){var m,v,b=l[e],y=b.x,w=b.y,A=b.low,N=i&&s.stacks[(t.negStacks&&f>w?"-":"")+t.stackKey];s.isLog&&0>=w&&(b.y=w=null,X(10)),b.plotX=o.translate(y,0,0,0,1,h,"flags"===this.type),i&&t.visible&&N&&N[y]&&(m=N[y],v=m.points[t.index+","+e],A=v[0],w=v[1],0===A&&(A=p(f,s.min)),s.isLog&&0>=A&&(A=null),b.total=b.stackTotal=m.total,b.percentage=m.total&&b.y/m.total*100,b.stackY=w,m.setOffset(t.pointXOffset||0,t.barW||0)),b.yBottom=c(A)?s.translate(A,0,1,0,1):null,u&&(w=t.modifyValue(w,b)),b.plotY="number"==typeof w&&w!==1/0?s.translate(w,0,1,0,1):H,b.clientX=g?o.translate(y,0,0,0,1):b.plotX,b.negative=b.y<(f||0),b.category=r&&r[b.x]!==H?r[b.x]:b.x}t.getSegments()},animate:function(t){var n,i,r,a=this,s=a.chart,l=s.renderer,d=a.options.animation,c=a.clipBox||s.clipBox,u=s.inverted;d&&!o(d)&&(d=Nt[a.type].animation),r=["_sharedClip",d.duration,d.easing,c.height].join(","),t?(n=s[r],i=s[r+"m"],n||(s[r]=n=l.clipRect(e(c,{width:0})),s[r+"m"]=i=l.clipRect(-99,u?-s.plotLeft:-s.plotTop,99,u?s.chartWidth:s.chartHeight)),a.group.clip(n),a.markerGroup.clip(i),a.sharedClipKey=r):(n=s[r],n&&n.animate({width:s.plotSizeX},d),s[r+"m"]&&s[r+"m"].animate({width:s.plotSizeX+99},d),a.animate=null)},afterAnimate:function(){var e=this.chart,t=this.sharedClipKey,n=this.group,i=this.clipBox;n&&this.options.clip!==!1&&(t&&i||n.clip(i?e.renderer.clipRect(i):e.clipRect),this.markerGroup.clip()),vt(this,"afterAnimate"),setTimeout(function(){t&&e[t]&&(i||(e[t]=e[t].destroy()),e[t+"m"]&&(e[t+"m"]=e[t+"m"].destroy()))},100)},drawPoints:function(){var t,n,i,o,r,a,s,l,d,c,u,h,g,f=this,m=f.points,v=f.chart,b=f.options,y=b.marker,w=f.pointAttr[""],A=f.markerGroup,N=p(y.enabled,!f.requireSorting||f.activePointCount<.5*f.xAxis.len/y.radius);if(y.enabled!==!1||f._hasPointMarkers)for(o=m.length;o--;)r=m[o],n=ve(r.plotX),i=r.plotY,d=r.graphic,c=r.marker||{},u=!!r.marker,h=N&&c.enabled===H||c.enabled,g=v.isInsidePlot(me(n),i,v.inverted),h&&i!==H&&!isNaN(i)&&null!==r.y?(t=r.pointAttr[r.selected?it:tt]||w,a=t.r,s=p(c.symbol,f.symbol),l=0===s.indexOf("url"),d?d[g?"show":"hide"](!0).animate(e({x:n-a,y:i-a},d.symbolName?{width:2*a,height:2*a}:{})):g&&(a>0||l)&&(r.graphic=d=v.renderer.symbol(s,n-a,i-a,2*a,2*a,u?c:y).attr(t).add(A))):d&&(r.graphic=d.destroy())},convertAttribs:function(e,t,n,i){var o,r,a=this.pointAttrToOptions,s={};e=e||{},t=t||{},n=n||{},i=i||{};for(o in a)r=a[o],s[o]=p(e[r],t[o],n[o],i[o]);return s},getAttribs:function(){var t,n,i,o,r,a,s=this,l=s.options,d=Nt[s.type].marker?l.marker:l,u=d.states,h=u[nt],p=s.color,g={stroke:p,fill:p},f=s.points||[],m=[],v=s.pointAttrToOptions,b=s.hasPointSpecificOptions,y=l.negativeColor,w=d.lineColor,A=d.fillColor,N=l.turboThreshold;if(l.marker?(h.radius=h.radius||d.radius+h.radiusPlus,h.lineWidth=h.lineWidth||d.lineWidth+h.lineWidthPlus):h.color=h.color||Tt(h.color||p).brighten(h.brightness).get(),m[tt]=s.convertAttribs(d,g),ut([nt,it],function(e){m[e]=s.convertAttribs(u[e],m[tt])}),s.pointAttr=m,n=f.length,!N||N>n||b)for(;n--;){if(i=f[n],d=i.options&&i.options.marker||i.options,d&&d.enabled===!1&&(d.radius=0),i.negative&&y&&(i.color=i.fillColor=y),b=l.colorByPoint||i.color,i.options)for(a in v)c(d[v[a]])&&(b=!0);b?(d=d||{},o=[],u=d.states||{},t=u[nt]=u[nt]||{},l.marker||(t.color=t.color||!i.options.color&&h.color||Tt(i.color).brighten(t.brightness||h.brightness).get()),r={color:i.color},A||(r.fillColor=i.color),w||(r.lineColor=i.color),o[tt]=s.convertAttribs(e(r,d),m[tt]),o[nt]=s.convertAttribs(u[nt],m[nt],o[tt]),o[it]=s.convertAttribs(u[it],m[it],o[tt])):o=m,i.pointAttr=o}},destroy:function(){var e,t,n,i,o,r=this,a=r.chart,s=/AppleWebKit\/533/.test(Se),l=r.data||[];for(vt(r,"destroy"),mt(r),ut(r.axisTypes||[],function(e){o=r[e],o&&(d(o.series,r),o.isDirty=o.forceRedraw=!0)}),r.legendItem&&r.chart.legend.destroyItem(r),t=l.length;t--;)n=l[t],n&&n.destroy&&n.destroy();r.points=null,clearTimeout(r.animationTimeout),ut(["area","graph","dataLabelsGroup","group","markerGroup","tracker","graphNeg","areaNeg","posClip","negClip"],function(t){r[t]&&(e=s&&"group"===t?"hide":"destroy",r[t][e]())}),a.hoverSeries===r&&(a.hoverSeries=null),d(a.series,r);for(i in r)delete r[i]},getSegmentPath:function(e){var t=this,n=[],i=t.options.step;return ut(e,function(o,r){var a,s=o.plotX,l=o.plotY;t.getPointSpline?n.push.apply(n,t.getPointSpline(e,o,r)):(n.push(r?Qe:Ze),i&&r&&(a=e[r-1],"right"===i?n.push(a.plotX,l):"center"===i?n.push((a.plotX+s)/2,a.plotY,(a.plotX+s)/2,l):n.push(s,a.plotY)),n.push(o.plotX,o.plotY))}),n},getGraphPath:function(){var e,t=this,n=[],i=[];return ut(t.segments,function(o){e=t.getSegmentPath(o),o.length>1?n=n.concat(e):i.push(o[0])}),t.singlePoints=i,t.graphPath=n,n},drawGraph:function(){var e=this,t=this.options,n=[["graph",t.lineColor||this.color]],i=t.lineWidth,o=t.dashStyle,r="square"!==t.linecap,a=this.getGraphPath(),s=t.negativeColor;s&&n.push(["graphNeg",s]),ut(n,function(n,s){var l,d=n[0],c=e[d];c?(wt(c),c.animate({d:a})):i&&a.length&&(l={stroke:n[1],"stroke-width":i,fill:Je,zIndex:1},o?l.dashstyle=o:r&&(l["stroke-linecap"]=l["stroke-linejoin"]="round"),e[d]=e.chart.renderer.path(a).attr(l).add(e.group).shadow(!s&&t.shadow))})},clipNeg:function(){var e,t,n,i,o,r=this.options,a=this.chart,s=a.renderer,l=r.negativeColor||r.negativeFillColor,d=this.graph,c=this.area,u=this.posClip,h=this.negClip,p=a.chartWidth,g=a.chartHeight,f=ye(p,g),m=this.yAxis;l&&(d||c)&&(e=me(m.toPixels(r.threshold||0,!0)),0>e&&(f-=e),i={x:0,y:0,width:f,height:e},o={x:0,y:e,width:f,height:f},a.inverted&&(i.height=o.y=a.plotWidth-e,s.isVML&&(i={x:a.plotWidth-e-a.plotLeft,y:0,width:p,height:g},o={x:e+a.plotLeft-p,y:0,width:a.plotLeft+e,height:p})),m.reversed?(t=o,n=i):(t=i,n=o),u?(u.animate(t),h.animate(n)):(this.posClip=u=s.clipRect(t),this.negClip=h=s.clipRect(n),d&&this.graphNeg&&(d.clip(u),this.graphNeg.clip(h)),c&&(c.clip(u),this.areaNeg.clip(h))))},invertGroups:function(){function e(){var e={width:t.yAxis.len,height:t.xAxis.len};ut(["group","markerGroup"],function(n){t[n]&&t[n].attr(e).invert()})}var t=this,n=t.chart;t.xAxis&&(ft(n,"resize",e),ft(t,"destroy",function(){mt(n,"resize",e)}),e(),t.invertGroups=e)},plotGroup:function(e,t,n,i,o){var r=this[e],a=!r;return a&&(this[e]=r=this.chart.renderer.g(t).attr({visibility:n,zIndex:i||.1}).add(o)),r[a?"attr":"animate"](this.getPlotBox()),r},getPlotBox:function(){var e=this.chart,t=this.xAxis,n=this.yAxis;return e.inverted&&(t=n,n=this.xAxis),{translateX:t?t.left:e.plotLeft,translateY:n?n.top:e.plotTop,scaleX:1,scaleY:1}},render:function(){var e,t=this,n=t.chart,i=t.options,o=i.animation,r=o&&!!t.animate&&n.renderer.isSVG&&p(o.duration,500)||0,a=t.visible?Ke:qe,s=i.zIndex,l=t.hasRendered,d=n.seriesGroup;e=t.plotGroup("group","series",a,s,d),t.markerGroup=t.plotGroup("markerGroup","markers",a,s,d),r&&t.animate(!0),t.getAttribs(),e.inverted=t.isCartesian?n.inverted:!1,t.drawGraph&&(t.drawGraph(),t.clipNeg()),ut(t.points,function(e){e.redraw&&e.redraw()}),t.drawDataLabels&&t.drawDataLabels(),t.visible&&t.drawPoints(),t.drawTracker&&t.options.enableMouseTracking!==!1&&t.drawTracker(),n.inverted&&t.invertGroups(),i.clip===!1||t.sharedClipKey||l||e.clip(n.clipRect),r&&t.animate(),l||(r?t.animationTimeout=setTimeout(function(){t.afterAnimate()},r):t.afterAnimate()),t.isDirty=t.isDirtyData=!1,t.hasRendered=!0},redraw:function(){var e=this,t=e.chart,n=e.isDirtyData,i=e.group,o=e.xAxis,r=e.yAxis;i&&(t.inverted&&i.attr({width:t.plotWidth,height:t.plotHeight}),i.animate({translateX:p(o&&o.left,t.plotLeft),translateY:p(r&&r.top,t.plotTop)})),e.translate(),e.setTooltipPoints&&e.setTooltipPoints(!0),e.render(),n&&vt(e,"updatedData")}},V.prototype={destroy:function(){T(this,this.axis)},render:function(e){var t=this.options,n=t.format,i=n?A(n,this):t.formatter.call(this);this.label?this.label.attr({text:i,visibility:qe}):this.label=this.axis.chart.renderer.text(i,null,null,t.useHTML).css(t.style).attr({align:this.textAlign,rotation:t.rotation,visibility:qe}).add(e)},setOffset:function(e,t){var n,i=this,o=i.axis,r=o.chart,a=r.inverted,s=this.isNegative,l=o.translate(o.usePercentage?100:this.total,0,0,0,1),d=o.translate(0),c=Ae(l-d),u=r.xAxis[0].translate(this.x)+e,h=r.plotHeight,p={x:a?s?l:l-c:u,y:a?h-u-t:s?h-l-c:h-l,width:a?c:t,height:a?t:c},g=this.label;g&&(g.align(this.alignOptions,null,p),n=g.alignAttr,g[this.options.crop===!1||r.isInsidePlot(n.x,n.y)?"show":"hide"](!0))}},R.prototype.buildStacks=function(){var e=this.series,t=p(this.options.reversedStacks,!0),n=e.length;if(!this.isXAxis){for(this.usePercentage=!1;n--;)e[t?n:e.length-n-1].setStackedPoints();if(this.usePercentage)for(n=0;n<e.length;n++)e[n].setPercentStacks()}},R.prototype.renderStackTotals=function(){var e,t,n,i=this,o=i.chart,r=o.renderer,a=i.stacks,s=i.stackTotalGroup;s||(i.stackTotalGroup=s=r.g("stack-labels").attr({visibility:Ke,zIndex:6}).add()),s.translate(o.plotLeft,o.plotTop);for(e in a){t=a[e];for(n in t)t[n].render(s)}},Gt.prototype.setStackedPoints=function(){if(this.options.stacking&&(this.visible===!0||this.chart.options.chart.ignoreHiddenSeries===!1)){var e,t,n,i,o,r,a,s,l=this,d=l.processedXData,c=l.processedYData,u=[],h=c.length,p=l.options,g=p.threshold,f=p.stack,m=p.stacking,v=l.stackKey,b="-"+v,y=l.negStacks,w=l.yAxis,A=w.stacks,N=w.oldStacks;for(r=0;h>r;r++)a=d[r],s=c[r],o=l.index+","+r,e=y&&g>s,i=e?b:v,A[i]||(A[i]={}),A[i][a]||(N[i]&&N[i][a]?(A[i][a]=N[i][a],A[i][a].total=null):A[i][a]=new V(w,w.options.stackLabels,e,a,f)),t=A[i][a],t.points[o]=[t.cum||0],"percent"===m?(n=e?v:b,y&&A[n]&&A[n][a]?(n=A[n][a],t.total=n.total=ye(n.total,t.total)+Ae(s)||0):t.total=$(t.total+(Ae(s)||0))):t.total=$(t.total+(s||0)),t.cum=(t.cum||0)+(s||0),t.points[o].push(t.cum),u[r]=t.cum;"percent"===m&&(w.usePercentage=!0),this.stackedYData=u,w.oldStacks={}}},Gt.prototype.setPercentStacks=function(){var e=this,t=e.stackKey,n=e.yAxis.stacks,i=e.processedXData;ut([t,"-"+t],function(t){for(var o,r,a,s,l=i.length;l--;)o=i[l],r=n[t]&&n[t][o],a=r&&r.points[e.index+","+l],a&&(s=r.total?100/r.total:0,a[0]=$(a[0]*s),a[1]=$(a[1]*s),e.stackedYData[l]=a[1])})},e(F.prototype,{addSeries:function(e,t,n){var i,o=this;return e&&(t=p(t,!0),vt(o,"addSeries",{options:e},function(){i=o.initSeries(e),o.isDirtyLegend=!0,o.linkSeries(),t&&o.redraw(n)})),i},addAxis:function(e,n,i,o){var r,a=n?"xAxis":"yAxis",s=this.options;r=new R(this,t(e,{index:this[a].length,isX:n})),s[a]=h(s[a]||{}),s[a].push(e),p(i,!0)&&this.redraw(o)},showLoading:function(t){var n=this,i=n.options,o=n.loadingDiv,r=i.loading,a=function(){o&&g(o,{left:n.plotLeft+Xe,top:n.plotTop+Xe,width:n.plotWidth+Xe,height:n.plotHeight+Xe})};o||(n.loadingDiv=o=f(Ye,{className:We+"loading"},e(r.style,{zIndex:10,display:Je}),n.container),n.loadingSpan=f("span",null,r.labelStyle,o),ft(n,"redraw",a)),n.loadingSpan.innerHTML=t||i.lang.loading,n.loadingShown||(g(o,{opacity:0,display:""}),yt(o,{opacity:r.style.opacity},{duration:r.showDuration||0}),n.loadingShown=!0),a()},hideLoading:function(){var e=this.options,t=this.loadingDiv;t&&yt(t,{opacity:0},{duration:e.loading.hideDuration||100,complete:function(){g(t,{display:Je})}}),this.loadingShown=!1}}),e(Yt.prototype,{update:function(e,t,n,i){function a(){l.applyOptions(e),o(e)&&!r(e)&&(l.redraw=function(){c&&(e&&e.marker&&e.marker.symbol?l.graphic=c.destroy():c.attr(l.pointAttr[l.state||""])),e&&e.dataLabels&&l.dataLabel&&(l.dataLabel=l.dataLabel.destroy()),l.redraw=null}),s=l.index,d.updateParallelArrays(l,s),h.data[s]=l.options,d.isDirty=d.isDirtyData=!0,!d.fixedBox&&d.hasCartesianSeries&&(u.isDirtyBox=!0),"point"===h.legendType&&u.legend.destroyItem(l),t&&u.redraw(n)}var s,l=this,d=l.series,c=l.graphic,u=d.chart,h=d.options;t=p(t,!0),i===!1?a():l.firePointEvent("update",{options:e},a)},remove:function(e,t){var n,i=this,o=i.series,r=o.points,a=o.chart,s=o.data;D(t,a),e=p(e,!0),i.firePointEvent("remove",null,function(){n=ct(i,s),s.length===r.length&&r.splice(n,1),s.splice(n,1),o.options.data.splice(n,1),o.updateParallelArrays(i,"splice",n,1),i.destroy(),o.isDirty=!0,o.isDirtyData=!0,e&&a.redraw()})}}),e(Gt.prototype,{addPoint:function(e,t,n,i){var o,r,a,s,l=this,d=l.options,c=l.data,u=l.graph,h=l.area,g=l.chart,f=l.xAxis&&l.xAxis.names,m=u&&u.shift||0,v=d.data,b=l.xData;if(D(i,g),n&&ut([u,h,l.graphNeg,l.areaNeg],function(e){e&&(e.shift=m+1)}),h&&(h.isArea=!0),t=p(t,!0),o={series:l},l.pointClass.prototype.applyOptions.apply(o,[e]),a=o.x,s=b.length,l.requireSorting&&a<b[s-1])for(r=!0;s&&b[s-1]>a;)s--;l.updateParallelArrays(o,"splice",s,0,0),l.updateParallelArrays(o,s),f&&o.name&&(f[a]=o.name),v.splice(s,0,e),r&&(l.data.splice(s,0,null),l.processData()),"point"===d.legendType&&l.generatePoints(),n&&(c[0]&&c[0].remove?c[0].remove(!1):(c.shift(),l.updateParallelArrays(o,"shift"),v.shift())),l.isDirty=!0,l.isDirtyData=!0,t&&(l.getAttribs(),g.redraw())},remove:function(e,t){var n=this,i=n.chart;e=p(e,!0),n.isRemoving||(n.isRemoving=!0,vt(n,"remove",null,function(){n.destroy(),i.isDirtyLegend=i.isDirtyBox=!0,i.linkSeries(),e&&i.redraw(t)})),n.isRemoving=!1},update:function(n,i){var o,r=this,a=this.chart,s=this.userOptions,l=this.type,d=rt[l].prototype,c=["group","markerGroup","dataLabelsGroup"];ut(c,function(e){c[e]=r[e],delete r[e]}),n=t(s,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},n),this.remove(!1);for(o in d)d.hasOwnProperty(o)&&(this[o]=H);e(this,rt[n.type||l].prototype),ut(c,function(e){r[e]=c[e]}),this.init(a,n),a.linkSeries(),p(i,!0)&&a.redraw(!1)}}),e(R.prototype,{update:function(n,i){var o=this.chart;n=o.options[this.coll][this.options.index]=t(this.userOptions,n),this.destroy(!0),this._addedPlotLB=H,this.init(o,e(n,{events:H})),o.isDirtyBox=!0,p(i,!0)&&o.redraw()},remove:function(e){for(var t=this.chart,n=this.coll,i=this.series,o=i.length;o--;)i[o]&&i[o].remove(!1);d(t.axes,this),d(t[n],this),t.options[n].splice(this.options.index,1),ut(t[n],function(e,t){e.options.index=t}),this.destroy(),t.isDirtyBox=!0,p(e,!0)&&t.redraw()},setTitle:function(e,t){this.update({title:e},t)},setCategories:function(e,t){this.update({categories:e},t)}});var jt=m(Gt);rt.line=jt,Nt.area=t(_t,{threshold:0});var qt=m(Gt,{type:"area",getSegments:function(){var e,t,n,i,o=this,r=[],a=[],s=[],l=this.xAxis,d=this.yAxis,c=d.stacks[this.stackKey],u={},h=this.points,p=this.options.connectNulls;if(this.options.stacking&&!this.cropped){for(n=0;n<h.length;n++)u[h[n].x]=h[n];for(i in c)null!==c[i].total&&s.push(+i);s.sort(function(e,t){return e-t}),ut(s,function(i){var r,s=0;if(!p||u[i]&&null!==u[i].y)if(u[i])a.push(u[i]);else{for(n=o.index;n<=d.series.length;n++)if(r=c[i].points[n+","+i]){s=r[1];break}e=l.translate(i),t=d.toPixels(s,!0),a.push({y:null,plotX:e,clientX:e,plotY:t,yBottom:t,onMouseOver:Le})}}),a.length&&r.push(a)}else Gt.prototype.getSegments.call(this),r=this.segments;this.segments=r},getSegmentPath:function(e){var t,n,i=Gt.prototype.getSegmentPath.call(this,e),o=[].concat(i),r=this.options,a=i.length,s=this.yAxis.getThreshold(r.threshold);if(3===a&&o.push(Qe,i[1],i[2]),r.stacking&&!this.closedStacks)for(t=e.length-1;t>=0;t--)n=p(e[t].yBottom,s),t<e.length-1&&r.step&&o.push(e[t+1].plotX,n),o.push(e[t].plotX,n);else this.closeSegment(o,e,s);return this.areaPath=this.areaPath.concat(o),i},closeSegment:function(e,t,n){e.push(Qe,t[t.length-1].plotX,n,Qe,t[0].plotX,n)},drawGraph:function(){this.areaPath=[],Gt.prototype.drawGraph.apply(this);var e=this,t=this.areaPath,n=this.options,i=n.negativeColor,o=n.negativeFillColor,r=[["area",this.color,n.fillColor]];(i||o)&&r.push(["areaNeg",i,o]),ut(r,function(i){var o=i[0],r=e[o];r?r.animate({d:t}):e[o]=e.chart.renderer.path(t).attr({fill:p(i[2],Tt(i[1]).setOpacity(p(n.fillOpacity,.75)).get()),zIndex:0}).add(e.group)})},drawLegendSymbol:Bt.drawRectangle});rt.area=qt,Nt.spline=t(_t);var Wt=m(Gt,{type:"spline",getPointSpline:function(e,t,n){var i,o,r,a,s,l=1.5,d=l+1,c=t.plotX,u=t.plotY,h=e[n-1],p=e[n+1];if(h&&p){var g,f=h.plotX,m=h.plotY,v=p.plotX,b=p.plotY;i=(l*c+f)/d,o=(l*u+m)/d,r=(l*c+v)/d,a=(l*u+b)/d,g=(a-o)*(r-c)/(r-i)+u-a,o+=g,a+=g,o>m&&o>u?(o=ye(m,u),a=2*u-o):m>o&&u>o&&(o=we(m,u),a=2*u-o),a>b&&a>u?(a=ye(b,u),o=2*u-a):b>a&&u>a&&(a=we(b,u),o=2*u-a),t.rightContX=r,t.rightContY=a}return n?(s=["C",h.rightContX||h.plotX,h.rightContY||h.plotY,i||c,o||u,c,u],h.rightContX=h.rightContY=null):s=[Ze,c,u],s}});rt.spline=Wt,Nt.areaspline=t(Nt.area);var Kt=qt.prototype,Xt=m(Wt,{type:"areaspline",closedStacks:!0,getSegmentPath:Kt.getSegmentPath,closeSegment:Kt.closeSegment,drawGraph:Kt.drawGraph,drawLegendSymbol:Bt.drawRectangle});rt.areaspline=Xt,Nt.column=t(_t,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},stickyTracking:!1,tooltip:{distance:6},threshold:0});var Jt=m(Gt,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},cropShoulder:0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){Gt.prototype.init.apply(this,arguments);var e=this,t=e.chart;t.hasRendered&&ut(t.series,function(t){t.type===e.type&&(t.isDirty=!0)})},getColumnMetrics:function(){var e,t,n=this,i=n.options,o=n.xAxis,r=n.yAxis,a=o.reversed,s={},l=0;i.grouping===!1?l=1:ut(n.chart.series,function(i){var o=i.options,a=i.yAxis;i.type===n.type&&i.visible&&r.len===a.len&&r.pos===a.pos&&(o.stacking?(e=i.stackKey,s[e]===H&&(s[e]=l++),t=s[e]):o.grouping!==!1&&(t=l++),i.columnIndex=t)});var d=we(Ae(o.transA)*(o.ordinalSlope||i.pointRange||o.closestPointRange||o.tickInterval||1),o.len),u=d*i.groupPadding,h=d-2*u,g=h/l,f=i.pointWidth,m=c(f)?(g-f)/2:g*i.pointPadding,v=p(f,g-2*m),b=(a?l-(n.columnIndex||0):n.columnIndex)||0,y=m+(u+b*g-d/2)*(a?-1:1);return n.columnMetrics={width:v,offset:y}},translate:function(){var e=this,t=e.chart,n=e.options,i=e.borderWidth=p(n.borderWidth,e.activePointCount>.5*e.xAxis.len?0:1),o=e.yAxis,r=n.threshold,a=e.translatedThreshold=o.getThreshold(r),s=p(n.minPointLength,5),l=e.getColumnMetrics(),d=l.width,c=e.barW=ye(d,1+2*i),u=e.pointXOffset=l.offset,h=-(i%2?.5:0),g=i%2?.5:1;t.renderer.isVML&&t.inverted&&(g+=1),n.pointPadding&&(c=be(c)),Gt.prototype.translate.apply(e),ut(e.points,function(n){var i,r,l,f=p(n.yBottom,a),m=we(ye(-999-f,n.plotY),o.len+999+f),v=n.plotX+u,b=c,y=we(m,f),w=ye(m,f)-y;Ae(w)<s&&s&&(w=s,y=me(Ae(y-a)>s?f-s:a-(o.translate(n.y,0,1,0,1)<=a?s:0))),n.barX=v,n.pointWidth=d,n.tooltipPos=t.inverted?[o.len-m,e.xAxis.len-v-b/2]:[v+b/2,m+o.pos-t.plotTop],i=me(v+b)+h,v=me(v)+h,b=i-v,l=Ae(y)<.5,r=me(y+w)+g,y=me(y)+g,w=r-y,l&&(y-=1,w+=1),n.shapeType="rect",n.shapeArgs={x:v,y:y,width:b,height:w}})},getSymbol:Le,drawLegendSymbol:Bt.drawRectangle,drawGraph:Le,drawPoints:function(){var e,n,i=this,o=this.chart,r=i.options,a=o.renderer,s=r.animationLimit||250;ut(i.points,function(l){var d,u=l.plotY,h=l.graphic;u===H||isNaN(u)||null===l.y?h&&(l.graphic=h.destroy()):(e=l.shapeArgs,d=c(i.borderWidth)?{"stroke-width":i.borderWidth}:{},n=l.pointAttr[l.selected?it:tt]||i.pointAttr[tt],h?(wt(h),h.attr(d)[o.pointCount<s?"animate":"attr"](t(e))):l.graphic=h=a[l.shapeType](e).attr(n).attr(d).add(i.group).shadow(r.shadow,null,r.stacking&&!r.borderRadius))})},animate:function(e){var t,n=this,i=this.yAxis,o=n.options,r=this.chart.inverted,a={};Ie&&(e?(a.scaleY=.001,t=we(i.pos+i.len,ye(i.pos,i.toPixels(o.threshold))),r?a.translateX=t-i.len:a.translateY=t,n.group.attr(a)):(a.scaleY=1,a[r?"translateX":"translateY"]=i.pos,n.group.animate(a,n.options.animation),n.animate=null))},remove:function(){var e=this,t=e.chart;t.hasRendered&&ut(t.series,function(t){t.type===e.type&&(t.isDirty=!0)}),Gt.prototype.remove.apply(e,arguments)}});rt.column=Jt,Nt.bar=t(Nt.column);var Zt=m(Jt,{type:"bar",inverted:!0});rt.bar=Zt,Nt.scatter=t(_t,{lineWidth:0,tooltip:{headerFormat:'<span style="color:{series.color}">●</span> <span style="font-size: 10px;"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"},stickyTracking:!1});var Qt=m(Gt,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,singularTooltips:!0,drawGraph:function(){this.options.lineWidth&&Gt.prototype.drawGraph.call(this)}});rt.scatter=Qt,Nt.pie=t(_t,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});var en=m(Yt,{init:function(){Yt.prototype.init.apply(this,arguments);var t,n=this;return n.y<0&&(n.y=null),e(n,{visible:n.visible!==!1,name:p(n.name,"Slice")}),t=function(e){n.slice("select"===e.type)},ft(n,"select",t),ft(n,"unselect",t),n},setVisible:function(e){var t=this,n=t.series,i=n.chart;t.visible=t.options.visible=e=e===H?!t.visible:e,n.options.data[ct(t,n.data)]=t.options,ut(["graphic","dataLabel","connector","shadowGroup"],function(n){t[n]&&t[n][e?"show":"hide"](!0)}),t.legendItem&&i.legend.colorizeItem(t,e),!n.isDirty&&n.options.ignoreHiddenPoint&&(n.isDirty=!0,i.redraw())},slice:function(e,t,n){var i,o=this,r=o.series,a=r.chart;D(n,a),t=p(t,!0),o.sliced=o.options.sliced=e=c(e)?e:!o.sliced,r.options.data[ct(o,r.data)]=o.options,i=e?o.slicedTranslation:{translateX:0,translateY:0},o.graphic.animate(i),o.shadowGroup&&o.shadowGroup.animate(i)},haloPath:function(e){var t=this.shapeArgs,n=this.series.chart;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(n.plotLeft+t.x,n.plotTop+t.y,t.r+e,t.r+e,{innerR:this.shapeArgs.r,start:t.start,end:t.end})}}),tn={type:"pie",isCartesian:!1,pointClass:en,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},singularTooltips:!0,getColor:Le,animate:function(e){var t=this,n=t.points,i=t.startAngleRad;e||(ut(n,function(e){var n=e.graphic,o=e.shapeArgs;n&&(n.attr({r:t.center[3]/2,start:i,end:i
}),n.animate({r:o.r,start:o.start,end:o.end},t.options.animation))}),t.animate=null)},setData:function(e,t,n,i){Gt.prototype.setData.call(this,e,!1,n,i),this.processData(),this.generatePoints(),p(t,!0)&&this.chart.redraw(n)},generatePoints:function(){var e,t,n,i,o=0,r=this.options.ignoreHiddenPoint;for(Gt.prototype.generatePoints.call(this),t=this.points,n=t.length,e=0;n>e;e++)i=t[e],o+=r&&!i.visible?0:i.y;for(this.total=o,e=0;n>e;e++)i=t[e],i.percentage=o>0?i.y/o*100:0,i.total=o},translate:function(e){this.generatePoints();var t,n,i,o,r,a,s,l=this,d=0,c=1e3,u=l.options,h=u.slicedOffset,g=h+u.borderWidth,f=u.startAngle||0,m=l.startAngleRad=Ce/180*(f-90),v=l.endAngleRad=Ce/180*(p(u.endAngle,f+360)-90),b=v-m,y=l.points,w=u.dataLabels.distance,A=u.ignoreHiddenPoint,N=y.length;for(e||(l.center=e=l.getCenter()),l.getX=function(t,n){return i=fe.asin(we((t-e[1])/(e[2]/2+w),1)),e[0]+(n?-1:1)*(Ne(i)*(e[2]/2+w))},a=0;N>a;a++)s=y[a],t=m+d*b,(!A||s.visible)&&(d+=s.percentage/100),n=m+d*b,s.shapeType="arc",s.shapeArgs={x:e[0],y:e[1],r:e[2]/2,innerR:e[3]/2,start:me(t*c)/c,end:me(n*c)/c},i=(n+t)/2,i>1.5*Ce?i-=2*Ce:-Ce/2>i&&(i+=2*Ce),s.slicedTranslation={translateX:me(Ne(i)*h),translateY:me(_e(i)*h)},o=Ne(i)*e[2]/2,r=_e(i)*e[2]/2,s.tooltipPos=[e[0]+.7*o,e[1]+.7*r],s.half=-Ce/2>i||i>Ce/2?1:0,s.angle=i,g=we(g,w/2),s.labelPos=[e[0]+o+Ne(i)*w,e[1]+r+_e(i)*w,e[0]+o+Ne(i)*g,e[1]+r+_e(i)*g,e[0]+o,e[1]+r,0>w?"center":s.half?"right":"left",i]},drawGraph:null,drawPoints:function(){var t,n,i,o,r=this,a=r.chart,s=a.renderer,l=r.options.shadow;l&&!r.shadowGroup&&(r.shadowGroup=s.g("shadow").add(r.group)),ut(r.points,function(a){n=a.graphic,o=a.shapeArgs,i=a.shadowGroup,l&&!i&&(i=a.shadowGroup=s.g("shadow").add(r.shadowGroup)),t=a.sliced?a.slicedTranslation:{translateX:0,translateY:0},i&&i.attr(t),n?n.animate(e(o,t)):a.graphic=n=s[a.shapeType](o).setRadialReference(r.center).attr(a.pointAttr[a.selected?it:tt]).attr({"stroke-linejoin":"round"}).attr(t).add(r.group).shadow(l,i),void 0!==a.visible&&a.setVisible(a.visible)})},sortByAngle:function(e,t){e.sort(function(e,n){return void 0!==e.angle&&(n.angle-e.angle)*t})},drawLegendSymbol:Bt.drawRectangle,getCenter:zt.getCenter,getSymbol:Le};tn=m(Gt,tn),rt.pie=tn,Gt.prototype.drawDataLabels=function(){var n,i,o,r,a=this,s=a.options,l=s.cursor,d=s.dataLabels,u=a.points,h=a.hasRendered||0;(d.enabled||a._hasPointLabels)&&(a.dlProcessOptions&&a.dlProcessOptions(d),r=a.plotGroup("dataLabelsGroup","data-labels",d.defer?qe:Ke,d.zIndex||6),p(d.defer,!0)&&(r.attr({opacity:+h}),h||ft(a,"afterAnimate",function(){a.visible&&r.show(),r[s.animation?"animate":"attr"]({opacity:1},{duration:200})})),i=d,ut(u,function(s){var u,h,g,f,m,v=s.dataLabel,b=s.connector,y=!0;if(n=s.options&&s.options.dataLabels,u=p(n&&n.enabled,i.enabled),v&&!u)s.dataLabel=v.destroy();else if(u){if(d=t(i,n),m=d.rotation,h=s.getLabelConfig(),o=d.format?A(d.format,h):d.formatter.call(h,d),d.style.color=p(d.color,d.style.color,a.color,"black"),v)c(o)?(v.attr({text:o}),y=!1):(s.dataLabel=v=v.destroy(),b&&(s.connector=b.destroy()));else if(c(o)){g={fill:d.backgroundColor,stroke:d.borderColor,"stroke-width":d.borderWidth,r:d.borderRadius||0,rotation:m,padding:d.padding,zIndex:1};for(f in g)g[f]===H&&delete g[f];v=s.dataLabel=a.chart.renderer[m?"text":"label"](o,0,-999,null,null,null,d.useHTML).attr(g).css(e(d.style,l&&{cursor:l})).add(r).shadow(d.shadow)}v&&a.alignDataLabel(s,v,d,null,y)}}))},Gt.prototype.alignDataLabel=function(t,n,i,o,r){var a,s=this.chart,l=s.inverted,d=p(t.plotX,-999),c=p(t.plotY,-999),u=n.getBBox(),h=this.visible&&(t.series.forceDL||s.isInsidePlot(d,me(c),l)||o&&s.isInsidePlot(d,l?o.x+1:o.y+o.height-1,l));h&&(o=e({x:l?s.plotWidth-c:d,y:me(l?s.plotHeight-d:c),width:0,height:0},o),e(i,{width:u.width,height:u.height}),i.rotation?n[r?"attr":"animate"]({x:o.x+i.x+o.width/2,y:o.y+i.y+o.height/2}).attr({align:i.align}):(n.align(i,null,o),a=n.alignAttr,"justify"===p(i.overflow,"justify")?this.justifyDataLabel(n,i,a,u,o,r):p(i.crop,!0)&&(h=s.isInsidePlot(a.x,a.y)&&s.isInsidePlot(a.x+u.width,a.y+u.height)))),h||(n.attr({y:-999}),n.placed=!1)},Gt.prototype.justifyDataLabel=function(e,t,n,i,o,r){var a,s,l=this.chart,d=t.align,c=t.verticalAlign;a=n.x,0>a&&("right"===d?t.align="left":t.x=-a,s=!0),a=n.x+i.width,a>l.plotWidth&&("left"===d?t.align="right":t.x=l.plotWidth-a,s=!0),a=n.y,0>a&&("bottom"===c?t.verticalAlign="top":t.y=-a,s=!0),a=n.y+i.height,a>l.plotHeight&&("top"===c?t.verticalAlign="bottom":t.y=l.plotHeight-a,s=!0),s&&(e.placed=!r,e.align(t,null,o))},rt.pie&&(rt.pie.prototype.drawDataLabels=function(){var e,t,n,i,o,r,a,s,l,d,c,u,h,g=this,f=g.data,m=g.chart,v=g.options.dataLabels,b=p(v.connectorPadding,10),y=p(v.connectorWidth,1),w=m.plotWidth,A=m.plotHeight,N=p(v.softConnector,!0),_=v.distance,C=g.center,x=C[2]/2,T=C[1],k=_>0,$=[[],[]],D=[0,0,0,0],M=function(e,t){return t.y-e.y};if(g.visible&&(v.enabled||g._hasPointLabels)){for(Gt.prototype.drawDataLabels.apply(g),ut(f,function(e){e.dataLabel&&e.visible&&$[e.half].push(e)}),u=2;u--;){var E,P,I,O,R=[],F=[],V=$[u],L=V.length;if(L){for(g.sortByAngle(V,u-.5),h=a=0;!a&&V[h];)a=V[h]&&V[h].dataLabel&&(V[h].dataLabel.getBBox().height||21),h++;if(_>0){for(I=we(T+x+_,m.plotHeight),P=ye(0,T-x-_);I>=P;P+=a)R.push(P);if(E=R.length,L>E){for(c=[].concat(V),c.sort(M),h=L;h--;)c[h].rank=h;for(h=L;h--;)V[h].rank>=E&&V.splice(h,1);L=V.length}for(h=0;L>h;h++){e=V[h],r=e.labelPos;var U,H,B=9999;for(H=0;E>H;H++)U=Ae(R[H]-r[1]),B>U&&(B=U,O=H);if(h>O&&null!==R[h])O=h;else if(L-h+O>E&&null!==R[h])for(O=E-L+h;null===R[O];)O++;else for(;null===R[O];)O++;F.push({i:O,y:R[O]}),R[O]=null}F.sort(M)}for(h=0;L>h;h++){var z,Y;e=V[h],r=e.labelPos,i=e.dataLabel,d=e.visible===!1?qe:Ke,Y=r[1],_>0?(z=F.pop(),O=z.i,l=z.y,(Y>l&&null!==R[O+1]||l>Y&&null!==R[O-1])&&(l=we(ye(0,Y),m.plotHeight))):l=Y,s=v.justify?C[0]+(u?-1:1)*(x+_):g.getX(l===T-x-_||l===T+x+_?Y:l,u),i._attr={visibility:d,align:r[6]},i._pos={x:s+v.x+({left:b,right:-b}[r[6]]||0),y:l+v.y-10},i.connX=s,i.connY=l,null===this.options.size&&(o=i.width,b>s-o?D[3]=ye(me(o-s+b),D[3]):s+o>w-b&&(D[1]=ye(me(s+o-w+b),D[1])),0>l-a/2?D[0]=ye(me(-l+a/2),D[0]):l+a/2>A&&(D[2]=ye(me(l+a/2-A),D[2])))}}}(0===S(D)||this.verifyDataLabelOverflow(D))&&(this.placeDataLabels(),k&&y&&ut(this.points,function(e){t=e.connector,r=e.labelPos,i=e.dataLabel,i&&i._pos?(d=i._attr.visibility,s=i.connX,l=i.connY,n=N?[Ze,s+("left"===r[6]?5:-5),l,"C",s,l,2*r[2]-r[4],2*r[3]-r[5],r[2],r[3],Qe,r[4],r[5]]:[Ze,s+("left"===r[6]?5:-5),l,Qe,r[2],r[3],Qe,r[4],r[5]],t?(t.animate({d:n}),t.attr("visibility",d)):e.connector=t=g.chart.renderer.path(n).attr({"stroke-width":y,stroke:v.connectorColor||e.color||"#606060",visibility:d}).add(g.dataLabelsGroup)):t&&(e.connector=t.destroy())}))}},rt.pie.prototype.placeDataLabels=function(){ut(this.points,function(e){var t,n=e.dataLabel;n&&(t=n._pos,t?(n.attr(n._attr),n[n.moved?"animate":"attr"](t),n.moved=!0):n&&n.attr({y:-999}))})},rt.pie.prototype.alignDataLabel=Le,rt.pie.prototype.verifyDataLabelOverflow=function(e){var t,n=this.center,i=this.options,o=i.center,r=i.minSize||80,a=r;return null!==o[0]?a=ye(n[2]-ye(e[1],e[3]),r):(a=ye(n[2]-e[1]-e[3],r),n[0]+=(e[3]-e[1])/2),null!==o[1]?a=ye(we(a,n[2]-ye(e[0],e[2])),r):(a=ye(we(a,n[2]-e[0]-e[2]),r),n[1]+=(e[0]-e[2])/2),a<n[2]?(n[2]=a,this.translate(n),ut(this.points,function(e){e.dataLabel&&(e.dataLabel._pos=null)}),this.drawDataLabels&&this.drawDataLabels()):t=!0,t}),rt.column&&(rt.column.prototype.alignDataLabel=function(e,n,i,o,r){var a=this.chart,s=a.inverted,l=e.dlBox||e.shapeArgs,d=e.below||e.plotY>p(this.translatedThreshold,a.plotSizeY),c=p(i.inside,!!this.options.stacking);l&&(o=t(l),s&&(o={x:a.plotWidth-o.y-o.height,y:a.plotHeight-o.x-o.width,width:o.height,height:o.width}),c||(s?(o.x+=d?0:o.width,o.width=0):(o.y+=d?o.height:0,o.height=0))),i.align=p(i.align,!s||c?"center":d?"right":"left"),i.verticalAlign=p(i.verticalAlign,s||c?"middle":d?"top":"bottom"),Gt.prototype.alignDataLabel.call(this,e,n,i,o,r)});var nn=he.TrackerMixin={drawTrackerPoint:function(){var e=this,t=e.chart,n=t.pointer,i=e.options.cursor,o=i&&{cursor:i},r=function(n){var i,o=n.target;for(t.hoverSeries!==e&&e.onMouseOver();o&&!i;)i=o.point,o=o.parentNode;i!==H&&i!==t.hoverPoint&&i.onMouseOver(n)};ut(e.points,function(e){e.graphic&&(e.graphic.element.point=e),e.dataLabel&&(e.dataLabel.element.point=e)}),e._hasTracking||(ut(e.trackerGroups,function(t){e[t]&&(e[t].addClass(We+"tracker").on("mouseover",r).on("mouseout",function(e){n.onTrackerMouseOut(e)}).css(o),z&&e[t].on("touchstart",r))}),e._hasTracking=!0)},drawTrackerGraph:function(){var e,t,n=this,i=n.options,o=i.trackByArea,r=[].concat(o?n.areaPath:n.graphPath),a=r.length,s=n.chart,l=s.pointer,d=s.renderer,c=s.options.tooltip.snap,u=n.tracker,h=i.cursor,p=h&&{cursor:h},g=n.singlePoints,f=function(){s.hoverSeries!==n&&n.onMouseOver()},m="rgba(192,192,192,"+(Ie?1e-4:.002)+")";if(a&&!o)for(t=a+1;t--;)r[t]===Ze&&r.splice(t+1,0,r[t+1]-c,r[t+2],Qe),(t&&r[t]===Ze||t===a)&&r.splice(t,0,Qe,r[t-2]+c,r[t-1]);for(t=0;t<g.length;t++)e=g[t],r.push(Ze,e.plotX-c,e.plotY,Qe,e.plotX+c,e.plotY);u?u.attr({d:r}):(n.tracker=d.path(r).attr({"stroke-linejoin":"round",visibility:n.visible?Ke:qe,stroke:m,fill:o?m:Je,"stroke-width":i.lineWidth+(o?0:2*c),zIndex:2}).add(n.group),ut([n.tracker,n.markerGroup],function(e){e.addClass(We+"tracker").on("mouseover",f).on("mouseout",function(e){l.onTrackerMouseOut(e)}).css(p),z&&e.on("touchstart",f)}))}};rt.column&&(Jt.prototype.drawTracker=nn.drawTrackerPoint),rt.pie&&(rt.pie.prototype.drawTracker=nn.drawTrackerPoint),rt.scatter&&(Qt.prototype.drawTracker=nn.drawTrackerPoint),e(Ht.prototype,{setItemEvents:function(e,t,n,i,o){var r=this;(n?t:e.legendGroup).on("mouseover",function(){e.setState(nt),t.css(r.options.itemHoverStyle)}).on("mouseout",function(){t.css(e.visible?i:o),e.setState()}).on("click",function(t){var n="legendItemClick",i=function(){e.setVisible()};t={browserEvent:t},e.firePointEvent?e.firePointEvent(n,t,i):vt(e,n,t,i)})},createCheckboxForItem:function(e){var t=this;e.checkbox=f("input",{type:"checkbox",checked:e.selected,defaultChecked:e.selected},t.options.itemCheckboxStyle,t.chart.container),ft(e.checkbox,"click",function(t){var n=t.target;vt(e,"checkboxClick",{checked:n.checked},function(){e.select()})})}}),G.legend.itemStyle.cursor="pointer",e(F.prototype,{showResetZoom:function(){var e=this,t=G.lang,n=e.options.chart.resetZoomButton,i=n.theme,o=i.states,r="chart"===n.relativeTo?null:"plotBox";this.resetZoomButton=e.renderer.button(t.resetZoom,null,null,function(){e.zoomOut()},i,o&&o.hover).attr({align:n.position.align,title:t.resetZoomTitle}).add().align(n.position,!1,r)},zoomOut:function(){var e=this;vt(e,"selection",{resetSelection:!0},function(){e.zoom()})},zoom:function(e){var t,n,i=this,r=i.pointer,a=!1;!e||e.resetSelection?ut(i.axes,function(e){t=e.zoom()}):ut(e.xAxis.concat(e.yAxis),function(e){var n=e.axis,i=n.isXAxis;(r[i?"zoomX":"zoomY"]||r[i?"pinchX":"pinchY"])&&(t=n.zoom(e.min,e.max),n.displayBtn&&(a=!0))}),n=i.resetZoomButton,a&&!n?i.showResetZoom():!a&&o(n)&&(i.resetZoomButton=n.destroy()),t&&i.redraw(p(i.options.chart.animation,e&&e.animation,i.pointCount<100))},pan:function(e,t){var n,i=this,o=i.hoverPoints;o&&ut(o,function(e){e.setState()}),ut("xy"===t?[1,0]:[1],function(t){var o=e[t?"chartX":"chartY"],r=i[t?"xAxis":"yAxis"][0],a=i[t?"mouseDownX":"mouseDownY"],s=(r.pointRange||0)/2,l=r.getExtremes(),d=r.toValue(a-o,!0)+s,c=r.toValue(a+i[t?"plotWidth":"plotHeight"]-o,!0)-s;r.series.length&&d>we(l.dataMin,l.min)&&c<ye(l.dataMax,l.max)&&(r.setExtremes(d,c,!1,!1,{trigger:"pan"}),n=!0),i[t?"mouseDownX":"mouseDownY"]=o}),n&&i.redraw(!1),g(i.container,{cursor:"move"})}}),e(Yt.prototype,{select:function(e,t){var n=this,i=n.series,o=i.chart;e=p(e,!n.selected),n.firePointEvent(e?"select":"unselect",{accumulate:t},function(){n.selected=n.options.selected=e,i.options.data[ct(n,i.data)]=n.options,n.setState(e&&it),t||ut(o.getSelectedPoints(),function(e){e.selected&&e!==n&&(e.selected=e.options.selected=!1,i.options.data[ct(e,i.data)]=e.options,e.setState(tt),e.firePointEvent("unselect"))})})},onMouseOver:function(e){var t=this,n=t.series,i=n.chart,o=i.tooltip,r=i.hoverPoint;r&&r!==t&&r.onMouseOut(),t.firePointEvent("mouseOver"),!o||o.shared&&!n.noSharedTooltip||o.refresh(t,e),t.setState(nt),i.hoverPoint=t},onMouseOut:function(){var e=this.series.chart,t=e.hoverPoints;this.firePointEvent("mouseOut"),t&&-1!==ct(this,t)||(this.setState(),e.hoverPoint=null)},importEvents:function(){if(!this.hasImportedEvents){var e,n=this,i=t(n.series.options.point,n.options),o=i.events;n.events=o;for(e in o)ft(n,e,o[e]);this.hasImportedEvents=!0}},setState:function(n,i){var o,r,a,s,l=this,d=l.plotX,c=l.plotY,u=l.series,h=u.options.states,p=Nt[u.type].marker&&u.options.marker,g=p&&!p.enabled,f=p&&p.states[n],m=f&&f.enabled===!1,v=u.stateMarkerGraphic,b=l.marker||{},y=u.chart,w=u.halo;n=n||tt,s=l.pointAttr[n]||u.pointAttr[n],n===l.state&&!i||l.selected&&n!==it||h[n]&&h[n].enabled===!1||n&&(m||g&&f.enabled===!1)||n&&b.states&&b.states[n]&&b.states[n].enabled===!1||(l.graphic?(o=p&&l.graphic.symbolName&&s.r,l.graphic.attr(t(s,o?{x:d-o,y:c-o,width:2*o,height:2*o}:{})),v&&v.hide()):(n&&f&&(o=f.radius,a=b.symbol||u.symbol,v&&v.currentSymbol!==a&&(v=v.destroy()),v?v[i?"animate":"attr"]({x:d-o,y:c-o}):a&&(u.stateMarkerGraphic=v=y.renderer.symbol(a,d-o,c-o,2*o,2*o).attr(s).add(u.markerGroup),v.currentSymbol=a)),v&&v[n&&y.isInsidePlot(d,c,y.inverted)?"show":"hide"]()),r=h[n]&&h[n].halo,r&&r.size?(w||(u.halo=w=y.renderer.path().add(u.seriesGroup)),w.attr(e({fill:Tt(l.color||u.color).setOpacity(r.opacity).get()},r.attributes))[i?"animate":"attr"]({d:l.haloPath(r.size)})):w&&w.attr({d:[]}),l.state=n)},haloPath:function(e){var t=this.series,n=t.chart,i=t.getPlotBox(),o=n.inverted;return n.renderer.symbols.circle(i.translateX+(o?t.yAxis.len-this.plotY:this.plotX)-e,i.translateY+(o?t.xAxis.len-this.plotX:this.plotY)-e,2*e,2*e)}}),e(Gt.prototype,{onMouseOver:function(){var e=this,t=e.chart,n=t.hoverSeries;n&&n!==e&&n.onMouseOut(),e.options.events.mouseOver&&vt(e,"mouseOver"),e.setState(nt),t.hoverSeries=e},onMouseOut:function(){var e=this,t=e.options,n=e.chart,i=n.tooltip,o=n.hoverPoint;o&&o.onMouseOut(),e&&t.events.mouseOut&&vt(e,"mouseOut"),!i||t.stickyTracking||i.shared&&!e.noSharedTooltip||i.hide(),e.setState(),n.hoverSeries=null},setState:function(e){var t,n=this,i=n.options,o=n.graph,r=n.graphNeg,a=i.states,s=i.lineWidth;if(e=e||tt,n.state!==e){if(n.state=e,a[e]&&a[e].enabled===!1)return;e&&(s=a[e].lineWidth||s+(a[e].lineWidthPlus||0)),o&&!o.dashstyle&&(t={"stroke-width":s},o.attr(t),r&&r.attr(t))}},setVisible:function(e,t){var n,i=this,o=i.chart,r=i.legendItem,a=o.options.chart.ignoreHiddenSeries,s=i.visible;i.visible=e=i.userOptions.visible=e===H?!s:e,n=e?"show":"hide",ut(["group","dataLabelsGroup","markerGroup","tracker"],function(e){i[e]&&i[e][n]()}),o.hoverSeries===i&&i.onMouseOut(),r&&o.legend.colorizeItem(i,e),i.isDirty=!0,i.options.stacking&&ut(o.series,function(e){e.options.stacking&&e.visible&&(e.isDirty=!0)}),ut(i.linkedSeries,function(t){t.setVisible(e,!1)}),a&&(o.isDirtyBox=!0),t!==!1&&o.redraw(),vt(i,n)},setTooltipPoints:function(e){var t,n,i,o,r,a,s,l=this,d=[],c=l.xAxis,u=c&&c.getExtremes(),h=c?c.tooltipLen||c.len:l.chart.plotSizeX,p=[];if(l.options.enableMouseTracking!==!1&&!l.singularTooltips){for(e&&(l.tooltipPoints=null),ut(l.segments||l.points,function(e){d=d.concat(e)}),c&&c.reversed&&(d=d.reverse()),l.orderTooltipPoints&&l.orderTooltipPoints(d),t=d.length,s=0;t>s;s++)if(o=d[s],r=o.x,r>=u.min&&r<=u.max)for(a=d[s+1],n=i===H?0:i+1,i=d[s+1]?we(ye(0,ve((o.clientX+(a?a.wrappedClientX||a.clientX:h))/2)),h):h;n>=0&&i>=n;)p[n++]=o;l.tooltipPoints=p}},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(e){var t=this;t.selected=e=e===H?!t.selected:e,t.checkbox&&(t.checkbox.checked=e),vt(t,e?"select":"unselect")},drawTracker:nn.drawTrackerGraph}),y(Gt.prototype,"init",function(e){var t,n=this;e.apply(this,Array.prototype.slice.call(arguments,1)),t=n.xAxis,t&&t.options.ordinal&&ft(n,"updatedData",function(){delete t.ordinalIndex})}),y(R.prototype,"getTimeTicks",function(e,t,n,i,o,r,a,s){var l,d,u,h,p,g=0,f=0,m={},v=[],b=-Number.MAX_VALUE,y=this.options.tickPixelInterval;if(!this.options.ordinal||!r||r.length<3||n===H)return e.call(this,t,n,i,o);for(h=r.length;h>f;f++){if(p=f&&r[f-1]>i,r[f]<n&&(g=f),f===h-1||r[f+1]-r[f]>5*a||p){if(r[f]>b){for(l=e.call(this,t,r[g],r[f],o);l.length&&l[0]<=b;)l.shift();l.length&&(b=l[l.length-1]),v=v.concat(l)}g=f+1}if(p)break}if(u=l.info,s&&u.unitRange<=K.hour){for(f=v.length-1,g=1;f>g;g++)new Z(v[g]-ee)[oe]()!==new Z(v[g-1]-ee)[oe]()&&(m[v[g]]="day",d=!0);d&&(m[v[0]]="day"),u.higherRanks=m}if(v.info=u,s&&c(y)){for(var w,A,N,_,C,x=v.length,S=x,T=[],k=[];S--;)A=this.translate(v[S]),N&&(k[S]=N-A),T[S]=N=A;for(k.sort(),_=k[ve(k.length/2)],.6*y>_&&(_=null),S=v[x-1]>i?x-1:x,N=void 0;S--;)A=T[S],C=N-A,N&&.8*y>C&&(null===_||.8*_>C)?(m[v[S]]&&!m[v[S+1]]?(w=S+1,N=A):w=S,v.splice(w,1)):N=A}return v}),e(R.prototype,{beforeSetTickPositions:function(){var e,t,n,i,o,r,a=this,s=[],l=!1,d=a.getExtremes(),c=d.min,u=d.max;if(a.options.ordinal){if(ut(a.series,function(t,n){if(t.visible!==!1&&t.takeOrdinalPosition!==!1&&(s=s.concat(t.processedXData),e=s.length,s.sort(function(e,t){return e-t}),e))for(n=e-1;n--;)s[n]===s[n+1]&&s.splice(n,1)}),e=s.length,e>2){for(t=s[1]-s[0],r=e-1;r--&&!l;)s[r+1]-s[r]!==t&&(l=!0);!a.options.keepOrdinalPadding&&(s[0]-c>t||u-s[s.length-1]>t)&&(l=!0)}l?(a.ordinalPositions=s,n=a.val2lin(ye(c,s[0]),!0),i=ye(a.val2lin(we(u,s[s.length-1]),!0),1),a.ordinalSlope=o=(u-c)/(i-n),a.ordinalOffset=c-n*o):a.ordinalPositions=a.ordinalSlope=a.ordinalOffset=H}a.groupIntervalFactor=null},val2lin:function(e,t){var n=this,i=n.ordinalPositions;if(i){var o,r,a,s=i.length;for(o=s;o--;)if(i[o]===e){a=o;break}for(o=s-1;o--;)if(e>i[o]||0===o){r=(e-i[o])/(i[o+1]-i[o]),a=o+r;break}return t?a:n.ordinalSlope*(a||0)+n.ordinalOffset}return e},lin2val:function(e,t){var n=this,i=n.ordinalPositions;if(i){var o,r,a,s=n.ordinalSlope,l=n.ordinalOffset,d=i.length-1;if(t)0>e?e=i[0]:e>d?e=i[d]:(d=ve(e),a=e-d);else for(;d--;)if(o=s*d+l,e>=o){r=s*(d+1)+l,a=(e-o)/(r-o);break}return a!==H&&i[d]!==H?i[d]+(a?a*(i[d+1]-i[d]):0):e}return e},getExtendedPositions:function(){var e,t,n=this,i=n.chart,o=n.series[0].currentDataGrouping,r=n.ordinalIndex,a=o?o.count+o.unitName:"raw",s=n.getExtremes();return r||(r=n.ordinalIndex={}),r[a]||(e={series:[],getExtremes:function(){return{min:s.dataMin,max:s.dataMax}},options:{ordinal:!0},val2lin:R.prototype.val2lin},ut(n.series,function(n){t={xAxis:e,xData:n.xData,chart:i,destroyGroupedData:Le},t.options={dataGrouping:o?{enabled:!0,forced:!0,approximation:"open",units:[[o.unitName,[o.count]]]}:{enabled:!1}},n.processData.apply(t),e.series.push(t)}),n.beforeSetTickPositions.apply(e),r[a]=e.ordinalPositions),r[a]},getGroupIntervalFactor:function(e,t,n){var i,o=0,r=n.processedXData,a=r.length,s=[],l=this.groupIntervalFactor;if(!l){for(;a-1>o;o++)s[o]=r[o+1]-r[o];s.sort(function(e,t){return e-t}),i=s[ve(a/2)],e=ye(e,r[0]),t=we(t,r[a-1]),this.groupIntervalFactor=l=a*i/(t-e)}return l},postProcessTickInterval:function(e){var t=this.ordinalSlope;return t?e/(t/this.closestPointRange):e}}),y(F.prototype,"pan",function(e,t){var n=this,i=n.xAxis[0],o=t.chartX,r=!1;if(i.options.ordinal&&i.series.length){var a,s,l,d,c=n.mouseDownX,u=i.getExtremes(),h=u.dataMax,p=u.min,f=u.max,m=n.hoverPoints,v=i.closestPointRange,b=i.translationSlope*(i.ordinalSlope||v),y=(c-o)/b,w={ordinalPositions:i.getExtendedPositions()},A=i.lin2val,N=i.val2lin;w.ordinalPositions?Ae(y)>1&&(m&&ut(m,function(e){e.setState()}),0>y?(l=w,d=i.ordinalPositions?i:w):(l=i.ordinalPositions?i:w,d=w),s=d.ordinalPositions,h>s[s.length-1]&&s.push(h),n.fixedRange=f-p,a=i.toFixedRange(null,null,A.apply(l,[N.apply(l,[p,!0])+y,!0]),A.apply(d,[N.apply(d,[f,!0])+y,!0])),a.min>=we(u.dataMin,p)&&a.max<=ye(h,f)&&i.setExtremes(a.min,a.max,!0,!1,{trigger:"pan"}),n.mouseDownX=o,g(n.container,{cursor:"move"})):r=!0}else r=!0;r&&e.apply(this,Array.prototype.slice.call(arguments,1))}),y(Gt.prototype,"getSegments",function(e){var t,n=this,i=n.options.gapSize,o=n.xAxis;e.apply(this,Array.prototype.slice.call(arguments,1)),i&&(t=n.segments,ut(t,function(e,n){for(var r=e.length-1;r--;)e[r+1].x-e[r].x>o.closestPointRange*i&&t.splice(n+1,0,e.splice(r+1,e.length-r))}))});var on="dataGrouping",rn=Gt.prototype,an=It.prototype,sn=rn.processData,ln=rn.generatePoints,dn=rn.destroy,cn=an.tooltipHeaderFormatter,un="number",hn={approximation:"average",groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %b %e, %H:%M:%S.%L","%A, %b %e, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %b %e, %H:%M:%S","%A, %b %e, %H:%M:%S","-%H:%M:%S"],minute:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],hour:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],day:["%A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],week:["Week from %A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},pn={line:{},spline:{},area:{},areaspline:{},column:{approximation:"sum",groupPixelWidth:10},arearange:{approximation:"range"},areasplinerange:{approximation:"range"},columnrange:{approximation:"range",groupPixelWidth:10},candlestick:{approximation:"ohlc",groupPixelWidth:10},ohlc:{approximation:"ohlc",groupPixelWidth:5}},gn=[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]],fn={sum:function(e){var t,n=e.length;if(!n&&e.hasNulls)t=null;else if(n)for(t=0;n--;)t+=e[n];return t},average:function(e){var t=e.length,n=fn.sum(e);return typeof n===un&&t&&(n/=t),n},open:function(e){return e.length?e[0]:e.hasNulls?null:H},high:function(e){return e.length?S(e):e.hasNulls?null:H},low:function(e){return e.length?x(e):e.hasNulls?null:H},close:function(e){return e.length?e[e.length-1]:e.hasNulls?null:H},ohlc:function(e,t,n,i){return e=fn.open(e),t=fn.high(t),n=fn.low(n),i=fn.close(i),typeof e===un||typeof t===un||typeof n===un||typeof i===un?[e,t,n,i]:void 0},range:function(e,t){return e=fn.low(e),t=fn.high(t),typeof e===un||typeof t===un?[e,t]:void 0}};rn.groupData=function(e,t,n,i){var o,r,a,s,l=this,d=l.data,c=l.options.data,u=[],h=[],p=e.length,g=!!t,f=[[],[],[],[]],m="function"==typeof i?i:fn[i],v=l.pointArrayMap,b=v&&v.length;for(s=0;p>=s&&!(e[s]>=n[0]);s++);for(;p>=s;s++){for(;(n[1]!==H&&e[s]>=n[1]||s===p)&&(o=n.shift(),a=m.apply(0,f),a!==H&&(u.push(o),h.push(a)),f[0]=[],f[1]=[],f[2]=[],f[3]=[],s!==p););if(s===p)break;if(v){var y,w,A=l.cropStart+s,N=d&&d[A]||l.pointClass.prototype.applyOptions.apply({series:l},[c[A]]);for(y=0;b>y;y++)w=N[v[y]],typeof w===un?f[y].push(w):null===w&&(f[y].hasNulls=!0)}else r=g?t[s]:null,typeof r===un?f[0].push(r):null===r&&(f[0].hasNulls=!0)}return[u,h]},rn.processData=function(){var e,t=this,n=t.chart,i=t.options,o=i[on],r=t.allowDG!==!1&&o&&p(o.enabled,n.options._stock);if(t.forceCrop=r,t.groupPixelWidth=null,t.hasProcessed=!0,sn.apply(t,arguments)!==!1&&r){t.destroyGroupedData();var a,s=t.processedXData,l=t.processedYData,d=n.plotSizeX,u=t.xAxis,h=u.options.ordinal,g=t.groupPixelWidth=u.getGroupPixelWidth&&u.getGroupPixelWidth(),f=t.pointRange;if(g){e=!0,t.points=null;var m=u.getExtremes(),v=m.min,b=m.max,y=h&&u.getGroupIntervalFactor(v,b,t)||1,w=g*(b-v)/d*y,A=u.getTimeTicks(u.normalizeTimeTickInterval(w,o.units||gn),v,b,u.options.startOfWeek,s,t.closestPointRange),N=rn.groupData.apply(t,[s,l,A,o.approximation]),_=N[0],C=N[1];if(o.smoothed){for(a=_.length-1,_[a]=b;a--&&a>0;)_[a]+=w/2;_[0]=v}t.currentDataGrouping=A.info,null===i.pointRange&&(t.pointRange=A.info.totalRange),t.closestPointRange=A.info.totalRange,c(_[0])&&_[0]<u.dataMin&&(u.dataMin=_[0]),t.processedXData=_,t.processedYData=C}else t.currentDataGrouping=null,t.pointRange=f;t.hasGroupedData=e}},rn.destroyGroupedData=function(){var e=this.groupedData;ut(e||[],function(t,n){t&&(e[n]=t.destroy?t.destroy():null)}),this.groupedData=null},rn.generatePoints=function(){ln.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null},an.tooltipHeaderFormatter=function(e){var t,n,i,o,r,s,l,d=this,c=e.series,u=c.options,h=c.tooltipOptions,p=u.dataGrouping,g=h.xDateFormat,f=c.xAxis;if(f&&"datetime"===f.options.type&&p&&a(e.key)){if(n=c.currentDataGrouping,i=p.dateTimeLabelFormats,n)o=i[n.unitName],1===n.count?g=o[0]:(g=o[1],t=o[2]);else if(!g&&i)for(s in K)if(K[s]>=f.closestPointRange||K[s]<=K.day&&e.key%K[s]>0){g=i[s][0];break}r=j(g,e.key),t&&(r+=j(t,e.key+n.totalRange-1)),l=h.headerFormat.replace("{point.key}",r)}else l=cn.call(d,e);return l},rn.destroy=function(){for(var e=this,t=e.groupedData||[],n=t.length;n--;)t[n]&&t[n].destroy();dn.apply(e)},y(rn,"setOptions",function(e,n){var i=e.call(this,n),o=this.type,r=this.chart.options.plotOptions,a=Nt[o].dataGrouping;return pn[o]&&(a||(a=t(hn,pn[o])),i.dataGrouping=t(a,r.series&&r.series.dataGrouping,r[o].dataGrouping,n.dataGrouping)),this.chart.options._stock&&(this.requireSorting=!0),i}),y(R.prototype,"setScale",function(e){e.call(this),ut(this.series,function(e){e.hasProcessed=!1})}),R.prototype.getGroupPixelWidth=function(){var e,t,n,i=this.series,o=i.length,r=0,a=!1;for(e=o;e--;)n=i[e].options.dataGrouping,n&&(r=ye(r,n.groupPixelWidth));for(e=o;e--;)n=i[e].options.dataGrouping,n&&i[e].hasProcessed&&(t=(i[e].processedXData||i[e].data).length,(i[e].groupPixelWidth||t>this.chart.plotSizeX/r||t&&n.forced)&&(a=!0));return a?r:0},Nt.ohlc=t(Nt.column,{lineWidth:1,tooltip:{pointFormat:'<span style="color:{series.color}">●</span> <b> {series.name}</b><br/>Open: {point.open}<br/>High: {point.high}<br/>Low: {point.low}<br/>Close: {point.close}<br/>'},states:{hover:{lineWidth:3}},threshold:null});var mn=m(rt.column,{type:"ohlc",pointArrayMap:["open","high","low","close"],toYData:function(e){return[e.open,e.high,e.low,e.close]},pointValKey:"high",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"},upColorProp:"stroke",getAttribs:function(){rt.column.prototype.getAttribs.apply(this,arguments);var e=this,n=e.options,i=n.states,o=n.upColor||e.color,r=t(e.pointAttr),a=e.upColorProp;r[""][a]=o,r.hover[a]=i.hover.upColor||o,r.select[a]=i.select.upColor||o,ut(e.points,function(e){e.open<e.close&&(e.pointAttr=r)})},translate:function(){var e=this,t=e.yAxis;rt.column.prototype.translate.apply(e),ut(e.points,function(e){null!==e.open&&(e.plotOpen=t.translate(e.open,0,1,0,1)),null!==e.close&&(e.plotClose=t.translate(e.close,0,1,0,1))})},drawPoints:function(){var e,t,n,i,o,r,a,s,l=this,d=l.points,c=l.chart;ut(d,function(d){d.plotY!==H&&(a=d.graphic,e=d.pointAttr[d.selected?"selected":""]||l.pointAttr[tt],i=e["stroke-width"]%2/2,s=me(d.plotX)-i,o=me(d.shapeArgs.width/2),r=["M",s,me(d.yBottom),"L",s,me(d.plotY)],null!==d.open&&(t=me(d.plotOpen)+i,r.push("M",s,t,"L",s-o,t)),null!==d.close&&(n=me(d.plotClose)+i,r.push("M",s,n,"L",s+o,n)),a?a.animate({d:r}):d.graphic=c.renderer.path(r).attr(e).add(l.group))})},animate:null});rt.ohlc=mn,Nt.candlestick=t(Nt.column,{lineColor:"black",lineWidth:1,states:{hover:{lineWidth:2}},tooltip:Nt.ohlc.tooltip,threshold:null,upColor:"white"});var vn=m(mn,{type:"candlestick",pointAttrToOptions:{fill:"color",stroke:"lineColor","stroke-width":"lineWidth"},upColorProp:"fill",getAttribs:function(){rt.ohlc.prototype.getAttribs.apply(this,arguments);var e=this,t=e.options,n=t.states,i=t.upLineColor||t.lineColor,o=n.hover.upLineColor||i,r=n.select.upLineColor||i;ut(e.points,function(e){e.open<e.close&&(e.pointAttr[""].stroke=i,e.pointAttr.hover.stroke=o,e.pointAttr.select.stroke=r)})},drawPoints:function(){var e,t,n,i,o,r,a,s,l,d,c,u,h=this,p=h.points,g=h.chart,f=h.pointAttr[""];ut(p,function(p){d=p.graphic,p.plotY!==H&&(e=p.pointAttr[p.selected?"selected":""]||f,s=e["stroke-width"]%2/2,l=me(p.plotX)-s,t=p.plotOpen,n=p.plotClose,i=fe.min(t,n),o=fe.max(t,n),u=me(p.shapeArgs.width/2),r=me(i)!==me(p.plotY),a=o!==p.yBottom,i=me(i)+s,o=me(o)+s,c=["M",l-u,o,"L",l-u,i,"L",l+u,i,"L",l+u,o,"Z","M",l,i,"L",l,r?me(p.plotY):i,"M",l,o,"L",l,a?me(p.yBottom):o],d?d.animate({d:c}):p.graphic=g.renderer.path(c).attr(e).add(h.group).shadow(h.options.shadow))})}});rt.candlestick=vn;var bn=kt.prototype.symbols;Nt.flags=t(Nt.column,{fillColor:"white",lineWidth:1,pointRange:0,shape:"flag",stackDistance:12,states:{hover:{lineColor:"black",fillColor:"#FCFFC5"}},style:{fontSize:"11px",fontWeight:"bold",textAlign:"center"},tooltip:{pointFormat:"{point.text}<br/>"},threshold:null,y:-30}),rt.flags=m(rt.column,{type:"flags",sorted:!1,noSharedTooltip:!0,allowDG:!1,takeOrdinalPosition:!1,trackerGroups:["markerGroup"],forceCrop:!0,init:Gt.prototype.init,pointAttrToOptions:{fill:"fillColor",stroke:"color","stroke-width":"lineWidth",r:"radius"},translate:function(){rt.column.prototype.translate.apply(this);var e,t,n,i,o,r,a=this,s=a.options,l=a.chart,d=a.points,c=d.length-1,u=s.onSeries,h=u&&l.get(u),p=h&&h.options.step,g=h&&h.points,f=g&&g.length,m=a.xAxis,v=m.getExtremes();if(h&&h.visible&&f)for(r=h.currentDataGrouping,i=g[f-1].x+(r?r.totalRange:0),d.sort(function(e,t){return e.x-t.x});f--&&d[c]&&(e=d[c],n=g[f],!(n.x<=e.x&&n.plotY!==H&&(e.x<=i&&(e.plotY=n.plotY,n.x<e.x&&!p&&(o=g[f+1],o&&o.plotY!==H&&(e.plotY+=(e.x-n.x)/(o.x-n.x)*(o.plotY-n.plotY)))),c--,f++,0>c))););ut(d,function(e,n){e.plotY===H&&(e.x>=v.min&&e.x<=v.max?e.plotY=l.chartHeight-m.bottom-(m.opposite?m.height:0)+m.offset-l.plotTop:e.shapeArgs={}),t=d[n-1],t&&t.plotX===e.plotX&&(t.stackIndex===H&&(t.stackIndex=0),e.stackIndex=t.stackIndex+1)})},drawPoints:function(){var e,n,i,o,r,a,s,l,d,c,u,h=this,p=h.pointAttr[""],g=h.points,f=h.chart,m=f.renderer,v=h.options,b=v.y,y=v.lineWidth%2/2;for(r=g.length;r--;)a=g[r],u=a.plotX>h.xAxis.len,n=a.plotX+(u?y:-y),l=a.stackIndex,o=a.options.shape||v.shape,i=a.plotY,i!==H&&(i=a.plotY+b+y-(l!==H&&l*v.stackDistance)),d=l?H:a.plotX+y,c=l?H:a.plotY,s=a.graphic,i!==H&&n>=0&&!u?(e=a.pointAttr[a.selected?"select":""]||p,s?s.attr({x:n,y:i,r:e.r,anchorX:d,anchorY:c}):s=a.graphic=m.label(a.options.title||v.title||"A",n,i,o,d,c,v.useHTML).css(t(v.style,a.style)).attr(e).attr({align:"flag"===o?"left":"center",width:v.width,height:v.height}).add(h.markerGroup).shadow(v.shadow),a.tooltipPos=[n,i]):s&&(a.graphic=s.destroy())},drawTracker:function(){var e=this,t=e.points;nn.drawTrackerPoint.apply(this),ut(t,function(e){var n=e.graphic;n&&ft(n.element,"mouseover",function(){e.stackIndex>0&&!e.raised&&(e._y=n.y,n.attr({y:e._y-8}),e.raised=!0),ut(t,function(t){t!==e&&t.raised&&t.graphic&&(t.graphic.attr({y:t._y}),t.raised=!1)})})})},animate:Le}),bn.flag=function(e,t,n,i,o){var r=o&&o.anchorX||e,a=o&&o.anchorY||t;return["M",r,a,"L",e,t+i,e,t,e+n,t,e+n,t+i,e,t+i,"M",r,a,"Z"]},ut(["circle","square"],function(e){bn[e+"pin"]=function(t,n,i,o,r){var a,s=r&&r.anchorX,l=r&&r.anchorY,d=bn[e](t,n,i,o);return s&&l&&(a=n>l?n:n+o,d.push("M",s,a,"L",s,l)),d}}),B===he.VMLRenderer&&ut(["flag","circlepin","squarepin"],function(e){$t.prototype.symbols[e]=bn[e]});var yn,wn=[].concat(gn),An=function(e){return Math[e].apply(0,ht(arguments,function(e){return"number"==typeof e}))};wn[4]=["day",[1,2,3,4]],wn[5]=["week",[1,2,3]],yn=rt.areaspline===H?"line":"areaspline",e(G,{navigator:{handles:{backgroundColor:"#ebe7e8",borderColor:"#b2b1b6"},height:40,margin:25,maskFill:"rgba(128,179,236,0.3)",maskInside:!0,outlineColor:"#b2b1b6",outlineWidth:1,series:{type:yn,color:"#4572A7",compare:null,fillOpacity:.05,dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,smoothed:!0,units:wn},dataLabels:{enabled:!1,zIndex:2},id:We+"navigator-series",lineColor:"#4572A7",lineWidth:1,marker:{enabled:!1},pointRange:0,shadow:!1,threshold:null},xAxis:{tickWidth:0,lineWidth:0,gridLineColor:"#EEE",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#888"},x:3,y:-4},crosshair:!1},yAxis:{gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickWidth:0}},scrollbar:{
height:Ee?20:14,barBackgroundColor:"#bfc8d1",barBorderRadius:0,barBorderWidth:1,barBorderColor:"#bfc8d1",buttonArrowColor:"#666",buttonBackgroundColor:"#ebe7e8",buttonBorderColor:"#bbb",buttonBorderRadius:0,buttonBorderWidth:1,minWidth:6,rifleColor:"#666",trackBackgroundColor:"#eeeeee",trackBorderColor:"#eeeeee",trackBorderWidth:1,liveRedraw:Ie&&!Ee}}),L.prototype={drawHandle:function(e,t){var n,i=this,o=i.chart,r=o.renderer,a=i.elementsToDestroy,s=i.handles,l=i.navigatorOptions.handles,d={fill:l.backgroundColor,stroke:l.borderColor,"stroke-width":1};i.rendered||(s[t]=r.g("navigator-handle-"+["left","right"][t]).css({cursor:"e-resize"}).attr({zIndex:4-t}).add(),n=r.rect(-4.5,0,9,16,0,1).attr(d).add(s[t]),a.push(n),n=r.path(["M",-1.5,4,"L",-1.5,12,"M",.5,4,"L",.5,12]).attr(d).add(s[t]),a.push(n)),s[t][o.isResizing?"animate":"attr"]({translateX:i.scrollerLeft+i.scrollbarHeight+parseInt(e,10),translateY:i.top+i.height/2-8})},drawScrollbarButton:function(e){var t,n=this,i=n.chart,o=i.renderer,r=n.elementsToDestroy,a=n.scrollbarButtons,s=n.scrollbarHeight,l=n.scrollbarOptions;n.rendered||(a[e]=o.g().add(n.scrollbarGroup),t=o.rect(-.5,-.5,s+1,s+1,l.buttonBorderRadius,l.buttonBorderWidth).attr({stroke:l.buttonBorderColor,"stroke-width":l.buttonBorderWidth,fill:l.buttonBackgroundColor}).add(a[e]),r.push(t),t=o.path(["M",s/2+(e?-1:1),s/2-3,"L",s/2+(e?-1:1),s/2+3,s/2+(e?2:-2),s/2]).attr({fill:l.buttonArrowColor}).add(a[e]),r.push(t)),e&&a[e].attr({translateX:n.scrollerWidth-s})},render:function(e,t,n,i){var o,r,a,s,l,d,c,u,h,g,f,m,v,b=this,y=b.chart,w=y.renderer,A=b.scrollbarGroup,N=b.navigatorGroup,_=b.scrollbar,C=b.xAxis,x=b.scrollbarTrack,S=b.scrollbarHeight,T=b.scrollbarEnabled,k=b.navigatorOptions,$=b.scrollbarOptions,D=$.minWidth,M=b.height,E=b.top,P=b.navigatorEnabled,I=k.outlineWidth,O=I/2,R=0,F=b.outlineHeight,V=$.barBorderRadius,L=$.barBorderWidth,U=E+O;isNaN(e)||(b.navigatorLeft=o=p(C.left,y.plotLeft+S),b.navigatorWidth=r=p(C.len,y.plotWidth-2*S),b.scrollerLeft=a=o-S,b.scrollerWidth=s=s=r+2*S,C.getExtremes&&(v=b.getUnionExtremes(!0),!v||v.dataMin===C.min&&v.dataMax===C.max||C.setExtremes(v.dataMin,v.dataMax,!0,!1)),n=p(n,C.translate(e)),i=p(i,C.translate(t)),(isNaN(n)||Ae(n)===1/0)&&(n=0,i=s),C.translate(i,!0)-C.translate(n,!0)<y.xAxis[0].minRange||(b.zoomedMax=we(ye(n,i),r),b.zoomedMin=ye(b.fixedWidth?b.zoomedMax-b.fixedWidth:we(n,i),0),b.range=b.zoomedMax-b.zoomedMin,d=me(b.zoomedMax),l=me(b.zoomedMin),c=d-l,b.rendered||(P&&(b.navigatorGroup=N=w.g("navigator").attr({zIndex:3}).add(),b.leftShade=w.rect().attr({fill:k.maskFill}).add(N),k.maskInside||(b.rightShade=w.rect().attr({fill:k.maskFill}).add(N)),b.outline=w.path().attr({"stroke-width":I,stroke:k.outlineColor}).add(N)),T&&(b.scrollbarGroup=A=w.g("scrollbar").add(),g=$.trackBorderWidth,b.scrollbarTrack=x=w.rect().attr({x:0,y:-g%2/2,fill:$.trackBackgroundColor,stroke:$.trackBorderColor,"stroke-width":g,r:$.trackBorderRadius||0,height:S}).add(A),b.scrollbar=_=w.rect().attr({y:-L%2/2,height:S,fill:$.barBackgroundColor,stroke:$.barBorderColor,"stroke-width":L,r:V}).add(A),b.scrollbarRifles=w.path().attr({stroke:$.rifleColor,"stroke-width":1}).add(A))),m=y.isResizing?"animate":"attr",P&&(b.leftShade[m](k.maskInside?{x:o+l,y:E,width:d-l,height:M}:{x:o,y:E,width:l,height:M}),b.rightShade&&b.rightShade[m]({x:o+d,y:E,width:r-d,height:M}),b.outline[m]({d:[Ze,a,U,Qe,o+l+O,U,o+l+O,U+F,Qe,o+d-O,U+F,Qe,o+d-O,U,a+s,U].concat(k.maskInside?[Ze,o+l+O,U,Qe,o+d-O,U]:[])}),b.drawHandle(l+O,0),b.drawHandle(d+O,1)),T&&A&&(b.drawScrollbarButton(0),b.drawScrollbarButton(1),A[m]({translateX:a,translateY:me(U+M)}),x[m]({width:s}),u=S+l,h=c-L,D>h&&(R=(D-h)/2,h=D,u-=R),b.scrollbarPad=R,_[m]({x:ve(u)+L%2/2,width:h}),f=S+l+c/2-.5,b.scrollbarRifles.attr({visibility:c>12?Ke:qe})[m]({d:[Ze,f-3,S/4,Qe,f-3,2*S/3,Ze,f,S/4,Qe,f,2*S/3,Ze,f+3,S/4,Qe,f+3,2*S/3]})),b.scrollbarPad=R,b.rendered=!0))},addEvents:function(){var e,t=this.chart.container,n=this.mouseDownHandler,i=this.mouseMoveHandler,o=this.mouseUpHandler;e=[[t,"mousedown",n],[t,"mousemove",i],[document,"mouseup",o]],z&&e.push([t,"touchstart",n],[t,"touchmove",i],[document,"touchend",o]),ut(e,function(e){ft.apply(null,e)}),this._events=e},removeEvents:function(){ut(this._events,function(e){mt.apply(null,e)}),this._events=H,this.navigatorEnabled&&this.baseSeries&&mt(this.baseSeries,"updatedData",this.updatedDataHandler)},init:function(){var e,n,i,o,r,a=this,s=a.chart,l=a.scrollbarHeight,d=a.navigatorOptions,c=a.height,u=a.top,h=document.body.style,g=a.baseSeries;a.mouseDownHandler=function(t){t=s.pointer.normalize(t);var n,o,l,d,u=a.zoomedMin,p=a.zoomedMax,g=a.top,f=a.scrollbarHeight,m=a.scrollerLeft,v=a.scrollerWidth,b=a.navigatorLeft,y=a.navigatorWidth,w=a.scrollbarPad,A=a.range,N=t.chartX,_=t.chartY,C=s.xAxis[0],x=Ee?10:7;_>g&&g+c+f>_&&(d=!a.scrollbarEnabled||g+c>_,d&&fe.abs(N-u-b)<x?(a.grabbedLeft=!0,a.otherHandlePos=p,a.fixedExtreme=C.max,s.fixedRange=null):d&&fe.abs(N-p-b)<x?(a.grabbedRight=!0,a.otherHandlePos=u,a.fixedExtreme=C.min,s.fixedRange=null):N>b+u-w&&b+p+w>N?(a.grabbedCenter=N,a.fixedWidth=A,s.renderer.isSVG&&(r=h.cursor,h.cursor="ew-resize"),i=N-u):N>m&&m+v>N&&(l=d?N-b-A/2:b>N?u-.2*A:N>m+v-f?u+.2*A:b+u>N?u-A:p,0>l?l=0:l+A>=y&&(l=y-A,n=e.dataMax),l!==u&&(a.fixedWidth=A,o=e.toFixedRange(l,l+A,null,n),C.setExtremes(o.min,o.max,!0,!1,{trigger:"navigator"}))))},a.mouseMoveHandler=function(e){var t,n=a.scrollbarHeight,r=a.navigatorLeft,l=a.navigatorWidth,d=a.scrollerLeft,c=a.scrollerWidth,u=a.range;0!==e.pageX&&(e=s.pointer.normalize(e),t=e.chartX,r>t?t=r:t>d+c-n&&(t=d+c-n),a.grabbedLeft?(o=!0,a.render(0,0,t-r,a.otherHandlePos)):a.grabbedRight?(o=!0,a.render(0,0,a.otherHandlePos,t-r)):a.grabbedCenter&&(o=!0,i>t?t=i:t>l+i-u&&(t=l+i-u),a.render(0,0,t-i,t-i+u)),o&&a.scrollbarOptions.liveRedraw&&setTimeout(function(){a.mouseUpHandler(e)},0))},a.mouseUpHandler=function(t){var n,l,d;o&&(a.zoomedMin===a.otherHandlePos?l=a.fixedExtreme:a.zoomedMax===a.otherHandlePos&&(d=a.fixedExtreme),n=e.toFixedRange(a.zoomedMin,a.zoomedMax,l,d),s.xAxis[0].setExtremes(n.min,n.max,!0,!1,{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:t})),"mousemove"!==t.type&&(a.grabbedLeft=a.grabbedRight=a.grabbedCenter=a.fixedWidth=a.fixedExtreme=a.otherHandlePos=o=i=null,h.cursor=r||"")};var f=s.xAxis.length,m=s.yAxis.length;s.extraBottomMargin=a.outlineHeight+d.margin,a.navigatorEnabled?(a.xAxis=e=new R(s,t({ordinal:g&&g.xAxis.options.ordinal},d.xAxis,{id:"navigator-x-axis",isX:!0,type:"datetime",index:f,height:c,offset:0,offsetLeft:l,offsetRight:-l,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:0,maxPadding:0,zoomEnabled:!1})),a.yAxis=n=new R(s,t(d.yAxis,{id:"navigator-y-axis",alignTicks:!1,height:c,offset:0,index:m,zoomEnabled:!1})),g||d.series.data?a.addBaseSeries():0===s.series.length&&y(s,"redraw",function(e,t){s.series.length>0&&!a.series&&(a.setBaseSeries(),s.redraw=e),e.call(s,t)})):a.xAxis=e={translate:function(e,t){var n=s.xAxis[0],i=n.getExtremes(),o=s.plotWidth-2*l,r=An("min",n.options.min,i.dataMin),a=An("max",n.options.max,i.dataMax)-r;return t?e*a/o+r:o*(e-r)/a},toFixedRange:R.prototype.toFixedRange},y(s,"getMargins",function(t){var i=this.legend,o=i.options;t.call(this),a.top=u=a.navigatorOptions.top||this.chartHeight-a.height-a.scrollbarHeight-this.spacing[2]-("bottom"===o.verticalAlign&&o.enabled&&!o.floating?i.legendHeight+p(o.margin,10):0),e&&n&&(e.options.top=n.options.top=u,e.setAxisSize(),n.setAxisSize())}),a.addEvents()},getUnionExtremes:function(e){var t=this.chart.xAxis[0],n=this.xAxis,i=n.options,o=t.options;return e&&null===t.dataMin?void 0:{dataMin:An("min",i&&i.min,o.min,t.dataMin,n.dataMin),dataMax:An("max",i&&i.max,o.max,t.dataMax,n.dataMax)}},setBaseSeries:function(e){var t=this.chart;e=e||t.options.navigator.baseSeries,this.series&&this.series.remove(),this.baseSeries=t.series[e]||"string"==typeof e&&t.get(e)||t.series[0],this.xAxis&&this.addBaseSeries()},addBaseSeries:function(){var n,i,o=this.baseSeries,r=o?o.options:{},a=r.data,s=this.navigatorOptions.series;i=s.data,this.hasNavigatorData=!!i,n=t(r,s,{enableMouseTracking:!1,group:"nav",padXAxis:!1,xAxis:"navigator-x-axis",yAxis:"navigator-y-axis",name:"Navigator",showInLegend:!1,isInternal:!0,visible:!0}),n.data=i||a,this.series=this.chart.initSeries(n),o&&this.navigatorOptions.adaptToUpdatedData!==!1&&(ft(o,"updatedData",this.updatedDataHandler),o.userOptions.events=e(o.userOptions.event,{updatedData:this.updatedDataHandler}))},updatedDataHandler:function(){var e,t,n,i,o,r=this.chart.scroller,a=r.baseSeries,s=a.xAxis,l=s.getExtremes(),d=l.min,c=l.max,u=l.dataMin,h=l.dataMax,p=c-d,g=r.series,f=g.xData,m=!!s.setExtremes;t=c>=f[f.length-1]-(this.closestPointRange||0),e=u>=d,r.hasNavigatorData||(g.options.pointStart=a.xData[0],g.setData(a.options.data,!1),o=!0),e&&(i=u,n=i+p),t&&(n=h,e||(i=ye(n-p,g.xData[0]))),m&&(e||t)?isNaN(i)||s.setExtremes(i,n,!0,!1,{trigger:"updatedData"}):(o&&this.chart.redraw(!1),r.render(ye(d,u),we(c,h)))},destroy:function(){var e=this;e.removeEvents(),ut([e.xAxis,e.yAxis,e.leftShade,e.rightShade,e.outline,e.scrollbarTrack,e.scrollbarRifles,e.scrollbarGroup,e.scrollbar],function(e){e&&e.destroy&&e.destroy()}),e.xAxis=e.yAxis=e.leftShade=e.rightShade=e.outline=e.scrollbarTrack=e.scrollbarRifles=e.scrollbarGroup=e.scrollbar=null,ut([e.scrollbarButtons,e.handles,e.elementsToDestroy],function(e){T(e)})}},he.Scroller=L,y(R.prototype,"zoom",function(e,t,n){var i,o,r=this.chart,a=r.options,s=a.chart.zoomType,l=a.navigator,d=a.rangeSelector;return this.isXAxis&&(l&&l.enabled||d&&d.enabled)&&("x"===s?r.resetZoomButton="blocked":"y"===s?o=!1:"xy"===s&&(i=this.previousZoom,c(t)?this.previousZoom=[this.min,this.max]:i&&(t=i[0],n=i[1],delete this.previousZoom))),o!==H?o:e.call(this,t,n)}),y(F.prototype,"init",function(e,t,n){ft(this,"beforeRender",function(){var e=this.options;(e.navigator.enabled||e.scrollbar.enabled)&&(this.scroller=new L(this))}),e.call(this,t,n)}),y(Gt.prototype,"addPoint",function(e,t,n,i,a){var s=this.options.turboThreshold;s&&this.xData.length>s&&o(t)&&!r(t)&&this.chart.scroller&&X(20,!0),e.call(this,t,n,i,a)}),e(G,{rangeSelector:{buttonTheme:{width:28,height:18,fill:"#f7f7f7",padding:2,r:0,"stroke-width":0,style:{color:"#444",cursor:"pointer",fontWeight:"normal"},zIndex:7,states:{hover:{fill:"#e7e7e7"},select:{fill:"#e7f0f9",style:{color:"black",fontWeight:"bold"}}}},inputPosition:{align:"right"},labelStyle:{color:"#666"}}}),G.lang=t(G.lang,{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"From",rangeSelectorTo:"To"}),U.prototype={clickButton:function(e,n){var i,o,r,a,s,l,d=this,c=d.selected,u=d.chart,h=d.buttons,g=d.buttonOptions[e],f=u.xAxis[0],m=u.scroller&&u.scroller.getUnionExtremes()||f||{},v=m.dataMin,b=m.dataMax,y=f&&me(we(f.max,p(b,f.max))),w=new Z(y),A=g.type,N=g.count,_=g._range;if(null!==v&&null!==b&&e!==d.selected){if("month"===A||"year"===A)l={month:"Month",year:"FullYear"}[A],w["set"+l](w["get"+l]()-N),i=w.getTime(),v=p(v,Number.MIN_VALUE),isNaN(i)||v>i?(i=v,y=we(i+_,b)):_=y-i;else if(_)i=ye(y-_,v),y=we(i+_,b);else if("ytd"===A){if(!f)return void ft(u,"beforeRender",function(){d.clickButton(e)});b===H&&(v=Number.MAX_VALUE,b=Number.MIN_VALUE,ut(u.series,function(e){var t=e.xData;v=we(t[0],v),b=ye(t[t.length-1],b)}),n=!1),o=new Z(b),s=o.getFullYear(),i=a=ye(v||0,Z.UTC(s,0,1)),o=o.getTime(),y=we(b||o,o)}else"all"===A&&f&&(i=v,y=b);h[c]&&h[c].setState(0),h[e]&&h[e].setState(2),u.fixedRange=_,f?(f.setExtremes(i,y,p(n,1),0,{trigger:"rangeSelectorButton",rangeSelectorButton:g}),d.setSelected(e)):(r=u.options.xAxis,r[0]=t(r[0],{range:_,min:a}),d.setSelected(e))}},setSelected:function(e){this.selected=this.options.selected=e},defaultButtons:[{type:"month",count:1,text:"1m"},{type:"month",count:3,text:"3m"},{type:"month",count:6,text:"6m"},{type:"ytd",text:"YTD"},{type:"year",count:1,text:"1y"},{type:"all",text:"All"}],init:function(e){var t=this,n=e.options.rangeSelector,i=n.buttons||[].concat(t.defaultButtons),o=n.selected,r=t.blurInputs=function(){var e=t.minInput,n=t.maxInput;e&&e.blur&&vt(e,"blur"),n&&n.blur&&vt(n,"blur")};t.chart=e,t.options=n,t.buttons=[],e.extraTopMargin=35,t.buttonOptions=i,ft(e.container,"mousedown",r),ft(e,"resize",r),ut(i,t.computeButtonRange),o!==H&&i[o]&&this.clickButton(o,!1),ft(e,"load",function(){ft(e.xAxis[0],"afterSetExtremes",function(){t.updateButtonStates(!0)})})},updateButtonStates:function(e){var t=this,n=this.chart,i=n.xAxis[0],o=n.scroller&&n.scroller.getUnionExtremes()||i,r=o.dataMin,a=o.dataMax,s=t.selected,l=t.options.allButtonsEnabled,d=t.buttons;e&&n.fixedRange!==me(i.max-i.min)&&(d[s]&&d[s].setState(0),t.setSelected(null)),ut(t.buttonOptions,function(e,n){var o=e._range,c=o>a-r,u=o<i.minRange,h="all"===e.type&&i.max-i.min>=a-r&&2!==d[n].state,p="ytd"===e.type&&j("%Y",r)===j("%Y",a);o===me(i.max-i.min)&&n!==s?(t.setSelected(n),d[n].setState(2)):!l&&(c||u||h||p)?d[n].setState(3):3===d[n].state&&d[n].setState(0)})},computeButtonRange:function(e){var t=e.type,n=e.count||1,i={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5};i[t]?e._range=i[t]*n:("month"===t||"year"===t)&&(e._range=24*{month:30,year:365}[t]*36e5*n)},setInputValue:function(e,t){var n=this.chart.options.rangeSelector;c(t)&&(this[e+"Input"].HCTime=t),this[e+"Input"].value=j(n.inputEditDateFormat||"%Y-%m-%d",this[e+"Input"].HCTime),this[e+"DateBox"].attr({text:j(n.inputDateFormat||"%b %e, %Y",this[e+"Input"].HCTime)})},drawInput:function(i){var o,r,a,s=this,l=s.chart,d=l.renderer.style,c=l.renderer,u=l.options.rangeSelector,h=G.lang,p=s.div,m="min"===i,v=this.inputGroup;this[i+"Label"]=r=c.label(h[m?"rangeSelectorFrom":"rangeSelectorTo"],this.inputGroup.offset).attr({padding:2}).css(t(d,u.labelStyle)).add(v),v.offset+=r.width+5,this[i+"DateBox"]=a=c.label("",v.offset).attr({padding:2,width:u.inputBoxWidth||90,height:u.inputBoxHeight||17,stroke:u.inputBoxBorderColor||"silver","stroke-width":1}).css(t({textAlign:"center",color:"#444"},d,u.inputStyle)).on("click",function(){s[i+"Input"].focus()}).add(v),v.offset+=a.width+(m?10:0),this[i+"Input"]=o=f("input",{name:i,className:We+"range-selector",type:"text"},e({position:Ge,border:0,width:"1px",height:"1px",padding:0,textAlign:"center",fontSize:d.fontSize,fontFamily:d.fontFamily,top:l.plotTop+Xe},u.inputStyle),p),o.onfocus=function(){g(this,{left:v.translateX+a.x+Xe,top:v.translateY+Xe,width:a.width-2+Xe,height:a.height-2+Xe,border:"2px solid silver"})},o.onblur=function(){g(this,{border:0,width:"1px",height:"1px"}),s.setInputValue(i)},o.onchange=function(){var e=o.value,t=(u.inputDateParser||Z.parse)(e),i=l.xAxis[0],r=i.dataMin,a=i.dataMax;isNaN(t)&&(t=e.split("-"),t=Z.UTC(n(t[0]),n(t[1])-1,n(t[2]))),isNaN(t)||(G.global.useUTC||(t+=60*(new Z).getTimezoneOffset()*1e3),m?t>s.maxInput.HCTime?t=H:r>t&&(t=r):t<s.minInput.HCTime?t=H:t>a&&(t=a),t!==H&&l.xAxis[0].setExtremes(m?t:i.min,m?i.max:t,H,H,{trigger:"rangeSelectorInput"}))}},render:function(t,n){var i,o,r=this,a=r.chart,s=a.renderer,l=a.container,d=a.options,c=d.exporting&&d.navigation&&d.navigation.buttonOptions,u=d.rangeSelector,h=r.buttons,g=G.lang,m=r.div,v=r.inputGroup,b=u.buttonTheme,y=u.inputEnabled!==!1,w=b&&b.states,A=a.plotLeft;r.rendered||(r.zoomText=s.text(g.rangeSelectorZoom,A,a.plotTop-20).css(u.labelStyle).add(),o=A+r.zoomText.getBBox().width+5,ut(r.buttonOptions,function(e,t){h[t]=s.button(e.text,o,a.plotTop-35,function(){r.clickButton(t),r.isActive=!0},b,w&&w.hover,w&&w.select).css({textAlign:"center"}).add(),o+=h[t].width+p(u.buttonSpacing,5),r.selected===t&&h[t].setState(2)}),r.updateButtonStates(),y&&(r.div=m=f("div",null,{position:"relative",height:0,zIndex:1}),l.parentNode.insertBefore(m,l),r.inputGroup=v=s.g("input-group").add(),v.offset=0,r.drawInput("min"),r.drawInput("max"))),y&&(i=a.plotTop-45,v.align(e({y:i,width:v.offset,x:c&&i<(c.y||0)+c.height-a.spacing[0]?-40:0},u.inputPosition),!0,a.spacingBox),r.setInputValue("min",t),r.setInputValue("max",n)),r.rendered=!0},destroy:function(){var e,t=this.minInput,n=this.maxInput,i=this.chart,o=this.blurInputs;mt(i.container,"mousedown",o),mt(i,"resize",o),T(this.buttons),t&&(t.onfocus=t.onblur=t.onchange=null),n&&(n.onfocus=n.onblur=n.onchange=null);for(e in this)this[e]&&"chart"!==e&&(this[e].destroy?this[e].destroy():this[e].nodeType&&k(this[e])),this[e]=null}},R.prototype.toFixedRange=function(e,t,n,i){var o=this.chart&&this.chart.fixedRange,r=p(n,this.translate(e,!0)),a=p(i,this.translate(t,!0)),s=o&&(a-r)/o;return s>.7&&1.3>s&&(i?r=a-o:a=r+o),{min:r,max:a}},y(F.prototype,"init",function(e,t,n){ft(this,"init",function(){this.options.rangeSelector.enabled&&(this.rangeSelector=new U(this))}),e.call(this,t,n)}),he.RangeSelector=U,F.prototype.callbacks.push(function(e){function t(){a=e.xAxis[0].getExtremes(),s.render(a.min,a.max)}function n(){a=e.xAxis[0].getExtremes(),isNaN(a.min)||l.render(a.min,a.max)}function i(e){"navigator-drag"!==e.triggerOp&&s.render(e.min,e.max)}function o(e){l.render(e.min,e.max)}function r(){s&&mt(e.xAxis[0],"afterSetExtremes",i),l&&(mt(e,"resize",n),mt(e.xAxis[0],"afterSetExtremes",o))}var a,s=e.scroller,l=e.rangeSelector;s&&(ft(e.xAxis[0],"afterSetExtremes",i),y(e,"drawChartBox",function(e){var n=this.isDirtyBox;e.call(this),n&&t()}),t()),l&&(ft(e.xAxis[0],"afterSetExtremes",o),ft(e,"resize",n),n()),ft(e,"destroy",r)}),he.StockChart=function(e,n){var i,o=e.series,r=p(e.navigator&&e.navigator.enabled,!0),a=r?{startOnTick:!1,endOnTick:!1}:null,s={marker:{enabled:!1,radius:2},states:{hover:{lineWidth:2}}},l={shadow:!1,borderWidth:0};return e.xAxis=gt(h(e.xAxis||{}),function(e){return t({minPadding:0,maxPadding:0,ordinal:!0,title:{text:null},labels:{overflow:"justify"},showLastLabel:!0},e,{type:"datetime",categories:null},a)}),e.yAxis=gt(h(e.yAxis||{}),function(e){return i=p(e.opposite,!0),t({labels:{y:-2},opposite:i,showLastLabel:!1,title:{text:null}},e)}),e.series=null,e=t({chart:{panning:!0,pinchType:"x"},navigator:{enabled:!0},scrollbar:{enabled:!0},rangeSelector:{enabled:!0},title:{text:null,style:{fontSize:"16px"}},tooltip:{shared:!0,crosshairs:!0},legend:{enabled:!1},plotOptions:{line:s,spline:s,area:s,areaspline:s,arearange:s,areasplinerange:s,column:l,columnrange:l,candlestick:l,ohlc:l}},e,{_stock:!0,chart:{inverted:!1}}),e.series=o,new F(e,n)},y(Rt.prototype,"init",function(e,t,n){var i=n.chart.pinchType||"";e.call(this,t,n),this.pinchX=this.pinchHor=-1!==i.indexOf("x"),this.pinchY=this.pinchVert=-1!==i.indexOf("y"),this.hasZoom=this.hasZoom||this.pinchHor||this.pinchVert}),y(R.prototype,"autoLabelAlign",function(e){var t,n=this.chart,i=this.options,o=n._labelPanes=n._labelPanes||{},r=this.options.labels;return this.chart.options._stock&&"yAxis"===this.coll&&(t=i.top+","+i.height,!o[t]&&r.enabled)?(15===r.x&&(r.x=0),void 0===r.align&&(r.align="right"),o[t]=1,"right"):e.call(this,[].slice.call(arguments,1))}),R.prototype.getPlotLinePath=function(e,t,n,i,o){var r,a,s,l,d,u,h,g=this,f=this.isLinked&&!this.series?this.linkedParent.series:this.series,m=g.chart,v=m.renderer,b=g.left,y=g.top,w=[];return("xAxis"===g.coll||"yAxis"===g.coll)&&(d=g.isXAxis?c(g.options.yAxis)?[m.yAxis[g.options.yAxis]]:gt(f,function(e){return e.yAxis}):c(g.options.xAxis)?[m.xAxis[g.options.xAxis]]:gt(f,function(e){return e.xAxis})),u=g.isXAxis?m.yAxis:m.xAxis,ut(u,function(e){if(c(e.options.id)?-1===e.options.id.indexOf("navigator"):!0){var t=e.isXAxis?"yAxis":"xAxis",n=c(e.options[t])?m[t][e.options[t]]:m[t][0];g===n&&d.push(e)}}),h=d.length?[]:[g],ut(d,function(e){-1===ct(e,h)&&h.push(e)}),o=p(o,g.translate(e,null,null,n)),isNaN(o)||(g.horiz?ut(h,function(e){a=e.top,l=a+e.len,r=s=me(o+g.transB),(r>=b&&r<=b+g.width||i)&&w.push("M",r,a,"L",s,l)}):ut(h,function(e){r=e.left,s=r+e.width,a=l=me(y+g.height-o),(a>=y&&a<=y+g.height||i)&&w.push("M",r,a,"L",s,l)})),w.length>0?v.crispPolyLine(w,t||1):void 0},R.prototype.getPlotBandPath=function(e,t){var n,i=this.getPlotLinePath(t),o=this.getPlotLinePath(e),r=[];if(o&&i)for(n=0;n<o.length;n+=6)r.push("M",o[n+1],o[n+2],"L",o[n+4],o[n+5],i[n+4],i[n+5],i[n+1],i[n+2]);else r=null;return r},kt.prototype.crispPolyLine=function(e,t){var n;for(n=0;n<e.length;n+=6)e[n+1]===e[n+4]&&(e[n+1]=e[n+4]=me(e[n+1])-t%2/2),e[n+2]===e[n+5]&&(e[n+2]=e[n+5]=me(e[n+2])+t%2/2);return e},B===he.VMLRenderer&&($t.prototype.crispPolyLine=kt.prototype.crispPolyLine),y(R.prototype,"hideCrosshair",function(e,t){e.call(this,t),c(this.crossLabelArray)&&(c(t)?this.crossLabelArray[t]&&this.crossLabelArray[t].hide():ut(this.crossLabelArray,function(e){e.hide()}))}),y(R.prototype,"drawCrosshair",function(t,n,i){if(t.call(this,n,i),c(this.crosshair.label)&&this.crosshair.label.enabled&&c(i)){var o,r,a,s,l=this.chart,d=this.options.crosshair.label,u=this.isXAxis?"x":"y",h=this.horiz,g=this.opposite,f=this.left,m=this.top,v=this.crossLabel,b=d.format,y="";if(v||(v=this.crossLabel=l.renderer.label().attr({align:d.align||(h?"center":g?"right"===this.labelAlign?"right":"left":"left"===this.labelAlign?"left":"center"),zIndex:12,height:h?16:H,fill:d.backgroundColor||this.series[0]&&this.series[0].color||"gray",padding:p(d.padding,2),stroke:d.borderColor||null,"stroke-width":d.borderWidth||0}).css(e({color:"white",fontWeight:"normal",fontSize:"11px",textAlign:"center"},d.style)).add()),h?(o=i.plotX+f,r=m+(g?0:this.height)):(o=g?this.width+f:0,r=i.plotY+m),m>r||r>m+this.height)return void this.hideCrosshair();b||d.formatter||(this.isDatetimeAxis&&(y="%b %d, %Y"),b="{value"+(y?":"+y:"")+"}"),v.attr({text:b?A(b,{value:i[u]}):d.formatter.call(this,i[u]),x:o,y:r,visibility:Ke}),a=v.getBBox(),h?("inside"===this.options.tickPosition&&!g||"inside"!==this.options.tickPosition&&g)&&(r=v.y-a.height):r=v.y-a.height/2,s=h?{left:f-a.x,right:f+this.width-a.x}:{left:"left"===this.labelAlign?f:0,right:"right"===this.labelAlign?f+this.width:l.chartWidth},v.translateX<s.left&&(o+=s.left-v.translateX),v.translateX+a.width>=s.right&&(o-=v.translateX+a.width-s.right),v.attr({x:o,y:r,visibility:Ke})}});var Nn=rn.init,_n=rn.processData,Cn=Yt.prototype.tooltipFormatter;rn.init=function(){Nn.apply(this,arguments),this.setCompare(this.options.compare)},rn.setCompare=function(e){this.modifyValue="value"===e||"percent"===e?function(t,n){var i=this.compareValue;return t!==H&&(t="value"===e?t-i:t=100*(t/i)-100,n&&(n.change=t)),t}:null,this.chart.hasRendered&&(this.isDirty=!0)},rn.processData=function(){var e,t,n,i=this,o=0;if(_n.apply(this,arguments),i.xAxis&&i.processedYData)for(e=i.processedXData,t=i.processedYData,n=t.length;n>o;o++)if(typeof t[o]===un&&e[o]>=i.xAxis.min){i.compareValue=t[o];break}},y(rn,"getExtremes",function(e){e.apply(this,[].slice.call(arguments,1)),this.modifyValue&&(this.dataMax=this.modifyValue(this.dataMax),this.dataMin=this.modifyValue(this.dataMin))}),R.prototype.setCompare=function(e,t){this.isXAxis||(ut(this.series,function(t){t.setCompare(e)}),p(t,!0)&&this.chart.redraw())},Yt.prototype.tooltipFormatter=function(e){var t=this;return e=e.replace("{point.change}",(t.change>0?"+":"")+v(t.change,p(t.series.tooltipOptions.changeDecimals,2))),Cn.apply(this,[e])},y(Gt.prototype,"render",function(e){this.chart.options._stock&&(!this.clipBox&&this.animate&&-1!==this.animate.toString().indexOf("sharedClip")?(this.clipBox=t(this.chart.clipBox),this.clipBox.width=this.xAxis.len,this.clipBox.height=this.yAxis.len):this.chart[this.sharedClipKey]&&this.chart[this.sharedClipKey].attr({width:this.xAxis.len,height:this.yAxis.len})),e.call(this)}),e(he,{Axis:R,Chart:F,Color:Tt,Point:Yt,Tick:O,Renderer:B,Series:Gt,SVGElement:I,SVGRenderer:kt,arrayMin:x,arrayMax:S,charts:Ue,dateFormat:j,format:A,pathAnim:W,getOptions:P,hasBidiBug:Oe,isTouchDevice:Ee,numberFormat:v,seriesTypes:rt,setOptions:E,addEvent:ft,removeEvent:mt,createElement:f,discardElement:k,css:g,each:ut,extend:e,map:gt,merge:t,pick:p,splat:h,extendClass:m,pInt:n,wrap:y,svg:Ie,canvas:Re,vml:!Ie&&!Re,product:Be,version:ze})}(),e.Highcharts=Highcharts}.apply(e,arguments)})}(this),define("main/components/views/appletViews/eventsGistView/views/eventsBarGraphConfiguration",["moment"],function(e){function t(t){var n=e.utc().startOf("day").valueOf();return{global:{useUTC:!1,timezoneOffset:300},chart:{animation:!0,zoomType:"",type:"column",spacing:[1,1,1,1],backgroundColor:"#F2F2F2",events:{click:function(e){$(e.target).closest("[data-toggle=popover]").trigger("click")}}},credits:{enabled:!1},legend:{enabled:!1},title:{text:"",enabled:!1},tooltip:{enabled:!1,hideDelay:10,borderWidth:1,formatter:function(){return"now"===this.series.name?"Now: "+Highcharts.dateFormat("%m/%d/%Y",this.x):Highcharts.numberFormat(this.y,0)+" on "+Highcharts.dateFormat("%m/%d/%Y",this.x)}},plotOptions:{series:{cursor:"pointer",pointWidth:6},column:{grouping:!1,shadow:!1}},xAxis:{labels:{enabled:!1,style:{color:"red",fontSize:8}},plotLines:[{color:"#F20000",value:n,dashStyle:"solid",width:2,zIndex:5}],type:"datetime",tickWidth:1,startOnTick:!1,endOnTick:!1},yAxis:[{labels:{enabled:!1},lineWidth:1,minPadding:.1,title:{enabled:!1}},{lineWidth:1,opposite:!0,title:{enabled:!1}}],series:[{data:t.series||[],pointRange:2592e6,color:"rgb(124, 181, 236)"},{pointRange:2592e6,data:[[t.oldestDate,0],[t.newestDate,0]]}]}}return t}),define("main/components/views/appletViews/eventsGistView/views/eventsGistView",["jquery","underscore","main/ADK","backbone","main/Utils","main/components/applets/baseDisplayApplet/baseDisplayAppletItem","main/components/applets/baseDisplayApplet/baseGistView","hbs!main/components/views/appletViews/eventsGistView/templates/eventsGistLayout","hbs!main/components/views/appletViews/eventsGistView/templates/eventsGistChild","api/ResourceService","api/Messaging","api/UserDefinedScreens","main/components/appletToolbar/appletToolbarView","main/components/views/appletViews/TileSortManager","highcharts","main/components/views/appletViews/eventsGistView/views/eventsBarGraphConfiguration"],function(e,t,n,i,o,r,a,s,l,d,c,u,h,p,g,f){"use strict";var m=r.extend({template:l,onDomRefresh:function(){var e=this.options.binningOptions,t=new f(this.model.get("graphData"));this.chartPointer=this.$("#graph_"+this.model.get("id")),e&&(e.chartWidth=this.chartPointer.width(),e.chartWidth=0===e.chartWidth?100:e.chartWidth,t.series[0].data=o.chartDataBinning(this.model.get("graphData"),e)),this.chartPointer.highcharts(t),this.$("svg").attr("focusable","false")},onBeforeDestroy:function(){if(this.chartPointer&&this.chartPointer.length>0){var e=this.chartPointer.highcharts();e&&e.destroy()}},initialize:function(){var e=[],n={targetElement:this};this._enableTileSorting&&e.push("tilesortbutton"),this.options.showInfoButton&&e.push("infobutton"),e.push("detailsviewbutton"),e.push("quicklookbutton"),this.options.showLinksButton&&(e.push("submenubutton"),n.submenuItems=[],n.submenuTitle="Select Associated Workspace",t.isUndefined(this.model.get("snomedCode"))||u.getScreenBySnomedCt(this.model.get("snomedCode")).done(function(e){e.length>0&&t.each(e,function(e){var t={displayText:e.title,url:"#"+e.routeName};n.submenuItems.push(t)})})),n.buttonTypes=e,this.toolbarOptions=n}}),v=a.extend({template:s,childView:m.extend({}),initialize:function(e){this.childViewOptions={AppletID:this.AppletID,binningOptions:e.binningOptions,appletOptions:e,showInfoButton:e.showInfoButton===!1?!1:!0,showLinksButton:e.showLinksButton||!1},this.collectionParser=e.collectionParser||function(e){return e},this.collection=e.collection,this.gistModel=e.gistModel,this.model=new i.Model,this.model.set("gistHeaders",e.gistHeaders||{name:"",description:"",grapic:"Dose",age:"Age",count:"Count"}),this.gistModel=e.gistModel,this.model.set("appletID",this.AppletID),this.childViewContainer="#"+this.AppletID+"-event-gist-items"}}),b={create:function(e){var t=new v(e);return t},getView:function(){return v}};return b}),define("hbs!main/components/views/appletViews/pillsGistView/templates/pillGistLayout",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'<div id="'+s((o=null!=(o=t.appletID||(null!=e?e.appletID:e))?o:a,typeof o===r?o.call(e,{name:"appletID",hash:{},data:i}):o))+'-pill-gist" gistViewType="pill">\n    <div id="'+s((o=null!=(o=t.appletID||(null!=e?e.appletID:e))?o:a,typeof o===r?o.call(e,{name:"appletID",hash:{},data:i}):o))+'-pill-gist-items" class="gistList"></div>\n</div>'},useData:!0});return t.registerPartial("main/components/views/appletViews/pillsGistView/templates/pillGistLayout",n),n}),define("_assets/templates/helpers/formatTimeSince",["handlebars","moment"],function(e,t){function n(e,n){var i=t(e,"YYYYMMDDHHmmssSSS").format("YYYY-MM-DD HH:mm:ss"),o=t(),r=t.duration(o.diff(i)),a=parseFloat(r.asYears()),s=parseFloat(r.asDays()),l=parseFloat(r.asMonths()),d=parseFloat(r.asHours()),c=parseFloat(r.asMinutes()),u="y",h="m",p="d",g="h",f="'",m="",v=1;return c>=0&&60>c?(m="< "+v+g,void 0!==n&&n===!0&&(v=Math.round(c),m=v+f)):2>s?(v=Math.floor(d),m=v+g):s>=2&&60>=s?(v=Math.floor(s),m=v+p):24>l&&s>60?(v=Math.floor(l),m=v+h):l>=24&&(v=Math.floor(a),m=v+u),m}return e.registerHelper("formatTimeSince",n),n}),define("hbs!main/components/views/appletViews/pillsGistView/templates/pillGistChild",["hbs","handlebars","_assets/templates/helpers/formatTimeSince"],function(e,t){var n=t.template({1:function(e,t,n,i){return"			severe\n"},3:function(e,t,n,i){var o,r="";return o=t["if"].call(e,null!=e?e.moderate:e,{name:"if",hash:{},fn:this.program(4,i),inverse:this.program(6,i),data:i}),null!=o&&(r+=o),r},4:function(e,t,n,i){return" 	 	 		moderate\n"},6:function(e,t,n,i){var o,r="";return o=t["if"].call(e,null!=e?e.mild:e,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=o&&(r+=o),r},7:function(e,t,n,i){return" 					mild\n"},9:function(e,t,n,i){var o=t.helperMissing,r=this.escapeExpression;return r((t.formatTimeSince||e&&e.formatTimeSince||o).call(e,null!=e?e.age:e,{name:"formatTimeSince",hash:{},data:i}))},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d="<div data-infobutton='"+l((r=null!=(r=t.name||(null!=e?e.name:e))?r:s,typeof r===a?r.call(e,{name:"name",hash:{},data:i}):r))+'\' data-infobutton-class="info-button-pill" tabindex="0" id=\'pill-gist-popover-'+l((r=null!=(r=t.uid||(null!=e?e.uid:e))?r:s,typeof r===a?r.call(e,{name:"uid",hash:{},data:i}):r))+"' data-content='"+l((r=null!=(r=t.tooltip||(null!=e?e.tooltip:e))?r:s,typeof r===a?r.call(e,{name:"tooltip",hash:{},data:i}):r))+"'\n     data-toggle='popover'\n     class='gistItem immunGist selectable changecolor \n";return o=t["if"].call(e,null!=e?e.severe:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=o&&(d+=o),d+=' 	 \'>\n    <span class="pull-left">&nbsp;'+l((r=null!=(r=t.name||(null!=e?e.name:e))?r:s,typeof r===a?r.call(e,{name:"name",hash:{},data:i}):r))+'</span>&nbsp;\n    <b class="badge">'+l((r=null!=(r=t.seriesNorm||(null!=e?e.seriesNorm:e))?r:s,typeof r===a?r.call(e,{name:"seriesNorm",hash:{},data:i}):r))+'</b>&nbsp;\n    <span id="age" age="age" class="pull-right">',o=t["if"].call(e,null!=e?e.age:e,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+"</span>\n</div>"},useData:!0});return t.registerPartial("main/components/views/appletViews/pillsGistView/templates/pillGistChild",n),n}),define("main/components/views/appletViews/pillsGistView/views/pillGistView",["jquery","underscore","backbone","hbs!main/components/views/appletViews/pillsGistView/templates/pillGistLayout","hbs!main/components/views/appletViews/pillsGistView/templates/pillGistChild","hbs!main/components/views/appletViews/sharedTemplates/gistPopover","api/ResourceService","api/Messaging"],function(e,t,n,i,o,r,a,s){"use strict";function l(e){return e.appletConfig.id}var d=n.Marionette.ItemView.extend({template:o,className:"gistItem",events:{"click button#closeGist":function(e){e.preventDefault(),e.stopImmediatePropagation(),this.$(".sub-elements").hide()},"click button.groupItem":function(e){e.preventDefault(),e.stopImmediatePropagation()},
"hover div.gistItem":function(e){this.$(e.target).blur()},"focus div.gistItem":function(e){this.$("[data-toggle=popover]").keypress(function(e){(13===e.which||32===e.which)&&gistItem.trigger("click")})},"click div.gistItem":function(e){function t(e,t){console.log(e.collection),t.preventDefault(),t.stopImmediatePropagation();var n=a.patientRecordService.getCurrentPatient(),i={collection:e.collection,model:e.model,uid:e.model.get("uid"),patient:{icn:n.attributes.icn,pid:n.attributes.pid}};s.getChannel(e.AppletID).trigger("getDetailView",i)}this.$("[data-toggle=popover]").popover("hide"),ADK.utils.infoButtonUtils.onClickFunc(this,e,t)}},initialize:function(e){this.AppletID=e.AppletID},setPopover:function(){this.$("[data-toggle=popover]").popover({trigger:"hover",html:"true",container:"body",template:r(this.model),placement:"bottom"})},onRender:function(){this.setPopover()},onDestroy:function(){this.$("[data-toggle=popover]").popover("destroy")}}),c=n.Marionette.CompositeView.extend({template:i,childView:d,emptyView:n.Marionette.ItemView.extend({template:t.template('<div class="emptyGistList">No Records Found</div>')}),initialize:function(e){var t=l(e);this.childViewOptions={AppletID:t,collection:e.collection},this.gistModel=e.gistModel,this.collectionParser=e.collectionParser||function(e){return e},this.collection=e.collection,this.model=new n.Model,this.model.set("appletID",t),this.childViewContainer="#"+t+"-pill-gist-items"},onBeforeRender:function(){this.collection.reset(this.collectionParser(this.collection).models),t.each(this.collection.models,function(e){t.each(this.gistModel,function(t){t.id;e.set(t.id,e.get(t.field))})},this)}}),u={create:function(e){var t=new c(e);return t},getView:function(){return c}};return u}),define("hbs!main/components/views/appletViews/interventionsGistView/templates/interventionsGistLayout",["hbs","handlebars"],function(e,t){var n=t.template({1:function(e,t,n,i){return"selectable"},3:function(e,t,n,i){return' tabindex="0"'},5:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s='            <div id="Graphic-header" class="';return o=t["if"].call(e,null!=e?e.isNotActiveMeds:e,{name:"if",hash:{},fn:this.program(6,i),inverse:this.program(8,i),data:i}),null!=o&&(s+=o),o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.graphic:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(s+=o),s+=' text-center header noPadding" sortable="'+a(r(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.graphic:o)?o.sortable:o,e))+'" sortType="'+a(r(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.graphic:o)?o.sortType:o,e))+'" sortDirection="none" sortKey="'+a(r(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.graphic:o)?o.key:o,e))+'" ',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.graphic:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(s+=o),s+=" tooltip-data-key='"+a(r(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.graphic:o)?o.hoverTip:o,e))+"'>"+a(r(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.graphic:o)?o.title:o,e))+'\n                <span sortArrow="headerDirectionalIndicator" class="sort-caret fa"></span>\n            </div>\n            \n            <div id="Age-header" class="col-sm-4 ',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.age:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(s+=o),s+=' text-center header noPadding" sortable="'+a(r(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.age:o)?o.sortable:o,e))+'" sortType="'+a(r(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.age:o)?o.sortType:o,e))+'" sortDirection="none" sortKey="'+a(r(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.age:o)?o.key:o,e))+'" ',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.age:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(s+=o),s+" tooltip-data-key='"+a(r(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.age:o)?o.hoverTip:o,e))+"'>"+a(r(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.age:o)?o.title:o,e))+'\n                <span sortArrow="headerDirectionalIndicator" class="sort-caret fa "></span>\n            </div>\n'},6:function(e,t,n,i){return" col-sm-4 "},8:function(e,t,n,i){return" col-sm-8 "},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d=this.lambda,c='<div id="'+l((r=null!=(r=t.appletID||(null!=e?e.appletID:e))?r:s,typeof r===a?r.call(e,{name:"appletID",hash:{},data:i}):r))+'-interventions-gist" gistViewType="interventions">\n    <div id="gistGrid" class="col-sm-12-offset-0 header-bar">\n        <div id="Name-header" class="col-sm-4 ';return o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.name:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+=' header" sortable="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.name:o)?o.sortable:o,e))+'" sortType="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.name:o)?o.sortType:o,e))+'" sortDirection="none" sortKey="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.name:o)?o.key:o,e))+'" ',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.name:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+=" tooltip-data-key='"+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.name:o)?o.hoverTip:o,e))+"'>"+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.name:o)?o.title:o,e))+'\n            <span sortArrow="headerDirectionalIndicator" class="sort-caret fa"></span>\n        </div>\n        <div id="Description-header" class="col-sm-4 ',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.description:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+=' header" sortable="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.description:o)?o.sortable:o,e))+'" sortType="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.description:o)?o.sortType:o,e))+'" sortDirection="none" sortKey="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.description:o)?o.key:o,e))+'" ',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.description:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+=">"+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.description:o)?o.title:o,e))+'\n            <span sortArrow="headerDirectionalIndicator" class="sort-caret fa"></span>\n        </div>\n        <div id="rightSideHeaders" class="col-sm-4">\n            <div id="Severity-header" class="col-sm-4 ',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.count:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+=' text-center header noPadding" sortable="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.count:o)?o.sortable:o,e))+'" sortType="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.count:o)?o.sortType:o,e))+'" sortDirection="none" sortKey="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.count:o)?o.key:o,e))+'" ',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.count:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+=" tooltip-data-key='"+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.count:o)?o.hoverTip:o,e))+"'>"+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.count:o)?o.title:o,e))+'\n                <span sortArrow="headerDirectionalIndicator" class="sort-caret fa"></span>\n            </div>\n',o=t["if"].call(e,null!=e?e.isNotActiveMeds:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+'            \n        </div>\n    </div>\n    <div id="'+l((r=null!=(r=t.appletID||(null!=e?e.appletID:e))?r:s,typeof r===a?r.call(e,{name:"appletID",hash:{},data:i}):r))+'-interventions-gist-items" class="gistList"></div>\n</div>'},useData:!0});return t.registerPartial("main/components/views/appletViews/interventionsGistView/templates/interventionsGistLayout",n),n}),define("hbs!main/components/views/appletViews/interventionsGistView/templates/interventionsGistChild",["hbs","handlebars","_assets/templates/helpers/formatTimeSince"],function(e,t){var n=t.template({1:function(e,t,n,i){return' draggable="true" '},3:function(e,t,n,i){return" col-sm-4 "},5:function(e,t,n,i){return" col-sm-8 "},7:function(e,t,n,i){var o=t.helperMissing,r=this.escapeExpression;return'                <div id="age" age="age" class="col-sm-4 text-center col-condensed virticalCenter">\n                    <div id="ageAdjust" class="verticalCenterInner text-center">'+r((t.formatTimeSince||e&&e.formatTimeSince||o).call(e,null!=e?e.age:e,{name:"formatTimeSince",hash:{},data:i}))+"</div>\n                </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d='<div class="toolbarContainer"/>\n    <div class="row equalHeights noMargin" ';return o=t["if"].call(e,null!=e?e.userWorkspace:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+='>\n        <div id="gist-main-info" class="col-sm-8 quickDraw border-vertical selectable virticalCenter" aria-label="'+l((r=null!=(r=t.name||(null!=e?e.name:e))?r:s,typeof r===a?r.call(e,{name:"name",hash:{},data:i}):r))+", "+l((r=null!=(r=t.description||(null!=e?e.description:e))?r:s,typeof r===a?r.call(e,{name:"description",hash:{},data:i}):r))+'" tabindex="0">\n            <div>\n                <div id="name" name="name"><b>'+l((r=null!=(r=t.name||(null!=e?e.name:e))?r:s,typeof r===a?r.call(e,{name:"name",hash:{},data:i}):r))+'</b>\n                </div>\n                <div id="description" description="description">'+l((r=null!=(r=t.description||(null!=e?e.description:e))?r:s,typeof r===a?r.call(e,{name:"description",hash:{},data:i}):r))+'</div>\n            </div>\n        </div>\n        <div class="col-sm-4 quickDraw popoverArea selectable" id="interventions-gist-popover-'+l((r=null!=(r=t.uid||(null!=e?e.uid:e))?r:s,typeof r===a?r.call(e,{name:"uid",hash:{},data:i}):r))+'" tabindex="0" title="'+l((r=null!=(r=t.name||(null!=e?e.name:e))?r:s,typeof r===a?r.call(e,{name:"name",hash:{},data:i}):r))+'" data-content="'+l((r=null!=(r=t.tooltip||(null!=e?e.tooltip:e))?r:s,typeof r===a?r.call(e,{name:"tooltip",hash:{},data:i}):r))+'" data-toggle="popover">\n            <div class="popoverAreaInner">\n                <div class="col-sm-4 virticalCenter text-center border-vertical">\n                    <div id="count" class="verticalCenterInner text-center" count="count">'+l((r=null!=(r=t.count||(null!=e?e.count:e))?r:s,typeof r===a?r.call(e,{name:"count",hash:{},data:i}):r))+'</div>\n                </div>\n                <div class="',o=t["if"].call(e,null!=e?e.isNotActiveMeds:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.program(5,i),data:i}),null!=o&&(d+=o),d+=' virticalCenter text-center border-vertical">\n                    <div id="graphic" class="verticalCenterInner text-center" graphic="'+l((r=null!=(r=t.graphic||(null!=e?e.graphic:e))?r:s,typeof r===a?r.call(e,{name:"graphic",hash:{},data:i}):r))+'"></div>\n                </div>\n',o=t["if"].call(e,null!=e?e.isNotActiveMeds:e,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+"                \n            </div>\n        </div>\n    </div>\n\n"},useData:!0});return t.registerPartial("main/components/views/appletViews/interventionsGistView/templates/interventionsGistChild",n),n}),define("main/components/views/appletViews/interventionsGistView/views/interventionsGistView",["jquery","underscore","main/Utils","backbone","hbs!main/components/views/appletViews/interventionsGistView/templates/interventionsGistLayout","hbs!main/components/views/appletViews/interventionsGistView/templates/interventionsGistChild","hbs!main/components/views/appletViews/sharedTemplates/gistPopover","api/ResourceService","api/UserService","api/Messaging","main/components/applets/baseDisplayApplet/baseDisplayAppletItem","main/components/applets/baseDisplayApplet/baseGistView","main/components/appletToolbar/appletToolbarView","main/components/views/appletViews/TileSortManager"],function(e,t,n,i,o,r,a,s,l,d,c,u,h,p){"use strict";var g=c.extend({template:r,className:"gistItem col-sm-12",getGistItemGraphicClass:function(e){switch(e.toUpperCase()){case"NONE":return"noChange";case"UPARROW":return"fa fa-caret-up changeArrow";case"DOWNARROW":return"fa fa-caret-down changeArrow";case"EXCLAMATION-CIRCLE":return"fa fa-exclamation-circle discontinuedMed";case"EXPIRED":return"expiredMed";case"NEW":return"newMed";default:return"noChange"}},getInterventionSeverityClass:function(e){switch(e.toUpperCase()){case"0":return"label label-danger labelSizeCorrection";case"1":return"label label-warning labelSizeCorrection";case"EXP":return"expiredMedWarning";default:return"lineCorrection"}},onDestroy:function(){this.ui.popoverEl.popup("destroy")},initialize:function(e){this.callingView=e.appletOptions.appletId;var t=["infobutton","detailsviewbutton","quicklookbutton"];d.request("get:current:screen").config.predefined||t.unshift("tilesortbutton"),this.toolbarOptions={targetElement:this,buttonTypes:t}},templateHelpers:function(){var e=this;return{isNotActiveMeds:function(){return"activemeds"===e.callingView.toLowerCase()?!1:!0}}},onRender:function(){var e=this.$("div[count]"),t=this.$("div[graphic]"),n=this.getInterventionSeverityClass(e.text());e.addClass(n);var i=this.getGistItemGraphicClass(t.attr("graphic")),o="";switch(i){case"expiredMed":t.text("Exp"),o="Expired";break;case"newMed":t.text("New"),o="New";break;case"fa fa-caret-down changeArrow":o="Decreased";break;case"fa fa-exclamation-circle discontinuedMed":o="Discontinued",t[0].setAttribute("data-toggle","tooltip"),t[0].setAttribute("data-placement","auto top"),t[0].setAttribute("data-original-title","Not Fillable"),t[0].setAttribute("data-container","body"),t[0].setAttribute("data-trigger","hover focus"),this.$(t).tooltip();break;case"fa fa-caret-up changeArrow":o="Increased";break;case"noChange":t.text("--"),o="No Change"}t.addClass(i);var r=this.$("#count").text();"-1"===r&&(r="Unknown",this.$("#count").text("NA"));var a=r+" refills left. Change: "+o+", Age: "+this.model.get("ageReadText");this.$(".quickDraw").attr("aria-label",a),this.createPopover()}}),f=u.extend({template:o,childView:g,initialize:function(e){this.callingView=e.appletId,this.childViewOptions={AppletID:this.AppletID,appletOptions:e},this.collectionParser=e.collectionParser||function(e){return e},this.collection.on("filterDone",function(){},this),this.collection=e.collection,this.gistModel=e.gistModel,this.model=new i.Model({}),this.model.set("gistHeaders",e.gistHeaders||{name:"Medication",description:"",graphic:"Change",age:"Age",count:"Refills"}),this.model.set("appletID",this.AppletID),this.childViewContainer="#"+this.AppletID+"-interventions-gist-items"},templateHelpers:function(){var e=this;return{isNotActiveMeds:function(){return"activemeds"===e.callingView.toLowerCase()?!1:!0}}}}),m={create:function(e){var t=new f(e);return t},getView:function(){return f}};return m}),define("hbs!main/components/views/appletViews/observationsGistView/templates/observationsGistLayout",["hbs","handlebars"],function(e,t){var n=t.template({1:function(e,t,n,i){return'tabindex="0"'},3:function(e,t,n,i){return"selectable"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d=this.lambda,c='<div id="'+l((r=null!=(r=t.AppletID||(null!=e?e.AppletID:e))?r:s,typeof r===a?r.call(e,{name:"AppletID",hash:{},data:i}):r))+'-observations-gist" gistviewtype="observations">\n	<div id="observationGistGrid" class="row header-bar noMargin">\n	    <span id="name-header" ';return o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.header1:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+=' sortable="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.header1:o)?o.sortable:o,e))+'" sortType="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.header1:o)?o.sortType:o,e))+'" sortDirection="none" sortKey="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.header1:o)?o.key:o,e))+'" class="col-sm-4 header descriptionClass ',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.header1:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+='" tooltip-data-key="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.header1:o)?o.hoverTip:o,e))+'">'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.header1:o)?o.title:o,e))+'<span sortArrow="headerDirectionalIndicator" class="sort-caret fa"></span></span>\n	    <span id="results-header" ',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.header2:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+='  sortable="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.header2:o)?o.sortable:o,e))+'" sortType="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.header2:o)?o.sortType:o,e))+'" sortDirection="none" sortKey="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.header2:o)?o.key:o,e))+'" class="col-sm-3 header resultClass ',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.header2:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+='" tooltip-data-key="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.header2:o)?o.hoverTip:o,e))+'">'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.header2:o)?o.title:o,e))+'<span sortArrow="headerDirectionalIndicator" class="sort-caret fa"></span></span>\n	   	<span id="age-header" ',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.header4:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+='  sortable="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.header4:o)?o.sortable:o,e))+'" sortType="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.header4:o)?o.sortType:o,e))+'" sortDirection="none" sortKey="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.header4:o)?o.key:o,e))+'" class="col-sm-2 header ageClass ',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.header4:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+'" tooltip-data-key="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.header4:o)?o.hoverTip:o,e))+'">'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.header4:o)?o.title:o,e))+'<span sortArrow="headerDirectionalIndicator" class="sort-caret fa"></span></span>\n	    <span id="graph-header" class="col-sm-3 header">'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.header3:o)?o.title:o,e))+'</span>\n	</div>\n    <div id="'+l((r=null!=(r=t.AppletID||(null!=e?e.AppletID:e))?r:s,typeof r===a?r.call(e,{name:"AppletID",hash:{},data:i}):r))+'-observations-gist-items" class="gistItemList"></div>\n</div>\n'},useData:!0});return t.registerPartial("main/components/views/appletViews/observationsGistView/templates/observationsGistLayout",n),n}),define("hbs!main/components/views/appletViews/observationsGistView/templates/observationsGistChild",["hbs","handlebars","_assets/templates/helpers/sparkline"],function(e,t){var n=t.template({1:function(e,t,n,i){return" draggable='true' "},3:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d='    <div class=\'col-sm-4 quickDraw selectable info-display noPadding\'>\n        <div class="row equalHeights noMargin border-vertical">\n            <span class="sr-only">'+l((r=null!=(r=t.fullName||(null!=e?e.fullName:e))?r:s,typeof r===a?r.call(e,{name:"fullName",hash:{},data:i}):r))+"</span>\n            <div id='"+l((r=null!=(r=t.observationType||(null!=e?e.observationType:e))?r:s,typeof r===a?r.call(e,{name:"observationType",hash:{},data:i}):r))+"_problem_name_"+l((r=null!=(r=t.displayName||(null!=e?e.displayName:e))?r:s,typeof r===a?r.call(e,{name:"displayName",hash:{},data:i}):r))+'\' class="col-sm-12 problem-name" >\n                ';return r=null!=(r=t.descriptionColumn||(null!=e?e.descriptionColumn:e))?r:s,o=typeof r===a?r.call(e,{name:"descriptionColumn",hash:{},data:i}):r,null!=o&&(d+=o),d+='\n            </div>\n        </div>\n    </div>\n    <div class="col-sm-8 quickDraw selectable noPadding" data-toggle="popover" data-content="'+l((r=null!=(r=t.tooltip||(null!=e?e.tooltip:e))?r:s,typeof r===a?r.call(e,{name:"tooltip",hash:{},data:i}):r))+'" tabindex="0">\n',o=t["if"].call(e,null!=e?e.result:e,{name:"if",hash:{},fn:this.program(4,i),inverse:this.program(13,i),data:i}),null!=o&&(d+=o),d+"    </div>\n"},4:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d='        <div class="row equalHeights noMargin noPadding">\n            <div id="quickLook_'+l((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===a?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="quickviewOverlay right-side"></div>\n';return o=t["if"].call(e,null!=e?e.isValid:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(11,i),data:i}),null!=o&&(d+=o),d+='            <span class="sr-only">'+l((r=null!=(r=t.numericTime||(null!=e?e.numericTime:e))?r:s,typeof r===a?r.call(e,{name:"numericTime",hash:{},data:i}):r))+"</span>\n            <div id='"+l((r=null!=(r=t.observationType||(null!=e?e.observationType:e))?r:s,typeof r===a?r.call(e,{name:"observationType",hash:{},data:i}):r))+"_time_since_"+l((r=null!=(r=t.displayName||(null!=e?e.displayName:e))?r:s,typeof r===a?r.call(e,{name:"displayName",hash:{},data:i}):r))+'\'\n                 class="eventsCount col-sm-2 counter2 text-center">'+l((r=null!=(r=t.timeSince||(null!=e?e.timeSince:e))?r:s,typeof r===a?r.call(e,{name:"timeSince",hash:{},data:i}):r))+'</div>\n            <div id="chartArea"\n                 class="col-sm-5 text-center noPadding noTopBottomFixedHeight">\n                    ',o=(t.sparkline||e&&e.sparkline||s).call(e,null!=e?e.graphOptions:e,null!=e?e.result:e,null!=e?e.previousResult:e,null!=e?e.low:e,null!=e?e.high:e,null!=e?e.interpretationCode:e,null!=e?e.previousInterpretationCode:e,null!=e?e.standardDeviation:e,{name:"sparkline",hash:{},data:i}),null!=o&&(d+=o),d+"\n            </div>\n        </div>\n"},5:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d='            <div class="border-vertical col-sm-5">\n                <div id=\''+l((r=null!=(r=t.observationType||(null!=e?e.observationType:e))?r:s,typeof r===a?r.call(e,{name:"observationType",hash:{},data:i}):r))+"_problem_result_"+l((r=null!=(r=t.displayName||(null!=e?e.displayName:e))?r:s,typeof r===a?r.call(e,{name:"displayName",hash:{},data:i}):r))+'\'\n                    class="eventsTimeSince counter2 text-center">'+l((r=null!=(r=t.result||(null!=e?e.result:e))?r:s,typeof r===a?r.call(e,{name:"result",hash:{},data:i}):r));return o=t["if"].call(e,null!=e?e.units:e,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+="\n                    ",o=t["if"].call(e,null!=e?e.metricResult:e,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+"</div>\n            </div>\n"},6:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return" "+s((o=null!=(o=t.units||(null!=e?e.units:e))?o:a,typeof o===r?o.call(e,{name:"units",hash:{},data:i}):o))},8:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d='<span class="smallergreyText">'+l((r=null!=(r=t.metricResult||(null!=e?e.metricResult:e))?r:s,typeof r===a?r.call(e,{name:"metricResult",hash:{},data:i}):r));return o=t["if"].call(e,null!=e?e.metricUnits:e,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+"</span>"},9:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return" "+s((o=null!=(o=t.metricUnits||(null!=e?e.metricUnits:e))?o:a,typeof o===r?o.call(e,{name:"metricUnits",hash:{},data:i}):o))},11:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'                <div class="border-vertical col-sm-5">\n                <div id=\''+s((o=null!=(o=t.observationType||(null!=e?e.observationType:e))?o:a,typeof o===r?o.call(e,{name:"observationType",hash:{},data:i}):o))+"_problem_result_"+s((o=null!=(o=t.displayName||(null!=e?e.displayName:e))?o:a,typeof o===r?o.call(e,{name:"displayName",hash:{},data:i}):o))+'\'\n                    class="eventsTimeSince counter2 text-center">'+s((o=null!=(o=t.result||(null!=e?e.result:e))?o:a,typeof o===r?o.call(e,{name:"result",hash:{},data:i}):o))+"</div>\n            </div>\n"},13:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'            <span id="'+s((o=null!=(o=t.observationType||(null!=e?e.observationType:e))?o:a,typeof o===r?o.call(e,{name:"observationType",hash:{},data:i}):o))+"_no_record_"+s((o=null!=(o=t.displayName||(null!=e?e.displayName:e))?o:a,typeof o===r?o.call(e,{name:"displayName",hash:{},data:i}):o))+'" class="col-sm-12 no-record">No record</span>\n'},15:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d="    <div class='col-sm-4 quickDraw selectable info-display noPadding'>\n        <div class=\"row equalHeights noMargin border-vertical\">\n            <div id='"+l((r=null!=(r=t.observationType||(null!=e?e.observationType:e))?r:s,typeof r===a?r.call(e,{name:"observationType",hash:{},data:i}):r))+"_problem_name_"+l((r=null!=(r=t.displayName||(null!=e?e.displayName:e))?r:s,typeof r===a?r.call(e,{name:"displayName",hash:{},data:i}):r))+'\' class="col-sm-12 problem-name">\n                '+l((r=null!=(r=t.shortName||(null!=e?e.shortName:e))?r:s,typeof r===a?r.call(e,{name:"shortName",hash:{},data:i}):r))+'\n            </div>\n        </div>\n    </div>\n    <div class="col-sm-8 quickDraw selectable noPadding" id=\'quickDraw_'+l((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===a?r.call(e,{name:"id",hash:{},data:i}):r))+'\' data-toggle="popover" data-content="'+l((r=null!=(r=t.tooltip||(null!=e?e.tooltip:e))?r:s,typeof r===a?r.call(e,{name:"tooltip",hash:{},data:i}):r))+'" tabindex="0">\n        <div class="row equalHeights noMargin noPadding">\n            <div id="quickLook_'+l((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===a?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="quickviewOverlay right-side"></div>\n            <div class="border-vertical col-sm-5">\n                <div id=\''+l((r=null!=(r=t.observationType||(null!=e?e.observationType:e))?r:s,typeof r===a?r.call(e,{name:"observationType",hash:{},data:i}):r))+"_problem_result_"+l((r=null!=(r=t.displayName||(null!=e?e.displayName:e))?r:s,typeof r===a?r.call(e,{name:"displayName",hash:{},data:i}):r))+'\'\n                     class="eventsTimeSince counter2 text-center">'+l((r=null!=(r=t.result||(null!=e?e.result:e))?r:s,typeof r===a?r.call(e,{name:"result",hash:{},data:i}):r))+" "+l((r=null!=(r=t.units||(null!=e?e.units:e))?r:s,typeof r===a?r.call(e,{name:"units",hash:{},data:i}):r))+'</div>\n            </div>\n            <span class="sr-only">'+l((r=null!=(r=t.numericTime||(null!=e?e.numericTime:e))?r:s,typeof r===a?r.call(e,{name:"numericTime",hash:{},data:i}):r))+"</span>\n            <div id='"+l((r=null!=(r=t.observationType||(null!=e?e.observationType:e))?r:s,typeof r===a?r.call(e,{name:"observationType",hash:{},data:i}):r))+"_time_since_"+l((r=null!=(r=t.displayName||(null!=e?e.displayName:e))?r:s,typeof r===a?r.call(e,{name:"displayName",hash:{},data:i}):r))+'\'\n                 class="eventsCount col-sm-2 counter2 text-center">'+l((r=null!=(r=t.timeSince||(null!=e?e.timeSince:e))?r:s,typeof r===a?r.call(e,{name:"timeSince",hash:{},data:i}):r))+"</div>\n";return o=t["if"].call(e,null!=e?e.result:e,{name:"if",hash:{},fn:this.program(16,i),inverse:this.program(18,i),data:i}),null!=o&&(d+=o),d+"        </div>\n    </div>\n"},16:function(e,t,n,i){var o,r=t.helperMissing,a='            <div id="chartArea"\n                 class="col-sm-5 text-center noPadding noTopBottomFixedHeight">\n                    ';return o=(t.sparkline||e&&e.sparkline||r).call(e,null!=e?e.graphOptions:e,null!=e?e.result:e,null!=e?e.previousResult:e,null!=e?e.low:e,null!=e?e.high:e,null!=e?e.interpretationCode:e,null!=e?e.previousInterpretationCode:e,null!=e?e.standardDeviation:e,{name:"sparkline",hash:{},data:i}),null!=o&&(a+=o),a+"\n            </div>\n"},18:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'                <span id="'+s((o=null!=(o=t.observationType||(null!=e?e.observationType:e))?o:a,typeof o===r?o.call(e,{name:"observationType",hash:{},data:i}):o))+"_no_record_"+s((o=null!=(o=t.displayName||(null!=e?e.displayName:e))?o:a,typeof o===r?o.call(e,{name:"displayName",hash:{},data:i}):o))+'" class="col-sm-5 no-record">No record</span>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d='<div class="toolbarContainer"/>\n<div id="observations_'+l((r=null!=(r=t.displayName||(null!=e?e.displayName:e))?r:s,typeof r===a?r.call(e,{name:"displayName",hash:{},data:i}):r))+'" class="row equalHeights noMargin gistItemInner" ';return o=t["if"].call(e,null!=e?e.userWorkspace:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+=">\n",o=t["if"].call(e,null!=e?e.vitalColumns:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.program(15,i),data:i}),null!=o&&(d+=o),d+"</div>\n"},useData:!0});return t.registerPartial("main/components/views/appletViews/observationsGistView/templates/observationsGistChild",n),n}),define("main/components/views/appletViews/observationsGistView/views/observationsGistView",["jquery","underscore","backbone","main/Utils","hbs!main/components/views/appletViews/observationsGistView/templates/observationsGistLayout","hbs!main/components/views/appletViews/observationsGistView/templates/observationsGistChild","hbs!main/components/views/appletViews/sharedTemplates/gistPopover","api/ResourceService","api/Messaging","main/components/appletToolbar/appletToolbarView","main/components/views/appletViews/TileSortManager","main/components/applets/baseDisplayApplet/baseDisplayAppletItem","main/components/applets/baseDisplayApplet/baseGistView"],function(e,t,n,i,o,r,a,s,l,d,c,u,h){"use strict";var p=u.extend({template:r,disableNoRecordClick:function(){var e=this.$el;e.find(".no-record").length>0&&(e.find(".selectable").removeClass("selectable"),e.find("[data-toggle]").removeAttr("data-toggle").removeAttr("data-content"))},onRender:function(){this.disableNoRecordClick()},initialize:function(){var e=["infobutton","detailsviewbutton","quicklookbutton"];l.request("get:current:screen").config.predefined||e.unshift("tilesortbutton"),"lab_results_grid"===this.appletOptions.appletConfig.id&&e.push("additembutton"),this.toolbarOptions={targetElement:this,buttonTypes:e}},onDomRefresh:function(){this.$("svg.gistTrendGraph").attr("focusable","false")}}),g=h.extend({template:o,childView:p,initialize:function(e){this.childViewOptions={AppletID:this.AppletID,collection:e.collection,appletOptions:e},this.gistModel=e.gistModel,this.collectionParser=e.collectionParser||function(e){return e},this.collection=e.collection,this.model=new n.Model,this.model.set("gistHeaders",e.gistHeaders),this.model.set("AppletID",this.AppletID),this.childViewContainer="#"+this.AppletID+"-observations-gist-items"}}),f={create:function(e){var t=new g(e);return t},getView:function(){return g}};return f}),define("hbs!main/components/views/appletViews/panelsGistView/templates/panelsGistLayout",["hbs","handlebars"],function(e,t){var n=t.template({1:function(e,t,n,i){return"selectable"},3:function(e,t,n,i){return' tabindex="0"'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d=this.lambda,c='<div id="'+l((r=null!=(r=t.AppletID||(null!=e?e.AppletID:e))?r:s,
typeof r===a?r.call(e,{name:"AppletID",hash:{},data:i}):r))+'-panels-gist" gistViewType="panels">\n    <div id="gistGrid" class="col-sm-12-offset-0 header-bar">\n        <div id="name-header" class="col-sm-8 ';return o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.name:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+=' header" sortable="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.name:o)?o.sortable:o,e))+'" sortType="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.name:o)?o.sortType:o,e))+'" sortDirection="none" sortKey="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.name:o)?o.key:o,e))+'" ',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.name:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+=">"+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.name:o)?o.title:o,e))+'\n            <span sortArrow="headerDirectionalIndicator" class="sort-caret fa"></span>\n        </div>\n        <div id="rightSideHeaders" class="col-sm-4">\n            <div id="flags-header" class="col-sm-8 ',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.flags:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+=' header noPadding" sortable="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.flags:o)?o.sortable:o,e))+'" sortType="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.flags:o)?o.sortType:o,e))+'" sortDirection="none" sortKey="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.flags:o)?o.key:o,e))+'" ',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.flags:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+=">"+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.flags:o)?o.title:o,e))+'\n                <span sortArrow="headerDirectionalIndicator" class="sort-caret fa"></span>\n            </div>\n            <div id="age-header" class="col-sm-4 ',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.age:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+=' text-center header noPadding" sortable="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.age:o)?o.sortable:o,e))+'" sortType="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.age:o)?o.sortType:o,e))+'" sortDirection="none" sortKey="'+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.age:o)?o.key:o,e))+'" ',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.age:o)?o.sortable:o,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+">"+l(d(null!=(o=null!=(o=null!=e?e.gistHeaders:e)?o.age:o)?o.title:o,e))+'\n                <span sortArrow="headerDirectionalIndicator" class="sort-caret fa "></span>\n            </div>\n        </div>\n    </div>\n    <div id="'+l((r=null!=(r=t.AppletID||(null!=e?e.AppletID:e))?r:s,typeof r===a?r.call(e,{name:"AppletID",hash:{},data:i}):r))+'-panels-gist-items" class="gistItemList"></div>\n</div>\n'},useData:!0});return t.registerPartial("main/components/views/appletViews/panelsGistView/templates/panelsGistLayout",n),n}),define("hbs!main/components/views/appletViews/panelsGistView/templates/panelsGistChild",["hbs","handlebars"],function(e,t){var n=t.template({1:function(e,t,n,i){return" draggable='true' "},3:function(e,t,n,i){var o=this.lambda,r=this.escapeExpression;return'                    <label class="label '+r(o(null!=e?e["class"]:e,e))+'" title="'+r(o(null!=e?e.title:e,e))+'">'+r(o(null!=e?e.name:e,e))+"</label>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d='<div class="toolbarContainer"/>\n    <div tabindex="0" id="panel_'+l((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===a?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="row equalHeights noMargin gistItemInner" ';return o=t["if"].call(e,null!=e?e.userWorkspace:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+='>\n        <div tabindex="0" class="col-sm-8 quickDraw selectable info-display noPadding">\n            <div class="row equalHeights noMargin border-vertical">\n                <div id=\'panel-name-'+l((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===a?r.call(e,{name:"id",hash:{},data:i}):r))+'\' class="col-sm-12 panel-name">'+l((r=null!=(r=t.name||(null!=e?e.name:e))?r:s,typeof r===a?r.call(e,{name:"name",hash:{},data:i}):r))+'</div>\n            </div>\n        </div>\n        <div tabindex="1" id="panels-gist-popover-'+l((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===a?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="col-sm-4 quickDraw selectable noPadding" data-toggle="popover" data-content="'+l((r=null!=(r=t.tooltip||(null!=e?e.tooltip:e))?r:s,typeof r===a?r.call(e,{name:"tooltip",hash:{},data:i}):r))+'" title="'+l((r=null!=(r=t.name||(null!=e?e.name:e))?r:s,typeof r===a?r.call(e,{name:"name",hash:{},data:i}):r))+'">\n            <div class="row noMargin equalHeights">\n                <div id="quickLook_'+l((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===a?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="quickviewOverlay right-side"></div>\n                <div id="flags_'+l((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===a?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="col-sm-8 flags border-vertical" >\n',o=t.each.call(e,null!=e?e.flags:e,{name:"each",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+'                </div>\n                <div id="time_since_'+l((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===a?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="col-sm-4 age text-center" >'+l((r=null!=(r=t.age||(null!=e?e.age:e))?r:s,typeof r===a?r.call(e,{name:"age",hash:{},data:i}):r))+"</div>\n            </div>\n        </div>\n    </div>\n"},useData:!0});return t.registerPartial("main/components/views/appletViews/panelsGistView/templates/panelsGistChild",n),n}),define("hbs!main/components/appletToolbar/toolbarTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<!-- TO BE DEPRECATED -->\n<div class="toolbarPopover" >\n	<div class="btn-toolbar" role="toolbar" >\n		<div class="btn-group" role="group">\n			<!-- buttons go here -->\n		</div>\n	</div>\n</div>\n'},useData:!0});return t.registerPartial("main/components/appletToolbar/toolbarTemplate",n),n}),define("main/components/appletToolbar/factory/buttons",["jquery","underscore","api/Messaging","api/ResourceService"],function(e,t,n,i){function o(t){this.btn=document.createElement("a"),this.btn.className="btn",this.setClickHandler=function(e){e.clickHandler&&(this.clickHandler=e.clickHandler)},this.toggleHandler=function(t){var n=this;t.on("click focusin",function(){var t=e(this).parents().find("#"+n.btn.id);e(".toolbar-btn-hover").removeClass("toolbar-btn-hover"),t.addClass("toolbar-btn-hover")})},this.btn.innerHTML=t.innerHTML||"New Button",t.buttonid&&this.btn.setAttribute("id",t.buttonid),t.toggler&&this.toggleHandler(t.toggler)}function r(n){if(this.submenuBtn=document.createElement("a"),this.submenuBtn.className="btn btn-default dropdown-toggle",this.submenuBtn.innerHTML=n.innerHTML||'<i class="fa fa-share-alt"></i>',this.submenuBtn.setAttribute("id",n.buttonid||"submenu-button-toolbar"),this.submenuBtn.setAttribute("data-toggle","dropdown"),this.submenuBtn.setAttribute("aria-haspopup","true"),this.submenuBtn.setAttribute("tooltip-data-key","toolbar_submenu"),0===n.submenuItems.length&&this.submenuBtn.setAttribute("disabled",!0),this.setClickHandler=function(e){e.clickHandler&&(this.clickHandler=e.clickHandler)},this.toggleHandler=function(t){var n=this;t.on("click focusin",function(){var t=e(this).parents().find("#"+n.btn.id);e(".toolbar-btn-hover").removeClass("toolbar-btn-hover"),t.addClass("toolbar-btn-hover")})},this.clickHandler=function(){e(this.submenuBtn).on("click",function(t){t.preventDefault();var n=this;e(".toolbar-btn-hover").removeClass("toolbar-btn-hover"),e(this).addClass("toolbar-btn-hover"),e("[data-toggle=popover]").popover("hide"),e(this).siblings(".dropdown-menu").toggle(),setTimeout(function(){e(n).siblings("ul").find("li:eq(1) a").trigger("focus").trigger("hover"),e(n).attr("aria-expanded",!0)},10)})},this.submenuItemList=document.createElement("ul"),this.submenuItemList.className="dropdown-menu",this.submenuItemList.setAttribute("role","menu"),this.submenuTitle=document.createElement("li"),this.submenuTitle.className="appletToolbar-submenu-title",this.submenuTitle.innerHTML=n.submenuTitle,this.submenuItemList.appendChild(this.submenuTitle),t.each(n.submenuItems,function(e){var t=document.createElement("li"),n=document.createElement("a");n.href=e.url,n.text=e.displayText,t.appendChild(n),this.submenuItemList.appendChild(t)},this),this.submenu=document.createElement("div"),this.submenu.className="btn-group dropdown",this.submenu.setAttribute("role","group"),this.submenu.appendChild(this.submenuBtn),this.submenu.appendChild(this.submenuItemList),1===n.submenuItems.length){var i=n.submenuItems[0].url;this.clickHandler=function(){e(this.submenuBtn).on("click",function(e){e.preventDefault(),ADK.Navigation.navigate(i)})}}this.clickHandler(),n.toggler&&this.toggleHandler(n.toggler),this.btn=this.submenu}function a(t){this.btn=document.createElement("a"),this.btn.className="btn",this.btn.setAttribute("id",t.buttonid||"info-button-toolbar"),this.btn.setAttribute("tabindex",0),this.btn.setAttribute("tooltip-data-key","toolbar_infobutton"),this.btn.innerHTML=t.innerHTML||'<i class="fa fa-info"></i>',this.clickHandler=function(t){e(this.btn).on("click",function(n){n.preventDefault(),n.stopPropagation();e(".toolbar-btn-hover").removeClass("toolbar-btn-hover"),e(this).addClass("toolbar-btn-hover"),e(this).siblings(".dropdown").hasClass("open")&&e(".dropdown.open .dropdown-toggle").dropdown("toggle");var o=i.patientRecordService.getCurrentPatient(),r={model:t.targetElement.model,uid:t.targetElement.model.get("uid"),patient:o};ADK.utils.infoButtonUtils.callProvider(r),e(this).tooltip("remove")})},this.setClickHandler=function(e){e.clickHandler&&(this.clickHandler=e.clickHandler)},this.toggleHandler=function(t){var n=this;t.on("click focusin",function(){var t=e(this).parents().find("#"+n.btn.id);t.focus(),e(".toolbar-btn-hover").removeClass("toolbar-btn-hover"),t.addClass("toolbar-btn-hover"),t.siblings(".dropdown").hasClass("open")&&e(".dropdown.open .dropdown-toggle").dropdown("toggle")})},t.toggler?this.toggleHandler(t.toggler):this.toggleHandler(t.targetElement.$el.find("[data-toggle=popover],.right-side")),this.clickHandler(t)}function s(t){this.btn=document.createElement("a"),this.btn.className="btn",this.btn.setAttribute("id",t.buttonid||"quick-look-button-toolbar"),this.btn.setAttribute("tabindex",0),this.btn.setAttribute("tooltip-data-key","toolbar_quicklook"),this.btn.innerHTML=t.innerHTML||'<i class="fa fa-eye"></i>',this.clickHandler=function(t){e(this.btn).on("click",function(n){n.preventDefault(),n.stopPropagation();e(".toolbar-btn-hover").removeClass("toolbar-btn-hover"),e(this).addClass("toolbar-btn-hover"),e(this).siblings(".dropdown").hasClass("open")&&e(".dropdown.open .dropdown-toggle").dropdown("toggle"),t.targetElement.$el.find("[data-toggle=popover]").click(),e(this).tooltip("remove")})},this.setClickHandler=function(e){e.clickHandler&&(this.clickHandler=e.clickHandler)},this.toggleHandler=function(t){var n=this;t.on("click focusin",function(){var t=e(this).parents().find("#"+n.btn.id);t.focus(),e(".toolbar-btn-hover").removeClass("toolbar-btn-hover"),t.addClass("toolbar-btn-hover"),t.siblings(".dropdown").hasClass("open")&&e(".dropdown.open .dropdown-toggle").dropdown("toggle")})},t.toggler?this.toggleHandler(t.toggler):this.toggleHandler(t.targetElement.$el.find("[data-toggle=popover],.right-side")),this.clickHandler(t)}function l(t){this.btn=document.createElement("a"),this.btn.className="btn",this.btn.setAttribute("id",t.buttonid||"detailView-button-toolbar"),this.btn.setAttribute("href","#"),this.btn.setAttribute("tooltip-data-key","toolbar_detailview"),this.btn.innerHTML=t.innerHTML||'<i class="fa fa-file-text-o"></i>',this.clickHandler=function(t){e(this.btn).on("click",function(o){e(".toolbar-btn-hover").removeClass("toolbar-btn-hover"),e(this).addClass("toolbar-btn-hover"),e("[data-toggle=popover]").popover("hide"),e(this).siblings(".dropdown").hasClass("open")&&e(".dropdown.open .dropdown-toggle").dropdown("toggle");var r=i.patientRecordService.getCurrentPatient(),a={model:t.targetElement.model,uid:t.targetElement.model.get("uid"),patient:{icn:r.attributes.icn,pid:r.attributes.pid}};t.targetElement.applet&&(a.applet=t.targetElement.applet),n.getChannel(t.targetElement.model.get("applet_id")).trigger("detailView",a),o.preventDefault(),o.stopPropagation()})},this.setClickHandler=function(e){e.clickHandler&&(this.clickHandler=e.clickHandler)},this.toggleHandler=function(t){var n=this;t.on("click focusin",function(){var t=e(this).parents().find("#"+n.btn.id);e(".toolbar-btn-hover").removeClass("toolbar-btn-hover"),t.siblings(".dropdown").hasClass("open")&&e(".dropdown.open .dropdown-toggle").dropdown("toggle")})},t.toggler?this.toggleHandler(t.toggler):t.targetElement.options.AppletID.indexOf("medication_review_v2")>=0?this.toggleHandler(t.targetElement.$el.find(".medsItemInnerList")):this.toggleHandler(t.targetElement.$el.find(".info-display")),this.clickHandler(t)}function d(t){this.btn=document.createElement("a"),this.btn.className="btn",this.btn.setAttribute("id",t.buttonid||"ordersView-button-toolbar"),this.btn.setAttribute("href","#"),this.btn.setAttribute("tooltip-data-key","Add Orders"),this.btn.innerHTML=t.innerHTML||'<i class="fa fa-plus"></i>',this.clickHandler=function(t){e(this.btn).on("click",function(o){e(".toolbar-btn-hover").removeClass("toolbar-btn-hover"),e(this).addClass("toolbar-btn-hover"),e("[data-toggle=popover]").popover("hide"),e(this).siblings(".dropdown").hasClass("open")&&e(".dropdown.open .dropdown-toggle").dropdown("toggle");var r=(i.patientRecordService.getCurrentPatient(),{model:t.targetElement.model});t.targetElement.applet&&(r.applet=t.targetElement.applet),n.getChannel(t.targetElement.model.get("applet_id")).trigger("addItem",r),n.getChannel("stackedGraph").trigger("delete",{model:model}),o.preventDefault(),o.stopPropagation()})},this.setClickHandler=function(e){e.clickHandler&&(this.clickHandler=e.clickHandler)},this.toggleHandler=function(t){var n=this;t.on("click focusin",function(){var t=e(this).parents().find("#"+n.btn.id);e(".toolbar-btn-hover").removeClass("toolbar-btn-hover"),t.siblings(".dropdown").hasClass("open")&&e(".dropdown.open .dropdown-toggle").dropdown("toggle")})},this.clickHandler(t)}function c(t){this.btn=document.createElement("a"),this.btn.className="btn",this.btn.setAttribute("title","Delete this graph"),this.btn.setAttribute("href","#"),this.btn.setAttribute("id",t.buttonid||"deleteView-button-toolbar"),this.btn.setAttribute("tooltip-data-key","toolbar_deletestackedgraph"),this.btn.innerHTML=t.innerHTML||'<i class="fa fa-times"></i>';var i=t.targetElement.model;this.clickHandler=function(t){e(this.btn).on("click",function(o){e(".toolbar-btn-hover").removeClass("toolbar-btn-hover"),e(this).addClass("toolbar-btn-hover"),e("[data-toggle=popover]").popover("hide"),e(this).siblings(".dropdown").hasClass("open")&&e(".dropdown.open .dropdown-toggle").dropdown("toggle"),e(this).tooltip("destroy"),n.getChannel(t.targetElement.options.AppletID).trigger("delete",{model:i}),o.preventDefault(),o.stopPropagation()})},this.setClickHandler=function(e){e.clickHandler&&(this.clickHandler=e.clickHandler)},this.toggleHandler=function(t){var n=this;t.on("click focusin",function(){var t=e(this).parents().find("#"+n.btn.id);e(".toolbar-btn-hover").removeClass("toolbar-btn-hover"),t.siblings(".dropdown").hasClass("open")&&e(".dropdown.open .dropdown-toggle").dropdown("toggle")})},t.toggler?this.toggleHandler(t.toggler):t.targetElement.options.AppletID.indexOf("medication_review_v2")>=0?this.toggleHandler(t.targetElement.$el.find(".medsItemInnerList")):this.toggleHandler(t.targetElement.$el.find(".info-display")),this.clickHandler(t)}function u(t){var n,i="tilesort-keydown-dragging";this.btn=document.createElement("a"),this.btn.className="btn",this.btn.setAttribute("id",t.buttonid||"tilesort-button-toolbar"),this.btn.setAttribute("href","#"),this.btn.setAttribute("tooltip-data-key","toolbar_tilesortbutton"),this.btn.innerHTML=t.innerHTML||'<i class="fa fa-arrows-v"></i>',this.clickHandler=function(t){e(this.btn).on("click",function(t){t.preventDefault(),t.stopPropagation();e(".toolbar-btn-hover").removeClass("toolbar-btn-hover"),e(this).addClass("toolbar-btn-hover"),e(this).siblings(".dropdown").hasClass("open")&&e(".dropdown.open .dropdown-toggle").dropdown("toggle")}),e(this.btn).on("focusout",function(t){e(this).removeClass(i)}),e(this.btn).on("keydown",function(o){if(e(this).hasClass(i)){o.preventDefault(),o.stopPropagation();var r;r=t.isStackedGraph?e(this).closest(".row").parent():e(this).closest(".gistItem").parent();var a=e(r).children().length;switch(o.which){case 38:case 87:n>0&&(e(r).children().eq(n-1).before(e(r).children().eq(n)),n--),e(this).focus(),e(this).addClass(i);break;case 40:case 90:a>n&&(e(r).children().eq(n+1).after(e(r).children().eq(n)),n++),e(this).focus(),e(this).addClass(i);break;case 13:case 32:e(this).removeClass(i);var s;s=t.isStackedGraph?e(this).closest(".row"):e(this).closest(".gistItem"),e(s).trigger("drop"),e(s).focus()}e(this).focus()}else{var l;if(l=t.isStackedGraph?e(this).closest(".appletToolbar").parent('[draggable="true"]'):e(this).closest(".appletToolbar").siblings('[draggable="true"]'),l.length)switch(o.which){case 13:case 32:o.preventDefault(),o.stopPropagation(),e(this).addClass(i);var d;d=t.isStackedGraph?e(this).closest(".row"):e(this).closest(".gistItem"),n=d.index(),d.trigger("dragstart"),e(this).tooltip("destroy")}}})},this.setClickHandler=function(e){e.clickHandler&&(this.clickHandler=e.clickHandler)},this.toggleHandler=function(t){var n=this;t.on("click focusin",function(){var t=e(this).parents().find("#"+n.btn.id);t.focus(),e(".toolbar-btn-hover").removeClass("toolbar-btn-hover"),t.addClass("toolbar-btn-hover"),t.siblings(".dropdown").hasClass("open")&&e(".dropdown.open .dropdown-toggle").dropdown("toggle")})},t.toggler?this.toggleHandler(t.toggler):this.toggleHandler(t.targetElement.$el.find("[data-toggle=popover],.right-side")),this.clickHandler(t)}return{genericButton:o,quickLookButton:s,detailsViewButton:l,addItemButton:d,subMenuButton:r,infoButton:a,deleteStackedGraphButton:c,tileSortButton:u}}),define("main/components/appletToolbar/factory/buttonFactory",["jquery","underscore","main/components/appletToolbar/factory/buttons"],function(e,t,n){function i(){}return i.prototype.createButton=function(e,t){return t=t.toLowerCase(),"detailsviewbutton"==t?new n.detailsViewButton(e):"quicklookbutton"==t?new n.quickLookButton(e):"additembutton"==t?new n.addItemButton(e):"submenubutton"==t?new n.subMenuButton(e):"infobutton"==t?new n.infoButton(e):"deletestackedgraphbutton"==t?new n.deleteStackedGraphButton(e):"tilesortbutton"==t?new n.tileSortButton(e):new n.genericButton(e)},i.prototype.buttonInstanceOf=function(e,t){return e instanceof n[t]},i}),define("main/components/appletToolbar/toolbarView",["jquery","underscore","backbone","marionette","api/Messaging","api/ResourceService","hbs!main/components/appletToolbar/toolbarTemplate","main/components/appletToolbar/factory/buttonFactory"],function(e,t,n,i,o,r,a,s){var l=n.Marionette.ItemView.extend({template:a,className:"mainAppletToolbar",initialize:function(e){this.options=e,this.targetElement=e.targetElement,this.buttonFactory=new s,this.buttons=[],t.each(e.buttonTypes,function(e){this.buttons.push(this.buttonFactory.createButton(this.options,e))},this)},onDestroy:function(){e("body").off("click.mainAppletToolbar"),this.buttons.forEach(function(t){var n=e(t.btn),i=n.is('[data-toggle="tooltip"]')?n:n.find('[data-toggle="tooltip"]');i.tooltip("destroy")})},onBeforeDestroy:function(){e("body").off("click.mainAppletToolbar"),t.each(this.$el.find(".fa-eye"),function(t){e(t).parent().off("click")}),t.each(this.$el.find(".fa-search"),function(t){e(t).parent().off("click")}),t.each(this.$el.find(".btn"),function(t){e(t).off("focus")}),t.each(this.clickHandlers,function(e){e.toggler.off(e.toggleEvent)})},onRender:function(){e("body").append(this.$el),t.each(this.buttons,function(e){this.$el.find(".btn-group").append(e.btn)},this),this.setPositionToParent()},onShow:function(){this.$el.find(".btn").first().focus()},setPositionToParent:function(){var e=this.targetElement.offset();this.$el.offset({top:e.top,left:e.left})},getBodyElement:function(){return this.$el.find(".toolbarPopover")}}),d=function(n){function i(){this.options=n,this.targetElement=n.targetElement;var i=this;return e(this.targetElement).attr("hasAppletToolbar","true"),this.targetElement.on("click keydown",function(e){("click"===e.type||"keydown"===e.type&&(13===e.which||32===e.which))&&(i.targetElement.hasClass("toolbarActive")||i.showToolbar())}),{showToolbar:t.bind(this.showToolbar,this),hideToolbar:t.bind(this.hideToolbar,this),destroy:t.bind(this.destroy,this)}}return this.onGlobalClick=t.bind(function(e){this.isDismissable(e)&&(this.hideToolbar(),this.targetElement.find("[data-toggle=popover]").popover("hide"))},this),this.onGlobalResize=t.throttle(t.bind(function(e){var t=this;setTimeout(function(){t.toolbarView.setPositionToParent()},500)},this),100,{leading:!1}),this.onContainerScroll=t.throttle(t.bind(function(e){this.toolbarView.setPositionToParent();var t=this.scrollParent.offset().top,n=t+this.scrollParent.height(),i=(this.toolbarView.getBodyElement().outerHeight(),this.toolbarView.getBodyElement().offset().top,this.targetElement.offset().top);i+this.targetElement.outerHeight();i>t&&n>i?this.toolbarView.getBodyElement().show():this.toolbarView.getBodyElement().hide()},this),50,{leading:!1}),this.onKeydown=t.bind(function(e){27===e.keyCode&&(this.hideToolbar(),this.targetElement.focus(),e.preventDefault(),e.stopPropagation())},this),this.attachGlobalListeners=function(){this.scrollParent=this.getScrollParent(this.targetElement,!1),this.scrollParent.on("scroll",this.onContainerScroll),e("body").on("mousedown",this.onGlobalClick),e(window).on("resize",this.onGlobalResize),this.toolbarView.$el.on("keydown",this.onKeydown)},this.removeGlobalListeners=function(){this.scrollParent&&this.scrollParent.off("scroll",self.onContainerScroll),e("body").off("mousedown",this.onGlobalClick),e(window).off("resize",this.onGlobalResize),this.toolbarView.$el.off("keydown",this.onKeydown)},this.showToolbar=function(){this.toolbarView&&this.hideToolbar(),this.toolbarView=new l(this.options),this.toolbarView.render(),e("body").append(this.toolbarView.$el),this.toolbarView.$el.fadeIn(100),this.toolbarView.onShow(),this.targetElement.addClass("toolbarActive"),this.attachGlobalListeners()},this.hideToolbar=function(){this.toolbarView&&(this.removeGlobalListeners(),this.toolbarView.destroy(),this.targetElement.removeClass("toolbarActive"),this.toolbarView=null)},this.destroy=function(){this.hideToolbar()},this.getScrollParent=function(t,n){var i=t.css("position"),o="absolute"===i,r=n?/(auto|scroll|hidden)/:/(auto|scroll)/,a=t.parents().filter(function(){var t=e(this);return o&&"static"===t.css("position")?!1:r.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&a.length?a:e(t[0].ownerDocument||document)},this.isDismissable=function(t){var n=e(t.target).parents("div.toolbarActive").length>0,i=e(t.target).parents(".mainAppletToolbar").length>0,o=e(t.target).parents("#modal-region").length>0,r=e(t.target).parents(".popover").length>0;return!(n||i||o||r)},i.apply(this,arguments)};return d}),define("main/components/views/appletViews/panelsGistView/views/panelsGistView",["jquery","underscore","backbone","main/Utils","hbs!main/components/views/appletViews/panelsGistView/templates/panelsGistLayout","hbs!main/components/views/appletViews/panelsGistView/templates/panelsGistChild","hbs!main/components/views/appletViews/sharedTemplates/gistPopover","api/ResourceService","api/Messaging","main/components/appletToolbar/toolbarView","main/components/views/appletViews/TileSortManager","main/components/applets/baseDisplayApplet/baseDisplayAppletItem","main/components/applets/baseDisplayApplet/baseGistView"],function(e,t,n,i,o,r,a,s,l,d,c,u,h){"use strict";var p=null,g=u.extend({template:r,className:"gistItem item",regions:{toolbarView:".toolbarContainer"},attributes:{tabindex:0},ui:{popoverEl:"[data-toggle=popover]",toolbarToggler:".selectable:not([data-toggle=popover])"},events:{"click .selectable:not([data-toggle=popover])":function(e){var t=this.toolbarView.currentView;this.trigger("before:showtoolbar"),t.show(),this.$el.addClass("toolbarActive"),this.trigger("after:showtoolbar",t)}},createPopover:function(){this.$el.find("[data-toggle=popover]").popover({trigger:"click",html:"true",container:"body",template:a(this.model),placement:"bottom"})},onRender:function(){this.createPopover();var e=new d({targetElement:this,buttonTypes:["infobutton","quicklookbutton"]});this.toolbarView.show(e)},onDestroy:function(){this.ui.popoverEl.popup("destroy")}}),f=h.extend({template:o,childView:g,initialize:function(e){this.childViewOptions={AppletID:this.AppletID,collection:e.collection},this.collectionParser=e.collectionParser||function(e){return e},this.collection=e.collection,this.gistModel=e.gistModel,this.model=new n.Model,this.model.set("gistHeaders",e.gistHeaders||{}),this.model.set("AppletID",this.AppletID),this.childViewContainer="#"+this.AppletID+"-panels-gist-items"},onBeforeRender:function(){this.collection.reset(this.collectionParser(this.collection).models),t.each(this.collection.models,function(e){t.each(this.gistModel,function(t){t.id;e.set(t.id,e.get(t.field))})},this);var e=p+"_"+this.options.appletId;c.getSortOptions(this.collection,e)}}),m={create:function(e){var t=new f(e);return t},getView:function(){return f}};return m}),define("main/components/applets/baseDisplayApplet/views/filterDateRangeView",["jquery","underscore","jquery.inputmask","bootstrap-datepicker","moment","hbs!main/components/applets/grid_applet/templates/dateRangePickerTemplate","api/SessionStorage"],function(e,t,n,i,o,r,a){"use strict";var s=Backbone.Marionette.ItemView.extend({tagName:"form",className:"form-inline",events:{"click button":"clickButton","keydown button":"handleEnterOrSpaceBar","keyup input":"monitorCustomDateRange","blur input":"monitorCustomDateRange","change input":"monitorCustomDateRange"},template:r,monitorCustomDateRange:function(e){this.checkCustomRangeCondition()?this.$el.find("#custom-range-apply-"+this.options.appletId).removeAttr("disabled"):this.$el.find("#custom-range-apply-"+this.options.appletId).prop("disabled",!0)},checkCustomRangeCondition:function(){var e=!1,t=this.$el.find("#filter-from-date-"+this.options.appletId).val(),n=this.$el.find("#filter-to-date-"+this.options.appletId).val();return o(t,"MM/DD/YYYY",!0).isValid()&&o(n,"MM/DD/YYYY",!0).isValid()&&(e=!0),e},enableDatePickers:function(){this.$(".input-group.date#custom-date-range1-"+this.options.appletId).datepicker({format:"mm/dd/yyyy",autoclose:!0}),this.$(".input-group.date#custom-date-range2-"+this.options.appletId).datepicker({format:"mm/dd/yyyy",autoclose:!0}),this.$("#filter-from-date-"+this.options.appletId).datepicker("remove"),this.$("#filter-to-date-"+this.options.appletId).datepicker("remove")},handleEnterOrSpaceBar:function(e){var t=e&&e.which?e.which:e.keyCode;if(13==t||32==t){var n=this.$el.find("#"+e.currentTarget.id);n.focus(),n.trigger("click")}},clickButton:function(e){var t=this.options.appletId;this.$el.find("button").removeClass("active-range"),e.currentTarget.id!=="custom-range-apply-"+this.options.appletId&&this.$el.find("#"+e.currentTarget.id).addClass("active-range");var n=null,i=o().add("months",6);switch(-1!==e.currentTarget.id.indexOf("-range-")&&-1===e.currentTarget.id.indexOf("custom-range-apply-"+this.options.appletId)&&(this.$el.find("#filter-from-date-"+t).val(""),this.$el.find("#filter-to-date-"+t).val(""),this.$el.find("#custom-range-apply-"+this.options.appletId).prop("disabled",!0)),e.currentTarget.id){case"all-range-"+t:i=o().add("years",100);break;case"2yr-range-"+t:n=o().subtract("years",2);break;case"1yr-range-"+t:n=o().subtract("years",1);break;case"3mo-range-"+t:n=o().subtract("months",3);break;case"1mo-range-"+t:n=o().subtract("months",1);break;case"7d-range-"+t:n=o().subtract("days",7);break;case"72hr-range-"+t:n=o().subtract("days",3);break;case"24hr-range-"+t:n=o().subtract("days",1);break;default:var r=this.$el.find("#filter-from-date-"+t).val(),a=this.$el.find("#filter-to-date-"+t).val();if(void 0!==r&&null!==r&&r.trim().length>0&&(n=o(r,"MM/DD/YYYY")),void 0!==a&&null!==a&&a.trim().length>0&&(i=o(a,"MM/DD/YYYY")),n>i){var s=n;n=i,i=s}}var l={isOverrideGlobalDate:!0,customFilter:this.options.appletView.appletOptions.collection.fetchOptions.criteria.customFilter};null!==n&&(l.fromDate=n.format("MM/DD/YYYY")),null!==i&&(l.toDate=i.format("MM/DD/YYYY"));var d=this.model.get("filterDateRangeField").name;this.options.appletView.dateRangeRefresh(d,l)},onRender:function(e){this.$("#filter-from-date-"+this.options.appletId).inputmask("m/d/y",{placeholder:"MM/DD/YYYY"}),this.$("#filter-to-date-"+this.options.appletId).inputmask("m/d/y",{placeholder:"MM/DD/YYYY"}),this.enableDatePickers();var t=a.getModel("globalDate"),n=t.get("selectedId");if(void 0!==n&&null!==n){var i=t.get("customFromDate"),o=t.get("customToDate");if(this.$(".input-group.date#custom-date-range1-"+this.options.appletId).datepicker("update",i),this.$(".input-group.date#custom-date-range2-"+this.options.appletId).datepicker("update",o),"custom-range-apply-global"!==n){var r="#"+n.slice(0,-6)+this.options.appletId;this.$el.find(r).addClass("active-range"),this.$el.find("#filter-from-date-"+this.options.appletId).val(""),this.$el.find("#filter-to-date-"+this.options.appletId).val(""),this.$el.find("#custom-range-apply-"+this.options.appletId).prop("disabled",!0)}}else this.$el.find("1yr-range-"+this.options.appletId).addClass("active-range")}});return s}),define("hbs!main/components/applets/baseDisplayApplet/templates/containerTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'<div class="panel-body grid-applet-panel" id="grid-panel-'+s((o=null!=(o=t.instanceId||(null!=e?e.instanceId:e))?o:a,typeof o===r?o.call(e,{name:"instanceId",hash:{},data:i}):o))+'">\n    <div id="grid-filter-'+s((o=null!=(o=t.instanceId||(null!=e?e.instanceId:e))?o:a,typeof o===r?o.call(e,{name:"instanceId",hash:{},data:i}):o))+'" class="collapse">\n        <div class="grid-filter-daterange"></div>\n        <div class="grid-filter"></div>\n    </div>\n    <div class="grid-toolbar"></div>\n    <div class="grid-container"></div>\n</div>'},useData:!0});return t.registerPartial("main/components/applets/baseDisplayApplet/templates/containerTemplate",n),n}),define("main/components/applets/baseDisplayApplet/view",["jquery","underscore","main/Utils","main/backgrid/filter","api/ResourceService","api/SessionStorage","main/components/views/appletViews/TileSortManager","main/components/views/loadingView","main/components/views/errorView","main/components/applets/baseDisplayApplet/views/filterDateRangeView","hbs!main/components/applets/baseDisplayApplet/templates/containerTemplate"],function(e,t,n,i,o,r,a,s,l,d,c){"use strict";var u=Backbone.Marionette.LayoutView.extend({initialize:function(e){var n=!1;if(!this.appletConfig||t.isUndefined(this.appletConfig.instanceId)){this.options.appletConfig&&t.isUndefined(this.options.appletConfig.instanceId)?this.options.appletConfig.instanceId=this.options.appletConfig.id:this.options.appletConfig||(this.options.appletConfig={},
this.options.appletConfig.id=this.appletOptions.appletConfig.id,this.options.appletConfig.instanceId=this.appletOptions.appletConfig.instanceId,this.options.appletConfig.fullScreen=!1);var o=ADK.Messaging.request("applet:maximized");t.isUndefined(o)||(this.options.appletConfig.filterName=o.get("filterName"),n=!0,ADK.Messaging.reply("applet:maximized",function(){})),this.appletConfig=this.options.appletConfig}if(this.expandedAppletId=this.appletConfig.instanceId,this.appletConfig.fullScreen){this.parentWorkspace=ADK.Messaging.request("get:current:workspace");var a=r.get.sessionModel("expandedAppletId");t.isUndefined(a)||t.isUndefined(a.get("id"))||(this.expandedAppletId=a.get("id"),r.set.sessionModel("expandedAppletId",new Backbone.Model({id:void 0})))}var l=this.appletOptions||{};if(this.appletOptions=l,this.appletOptions.emptyText=l.emptyText||"No Records Found",this.listenTo(this.appletOptions.collection,"sync",this.onSync),this.listenTo(this.appletOptions.collection,"error",this.onError),this.routeParam=this.options.routeParam,this.appletConfig.fullScreen?r.setAppletStorageModel(this.appletConfig.instanceId,"fullScreen",!0):r.setAppletStorageModel(this.appletConfig.instanceId,"fullScreen",!1),this.model=new Backbone.Model({instanceId:this.appletConfig.instanceId,workspaceId:ADK.Messaging.request("get:current:screen").config.id}),this.appletOptions.filterFields||this.appletOptions.filterDateRangeField){var c,u,h=!1;this.appletOptions.filterFields&&(c=this.appletOptions.filterFields),this.appletOptions.filterDateRangeField&&(u=this.appletOptions.filterDateRangeField,h=!0);var p={id:this.appletConfig.instanceId,workspaceId:ADK.Messaging.request("get:current:screen").config.id,maximizedScreen:n,fullScreen:this.appletConfig.fullScreen,collection:this.appletOptions.collection,filterFields:c,filterDateRangeField:u,model:this.model};this.filterView=i.create(p),this.appletOptions.appletId=this.appletConfig.id,this.appletOptions.instanceId=this.appletConfig.instanceId,this.appletOptions.filterDateRangeField&&this.appletConfig.fullScreen&&(this.filterDateRangeView=new d({model:new Backbone.Model(l),appletId:this.appletOptions.appletId,appletView:this}))}this.appletOptions.hasOwnProperty("onClickAdd")&&(this.onClickAdd=this.appletOptions.onClickAdd),this.appletOptions.toolbarView&&(this.toolbarView=this.appletOptions.toolbarView),this.setAppletView(),this.loadingView=s.create(),"gist"===this.options.appletConfig.viewType&&(this.listenTo(this,"show",function(){this.$(".grid-applet-panel").on("scroll",function(){self.$("[data-toggle=popover]").popover("hide")})}),this.listenTo(this,"destroy",function(){this.$(".grid-applet-panel").off("scroll")}))},setAppletView:function(){this.displayAppletView=new this.appletOptions.AppletView(this.appletOptions)},onRender:function(){if(this.loading(),this.filterView){e(this.filterView.el).css({marginLeft:"0px",marginTop:"0px",marginBottom:"6px"}),this.appletFilter.show(this.filterView);var t=("input[name='q-"+this.appletConfig.instanceId+"']",this);this.filterView.$el.find("input[type=search]").on("change",function(){r.setAppletStorageModel(t.expandedAppletId,"filterText",e(this).val(),!0)}),this.filterView.$el.find("a[data-backgrid-action=clear]").on("click",function(){r.setAppletStorageModel(t.expandedAppletId,"filterText",e(this).val(),!0)}),this.filterDateRangeView&&this.appletFilterDateRange.show(this.filterDateRangeView),this.$el.find(".grid-filter input").attr("tabindex","0")}},template:c,regions:{appletContainer:".grid-container",appletToolbar:".grid-toolbar",appletFilterDateRange:".grid-filter-daterange",appletFilter:".grid-filter"},eventMapper:{refresh:"refresh",add:"onClickAdd"},onSync:function(n){var i=this.$("[data-instanceid='"+this.appletConfig.instanceId+"']");if(0===i.length&&(i=this.$el.closest("[data-instanceid='"+this.appletConfig.instanceId+"']")),i.find(".fa-refresh").removeClass("fa-spin"),this.toolbarView&&this.appletToolbar.show(this.toolbarView),this.filterView){var o=r.getAppletStorageModel(this.expandedAppletId,"filterText",!0,this.parentWorkspace);this.filterView&&(this.filterView.userDefinedFilters.length>0||!t.isUndefined(o)&&!t.isNull(o)&&o.trim().length>0)&&this.filterView.search()}this.showStandardAppletView(),this.appletOptions.collection.length>0&&!t.isUndefined(this.appletOptions.tblRowSelector)&&e(this.appletOptions.tblRowSelector).each(function(){e(this).attr("data-infobutton",e(this).find("td:nth-child(2)").text().replace("Panel",""))});var a,s;t.each(this.appletOptions.columns,function(t,n){s=n+1,a=e(i).find("thead th:nth-child("+s+") a"),0===a.length&&(a=e(i).find("thead th:nth-child("+s+")")),e(a).attr("tooltip-data-key",t.hoverTip)})},onError:function(e,t){var n=new Backbone.Model(t),i=l.create({model:n});this.showViewInAppletContainer(i)},loading:function(){this.showViewInAppletContainer(this.loadingView)},showStandardAppletView:function(){this.showViewInAppletContainer(this.displayAppletView)},showViewInAppletContainer:function(e,t){t=t||{},t.preventDestroy=this.appletContainer.currentView==this.loadingView,this.appletContainer.show(e,t)},refresh:function(e){if(void 0!==this.appletOptions.refresh)return this.loading(),void this.appletOptions.refresh(this);var t=this.appletOptions.collection;this.loading(),this.setAppletView(),t instanceof Backbone.PageableCollection?t.fullCollection.reset():t.reset(),o.clearCache(t.url),o.fetchCollection(t.fetchOptions,t)},buildJdsDateFilter:function(e,i){var o,a,s,l,d;if(i=i||{},t.defaults(i,{isOverrideGlobalDate:!1,operator:"and"}),o=i.isOverrideGlobalDate,l=i.customFilter,d=i.operator,o)a=i.fromDate,s=i.toDate;else{var c=r.getModel("globalDate");void 0!==c.get("selectedId")&&null!==c.get("selectedId")&&(a=c.get("fromDate"),s=c.get("toDate"))}a=void 0===a||null===a||0===a.trim().length?"":'"'+n.formatDate(a,"YYYYMMDD","MM/DD/YYYY")+'"',s=void 0===s||null===s||0===s.trim().length?"":'"'+n.formatDate(s,"YYYYMMDD","MM/DD/YYYY")+'235959"';var u;return""!==a&&""!==s?u="between("+e+","+a+","+s+")":""===a&&""!==s?u="lte("+e+","+s+")":""!==a&&""===s?u="gte("+e+","+a+")":console.error("BaseDisplayAppletView: buildJdsDateFilter both fromDate and toDate are empty."),void 0!==l&&null!==l&&(u=d+"("+u+","+l+")"),u},dateRangeRefresh:function(e,t){this.appletOptions.collection.fetchOptions.criteria.filter=this.buildJdsDateFilter(e,t);var n=this.appletOptions.collection;this.loading(),this.displayAppletView=new this.appletOptions.AppletView(this.appletOptions),n instanceof Backbone.PageableCollection?n.fullCollection.reset():n.reset(),o.fetchCollection(n.fetchOptions,n)},showFilterView:function(){var e=r.getAppletStorageModel(this.expandedAppletId,"filterText",!0,this.parentWorkspace);this.appletOptions.filterFields&&void 0!==e&&null!==e&&e.length>0?(this.$el.find("#grid-filter-"+this.appletConfig.instanceId).toggleClass("collapse in"),this.$el.find("input[name='q-"+this.appletConfig.instanceId+"']").val(e),this.filterView.showClearButtonMaybe()):this.appletOptions.filterDateRangeField&&this.appletConfig.fullScreen&&this.$el.find("#grid-filter-"+this.appletConfig.instanceId).toggleClass("collapse in")},onShow:function(){this.showFilterView()},onDestroy:function(){try{this.toolbarView&&!this.toolbarView.isDestroyed&&(this.toolbarView.destroy(),this.toolbarView=null)}catch(e){console.error("Error destroying toolbarView in applet:",this.appletConfig.id,e)}try{this.loadingView&&!this.loadingView.isDestroyed&&(this.loadingView.destroy(),this.loadingView=null)}catch(e){console.error("Error destroying loadingView in applet:",this.appletConfig.id,e)}try{this.displayAppletView&&!this.displayAppletView.isDestroyed&&(this.displayAppletView.destroy(),this.displayAppletView=null)}catch(e){console.error("Error destroying displayAppletView in applet:",this.appletConfig.id,e)}}});return u}),define("main/components/views/appletViews/gridView/view",["jquery","underscore","main/Utils","main/components/applets/baseDisplayApplet/view","main/backgrid/datagrid","main/backgrid/filter","api/ResourceService","api/SessionStorage","main/components/views/loadingView","main/components/views/errorView","main/components/applets/grid_applet/views/filterDateRangeView","hbs!main/components/applets/grid_applet/templates/containerTemplate","main/components/applets/grid_applet/gists/gistView"],function(e,t,n,i,o,r,a,s,l,d,c,u,h){"use strict";function p(n){n.appletOptions.collection.length>0&&!t.isUndefined(n.appletOptions.tblRowSelector)&&e(n.appletOptions.tblRowSelector).each(function(){e(this).attr("data-infobutton",e(this).find("td:nth-child(2)").text().replace("Panel",""))})}var g=40,f=100,m=30,v=i,b=i.extend({initialize:function(e){this._base=v.prototype,this.options.appletConfig||(this.options.appletConfig={},this.options.appletConfig.id=this.appletOptions.appletConfig.id,this.options.appletConfig.instanceId=this.appletOptions.appletConfig.instanceId,this.options.appletConfig.fullScreen=!1,this.appletConfig=this.options.appletConfig);var t=this.appletOptions||{};this.appletOptions=t,this.appletOptions.appletConfig=this.options.appletConfig,this.options.appletConfig.fullScreen?this.appletOptions.columns=t.fullScreenColumns||t.summaryColumns||t.columns:this.appletOptions.columns=t.summaryColumns||t.columns,this.appletOptions.collection instanceof Backbone.PageableCollection&&(this.options.appletConfig.fullScreen||this.options.appletConfig.fullScreen===!0?this.appletOptions.collection.setPageSize(100,{silent:!0}):this.appletOptions.collection.setPageSize(m,{silent:!0})),this.appletOptions.AppletView=o.returnView(this.appletOptions),this._base.initialize.apply(this,arguments),this.appletOptions.collection.markInfobutton={that:this,func:p}},onRender:function(){if(this._base.onRender.apply(this,arguments),this.appletOptions.collection instanceof Backbone.PageableCollection){var e=this;this.appletConfig.fullScreen&&this.appletConfig.fullScreen===!0||this.$el.find("#grid-panel-"+this.appletConfig.instanceId).on("scroll",function(t){e.fetchRows(t)})}},fetchRows:function(n){var i=n.currentTarget;if(i.scrollTop+i.clientHeight+g>i.scrollHeight&&this.appletOptions.collection.hasNextPage()){n.preventDefault(),this.appletOptions.collection.setPageSize(this.appletOptions.collection.state.pageSize+f);var o=s.getAppletStorageModel(this.appletConfig.instanceId,"filterText",!1);this.filterView&&(this.filterView.userDefinedFilters.length>0||!t.isUndefined(o)&&!t.isNull(o)&&""!==o)&&this.filterView.doSearch(),this.appletOptions.collection.length>0&&!t.isUndefined(this.appletOptions.tblRowSelector)&&e(this.appletOptions.tblRowSelector).each(function(){e(this).attr("data-infobutton",e(this).find("td:nth-child(2)").text().replace("Panel",""))})}},onSync:function(){if(this.filterView&&this.filterView.doSearch(),this._base.onSync.apply(this,arguments),this.appletOptions.collection instanceof Backbone.PageableCollection)if(this.appletConfig.fullScreen||this.appletConfig.fullScreen===!0){var e,n=this;e=t.isUndefined(this.appletOptions.toolbarView)?this.$el.find("#grid-panel-"+this.appletConfig.instanceId).length>0?this.$el.find("#grid-panel-"+this.appletConfig.instanceId):this.$el.find(".data-grid-"+this.appletConfig.instanceId):this.$el.find(".data-grid"),e.on("scroll",function(e){n.fetchRows(e)}),e.trigger("scroll")}else this.$el.find("#grid-panel-"+this.appletConfig.instanceId).length>0?this.$el.find("#grid-panel-"+this.appletConfig.instanceId).trigger("scroll"):this.$el.find(".data-grid-"+this.appletConfig.instanceId).trigger("scroll")},refresh:function(e){if(void 0!==this.appletOptions.refresh)this._base.refresh.apply(this,arguments);else{var t=this.appletOptions.collection;this.appletOptions.collection instanceof Backbone.PageableCollection&&t.setPageSize(m,{silent:!0}),this._base.refresh.apply(this,arguments)}},dateRangeRefresh:function(e,t){this.appletOptions.collection.fetchOptions.criteria.filter=this.buildJdsDateFilter(e,t);var n=this.appletOptions.collection;this.appletOptions.collection instanceof Backbone.PageableCollection&&n.setPageSize(m,{silent:!0}),this.loading(),this.displayAppletView=o.create(this.appletOptions),n instanceof Backbone.PageableCollection?n.fullCollection.reset():n.reset(),a.fetchCollection(n.fetchOptions,n)},expandRowDetails:function(t){if(t){var n=e("#"+t);n.click();var i=e(window).height(),o=n.offset().top;o+n.next().height()+50>i&&e("html, body").animate({scrollTop:o-100},0)}}});return b}),define("main/components/views/appletViews/pillsGistView/view",["jquery","underscore","main/components/applets/baseDisplayApplet/view","main/components/views/appletViews/pillsGistView/views/pillGistView"],function(e,t,n,i){"use strict";var o=n,r=n.extend({initialize:function(e){this._base=o.prototype,this.options.appletConfig||(this.options.appletConfig={},this.options.appletConfig.id=this.appletOptions.appletConfig.id,this.options.appletConfig.instanceId=this.appletOptions.appletConfig.instanceId,this.options.appletConfig.fullScreen=!1,this.appletConfig=this.options.appletConfig);var t=this.appletOptions||{};this.appletOptions=t,this.appletOptions.appletConfig=this.options.appletConfig,this.appletOptions.AppletView=i.getView(),this._base.initialize.apply(this,arguments)}});return r}),define("main/components/views/appletViews/interventionsGistView/view",["jquery","underscore","main/components/applets/baseDisplayApplet/view","main/components/views/appletViews/interventionsGistView/views/interventionsGistView"],function(e,t,n,i){"use strict";var o=n,r=n.extend({initialize:function(e){this._base=o.prototype,this.options.appletConfig||(this.options.appletConfig={},this.options.appletConfig.id=this.appletOptions.appletConfig.id,this.options.appletConfig.instanceId=this.appletOptions.appletConfig.instanceId,this.options.appletConfig.fullScreen=!1,this.appletConfig=this.options.appletConfig);var t=this.appletOptions||{};this.appletOptions=t,this.appletOptions.appletConfig=this.options.appletConfig,this.appletOptions.AppletView=i.getView(),this._base.initialize.apply(this,arguments)}});return r}),define("main/components/views/appletViews/eventsGistView/view",["jquery","underscore","main/components/applets/baseDisplayApplet/view","main/components/views/appletViews/eventsGistView/views/eventsGistView"],function(e,t,n,i){"use strict";var o=n,r=n.extend({initialize:function(e){this._base=o.prototype,this.options.appletConfig||(this.options.appletConfig={},this.options.appletConfig.id=this.appletOptions.appletConfig.id,this.options.appletConfig.instanceId=this.appletOptions.appletConfig.instanceId,this.options.appletConfig.fullScreen=!1,this.appletConfig=this.options.appletConfig);var t=this.appletOptions||{};this.appletOptions=t,this.appletOptions.appletConfig=this.options.appletConfig,this.appletOptions.AppletView=i.getView(),this._base.initialize.apply(this,arguments)},events:{"click tr.selectable":"onClickRow"},onClickRow:function(t){var n=e(t.target).closest("tr"),i=n.data("model");this.options.onClickRow?this.options.onClickRow(i,t,this):this.options.DetailsView&&this.expandRow(i,t)}});return r}),define("main/components/views/appletViews/observationsGistView/view",["jquery","underscore","main/components/applets/baseDisplayApplet/view","main/components/views/appletViews/observationsGistView/views/observationsGistView"],function(e,t,n,i){"use strict";var o=n,r=n.extend({initialize:function(e){this._base=o.prototype,this.options.appletConfig||(this.options.appletConfig={},this.options.appletConfig.id=this.appletOptions.appletConfig.id,this.options.appletConfig.instanceId=this.appletOptions.appletConfig.instanceId,this.options.appletConfig.fullScreen=!1,this.appletConfig=this.options.appletConfig);var t=this.appletOptions||{};this.appletOptions=t,this.appletOptions.appletConfig=this.options.appletConfig,this.appletOptions.AppletView=i.getView(),this._base.initialize.apply(this,arguments)}});return r}),define("main/components/views/appletViews/panelsGistView/view",["jquery","underscore","main/components/applets/baseDisplayApplet/view","main/components/views/appletViews/panelsGistView/views/panelsGistView"],function(e,t,n,i){"use strict";var o=n,r=n.extend({initialize:function(e){this._base=o.prototype,this.options.appletConfig||(this.options.appletConfig={},this.options.appletConfig.id=this.appletOptions.appletConfig.id,this.options.appletConfig.instanceId=this.appletOptions.appletConfig.instanceId,this.options.appletConfig.fullScreen=!1,this.appletConfig=this.options.appletConfig);var t=this.appletOptions||{};this.appletOptions=t,this.appletOptions.appletConfig=this.options.appletConfig,this.appletOptions.AppletView=i.getView(),this._base.initialize.apply(this,arguments)}});return r}),define("main/components/popup/popup",["backbone","marionette","jquery","underscore"],function(e,t,n,i){var o={template:'<div class="popover" role="tooltip"><div class="popover-title"></div><div class="popover-content"></div></div>',html:!0,title:"",content:""};n.prototype.popup=function(e){if(this.size()){var t,r,a=function(e,t,n,o){var r=this.$tip.css("margin-left"),a=this.$tip.css("margin-top");this.$tip.css("margin-left",this.options["margin-left"]?this.options["margin-left"]:r).css("margin-top",this.options["margin-top"]?this.options["margin-top"]:a),"function"==typeof this.options.autoHandler&&(e=this.options.autoHandler.call(this,arguments)||e);var s=this.options.valign,l=this.options.halign,d=this.options.referenceEl&&this.options.referenceEl[0]?this.options.referenceEl[0].getBoundingClientRect():!1,c=d?i.extend({},t,d,{bottom:d.top+d.height,right:d.left+d.width,height:d.height,width:d.width}):t,u="bottom"==s?c.top+c.height-o:"center"==s?c.top+c.height/2-o/2:"top"==s?c.top:null,h="left"==l?c.left:"center"==l?c.left+c.width/2-n/2:"right"==l?c.left+c.width-n:null,p="bottom"==e?{top:u?u:c.top+c.height,left:h?h:c.left+c.width/2-n/2}:"top"==e?{top:u?u:c.top-o,left:h?h:c.left+c.width/2-n/2}:"left"==e?{top:u?u:c.top+c.height/2-o/2,left:h?h:c.left-n}:{top:u?u:c.top+c.height/2-o/2,left:h?h:c.left+c.width};return{top:p.top+(0|parseFloat("function"==typeof this.options.yoffset?this.options.yoffset.apply(this,arguments):this.options.yoffset)),left:p.left+(0|parseFloat("function"==typeof this.options.xoffset?this.options.xoffset.apply(this,arguments):this.options.xoffset))}},s=function(){delete this.options.referenceEl,delete this.options.autoHandler,n.prototype.tooltip.Constructor.prototype.destroy.apply(this,arguments)};i.each(this,function(l){t=n(l).data("bs.popover"),r=e instanceof Object?i.extend({},t?t.options:o,e):e,n(l).popover(r),n(l).data("bs.popover")&&(n(l).data("bs.popover").getCalculatedOffset=a,n(l).data("bs.popover").destroy=s)})}}}),define("hbs!main/components/adk_nav/navTemplate",["hbs","handlebars"],function(e,t){var n=t.template({1:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'                    <li><a href="#'+s((o=null!=(o=t.pageName||(null!=e?e.pageName:e))?o:a,typeof o===r?o.call(e,{name:"pageName",hash:{},data:i}):o))+'">'+s((o=null!=(o=t.pageName||(null!=e?e.pageName:e))?o:a,typeof o===r?o.call(e,{name:"pageName",hash:{},data:i}):o))+"</a>\n                    </li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d='<nav role="navigation" class="navbar navbar-default">\n    <div class="navbar-header">\n        <a href="/" class="navbar-brand">\n            <span class="fa fa-home"></span>&nbsp;<b>eHMP</b>\n        </a>\n    </div>\n    <div>\n        <ul class="nav navbar-nav">\n            <li><a href="#medication-review-screen">Medication Review</a>\n            </li>\n            <li class="dropdown">\n                <a href="#" class="dropdown-toggle" data-toggle="dropdown">\n               Sample Applets \n               <b class="caret"></b>\n            </a>\n                <ul class="dropdown-menu">\n                    <li><a href="#allergy-list">Allergies</a>\n                    </li>\n                    <li><a href="#vital-list">Vitals</a>\n                    </li>\n                    <li><a href="#lab-list">Labs</a>\n                    </li>\n                    <li><a href="#consult-list">Consults</a>\n                    </li>\n                    <li><a href="#immunization-list">Immunizations</a>\n                    </li>\n                    <li><a href="#medication-list">Medications</a>\n                    </li>\n                    <li><a href="#order-list">Orders</a>\n                    </li>\n                    <li><a href="#problem-list">Problem History</a>\n                    </li>\n                    <li><a href="#radiology-list">Radiology</a>\n                    </li>\n                    <li><a href="#document-list">Notes</a>\n                    </li>\n                    <li><a href="#medication-review-screen">Med Review</a>\n                    </li>\n                </ul>\n            </li>\n            <li class="dropdown">\n                <a href="#" class="dropdown-toggle" data-toggle="dropdown">\n               Sample Layouts \n               <b class="caret"></b>\n            </a>\n                <ul class="dropdown-menu">\n                    <li><a href="#grid-two-screen">Grid 2</a>\n                    </li>\n                    <li><a href="#grid-three-screen">Grid 3</a>\n                    </li>\n                    <li><a href="#grid-four-screen">Grid 4</a>\n                    </li>\n                    <li><a href="#grid-nine-screen">Grid 9</a>\n                    </li>\n                </ul>\n            </li>\n            <li class="admin">\n                <a href="#" class="dropdown-toggle" data-toggle="dropdown">\n               Admin\n               <b class="caret"></b>\n            </a>\n                <ul class="dropdown-menu">\n                    <li><a href="#admin-resources-screen">Resources</a>\n                    </li>\n                    <li><a href="#admin-health-check-screen">Health Check</a>\n                    </li>\n                </ul>\n            </li>\n        </ul>\n    </div>\n    <div class="navbar-right">\n        <ul class="nav navbar-nav">\n            <li class="dropdown">\n                <a href="#" class="dropdown-toggle" data-toggle="dropdown">\n                    '+l((r=null!=(r=t.lastname||(null!=e?e.lastname:e))?r:s,typeof r===a?r.call(e,{name:"lastname",hash:{},data:i}):r))+", "+l((r=null!=(r=t.firstname||(null!=e?e.firstname:e))?r:s,typeof r===a?r.call(e,{name:"firstname",hash:{},data:i}):r))+'\n                    <b class="caret"></b>\n                </a>\n                <ul class="dropdown-menu">\n                    <div class="container-fluid">\n                        <dt class="text-muted">'+l((r=null!=(r=t.facility||(null!=e?e.facility:e))?r:s,typeof r===a?r.call(e,{name:"facility",hash:{},data:i}):r))+'</dt>\n                        <dd class="text-info">'+l((r=null!=(r=t.title||(null!=e?e.title:e))?r:s,typeof r===a?r.call(e,{name:"title",hash:{},data:i}):r))+'</dd>\n                    </div>\n                    <li class="divider"></li>\n';return o=t.each.call(e,null!=e?e.pages:e,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+'                </ul>\n            </li>\n            <li class="dropdown">\n                <a href="#" class="dropdown-toggle" data-toggle="dropdown">\n                    <span class="fa fa-question-circle"></span>&nbsp;Help\n                    <b class="caret"></b>\n                </a>\n                <ul class="dropdown-menu">\n                    <li><a href="#">Contact</a>\n                    </li>\n                </ul>\n            </li>\n            <li>\n                <a href="#" id="logoutButton">\n                    <span class="fa fa-power-off"></span>&nbsp;Signout\n                </a>\n            </li>\n        </ul>\n    </div>\n</nav>'},useData:!0});return t.registerPartial("main/components/adk_nav/navTemplate",n),n}),define("main/components/adk_nav/navView",["backbone","marionette","underscore","hbs!main/components/adk_nav/navTemplate","api/UserService","api/Messaging"],function(e,t,n,i,o,r){"use strict";return e.Marionette.ItemView.extend({model:o.getUserSession(),template:i,className:"col-md-12 navbar-fixed-top heightSmall",events:{"click #logoutButton":"logout"},logout:function(){r.trigger("app:logout")}})}),define("main/AppletBuilder",["api/Messaging","underscore"],function(e,t){"use strict";var n={build:function(t,n){function i(t,i,o,r,a,s){t.id=n.id,t.appletConfig=n;var l=function(){n.viewTypes&&(e.getChannel(n.id).reply("viewTypes",function(){return n.viewTypes}),t.viewTypes=n.viewTypes,n.defaultViewType&&(t.defaultViewType=n.defaultViewType)),n.permissions&&(t.permissions=n.permissions),n.onDisplay&&(t.displayApplet=n.onDisplay.bind(t)),n.getRootView&&(t.getRootView=n.getRootView.bind(t))};n.hasPermission(function(e){t.hasPermission=e,e===!0&&(l(),t.buildPromise.resolve())})}var o=t.module(n.id,i);return o}};return n}),define("_assets/templates/helpers/formatSSN",["handlebars","moment"],function(e,t){function n(e,t){if($.isPlainObject(t)&&(t=!0),e){var n=e;return(9==e.length||11==e.length)&&(n=e.replace("-",""),n=t?"***-**-".concat(n.substring(5)):n.substring(0,3).concat("-").concat(n.substring(3,5)).concat("-").concat(n.substring(5))),n}return""}return e.registerHelper("formatSSN",n),n}),define("_assets/templates/helpers/formatDate",["handlebars","moment"],function(e,t){function n(e,n,i){return $.isPlainObject(n)?(n="MM/DD/YYYY",i="YYYYMMDDHHmmssSSS"):$.isPlainObject(i)&&(i="YYYYMMDDHHmmssSSS"),e?t(e,i).format(n):""}return e.registerHelper("formatDate",n),n}),define("hbs!main/components/patient/patientSearchResultTemplate",["hbs","handlebars","_assets/templates/helpers/formatSSN","_assets/templates/helpers/formatDate"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'<div class="list-group-item-text" style="cursor:pointer;cursor:hand">\n	<p>'+s((o=null!=(o=t.fullName||(null!=e?e.fullName:e))?o:a,typeof o===r?o.call(e,{name:"fullName",hash:{},data:i}):o))+"</p>\n	<p>\n		<small>\n			<span>"+s((t.formatSSN||e&&e.formatSSN||a).call(e,null!=e?e.ssn:e,{name:"formatSSN",hash:{},data:i}))+'</span>\n			<span class="pull-right">'+s((t.formatDate||e&&e.formatDate||a).call(e,null!=e?e.birthDate:e,{name:"formatDate",hash:{},data:i}))+"</span>\n		</small>\n	</p>\n</div>"},useData:!0});return t.registerPartial("main/components/patient/patientSearchResultTemplate",n),n}),define("hbs!main/components/patient/patientSearchTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div class="form-group">\n	<label class="sr-only" for="patientSearch">Patient Search</label>\n	<div class="input-group">\n	  <input type="text" class="form-control input-sm" id="patientSearchInput" placeholder="Search All Patients">\n	  <span class="input-group-addon"><span class="fa fa-search"></span></span>\n	</div>\n</div>\n<div id="patient-search-results"></div>'},useData:!0});return t.registerPartial("main/components/patient/patientSearchTemplate",n),n}),define("main/components/patient/patientSearchView",["backbone","marionette","underscore","hbs!main/components/patient/patientSearchResultTemplate","hbs!main/components/patient/patientSearchTemplate","api/Messaging","api/ResourceService","main/Utils"],function(e,t,n,i,o,r,a,s){"use strict";var l=e.Marionette.ItemView.extend({tagName:"a",className:"list-group-item row-layout",template:i,events:{click:"selectPatient"},selectPatient:function(e){e.preventDefault(),e.stopPropigation();var t=this.model;r.trigger("patient:selected",t),$("a.active").removeClass("active"),$(event.currentTarget).addClass("active")}}),d=e.Marionette.CollectionView.extend({childView:l,tagName:"div",className:"list-group"}),c=e.Marionette.LayoutView.extend({template:o,regions:{patientSearchResults:"#patient-search-results"},onRender:function(){this.loadSearchResults("")},events:{"keyup #patientSearchInput":"search"},search:function(){patientSearchInput&&this.loadSearchResults(patientSearchInput.value)},loadSearchResults:function(e){var t={fullName:e,itemsPerPage:20},n={defaults:{ageYears:"Unk"},parse:function(e){return e}},i={};i.resourceTitle="patient-search-full-name",i.viewModel=n,i.criteria=t;var o=a.fetchCollection(i),r=new d({collection:o});this.patientSearchResults.show(r)}});return c}),define("hbs!main/components/patient/cwad/templates/cwadDetailContainer",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'<div class="cwadContainer-title">\n    <!-- <button type="button" class="close">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button> -->\n    <h5>'+s((o=null!=(o=t.title||(null!=e?e.title:e))?o:a,typeof o===r?o.call(e,{name:"title",hash:{},data:i}):o))+'</h5>\n</div>\n<div id="cwad-detail-list"></div>\n'},useData:!0});return t.registerPartial("main/components/patient/cwad/templates/cwadDetailContainer",n),n}),define("_assets/templates/helpers/compare",["handlebars","moment"],function(e,t){function n(e,t,n){"use strict";if(arguments.length<3)throw new Error("Handlerbars Helper 'compare' needs 2 parameters");var i=n.hash.operator||"==",o={"==":function(e,t){return e==t},"===":function(e,t){return e===t},"!=":function(e,t){return e!=t},"<":function(e,t){return t>e},">":function(e,t){return e>t},"<=":function(e,t){return t>=e},">=":function(e,t){return e>=t},"typeof":function(e,t){return typeof e==t}};if(!o[i])throw new Error("Handlerbars Helper 'compare' doesn't know the operator "+i);var r=o[i](e,t);return r?n.fn(this):n.inverse(this)}return e.registerHelper("compare",n),n}),define("_assets/templates/helpers/formatName",["handlebars","moment"],function(e,t){function n(e,t,n){return e&&t?n?e.replace(t,n):e.replace(t,t+" "):""}return e.registerHelper("formatName",n),n}),define("hbs!main/components/patient/cwad/templates/allergiesDetails",["hbs","handlebars","_assets/templates/helpers/compare","_assets/templates/helpers/formatName","_assets/templates/helpers/formatDate"],function(e,t){var n=t.template({1:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return s((o=null!=(o=t.name||(null!=e?e.name:e))?o:a,typeof o===r?o.call(e,{name:"name",hash:{},data:i}):o))},3:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d=l((r=null!=(r=t.name||(null!=e?e.name:e))?r:s,typeof r===a?r.call(e,{name:"name",hash:{},data:i}):r));return o=t.unless.call(e,i&&i.last,{name:"unless",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d},4:function(e,t,n,i){return","},6:function(e,t,n,i){return"Adverse Reaction"},8:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'            <div class="col-md-3">'+s((o=null!=(o=t.severity||(null!=e?e.severity:e))?o:a,typeof o===r?o.call(e,{name:"severity",hash:{},data:i}):o))+"</div>\n"},10:function(e,t,n,i){return'            <div class="col-md-3 ">Severity Not Noted</div>\n'},12:function(e,t,n,i){var o,r=t.helperMissing,a="";return o=(t.compare||e&&e.compare||r).call(e,null!=e?e.historical:e,!0,{name:"compare",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=o&&(a+=o),o=(t.compare||e&&e.compare||r).call(e,null!=e?e.historical:e,!1,{name:"compare",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=o&&(a+=o),a},13:function(e,t,n,i){return"Historical"},15:function(e,t,n,i){return"Observed"},17:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'        <div class="col-xs-12 content">'+s((o=null!=(o=t.comment||(null!=e?e.comment:e))?o:a,typeof o===r?o.call(e,{name:"comment",hash:{},data:i}):o))+"<br/></div>\n        &nbsp;\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a,s=t.helperMissing,l=this.escapeExpression,d="function",c=t.blockHelperMissing,u='<div class="container-fluid">\n    <div class="row">\n        <div class="col-xs-12 cwad-title">\n            <strong>';
return o=t.each.call(e,null!=e?e.products:e,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+='</strong>\n            <span class="text-muted">',o=t.each.call(e,null!=e?e.reactions:e,{name:"each",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+='</span>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-3 text-right text-muted">Drug Classes</div>\n        <div class="col-xs-9">',o=t.each.call(e,null!=e?e.drugClasses:e,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+='</div>\n    </div>\n    <div class="row">\n        <div class="col-xs-3 text-right text-muted">Nature of reaction</div>\n        <div class="col-xs-3">',o=(t.compare||e&&e.compare||s).call(e,null!=e?e.kind:e,"Allergy/Adverse Reaction",{name:"compare",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+='</div>\n        <div class="col-xs-3 text-right text-muted">Severity</div>\n',o=t["if"].call(e,null!=e?e.severity:e,{name:"if",hash:{},fn:this.program(8,i),inverse:this.program(10,i),data:i}),null!=o&&(u+=o),u+='    </div>\n    <div class="row">\n        <div class="col-xs-3 text-right text-muted">Entered By:</div>\n        <div class="col-xs-3">'+l((t.formatName||e&&e.formatName||s).call(e,null!=e?e.originatorName:e,","," ",{name:"formatName",hash:{},data:i}))+'</div>\n        <div class="col-xs-3 text-right text-muted">Originated</div>\n        <div class="col-xs-3">'+l((t.formatDate||e&&e.formatDate||s).call(e,null!=e?e.entered:e,"MM/DD/YYYY HH:mm",{name:"formatDate",hash:{},data:i}))+'</div>\n    </div>\n     <div class="row">\n        <div class="col-xs-3 text-right text-muted">Verified</div>\n        <div class="col-xs-3">'+l((t.formatDate||e&&e.formatDate||s).call(e,null!=e?e.verified:e,"MM/DD/YYYY",{name:"formatDate",hash:{},data:i}))+'</div>\n        <div class="col-xs-3 text-right text-muted">Observed/Historical</div>\n        <div class="col-xs-3">',o=t["if"].call(e,null!=e?e.historical:e,{name:"if",hash:{},fn:this.program(12,i),inverse:this.program(15,i),data:i}),null!=o&&(u+=o),u+='</div>\n    </div>\n    <div class="row">\n        <div class="col-xs-3 text-right text-muted">Facility</div>\n        <div class="col-xs-3">'+l((r=null!=(r=t.facilityName||(null!=e?e.facilityName:e))?r:s,typeof r===d?r.call(e,{name:"facilityName",hash:{},data:i}):r))+'</div>\n        <div class="col-xs-3 text-right text-muted">Observed Date</div>\n        <div class="col-xs-3">'+l((r=null!=(r=t.observedDate||(null!=e?e.observedDate:e))?r:s,typeof r===d?r.call(e,{name:"observedDate",hash:{},data:i}):r))+'</div>\n    </div>\n   <br/>\n    <div class="row">\n',r=null!=(r=t.comments||(null!=e?e.comments:e))?r:s,a={name:"comments",hash:{},fn:this.program(17,i),inverse:this.noop,data:i},o=typeof r===d?r.call(e,a):r,t.comments||(o=c.call(e,o,a)),null!=o&&(u+=o),u+"  </div>\n</div>"},useData:!0});return t.registerPartial("main/components/patient/cwad/templates/allergiesDetails",n),n}),define("_assets/templates/helpers/stringCleanUp",["handlebars","moment"],function(e,t){function n(e){return e.replace(/\s+/g," ").replace(/(\r\n|\n|\r)/gm," ")}return e.registerHelper("stringCleanUp",n),n}),define("hbs!main/components/patient/cwad/templates/directiveDetails",["hbs","handlebars","_assets/templates/helpers/formatDate","_assets/templates/helpers/formatName","_assets/templates/helpers/stringCleanUp"],function(e,t){var n=t.template({1:function(e,t,n,i){var o,r="";return o=t["if"].call(e,null!=e?e.content:e,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=o&&(r+=o),r},2:function(e,t,n,i){var o=t.helperMissing,r=this.escapeExpression;return'        <br/>\n        <div class="row">\n            <div class="col-xs-12 content">'+r((t.stringCleanUp||e&&e.stringCleanUp||o).call(e,null!=e?e.content:e,{name:"stringCleanUp",hash:{},data:i}))+"</div>\n        </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d='<div class="container-fluid">\n    <div class="row">\n        <div class="col-xs-12 cwad-title">\n            <strong>'+l((r=null!=(r=t.kind||(null!=e?e.kind:e))?r:s,typeof r===a?r.call(e,{name:"kind",hash:{},data:i}):r))+'</strong>\n            <span class="text-muted">'+l((t.formatDate||e&&e.formatDate||s).call(e,null!=e?e.entered:e,"MM/DD/YYYY",{name:"formatDate",hash:{},data:i}))+'</span>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-2 text-right text-muted">Local Title</div>\n        <div class="col-xs-3">'+l((r=null!=(r=t.localTitle||(null!=e?e.localTitle:e))?r:s,typeof r===a?r.call(e,{name:"localTitle",hash:{},data:i}):r))+'</div>\n        <div class="col-xs-3 text-right text-muted">Standard Title</div>\n        <div class="col-xs-4"><!-- standard title to go here --></div>\n    </div>\n    <div class="row">\n        <div class="col-xs-2 text-right text-muted">Date of Note</div>\n        <div class="col-xs-3">'+l((t.formatDate||e&&e.formatDate||s).call(e,null!=e?e.signedDateTime:e,"MM/DD/YYYY HH:mm",{name:"formatDate",hash:{},data:i}))+'</div>\n        <div class="col-xs-3 text-right text-muted">Entry Date</div>\n        <div class="col-xs-4">'+l((t.formatDate||e&&e.formatDate||s).call(e,null!=e?e.entered:e,"MM/DD/YYYY HH:mm",{name:"formatDate",hash:{},data:i}))+'</div>\n    </div>\n    <div class="row">\n        <div class="col-xs-2 text-right text-muted">Author</div>\n        <div class="col-xs-3">'+l((t.formatName||e&&e.formatName||s).call(e,null!=e?e.author:e,","," ",{name:"formatName",hash:{},data:i}))+'</div>\n        <div class="col-xs-3 text-right text-muted">Exp. Cosigner</div>\n        <div class="col-xs-4"><!-- exp. cosigner to go here --></div>\n    </div>\n    <div class="row">\n        <div class="col-xs-2 text-right text-muted">Urgency</div>\n        <div class="col-xs-3"><!-- urgency to go here --></div>\n        <div class="col-xs-3 text-right text-muted">Status</div>\n        <div class="col-xs-4">'+l((r=null!=(r=t.statusDisplayName||(null!=e?e.statusDisplayName:e))?r:s,typeof r===a?r.call(e,{name:"statusDisplayName",hash:{},data:i}):r))+"</div>\n    </div>\n";return o=t.each.call(e,null!=e?e.text:e,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+"</div>\n"},useData:!0});return t.registerPartial("main/components/patient/cwad/templates/directiveDetails",n),n}),define("hbs!main/components/patient/cwad/templates/patientFlagsDetails",["hbs","handlebars","_assets/templates/helpers/compare","_assets/templates/helpers/formatDate"],function(e,t){var n=t.template({1:function(e,t,n,i){return" label-danger"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d='<div class="container-fluid">\n    <div class="row">\n        <div class="col-xs-12 cwad-title">\n            <strong>'+l((r=null!=(r=t.name||(null!=e?e.name:e))?r:s,typeof r===a?r.call(e,{name:"name",hash:{},data:i}):r))+'</strong>\n            <span class="label label-warning';return o=(t.compare||e&&e.compare||s).call(e,null!=e?e.category:e,"I (NATIONAL)",{name:"compare",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+'">Category '+l((r=null!=(r=t.category||(null!=e?e.category:e))?r:s,typeof r===a?r.call(e,{name:"category",hash:{},data:i}):r))+'</span>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-12 textDetails">'+l((r=null!=(r=t.text||(null!=e?e.text:e))?r:s,typeof r===a?r.call(e,{name:"text",hash:{},data:i}):r))+'</div>\n    </div>\n    <br>\n    <div class="row">\n        <div class="col-xs-3 text-right text-muted">Initial Assigned Date</div>\n        <div class="col-xs-3">'+l((t.formatDate||e&&e.formatDate||s).call(e,null!=e?e.assignTS:e,"MM/DD/YYYY HH:mm",{name:"formatDate",hash:{},data:i}))+'</div>\n        <div class="col-xs-3 text-right text-muted">Assignment Status</div>\n        <div class="col-xs-3">'+l((r=null!=(r=t.assignmentStatus||(null!=e?e.assignmentStatus:e))?r:s,typeof r===a?r.call(e,{name:"assignmentStatus",hash:{},data:i}):r))+'</div>\n    </div>\n    <div class="row">\n        <div class="col-xs-3 text-right text-muted">Approved by</div>\n        <div class="col-xs-3">'+l((r=null!=(r=t.approved||(null!=e?e.approved:e))?r:s,typeof r===a?r.call(e,{name:"approved",hash:{},data:i}):r))+'</div>\n        <div class="col-xs-3 text-right text-muted">Owner Site</div>\n        <div class="col-xs-3">'+l((r=null!=(r=t.ownerSite||(null!=e?e.ownerSite:e))?r:s,typeof r===a?r.call(e,{name:"ownerSite",hash:{},data:i}):r))+'</div>\n    </div>\n    <div class="row">\n        <div class="col-xs-3 text-right text-muted">Next Review Date</div>\n        <div class="col-xs-3"><!-- Next Review Date to go here --></div>\n        <div class="col-xs-3 text-right text-muted">Originating Site</div>\n        <div class="col-xs-3">'+l((r=null!=(r=t.originatingSite||(null!=e?e.originatingSite:e))?r:s,typeof r===a?r.call(e,{name:"originatingSite",hash:{},data:i}):r))+"</div>\n    </div>\n</div>"},useData:!0});return t.registerPartial("main/components/patient/cwad/templates/patientFlagsDetails",n),n}),define("main/components/patient/cwad/cwadDeatilsView",["backbone","marionette","underscore","handlebars","main/Utils","api/ResourceService","hbs!main/components/patient/cwad/templates/cwadDetailContainer","hbs!main/components/patient/cwad/templates/allergiesDetails","hbs!main/components/patient/cwad/templates/directiveDetails","hbs!main/components/patient/cwad/templates/patientFlagsDetails"],function(e,t,n,i,o,r,a,s,l,d){var c=e.Marionette.ItemView.extend({className:"row-layout cwad-detail",initialize:function(e){this.template=e.template},attributes:{tabindex:"0"}}),u=e.Marionette.ItemView.extend({template:n.template('<h5 class="loading"><i class="fa fa-spinner fa-spin"></i> Loading...</h5>')}),h=e.Marionette.ItemView.extend({template:n.template('<p class="error-message padding" role="alert" tabindex="0">No results found.</p>'),tagName:"p"}),p=e.Marionette.ItemView.extend({template:i.compile('<p class="error-message padding" role="alert" tabindex="0">Error: {{errorCode}} </p>'),initialize:function(e){this.model.set("errorCode",e.errorCode)},tagName:"p"}),g=e.Model.extend({defaults:{title:"",description:""}}),f=e.Marionette.LayoutView.extend({template:a,regions:{cwadDetails:"#cwad-detail-list"},events:{"click .close":"closeDetail"},initialize:function(e){this.model=new g({title:e.cwadIdentifier,description:e.cwadDescription}),this.detailView=new m(e)},modelEvents:{change:"render"},onRender:function(){this.cwadDetails.show(this.detailView)},closeDetail:function(e){this.$el.parent().addClass("hidden"),$("body").off("mousedown")}}),m=e.Marionette.CollectionView.extend({childView:c,tagName:"div",emptyView:u,initialize:function(t){if(this.childViewOptions={template:n.template("Empty")},"patient flags"!==t.cwadIdentifier){this.emptyViewOptions={errorCode:"undefined"};var i;"crisis notes"===t.cwadIdentifier?(i='ilike(kind,"%Crisis%")',this.childViewOptions.template=l):"warnings"===t.cwadIdentifier?(i='ilike(kind,"%Warning%")',this.childViewOptions.template=l):"allergies"===t.cwadIdentifier?(i='ilike(kind,"%Allergy%"),not(exists(removed),eq(removed,"false"))',this.childViewOptions.template=s):"directives"===t.cwadIdentifier?(i='ilike(kind,"%Directive%")',this.childViewOptions.template=l):(i="",this.childViewOptions.template=n.template("Empty"));var a={resourceTitle:"patient-record-cwad",criteria:{filter:i},cache:!0},c=this;a.onSuccess=function(e,t){n.each(e.models,function(e){void 0!==e.get("observations")&&(e.set("observedDate",o.formatDate(e.get("observations")[0].date)),e.set("severity",e.get("observations")[0].severity))}),c.emptyView=h,c.collection=e,c.render()},a.onError=function(e,t){c.emptyViewOptions.errorCode=t.status,c.emptyView=p,c.render()},this.collection=r.patientRecordService.fetchCollection(a)}else this.childViewOptions.template=d,this.collection=new e.Collection(t.patientModel.get("patientRecordFlag"))}});return f}),define("_assets/templates/helpers/getAge",["handlebars","moment"],function(e,t){function n(e,n){if($.isPlainObject(n)&&(n="YYYYMMDDHHmmssSSS"),e){var i=t(e,n);return t().diff(i,"years")}return""}return e.registerHelper("getAge",n),n}),define("_assets/templates/helpers/hasPermission",["handlebars","api/UserService","underscore"],function(e,t,n){function i(e,n){"use strict";var i=t.hasPermissions(e);return i?n.fn(this):n.inverse(this)}return e.registerHelper("hasPermission",i),i}),define("_assets/templates/helpers/ifnull",["handlebars"],function(e){function t(e,t){return e?e:t}return e.registerHelper("ifnull",t),t}),define("_assets/templates/helpers/toTitleCase",["handlebars"],function(e){function t(e,t,i){if(!e)return i||"";var o="",r=[];return e=e.toLowerCase(),r=e.split(" "),_.each(r,function(e,i,r){e=n(e,t),i>0?o+=" "+e:o=e}),o}function n(e,t){var i=e.indexOf(",");if(e=e.charAt(0).toUpperCase()+e.substr(1),t&&-1!=i&&e.length>i+1&&" "!=e.charAt(i+1)&&(e=e.replace(",",", "),e.length>i+2)){var o=e.substr(i+2);return e.substring(0,i+2)+n(o,t)}return e}return e.registerHelper("toTitleCase",t),t}),function(root){define("libphonenumber",[],function(){return function(){var COMPILED=!0,goog=goog||{};goog.global=this,goog.isDef=function(e){return void 0!==e},goog.exportPath_=function(e,t,n){e=e.split("."),n=n||goog.global,e[0]in n||!n.execScript||n.execScript("var "+e[0]);for(var i;e.length&&(i=e.shift());)!e.length&&goog.isDef(t)?n[i]=t:n=n[i]?n[i]:n[i]={}},goog.define=function(e,t){var n=t;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,e)?n=goog.global.CLOSURE_UNCOMPILED_DEFINES[e]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,e)&&(n=goog.global.CLOSURE_DEFINES[e])),goog.exportPath_(e,n)},goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG,goog.provide=function(e){if(!COMPILED&&goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t){if(!COMPILED){delete goog.implicitNamespaces_[e];for(var n=e;(n=n.substring(0,n.lastIndexOf(".")))&&!goog.getObjectByName(n);)goog.implicitNamespaces_[n]=!0}goog.exportPath_(e,t)},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if(!goog.isString(e)||!e||-1==e.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=e,!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e]}},goog.module.get=function(e){return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){return COMPILED?void 0:goog.isProvided_(e)?e in goog.loadedModules_?goog.loadedModules_[e]:goog.getObjectByName(e):null},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_},goog.module.declareTestMethods=function(){if(!goog.isInModuleLoader_())throw Error("goog.module.declareTestMethods must be called from within a goog.module");goog.moduleLoaderState_.declareTestMethods=!0},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},goog.forwardDeclare=function(e){},COMPILED||(goog.isProvided_=function(e){return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&goog.isDefAndNotNull(goog.getObjectByName(e))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(e,t){for(var n,i=e.split("."),o=t||goog.global;n=i.shift();){if(!goog.isDefAndNotNull(o[n]))return null;o=o[n]}return o},goog.globalize=function(e,t){var n,i=t||goog.global;for(n in e)i[n]=e[n]},goog.addDependency=function(e,t,n,i){if(goog.DEPENDENCIES_ENABLED){var o;e=e.replace(/\\/g,"/");for(var r=goog.dependencies_,a=0;o=t[a];a++)r.nameToPath[o]=e,r.pathIsModule[e]=!!i;for(i=0;t=n[i];i++)e in r.requires||(r.requires[e]={}),r.requires[e][t]=!0}},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(e){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(e),goog.isProvided_(e))return goog.isInModuleLoader_()?goog.module.getInternal_(e):null;if(goog.ENABLE_DEBUG_LOADER){var t=goog.getPathFromDeps_(e);if(t)return goog.included_[t]=!0,goog.writeScripts_(),null}throw e="goog.require could not find: "+e,goog.logToConsole_(e),Error(e)}},goog.basePath="",goog.nullFunction=function(){},goog.identityFunction=function(e,t){return e},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var e=goog.global.document;return"undefined"!=typeof e&&"write"in e},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var e=goog.global.document.getElementsByTagName("script"),t=e.length-1;t>=0;--t){var n=e[t].src,i=n.lastIndexOf("?"),i=-1==i?n.length:i;if("base.js"==n.substr(i-7,7)){goog.basePath=n.substr(0,i-7);break}}},goog.importScript_=function(e,t){(goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_)(e,t)&&(goog.dependencies_.written[e]=!0)},goog.IS_OLD_IE_=goog.global.document&&goog.global.document.all&&!goog.global.atob,goog.importModule_=function(e){goog.importScript_("",'goog.retrieveAndExecModule_("'+e+'");')&&(goog.dependencies_.written[e]=!0)},goog.queuedModules_=[],goog.wrapModule_=function(e,t){return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(t+"\n//# sourceURL="+e+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+t+"\n;return exports});\n//# sourceURL="+e+"\n"},goog.loadQueuedModules_=function(){var e=goog.queuedModules_.length;if(e>0){var t=goog.queuedModules_;goog.queuedModules_=[];for(var n=0;e>n;n++)goog.maybeProcessDeferredPath_(t[n])}},goog.maybeProcessDeferredDep_=function(e){goog.isDeferredModule_(e)&&goog.allDepsAreAvailable_(e)&&(e=goog.getPathFromDeps_(e),goog.maybeProcessDeferredPath_(goog.basePath+e))},goog.isDeferredModule_=function(e){return(e=goog.getPathFromDeps_(e))&&goog.dependencies_.pathIsModule[e]?goog.basePath+e in goog.dependencies_.deferred:!1},goog.allDepsAreAvailable_=function(e){if((e=goog.getPathFromDeps_(e))&&e in goog.dependencies_.requires)for(var t in goog.dependencies_.requires[e])if(!goog.isProvided_(t)&&!goog.isDeferredModule_(t))return!1;return!0},goog.maybeProcessDeferredPath_=function(e){if(e in goog.dependencies_.deferred){var t=goog.dependencies_.deferred[e];delete goog.dependencies_.deferred[e],goog.globalEval(t)}},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:void 0,declareTestMethods:!1};var n;if(goog.isFunction(e))n=e.call(goog.global,{});else{if(!goog.isString(e))throw Error("Invalid module definition");n=goog.loadModuleFromSource_.call(goog.global,e)}var i=goog.moduleLoaderState_.moduleName;if(!goog.isString(i)||!i)throw Error('Invalid module name "'+i+'"');if(goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(i,n):goog.SEAL_MODULE_EXPORTS&&Object.seal&&Object.seal(n),goog.loadedModules_[i]=n,goog.moduleLoaderState_.declareTestMethods)for(var o in n)(0===o.indexOf("test",0)||"tearDown"==o||"setUp"==o||"setUpPage"==o||"tearDownPage"==o)&&(goog.global[o]=n[o])}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.writeScriptTag_=function(e,t){if(goog.inHtmlDocument_()){var n=goog.global.document;if("complete"==n.readyState){if(/\bdeps.js$/.test(e))return!1;throw Error('Cannot write "'+e+'" after document load')}var i=goog.IS_OLD_IE_;return void 0===t?i?(i=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ",n.write('<script type="text/javascript" src="'+e+'"'+i+"></script>")):n.write('<script type="text/javascript" src="'+e+'"></script>'):n.write('<script type="text/javascript">'+t+"</script>"),!0}return!1},goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(e,t){return"complete"==e.readyState&&goog.lastNonModuleScriptIndex_==t&&goog.loadQueuedModules_(),!0},goog.writeScripts_=function(){function e(t){if(!(t in o.written)){if(!(t in o.visited)&&(o.visited[t]=!0,t in o.requires))for(var r in o.requires[t])if(!goog.isProvided_(r)){if(!(r in o.nameToPath))throw Error("Undefined nameToPath for "+r);e(o.nameToPath[r])}t in i||(i[t]=!0,n.push(t))}}var t,n=[],i={},o=goog.dependencies_;for(t in goog.included_)o.written[t]||e(t);for(var r=0;r<n.length;r++)t=n[r],goog.dependencies_.written[t]=!0;var a=goog.moduleLoaderState_;for(goog.moduleLoaderState_=null,r=0;r<n.length;r++){if(!(t=n[r]))throw goog.moduleLoaderState_=a,Error("Undefined script input");o.pathIsModule[t]?goog.importModule_(goog.basePath+t):goog.importScript_(goog.basePath+t)}goog.moduleLoaderState_=a},goog.getPathFromDeps_=function(e){return e in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[e]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),goog.normalizePath_=function(e){e=e.split("/");for(var t=0;t<e.length;)"."==e[t]?e.splice(t,1):t&&".."==e[t]&&e[t-1]&&".."!=e[t-1]?e.splice(--t,2):t++;return e.join("/")},goog.retrieveAndExecModule_=function(e){if(!COMPILED){var t=e;e=goog.normalizePath_(e);var n=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,i=null,o=new goog.global.XMLHttpRequest;if(o.onload=function(){i=this.responseText},o.open("get",e,!1),o.send(),i=o.responseText,null==i)throw Error("load of "+e+"failed");o=goog.wrapModule_(e,i),goog.IS_OLD_IE_?(goog.dependencies_.deferred[t]=o,goog.queuedModules_.push(t)):n(e,o)}},goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t},goog.isNull=function(e){return null===e},goog.isDefAndNotNull=function(e){return null!=e},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isString=function(e){return"string"==typeof e},goog.isBoolean=function(e){return"boolean"==typeof e},goog.isNumber=function(e){return"number"==typeof e},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(t){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(e.clone)return e.clone();var n,t="array"==t?[]:{};for(n in e)t[n]=goog.cloneObject(e[n]);return t}return e},goog.bindNative_=function(e,t,n){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}},goog.bind=function(e,t,n){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}},goog.mixin=function(e,t){for(var n in t)e[n]=t[n]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(e);else{var t=goog.global.document,n=t.createElement("script");n.type="text/javascript",n.defer=!1,n.appendChild(t.createTextNode(e)),t.body.appendChild(n),t.body.removeChild(n)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(e,t){var n=function(e){return goog.cssNameMapping_[e]||e},i=function(e){e=e.split("-");for(var t=[],i=0;i<e.length;i++)t.push(n(e[i]));return t.join("-")},i=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?n:i:function(e){return e};return t?e+"-"+i(t):i(e)},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(e,t){return t&&(e=e.replace(/\{\$([^}]+)}/g,function(e,n){return n in t?t[n]:e})),e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,n){goog.exportPath_(e,t,n)},goog.exportProperty=function(e,t,n){e[t]=n},goog.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.base=function(e,n,i){for(var o=Array(arguments.length-2),r=2;r<arguments.length;r++)o[r-2]=arguments[r];return t.prototype[n].apply(e,o)}},goog.base=function(e,t,n){var i=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!i)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(i.superClass_){for(var o=Array(arguments.length-1),r=1;r<arguments.length;r++)o[r-1]=arguments[r];return i.superClass_.constructor.apply(e,o)}for(o=Array(arguments.length-2),r=2;r<arguments.length;r++)o[r-2]=arguments[r];for(var r=!1,a=e.constructor;a;a=a.superClass_&&a.superClass_.constructor)if(a.prototype[t]===i)r=!0;else if(r)return a.prototype[t].apply(e,o);if(e[t]===i)return e.constructor.prototype[t].apply(e,o);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(e){e.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(e,t){var n=t.constructor,i=t.statics;return n&&n!=Object.prototype.constructor||(n=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),n=goog.defineClass.createSealingConstructor_(n,e),e&&goog.inherits(n,e),delete t.constructor,delete t.statics,goog.defineClass.applyProperties_(n.prototype,t),null!=i&&(i instanceof Function?i(n):goog.defineClass.applyProperties_(n,i)),n},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(e,t){if(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(t&&t.prototype&&t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_])return e;var n=function(){var t=e.apply(this,arguments)||this;return t[goog.UID_PROPERTY_]=t[goog.UID_PROPERTY_],this.constructor===n&&Object.seal(t),t};return n}return e},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);for(var i=0;i<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;i++)n=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[i],Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},goog.tagUnsealableClass=function(e){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.string={},goog.string.StringBuffer=function(e,t){null!=e&&this.append.apply(this,arguments)},goog.string.StringBuffer.prototype.buffer_="",goog.string.StringBuffer.prototype.set=function(e){this.buffer_=""+e},goog.string.StringBuffer.prototype.append=function(e,t,n){if(this.buffer_+=e,null!=t)for(var i=1;i<arguments.length;i++)this.buffer_+=arguments[i];return this},goog.string.StringBuffer.prototype.clear=function(){this.buffer_=""},goog.string.StringBuffer.prototype.getLength=function(){return this.buffer_.length},goog.string.StringBuffer.prototype.toString=function(){return this.buffer_},goog.debug={},goog.debug.Error=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:" "},goog.string.startsWith=function(e,t){return 0==e.lastIndexOf(t,0)},goog.string.endsWith=function(e,t){var n=e.length-t.length;return n>=0&&e.indexOf(t,n)==n},goog.string.caseInsensitiveStartsWith=function(e,t){return 0==goog.string.caseInsensitiveCompare(t,e.substr(0,t.length))},goog.string.caseInsensitiveEndsWith=function(e,t){return 0==goog.string.caseInsensitiveCompare(t,e.substr(e.length-t.length,t.length))},goog.string.caseInsensitiveEquals=function(e,t){return e.toLowerCase()==t.toLowerCase()},goog.string.subs=function(e,t){for(var n=e.split("%s"),i="",o=Array.prototype.slice.call(arguments,1);o.length&&1<n.length;)i+=n.shift()+o.shift();return i+n.join("%s")},goog.string.collapseWhitespace=function(e){return e.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=function(e){return/^[\s\xa0]*$/.test(e)},goog.string.isEmptyString=function(e){return 0==e.length},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(e){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(e))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,
goog.string.isBreakingWhitespace=function(e){return!/[^\t\n\r ]/.test(e)},goog.string.isAlpha=function(e){return!/[^a-zA-Z]/.test(e)},goog.string.isNumeric=function(e){return!/[^0-9]/.test(e)},goog.string.isAlphaNumeric=function(e){return!/[^a-zA-Z0-9]/.test(e)},goog.string.isSpace=function(e){return" "==e},goog.string.isUnicodeChar=function(e){return 1==e.length&&e>=" "&&"~">=e||e>=""&&"�">=e},goog.string.stripNewlines=function(e){return e.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(e){return e.replace(/(\r\n|\r|\n)/g,"\n")},goog.string.normalizeWhitespace=function(e){return e.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(e){return e.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},goog.string.trimLeft=function(e){return e.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(e){return e.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=function(e,t){var n=String(e).toLowerCase(),i=String(t).toLowerCase();return i>n?-1:n==i?0:1},goog.string.numerateCompareRegExp_=/(\.\d+)|(\d+)|(\D+)/g,goog.string.numerateCompare=function(e,t){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var n=e.toLowerCase().match(goog.string.numerateCompareRegExp_),i=t.toLowerCase().match(goog.string.numerateCompareRegExp_),o=Math.min(n.length,i.length),r=0;o>r;r++){var a=n[r],s=i[r];if(a!=s)return n=parseInt(a,10),!isNaN(n)&&(i=parseInt(s,10),!isNaN(i)&&n-i)?n-i:s>a?-1:1}return n.length!=i.length?n.length-i.length:t>e?-1:1},goog.string.urlEncode=function(e){return encodeURIComponent(String(e))},goog.string.urlDecode=function(e){return decodeURIComponent(e.replace(/\+/g," "))},goog.string.newLineToBr=function(e,t){return e.replace(/(\r\n|\r|\n)/g,t?"<br />":"<br>")},goog.string.htmlEscape=function(e,t){if(t)e=e.replace(goog.string.AMP_RE_,"&amp;").replace(goog.string.LT_RE_,"&lt;").replace(goog.string.GT_RE_,"&gt;").replace(goog.string.QUOT_RE_,"&quot;").replace(goog.string.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.NULL_RE_,"&#0;"),goog.string.DETECT_DOUBLE_ESCAPING&&(e=e.replace(goog.string.E_RE_,"&#101;"));else{if(!goog.string.ALL_RE_.test(e))return e;-1!=e.indexOf("&")&&(e=e.replace(goog.string.AMP_RE_,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(goog.string.LT_RE_,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(goog.string.GT_RE_,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(goog.string.QUOT_RE_,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(goog.string.SINGLE_QUOTE_RE_,"&#39;")),-1!=e.indexOf("\x00")&&(e=e.replace(goog.string.NULL_RE_,"&#0;")),goog.string.DETECT_DOUBLE_ESCAPING&&-1!=e.indexOf("e")&&(e=e.replace(goog.string.E_RE_,"&#101;"))}return e},goog.string.AMP_RE_=/&/g,goog.string.LT_RE_=/</g,goog.string.GT_RE_=/>/g,goog.string.QUOT_RE_=/"/g,goog.string.SINGLE_QUOTE_RE_=/'/g,goog.string.NULL_RE_=/\x00/g,goog.string.E_RE_=/e/g,goog.string.ALL_RE_=goog.string.DETECT_DOUBLE_ESCAPING?/[\x00&<>"'e]/:/[\x00&<>"']/,goog.string.unescapeEntities=function(e){return goog.string.contains(e,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(e):goog.string.unescapePureXmlEntities_(e):e},goog.string.unescapeEntitiesWithDocument=function(e,t){return goog.string.contains(e,"&")?goog.string.unescapeEntitiesUsingDom_(e,t):e},goog.string.unescapeEntitiesUsingDom_=function(e,t){var n,i={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'};return n=t?t.createElement("div"):goog.global.document.createElement("div"),e.replace(goog.string.HTML_ENTITY_PATTERN_,function(e,t){var o=i[e];if(o)return o;if("#"==t.charAt(0)){var r=Number("0"+t.substr(1));isNaN(r)||(o=String.fromCharCode(r))}return o||(n.innerHTML=e+" ",o=n.firstChild.nodeValue.slice(0,-1)),i[e]=o})},goog.string.unescapePureXmlEntities_=function(e){return e.replace(/&([^;]+);/g,function(e,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if("#"==t.charAt(0)){var n=Number("0"+t.substr(1));if(!isNaN(n))return String.fromCharCode(n)}return e}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(e,t){return goog.string.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.preserveSpaces=function(e){return e.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(e,t){for(var n=t.length,i=0;n>i;i++){var o=1==n?t:t.charAt(i);if(e.charAt(0)==o&&e.charAt(e.length-1)==o)return e.substring(1,e.length-1)}return e},goog.string.truncate=function(e,t,n){return n&&(e=goog.string.unescapeEntities(e)),e.length>t&&(e=e.substring(0,t-3)+"..."),n&&(e=goog.string.htmlEscape(e)),e},goog.string.truncateMiddle=function(e,t,n,i){if(n&&(e=goog.string.unescapeEntities(e)),i&&e.length>t){i>t&&(i=t);var o=e.length-i;e=e.substring(0,t-i)+"..."+e.substring(o)}else e.length>t&&(i=Math.floor(t/2),o=e.length-i,e=e.substring(0,i+t%2)+"..."+e.substring(o));return n&&(e=goog.string.htmlEscape(e)),e},goog.string.specialEscapeChars_={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(e){if(e=String(e),e.quote)return e.quote();for(var t=['"'],n=0;n<e.length;n++){var i=e.charAt(n),o=i.charCodeAt(0);t[n+1]=goog.string.specialEscapeChars_[i]||(o>31&&127>o?i:goog.string.escapeChar(i))}return t.push('"'),t.join("")},goog.string.escapeString=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=goog.string.escapeChar(e.charAt(n));return t.join("")},goog.string.escapeChar=function(e){if(e in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[e];if(e in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[e]=goog.string.specialEscapeChars_[e];var t=e,n=e.charCodeAt(0);return n>31&&127>n?t=e:(256>n?(t="\\x",(16>n||n>256)&&(t+="0")):(t="\\u",4096>n&&(t+="0")),t+=n.toString(16).toUpperCase()),goog.string.jsEscapeCache_[e]=t},goog.string.contains=function(e,t){return-1!=e.indexOf(t)},goog.string.caseInsensitiveContains=function(e,t){return goog.string.contains(e.toLowerCase(),t.toLowerCase())},goog.string.countOf=function(e,t){return e&&t?e.split(t).length-1:0},goog.string.removeAt=function(e,t,n){var i=e;return t>=0&&t<e.length&&n>0&&(i=e.substr(0,t)+e.substr(t+n,e.length-t-n)),i},goog.string.remove=function(e,t){var n=new RegExp(goog.string.regExpEscape(t),"");return e.replace(n,"")},goog.string.removeAll=function(e,t){var n=new RegExp(goog.string.regExpEscape(t),"g");return e.replace(n,"")},goog.string.regExpEscape=function(e){return String(e).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=function(e,t){return Array(t+1).join(e)},goog.string.padNumber=function(e,t,n){return e=goog.isDef(n)?e.toFixed(n):String(e),n=e.indexOf("."),-1==n&&(n=e.length),goog.string.repeat("0",Math.max(0,t-n))+e},goog.string.makeSafe=function(e){return null==e?"":String(e)},goog.string.buildString=function(e){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=function(e,t){for(var n=0,i=goog.string.trim(String(e)).split("."),o=goog.string.trim(String(t)).split("."),r=Math.max(i.length,o.length),a=0;0==n&&r>a;a++){var s=i[a]||"",l=o[a]||"",d=RegExp("(\\d*)(\\D*)","g"),c=RegExp("(\\d*)(\\D*)","g");do{var u=d.exec(s)||["","",""],h=c.exec(l)||["","",""];if(0==u[0].length&&0==h[0].length)break;var n=0==u[1].length?0:parseInt(u[1],10),p=0==h[1].length?0:parseInt(h[1],10),n=goog.string.compareElements_(n,p)||goog.string.compareElements_(0==u[2].length,0==h[2].length)||goog.string.compareElements_(u[2],h[2])}while(0==n)}return n},goog.string.compareElements_=function(e,t){return t>e?-1:e>t?1:0},goog.string.HASHCODE_MAX_=4294967296,goog.string.hashCode=function(e){for(var t=0,n=0;n<e.length;++n)t=31*t+e.charCodeAt(n),t%=goog.string.HASHCODE_MAX_;return t},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(e){var t=Number(e);return 0==t&&goog.string.isEmptyOrWhitespace(e)?NaN:t},goog.string.isLowerCamelCase=function(e){return/^[a-z]+([A-Z][a-z]*)*$/.test(e)},goog.string.isUpperCamelCase=function(e){return/^([A-Z][a-z]*)+$/.test(e)},goog.string.toCamelCase=function(e){return String(e).replace(/\-([a-z])/g,function(e,t){return t.toUpperCase()})},goog.string.toSelectorCase=function(e){return String(e).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(e,t){var n=goog.isString(t)?goog.string.regExpEscape(t):"\\s";return e.replace(new RegExp("(^"+(n?"|["+n+"]+":"")+")([a-z])","g"),function(e,t,n){return t+n.toUpperCase()})},goog.string.capitalize=function(e){return String(e.charAt(0)).toUpperCase()+String(e.substr(1)).toLowerCase()},goog.string.parseInt=function(e){return isFinite(e)&&(e=String(e)),goog.isString(e)?/^\s*-?0x/i.test(e)?parseInt(e,16):parseInt(e,10):NaN},goog.string.splitLimit=function(e,t,n){e=e.split(t);for(var i=[];n>0&&e.length;)i.push(e.shift()),n--;return e.length&&i.push(e.join(t)),i},goog.string.editDistance=function(e,t){var n=[],i=[];if(e==t)return 0;if(!e.length||!t.length)return Math.max(e.length,t.length);for(var o=0;o<t.length+1;o++)n[o]=o;for(o=0;o<e.length;o++){i[0]=o+1;for(var r=0;r<t.length;r++)i[r+1]=Math.min(i[r]+1,n[r+1]+1,n[r]+(e[o]!=t[r]));for(r=0;r<n.length;r++)n[r]=i[r]}return i[t.length]},goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(e,t){t.unshift(e),goog.debug.Error.call(this,goog.string.subs.apply(null,t)),t.shift(),this.messagePattern=e},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.doAssertFailure_=function(e,t,n,i){var o="Assertion failed";if(n)var o=o+(": "+n),r=i;else e&&(o+=": "+e,r=t);e=new goog.asserts.AssertionError(""+o,r||[]),goog.asserts.errorHandler_(e)},goog.asserts.setErrorHandler=function(e){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=e)},goog.asserts.assert=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.fail=function(e,t){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(e)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertString=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isString(e)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertFunction=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObject=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertArray=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertBoolean=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(e)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertElement=function(e,t,n){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertInstanceof=function(e,t,n,i){return!goog.asserts.ENABLE_ASSERTS||e instanceof t||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(t),goog.asserts.getType_(e)],n,Array.prototype.slice.call(arguments,3)),e},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype)goog.asserts.fail(e+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=!1,goog.array.peek=function(e){return e[e.length-1]},goog.array.last=goog.array.peek,goog.array.ARRAY_PROTOTYPE_=Array.prototype,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.indexOf)?function(e,t,n){return goog.asserts.assert(null!=e.length),goog.array.ARRAY_PROTOTYPE_.indexOf.call(e,t,n)}:function(e,t,n){if(n=null==n?0:0>n?Math.max(0,e.length+n):n,goog.isString(e))return goog.isString(t)&&1==t.length?e.indexOf(t,n):-1;for(;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.lastIndexOf)?function(e,t,n){return goog.asserts.assert(null!=e.length),goog.array.ARRAY_PROTOTYPE_.lastIndexOf.call(e,t,null==n?e.length-1:n)}:function(e,t,n){if(n=null==n?e.length-1:n,0>n&&(n=Math.max(0,e.length+n)),goog.isString(e))return goog.isString(t)&&1==t.length?e.lastIndexOf(t,n):-1;for(;n>=0;n--)if(n in e&&e[n]===t)return n;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.forEach)?function(e,t,n){goog.asserts.assert(null!=e.length),goog.array.ARRAY_PROTOTYPE_.forEach.call(e,t,n)}:function(e,t,n){for(var i=e.length,o=goog.isString(e)?e.split(""):e,r=0;i>r;r++)r in o&&t.call(n,o[r],r,e)},goog.array.forEachRight=function(e,t,n){for(var i=e.length,o=goog.isString(e)?e.split(""):e,i=i-1;i>=0;--i)i in o&&t.call(n,o[i],i,e)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.filter)?function(e,t,n){return goog.asserts.assert(null!=e.length),goog.array.ARRAY_PROTOTYPE_.filter.call(e,t,n)}:function(e,t,n){for(var i=e.length,o=[],r=0,a=goog.isString(e)?e.split(""):e,s=0;i>s;s++)if(s in a){var l=a[s];t.call(n,l,s,e)&&(o[r++]=l)}return o},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.map)?function(e,t,n){return goog.asserts.assert(null!=e.length),goog.array.ARRAY_PROTOTYPE_.map.call(e,t,n)}:function(e,t,n){for(var i=e.length,o=Array(i),r=goog.isString(e)?e.split(""):e,a=0;i>a;a++)a in r&&(o[a]=t.call(n,r[a],a,e));return o},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.reduce)?function(e,t,n,i){return goog.asserts.assert(null!=e.length),i&&(t=goog.bind(t,i)),goog.array.ARRAY_PROTOTYPE_.reduce.call(e,t,n)}:function(e,t,n,i){var o=n;return goog.array.forEach(e,function(n,r){o=t.call(i,o,n,r,e)}),o},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.reduceRight)?function(e,t,n,i){return goog.asserts.assert(null!=e.length),i&&(t=goog.bind(t,i)),goog.array.ARRAY_PROTOTYPE_.reduceRight.call(e,t,n)}:function(e,t,n,i){var o=n;return goog.array.forEachRight(e,function(n,r){o=t.call(i,o,n,r,e)}),o},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.some)?function(e,t,n){return goog.asserts.assert(null!=e.length),goog.array.ARRAY_PROTOTYPE_.some.call(e,t,n)}:function(e,t,n){for(var i=e.length,o=goog.isString(e)?e.split(""):e,r=0;i>r;r++)if(r in o&&t.call(n,o[r],r,e))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.every)?function(e,t,n){return goog.asserts.assert(null!=e.length),goog.array.ARRAY_PROTOTYPE_.every.call(e,t,n)}:function(e,t,n){for(var i=e.length,o=goog.isString(e)?e.split(""):e,r=0;i>r;r++)if(r in o&&!t.call(n,o[r],r,e))return!1;return!0},goog.array.count=function(e,t,n){var i=0;return goog.array.forEach(e,function(e,o,r){t.call(n,e,o,r)&&++i},n),i},goog.array.find=function(e,t,n){return t=goog.array.findIndex(e,t,n),0>t?null:goog.isString(e)?e.charAt(t):e[t]},goog.array.findIndex=function(e,t,n){for(var i=e.length,o=goog.isString(e)?e.split(""):e,r=0;i>r;r++)if(r in o&&t.call(n,o[r],r,e))return r;return-1},goog.array.findRight=function(e,t,n){return t=goog.array.findIndexRight(e,t,n),0>t?null:goog.isString(e)?e.charAt(t):e[t]},goog.array.findIndexRight=function(e,t,n){for(var i=e.length,o=goog.isString(e)?e.split(""):e,i=i-1;i>=0;i--)if(i in o&&t.call(n,o[i],i,e))return i;return-1},goog.array.contains=function(e,t){return 0<=goog.array.indexOf(e,t)},goog.array.isEmpty=function(e){return 0==e.length},goog.array.clear=function(e){if(!goog.isArray(e))for(var t=e.length-1;t>=0;t--)delete e[t];e.length=0},goog.array.insert=function(e,t){goog.array.contains(e,t)||e.push(t)},goog.array.insertAt=function(e,t,n){goog.array.splice(e,n,0,t)},goog.array.insertArrayAt=function(e,t,n){goog.partial(goog.array.splice,e,n,0).apply(null,t)},goog.array.insertBefore=function(e,t,n){var i;2==arguments.length||0>(i=goog.array.indexOf(e,n))?e.push(t):goog.array.insertAt(e,t,i)},goog.array.remove=function(e,t){var n,i=goog.array.indexOf(e,t);return(n=i>=0)&&goog.array.removeAt(e,i),n},goog.array.removeAt=function(e,t){return goog.asserts.assert(null!=e.length),1==goog.array.ARRAY_PROTOTYPE_.splice.call(e,t,1).length},goog.array.removeIf=function(e,t,n){return t=goog.array.findIndex(e,t,n),t>=0?(goog.array.removeAt(e,t),!0):!1},goog.array.removeAllIf=function(e,t,n){var i=0;return goog.array.forEachRight(e,function(o,r){t.call(n,o,r,e)&&goog.array.removeAt(e,r)&&i++}),i},goog.array.concat=function(e){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)},goog.array.join=function(e){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)},goog.array.toArray=function(e){var t=e.length;if(t>0){for(var n=Array(t),i=0;t>i;i++)n[i]=e[i];return n}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(goog.isArrayLike(i)){var o=e.length||0,r=i.length||0;e.length=o+r;for(var a=0;r>a;a++)e[o+a]=i[a]}else e.push(i)}},goog.array.splice=function(e,t,n,i){return goog.asserts.assert(null!=e.length),goog.array.ARRAY_PROTOTYPE_.splice.apply(e,goog.array.slice(arguments,1))},goog.array.slice=function(e,t,n){return goog.asserts.assert(null!=e.length),2>=arguments.length?goog.array.ARRAY_PROTOTYPE_.slice.call(e,t):goog.array.ARRAY_PROTOTYPE_.slice.call(e,t,n)},goog.array.removeDuplicates=function(e,t,n){t=t||e;var i=function(e){return goog.isObject(a)?"o"+goog.getUid(a):(typeof a).charAt(0)+a};n=n||i;for(var i={},o=0,r=0;r<e.length;){var a=e[r++],s=n(a);Object.prototype.hasOwnProperty.call(i,s)||(i[s]=!0,t[o++]=a)}t.length=o},goog.array.binarySearch=function(e,t,n){return goog.array.binarySearch_(e,n||goog.array.defaultCompare,!1,t)},goog.array.binarySelect=function(e,t,n){return goog.array.binarySearch_(e,t,!0,void 0,n)},goog.array.binarySearch_=function(e,t,n,i,o){for(var r,a=0,s=e.length;s>a;){var l,d=a+s>>1;l=n?t.call(o,e[d],d,e):t(i,e[d]),l>0?a=d+1:(s=d,r=!l)}return r?a:~a},goog.array.sort=function(e,t){e.sort(t||goog.array.defaultCompare)},goog.array.stableSort=function(e,t){for(var n=0;n<e.length;n++)e[n]={index:n,value:e[n]};var i=t||goog.array.defaultCompare;for(goog.array.sort(e,function(e,t){return i(e.value,t.value)||e.index-t.index}),n=0;n<e.length;n++)e[n]=e[n].value},goog.array.sortByKey=function(e,t,n){var i=n||goog.array.defaultCompare;goog.array.sort(e,function(e,n){return i(t(e),t(n))})},goog.array.sortObjectsByKey=function(e,t,n){goog.array.sortByKey(e,function(e){return e[t]},n)},goog.array.isSorted=function(e,t,n){t=t||goog.array.defaultCompare;for(var i=1;i<e.length;i++){var o=t(e[i-1],e[i]);if(o>0||0==o&&n)return!1}return!0},goog.array.equals=function(e,t,n){if(!goog.isArrayLike(e)||!goog.isArrayLike(t)||e.length!=t.length)return!1;var i=e.length;n=n||goog.array.defaultCompareEquality;for(var o=0;i>o;o++)if(!n(e[o],t[o]))return!1;return!0},goog.array.compare3=function(e,t,n){n=n||goog.array.defaultCompare;for(var i=Math.min(e.length,t.length),o=0;i>o;o++){var r=n(e[o],t[o]);if(0!=r)return r}return goog.array.defaultCompare(e.length,t.length)},goog.array.defaultCompare=function(e,t){return e>t?1:t>e?-1:0},goog.array.defaultCompareEquality=function(e,t){return e===t},goog.array.binaryInsert=function(e,t,n){return n=goog.array.binarySearch(e,t,n),0>n?(goog.array.insertAt(e,t,-(n+1)),!0):!1},goog.array.binaryRemove=function(e,t,n){return t=goog.array.binarySearch(e,t,n),t>=0?goog.array.removeAt(e,t):!1},goog.array.bucket=function(e,t,n){for(var i={},o=0;o<e.length;o++){var r=e[o],a=t.call(n,r,o,e);goog.isDef(a)&&(i[a]||(i[a]=[])).push(r)}return i},goog.array.toObject=function(e,t,n){var i={};return goog.array.forEach(e,function(o,r){i[t.call(n,o,r,e)]=o}),i},goog.array.range=function(e,t,n){var i=[],o=0,r=e;if(n=n||1,void 0!==t&&(o=e,r=t),0>n*(r-o))return[];if(n>0)for(e=o;r>e;e+=n)i.push(e);else for(e=o;e>r;e+=n)i.push(e);return i},goog.array.repeat=function(e,t){for(var n=[],i=0;t>i;i++)n[i]=e;return n},goog.array.flatten=function(e){for(var t=[],n=0;n<arguments.length;n++){var i=arguments[n];if(goog.isArray(i))for(var o=0;o<i.length;o+=8192)for(var r=goog.array.slice(i,o,o+8192),r=goog.array.flatten.apply(null,r),a=0;a<r.length;a++)t.push(r[a]);else t.push(i)}return t},goog.array.rotate=function(e,t){return goog.asserts.assert(null!=e.length),e.length&&(t%=e.length,t>0?goog.array.ARRAY_PROTOTYPE_.unshift.apply(e,e.splice(-t,t)):0>t&&goog.array.ARRAY_PROTOTYPE_.push.apply(e,e.splice(0,-t))),e},goog.array.moveItem=function(e,t,n){goog.asserts.assert(t>=0&&t<e.length),goog.asserts.assert(n>=0&&n<e.length),t=goog.array.ARRAY_PROTOTYPE_.splice.call(e,t,1),goog.array.ARRAY_PROTOTYPE_.splice.call(e,n,0,t[0])},goog.array.zip=function(e){if(!arguments.length)return[];for(var t=[],n=0;;n++){for(var i=[],o=0;o<arguments.length;o++){var r=arguments[o];if(n>=r.length)return t;i.push(r[n])}t.push(i)}},goog.array.shuffle=function(e,t){for(var n=t||Math.random,i=e.length-1;i>0;i--){var o=Math.floor(n()*(i+1)),r=e[i];e[i]=e[o],e[o]=r}},goog.proto2={},goog.proto2.FieldDescriptor=function(e,t,n){switch(this.parent_=e,goog.asserts.assert(goog.string.isNumeric(t)),this.tag_=t,this.name_=n.name,this.isPacked_=!!n.packed,this.isRepeated_=!!n.repeated,this.isRequired_=!!n.required,this.fieldType_=n.fieldType,this.nativeType_=n.type,this.deserializationConversionPermitted_=!1,this.fieldType_){case goog.proto2.FieldDescriptor.FieldType.INT64:case goog.proto2.FieldDescriptor.FieldType.UINT64:case goog.proto2.FieldDescriptor.FieldType.FIXED64:case goog.proto2.FieldDescriptor.FieldType.SFIXED64:case goog.proto2.FieldDescriptor.FieldType.SINT64:case goog.proto2.FieldDescriptor.FieldType.FLOAT:case goog.proto2.FieldDescriptor.FieldType.DOUBLE:this.deserializationConversionPermitted_=!0}this.defaultValue_=n.defaultValue},goog.proto2.FieldDescriptor.FieldType={DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18},goog.proto2.FieldDescriptor.prototype.getTag=function(){return this.tag_},goog.proto2.FieldDescriptor.prototype.getContainingType=function(){return this.parent_.getDescriptor()},goog.proto2.FieldDescriptor.prototype.getName=function(){return this.name_},goog.proto2.FieldDescriptor.prototype.getDefaultValue=function(){if(void 0===this.defaultValue_){var e=this.nativeType_;if(e===Boolean)this.defaultValue_=!1;else if(e===Number)this.defaultValue_=0;else{if(e!==String)return new e;this.defaultValue_=this.deserializationConversionPermitted_?"0":""}}return this.defaultValue_},goog.proto2.FieldDescriptor.prototype.getFieldType=function(){return this.fieldType_},goog.proto2.FieldDescriptor.prototype.getNativeType=function(){return this.nativeType_},goog.proto2.FieldDescriptor.prototype.deserializationConversionPermitted=function(){return this.deserializationConversionPermitted_},goog.proto2.FieldDescriptor.prototype.getFieldMessageType=function(){return this.nativeType_.getDescriptor()},goog.proto2.FieldDescriptor.prototype.isCompositeType=function(){return this.fieldType_==goog.proto2.FieldDescriptor.FieldType.MESSAGE||this.fieldType_==goog.proto2.FieldDescriptor.FieldType.GROUP},goog.proto2.FieldDescriptor.prototype.isPacked=function(){return this.isPacked_},goog.proto2.FieldDescriptor.prototype.isRepeated=function(){return this.isRepeated_},goog.proto2.FieldDescriptor.prototype.isRequired=function(){return this.isRequired_},goog.proto2.FieldDescriptor.prototype.isOptional=function(){return!this.isRepeated_&&!this.isRequired_},goog.object={},goog.object.forEach=function(e,t,n){for(var i in e)t.call(n,e[i],i,e)},goog.object.filter=function(e,t,n){var i,o={};for(i in e)t.call(n,e[i],i,e)&&(o[i]=e[i]);return o},goog.object.map=function(e,t,n){var i,o={};for(i in e)o[i]=t.call(n,e[i],i,e);return o},goog.object.some=function(e,t,n){for(var i in e)if(t.call(n,e[i],i,e))return!0;return!1},goog.object.every=function(e,t,n){for(var i in e)if(!t.call(n,e[i],i,e))return!1;return!0},goog.object.getCount=function(e){var t,n=0;for(t in e)n++;return n},goog.object.getAnyKey=function(e){for(var t in e)return t},goog.object.getAnyValue=function(e){for(var t in e)return e[t]},goog.object.contains=function(e,t){return goog.object.containsValue(e,t)},goog.object.getValues=function(e){var t,n=[],i=0;for(t in e)n[i++]=e[t];return n},goog.object.getKeys=function(e){var t,n=[],i=0;for(t in e)n[i++]=t;return n},goog.object.getValueByKeys=function(e,t){for(var n=goog.isArrayLike(t),i=n?t:arguments,n=n?0:1;n<i.length&&(e=e[i[n]],goog.isDef(e));n++);return e},goog.object.containsKey=function(e,t){return t in e},goog.object.containsValue=function(e,t){for(var n in e)if(e[n]==t)return!0;return!1},goog.object.findKey=function(e,t,n){for(var i in e)if(t.call(n,e[i],i,e))return i},goog.object.findValue=function(e,t,n){return(t=goog.object.findKey(e,t,n))&&e[t]},goog.object.isEmpty=function(e){for(var t in e)return!1;return!0},goog.object.clear=function(e){for(var t in e)delete e[t]},goog.object.remove=function(e,t){var n;return(n=t in e)&&delete e[t],n},goog.object.add=function(e,t,n){if(t in e)throw Error('The object already contains the key "'+t+'"');goog.object.set(e,t,n)},goog.object.get=function(e,t,n){return t in e?e[t]:n},goog.object.set=function(e,t,n){e[t]=n},goog.object.setIfUndefined=function(e,t,n){return t in e?e[t]:e[t]=n},goog.object.equals=function(e,t){for(var n in e)if(!(n in t)||e[n]!==t[n])return!1;for(n in t)if(!(n in e))return!1;return!0},goog.object.clone=function(e){var t,n={};for(t in e)n[t]=e[t];return n},goog.object.unsafeClone=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(e.clone)return e.clone();var n,t="array"==t?[]:{};for(n in e)t[n]=goog.object.unsafeClone(e[n]);return t}return e},goog.object.transpose=function(e){var t,n={};for(t in e)n[e[t]]=t;return n},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(e,t){for(var n,i,o=1;o<arguments.length;o++){i=arguments[o];for(n in i)e[n]=i[n];for(var r=0;r<goog.object.PROTOTYPE_FIELDS_.length;r++)n=goog.object.PROTOTYPE_FIELDS_[r],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}},goog.object.create=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(t%2)throw Error("Uneven number of arguments");for(var n={},i=0;t>i;i+=2)n[arguments[i]]=arguments[i+1];return n},goog.object.createSet=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var n={},i=0;t>i;i++)n[arguments[i]]=!0;return n},goog.object.createImmutableView=function(e){var t=e;return Object.isFrozen&&!Object.isFrozen(e)&&(t=Object.create(e),Object.freeze(t)),t},goog.object.isImmutableView=function(e){return!!Object.isFrozen&&Object.isFrozen(e)},goog.proto2.Descriptor=function(e,t,n){for(this.messageType_=e,this.name_=t.name||null,this.fullName_=t.fullName||null,this.containingType_=t.containingType,this.fields_={},e=0;e<n.length;e++)t=n[e],this.fields_[t.getTag()]=t},goog.proto2.Descriptor.prototype.getName=function(){return this.name_},goog.proto2.Descriptor.prototype.getFullName=function(){return this.fullName_},goog.proto2.Descriptor.prototype.getContainingType=function(){return this.containingType_?this.containingType_.getDescriptor():null},goog.proto2.Descriptor.prototype.getFields=function(){var e=goog.object.getValues(this.fields_);return goog.array.sort(e,function(e,t){return e.getTag()-t.getTag()}),e},goog.proto2.Descriptor.prototype.getFieldsMap=function(){return this.fields_},goog.proto2.Descriptor.prototype.findFieldByName=function(e){return goog.object.findValue(this.fields_,function(t,n,i){return t.getName()==e})||null},goog.proto2.Descriptor.prototype.findFieldByTag=function(e){return goog.asserts.assert(goog.string.isNumeric(e)),this.fields_[parseInt(e,10)]||null},goog.proto2.Descriptor.prototype.createMessageInstance=function(){return new this.messageType_},goog.proto2.Message=function(){this.values_={},this.fields_=this.getDescriptor().getFieldsMap(),this.deserializedFields_=this.lazyDeserializer_=null},goog.proto2.Message.FieldType={DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18},goog.proto2.Message.prototype.initializeForLazyDeserializer=function(e,t){this.lazyDeserializer_=e,this.values_=t,this.deserializedFields_={}},goog.proto2.Message.prototype.setUnknown=function(e,t){goog.asserts.assert(!this.fields_[e],"Field is not unknown in this message"),goog.asserts.assert(e>=1,"Tag is not valid"),goog.asserts.assert(null!==t,"Value cannot be null"),this.values_[e]=t,this.deserializedFields_&&delete this.deserializedFields_[e]},goog.proto2.Message.prototype.forEachUnknown=function(e,t){var n,i=t||this;for(n in this.values_){var o=Number(n);this.fields_[o]||e.call(i,o,this.values_[n])}},goog.proto2.Message.prototype.getDescriptor=function(){var e=this.constructor;return e.descriptor_||(e.descriptor_=goog.proto2.Message.createDescriptor(e,e.descriptorObj_))},goog.proto2.Message.prototype.has=function(e){return goog.asserts.assert(e.getContainingType()==this.getDescriptor(),"The current message does not contain the given field"),this.has$Value(e.getTag())},goog.proto2.Message.prototype.arrayOf=function(e){return goog.asserts.assert(e.getContainingType()==this.getDescriptor(),"The current message does not contain the given field"),this.array$Values(e.getTag())},goog.proto2.Message.prototype.countOf=function(e){return goog.asserts.assert(e.getContainingType()==this.getDescriptor(),"The current message does not contain the given field"),this.count$Values(e.getTag())},goog.proto2.Message.prototype.get=function(e,t){
return goog.asserts.assert(e.getContainingType()==this.getDescriptor(),"The current message does not contain the given field"),this.get$Value(e.getTag(),t)},goog.proto2.Message.prototype.getOrDefault=function(e,t){return goog.asserts.assert(e.getContainingType()==this.getDescriptor(),"The current message does not contain the given field"),this.get$ValueOrDefault(e.getTag(),t)},goog.proto2.Message.prototype.set=function(e,t){goog.asserts.assert(e.getContainingType()==this.getDescriptor(),"The current message does not contain the given field"),this.set$Value(e.getTag(),t)},goog.proto2.Message.prototype.add=function(e,t){goog.asserts.assert(e.getContainingType()==this.getDescriptor(),"The current message does not contain the given field"),this.add$Value(e.getTag(),t)},goog.proto2.Message.prototype.clear=function(e){goog.asserts.assert(e.getContainingType()==this.getDescriptor(),"The current message does not contain the given field"),this.clear$Field(e.getTag())},goog.proto2.Message.prototype.equals=function(e){if(!e||this.constructor!=e.constructor)return!1;for(var t=this.getDescriptor().getFields(),n=0;n<t.length;n++){var i=t[n],o=i.getTag();if(this.has$Value(o)!=e.has$Value(o))return!1;if(this.has$Value(o)){var r=i.isCompositeType(),a=this.getValueForTag_(o),o=e.getValueForTag_(o);if(i.isRepeated()){if(a.length!=o.length)return!1;for(i=0;i<a.length;i++){var s=a[i],l=o[i];if(r?!s.equals(l):s!=l)return!1}}else if(r?!a.equals(o):a!=o)return!1}}return!0},goog.proto2.Message.prototype.copyFrom=function(e){goog.asserts.assert(this.constructor==e.constructor,"The source message must have the same type."),this!=e&&(this.values_={},this.deserializedFields_&&(this.deserializedFields_={}),this.mergeFrom(e))},goog.proto2.Message.prototype.mergeFrom=function(e){goog.asserts.assert(this.constructor==e.constructor,"The source message must have the same type.");for(var t=this.getDescriptor().getFields(),n=0;n<t.length;n++){var i=t[n],o=i.getTag();if(e.has$Value(o)){this.deserializedFields_&&delete this.deserializedFields_[i.getTag()];var r=i.isCompositeType();if(i.isRepeated())for(var i=e.array$Values(o),a=0;a<i.length;a++)this.add$Value(o,r?i[a].clone():i[a]);else i=e.getValueForTag_(o),r?(r=this.getValueForTag_(o))?r.mergeFrom(i):this.set$Value(o,i.clone()):this.set$Value(o,i)}}},goog.proto2.Message.prototype.clone=function(){var e=new this.constructor;return e.copyFrom(this),e},goog.proto2.Message.prototype.initDefaults=function(e){for(var t=this.getDescriptor().getFields(),n=0;n<t.length;n++){var i=t[n],o=i.getTag(),r=i.isCompositeType();if(this.has$Value(o)||i.isRepeated()||(r?this.values_[o]=new(i.getNativeType()):e&&(this.values_[o]=i.getDefaultValue())),r)if(i.isRepeated())for(i=this.array$Values(o),o=0;o<i.length;o++)i[o].initDefaults(e);else this.get$Value(o).initDefaults(e)}},goog.proto2.Message.prototype.has$Value=function(e){return null!=this.values_[e]},goog.proto2.Message.prototype.getValueForTag_=function(e){var t=this.values_[e];return goog.isDefAndNotNull(t)?this.lazyDeserializer_?e in this.deserializedFields_?this.deserializedFields_[e]:(t=this.lazyDeserializer_.deserializeField(this,this.fields_[e],t),this.deserializedFields_[e]=t):t:null},goog.proto2.Message.prototype.get$Value=function(e,t){var n=this.getValueForTag_(e);if(this.fields_[e].isRepeated()){var i=t||0;return goog.asserts.assert(i>=0&&i<n.length,"Given index %s is out of bounds.  Repeated field length: %s",i,n.length),n[i]}return n},goog.proto2.Message.prototype.get$ValueOrDefault=function(e,t){return this.has$Value(e)?this.get$Value(e,t):this.fields_[e].getDefaultValue()},goog.proto2.Message.prototype.array$Values=function(e){return this.getValueForTag_(e)||[]},goog.proto2.Message.prototype.count$Values=function(e){return this.fields_[e].isRepeated()?this.has$Value(e)?this.values_[e].length:0:this.has$Value(e)?1:0},goog.proto2.Message.prototype.set$Value=function(e,t){goog.asserts.ENABLE_ASSERTS&&this.checkFieldType_(this.fields_[e],t),this.values_[e]=t,this.deserializedFields_&&(this.deserializedFields_[e]=t)},goog.proto2.Message.prototype.add$Value=function(e,t){goog.asserts.ENABLE_ASSERTS&&this.checkFieldType_(this.fields_[e],t),this.values_[e]||(this.values_[e]=[]),this.values_[e].push(t),this.deserializedFields_&&delete this.deserializedFields_[e]},goog.proto2.Message.prototype.checkFieldType_=function(e,t){e.getFieldType()==goog.proto2.FieldDescriptor.FieldType.ENUM?goog.asserts.assertNumber(t):goog.asserts.assert(t.constructor==e.getNativeType())},goog.proto2.Message.prototype.clear$Field=function(e){delete this.values_[e],this.deserializedFields_&&delete this.deserializedFields_[e]},goog.proto2.Message.createDescriptor=function(e,t){var n,i=[],o=t[0];for(n in t)0!=n&&i.push(new goog.proto2.FieldDescriptor(e,n,t[n]));return new goog.proto2.Descriptor(e,o,i)},goog.proto2.Message.set$Metadata=function(e,t){e.descriptorObj_=t,e.getDescriptor=function(){return e.descriptor_||(new e).getDescriptor()}},goog.proto2.Serializer=function(){},goog.proto2.Serializer.DECODE_SYMBOLIC_ENUMS=!1,goog.proto2.Serializer.prototype.getSerializedValue=function(e,t){return e.isCompositeType()?this.serialize(t):goog.isNumber(t)&&!isFinite(t)?t.toString():t},goog.proto2.Serializer.prototype.deserialize=function(e,t){var n=e.createMessageInstance();return this.deserializeTo(n,t),goog.asserts.assert(n instanceof goog.proto2.Message),n},goog.proto2.Serializer.prototype.getDeserializedValue=function(e,t){if(e.isCompositeType())return t instanceof goog.proto2.Message?t:this.deserialize(e.getFieldMessageType(),t);if(e.getFieldType()==goog.proto2.FieldDescriptor.FieldType.ENUM){if(goog.proto2.Serializer.DECODE_SYMBOLIC_ENUMS&&goog.isString(t)){var n=e.getNativeType();if(n.hasOwnProperty(t))return n[t]}return t}if(!e.deserializationConversionPermitted())return t;if(n=e.getNativeType(),n===String){if(goog.isNumber(t))return String(t)}else if(n===Number&&goog.isString(t)&&("Infinity"===t||"-Infinity"===t||"NaN"===t||/^-?[0-9]+$/.test(t)))return Number(t);return t},goog.proto2.LazyDeserializer=function(){},goog.inherits(goog.proto2.LazyDeserializer,goog.proto2.Serializer),goog.proto2.LazyDeserializer.prototype.deserialize=function(e,t){var n=e.createMessageInstance();return n.initializeForLazyDeserializer(this,t),goog.asserts.assert(n instanceof goog.proto2.Message),n},goog.proto2.LazyDeserializer.prototype.deserializeTo=function(e,t){throw Error("Unimplemented")},goog.proto2.PbLiteSerializer=function(){},goog.inherits(goog.proto2.PbLiteSerializer,goog.proto2.LazyDeserializer),goog.proto2.PbLiteSerializer.prototype.zeroIndexing_=!1,goog.proto2.PbLiteSerializer.prototype.setZeroIndexed=function(e){this.zeroIndexing_=e},goog.proto2.PbLiteSerializer.prototype.serialize=function(e){for(var t=e.getDescriptor().getFields(),n=[],i=this.zeroIndexing_,o=0;o<t.length;o++){var r=t[o];if(e.has(r)){var a=r.getTag(),a=i?a-1:a;if(r.isRepeated()){n[a]=[];for(var s=0;s<e.countOf(r);s++)n[a][s]=this.getSerializedValue(r,e.get(r,s))}else n[a]=this.getSerializedValue(r,e.get(r))}}return e.forEachUnknown(function(e,t){n[i?e-1:e]=t}),n},goog.proto2.PbLiteSerializer.prototype.deserializeField=function(e,t,n){if(null==n)return n;if(t.isRepeated()){e=[],goog.asserts.assert(goog.isArray(n),"Value must be array: %s",n);for(var i=0;i<n.length;i++)e[i]=this.getDeserializedValue(t,n[i]);return e}return this.getDeserializedValue(t,n)},goog.proto2.PbLiteSerializer.prototype.getSerializedValue=function(e,t){return e.getFieldType()==goog.proto2.FieldDescriptor.FieldType.BOOL?t?1:0:goog.proto2.Serializer.prototype.getSerializedValue.apply(this,arguments)},goog.proto2.PbLiteSerializer.prototype.getDeserializedValue=function(e,t){return e.getFieldType()==goog.proto2.FieldDescriptor.FieldType.BOOL?(goog.asserts.assert(goog.isNumber(t)||goog.isBoolean(t),"Value is expected to be a number or boolean"),!!t):goog.proto2.Serializer.prototype.getDeserializedValue.apply(this,arguments)},goog.proto2.PbLiteSerializer.prototype.deserialize=function(e,t){var n=t;if(this.zeroIndexing_){var i,n=[];for(i in t)n[parseInt(i,10)+1]=t[i]}return goog.proto2.PbLiteSerializer.superClass_.deserialize.call(this,e,n)},goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var e=goog.labs.userAgent.util.getNavigator_();return e&&(e=e.userAgent)?e:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(e){goog.labs.userAgent.util.userAgent_=e||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.contains(t,e)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.caseInsensitiveContains(t,e)},goog.labs.userAgent.util.extractVersionTuples=function(e){for(var t,n=RegExp("(\\w[\\w ]+)/([^\\s]+)\\s*(?:\\((.*?)\\))?","g"),i=[];t=n.exec(e);)i.push([t[1],t[2],t[3]||void 0]);return i},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")||goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!goog.labs.userAgent.util.matchUserAgent("Chrome")&&!goog.labs.userAgent.util.matchUserAgent("CriOS")&&!goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS")},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return!goog.labs.userAgent.browser.isChrome()&&goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function e(e){return e=goog.array.find(e,i),n[e]||""}var t=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(t);var t=goog.labs.userAgent.util.extractVersionTuples(t),n={};goog.array.forEach(t,function(e){n[e[0]]=e[1]});var i=goog.partial(goog.object.containsKey,n);return goog.labs.userAgent.browser.isOpera()?e(["Version","Opera","OPR"]):goog.labs.userAgent.browser.isChrome()?e(["Chrome","CriOS"]):(t=t[2])&&t[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.browser.getVersion(),e)},goog.labs.userAgent.browser.getIEVersion_=function(e){var t=/rv: *([\d\.]*)/.exec(e);if(t&&t[1])return t[1];var t="",n=/MSIE +([\d\.]+)/.exec(e);if(n&&n[1])if(e=/Trident\/(\d.\d)/.exec(e),"7.0"==n[1])if(e&&e[1])switch(e[1]){case"4.0":t="8.0";break;case"5.0":t="9.0";break;case"6.0":t="10.0";break;case"7.0":t="11.0"}else t="7.0";else t=n[1];return t},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()},goog.labs.userAgent.engine.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent();if(e){var e=goog.labs.userAgent.util.extractVersionTuples(e),t=e[1];if(t)return"Gecko"==t[0]?goog.labs.userAgent.engine.getVersionForKey_(e,"Firefox"):t[1];var n,e=e[0];if(e&&(n=e[2])&&(n=/Trident\/([^\s;]+)/.exec(n)))return n[1]}return""},goog.labs.userAgent.engine.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),e)},goog.labs.userAgent.engine.getVersionForKey_=function(e,t){var n=goog.array.find(e,function(e){return t==e[0]});return n&&n[1]||""},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent(),t="";return goog.labs.userAgent.platform.isWindows()?(t=/Windows (?:NT|Phone) ([0-9.]+)/,t=(e=t.exec(e))?e[1]:"0.0"):goog.labs.userAgent.platform.isIos()?(t=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/,t=(e=t.exec(e))&&e[1].replace(/_/g,".")):goog.labs.userAgent.platform.isMacintosh()?(t=/Mac OS X ([0-9_.]+)/,t=(e=t.exec(e))?e[1].replace(/_/g,"."):"10"):goog.labs.userAgent.platform.isAndroid()?(t=/Android\s+([^\);]+)(\)|;)/,t=(e=t.exec(e))&&e[1]):goog.labs.userAgent.platform.isChromeOS()&&(t=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/,t=(e=t.exec(e))&&e[1]),t||""},goog.labs.userAgent.platform.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),e)},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigator=function(){return goog.global.navigator||null},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var e=goog.userAgent.getNavigator();return e&&e.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh(),goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var e=goog.userAgent.getNavigator();return!!e&&goog.string.contains(e.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.determineVersion_=function(){var e,t="";return goog.userAgent.OPERA&&goog.global.opera?(t=goog.global.opera.version,goog.isFunction(t)?t():t):(goog.userAgent.GECKO?e=/rv\:([^\);]+)(\)|;)/:goog.userAgent.IE?e=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:goog.userAgent.WEBKIT&&(e=/WebKit\/(\S+)/),e&&(t=(t=e.exec(goog.userAgent.getUserAgentString()))?t[1]:""),goog.userAgent.IE&&(e=goog.userAgent.getDocumentMode_(),e>parseFloat(t))?String(e):t)},goog.userAgent.getDocumentMode_=function(){var e=goog.global.document;return e?e.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(e,t){return goog.string.compareVersions(e,t)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(e){return goog.userAgent.ASSUME_ANY_VERSION||goog.userAgent.isVersionOrHigherCache_[e]||(goog.userAgent.isVersionOrHigherCache_[e]=0<=goog.string.compareVersions(goog.userAgent.VERSION,e))},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(e){return goog.userAgent.IE&&goog.userAgent.DOCUMENT_MODE>=e},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){var e=goog.global.document;return e&&goog.userAgent.IE?goog.userAgent.getDocumentMode_()||("CSS1Compat"==e.compatMode?parseInt(goog.userAgent.VERSION,10):5):void 0}(),goog.dom.BrowserFeature={CAN_ADD_NAME_OR_TYPE_ATTRIBUTES:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),CAN_USE_CHILDREN_ATTRIBUTE:!goog.userAgent.GECKO&&!goog.userAgent.IE||goog.userAgent.IE&&goog.userAgent.isDocumentModeOrHigher(9)||goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9.1"),CAN_USE_INNER_TEXT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),CAN_USE_PARENT_ELEMENT_PROPERTY:goog.userAgent.IE||goog.userAgent.OPERA||goog.userAgent.WEBKIT,INNER_HTML_NEEDS_SCOPED_ELEMENT:goog.userAgent.IE,LEGACY_IE_RANGES:goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)},goog.dom.TagName={A:"A",ABBR:"ABBR",ACRONYM:"ACRONYM",ADDRESS:"ADDRESS",APPLET:"APPLET",AREA:"AREA",ARTICLE:"ARTICLE",ASIDE:"ASIDE",AUDIO:"AUDIO",B:"B",BASE:"BASE",BASEFONT:"BASEFONT",BDI:"BDI",BDO:"BDO",BIG:"BIG",BLOCKQUOTE:"BLOCKQUOTE",BODY:"BODY",BR:"BR",BUTTON:"BUTTON",CANVAS:"CANVAS",CAPTION:"CAPTION",CENTER:"CENTER",CITE:"CITE",CODE:"CODE",COL:"COL",COLGROUP:"COLGROUP",COMMAND:"COMMAND",DATA:"DATA",DATALIST:"DATALIST",DD:"DD",DEL:"DEL",DETAILS:"DETAILS",DFN:"DFN",DIALOG:"DIALOG",DIR:"DIR",DIV:"DIV",DL:"DL",DT:"DT",EM:"EM",EMBED:"EMBED",FIELDSET:"FIELDSET",FIGCAPTION:"FIGCAPTION",FIGURE:"FIGURE",FONT:"FONT",FOOTER:"FOOTER",FORM:"FORM",FRAME:"FRAME",FRAMESET:"FRAMESET",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",HEAD:"HEAD",HEADER:"HEADER",HGROUP:"HGROUP",HR:"HR",HTML:"HTML",I:"I",IFRAME:"IFRAME",IMG:"IMG",INPUT:"INPUT",INS:"INS",ISINDEX:"ISINDEX",KBD:"KBD",KEYGEN:"KEYGEN",LABEL:"LABEL",LEGEND:"LEGEND",LI:"LI",LINK:"LINK",MAP:"MAP",MARK:"MARK",MATH:"MATH",MENU:"MENU",META:"META",METER:"METER",NAV:"NAV",NOFRAMES:"NOFRAMES",NOSCRIPT:"NOSCRIPT",OBJECT:"OBJECT",OL:"OL",OPTGROUP:"OPTGROUP",OPTION:"OPTION",OUTPUT:"OUTPUT",P:"P",PARAM:"PARAM",PRE:"PRE",PROGRESS:"PROGRESS",Q:"Q",RP:"RP",RT:"RT",RUBY:"RUBY",S:"S",SAMP:"SAMP",SCRIPT:"SCRIPT",SECTION:"SECTION",SELECT:"SELECT",SMALL:"SMALL",SOURCE:"SOURCE",SPAN:"SPAN",STRIKE:"STRIKE",STRONG:"STRONG",STYLE:"STYLE",SUB:"SUB",SUMMARY:"SUMMARY",SUP:"SUP",SVG:"SVG",TABLE:"TABLE",TBODY:"TBODY",TD:"TD",TEXTAREA:"TEXTAREA",TFOOT:"TFOOT",TH:"TH",THEAD:"THEAD",TIME:"TIME",TITLE:"TITLE",TR:"TR",TRACK:"TRACK",TT:"TT",U:"U",UL:"UL",VAR:"VAR",VIDEO:"VIDEO",WBR:"WBR"},goog.dom.tags={},goog.dom.tags.VOID_TAGS_=goog.object.createSet("area base br col command embed hr img input keygen link meta param source track wbr".split(" ")),goog.dom.tags.isVoidTag=function(e){return!0===goog.dom.tags.VOID_TAGS_[e]},goog.string.TypedString=function(){},goog.string.Const=function(){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_="",this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_},goog.string.Const.prototype.implementsGoogStringTypedString=!0,goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_},goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"},goog.string.Const.unwrap=function(e){return e instanceof goog.string.Const&&e.constructor===goog.string.Const&&e.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_?e.stringConstValueWithSecurityContract__googStringSecurityPrivate_:(goog.asserts.fail("expected object of type Const, got '"+e+"'"),"type_error:Const")},goog.string.Const.from=function(e){return goog.string.Const.create__googStringSecurityPrivate_(e)},goog.string.Const.TYPE_MARKER_={},goog.string.Const.create__googStringSecurityPrivate_=function(e){var t=new goog.string.Const;return t.stringConstValueWithSecurityContract__googStringSecurityPrivate_=e,t},goog.html={},goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="",this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyle.fromConstant=function(e){return e=goog.string.Const.unwrap(e),0===e.length?goog.html.SafeStyle.EMPTY:(goog.html.SafeStyle.checkStyle_(e),goog.asserts.assert(goog.string.endsWith(e,";"),"Last character of style string is not ';': "+e),goog.asserts.assert(goog.string.contains(e,":"),"Style string must contain at least one ':', to specify a \"name: value\" pair: "+e),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeStyle.checkStyle_=function(e){goog.asserts.assert(!/[<>]/.test(e),"Forbidden characters in style string: "+e)},goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_},goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}),goog.html.SafeStyle.unwrap=function(e){return e instanceof goog.html.SafeStyle&&e.constructor===goog.html.SafeStyle&&e.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeStyleWrappedValue_:(goog.asserts.fail("expected object of type SafeStyle, got '"+e+"'"),"type_error:SafeStyle")},goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(e){var t=new goog.html.SafeStyle;return t.privateDoNotAccessOrElseSafeStyleWrappedValue_=e,t},goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez",goog.html.SafeStyle.create=function(e){var t,n="";for(t in e){if(!/^[-_a-zA-Z0-9]+$/.test(t))throw Error("Name allows only [-_a-zA-Z0-9], got: "+t);var i=e[t];null!=i&&(i instanceof goog.string.Const?(i=goog.string.Const.unwrap(i),goog.asserts.assert(!/[{;}]/.test(i),"Value does not allow [{;}].")):goog.html.SafeStyle.VALUE_RE_.test(i)||(goog.asserts.fail("String value allows only [-.%_!# a-zA-Z0-9], got: "+i),i=goog.html.SafeStyle.INNOCUOUS_STRING),n+=t+":"+i+";")}return n?(goog.html.SafeStyle.checkStyle_(n),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(n)):goog.html.SafeStyle.EMPTY},goog.html.SafeStyle.VALUE_RE_=/^[-.%_!# a-zA-Z0-9]+$/,goog.html.SafeStyle.concat=function(e){var t="",n=function(e){goog.isArray(e)?goog.array.forEach(e,n):t+=goog.html.SafeStyle.unwrap(e)};return goog.array.forEach(arguments,n),t?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t):goog.html.SafeStyle.EMPTY},goog.i18n={},goog.i18n.bidi={},goog.i18n.bidi.FORCE_RTL=!1,goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||("ar"==goog.LOCALE.substring(0,2).toLowerCase()||"fa"==goog.LOCALE.substring(0,2).toLowerCase()||"he"==goog.LOCALE.substring(0,2).toLowerCase()||"iw"==goog.LOCALE.substring(0,2).toLowerCase()||"ps"==goog.LOCALE.substring(0,2).toLowerCase()||"sd"==goog.LOCALE.substring(0,2).toLowerCase()||"ug"==goog.LOCALE.substring(0,2).toLowerCase()||"ur"==goog.LOCALE.substring(0,2).toLowerCase()||"yi"==goog.LOCALE.substring(0,2).toLowerCase())&&(2==goog.LOCALE.length||"-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))||3<=goog.LOCALE.length&&"ckb"==goog.LOCALE.substring(0,3).toLowerCase()&&(3==goog.LOCALE.length||"-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4)),goog.i18n.bidi.Format={LRE:"‪",RLE:"‫",PDF:"‬",LRM:"‎",RLM:"‏"},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(e,t){return"number"==typeof e?e>0?goog.i18n.bidi.Dir.LTR:0>e?goog.i18n.bidi.Dir.RTL:t?null:goog.i18n.bidi.Dir.NEUTRAL:null==e?null:e?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",goog.i18n.bidi.rtlChars_="֑-߿‏יִ-﷿ﹰ-ﻼ",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(e,t){return t?e.replace(goog.i18n.bidi.htmlSkipReg_,""):e},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(e,t){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(e,t){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(e){return goog.i18n.bidi.rtlRe_.test(e)},goog.i18n.bidi.isLtrChar=function(e){return goog.i18n.bidi.ltrRe_.test(e)},goog.i18n.bidi.isNeutralChar=function(e){return!goog.i18n.bidi.isLtrChar(e)&&!goog.i18n.bidi.isRtlChar(e)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(e,t){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(e,t){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(e,t){return e=goog.i18n.bidi.stripHtmlIfNeeded_(e,t),goog.i18n.bidi.isRequiredLtrRe_.test(e)||!goog.i18n.bidi.hasAnyLtr(e)&&!goog.i18n.bidi.hasAnyRtl(e)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(e,t){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(e,t){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Arab|Hebr|Thaa|Nkoo|Tfng))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,goog.i18n.bidi.isRtlLanguage=function(e){return goog.i18n.bidi.rtlLocalesRe_.test(e)},goog.i18n.bidi.bracketGuardHtmlRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(&lt;.*?(&gt;)+)/g,goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInHtml=function(e,t){return(void 0===t?goog.i18n.bidi.hasAnyRtl(e):t)?e.replace(goog.i18n.bidi.bracketGuardHtmlRe_,"<span dir=rtl>$&</span>"):e.replace(goog.i18n.bidi.bracketGuardHtmlRe_,"<span dir=ltr>$&</span>")},goog.i18n.bidi.guardBracketInText=function(e,t){var n=(void 0===t?goog.i18n.bidi.hasAnyRtl(e):t)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM;return e.replace(goog.i18n.bidi.bracketGuardTextRe_,n+"$&"+n)},goog.i18n.bidi.enforceRtlInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=rtl"):"\n<span dir=rtl>"+e+"</span>"},goog.i18n.bidi.enforceRtlInText=function(e){return goog.i18n.bidi.Format.RLE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=ltr"):"\n<span dir=ltr>"+e+"</span>"},goog.i18n.bidi.enforceLtrInText=function(e){return goog.i18n.bidi.Format.LRE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(e){return e.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT);
},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(e){return e.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1״").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1׳")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/\d/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(e,t){for(var n=0,i=0,o=!1,r=goog.i18n.bidi.stripHtmlIfNeeded_(e,t).split(goog.i18n.bidi.wordSeparatorRe_),a=0;a<r.length;a++){var s=r[a];goog.i18n.bidi.startsWithRtl(s)?(n++,i++):goog.i18n.bidi.isRequiredLtrRe_.test(s)?o=!0:goog.i18n.bidi.hasAnyLtr(s)?i++:goog.i18n.bidi.hasNumeralsRe_.test(s)&&(o=!0)}return 0==i?o?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:n/i>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(e,t){return goog.i18n.bidi.estimateDirection(e,t)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(e,t){e&&(t=goog.i18n.bidi.toDir(t))&&(e.style.textAlign=t==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,e.dir=t==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")},goog.i18n.bidi.DirectionalString=function(){},goog.html.SafeUrl=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez",goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0,goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_},goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeUrl.unwrap=function(e){return e instanceof goog.html.SafeUrl&&e.constructor===goog.html.SafeUrl&&e.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeUrl, got '"+e+"'"),"type_error:SafeUrl")},goog.html.SafeUrl.fromConstant=function(e){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))},goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i,goog.html.SafeUrl.sanitize=function(e){return e instanceof goog.html.SafeUrl?e:(e=e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),e=goog.html.SAFE_URL_PATTERN_.test(e)?goog.html.SafeUrl.normalize_(e):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeUrl.normalize_=function(e){try{var t=encodeURI(e)}catch(n){return goog.html.SafeUrl.INNOCUOUS_STRING}return t.replace(goog.html.SafeUrl.NORMALIZE_MATCHER_,function(e){return goog.html.SafeUrl.NORMALIZE_REPLACER_MAP_[e]})},goog.html.SafeUrl.NORMALIZE_MATCHER_=/[()']|%5B|%5D|%25/g,goog.html.SafeUrl.NORMALIZE_REPLACER_MAP_={"'":"%27","(":"%28",")":"%29","%5B":"[","%5D":"]","%25":"%"},goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(e){var t=new goog.html.SafeUrl;return t.privateDoNotAccessOrElseSafeHtmlWrappedValue_=e,t},goog.html.TrustedResourceUrl=function(){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_="",this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0,goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_},goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}),goog.html.TrustedResourceUrl.unwrap=function(e){return e instanceof goog.html.TrustedResourceUrl&&e.constructor===goog.html.TrustedResourceUrl&&e.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_:(goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+e+"'"),"type_error:TrustedResourceUrl")},goog.html.TrustedResourceUrl.fromConstant=function(e){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))},goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(e){var t=new goog.html.TrustedResourceUrl;return t.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=e,t},goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_,this.dir_=null},goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(e){return e instanceof goog.html.SafeHtml&&e.constructor===goog.html.SafeHtml&&e.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+e+"'"),"type_error:SafeHtml")},goog.html.SafeHtml.htmlEscape=function(e){if(e instanceof goog.html.SafeHtml)return e;var t=null;return e.implementsGoogI18nBidiDirectionalString&&(t=e.getDirection()),e=e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.htmlEscape(e),t)},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(e){return e instanceof goog.html.SafeHtml?e:(e=goog.html.SafeHtml.htmlEscape(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.newLineToBr(goog.html.SafeHtml.unwrap(e)),e.getDirection()))},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(e){return e instanceof goog.html.SafeHtml?e:(e=goog.html.SafeHtml.htmlEscape(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.whitespaceEscape(goog.html.SafeHtml.unwrap(e)),e.getDirection()))},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_=goog.object.createSet("action","cite","data","formaction","href","manifest","poster","src"),goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_=goog.object.createSet("embed","iframe","link","script","style","template"),goog.html.SafeHtml.create=function(e,t,n){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(e))throw Error("Invalid tag name <"+e+">.");if(e.toLowerCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error("Tag name <"+e+"> is not allowed for SafeHtml.");return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(e,t,n)},goog.html.SafeHtml.getAttrNameAndValue_=function(e,t,n){if(n instanceof goog.string.Const)n=goog.string.Const.unwrap(n);else if("style"==t.toLowerCase())n=goog.html.SafeHtml.getStyleValue_(n);else{if(/^on/i.test(t))throw Error('Attribute "'+t+'" requires goog.string.Const value, "'+n+'" given.');if(t.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(n instanceof goog.html.TrustedResourceUrl)n=goog.html.TrustedResourceUrl.unwrap(n);else{if(!(n instanceof goog.html.SafeUrl))throw Error('Attribute "'+t+'" on tag "'+e+'" requires goog.html.SafeUrl or goog.string.Const value, "'+n+'" given.');n=goog.html.SafeUrl.unwrap(n)}}return n.implementsGoogStringTypedString&&(n=n.getTypedStringValue()),goog.asserts.assert(goog.isString(n)||goog.isNumber(n),"String or number value expected, got "+typeof n+" with value: "+n),t+'="'+goog.string.htmlEscape(String(n))+'"'},goog.html.SafeHtml.getStyleValue_=function(e){if(!goog.isObject(e))throw Error('The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof e+" given: "+e);return e instanceof goog.html.SafeStyle||(e=goog.html.SafeStyle.create(e)),goog.html.SafeStyle.unwrap(e)},goog.html.SafeHtml.createWithDir=function(e,t,n,i){return t=goog.html.SafeHtml.create(t,n,i),t.dir_=e,t},goog.html.SafeHtml.concat=function(e){var t=goog.i18n.bidi.Dir.NEUTRAL,n="",i=function(e){goog.isArray(e)?goog.array.forEach(e,i):(e=goog.html.SafeHtml.htmlEscape(e),n+=goog.html.SafeHtml.unwrap(e),e=e.getDirection(),t==goog.i18n.bidi.Dir.NEUTRAL?t=e:e!=goog.i18n.bidi.Dir.NEUTRAL&&t!=e&&(t=null))};return goog.array.forEach(arguments,i),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(n,t)},goog.html.SafeHtml.concatWithDir=function(e,t){var n=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));return n.dir_=e,n},goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(e,t){var n=new goog.html.SafeHtml;return n.privateDoNotAccessOrElseSafeHtmlWrappedValue_=e,n.dir_=t,n},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(e,t,n){var i=null,o="<"+e;if(t)for(var r in t){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(r))throw Error('Invalid attribute name "'+r+'".');var a=t[r];goog.isDefAndNotNull(a)&&(o+=" "+goog.html.SafeHtml.getAttrNameAndValue_(e,r,a))}return goog.isDef(n)?goog.isArray(n)||(n=[n]):n=[],goog.dom.tags.isVoidTag(e.toLowerCase())?(goog.asserts.assert(!n.length,"Void tag <"+e+"> does not allow content."),o+=">"):(i=goog.html.SafeHtml.concat(n),o+=">"+goog.html.SafeHtml.unwrap(i)+"</"+e+">",i=i.getDirection()),(e=t&&t.dir)&&(i=/^(ltr|rtl|auto)$/i.test(e)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(o,i)},goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL),goog.dom.safe={},goog.dom.safe.setInnerHtml=function(e,t){e.innerHTML=goog.html.SafeHtml.unwrap(t)},goog.dom.safe.setOuterHtml=function(e,t){e.outerHTML=goog.html.SafeHtml.unwrap(t)},goog.dom.safe.documentWrite=function(e,t){e.write(goog.html.SafeHtml.unwrap(t))},goog.dom.safe.setAnchorHref=function(e,t){var n;n=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitize(t),e.href=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setLocationHref=function(e,t){var n;n=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitize(t),e.href=goog.html.SafeUrl.unwrap(n)},goog.math={},goog.math.randomInt=function(e){return Math.floor(Math.random()*e)},goog.math.uniformRandom=function(e,t){return e+Math.random()*(t-e)},goog.math.clamp=function(e,t,n){return Math.min(Math.max(e,t),n)},goog.math.modulo=function(e,t){var n=e%t;return 0>n*t?n+t:n},goog.math.lerp=function(e,t,n){return e+n*(t-e)},goog.math.nearlyEquals=function(e,t,n){return Math.abs(e-t)<=(n||1e-6)},goog.math.standardAngle=function(e){return goog.math.modulo(e,360)},goog.math.standardAngleInRadians=function(e){return goog.math.modulo(e,2*Math.PI)},goog.math.toRadians=function(e){return e*Math.PI/180},goog.math.toDegrees=function(e){return 180*e/Math.PI},goog.math.angleDx=function(e,t){return t*Math.cos(goog.math.toRadians(e))},goog.math.angleDy=function(e,t){return t*Math.sin(goog.math.toRadians(e))},goog.math.angle=function(e,t,n,i){return goog.math.standardAngle(goog.math.toDegrees(Math.atan2(i-t,n-e)))},goog.math.angleDifference=function(e,t){var n=goog.math.standardAngle(t)-goog.math.standardAngle(e);return n>180?n-=360:-180>=n&&(n=360+n),n},goog.math.sign=function(e){return 0==e?0:0>e?-1:1},goog.math.longestCommonSubsequence=function(e,t,n,i){n=n||function(e,t){return e==t},i=i||function(t,n){return e[t]};for(var o=e.length,r=t.length,a=[],s=0;o+1>s;s++)a[s]=[],a[s][0]=0;for(var l=0;r+1>l;l++)a[0][l]=0;for(s=1;o>=s;s++)for(l=1;r>=l;l++)n(e[s-1],t[l-1])?a[s][l]=a[s-1][l-1]+1:a[s][l]=Math.max(a[s-1][l],a[s][l-1]);for(var d=[],s=o,l=r;s>0&&l>0;)n(e[s-1],t[l-1])?(d.unshift(i(s-1,l-1)),s--,l--):a[s-1][l]>a[s][l-1]?s--:l--;return d},goog.math.sum=function(e){return goog.array.reduce(arguments,function(e,t){return e+t},0)},goog.math.average=function(e){return goog.math.sum.apply(null,arguments)/arguments.length},goog.math.sampleVariance=function(e){var t=arguments.length;if(2>t)return 0;var n=goog.math.average.apply(null,arguments);return goog.math.sum.apply(null,goog.array.map(arguments,function(e){return Math.pow(e-n,2)}))/(t-1)},goog.math.standardDeviation=function(e){return Math.sqrt(goog.math.sampleVariance.apply(null,arguments))},goog.math.isInt=function(e){return isFinite(e)&&0==e%1},goog.math.isFiniteNumber=function(e){return isFinite(e)&&!isNaN(e)},goog.math.log10Floor=function(e){if(e>0){var t=Math.round(Math.log(e)*Math.LOG10E);return t-(parseFloat("1e"+t)>e)}return 0==e?-(1/0):NaN},goog.math.safeFloor=function(e,t){return goog.asserts.assert(!goog.isDef(t)||t>0),Math.floor(e+(t||2e-15))},goog.math.safeCeil=function(e,t){return goog.asserts.assert(!goog.isDef(t)||t>0),Math.ceil(e-(t||2e-15))},goog.math.Coordinate=function(e,t){this.x=goog.isDef(e)?e:0,this.y=goog.isDef(t)?t:0},goog.math.Coordinate.prototype.clone=function(){return new goog.math.Coordinate(this.x,this.y)},goog.DEBUG&&(goog.math.Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+")"}),goog.math.Coordinate.equals=function(e,t){return e==t?!0:e&&t?e.x==t.x&&e.y==t.y:!1},goog.math.Coordinate.distance=function(e,t){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)},goog.math.Coordinate.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},goog.math.Coordinate.azimuth=function(e){return goog.math.angle(0,0,e.x,e.y)},goog.math.Coordinate.squaredDistance=function(e,t){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i},goog.math.Coordinate.difference=function(e,t){return new goog.math.Coordinate(e.x-t.x,e.y-t.y)},goog.math.Coordinate.sum=function(e,t){return new goog.math.Coordinate(e.x+t.x,e.y+t.y)},goog.math.Coordinate.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},goog.math.Coordinate.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},goog.math.Coordinate.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},goog.math.Coordinate.prototype.translate=function(e,t){return e instanceof goog.math.Coordinate?(this.x+=e.x,this.y+=e.y):(this.x+=e,goog.isNumber(t)&&(this.y+=t)),this},goog.math.Coordinate.prototype.scale=function(e,t){var n=goog.isNumber(t)?t:e;return this.x*=e,this.y*=n,this},goog.math.Coordinate.prototype.rotateRadians=function(e,t){var n=t||new goog.math.Coordinate(0,0),i=this.x,o=this.y,r=Math.cos(e),a=Math.sin(e);this.x=(i-n.x)*r-(o-n.y)*a+n.x,this.y=(i-n.x)*a+(o-n.y)*r+n.y},goog.math.Coordinate.prototype.rotateDegrees=function(e,t){this.rotateRadians(goog.math.toRadians(e),t)},goog.math.Size=function(e,t){this.width=e,this.height=t},goog.math.Size.equals=function(e,t){return e==t?!0:e&&t?e.width==t.width&&e.height==t.height:!1},goog.math.Size.prototype.clone=function(){return new goog.math.Size(this.width,this.height)},goog.DEBUG&&(goog.math.Size.prototype.toString=function(){return"("+this.width+" x "+this.height+")"}),goog.math.Size.prototype.getLongest=function(){return Math.max(this.width,this.height)},goog.math.Size.prototype.getShortest=function(){return Math.min(this.width,this.height)},goog.math.Size.prototype.area=function(){return this.width*this.height},goog.math.Size.prototype.perimeter=function(){return 2*(this.width+this.height)},goog.math.Size.prototype.aspectRatio=function(){return this.width/this.height},goog.math.Size.prototype.isEmpty=function(){return!this.area()},goog.math.Size.prototype.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},goog.math.Size.prototype.fitsInside=function(e){return this.width<=e.width&&this.height<=e.height},goog.math.Size.prototype.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},goog.math.Size.prototype.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this},goog.math.Size.prototype.scale=function(e,t){var n=goog.isNumber(t)?t:e;return this.width*=e,this.height*=n,this},goog.math.Size.prototype.scaleToFit=function(e){return e=this.aspectRatio()>e.aspectRatio()?e.width/this.width:e.height/this.height,this.scale(e)},goog.dom.ASSUME_QUIRKS_MODE=!1,goog.dom.ASSUME_STANDARDS_MODE=!1,goog.dom.COMPAT_MODE_KNOWN_=goog.dom.ASSUME_QUIRKS_MODE||goog.dom.ASSUME_STANDARDS_MODE,goog.dom.getDomHelper=function(e){return e?new goog.dom.DomHelper(goog.dom.getOwnerDocument(e)):goog.dom.defaultDomHelper_||(goog.dom.defaultDomHelper_=new goog.dom.DomHelper)},goog.dom.getDocument=function(){return document},goog.dom.getElement=function(e){return goog.dom.getElementHelper_(document,e)},goog.dom.getElementHelper_=function(e,t){return goog.isString(t)?e.getElementById(t):t},goog.dom.getRequiredElement=function(e){return goog.dom.getRequiredElementHelper_(document,e)},goog.dom.getRequiredElementHelper_=function(e,t){goog.asserts.assertString(t);var n=goog.dom.getElementHelper_(e,t);return n=goog.asserts.assertElement(n,"No element found with id: "+t)},goog.dom.$=goog.dom.getElement,goog.dom.getElementsByTagNameAndClass=function(e,t,n){return goog.dom.getElementsByTagNameAndClass_(document,e,t,n)},goog.dom.getElementsByClass=function(e,t){var n=t||document;return goog.dom.canUseQuerySelector_(n)?n.querySelectorAll("."+e):goog.dom.getElementsByTagNameAndClass_(document,"*",e,t)},goog.dom.getElementByClass=function(e,t){var n=t||document,i=null;return(i=goog.dom.canUseQuerySelector_(n)?n.querySelector("."+e):goog.dom.getElementsByTagNameAndClass_(document,"*",e,t)[0])||null},goog.dom.getRequiredElementByClass=function(e,t){var n=goog.dom.getElementByClass(e,t);return goog.asserts.assert(n,"No element found with className: "+e)},goog.dom.canUseQuerySelector_=function(e){return!(!e.querySelectorAll||!e.querySelector)},goog.dom.getElementsByTagNameAndClass_=function(e,t,n,i){if(e=i||e,t=t&&"*"!=t?t.toUpperCase():"",goog.dom.canUseQuerySelector_(e)&&(t||n))return e.querySelectorAll(t+(n?"."+n:""));if(n&&e.getElementsByClassName){if(e=e.getElementsByClassName(n),t){i={};for(var o,r=0,a=0;o=e[a];a++)t==o.nodeName&&(i[r++]=o);return i.length=r,i}return e}if(e=e.getElementsByTagName(t||"*"),n){for(i={},a=r=0;o=e[a];a++)t=o.className,"function"==typeof t.split&&goog.array.contains(t.split(/\s+/),n)&&(i[r++]=o);return i.length=r,i}return e},goog.dom.$$=goog.dom.getElementsByTagNameAndClass,goog.dom.setProperties=function(e,t){goog.object.forEach(t,function(t,n){"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:n in goog.dom.DIRECT_ATTRIBUTE_MAP_?e.setAttribute(goog.dom.DIRECT_ATTRIBUTE_MAP_[n],t):goog.string.startsWith(n,"aria-")||goog.string.startsWith(n,"data-")?e.setAttribute(n,t):e[n]=t})},goog.dom.DIRECT_ATTRIBUTE_MAP_={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},goog.dom.getViewportSize=function(e){return goog.dom.getViewportSize_(e||window)},goog.dom.getViewportSize_=function(e){return e=e.document,e=goog.dom.isCss1CompatMode_(e)?e.documentElement:e.body,new goog.math.Size(e.clientWidth,e.clientHeight)},goog.dom.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(window)},goog.dom.getDocumentHeight_=function(e){var t=e.document,n=0;if(t){var n=t.body,i=t.documentElement;if(!i||!n)return 0;if(e=goog.dom.getViewportSize_(e).height,goog.dom.isCss1CompatMode_(t)&&i.scrollHeight)n=i.scrollHeight!=e?i.scrollHeight:i.offsetHeight;else{var t=i.scrollHeight,o=i.offsetHeight;i.clientHeight!=o&&(t=n.scrollHeight,o=n.offsetHeight),n=t>e?t>o?t:o:o>t?t:o}}return n},goog.dom.getPageScroll=function(e){return goog.dom.getDomHelper((e||goog.global||window).document).getDocumentScroll()},goog.dom.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(document)},goog.dom.getDocumentScroll_=function(e){var t=goog.dom.getDocumentScrollElement_(e);return e=goog.dom.getWindow_(e),goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("10")&&e.pageYOffset!=t.scrollTop?new goog.math.Coordinate(t.scrollLeft,t.scrollTop):new goog.math.Coordinate(e.pageXOffset||t.scrollLeft,e.pageYOffset||t.scrollTop)},goog.dom.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(document)},goog.dom.getDocumentScrollElement_=function(e){return!goog.userAgent.WEBKIT&&goog.dom.isCss1CompatMode_(e)?e.documentElement:e.body||e.documentElement},goog.dom.getWindow=function(e){return e?goog.dom.getWindow_(e):window},goog.dom.getWindow_=function(e){return e.parentWindow||e.defaultView},goog.dom.createDom=function(e,t,n){return goog.dom.createDom_(document,arguments)},goog.dom.createDom_=function(e,t){var n=t[0],i=t[1];if(!goog.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES&&i&&(i.name||i.type)){if(n=["<",n],i.name&&n.push(' name="',goog.string.htmlEscape(i.name),'"'),i.type){n.push(' type="',goog.string.htmlEscape(i.type),'"');var o={};goog.object.extend(o,i),delete o.type,i=o}n.push(">"),n=n.join("")}return n=e.createElement(n),i&&(goog.isString(i)?n.className=i:goog.isArray(i)?n.className=i.join(" "):goog.dom.setProperties(n,i)),2<t.length&&goog.dom.append_(e,n,t,2),n},goog.dom.append_=function(e,t,n,i){function o(n){n&&t.appendChild(goog.isString(n)?e.createTextNode(n):n)}for(;i<n.length;i++){var r=n[i];goog.isArrayLike(r)&&!goog.dom.isNodeLike(r)?goog.array.forEach(goog.dom.isNodeList(r)?goog.array.toArray(r):r,o):o(r)}},goog.dom.$dom=goog.dom.createDom,goog.dom.createElement=function(e){return document.createElement(e)},goog.dom.createTextNode=function(e){return document.createTextNode(String(e))},goog.dom.createTable=function(e,t,n){return goog.dom.createTable_(document,e,t,!!n)},goog.dom.createTable_=function(e,t,n,i){for(var o=["<tr>"],r=0;n>r;r++)o.push(i?"<td>&nbsp;</td>":"<td></td>");for(o.push("</tr>"),o=o.join(""),n=["<table>"],r=0;t>r;r++)n.push(o);return n.push("</table>"),e=e.createElement(goog.dom.TagName.DIV),e.innerHTML=n.join(""),e.removeChild(e.firstChild)},goog.dom.safeHtmlToNode=function(e){return goog.dom.safeHtmlToNode_(document,e)},goog.dom.safeHtmlToNode_=function(e,t){var n=e.createElement("div");return goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT?(goog.dom.safe.setInnerHtml(n,goog.html.SafeHtml.concat(goog.html.SafeHtml.create("br"),t)),n.removeChild(n.firstChild)):goog.dom.safe.setInnerHtml(n,t),goog.dom.childrenToNode_(e,n)},goog.dom.htmlToDocumentFragment=function(e){return goog.dom.htmlToDocumentFragment_(document,e)},goog.dom.htmlToDocumentFragment_=function(e,t){var n=e.createElement("div");return goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT?(n.innerHTML="<br>"+t,n.removeChild(n.firstChild)):n.innerHTML=t,goog.dom.childrenToNode_(e,n)},goog.dom.childrenToNode_=function(e,t){if(1==t.childNodes.length)return t.removeChild(t.firstChild);for(var n=e.createDocumentFragment();t.firstChild;)n.appendChild(t.firstChild);return n},goog.dom.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(document)},goog.dom.isCss1CompatMode_=function(e){return goog.dom.COMPAT_MODE_KNOWN_?goog.dom.ASSUME_STANDARDS_MODE:"CSS1Compat"==e.compatMode},goog.dom.canHaveChildren=function(e){if(e.nodeType!=goog.dom.NodeType.ELEMENT)return!1;switch(e.tagName){case goog.dom.TagName.APPLET:case goog.dom.TagName.AREA:case goog.dom.TagName.BASE:case goog.dom.TagName.BR:case goog.dom.TagName.COL:case goog.dom.TagName.COMMAND:case goog.dom.TagName.EMBED:case goog.dom.TagName.FRAME:case goog.dom.TagName.HR:case goog.dom.TagName.IMG:case goog.dom.TagName.INPUT:case goog.dom.TagName.IFRAME:case goog.dom.TagName.ISINDEX:case goog.dom.TagName.KEYGEN:case goog.dom.TagName.LINK:case goog.dom.TagName.NOFRAMES:case goog.dom.TagName.NOSCRIPT:case goog.dom.TagName.META:case goog.dom.TagName.OBJECT:case goog.dom.TagName.PARAM:case goog.dom.TagName.SCRIPT:case goog.dom.TagName.SOURCE:case goog.dom.TagName.STYLE:case goog.dom.TagName.TRACK:case goog.dom.TagName.WBR:return!1}return!0},goog.dom.appendChild=function(e,t){e.appendChild(t)},goog.dom.append=function(e,t){goog.dom.append_(goog.dom.getOwnerDocument(e),e,arguments,1)},goog.dom.removeChildren=function(e){for(var t;t=e.firstChild;)e.removeChild(t)},goog.dom.insertSiblingBefore=function(e,t){t.parentNode&&t.parentNode.insertBefore(e,t)},goog.dom.insertSiblingAfter=function(e,t){t.parentNode&&t.parentNode.insertBefore(e,t.nextSibling)},goog.dom.insertChildAt=function(e,t,n){e.insertBefore(t,e.childNodes[n]||null)},goog.dom.removeNode=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},goog.dom.replaceNode=function(e,t){var n=t.parentNode;n&&n.replaceChild(e,t)},goog.dom.flattenElement=function(e){var t,n=e.parentNode;if(n&&n.nodeType!=goog.dom.NodeType.DOCUMENT_FRAGMENT){if(e.removeNode)return e.removeNode(!1);for(;t=e.firstChild;)n.insertBefore(t,e);return goog.dom.removeNode(e)}},goog.dom.getChildren=function(e){return goog.dom.BrowserFeature.CAN_USE_CHILDREN_ATTRIBUTE&&void 0!=e.children?e.children:goog.array.filter(e.childNodes,function(e){return e.nodeType==goog.dom.NodeType.ELEMENT})},goog.dom.getFirstElementChild=function(e){return void 0!=e.firstElementChild?e.firstElementChild:goog.dom.getNextElementNode_(e.firstChild,!0)},goog.dom.getLastElementChild=function(e){return void 0!=e.lastElementChild?e.lastElementChild:goog.dom.getNextElementNode_(e.lastChild,!1)},goog.dom.getNextElementSibling=function(e){return void 0!=e.nextElementSibling?e.nextElementSibling:goog.dom.getNextElementNode_(e.nextSibling,!0)},goog.dom.getPreviousElementSibling=function(e){return void 0!=e.previousElementSibling?e.previousElementSibling:goog.dom.getNextElementNode_(e.previousSibling,!1)},goog.dom.getNextElementNode_=function(e,t){for(;e&&e.nodeType!=goog.dom.NodeType.ELEMENT;)e=t?e.nextSibling:e.previousSibling;return e},goog.dom.getNextNode=function(e){if(!e)return null;if(e.firstChild)return e.firstChild;for(;e&&!e.nextSibling;)e=e.parentNode;return e?e.nextSibling:null},goog.dom.getPreviousNode=function(e){if(!e)return null;if(!e.previousSibling)return e.parentNode;for(e=e.previousSibling;e&&e.lastChild;)e=e.lastChild;return e},goog.dom.isNodeLike=function(e){return goog.isObject(e)&&0<e.nodeType},goog.dom.isElement=function(e){return goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT},goog.dom.isWindow=function(e){return goog.isObject(e)&&e.window==e},goog.dom.getParentElement=function(e){var t;return!goog.dom.BrowserFeature.CAN_USE_PARENT_ELEMENT_PROPERTY||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("9")&&!goog.userAgent.isVersionOrHigher("10")&&goog.global.SVGElement&&e instanceof goog.global.SVGElement||!(t=e.parentElement)?(t=e.parentNode,goog.dom.isElement(t)?t:null):t},goog.dom.contains=function(e,t){if(e.contains&&t.nodeType==goog.dom.NodeType.ELEMENT)return e==t||e.contains(t);if("undefined"!=typeof e.compareDocumentPosition)return e==t||Boolean(16&e.compareDocumentPosition(t));for(;t&&e!=t;)t=t.parentNode;return t==e},goog.dom.compareNodeOrder=function(e,t){if(e==t)return 0;if(e.compareDocumentPosition)return 2&e.compareDocumentPosition(t)?1:-1;if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){if(e.nodeType==goog.dom.NodeType.DOCUMENT)return-1;if(t.nodeType==goog.dom.NodeType.DOCUMENT)return 1}if("sourceIndex"in e||e.parentNode&&"sourceIndex"in e.parentNode){var n=e.nodeType==goog.dom.NodeType.ELEMENT,i=t.nodeType==goog.dom.NodeType.ELEMENT;if(n&&i)return e.sourceIndex-t.sourceIndex;var o=e.parentNode,r=t.parentNode;return o==r?goog.dom.compareSiblingOrder_(e,t):!n&&goog.dom.contains(o,t)?-1*goog.dom.compareParentsDescendantNodeIe_(e,t):!i&&goog.dom.contains(r,e)?goog.dom.compareParentsDescendantNodeIe_(t,e):(n?e.sourceIndex:o.sourceIndex)-(i?t.sourceIndex:r.sourceIndex)}return i=goog.dom.getOwnerDocument(e),n=i.createRange(),n.selectNode(e),n.collapse(!0),i=i.createRange(),i.selectNode(t),i.collapse(!0),n.compareBoundaryPoints(goog.global.Range.START_TO_END,i)},goog.dom.compareParentsDescendantNodeIe_=function(e,t){var n=e.parentNode;if(n==t)return-1;for(var i=t;i.parentNode!=n;)i=i.parentNode;return goog.dom.compareSiblingOrder_(i,e)},goog.dom.compareSiblingOrder_=function(e,t){for(var n=t;n=n.previousSibling;)if(n==e)return-1;return 1},goog.dom.findCommonAncestor=function(e){var t,n=arguments.length;if(!n)return null;if(1==n)return arguments[0];var i=[],o=1/0;for(t=0;n>t;t++){for(var r=[],a=arguments[t];a;)r.unshift(a),a=a.parentNode;i.push(r),o=Math.min(o,r.length)}for(r=null,t=0;o>t;t++){for(var a=i[0][t],s=1;n>s;s++)if(a!=i[s][t])return r;r=a}return r},goog.dom.getOwnerDocument=function(e){return goog.asserts.assert(e,"Node cannot be null or undefined."),e.nodeType==goog.dom.NodeType.DOCUMENT?e:e.ownerDocument||e.document},goog.dom.getFrameContentDocument=function(e){return e.contentDocument||e.contentWindow.document},goog.dom.getFrameContentWindow=function(e){return e.contentWindow||goog.dom.getWindow(goog.dom.getFrameContentDocument(e))},goog.dom.setTextContent=function(e,t){if(goog.asserts.assert(null!=e,"goog.dom.setTextContent expects a non-null value for node"),"textContent"in e)e.textContent=t;else if(e.nodeType==goog.dom.NodeType.TEXT)e.data=t;else if(e.firstChild&&e.firstChild.nodeType==goog.dom.NodeType.TEXT){for(;e.lastChild!=e.firstChild;)e.removeChild(e.lastChild);e.firstChild.data=t}else{goog.dom.removeChildren(e);var n=goog.dom.getOwnerDocument(e);e.appendChild(n.createTextNode(String(t)))}},goog.dom.getOuterHtml=function(e){if("outerHTML"in e)return e.outerHTML;var t=goog.dom.getOwnerDocument(e).createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML},goog.dom.findNode=function(e,t){var n=[];return goog.dom.findNodes_(e,t,n,!0)?n[0]:void 0},goog.dom.findNodes=function(e,t){var n=[];return goog.dom.findNodes_(e,t,n,!1),n},goog.dom.findNodes_=function(e,t,n,i){if(null!=e)for(e=e.firstChild;e;){if(t(e)&&(n.push(e),i)||goog.dom.findNodes_(e,t,n,i))return!0;e=e.nextSibling}return!1},goog.dom.TAGS_TO_IGNORE_={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},goog.dom.PREDEFINED_TAG_VALUES_={IMG:" ",BR:"\n"},goog.dom.isFocusableTabIndex=function(e){return goog.dom.hasSpecifiedTabIndex_(e)&&goog.dom.isTabIndexFocusable_(e)},goog.dom.setFocusableTabIndex=function(e,t){t?e.tabIndex=0:(e.tabIndex=-1,e.removeAttribute("tabIndex"))},goog.dom.isFocusable=function(e){var t;return(t=goog.dom.nativelySupportsFocus_(e)?!e.disabled&&(!goog.dom.hasSpecifiedTabIndex_(e)||goog.dom.isTabIndexFocusable_(e)):goog.dom.isFocusableTabIndex(e))&&goog.userAgent.IE?goog.dom.hasNonZeroBoundingRect_(e):t},goog.dom.hasSpecifiedTabIndex_=function(e){return e=e.getAttributeNode("tabindex"),goog.isDefAndNotNull(e)&&e.specified},goog.dom.isTabIndexFocusable_=function(e){return e=e.tabIndex,goog.isNumber(e)&&e>=0&&32768>e},goog.dom.nativelySupportsFocus_=function(e){return e.tagName==goog.dom.TagName.A||e.tagName==goog.dom.TagName.INPUT||e.tagName==goog.dom.TagName.TEXTAREA||e.tagName==goog.dom.TagName.SELECT||e.tagName==goog.dom.TagName.BUTTON;
},goog.dom.hasNonZeroBoundingRect_=function(e){return e=goog.isFunction(e.getBoundingClientRect)?e.getBoundingClientRect():{height:e.offsetHeight,width:e.offsetWidth},goog.isDefAndNotNull(e)&&0<e.height&&0<e.width},goog.dom.getTextContent=function(e){if(goog.dom.BrowserFeature.CAN_USE_INNER_TEXT&&"innerText"in e)e=goog.string.canonicalizeNewlines(e.innerText);else{var t=[];goog.dom.getTextContent_(e,t,!0),e=t.join("")}return e=e.replace(/ \xAD /g," ").replace(/\xAD/g,""),e=e.replace(/\u200B/g,""),goog.dom.BrowserFeature.CAN_USE_INNER_TEXT||(e=e.replace(/ +/g," "))," "!=e&&(e=e.replace(/^\s*/,"")),e},goog.dom.getRawTextContent=function(e){var t=[];return goog.dom.getTextContent_(e,t,!1),t.join("")},goog.dom.getTextContent_=function(e,t,n){if(!(e.nodeName in goog.dom.TAGS_TO_IGNORE_))if(e.nodeType==goog.dom.NodeType.TEXT)n?t.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):t.push(e.nodeValue);else if(e.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)t.push(goog.dom.PREDEFINED_TAG_VALUES_[e.nodeName]);else for(e=e.firstChild;e;)goog.dom.getTextContent_(e,t,n),e=e.nextSibling},goog.dom.getNodeTextLength=function(e){return goog.dom.getTextContent(e).length},goog.dom.getNodeTextOffset=function(e,t){for(var n=t||goog.dom.getOwnerDocument(e).body,i=[];e&&e!=n;){for(var o=e;o=o.previousSibling;)i.unshift(goog.dom.getTextContent(o));e=e.parentNode}return goog.string.trimLeft(i.join("")).replace(/ +/g," ").length},goog.dom.getNodeAtOffset=function(e,t,n){e=[e];for(var i=0,o=null;0<e.length&&t>i;)if(o=e.pop(),!(o.nodeName in goog.dom.TAGS_TO_IGNORE_))if(o.nodeType==goog.dom.NodeType.TEXT)var r=o.nodeValue.replace(/(\r\n|\r|\n)/g,"").replace(/ +/g," "),i=i+r.length;else if(o.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)i+=goog.dom.PREDEFINED_TAG_VALUES_[o.nodeName].length;else for(r=o.childNodes.length-1;r>=0;r--)e.push(o.childNodes[r]);return goog.isObject(n)&&(n.remainder=o?o.nodeValue.length+t-i-1:0,n.node=o),o},goog.dom.isNodeList=function(e){if(e&&"number"==typeof e.length){if(goog.isObject(e))return"function"==typeof e.item||"string"==typeof e.item;if(goog.isFunction(e))return"function"==typeof e.item}return!1},goog.dom.getAncestorByTagNameAndClass=function(e,t,n,i){if(!t&&!n)return null;var o=t?t.toUpperCase():null;return goog.dom.getAncestor(e,function(e){return(!o||e.nodeName==o)&&(!n||goog.isString(e.className)&&goog.array.contains(e.className.split(/\s+/),n))},!0,i)},goog.dom.getAncestorByClass=function(e,t,n){return goog.dom.getAncestorByTagNameAndClass(e,null,t,n)},goog.dom.getAncestor=function(e,t,n,i){n||(e=e.parentNode),n=null==i;for(var o=0;e&&(n||i>=o);){if(t(e))return e;e=e.parentNode,o++}return null},goog.dom.getActiveElement=function(e){try{return e&&e.activeElement}catch(t){}return null},goog.dom.getPixelRatio=function(){var e=goog.dom.getWindow(),t=goog.userAgent.GECKO&&goog.userAgent.MOBILE;return goog.isDef(e.devicePixelRatio)&&!t?e.devicePixelRatio:e.matchMedia?goog.dom.matchesPixelRatio_(.75)||goog.dom.matchesPixelRatio_(1.5)||goog.dom.matchesPixelRatio_(2)||goog.dom.matchesPixelRatio_(3)||1:1},goog.dom.matchesPixelRatio_=function(e){return goog.dom.getWindow().matchMedia("(-webkit-min-device-pixel-ratio: "+e+"),(min--moz-device-pixel-ratio: "+e+"),(min-resolution: "+e+"dppx)").matches?e:0},goog.dom.DomHelper=function(e){this.document_=e||goog.global.document||document},goog.dom.DomHelper.prototype.getDomHelper=goog.dom.getDomHelper,goog.dom.DomHelper.prototype.setDocument=function(e){this.document_=e},goog.dom.DomHelper.prototype.getDocument=function(){return this.document_},goog.dom.DomHelper.prototype.getElement=function(e){return goog.dom.getElementHelper_(this.document_,e)},goog.dom.DomHelper.prototype.getRequiredElement=function(e){return goog.dom.getRequiredElementHelper_(this.document_,e)},goog.dom.DomHelper.prototype.$=goog.dom.DomHelper.prototype.getElement,goog.dom.DomHelper.prototype.getElementsByTagNameAndClass=function(e,t,n){return goog.dom.getElementsByTagNameAndClass_(this.document_,e,t,n)},goog.dom.DomHelper.prototype.getElementsByClass=function(e,t){return goog.dom.getElementsByClass(e,t||this.document_)},goog.dom.DomHelper.prototype.getElementByClass=function(e,t){return goog.dom.getElementByClass(e,t||this.document_)},goog.dom.DomHelper.prototype.getRequiredElementByClass=function(e,t){return goog.dom.getRequiredElementByClass(e,t||this.document_)},goog.dom.DomHelper.prototype.$$=goog.dom.DomHelper.prototype.getElementsByTagNameAndClass,goog.dom.DomHelper.prototype.setProperties=goog.dom.setProperties,goog.dom.DomHelper.prototype.getViewportSize=function(e){return goog.dom.getViewportSize(e||this.getWindow())},goog.dom.DomHelper.prototype.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(this.getWindow())},goog.dom.DomHelper.prototype.createDom=function(e,t,n){return goog.dom.createDom_(this.document_,arguments)},goog.dom.DomHelper.prototype.$dom=goog.dom.DomHelper.prototype.createDom,goog.dom.DomHelper.prototype.createElement=function(e){return this.document_.createElement(e)},goog.dom.DomHelper.prototype.createTextNode=function(e){return this.document_.createTextNode(String(e))},goog.dom.DomHelper.prototype.createTable=function(e,t,n){return goog.dom.createTable_(this.document_,e,t,!!n)},goog.dom.DomHelper.prototype.safeHtmlToNode=function(e){return goog.dom.safeHtmlToNode_(this.document_,e)},goog.dom.DomHelper.prototype.htmlToDocumentFragment=function(e){return goog.dom.htmlToDocumentFragment_(this.document_,e)},goog.dom.DomHelper.prototype.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(this.document_)},goog.dom.DomHelper.prototype.getWindow=function(){return goog.dom.getWindow_(this.document_)},goog.dom.DomHelper.prototype.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(this.document_)},goog.dom.DomHelper.prototype.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(this.document_)},goog.dom.DomHelper.prototype.getActiveElement=function(e){return goog.dom.getActiveElement(e||this.document_)},goog.dom.DomHelper.prototype.appendChild=goog.dom.appendChild,goog.dom.DomHelper.prototype.append=goog.dom.append,goog.dom.DomHelper.prototype.canHaveChildren=goog.dom.canHaveChildren,goog.dom.DomHelper.prototype.removeChildren=goog.dom.removeChildren,goog.dom.DomHelper.prototype.insertSiblingBefore=goog.dom.insertSiblingBefore,goog.dom.DomHelper.prototype.insertSiblingAfter=goog.dom.insertSiblingAfter,goog.dom.DomHelper.prototype.insertChildAt=goog.dom.insertChildAt,goog.dom.DomHelper.prototype.removeNode=goog.dom.removeNode,goog.dom.DomHelper.prototype.replaceNode=goog.dom.replaceNode,goog.dom.DomHelper.prototype.flattenElement=goog.dom.flattenElement,goog.dom.DomHelper.prototype.getChildren=goog.dom.getChildren,goog.dom.DomHelper.prototype.getFirstElementChild=goog.dom.getFirstElementChild,goog.dom.DomHelper.prototype.getLastElementChild=goog.dom.getLastElementChild,goog.dom.DomHelper.prototype.getNextElementSibling=goog.dom.getNextElementSibling,goog.dom.DomHelper.prototype.getPreviousElementSibling=goog.dom.getPreviousElementSibling,goog.dom.DomHelper.prototype.getNextNode=goog.dom.getNextNode,goog.dom.DomHelper.prototype.getPreviousNode=goog.dom.getPreviousNode,goog.dom.DomHelper.prototype.isNodeLike=goog.dom.isNodeLike,goog.dom.DomHelper.prototype.isElement=goog.dom.isElement,goog.dom.DomHelper.prototype.isWindow=goog.dom.isWindow,goog.dom.DomHelper.prototype.getParentElement=goog.dom.getParentElement,goog.dom.DomHelper.prototype.contains=goog.dom.contains,goog.dom.DomHelper.prototype.compareNodeOrder=goog.dom.compareNodeOrder,goog.dom.DomHelper.prototype.findCommonAncestor=goog.dom.findCommonAncestor,goog.dom.DomHelper.prototype.getOwnerDocument=goog.dom.getOwnerDocument,goog.dom.DomHelper.prototype.getFrameContentDocument=goog.dom.getFrameContentDocument,goog.dom.DomHelper.prototype.getFrameContentWindow=goog.dom.getFrameContentWindow,goog.dom.DomHelper.prototype.setTextContent=goog.dom.setTextContent,goog.dom.DomHelper.prototype.getOuterHtml=goog.dom.getOuterHtml,goog.dom.DomHelper.prototype.findNode=goog.dom.findNode,goog.dom.DomHelper.prototype.findNodes=goog.dom.findNodes,goog.dom.DomHelper.prototype.isFocusableTabIndex=goog.dom.isFocusableTabIndex,goog.dom.DomHelper.prototype.setFocusableTabIndex=goog.dom.setFocusableTabIndex,goog.dom.DomHelper.prototype.isFocusable=goog.dom.isFocusable,goog.dom.DomHelper.prototype.getTextContent=goog.dom.getTextContent,goog.dom.DomHelper.prototype.getNodeTextLength=goog.dom.getNodeTextLength,goog.dom.DomHelper.prototype.getNodeTextOffset=goog.dom.getNodeTextOffset,goog.dom.DomHelper.prototype.getNodeAtOffset=goog.dom.getNodeAtOffset,goog.dom.DomHelper.prototype.isNodeList=goog.dom.isNodeList,goog.dom.DomHelper.prototype.getAncestorByTagNameAndClass=goog.dom.getAncestorByTagNameAndClass,goog.dom.DomHelper.prototype.getAncestorByClass=goog.dom.getAncestorByClass,goog.dom.DomHelper.prototype.getAncestor=goog.dom.getAncestor,goog.json={},goog.json.USE_NATIVE_JSON=!1,goog.json.isValid=function(e){return/^\s*$/.test(e)?!1:/^[\],:{}\s\u2028\u2029]*$/.test(e.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""))},goog.json.parse=goog.json.USE_NATIVE_JSON?goog.global.JSON.parse:function(a){if(a=String(a),goog.json.isValid(a))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a)},goog.json.unsafeParse=goog.json.USE_NATIVE_JSON?goog.global.JSON.parse:function(a){return eval("("+a+")")},goog.json.serialize=goog.json.USE_NATIVE_JSON?goog.global.JSON.stringify:function(e,t){return new goog.json.Serializer(t).serialize(e)},goog.json.Serializer=function(e){this.replacer_=e},goog.json.Serializer.prototype.serialize=function(e){var t=[];return this.serializeInternal(e,t),t.join("")},goog.json.Serializer.prototype.serializeInternal=function(e,t){switch(typeof e){case"string":this.serializeString_(e,t);break;case"number":this.serializeNumber_(e,t);break;case"boolean":t.push(e);break;case"undefined":t.push("null");break;case"object":if(null==e){t.push("null");break}if(goog.isArray(e)){this.serializeArray(e,t);break}this.serializeObject_(e,t);break;case"function":break;default:throw Error("Unknown type: "+typeof e)}},goog.json.Serializer.charToJsonCharCache_={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\x0B":"\\u000b"},goog.json.Serializer.charsToReplace_=/\uffff/.test("￿")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,goog.json.Serializer.prototype.serializeString_=function(e,t){t.push('"',e.replace(goog.json.Serializer.charsToReplace_,function(e){if(e in goog.json.Serializer.charToJsonCharCache_)return goog.json.Serializer.charToJsonCharCache_[e];var t=e.charCodeAt(0),n="\\u";return 16>t?n+="000":256>t?n+="00":4096>t&&(n+="0"),goog.json.Serializer.charToJsonCharCache_[e]=n+t.toString(16)}),'"')},goog.json.Serializer.prototype.serializeNumber_=function(e,t){t.push(isFinite(e)&&!isNaN(e)?e:"null")},goog.json.Serializer.prototype.serializeArray=function(e,t){var n=e.length;t.push("[");for(var i="",o=0;n>o;o++)t.push(i),i=e[o],this.serializeInternal(this.replacer_?this.replacer_.call(e,String(o),i):i,t),i=",";t.push("]")},goog.json.Serializer.prototype.serializeObject_=function(e,t){t.push("{");var n,i="";for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=e[n];"function"!=typeof o&&(t.push(i),this.serializeString_(n,t),t.push(":"),this.serializeInternal(this.replacer_?this.replacer_.call(e,n,o):o,t),i=",")}t.push("}")},goog.proto2.ObjectSerializer=function(e){this.keyOption_=e},goog.inherits(goog.proto2.ObjectSerializer,goog.proto2.Serializer),goog.proto2.ObjectSerializer.KeyOption={TAG:0,NAME:1},goog.proto2.ObjectSerializer.prototype.serialize=function(e){for(var t=e.getDescriptor().getFields(),n={},i=0;i<t.length;i++){var o=t[i],r=this.keyOption_==goog.proto2.ObjectSerializer.KeyOption.NAME?o.getName():o.getTag();if(e.has(o))if(o.isRepeated()){var a=[];for(n[r]=a,r=0;r<e.countOf(o);r++)a.push(this.getSerializedValue(o,e.get(o,r)))}else n[r]=this.getSerializedValue(o,e.get(o))}return e.forEachUnknown(function(e,t){n[e]=t}),n},goog.proto2.ObjectSerializer.prototype.getDeserializedValue=function(e,t){return e.getFieldType()==goog.proto2.FieldDescriptor.FieldType.BOOL&&goog.isNumber(t)?Boolean(t):goog.proto2.ObjectSerializer.superClass_.getDeserializedValue.call(this,e,t)},goog.proto2.ObjectSerializer.prototype.deserializeTo=function(e,t){var n,i=e.getDescriptor();for(n in t){var o,r=t[n],a=goog.string.isNumeric(n);if(a?o=i.findFieldByTag(n):(goog.asserts.assert(this.keyOption_==goog.proto2.ObjectSerializer.KeyOption.NAME),o=i.findFieldByName(n)),o)if(o.isRepeated())for(goog.asserts.assert(goog.isArray(r)),a=0;a<r.length;a++)e.add(o,this.getDeserializedValue(o,r[a]));else goog.asserts.assert(!goog.isArray(r)),e.set(o,this.getDeserializedValue(o,r));else a?e.setUnknown(Number(n),r):goog.asserts.assert(o)}};var i18n={phonenumbers:{}};return i18n.phonenumbers.RegionCode={UN001:"001",AD:"AD",AE:"AE",AO:"AO",AQ:"AQ",AR:"AR",AU:"AU",BB:"BB",BR:"BR",BS:"BS",BY:"BY",CA:"CA",CH:"CH",CN:"CN",CS:"CS",CX:"CX",DE:"DE",GB:"GB",HU:"HU",IT:"IT",JP:"JP",KR:"KR",MX:"MX",NZ:"NZ",PL:"PL",RE:"RE",SE:"SE",SG:"SG",US:"US",YT:"YT",ZW:"ZW",ZZ:"ZZ"},i18n.phonenumbers.NumberFormat=function(){goog.proto2.Message.apply(this)},goog.inherits(i18n.phonenumbers.NumberFormat,goog.proto2.Message),i18n.phonenumbers.NumberFormat.prototype.getPattern=function(){return this.get$Value(1)},i18n.phonenumbers.NumberFormat.prototype.getPatternOrDefault=function(){return this.get$ValueOrDefault(1)},i18n.phonenumbers.NumberFormat.prototype.setPattern=function(e){this.set$Value(1,e)},i18n.phonenumbers.NumberFormat.prototype.hasPattern=function(){return this.has$Value(1)},i18n.phonenumbers.NumberFormat.prototype.patternCount=function(){return this.count$Values(1)},i18n.phonenumbers.NumberFormat.prototype.clearPattern=function(){this.clear$Field(1)},i18n.phonenumbers.NumberFormat.prototype.getFormat=function(){return this.get$Value(2)},i18n.phonenumbers.NumberFormat.prototype.getFormatOrDefault=function(){return this.get$ValueOrDefault(2)},i18n.phonenumbers.NumberFormat.prototype.setFormat=function(e){this.set$Value(2,e)},i18n.phonenumbers.NumberFormat.prototype.hasFormat=function(){return this.has$Value(2)},i18n.phonenumbers.NumberFormat.prototype.formatCount=function(){return this.count$Values(2)},i18n.phonenumbers.NumberFormat.prototype.clearFormat=function(){this.clear$Field(2)},i18n.phonenumbers.NumberFormat.prototype.getLeadingDigitsPattern=function(e){return this.get$Value(3,e)},i18n.phonenumbers.NumberFormat.prototype.getLeadingDigitsPatternOrDefault=function(e){return this.get$ValueOrDefault(3,e)},i18n.phonenumbers.NumberFormat.prototype.addLeadingDigitsPattern=function(e){this.add$Value(3,e)},i18n.phonenumbers.NumberFormat.prototype.leadingDigitsPatternArray=function(){return this.array$Values(3)},i18n.phonenumbers.NumberFormat.prototype.hasLeadingDigitsPattern=function(){return this.has$Value(3)},i18n.phonenumbers.NumberFormat.prototype.leadingDigitsPatternCount=function(){return this.count$Values(3)},i18n.phonenumbers.NumberFormat.prototype.clearLeadingDigitsPattern=function(){this.clear$Field(3)},i18n.phonenumbers.NumberFormat.prototype.getNationalPrefixFormattingRule=function(){return this.get$Value(4)},i18n.phonenumbers.NumberFormat.prototype.getNationalPrefixFormattingRuleOrDefault=function(){return this.get$ValueOrDefault(4)},i18n.phonenumbers.NumberFormat.prototype.setNationalPrefixFormattingRule=function(e){this.set$Value(4,e)},i18n.phonenumbers.NumberFormat.prototype.hasNationalPrefixFormattingRule=function(){return this.has$Value(4)},i18n.phonenumbers.NumberFormat.prototype.nationalPrefixFormattingRuleCount=function(){return this.count$Values(4)},i18n.phonenumbers.NumberFormat.prototype.clearNationalPrefixFormattingRule=function(){this.clear$Field(4)},i18n.phonenumbers.NumberFormat.prototype.getNationalPrefixOptionalWhenFormatting=function(){return this.get$Value(6)},i18n.phonenumbers.NumberFormat.prototype.getNationalPrefixOptionalWhenFormattingOrDefault=function(){return this.get$ValueOrDefault(6)},i18n.phonenumbers.NumberFormat.prototype.setNationalPrefixOptionalWhenFormatting=function(e){this.set$Value(6,e)},i18n.phonenumbers.NumberFormat.prototype.hasNationalPrefixOptionalWhenFormatting=function(){return this.has$Value(6)},i18n.phonenumbers.NumberFormat.prototype.nationalPrefixOptionalWhenFormattingCount=function(){return this.count$Values(6)},i18n.phonenumbers.NumberFormat.prototype.clearNationalPrefixOptionalWhenFormatting=function(){this.clear$Field(6)},i18n.phonenumbers.NumberFormat.prototype.getDomesticCarrierCodeFormattingRule=function(){return this.get$Value(5)},i18n.phonenumbers.NumberFormat.prototype.getDomesticCarrierCodeFormattingRuleOrDefault=function(){return this.get$ValueOrDefault(5)},i18n.phonenumbers.NumberFormat.prototype.setDomesticCarrierCodeFormattingRule=function(e){this.set$Value(5,e)},i18n.phonenumbers.NumberFormat.prototype.hasDomesticCarrierCodeFormattingRule=function(){return this.has$Value(5)},i18n.phonenumbers.NumberFormat.prototype.domesticCarrierCodeFormattingRuleCount=function(){return this.count$Values(5)},i18n.phonenumbers.NumberFormat.prototype.clearDomesticCarrierCodeFormattingRule=function(){this.clear$Field(5)},i18n.phonenumbers.PhoneNumberDesc=function(){goog.proto2.Message.apply(this)},goog.inherits(i18n.phonenumbers.PhoneNumberDesc,goog.proto2.Message),i18n.phonenumbers.PhoneNumberDesc.prototype.getNationalNumberPattern=function(){return this.get$Value(2)},i18n.phonenumbers.PhoneNumberDesc.prototype.getNationalNumberPatternOrDefault=function(){return this.get$ValueOrDefault(2)},i18n.phonenumbers.PhoneNumberDesc.prototype.setNationalNumberPattern=function(e){this.set$Value(2,e)},i18n.phonenumbers.PhoneNumberDesc.prototype.hasNationalNumberPattern=function(){return this.has$Value(2)},i18n.phonenumbers.PhoneNumberDesc.prototype.nationalNumberPatternCount=function(){return this.count$Values(2)},i18n.phonenumbers.PhoneNumberDesc.prototype.clearNationalNumberPattern=function(){this.clear$Field(2)},i18n.phonenumbers.PhoneNumberDesc.prototype.getPossibleNumberPattern=function(){return this.get$Value(3)},i18n.phonenumbers.PhoneNumberDesc.prototype.getPossibleNumberPatternOrDefault=function(){return this.get$ValueOrDefault(3)},i18n.phonenumbers.PhoneNumberDesc.prototype.setPossibleNumberPattern=function(e){this.set$Value(3,e)},i18n.phonenumbers.PhoneNumberDesc.prototype.hasPossibleNumberPattern=function(){return this.has$Value(3)},i18n.phonenumbers.PhoneNumberDesc.prototype.possibleNumberPatternCount=function(){return this.count$Values(3)},i18n.phonenumbers.PhoneNumberDesc.prototype.clearPossibleNumberPattern=function(){this.clear$Field(3)},i18n.phonenumbers.PhoneNumberDesc.prototype.getExampleNumber=function(){return this.get$Value(6)},i18n.phonenumbers.PhoneNumberDesc.prototype.getExampleNumberOrDefault=function(){return this.get$ValueOrDefault(6)},i18n.phonenumbers.PhoneNumberDesc.prototype.setExampleNumber=function(e){this.set$Value(6,e)},i18n.phonenumbers.PhoneNumberDesc.prototype.hasExampleNumber=function(){return this.has$Value(6)},i18n.phonenumbers.PhoneNumberDesc.prototype.exampleNumberCount=function(){return this.count$Values(6)},i18n.phonenumbers.PhoneNumberDesc.prototype.clearExampleNumber=function(){this.clear$Field(6)},i18n.phonenumbers.PhoneMetadata=function(){goog.proto2.Message.apply(this)},goog.inherits(i18n.phonenumbers.PhoneMetadata,goog.proto2.Message),i18n.phonenumbers.PhoneMetadata.prototype.getGeneralDesc=function(){return this.get$Value(1)},i18n.phonenumbers.PhoneMetadata.prototype.getGeneralDescOrDefault=function(){return this.get$ValueOrDefault(1)},i18n.phonenumbers.PhoneMetadata.prototype.setGeneralDesc=function(e){this.set$Value(1,e)},i18n.phonenumbers.PhoneMetadata.prototype.hasGeneralDesc=function(){return this.has$Value(1)},i18n.phonenumbers.PhoneMetadata.prototype.generalDescCount=function(){return this.count$Values(1)},i18n.phonenumbers.PhoneMetadata.prototype.clearGeneralDesc=function(){this.clear$Field(1)},i18n.phonenumbers.PhoneMetadata.prototype.getFixedLine=function(){return this.get$Value(2)},i18n.phonenumbers.PhoneMetadata.prototype.getFixedLineOrDefault=function(){return this.get$ValueOrDefault(2)},i18n.phonenumbers.PhoneMetadata.prototype.setFixedLine=function(e){this.set$Value(2,e)},i18n.phonenumbers.PhoneMetadata.prototype.hasFixedLine=function(){return this.has$Value(2)},i18n.phonenumbers.PhoneMetadata.prototype.fixedLineCount=function(){return this.count$Values(2)},i18n.phonenumbers.PhoneMetadata.prototype.clearFixedLine=function(){this.clear$Field(2)},i18n.phonenumbers.PhoneMetadata.prototype.getMobile=function(){return this.get$Value(3)},i18n.phonenumbers.PhoneMetadata.prototype.getMobileOrDefault=function(){return this.get$ValueOrDefault(3)},i18n.phonenumbers.PhoneMetadata.prototype.setMobile=function(e){this.set$Value(3,e)},i18n.phonenumbers.PhoneMetadata.prototype.hasMobile=function(){return this.has$Value(3)},i18n.phonenumbers.PhoneMetadata.prototype.mobileCount=function(){return this.count$Values(3)},i18n.phonenumbers.PhoneMetadata.prototype.clearMobile=function(){this.clear$Field(3)},i18n.phonenumbers.PhoneMetadata.prototype.getTollFree=function(){return this.get$Value(4)},i18n.phonenumbers.PhoneMetadata.prototype.getTollFreeOrDefault=function(){return this.get$ValueOrDefault(4)},i18n.phonenumbers.PhoneMetadata.prototype.setTollFree=function(e){this.set$Value(4,e)},i18n.phonenumbers.PhoneMetadata.prototype.hasTollFree=function(){return this.has$Value(4)},i18n.phonenumbers.PhoneMetadata.prototype.tollFreeCount=function(){return this.count$Values(4)},i18n.phonenumbers.PhoneMetadata.prototype.clearTollFree=function(){this.clear$Field(4)},i18n.phonenumbers.PhoneMetadata.prototype.getPremiumRate=function(){return this.get$Value(5)},i18n.phonenumbers.PhoneMetadata.prototype.getPremiumRateOrDefault=function(){return this.get$ValueOrDefault(5)},i18n.phonenumbers.PhoneMetadata.prototype.setPremiumRate=function(e){this.set$Value(5,e)},i18n.phonenumbers.PhoneMetadata.prototype.hasPremiumRate=function(){return this.has$Value(5)},i18n.phonenumbers.PhoneMetadata.prototype.premiumRateCount=function(){return this.count$Values(5)},i18n.phonenumbers.PhoneMetadata.prototype.clearPremiumRate=function(){this.clear$Field(5)},i18n.phonenumbers.PhoneMetadata.prototype.getSharedCost=function(){return this.get$Value(6)},i18n.phonenumbers.PhoneMetadata.prototype.getSharedCostOrDefault=function(){return this.get$ValueOrDefault(6)},i18n.phonenumbers.PhoneMetadata.prototype.setSharedCost=function(e){this.set$Value(6,e)},i18n.phonenumbers.PhoneMetadata.prototype.hasSharedCost=function(){return this.has$Value(6)},i18n.phonenumbers.PhoneMetadata.prototype.sharedCostCount=function(){return this.count$Values(6)},i18n.phonenumbers.PhoneMetadata.prototype.clearSharedCost=function(){this.clear$Field(6)},i18n.phonenumbers.PhoneMetadata.prototype.getPersonalNumber=function(){return this.get$Value(7)},i18n.phonenumbers.PhoneMetadata.prototype.getPersonalNumberOrDefault=function(){return this.get$ValueOrDefault(7)},i18n.phonenumbers.PhoneMetadata.prototype.setPersonalNumber=function(e){this.set$Value(7,e)},i18n.phonenumbers.PhoneMetadata.prototype.hasPersonalNumber=function(){return this.has$Value(7)},i18n.phonenumbers.PhoneMetadata.prototype.personalNumberCount=function(){return this.count$Values(7)},i18n.phonenumbers.PhoneMetadata.prototype.clearPersonalNumber=function(){this.clear$Field(7)},i18n.phonenumbers.PhoneMetadata.prototype.getVoip=function(){return this.get$Value(8)},i18n.phonenumbers.PhoneMetadata.prototype.getVoipOrDefault=function(){return this.get$ValueOrDefault(8)},i18n.phonenumbers.PhoneMetadata.prototype.setVoip=function(e){this.set$Value(8,e)},i18n.phonenumbers.PhoneMetadata.prototype.hasVoip=function(){return this.has$Value(8)},i18n.phonenumbers.PhoneMetadata.prototype.voipCount=function(){return this.count$Values(8)},i18n.phonenumbers.PhoneMetadata.prototype.clearVoip=function(){this.clear$Field(8)},i18n.phonenumbers.PhoneMetadata.prototype.getPager=function(){return this.get$Value(21)},i18n.phonenumbers.PhoneMetadata.prototype.getPagerOrDefault=function(){return this.get$ValueOrDefault(21)},i18n.phonenumbers.PhoneMetadata.prototype.setPager=function(e){this.set$Value(21,e)},i18n.phonenumbers.PhoneMetadata.prototype.hasPager=function(){return this.has$Value(21)},i18n.phonenumbers.PhoneMetadata.prototype.pagerCount=function(){return this.count$Values(21)},i18n.phonenumbers.PhoneMetadata.prototype.clearPager=function(){this.clear$Field(21)},i18n.phonenumbers.PhoneMetadata.prototype.getUan=function(){return this.get$Value(25)},i18n.phonenumbers.PhoneMetadata.prototype.getUanOrDefault=function(){return this.get$ValueOrDefault(25)},i18n.phonenumbers.PhoneMetadata.prototype.setUan=function(e){this.set$Value(25,e)},i18n.phonenumbers.PhoneMetadata.prototype.hasUan=function(){return this.has$Value(25)},i18n.phonenumbers.PhoneMetadata.prototype.uanCount=function(){return this.count$Values(25)},i18n.phonenumbers.PhoneMetadata.prototype.clearUan=function(){this.clear$Field(25)},i18n.phonenumbers.PhoneMetadata.prototype.getEmergency=function(){return this.get$Value(27)},i18n.phonenumbers.PhoneMetadata.prototype.getEmergencyOrDefault=function(){return this.get$ValueOrDefault(27)},i18n.phonenumbers.PhoneMetadata.prototype.setEmergency=function(e){this.set$Value(27,e)},i18n.phonenumbers.PhoneMetadata.prototype.hasEmergency=function(){return this.has$Value(27)},i18n.phonenumbers.PhoneMetadata.prototype.emergencyCount=function(){return this.count$Values(27)},i18n.phonenumbers.PhoneMetadata.prototype.clearEmergency=function(){this.clear$Field(27)},i18n.phonenumbers.PhoneMetadata.prototype.getVoicemail=function(){return this.get$Value(28)},i18n.phonenumbers.PhoneMetadata.prototype.getVoicemailOrDefault=function(){return this.get$ValueOrDefault(28)},i18n.phonenumbers.PhoneMetadata.prototype.setVoicemail=function(e){this.set$Value(28,e)},i18n.phonenumbers.PhoneMetadata.prototype.hasVoicemail=function(){return this.has$Value(28)},i18n.phonenumbers.PhoneMetadata.prototype.voicemailCount=function(){return this.count$Values(28)},i18n.phonenumbers.PhoneMetadata.prototype.clearVoicemail=function(){this.clear$Field(28)},i18n.phonenumbers.PhoneMetadata.prototype.getNoInternationalDialling=function(){return this.get$Value(24)},i18n.phonenumbers.PhoneMetadata.prototype.getNoInternationalDiallingOrDefault=function(){return this.get$ValueOrDefault(24)},i18n.phonenumbers.PhoneMetadata.prototype.setNoInternationalDialling=function(e){this.set$Value(24,e)},i18n.phonenumbers.PhoneMetadata.prototype.hasNoInternationalDialling=function(){return this.has$Value(24)},i18n.phonenumbers.PhoneMetadata.prototype.noInternationalDiallingCount=function(){return this.count$Values(24)},i18n.phonenumbers.PhoneMetadata.prototype.clearNoInternationalDialling=function(){this.clear$Field(24)},i18n.phonenumbers.PhoneMetadata.prototype.getId=function(){return this.get$Value(9)},i18n.phonenumbers.PhoneMetadata.prototype.getIdOrDefault=function(){return this.get$ValueOrDefault(9)},i18n.phonenumbers.PhoneMetadata.prototype.setId=function(e){this.set$Value(9,e)},i18n.phonenumbers.PhoneMetadata.prototype.hasId=function(){return this.has$Value(9)},i18n.phonenumbers.PhoneMetadata.prototype.idCount=function(){return this.count$Values(9)},i18n.phonenumbers.PhoneMetadata.prototype.clearId=function(){this.clear$Field(9)},i18n.phonenumbers.PhoneMetadata.prototype.getCountryCode=function(){return this.get$Value(10)},i18n.phonenumbers.PhoneMetadata.prototype.getCountryCodeOrDefault=function(){return this.get$ValueOrDefault(10)},i18n.phonenumbers.PhoneMetadata.prototype.setCountryCode=function(e){this.set$Value(10,e)},i18n.phonenumbers.PhoneMetadata.prototype.hasCountryCode=function(){return this.has$Value(10)},i18n.phonenumbers.PhoneMetadata.prototype.countryCodeCount=function(){return this.count$Values(10)},i18n.phonenumbers.PhoneMetadata.prototype.clearCountryCode=function(){this.clear$Field(10)},i18n.phonenumbers.PhoneMetadata.prototype.getInternationalPrefix=function(){return this.get$Value(11)},i18n.phonenumbers.PhoneMetadata.prototype.getInternationalPrefixOrDefault=function(){return this.get$ValueOrDefault(11)},i18n.phonenumbers.PhoneMetadata.prototype.setInternationalPrefix=function(e){this.set$Value(11,e)},i18n.phonenumbers.PhoneMetadata.prototype.hasInternationalPrefix=function(){return this.has$Value(11)},i18n.phonenumbers.PhoneMetadata.prototype.internationalPrefixCount=function(){return this.count$Values(11)},i18n.phonenumbers.PhoneMetadata.prototype.clearInternationalPrefix=function(){this.clear$Field(11)},i18n.phonenumbers.PhoneMetadata.prototype.getPreferredInternationalPrefix=function(){return this.get$Value(17)},i18n.phonenumbers.PhoneMetadata.prototype.getPreferredInternationalPrefixOrDefault=function(){return this.get$ValueOrDefault(17)},i18n.phonenumbers.PhoneMetadata.prototype.setPreferredInternationalPrefix=function(e){this.set$Value(17,e)},i18n.phonenumbers.PhoneMetadata.prototype.hasPreferredInternationalPrefix=function(){return this.has$Value(17)},i18n.phonenumbers.PhoneMetadata.prototype.preferredInternationalPrefixCount=function(){return this.count$Values(17)},i18n.phonenumbers.PhoneMetadata.prototype.clearPreferredInternationalPrefix=function(){this.clear$Field(17)},i18n.phonenumbers.PhoneMetadata.prototype.getNationalPrefix=function(){return this.get$Value(12)},i18n.phonenumbers.PhoneMetadata.prototype.getNationalPrefixOrDefault=function(){return this.get$ValueOrDefault(12)},i18n.phonenumbers.PhoneMetadata.prototype.setNationalPrefix=function(e){this.set$Value(12,e)},i18n.phonenumbers.PhoneMetadata.prototype.hasNationalPrefix=function(){return this.has$Value(12)},i18n.phonenumbers.PhoneMetadata.prototype.nationalPrefixCount=function(){return this.count$Values(12)},i18n.phonenumbers.PhoneMetadata.prototype.clearNationalPrefix=function(){this.clear$Field(12)},i18n.phonenumbers.PhoneMetadata.prototype.getPreferredExtnPrefix=function(){return this.get$Value(13)},i18n.phonenumbers.PhoneMetadata.prototype.getPreferredExtnPrefixOrDefault=function(){return this.get$ValueOrDefault(13)},i18n.phonenumbers.PhoneMetadata.prototype.setPreferredExtnPrefix=function(e){this.set$Value(13,e)},i18n.phonenumbers.PhoneMetadata.prototype.hasPreferredExtnPrefix=function(){return this.has$Value(13)},i18n.phonenumbers.PhoneMetadata.prototype.preferredExtnPrefixCount=function(){return this.count$Values(13)},i18n.phonenumbers.PhoneMetadata.prototype.clearPreferredExtnPrefix=function(){this.clear$Field(13)},i18n.phonenumbers.PhoneMetadata.prototype.getNationalPrefixForParsing=function(){return this.get$Value(15)},i18n.phonenumbers.PhoneMetadata.prototype.getNationalPrefixForParsingOrDefault=function(){return this.get$ValueOrDefault(15)},i18n.phonenumbers.PhoneMetadata.prototype.setNationalPrefixForParsing=function(e){this.set$Value(15,e)},i18n.phonenumbers.PhoneMetadata.prototype.hasNationalPrefixForParsing=function(){return this.has$Value(15)},i18n.phonenumbers.PhoneMetadata.prototype.nationalPrefixForParsingCount=function(){return this.count$Values(15)},i18n.phonenumbers.PhoneMetadata.prototype.clearNationalPrefixForParsing=function(){this.clear$Field(15)},i18n.phonenumbers.PhoneMetadata.prototype.getNationalPrefixTransformRule=function(){return this.get$Value(16)},i18n.phonenumbers.PhoneMetadata.prototype.getNationalPrefixTransformRuleOrDefault=function(){return this.get$ValueOrDefault(16)},i18n.phonenumbers.PhoneMetadata.prototype.setNationalPrefixTransformRule=function(e){this.set$Value(16,e)},i18n.phonenumbers.PhoneMetadata.prototype.hasNationalPrefixTransformRule=function(){return this.has$Value(16)},i18n.phonenumbers.PhoneMetadata.prototype.nationalPrefixTransformRuleCount=function(){return this.count$Values(16)},i18n.phonenumbers.PhoneMetadata.prototype.clearNationalPrefixTransformRule=function(){
this.clear$Field(16)},i18n.phonenumbers.PhoneMetadata.prototype.getSameMobileAndFixedLinePattern=function(){return this.get$Value(18)},i18n.phonenumbers.PhoneMetadata.prototype.getSameMobileAndFixedLinePatternOrDefault=function(){return this.get$ValueOrDefault(18)},i18n.phonenumbers.PhoneMetadata.prototype.setSameMobileAndFixedLinePattern=function(e){this.set$Value(18,e)},i18n.phonenumbers.PhoneMetadata.prototype.hasSameMobileAndFixedLinePattern=function(){return this.has$Value(18)},i18n.phonenumbers.PhoneMetadata.prototype.sameMobileAndFixedLinePatternCount=function(){return this.count$Values(18)},i18n.phonenumbers.PhoneMetadata.prototype.clearSameMobileAndFixedLinePattern=function(){this.clear$Field(18)},i18n.phonenumbers.PhoneMetadata.prototype.getNumberFormat=function(e){return this.get$Value(19,e)},i18n.phonenumbers.PhoneMetadata.prototype.getNumberFormatOrDefault=function(e){return this.get$ValueOrDefault(19,e)},i18n.phonenumbers.PhoneMetadata.prototype.addNumberFormat=function(e){this.add$Value(19,e)},i18n.phonenumbers.PhoneMetadata.prototype.numberFormatArray=function(){return this.array$Values(19)},i18n.phonenumbers.PhoneMetadata.prototype.hasNumberFormat=function(){return this.has$Value(19)},i18n.phonenumbers.PhoneMetadata.prototype.numberFormatCount=function(){return this.count$Values(19)},i18n.phonenumbers.PhoneMetadata.prototype.clearNumberFormat=function(){this.clear$Field(19)},i18n.phonenumbers.PhoneMetadata.prototype.getIntlNumberFormat=function(e){return this.get$Value(20,e)},i18n.phonenumbers.PhoneMetadata.prototype.getIntlNumberFormatOrDefault=function(e){return this.get$ValueOrDefault(20,e)},i18n.phonenumbers.PhoneMetadata.prototype.addIntlNumberFormat=function(e){this.add$Value(20,e)},i18n.phonenumbers.PhoneMetadata.prototype.intlNumberFormatArray=function(){return this.array$Values(20)},i18n.phonenumbers.PhoneMetadata.prototype.hasIntlNumberFormat=function(){return this.has$Value(20)},i18n.phonenumbers.PhoneMetadata.prototype.intlNumberFormatCount=function(){return this.count$Values(20)},i18n.phonenumbers.PhoneMetadata.prototype.clearIntlNumberFormat=function(){this.clear$Field(20)},i18n.phonenumbers.PhoneMetadata.prototype.getMainCountryForCode=function(){return this.get$Value(22)},i18n.phonenumbers.PhoneMetadata.prototype.getMainCountryForCodeOrDefault=function(){return this.get$ValueOrDefault(22)},i18n.phonenumbers.PhoneMetadata.prototype.setMainCountryForCode=function(e){this.set$Value(22,e)},i18n.phonenumbers.PhoneMetadata.prototype.hasMainCountryForCode=function(){return this.has$Value(22)},i18n.phonenumbers.PhoneMetadata.prototype.mainCountryForCodeCount=function(){return this.count$Values(22)},i18n.phonenumbers.PhoneMetadata.prototype.clearMainCountryForCode=function(){this.clear$Field(22)},i18n.phonenumbers.PhoneMetadata.prototype.getLeadingDigits=function(){return this.get$Value(23)},i18n.phonenumbers.PhoneMetadata.prototype.getLeadingDigitsOrDefault=function(){return this.get$ValueOrDefault(23)},i18n.phonenumbers.PhoneMetadata.prototype.setLeadingDigits=function(e){this.set$Value(23,e)},i18n.phonenumbers.PhoneMetadata.prototype.hasLeadingDigits=function(){return this.has$Value(23)},i18n.phonenumbers.PhoneMetadata.prototype.leadingDigitsCount=function(){return this.count$Values(23)},i18n.phonenumbers.PhoneMetadata.prototype.clearLeadingDigits=function(){this.clear$Field(23)},i18n.phonenumbers.PhoneMetadata.prototype.getLeadingZeroPossible=function(){return this.get$Value(26)},i18n.phonenumbers.PhoneMetadata.prototype.getLeadingZeroPossibleOrDefault=function(){return this.get$ValueOrDefault(26)},i18n.phonenumbers.PhoneMetadata.prototype.setLeadingZeroPossible=function(e){this.set$Value(26,e)},i18n.phonenumbers.PhoneMetadata.prototype.hasLeadingZeroPossible=function(){return this.has$Value(26)},i18n.phonenumbers.PhoneMetadata.prototype.leadingZeroPossibleCount=function(){return this.count$Values(26)},i18n.phonenumbers.PhoneMetadata.prototype.clearLeadingZeroPossible=function(){this.clear$Field(26)},i18n.phonenumbers.PhoneMetadataCollection=function(){goog.proto2.Message.apply(this)},goog.inherits(i18n.phonenumbers.PhoneMetadataCollection,goog.proto2.Message),i18n.phonenumbers.PhoneMetadataCollection.prototype.getMetadata=function(e){return this.get$Value(1,e)},i18n.phonenumbers.PhoneMetadataCollection.prototype.getMetadataOrDefault=function(e){return this.get$ValueOrDefault(1,e)},i18n.phonenumbers.PhoneMetadataCollection.prototype.addMetadata=function(e){this.add$Value(1,e)},i18n.phonenumbers.PhoneMetadataCollection.prototype.metadataArray=function(){return this.array$Values(1)},i18n.phonenumbers.PhoneMetadataCollection.prototype.hasMetadata=function(){return this.has$Value(1)},i18n.phonenumbers.PhoneMetadataCollection.prototype.metadataCount=function(){return this.count$Values(1)},i18n.phonenumbers.PhoneMetadataCollection.prototype.clearMetadata=function(){this.clear$Field(1)},goog.proto2.Message.set$Metadata(i18n.phonenumbers.NumberFormat,{0:{name:"NumberFormat",fullName:"i18n.phonenumbers.NumberFormat"},1:{name:"pattern",required:!0,fieldType:goog.proto2.Message.FieldType.STRING,type:String},2:{name:"format",required:!0,fieldType:goog.proto2.Message.FieldType.STRING,type:String},3:{name:"leading_digits_pattern",repeated:!0,fieldType:goog.proto2.Message.FieldType.STRING,type:String},4:{name:"national_prefix_formatting_rule",fieldType:goog.proto2.Message.FieldType.STRING,type:String},6:{name:"national_prefix_optional_when_formatting",fieldType:goog.proto2.Message.FieldType.BOOL,type:Boolean},5:{name:"domestic_carrier_code_formatting_rule",fieldType:goog.proto2.Message.FieldType.STRING,type:String}}),goog.proto2.Message.set$Metadata(i18n.phonenumbers.PhoneNumberDesc,{0:{name:"PhoneNumberDesc",fullName:"i18n.phonenumbers.PhoneNumberDesc"},2:{name:"national_number_pattern",fieldType:goog.proto2.Message.FieldType.STRING,type:String},3:{name:"possible_number_pattern",fieldType:goog.proto2.Message.FieldType.STRING,type:String},6:{name:"example_number",fieldType:goog.proto2.Message.FieldType.STRING,type:String}}),goog.proto2.Message.set$Metadata(i18n.phonenumbers.PhoneMetadata,{0:{name:"PhoneMetadata",fullName:"i18n.phonenumbers.PhoneMetadata"},1:{name:"general_desc",required:!0,fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},2:{name:"fixed_line",required:!0,fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},3:{name:"mobile",required:!0,fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},4:{name:"toll_free",required:!0,fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},5:{name:"premium_rate",required:!0,fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},6:{name:"shared_cost",required:!0,fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},7:{name:"personal_number",required:!0,fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},8:{name:"voip",required:!0,fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},21:{name:"pager",required:!0,fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},25:{name:"uan",required:!0,fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},27:{name:"emergency",required:!0,fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},28:{name:"voicemail",required:!0,fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},24:{name:"no_international_dialling",required:!0,fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},9:{name:"id",required:!0,fieldType:goog.proto2.Message.FieldType.STRING,type:String},10:{name:"country_code",required:!0,fieldType:goog.proto2.Message.FieldType.INT32,type:Number},11:{name:"international_prefix",required:!0,fieldType:goog.proto2.Message.FieldType.STRING,type:String},17:{name:"preferred_international_prefix",fieldType:goog.proto2.Message.FieldType.STRING,type:String},12:{name:"national_prefix",fieldType:goog.proto2.Message.FieldType.STRING,type:String},13:{name:"preferred_extn_prefix",fieldType:goog.proto2.Message.FieldType.STRING,type:String},15:{name:"national_prefix_for_parsing",fieldType:goog.proto2.Message.FieldType.STRING,type:String},16:{name:"national_prefix_transform_rule",fieldType:goog.proto2.Message.FieldType.STRING,type:String},18:{name:"same_mobile_and_fixed_line_pattern",fieldType:goog.proto2.Message.FieldType.BOOL,defaultValue:!1,type:Boolean},19:{name:"number_format",repeated:!0,fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.NumberFormat},20:{name:"intl_number_format",repeated:!0,fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.NumberFormat},22:{name:"main_country_for_code",fieldType:goog.proto2.Message.FieldType.BOOL,defaultValue:!1,type:Boolean},23:{name:"leading_digits",fieldType:goog.proto2.Message.FieldType.STRING,type:String},26:{name:"leading_zero_possible",fieldType:goog.proto2.Message.FieldType.BOOL,defaultValue:!1,type:Boolean}}),goog.proto2.Message.set$Metadata(i18n.phonenumbers.PhoneMetadataCollection,{0:{name:"PhoneMetadataCollection",fullName:"i18n.phonenumbers.PhoneMetadataCollection"},1:{name:"metadata",repeated:!0,fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneMetadata}}),i18n.phonenumbers.metadata={},i18n.phonenumbers.metadata.countryCodeToRegionCodeMap={1:"US AG AI AS BB BM BS CA DM DO GD GU JM KN KY LC MP MS PR SX TC TT VC VG VI".split(" "),7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],379:["VA"],380:["UA"],381:["RS"],382:["ME"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],800:["001"],808:["001"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],870:["001"],878:["001"],880:["BD"],881:["001"],882:["001"],883:["001"],886:["TW"],888:["001"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],979:["001"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},i18n.phonenumbers.metadata.countryToMetadata={AC:[,[,,"[2-7]\\d{3,5}","\\d{4,6}"],[,,"(?:[267]\\d|3[0-5]|4[4-69])\\d{2}","\\d{4}",,,"6889"],[,,"5\\d{5}","\\d{6}",,,"501234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"AC",247,"00",,,,,,,,,,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],AD:[,[,,"(?:[346-9]|180)\\d{5}","\\d{6,8}"],[,,"[78]\\d{5}","\\d{6}",,,"712345"],[,,"[346]\\d{5}","\\d{6}",,,"312345"],[,,"180[02]\\d{4}","\\d{8}",,,"18001234"],[,,"9\\d{5}","\\d{6}",,,"912345"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"AD",376,"00",,,,,,,,[[,"(\\d{3})(\\d{3})","$1 $2",["[346-9]"],"","",0],[,"(180[02])(\\d{4})","$1 $2",["1"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],AE:[,[,,"[2-79]\\d{7,8}|800\\d{2,9}","\\d{5,12}"],[,,"[2-4679][2-8]\\d{6}","\\d{7,8}",,,"22345678"],[,,"5[0256]\\d{7}","\\d{9}",,,"501234567"],[,,"400\\d{6}|800\\d{2,9}","\\d{5,12}",,,"800123456"],[,,"900[02]\\d{5}","\\d{9}",,,"900234567"],[,,"700[05]\\d{5}","\\d{9}",,,"700012345"],[,,"NA","NA"],[,,"NA","NA"],"AE",971,"00","0",,,"0",,,,[[,"([2-4679])(\\d{3})(\\d{4})","$1 $2 $3",["[2-4679][2-8]"],"0$1","",0],[,"(5[0256])(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1","",0],[,"([479]00)(\\d)(\\d{5})","$1 $2 $3",["[479]0"],"$1","",0],[,"([68]00)(\\d{2,9})","$1 $2",["60|8"],"$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"600[25]\\d{5}","\\d{9}",,,"600212345"],,,[,,"NA","NA"]],AF:[,[,,"[2-7]\\d{8}","\\d{7,9}"],[,,"(?:[25][0-8]|[34][0-4]|6[0-5])[2-9]\\d{6}","\\d{7,9}",,,"234567890"],[,,"7(?:[05-9]\\d{7}|29\\d{6})","\\d{9}",,,"701234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"AF",93,"00","0",,,"0",,,,[[,"([2-7]\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-6]|7[013-9]"],"0$1","",0],[,"(729)(\\d{3})(\\d{3})","$1 $2 $3",["729"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],AG:[,[,,"[2589]\\d{9}","\\d{7}(?:\\d{3})?"],[,,"268(?:4(?:6[0-38]|84)|56[0-2])\\d{4}","\\d{7}(?:\\d{3})?",,,"2684601234"],[,,"268(?:464|7(?:2[0-9]|64|7[0-689]|8[02-68]))\\d{4}","\\d{10}",,,"2684641234"],[,,"8(?:00|44|55|66|77|88)[2-9]\\d{6}","\\d{10}",,,"8002123456"],[,,"900[2-9]\\d{6}","\\d{10}",,,"9002123456"],[,,"NA","NA"],[,,"5(?:00|33|44|66|77)[2-9]\\d{6}","\\d{10}",,,"5002345678"],[,,"26848[01]\\d{4}","\\d{10}",,,"2684801234"],"AG",1,"011","1",,,"1",,,,,,[,,"26840[69]\\d{4}","\\d{10}",,,"2684061234"],,"268",[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],AI:[,[,,"[2589]\\d{9}","\\d{7}(?:\\d{3})?"],[,,"2644(?:6[12]|9[78])\\d{4}","\\d{7}(?:\\d{3})?",,,"2644612345"],[,,"264(?:235|476|5(?:3[6-9]|8[1-4])|7(?:29|72))\\d{4}","\\d{10}",,,"2642351234"],[,,"8(?:00|44|55|66|77|88)[2-9]\\d{6}","\\d{10}",,,"8002123456"],[,,"900[2-9]\\d{6}","\\d{10}",,,"9002123456"],[,,"NA","NA"],[,,"5(?:00|33|44|66|77)[2-9]\\d{6}","\\d{10}",,,"5002345678"],[,,"NA","NA"],"AI",1,"011","1",,,"1",,,,,,[,,"NA","NA"],,"264",[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],AL:[,[,,"[2-57]\\d{7}|6\\d{8}|8\\d{5,7}|9\\d{5}","\\d{5,9}"],[,,"(?:2(?:[168][1-9]|[247]\\d|9[1-7])|3(?:1[1-3]|[2-6]\\d|[79][1-8]|8[1-9])|4\\d{2}|5(?:1[1-4]|[2-578]\\d|6[1-5]|9[1-7])|8(?:[19][1-5]|[2-6]\\d|[78][1-7]))\\d{5}","\\d{5,8}",,,"22345678"],[,,"6[6-9]\\d{7}","\\d{9}",,,"661234567"],[,,"800\\d{4}","\\d{7}",,,"8001234"],[,,"900\\d{3}","\\d{6}",,,"900123"],[,,"808\\d{3}","\\d{6}",,,"808123"],[,,"700\\d{5}","\\d{8}",,,"70012345"],[,,"NA","NA"],"AL",355,"00","0",,,"0",,,,[[,"(4)(\\d{3})(\\d{4})","$1 $2 $3",["4[0-6]"],"0$1","",0],[,"(6[6-9])(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1","",0],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4[7-9]"],"0$1","",0],[,"(\\d{3})(\\d{3,5})","$1 $2",["[235][16-9]|8[016-9]|[79]"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],AM:[,[,,"[1-9]\\d{7}","\\d{5,8}"],[,,"(?:1[01]\\d|2(?:2[2-46]|3[1-8]|4[2-69]|5[2-7]|6[1-9]|8[1-7])|3[12]2|47\\d)\\d{5}","\\d{5,8}",,,"10123456"],[,,"(?:4[139]|55|77|9[1-9])\\d{6}","\\d{8}",,,"77123456"],[,,"800\\d{5}","\\d{8}",,,"80012345"],[,,"90[016]\\d{5}","\\d{8}",,,"90012345"],[,,"80[1-4]\\d{5}","\\d{8}",,,"80112345"],[,,"NA","NA"],[,,"60[2-6]\\d{5}","\\d{8}",,,"60271234"],"AM",374,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)","",0],[,"(\\d{2})(\\d{6})","$1 $2",["4[139]|[5-7]|9[1-9]"],"0$1","",0],[,"(\\d{3})(\\d{5})","$1 $2",["[23]"],"(0$1)","",0],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["8|90"],"0 $1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],AO:[,[,,"[29]\\d{8}","\\d{9}"],[,,"2\\d(?:[26-9]\\d|\\d[26-9])\\d{5}","\\d{9}",,,"222123456"],[,,"9[1-49]\\d{7}","\\d{9}",,,"923123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"AO",244,"00",,,,,,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],AR:[,[,,"11\\d{8}|[2368]\\d{9}|9\\d{10}","\\d{6,11}"],[,,"11\\d{8}|(?:2(?:2(?:[013]\\d|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[067]\\d)|4(?:7[3-8]|9\\d)|6(?:[01346]\\d|2[24-6]|5[15-8])|80\\d|9(?:[0124789]\\d|3[1-6]|5[234]|6[2-46]))|3(?:3(?:2[79]|6\\d|8[2578])|4(?:[78]\\d|0[0124-9]|[1-35]\\d|4[24-7]|6[02-9]|9[123678])|5(?:[138]\\d|2[1245]|4[1-9]|6[2-4]|7[1-6])|6[24]\\d|7(?:[0469]\\d|1[1568]|2[013-9]|3[145]|5[14-8]|7[2-57]|8[0-24-9])|8(?:[013578]\\d|2[15-7]|4[13-6]|6[1-357-9]|9[124]))|670\\d)\\d{6}","\\d{6,10}",,,"1123456789"],[,,"675\\d{7}|9(?:11[2-9]\\d{7}|(?:2(?:2[013]|3[067]|49|6[01346]|80|9[147-9])|3(?:36|4[12358]|5[138]|6[24]|7[069]|8[013578]))[2-9]\\d{6}|\\d{4}[2-9]\\d{5})","\\d{6,11}",,,"91123456789"],[,,"800\\d{7}","\\d{10}",,,"8001234567"],[,,"60[04579]\\d{7}","\\d{10}",,,"6001234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"AR",54,"00","0",,,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[124-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:1[1568]|2[15]|3[145]|4[13]|5[14-8]|[069]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))?15)?","9$1",,,[[,"([68]\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1","",0],[,"(\\d{2})(\\d{4})","$1-$2",["[2-9]"],"$1","",0],[,"(\\d{3})(\\d{4})","$1-$2",["[2-9]"],"$1","",0],[,"(\\d{4})(\\d{4})","$1-$2",["[2-9]"],"$1","",0],[,"(9)(11)(\\d{4})(\\d{4})","$2 15-$3-$4",["911"],"0$1","",0],[,"(9)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9(?:2[234689]|3[3-8])","9(?:2(?:2[013]|3[067]|49|6[01346]|80|9[147-9])|3(?:36|4[12358]|5[138]|6[24]|7[069]|8[013578]))","9(?:2(?:2[013]|3[067]|49|6[01346]|80|9(?:[179]|4[13479]|8[014-9]))|3(?:36|4[12358]|5(?:[18]|3[014-689])|6[24]|7[069]|8(?:[01]|3[013469]|5[0-39]|7[0-2459]|8[0-49])))"],"0$1","",0],[,"(9)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9[23]"],"0$1","",0],[,"(11)(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1","",1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["2(?:2[013]|3[067]|49|6[01346]|80|9[147-9])|3(?:36|4[12358]|5[138]|6[24]|7[069]|8[013578])","2(?:2[013]|3[067]|49|6[01346]|80|9(?:[179]|4[13479]|8[014-9]))|3(?:36|4[12358]|5(?:[18]|3[0-689])|6[24]|7[069]|8(?:[01]|3[013469]|5[0-39]|7[0-2459]|8[0-49]))"],"0$1","",1],[,"(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["[23]"],"0$1","",1],[,"(\\d{3})","$1",["1[012]|911"],"$1","",0]],[[,"([68]\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1","",0],[,"(9)(11)(\\d{4})(\\d{4})","$1 $2 $3-$4",["911"]],[,"(9)(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3-$4",["9(?:2[234689]|3[3-8])","9(?:2(?:2[013]|3[067]|49|6[01346]|80|9[147-9])|3(?:36|4[12358]|5[138]|6[24]|7[069]|8[013578]))","9(?:2(?:2[013]|3[067]|49|6[01346]|80|9(?:[179]|4[13479]|8[014-9]))|3(?:36|4[12358]|5(?:[18]|3[014-689])|6[24]|7[069]|8(?:[01]|3[013469]|5[0-39]|7[0-2459]|8[0-49])))"]],[,"(9)(\\d{4})(\\d{2})(\\d{4})","$1 $2 $3-$4",["9[23]"]],[,"(11)(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1","",1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["2(?:2[013]|3[067]|49|6[01346]|80|9[147-9])|3(?:36|4[12358]|5[138]|6[24]|7[069]|8[013578])","2(?:2[013]|3[067]|49|6[01346]|80|9(?:[179]|4[13479]|8[014-9]))|3(?:36|4[12358]|5(?:[18]|3[0-689])|6[24]|7[069]|8(?:[01]|3[013469]|5[0-39]|7[0-2459]|8[0-49]))"],"0$1","",1],[,"(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["[23]"],"0$1","",1]],[,,"NA","NA"],,,[,,"810\\d{7}","\\d{10}",,,"8101234567"],[,,"810\\d{7}","\\d{10}",,,"8101234567"],,,[,,"NA","NA"]],AS:[,[,,"[5689]\\d{9}","\\d{7}(?:\\d{3})?"],[,,"6846(?:22|33|44|55|77|88|9[19])\\d{4}","\\d{7}(?:\\d{3})?",,,"6846221234"],[,,"684(?:25[2468]|7(?:3[13]|70))\\d{4}","\\d{10}",,,"6847331234"],[,,"8(?:00|44|55|66|77|88)[2-9]\\d{6}","\\d{10}",,,"8002123456"],[,,"900[2-9]\\d{6}","\\d{10}",,,"9002123456"],[,,"NA","NA"],[,,"5(?:00|33|44|66|77)[2-9]\\d{6}","\\d{10}",,,"5002345678"],[,,"NA","NA"],"AS",1,"011","1",,,"1",,,,,,[,,"NA","NA"],,"684",[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],AT:[,[,,"[1-9]\\d{3,12}","\\d{3,13}"],[,,"1\\d{3,12}|(?:2(?:1[467]|2[13-8]|5[2357]|6[1-46-8]|7[1-8]|8[124-7]|9[1458])|3(?:1[1-8]|3[23568]|4[5-7]|5[1378]|6[1-38]|8[3-68])|4(?:2[1-8]|35|63|7[1368]|8[2457])|5(?:12|2[1-8]|3[357]|4[147]|5[12578]|6[37])|6(?:13|2[1-47]|4[1-35-8]|5[468]|62)|7(?:2[1-8]|3[25]|4[13478]|5[68]|6[16-8]|7[1-6]|9[45]))\\d{3,10}","\\d{3,13}",,,"1234567890"],[,,"6(?:44|5[0-3579]|6[013-9]|[7-9]\\d)\\d{4,10}","\\d{7,13}",,,"644123456"],[,,"80[02]\\d{6,10}","\\d{9,13}",,,"800123456"],[,,"(?:711|9(?:0[01]|3[019]))\\d{6,10}","\\d{9,13}",,,"900123456"],[,,"8(?:10|2[018])\\d{6,10}","\\d{9,13}",,,"810123456"],[,,"NA","NA"],[,,"780\\d{6,10}","\\d{9,13}",,,"780123456"],"AT",43,"00","0",,,"0",,,,[[,"(1)(\\d{3,12})","$1 $2",["1"],"0$1","",0],[,"(5\\d)(\\d{3,5})","$1 $2",["5[079]"],"0$1","",0],[,"(5\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["5[079]"],"0$1","",0],[,"(5\\d)(\\d{4})(\\d{4,7})","$1 $2 $3",["5[079]"],"0$1","",0],[,"(\\d{3})(\\d{3,10})","$1 $2",["316|46|51|732|6(?:44|5[0-3579]|[6-9])|7(?:1|[28]0)|[89]"],"0$1","",0],[,"(\\d{4})(\\d{3,9})","$1 $2",["2|3(?:1[1-578]|[3-8])|4[2378]|5[2-6]|6(?:[12]|4[1-35-9]|5[468])|7(?:2[1-8]|35|4[1-8]|[5-79])"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"5(?:(?:0[1-9]|17)\\d{2,10}|[79]\\d{3,11})|720\\d{6,10}","\\d{5,13}",,,"50123"],,,[,,"NA","NA"]],AU:[,[,,"[1-578]\\d{5,9}","\\d{6,10}"],[,,"[237]\\d{8}|8(?:[68]\\d{3}|7[0-69]\\d{2}|9(?:[02-9]\\d{2}|1(?:[0-57-9]\\d|6[0135-9])))\\d{4}","\\d{8,9}",,,"212345678"],[,,"14(?:5\\d|71)\\d{5}|4(?:[0-2]\\d|3[0-57-9]|4[47-9]|5[0-25-9]|6[6-9]|7[03-9]|8[17-9]|9[017-9])\\d{6}","\\d{9}",,,"412345678"],[,,"180(?:0\\d{3}|2)\\d{3}","\\d{7,10}",,,"1800123456"],[,,"190[0126]\\d{6}","\\d{10}",,,"1900123456"],[,,"13(?:00\\d{2})?\\d{4}","\\d{6,10}",,,"1300123456"],[,,"500\\d{6}","\\d{9}",,,"500123456"],[,,"550\\d{6}","\\d{9}",,,"550123456"],"AU",61,"(?:14(?:1[14]|34|4[17]|[56]6|7[47]|88))?001[14-689]","0",,,"0",,"0011",,[[,"([2378])(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)","",0],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[45]|14"],"0$1","",0],[,"(16)(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1","",0],[,"(1[389]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[38]0|90)","1(?:[38]00|90)"],"$1","",0],[,"(180)(2\\d{3})","$1 $2",["180","1802"],"$1","",0],[,"(19\\d)(\\d{3})","$1 $2",["19[13]"],"$1","",0],[,"(19\\d{2})(\\d{4})","$1 $2",["19[67]"],"$1","",0],[,"(13)(\\d{2})(\\d{2})","$1 $2 $3",["13[1-9]"],"$1","",0]],,[,,"16\\d{3,7}","\\d{5,9}",,,"1612345"],1,,[,,"1(?:3(?:\\d{4}|00\\d{6})|80(?:0\\d{6}|2\\d{3}))","\\d{6,10}",,,"1300123456"],[,,"NA","NA"],,,[,,"NA","NA"]],AW:[,[,,"[25-9]\\d{6}","\\d{7}"],[,,"5(?:2\\d|8[1-9])\\d{4}","\\d{7}",,,"5212345"],[,,"(?:5(?:6\\d|9[2-478])|6(?:[039]0|22|4[01]|6[0-2])|7[34]\\d|9(?:6[45]|9[4-8]))\\d{4}","\\d{7}",,,"5601234"],[,,"800\\d{4}","\\d{7}",,,"8001234"],[,,"900\\d{4}","\\d{7}",,,"9001234"],[,,"NA","NA"],[,,"NA","NA"],[,,"28\\d{5}|501\\d{4}","\\d{7}",,,"5011234"],"AW",297,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],AX:[,[,,"[135]\\d{5,9}|[27]\\d{4,9}|4\\d{5,10}|6\\d{7,8}|8\\d{6,9}","\\d{5,12}"],[,,"18[1-8]\\d{3,9}","\\d{6,12}",,,"1812345678"],[,,"4\\d{5,10}|50\\d{4,8}","\\d{6,11}",,,"412345678"],[,,"800\\d{4,7}","\\d{7,10}",,,"8001234567"],[,,"[67]00\\d{5,6}","\\d{8,9}",,,"600123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"AX",358,"00|99[049]","0",,,"0",,,,,,[,,"NA","NA"],,,[,,"[13]00\\d{3,7}|2(?:0(?:0\\d{3,7}|2[023]\\d{1,6}|9[89]\\d{1,6}))|60(?:[12]\\d{5,6}|6\\d{7})|7(?:1\\d{7}|3\\d{8}|5[03-9]\\d{2,7})","\\d{5,10}",,,"100123"],[,,"[13]0\\d{4,8}|2(?:0(?:[016-8]\\d{3,7}|[2-59]\\d{2,7})|9\\d{4,8})|60(?:[12]\\d{5,6}|6\\d{7})|7(?:1\\d{7}|3\\d{8}|5[03-9]\\d{2,7})","\\d{5,10}",,,"10112345"],,,[,,"NA","NA"]],AZ:[,[,,"[1-9]\\d{8}","\\d{7,9}"],[,,"(?:1[28]\\d|2(?:02|1[24]|2[2-4]|33|[45]2|6[23])|365)\\d{6}","\\d{7,9}",,,"123123456"],[,,"(?:4[04]|5[015]|60|7[07])\\d{7}","\\d{9}",,,"401234567"],[,,"88\\d{7}","\\d{9}",,,"881234567"],[,,"900200\\d{3}","\\d{9}",,,"900200123"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"AZ",994,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["(?:1[28]|2(?:[45]2|[0-36])|365)"],"(0$1)","",0],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[4-8]"],"0$1","",0],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],BA:[,[,,"[3-9]\\d{7,8}","\\d{6,9}"],[,,"(?:[35]\\d|49)\\d{6}","\\d{6,8}",,,"30123456"],[,,"6(?:03|44|71|[1-356])\\d{6}","\\d{8,9}",,,"61123456"],[,,"8[08]\\d{6}","\\d{8}",,,"80123456"],[,,"9[0246]\\d{6}","\\d{8}",,,"90123456"],[,,"8[12]\\d{6}","\\d{8}",,,"82123456"],[,,"NA","NA"],[,,"NA","NA"],"BA",387,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]"],"0$1","",0],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-356]|[7-9]"],"0$1","",0],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6[047]"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"70[23]\\d{5}","\\d{8}",,,"70223456"],,,[,,"NA","NA"]],BB:[,[,,"[2589]\\d{9}","\\d{7}(?:\\d{3})?"],[,,"246[2-9]\\d{6}","\\d{7}(?:\\d{3})?",,,"2462345678"],[,,"246(?:(?:2[346]|45|82)\\d|25[0-4])\\d{4}","\\d{10}",,,"2462501234"],[,,"8(?:00|44|55|66|77|88)[2-9]\\d{6}","\\d{10}",,,"8002123456"],[,,"900[2-9]\\d{6}","\\d{10}",,,"9002123456"],[,,"NA","NA"],[,,"5(?:00|33|44|66|77)[2-9]\\d{6}","\\d{10}",,,"5002345678"],[,,"NA","NA"],"BB",1,"011","1",,,"1",,,,,,[,,"NA","NA"],,"246",[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],BD:[,[,,"[2-79]\\d{5,9}|1\\d{9}|8[0-7]\\d{4,8}","\\d{6,10}"],[,,"2(?:7(?:1[0-267]|2[0-289]|3[0-29]|[46][01]|5[1-3]|7[017]|91)|8(?:0[125]|[139][1-6]|2[0157-9]|6[1-35]|7[1-5]|8[1-8])|9(?:0[0-2]|1[1-4]|2[568]|3[3-6]|5[5-7]|6[0167]|7[15]|8[016-8]))\\d{4}|3(?:12?[5-7]\\d{2}|0(?:2(?:[025-79]\\d|[348]\\d{1,2})|3(?:[2-4]\\d|[56]\\d?))|2(?:1\\d{2}|2(?:[12]\\d|[35]\\d{1,2}|4\\d?))|3(?:1\\d{2}|2(?:[2356]\\d|4\\d{1,2}))|4(?:1\\d{2}|2(?:2\\d{1,2}|[47]|5\\d{2}))|5(?:1\\d{2}|29)|[67]1\\d{2}|8(?:1\\d{2}|2(?:2\\d{2}|3|4\\d)))\\d{3}|4(?:0(?:2(?:[09]\\d|7)|33\\d{2})|1\\d{3}|2(?:1\\d{2}|2(?:[25]\\d?|[348]\\d|[67]\\d{1,2}))|3(?:1\\d{2}(?:\\d{2})?|2(?:[045]\\d|[236-9]\\d{1,2})|32\\d{2})|4(?:[18]\\d{2}|2(?:[2-46]\\d{2}|3)|5[25]\\d{2})|5(?:1\\d{2}|2(?:3\\d|5))|6(?:[18]\\d{2}|2(?:3(?:\\d{2})?|[46]\\d{1,2}|5\\d{2}|7\\d)|5(?:3\\d?|4\\d|[57]\\d{1,2}|6\\d{2}|8))|71\\d{2}|8(?:[18]\\d{2}|23\\d{2}|54\\d{2})|9(?:[18]\\d{2}|2[2-5]\\d{2}|53\\d{1,2}))\\d{3}|5(?:02[03489]\\d{2}|1\\d{2}|2(?:1\\d{2}|2(?:2(?:\\d{2})?|[457]\\d{2}))|3(?:1\\d{2}|2(?:[37](?:\\d{2})?|[569]\\d{2}))|4(?:1\\d{2}|2[46]\\d{2})|5(?:1\\d{2}|26\\d{1,2})|6(?:[18]\\d{2}|2|53\\d{2})|7(?:1|24)\\d{2}|8(?:1|26)\\d{2}|91\\d{2})\\d{3}|6(?:0(?:1\\d{2}|2(?:3\\d{2}|4\\d{1,2}))|2(?:2[2-5]\\d{2}|5(?:[3-5]\\d{2}|7)|8\\d{2})|3(?:1|2[3478])\\d{2}|4(?:1|2[34])\\d{2}|5(?:1|2[47])\\d{2}|6(?:[18]\\d{2}|6(?:2(?:2\\d|[34]\\d{2})|5(?:[24]\\d{2}|3\\d|5\\d{1,2})))|72[2-5]\\d{2}|8(?:1\\d{2}|2[2-5]\\d{2})|9(?:1\\d{2}|2[2-6]\\d{2}))\\d{3}|7(?:(?:02|[3-589]1|6[12]|72[24])\\d{2}|21\\d{3}|32)\\d{3}|8(?:(?:4[12]|[5-7]2|1\\d?)|(?:0|3[12]|[5-7]1|217)\\d)\\d{4}|9(?:[35]1|(?:[024]2|81)\\d|(?:1|[24]1)\\d{2})\\d{3}","\\d{6,9}",,,"27111234"],[,,"(?:1[13-9]\\d|(?:3[78]|44)[02-9]|6(?:44|6[02-9]))\\d{7}","\\d{10}",,,"1812345678"],[,,"80[03]\\d{7}","\\d{10}",,,"8001234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"96(?:0[49]|1[0-4]|6[69])\\d{6}","\\d{10}",,,"9604123456"],"BD",880,"00[12]?","0",,,"0",,"00",,[[,"(2)(\\d{7})","$1-$2",["2"],"0$1","",0],[,"(\\d{2})(\\d{4,6})","$1-$2",["[3-79]1"],"0$1","",0],[,"(\\d{4})(\\d{3,6})","$1-$2",["1|3(?:0|[2-58]2)|4(?:0|[25]2|3[23]|[4689][25])|5(?:[02-578]2|6[25])|6(?:[0347-9]2|[26][25])|7[02-9]2|8(?:[023][23]|[4-7]2)|9(?:[02][23]|[458]2|6[016])"],"0$1","",0],[,"(\\d{3})(\\d{3,7})","$1-$2",["[3-79][2-9]|8"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],BE:[,[,,"[1-9]\\d{7,8}","\\d{8,9}"],[,,"(?:1[0-69]|[49][23]|5\\d|6[013-57-9]|71|8[0-79])[1-9]\\d{5}|[23][2-8]\\d{6}","\\d{8}",,,"12345678"],[,,"4(?:[679]\\d|8[03-9])\\d{6}","\\d{9}",,,"470123456"],[,,"800\\d{5}","\\d{8}",,,"80012345"],[,,"(?:70[2-7]|90\\d)\\d{5}","\\d{8}",,,"90123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"BE",32,"00","0",,,"0",,,,[[,"(4[6-9]\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4[6-9]"],"0$1","",0],[,"([2-49])(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[23]|[49][23]"],"0$1","",0],[,"([15-8]\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[156]|7[018]|8(?:0[1-9]|[1-79])"],"0$1","",0],[,"([89]\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"78\\d{6}","\\d{8}",,,"78123456"],,,[,,"NA","NA"]],BF:[,[,,"[24-7]\\d{7}","\\d{8}"],[,,"(?:20(?:49|5[23]|9[016-9])|40(?:4[569]|5[4-6]|7[0179])|50(?:[34]\\d|50))\\d{4}","\\d{8}",,,"20491234"],[,,"6(?:[0-689]\\d|7[0-5])\\d{5}|7\\d{7}","\\d{8}",,,"70123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"BF",226,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],BG:[,[,,"[23567]\\d{5,7}|[489]\\d{6,8}","\\d{5,9}"],[,,"2(?:[0-8]\\d{5,6}|9\\d{4,6})|(?:[36]\\d|5[1-9]|8[1-6]|9[1-7])\\d{5,6}|(?:4(?:[124-7]\\d|3[1-6])|7(?:0[1-9]|[1-9]\\d))\\d{4,5}","\\d{5,8}",,,"2123456"],[,,"(?:8[7-9]|98)\\d{7}|4(?:3[0789]|8\\d)\\d{5}","\\d{8,9}",,,"48123456"],[,,"800\\d{5}","\\d{8}",,,"80012345"],[,,"90\\d{6}","\\d{8}",,,"90123456"],[,,"NA","NA"],[,,"700\\d{5}","\\d{5,9}",,,"70012345"],[,,"NA","NA"],"BG",359,"00","0",,,"0",,,,[[,"(2)(\\d{5})","$1 $2",["29"],"0$1","",0],[,"(2)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1","",0],[,"(\\d{3})(\\d{4})","$1 $2",["43[124-7]|70[1-9]"],"0$1","",0],[,"(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[124-7]|70[1-9]"],"0$1","",0],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[78]00"],"0$1","",0],[,"(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1","",0],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["48|8[7-9]|9[08]"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],BH:[,[,,"[136-9]\\d{7}","\\d{8}"],[,,"(?:1(?:3[13-6]|6[0156]|7\\d)\\d|6(?:1[16]\\d|500|6(?:0\\d|3[12]|44|88)|9[69][69])|7(?:7\\d{2}|178))\\d{4}","\\d{8}",,,"17001234"],[,,"(?:3(?:[1-4679]\\d|5[0135]|8[0-48])\\d|6(?:3(?:00|33|6[16])|6(?:[69]\\d|3[03-9])))\\d{4}","\\d{8}",,,"36001234"],[,,"80\\d{6}","\\d{8}",,,"80123456"],[,,"(?:87|9[014578])\\d{6}","\\d{8}",,,"90123456"],[,,"84\\d{6}","\\d{8}",,,"84123456"],[,,"NA","NA"],[,,"NA","NA"],"BH",973,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],BI:[,[,,"[267]\\d{7}","\\d{8}"],[,,"22(?:2[0-7]|[3-5]0)\\d{4}","\\d{8}",,,"22201234"],[,,"(?:[26]9|7[14-9])\\d{6}","\\d{8}",,,"79561234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"BI",257,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],BJ:[,[,,"[2689]\\d{7}|7\\d{3}","\\d{4,8}"],[,,"2(?:02|1[037]|2[45]|3[68])\\d{5}","\\d{8}",,,"20211234"],[,,"(?:6[146-8]|9[03-9])\\d{6}","\\d{8}",,,"90011234"],[,,"7[3-5]\\d{2}","\\d{4}",,,"7312"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"857[58]\\d{4}","\\d{8}",,,"85751234"],"BJ",229,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"81\\d{6}","\\d{8}",,,"81123456"],,,[,,"NA","NA"]],
BL:[,[,,"[56]\\d{8}","\\d{9}"],[,,"590(?:2[7-9]|5[12]|87)\\d{4}","\\d{9}",,,"590271234"],[,,"690(?:0[0-7]|[1-9]\\d)\\d{4}","\\d{9}",,,"690301234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"BL",590,"00","0",,,"0",,,,,,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],BM:[,[,,"[4589]\\d{9}","\\d{7}(?:\\d{3})?"],[,,"441(?:2(?:02|23|61|[3479]\\d)|[46]\\d{2}|5(?:4\\d|60|89)|824)\\d{4}","\\d{7}(?:\\d{3})?",,,"4412345678"],[,,"441(?:[37]\\d|5[0-39])\\d{5}","\\d{10}",,,"4413701234"],[,,"8(?:00|44|55|66|77|88)[2-9]\\d{6}","\\d{10}",,,"8002123456"],[,,"900[2-9]\\d{6}","\\d{10}",,,"9002123456"],[,,"NA","NA"],[,,"5(?:00|33|44|66|77)[2-9]\\d{6}","\\d{10}",,,"5002345678"],[,,"NA","NA"],"BM",1,"011","1",,,"1",,,,,,[,,"NA","NA"],,"441",[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],BN:[,[,,"[2-578]\\d{6}","\\d{7}"],[,,"2(?:[013-9]\\d|2[0-7])\\d{4}|[3-5]\\d{6}","\\d{7}",,,"2345678"],[,,"22[89]\\d{4}|[78]\\d{6}","\\d{7}",,,"7123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"BN",673,"00",,,,,,,,[[,"([2-578]\\d{2})(\\d{4})","$1 $2",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],BO:[,[,,"[23467]\\d{7}","\\d{7,8}"],[,,"(?:2(?:2\\d{2}|5(?:11|[258]\\d|9[67])|6(?:12|2\\d|9[34])|8(?:2[34]|39|62))|3(?:3\\d{2}|4(?:6\\d|8[24])|8(?:25|42|5[257]|86|9[25])|9(?:2\\d|3[234]|4[248]|5[24]|6[2-6]|7\\d))|4(?:4\\d{2}|6(?:11|[24689]\\d|72)))\\d{4}","\\d{7,8}",,,"22123456"],[,,"[67]\\d{7}","\\d{8}",,,"71234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"BO",591,"00(1\\d)?","0",,,"0(1\\d)?",,,,[[,"([234])(\\d{7})","$1 $2",["[234]"],"","0$CC $1",0],[,"([67]\\d{7})","$1",["[67]"],"","0$CC $1",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],BQ:[,[,,"[347]\\d{6}","\\d{7}"],[,,"(?:318[023]|416[023]|7(?:1[578]|50)\\d)\\d{3}","\\d{7}",,,"7151234"],[,,"(?:318[14-68]|416[15-9]|7(?:0[01]|7[07]|[89]\\d)\\d)\\d{3}","\\d{7}",,,"3181234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"BQ",599,"00",,,,,,,,,,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],BR:[,[,,"[1-46-9]\\d{7,10}|5\\d{8,9}","\\d{8,11}"],[,,"1[1-9][2-5]\\d{7}|(?:[4689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-5]\\d{7}","\\d{8,11}",,,"1123456789"],[,,"1[1-9](?:7|9\\d)\\d{7}|(?:2[12478]|9[1-9])9?[6-9]\\d{7}|(?:3[1-578]|[468][1-9]|5[13-5]|7[13-579])[6-9]\\d{7}","\\d{10,11}",,,"11961234567"],[,,"800\\d{6,7}","\\d{8,11}",,,"800123456"],[,,"[359]00\\d{6,7}","\\d{8,11}",,,"300123456"],[,,"[34]00\\d{5}","\\d{8}",,,"40041234"],[,,"NA","NA"],[,,"NA","NA"],"BR",55,"00(?:1[45]|2[135]|31|4[13])","0",,,"0(?:(1[245]|2[135]|31|4[13])(\\d{10,11}))?","$2",,,[[,"(\\d{4})(\\d{4})","$1-$2",["[2-9](?:[1-9]|0[1-9])"],"$1","",0],[,"(\\d{5})(\\d{4})","$1-$2",["9(?:[1-9]|0[1-9])"],"$1","",0],[,"(\\d{3,5})","$1",["1[125689]"],"$1","",0],[,"(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["(?:1[1-9]|2[12478]|9[1-9])9"],"($1)","0 $CC ($1)",0],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["[1-9][1-9]"],"($1)","0 $CC ($1)",0],[,"([34]00\\d)(\\d{4})","$1-$2",["[34]00"],"","",0],[,"([3589]00)(\\d{2,3})(\\d{4})","$1 $2 $3",["[3589]00"],"0$1","",0]],[[,"(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["(?:1[1-9]|2[12478]|9[1-9])9"],"($1)","0 $CC ($1)",0],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["[1-9][1-9]"],"($1)","0 $CC ($1)",0],[,"([34]00\\d)(\\d{4})","$1-$2",["[34]00"],"","",0],[,"([3589]00)(\\d{2,3})(\\d{4})","$1 $2 $3",["[3589]00"],"0$1","",0]],[,,"NA","NA"],,,[,,"[34]00\\d{5}","\\d{8}",,,"40041234"],[,,"NA","NA"],,,[,,"NA","NA"]],BS:[,[,,"[2589]\\d{9}","\\d{7}(?:\\d{3})?"],[,,"242(?:3(?:02|[236][1-9]|4[0-24-9]|5[0-68]|7[3467]|8[0-4]|9[2-467])|461|502|6(?:0[12]|12|7[67]|8[78]|9[89])|702)\\d{4}","\\d{7}(?:\\d{3})?",,,"2423456789"],[,,"242(?:3(?:5[79]|[79]5)|4(?:[2-4][1-9]|5[1-8]|6[2-8]|7\\d|81)|5(?:2[45]|3[35]|44|5[1-9]|65|77)|6[34]6|727)\\d{4}","\\d{10}",,,"2423591234"],[,,"242300\\d{4}|8(?:00|44|55|66|77|88)[2-9]\\d{6}","\\d{10}",,,"8002123456"],[,,"900[2-9]\\d{6}","\\d{10}",,,"9002123456"],[,,"NA","NA"],[,,"5(?:00|33|44|66|77)[2-9]\\d{6}","\\d{10}",,,"5002345678"],[,,"NA","NA"],"BS",1,"011","1",,,"1",,,,,,[,,"NA","NA"],,"242",[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],BT:[,[,,"[1-8]\\d{6,7}","\\d{6,8}"],[,,"(?:2[3-6]|[34][5-7]|5[236]|6[2-46]|7[246]|8[2-4])\\d{5}","\\d{6,7}",,,"2345678"],[,,"[17]7\\d{6}","\\d{8}",,,"17123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"BT",975,"00",,,,,,,,[[,"([17]7)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1|77"],"","",0],[,"([2-8])(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],BW:[,[,,"[2-79]\\d{6,7}","\\d{7,8}"],[,,"(?:2(?:4[0-48]|6[0-24]|9[0578])|3(?:1[0235-9]|55|6\\d|7[01]|9[0-57])|4(?:6[03]|7[1267]|9[0-5])|5(?:3[0389]|4[0489]|7[1-47]|88|9[0-49])|6(?:2[1-35]|5[149]|8[067]))\\d{4}","\\d{7}",,,"2401234"],[,,"7(?:[1-356]\\d|4[0-7]|7[014-7])\\d{5}","\\d{8}",,,"71123456"],[,,"NA","NA"],[,,"90\\d{5}","\\d{7}",,,"9012345"],[,,"NA","NA"],[,,"NA","NA"],[,,"79[12][01]\\d{4}","\\d{8}",,,"79101234"],"BW",267,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-6]"],"","",0],[,"(7\\d)(\\d{3})(\\d{3})","$1 $2 $3",["7"],"","",0],[,"(90)(\\d{5})","$1 $2",["9"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],BY:[,[,,"[1-4]\\d{8}|[89]\\d{9,10}","\\d{7,11}"],[,,"(?:1(?:5(?:1[1-5]|[24]\\d|6[2-4]|9[1-7])|6(?:[235]\\d|4[1-7])|7\\d{2})|2(?:1(?:[246]\\d|3[0-35-9]|5[1-9])|2(?:[235]\\d|4[0-8])|3(?:[26]\\d|3[02-79]|4[024-7]|5[03-7])))\\d{5}","\\d{7,9}",,,"152450911"],[,,"(?:2(?:5[5679]|9[1-9])|33\\d|44\\d)\\d{6}","\\d{9}",,,"294911911"],[,,"8(?:0[13]|20\\d)\\d{7}","\\d{10,11}",,,"8011234567"],[,,"(?:810|902)\\d{7}","\\d{10}",,,"9021234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"BY",375,"810","8",,,"8?0?",,"8~10",,[[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["17[0-3589]|2[4-9]|[34]","17(?:[02358]|1[0-2]|9[0189])|2[4-9]|[34]"],"8 0$1","",0],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:5[24]|6[235]|7[467])|2(?:1[246]|2[25]|3[26])","1(?:5[24]|6(?:2|3[04-9]|5[0346-9])|7(?:[46]|7[37-9]))|2(?:1[246]|2[25]|3[26])"],"8 0$1","",0],[,"(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1","",0],[,"([89]\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8[01]|9"],"8 $1","",0],[,"(8\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["82"],"8 $1","",0]],,[,,"NA","NA"],,,[,,"8(?:[013]|[12]0)\\d{8}|902\\d{7}","\\d{10,11}",,,"82012345678"],[,,"NA","NA"],,,[,,"NA","NA"]],BZ:[,[,,"[2-8]\\d{6}|0\\d{10}","\\d{7}(?:\\d{4})?"],[,,"[234578][02]\\d{5}","\\d{7}",,,"2221234"],[,,"6[0-367]\\d{5}","\\d{7}",,,"6221234"],[,,"0800\\d{7}","\\d{11}",,,"08001234123"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"BZ",501,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1-$2",["[2-8]"],"","",0],[,"(0)(800)(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],1,,[,,"NA","NA"]],CA:[,[,,"[2-9]\\d{9}|3\\d{6}","\\d{7}(?:\\d{3})?"],[,,"(?:2(?:04|[23]6|[48]9|50)|3(?:06|43|65)|4(?:03|1[68]|3[178]|50)|5(?:06|1[49]|79|8[17])|6(?:0[04]|13|39|47)|7(?:0[59]|78|8[02])|8(?:[06]7|19|73)|90[25])[2-9]\\d{6}|310\\d{4}","\\d{7}(?:\\d{3})?",,,"2042345678"],[,,"(?:2(?:04|[23]6|[48]9|50)|3(?:06|43|65)|4(?:03|1[68]|3[178]|50)|5(?:06|1[49]|79|8[17])|6(?:0[04]|13|39|47)|7(?:0[59]|78|8[02])|8(?:[06]7|19|73)|90[25])[2-9]\\d{6}","\\d{7}(?:\\d{3})?",,,"2042345678"],[,,"8(?:00|44|55|66|77|88)[2-9]\\d{6}|310\\d{4}","\\d{7}(?:\\d{3})?",,,"8002123456"],[,,"900[2-9]\\d{6}","\\d{10}",,,"9002123456"],[,,"NA","NA"],[,,"5(?:00|33|44|66|77)[2-9]\\d{6}","\\d{10}",,,"5002345678"],[,,"NA","NA"],"CA",1,"011","1",,,"1",,,,,,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],CC:[,[,,"[1458]\\d{5,9}","\\d{6,10}"],[,,"89162\\d{4}","\\d{8,9}",,,"891621234"],[,,"14(?:5\\d|71)\\d{5}|4(?:[0-2]\\d|3[0-57-9]|4[47-9]|5[0-25-9]|6[6-9]|7[03-9]|8[17-9]|9[017-9])\\d{6}","\\d{9}",,,"412345678"],[,,"1(?:80(?:0\\d{2})?|3(?:00\\d{2})?)\\d{4}","\\d{6,10}",,,"1800123456"],[,,"190[0126]\\d{6}","\\d{10}",,,"1900123456"],[,,"NA","NA"],[,,"500\\d{6}","\\d{9}",,,"500123456"],[,,"550\\d{6}","\\d{9}",,,"550123456"],"CC",61,"(?:14(?:1[14]|34|4[17]|[56]6|7[47]|88))?001[14-689]","0",,,"0",,"0011",,,,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],CD:[,[,,"[2-6]\\d{6}|[18]\\d{6,8}|9\\d{8}","\\d{7,9}"],[,,"1(?:2\\d{7}|\\d{6})|[2-6]\\d{6}","\\d{7,9}",,,"1234567"],[,,"8(?:[0-2459]\\d{2}|8)\\d{5}|9[7-9]\\d{7}","\\d{7,9}",,,"991234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"CD",243,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["12"],"0$1","",0],[,"([89]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8[0-2459]|9"],"0$1","",0],[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1","",0],[,"(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],CF:[,[,,"[278]\\d{7}","\\d{8}"],[,,"2[12]\\d{6}","\\d{8}",,,"21612345"],[,,"7[0257]\\d{6}","\\d{8}",,,"70012345"],[,,"NA","NA"],[,,"8776\\d{4}","\\d{8}",,,"87761234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"CF",236,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],CG:[,[,,"[028]\\d{8}","\\d{9}"],[,,"222[1-589]\\d{5}","\\d{9}",,,"222123456"],[,,"0[14-6]\\d{7}","\\d{9}",,,"061234567"],[,,"800\\d{6}","\\d{9}",,,"800123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"CG",242,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"],"","",0],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],1,,[,,"NA","NA"]],CH:[,[,,"[2-9]\\d{8}|860\\d{9}","\\d{9}(?:\\d{3})?"],[,,"(?:2[12467]|3[1-4]|4[134]|5[256]|6[12]|[7-9]1)\\d{7}","\\d{9}",,,"212345678"],[,,"7[5-9]\\d{7}","\\d{9}",,,"781234567"],[,,"800\\d{6}","\\d{9}",,,"800123456"],[,,"90[016]\\d{6}","\\d{9}",,,"900123456"],[,,"84[0248]\\d{6}","\\d{9}",,,"840123456"],[,,"878\\d{6}","\\d{9}",,,"878123456"],[,,"NA","NA"],"CH",41,"00","0",,,"0",,,,[[,"([2-9]\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]|[89]1"],"0$1","",0],[,"([89]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1","",0],[,"(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["860"],"0$1","",0]],,[,,"74[0248]\\d{6}","\\d{9}",,,"740123456"],,,[,,"NA","NA"],[,,"5[18]\\d{7}","\\d{9}",,,"581234567"],,,[,,"860\\d{9}","\\d{12}",,,"860123456789"]],CI:[,[,,"[02-7]\\d{7}","\\d{8}"],[,,"(?:2(?:0[023]|1[02357]|[23][045]|4[03-5])|3(?:0[06]|1[069]|[2-4][07]|5[09]|6[08]))\\d{5}","\\d{8}",,,"21234567"],[,,"(?:0[1-9]|4[0-24-9]|5[4-9]|6[015-79]|7[57])\\d{6}","\\d{8}",,,"01234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"CI",225,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],1,,[,,"NA","NA"]],CK:[,[,,"[2-57]\\d{4}","\\d{5}"],[,,"(?:2\\d|3[13-7]|4[1-5])\\d{3}","\\d{5}",,,"21234"],[,,"(?:5[0-68]|7\\d)\\d{3}","\\d{5}",,,"71234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"CK",682,"00",,,,,,,,[[,"(\\d{2})(\\d{3})","$1 $2",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],CL:[,[,,"(?:[2-9]|600|123)\\d{7,8}","\\d{7,11}"],[,,"2(?:2\\d{7}|1962\\d{4})|(?:3[2-5]|[47][1-35]|5[1-3578]|6[13-57])\\d{7}","\\d{7,9}",,,"221234567"],[,,"9[4-9]\\d{7}","\\d{8,9}",,,"961234567"],[,,"800\\d{6}|1230\\d{7}","\\d{9,11}",,,"800123456"],[,,"NA","NA"],[,,"600\\d{7,8}","\\d{10,11}",,,"6001234567"],[,,"NA","NA"],[,,"44\\d{7}","\\d{9}",,,"441234567"],"CL",56,"(?:0|1(?:1[0-69]|2[0-57]|5[13-58]|69|7[0167]|8[018]))0","0",,,"0|(1(?:1[0-69]|2[0-57]|5[13-58]|69|7[0167]|8[018]))",,,,[[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["22"],"($1)","$CC ($1)",0],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[357]|4[1-35]|6[13-57]"],"($1)","$CC ($1)",0],[,"(9)(\\d{4})(\\d{4})","$1 $2 $3",["9"],"0$1","",0],[,"(44)(\\d{3})(\\d{4})","$1 $2 $3",["44"],"0$1","",0],[,"([68]00)(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"],"$1","",0],[,"(600)(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"],"$1","",0],[,"(1230)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"$1","",0],[,"(\\d{5})(\\d{4})","$1 $2",["219"],"($1)","$CC ($1)",0],[,"(\\d{4,5})","$1",["[1-9]"],"$1","",0]],[[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["22"],"($1)","$CC ($1)",0],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[357]|4[1-35]|6[13-57]"],"($1)","$CC ($1)",0],[,"(9)(\\d{4})(\\d{4})","$1 $2 $3",["9"],"0$1","",0],[,"(44)(\\d{3})(\\d{4})","$1 $2 $3",["44"],"0$1","",0],[,"([68]00)(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"],"$1","",0],[,"(600)(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"],"$1","",0],[,"(1230)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"$1","",0],[,"(\\d{5})(\\d{4})","$1 $2",["219"],"($1)","$CC ($1)",0]],[,,"NA","NA"],,,[,,"600\\d{7,8}","\\d{10,11}",,,"6001234567"],[,,"NA","NA"],,,[,,"NA","NA"]],CM:[,[,,"[235-9]\\d{7,8}","\\d{8,9}"],[,,"2(?:22|33|4[23])\\d{6}|(?:22|33)\\d{6}","\\d{8,9}",,,"222123456"],[,,"6[5-79]\\d{7}|[579]\\d{7}","\\d{8,9}",,,"671234567"],[,,"800\\d{5}","\\d{8}",,,"80012345"],[,,"88\\d{6}","\\d{8}",,,"88012345"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"CM",237,"00",,,,,,,,[[,"([26])(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]"],"","",0],[,"([2357-9]\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[23579]|88"],"","",0],[,"(800)(\\d{2})(\\d{3})","$1 $2 $3",["80"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],CN:[,[,,"[1-7]\\d{6,11}|8[0-357-9]\\d{6,9}|9\\d{7,9}","\\d{4,12}"],[,,"21(?:100\\d{2}|95\\d{3,4}|\\d{8,10})|(?:10|2[02-57-9]|3(?:11|7[179])|4(?:[15]1|3[12])|5(?:1\\d|2[37]|3[12]|51|7[13-79]|9[15])|7(?:31|5[457]|6[09]|91)|8(?:71|98))(?:100\\d{2}|95\\d{3,4}|\\d{8})|(?:3(?:1[02-9]|35|49|5\\d|7[02-68]|9[1-68])|4(?:1[02-9]|2[179]|3[3-9]|5[2-9]|6[4789]|7\\d|8[23])|5(?:3[03-9]|4[36]|5[02-9]|6[1-46]|7[028]|80|9[2-46-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[17]\\d|2[248]|3[04-9]|4[3-6]|5[0-3689]|6[2368]|9[02-9])|8(?:1[236-8]|2[5-7]|3\\d|5[1-9]|7[02-9]|8[3678]|9[1-7])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100\\d{2}|95\\d{3,4}|\\d{7})|80(?:29|6[03578]|7[018]|81)\\d{4}","\\d{4,12}",,,"1012345678"],[,,"1(?:[38]\\d|4[57]|5[0-35-9]|7[06-8])\\d{8}","\\d{11}",,,"13123456789"],[,,"(?:10)?800\\d{7}","\\d{10,12}",,,"8001234567"],[,,"16[08]\\d{5}","\\d{8}",,,"16812345"],[,,"400\\d{7}|(?:10|2[0-57-9]|3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[4789]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[3678]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))96\\d{3,4}","\\d{7,10}",,,"4001234567"],[,,"NA","NA"],[,,"NA","NA"],"CN",86,"(1[1279]\\d{3})?00","0",,,"(1[1279]\\d{3})|0",,"00",,[[,"(80\\d{2})(\\d{4})","$1 $2",["80[2678]"],"0$1","$CC $1",1],[,"([48]00)(\\d{3})(\\d{4})","$1 $2 $3",["[48]00"],"","",0],[,"(\\d{5,6})","$1",["100|95"],"","",0],[,"(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2\\d)[19]","(?:10|2\\d)(?:10|9[56])","(?:10|2\\d)(?:100|9[56])"],"0$1","$CC $1",0],[,"(\\d{3})(\\d{5,6})","$1 $2",["[3-9]","[3-9]\\d{2}[19]","[3-9]\\d{2}(?:10|9[56])"],"0$1","$CC $1",0],[,"(\\d{3,4})(\\d{4})","$1 $2",["[2-9]"],"","",0],[,"(21)(\\d{4})(\\d{4,6})","$1 $2 $3",["21"],"0$1","$CC $1",1],[,"([12]\\d)(\\d{4})(\\d{4})","$1 $2 $3",["10[1-9]|2[02-9]","10[1-9]|2[02-9]","10(?:[1-79]|8(?:[1-9]|0[1-9]))|2[02-9]"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["3(?:11|7[179])|4(?:[15]1|3[12])|5(?:1|2[37]|3[12]|51|7[13-79]|9[15])|7(?:31|5[457]|6[09]|91)|8(?:71|98)"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:1[02-9]|35|49|5|7[02-68]|9[1-68])|4(?:1[02-9]|2[179]|[35][2-9]|6[4789]|7\\d|8[23])|5(?:3[03-9]|4[36]|5[02-9]|6[1-46]|7[028]|80|9[2-46-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[04-9]|4[3-6]|6[2368])|8(?:1[236-8]|2[5-7]|3|5[1-9]|7[02-9]|8[3678]|9[1-7])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-578]"],"","$CC $1",0],[,"(10800)(\\d{3})(\\d{4})","$1 $2 $3",["108","1080","10800"],"","",0]],[[,"(80\\d{2})(\\d{4})","$1 $2",["80[2678]"],"0$1","$CC $1",1],[,"([48]00)(\\d{3})(\\d{4})","$1 $2 $3",["[48]00"],"","",0],[,"(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2\\d)[19]","(?:10|2\\d)(?:10|9[56])","(?:10|2\\d)(?:100|9[56])"],"0$1","$CC $1",0],[,"(\\d{3})(\\d{5,6})","$1 $2",["[3-9]","[3-9]\\d{2}[19]","[3-9]\\d{2}(?:10|9[56])"],"0$1","$CC $1",0],[,"(21)(\\d{4})(\\d{4,6})","$1 $2 $3",["21"],"0$1","$CC $1",1],[,"([12]\\d)(\\d{4})(\\d{4})","$1 $2 $3",["10[1-9]|2[02-9]","10[1-9]|2[02-9]","10(?:[1-79]|8(?:[1-9]|0[1-9]))|2[02-9]"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["3(?:11|7[179])|4(?:[15]1|3[12])|5(?:1|2[37]|3[12]|51|7[13-79]|9[15])|7(?:31|5[457]|6[09]|91)|8(?:71|98)"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:1[02-9]|35|49|5|7[02-68]|9[1-68])|4(?:1[02-9]|2[179]|[35][2-9]|6[4789]|7\\d|8[23])|5(?:3[03-9]|4[36]|5[02-9]|6[1-46]|7[028]|80|9[2-46-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[04-9]|4[3-6]|6[2368])|8(?:1[236-8]|2[5-7]|3|5[1-9]|7[02-9]|8[3678]|9[1-7])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-578]"],"","$CC $1",0],[,"(10800)(\\d{3})(\\d{4})","$1 $2 $3",["108","1080","10800"],"","",0]],[,,"NA","NA"],,,[,,"(?:4|(?:10)?8)00\\d{7}","\\d{10,12}",,,"4001234567"],[,,"NA","NA"],,,[,,"NA","NA"]],CO:[,[,,"(?:[13]\\d{0,3}|[24-8])\\d{7}","\\d{7,11}"],[,,"[124-8][2-9]\\d{6}","\\d{8}",,,"12345678"],[,,"3(?:0[0-5]|1\\d|2[0-2]|5[01])\\d{7}","\\d{10}",,,"3211234567"],[,,"1800\\d{7}","\\d{11}",,,"18001234567"],[,,"19(?:0[01]|4[78])\\d{7}","\\d{11}",,,"19001234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"CO",57,"00(?:4(?:[14]4|56)|[579])","0",,,"0([3579]|4(?:44|56))?",,,,[[,"(\\d)(\\d{7})","$1 $2",["1(?:8[2-9]|9[0-3]|[2-7])|[24-8]","1(?:8[2-9]|9(?:09|[1-3])|[2-7])|[24-8]"],"($1)","0$CC $1",0],[,"(\\d{3})(\\d{7})","$1 $2",["3"],"","0$CC $1",0],[,"(1)(\\d{3})(\\d{7})","$1-$2-$3",["1(?:80|9[04])","1(?:800|9(?:0[01]|4[78]))"],"0$1","",0]],[[,"(\\d)(\\d{7})","$1 $2",["1(?:8[2-9]|9[0-3]|[2-7])|[24-8]","1(?:8[2-9]|9(?:09|[1-3])|[2-7])|[24-8]"],"($1)","0$CC $1",0],[,"(\\d{3})(\\d{7})","$1 $2",["3"],"","0$CC $1",0],[,"(1)(\\d{3})(\\d{7})","$1 $2 $3",["1(?:80|9[04])","1(?:800|9(?:0[01]|4[78]))"]]],[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],CR:[,[,,"[24-9]\\d{7,9}","\\d{8,10}"],[,,"2[24-7]\\d{6}","\\d{8}",,,"22123456"],[,,"5(?:0[01]|7[0-3])\\d{5}|6(?:[0-2]\\d|30)\\d{5}|7[0-3]\\d{6}|8[3-9]\\d{6}","\\d{8}",,,"83123456"],[,,"800\\d{7}","\\d{10}",,,"8001234567"],[,,"90[059]\\d{7}","\\d{10}",,,"9001234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"210[0-6]\\d{4}|4(?:0(?:0[01]\\d{4}|10[0-3]\\d{3}|2(?:00\\d{3}|900\\d{2})|3[01]\\d{4}|40\\d{4}|5\\d{5}|60\\d{4}|70[01]\\d{3}|8[0-2]\\d{4})|1[01]\\d{5}|20[0-3]\\d{4}|400\\d{4}|70[0-2]\\d{4})|5100\\d{4}","\\d{8}",,,"40001234"],"CR",506,"00",,,,"(19(?:0[012468]|1[09]|20|66|77|99))",,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[24-7]|8[3-9]"],"","$CC $1",0],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]0"],"","$CC $1",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],CU:[,[,,"[2-57]\\d{5,7}","\\d{4,8}"],[,,"2[1-4]\\d{5,6}|3(?:1\\d{6}|[23]\\d{4,6})|4(?:[125]\\d{5,6}|[36]\\d{6}|[78]\\d{4,6})|7\\d{6,7}","\\d{4,8}",,,"71234567"],[,,"5\\d{7}","\\d{8}",,,"51234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"CU",53,"119","0",,,"0",,,,[[,"(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)","",0],[,"(\\d{2})(\\d{4,6})","$1 $2",["[2-4]"],"(0$1)","",0],[,"(\\d)(\\d{7})","$1 $2",["5"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],CV:[,[,,"[259]\\d{6}","\\d{7}"],[,,"2(?:2[1-7]|3[0-8]|4[12]|5[1256]|6\\d|7[1-3]|8[1-5])\\d{4}","\\d{7}",,,"2211234"],[,,"(?:9\\d|59)\\d{5}","\\d{7}",,,"9911234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"CV",238,"0",,,,,,,,[[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],CW:[,[,,"[169]\\d{6,7}","\\d{7,8}"],[,,"9(?:[48]\\d{2}|50\\d|7(?:2[0-24]|[34]\\d|6[35-7]|77|8[7-9]))\\d{4}","\\d{7,8}",,,"94151234"],[,,"9(?:5(?:[1246]\\d|3[01])|6(?:[16-9]\\d|3[01]))\\d{4}","\\d{7,8}",,,"95181234"],[,,"NA","NA"],[,,"NA","NA"],[,,"(?:10|69)\\d{5}","\\d{7}",,,"1011234"],[,,"NA","NA"],[,,"NA","NA"],"CW",599,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[13-7]"],"","",0],[,"(9)(\\d{3})(\\d{4})","$1 $2 $3",["9"],"","",0]],,[,,"955\\d{5}","\\d{7,8}",,,"95581234"],1,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],CX:[,[,,"[1458]\\d{5,9}","\\d{6,10}"],[,,"89164\\d{4}","\\d{8,9}",,,"891641234"],[,,"14(?:5\\d|71)\\d{5}|4(?:[0-2]\\d|3[0-57-9]|4[47-9]|5[0-25-9]|6[6-9]|7[03-9]|8[17-9]|9[017-9])\\d{6}","\\d{9}",,,"412345678"],[,,"1(?:80(?:0\\d{2})?|3(?:00\\d{2})?)\\d{4}","\\d{6,10}",,,"1800123456"],[,,"190[0126]\\d{6}","\\d{10}",,,"1900123456"],[,,"NA","NA"],[,,"500\\d{6}","\\d{9}",,,"500123456"],[,,"550\\d{6}","\\d{9}",,,"550123456"],"CX",61,"(?:14(?:1[14]|34|4[17]|[56]6|7[47]|88))?001[14-689]","0",,,"0",,"0011",,,,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],CY:[,[,,"[257-9]\\d{7}","\\d{8}"],[,,"2[2-6]\\d{6}","\\d{8}",,,"22345678"],[,,"9[5-79]\\d{6}","\\d{8}",,,"96123456"],[,,"800\\d{5}","\\d{8}",,,"80001234"],[,,"90[09]\\d{5}","\\d{8}",,,"90012345"],[,,"80[1-9]\\d{5}","\\d{8}",,,"80112345"],[,,"700\\d{5}","\\d{8}",,,"70012345"],[,,"NA","NA"],"CY",357,"00",,,,,,,,[[,"(\\d{2})(\\d{6})","$1 $2",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"(?:50|77)\\d{6}","\\d{8}",,,"77123456"],,,[,,"NA","NA"]],CZ:[,[,,"[2-8]\\d{8}|9\\d{8,11}","\\d{9,12}"],[,,"2\\d{8}|(?:3[1257-9]|4[16-9]|5[13-9])\\d{7}","\\d{9,12}",,,"212345678"],[,,"(?:60[1-8]|7(?:0[2-5]|[2379]\\d))\\d{6}","\\d{9,12}",,,"601123456"],[,,"800\\d{6}","\\d{9,12}",,,"800123456"],[,,"9(?:0[05689]|76)\\d{6}","\\d{9,12}",,,"900123456"],[,,"8[134]\\d{7}","\\d{9,12}",,,"811234567"],[,,"70[01]\\d{6}","\\d{9,12}",,,"700123456"],[,,"9[17]0\\d{6}","\\d{9,12}",,,"910123456"],"CZ",420,"00",,,,,,,,[[,"([2-9]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"],"","",0],[,"(96\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["96"],"","",0],[,"(9\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9[36]"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"9(?:5\\d|7[234])\\d{6}","\\d{9,12}",,,"972123456"],,,[,,"9(?:3\\d{9}|6\\d{7,10})","\\d{9,12}",,,"93123456789"]],DE:[,[,,"[1-35-9]\\d{3,14}|4(?:[0-8]\\d{4,12}|9(?:[0-37]\\d|4(?:[1-35-8]|4\\d?)|5\\d{1,2}|6[1-8]\\d?)\\d{2,8})","\\d{2,15}"],[,,"[246]\\d{5,13}|3(?:0\\d{3,13}|2\\d{9}|[3-9]\\d{4,13})|5(?:0[2-8]|[1256]\\d|[38][0-8]|4\\d{0,2}|[79][0-7])\\d{3,11}|7(?:0[2-8]|[1-9]\\d)\\d{3,10}|8(?:0[2-9]|[1-9]\\d)\\d{3,10}|9(?:0[6-9]\\d{3,10}|1\\d{4,12}|[2-9]\\d{4,11})","\\d{2,15}",,,"30123456"],[,,"1(?:5[0-2579]\\d{8}|6[023]\\d{7,8}|7(?:[0-57-9]\\d?|6\\d)\\d{7})","\\d{10,11}",,,"15123456789"],[,,"800\\d{7,12}","\\d{10,15}",,,"8001234567890"],[,,"137[7-9]\\d{6}|900(?:[135]\\d{6}|9\\d{7})","\\d{10,11}",,,"9001234567"],[,,"1(?:3(?:7[1-6]\\d{6}|8\\d{4})|80\\d{5,11})","\\d{7,14}",,,"18012345"],[,,"700\\d{8}","\\d{11}",,,"70012345678"],[,,"NA","NA"],"DE",49,"00","0",,,"0",,,,[[,"(1\\d{2})(\\d{7,8})","$1 $2",["1[67]"],"0$1","",0],[,"(1\\d{3})(\\d{7})","$1 $2",["15"],"0$1","",0],[,"(\\d{2})(\\d{3,11})","$1 $2",["3[02]|40|[68]9"],"0$1","",0],[,"(\\d{3})(\\d{3,11})","$1 $2",["2(?:\\d1|0[2389]|1[24]|28|34)|3(?:[3-9][15]|40)|[4-8][1-9]1|9(?:06|[1-9]1)"],"0$1","",0],[,"(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|[7-9](?:\\d[1-9]|[1-9]\\d)|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])","[24-6]|[7-9](?:\\d[1-9]|[1-9]\\d)|3(?:3(?:0[1-467]|2[127-9]|3[124578]|[46][1246]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|3[1357]|4[13578]|6[1246]|7[1356]|9[1346])|5(?:0[14]|2[1-3589]|3[1357]|4[1246]|6[1-4]|7[1346]|8[13568]|9[1246])|6(?:0[356]|2[1-489]|3[124-6]|4[1347]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|3[1357]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|4[1347]|6[0135-9]|7[1467]|8[136])|9(?:0[12479]|2[1358]|3[1357]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))"],"0$1","",0],[,"(3\\d{4})(\\d{1,10})","$1 $2",["3"],"0$1","",0],[,"(800)(\\d{7,12})","$1 $2",["800"],"0$1","",0],[,"(177)(99)(\\d{7,8})","$1 $2 $3",["177","1779","17799"],"0$1","",0],[,"(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["(?:18|90)0|137","1(?:37|80)|900[1359]"],"0$1","",0],[,"(1\\d{2})(\\d{5,11})","$1 $2",["181"],"0$1","",0],[,"(18\\d{3})(\\d{6})","$1 $2",["185","1850","18500"],"0$1","",0],[,"(18\\d{2})(\\d{7})","$1 $2",["18[68]"],"0$1","",0],[,"(18\\d)(\\d{8})","$1 $2",["18[2-579]"],"0$1","",0],[,"(700)(\\d{4})(\\d{4})","$1 $2 $3",["700"],"0$1","",0],[,"(138)(\\d{4})","$1 $2",["138"],"0$1","",0]],,[,,"16(?:4\\d{1,10}|[89]\\d{1,11})","\\d{4,14}",,,"16412345"],,,[,,"NA","NA"],[,,"18(?:1\\d{5,11}|[2-9]\\d{8})","\\d{8,14}",,,"18500123456"],,,[,,"17799\\d{7,8}","\\d{12,13}",,,"177991234567"]],DJ:[,[,,"[27]\\d{7}","\\d{8}"],[,,"2(?:1[2-5]|7[45])\\d{5}","\\d{8}",,,"21360003"],[,,"77[6-8]\\d{5}","\\d{8}",,,"77831001"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"DJ",253,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],DK:[,[,,"[2-9]\\d{7}","\\d{8}"],[,,"(?:[2-7]\\d|8[126-9]|9[1-36-9])\\d{6}","\\d{8}",,,"32123456"],[,,"(?:[2-7]\\d|8[126-9]|9[1-36-9])\\d{6}","\\d{8}",,,"20123456"],[,,"80\\d{6}","\\d{8}",,,"80123456"],[,,"90\\d{6}","\\d{8}",,,"90123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"DK",45,"00",,,,,,,1,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],DM:[,[,,"[57-9]\\d{9}","\\d{7}(?:\\d{3})?"],[,,"767(?:2(?:55|66)|4(?:2[01]|4[0-25-9])|50[0-4]|70[1-3])\\d{4}","\\d{7}(?:\\d{3})?",,,"7674201234"],[,,"767(?:2(?:[234689]5|7[5-7])|31[5-7]|61[2-7])\\d{4}","\\d{10}",,,"7672251234"],[,,"8(?:00|44|55|66|77|88)[2-9]\\d{6}","\\d{10}",,,"8002123456"],[,,"900[2-9]\\d{6}","\\d{10}",,,"9002123456"],[,,"NA","NA"],[,,"5(?:00|33|44|66|77)[2-9]\\d{6}","\\d{10}",,,"5002345678"],[,,"NA","NA"],"DM",1,"011","1",,,"1",,,,,,[,,"NA","NA"],,"767",[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],DO:[,[,,"[589]\\d{9}","\\d{7}(?:\\d{3})?"],[,,"8(?:[04]9[2-9]\\d{6}|29(?:2(?:[0-59]\\d|6[04-9]|7[0-27]|8[0237-9])|3(?:[0-35-9]\\d|4[7-9])|[45]\\d{2}|6(?:[0-27-9]\\d|[3-5][1-9]|6[0135-8])|7(?:0[013-9]|[1-37]\\d|4[1-35689]|5[1-4689]|6[1-57-9]|8[1-79]|9[1-8])|8(?:0[146-9]|1[0-48]|[248]\\d|3[1-79]|5[01589]|6[013-68]|7[124-8]|9[0-8])|9(?:[0-24]\\d|3[02-46-9]|5[0-79]|60|7[0169]|8[57-9]|9[02-9]))\\d{4})","\\d{7}(?:\\d{3})?",,,"8092345678"],[,,"8[024]9[2-9]\\d{6}","\\d{7}(?:\\d{3})?",,,"8092345678"],[,,"8(?:00|44|55|66|77|88)[2-9]\\d{6}","\\d{10}",,,"8002123456"],[,,"900[2-9]\\d{6}","\\d{10}",,,"9002123456"],[,,"NA","NA"],[,,"5(?:00|33|44|66|77)[2-9]\\d{6}","\\d{10}",,,"5002345678"],[,,"NA","NA"],"DO",1,"011","1",,,"1",,,,,,[,,"NA","NA"],,"8[024]9",[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],DZ:[,[,,"(?:[1-4]|[5-9]\\d)\\d{7}","\\d{8,9}"],[,,"(?:1\\d|2[014-79]|3[0-8]|4[0135689])\\d{6}|9619\\d{5}","\\d{8,9}",,,"12345678"],[,,"(?:5[4-6]|7[7-9])\\d{7}|6(?:[569]\\d|7[0-4])\\d{6}","\\d{9}",,,"551234567"],[,,"800\\d{6}","\\d{9}",,,"800123456"],[,,"80[3-689]1\\d{5}","\\d{9}",,,"808123456"],[,,"80[12]1\\d{5}","\\d{9}",,,"801123456"],[,,"NA","NA"],[,,"98[23]\\d{6}","\\d{9}",,,"983123456"],"DZ",213,"00","0",,,"0",,,,[[,"([1-4]\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1","",0],[,"([5-8]\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1","",0],[,"(9\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],EC:[,[,,"1\\d{9,10}|[2-8]\\d{7}|9\\d{8}","\\d{7,11}"],[,,"[2-7][2-7]\\d{6}","\\d{7,8}",,,"22123456"],[,,"9(?:39|[45][89]|[67][7-9]|[89]\\d)\\d{6}","\\d{9}",,,"991234567"],[,,"1800\\d{6,7}","\\d{10,11}",,,"18001234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"[2-7]890\\d{4}","\\d{8}",,,"28901234"],"EC",593,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[247]|[356][2-8]"],"(0$1)","",0],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1","",0],[,"(1800)(\\d{3})(\\d{3,4})","$1 $2 $3",["1"],"$1","",0]],[[,"(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[247]|[356][2-8]"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1","",0],[,"(1800)(\\d{3})(\\d{3,4})","$1 $2 $3",["1"],"$1","",0]],[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],EE:[,[,,"1\\d{3,4}|[3-9]\\d{6,7}|800\\d{6,7}","\\d{4,10}"],[,,"(?:3[23589]|4[3-8]|6\\d|7[1-9]|88)\\d{5}","\\d{7}",,,"3212345"],[,,"(?:5\\d|8[1-5])\\d{6}|5(?:[02]\\d{2}|1(?:[0-8]\\d|95)|5[0-478]\\d|64[0-4]|65[1-589])\\d{3}","\\d{7,8}",,,"51234567"],[,,"800(?:0\\d{3}|1\\d|[2-9])\\d{3}","\\d{7,10}",,,"80012345"],[,,"(?:40\\d{2}|900)\\d{4}","\\d{7,8}",,,"9001234"],[,,"NA","NA"],[,,"70[0-2]\\d{5}","\\d{8}",,,"70012345"],[,,"NA","NA"],"EE",372,"00",,,,,,,,[[,"([3-79]\\d{2})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]"],"","",0],[,"(70)(\\d{2})(\\d{4})","$1 $2 $3",["70"],"","",0],[,"(8000)(\\d{3})(\\d{3})","$1 $2 $3",["800","8000"],"","",0],[,"([458]\\d{3})(\\d{3,4})","$1 $2",["40|5|8(?:00|[1-5])","40|5|8(?:00[1-9]|[1-5])"],"","",0]],,[,,"NA","NA"],,,[,,"1\\d{3,4}|800[2-9]\\d{3}","\\d{4,7}",,,"8002123"],[,,"1(?:2[01245]|3[0-6]|4[1-489]|5[0-59]|6[1-46-9]|7[0-27-9]|8[189]|9[012])\\d{1,2}","\\d{4,5}",,,"12123"],,,[,,"NA","NA"]],EG:[,[,,"1\\d{4,9}|[2456]\\d{8}|3\\d{7}|[89]\\d{8,9}","\\d{5,10}"],[,,"(?:1(?:3[23]\\d|5(?:[23]|9\\d))|2[2-4]\\d{2}|3\\d{2}|4(?:0[2-5]|[578][23]|64)\\d|5(?:0[2-7]|[57][23])\\d|6[24-689]3\\d|8(?:2[2-57]|4[26]|6[237]|8[2-4])\\d|9(?:2[27]|3[24]|52|6[2356]|7[2-4])\\d)\\d{5}|1[69]\\d{3}","\\d{5,9}",,,"234567890"],[,,"1(?:0[0-269]|1[0-245]|2[0-278])\\d{7}","\\d{10}",,,"1001234567"],[,,"800\\d{7}","\\d{10}",,,"8001234567"],[,,"900\\d{7}","\\d{10}",,,"9001234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"EG",20,"00","0",,,"0",,,,[[,"(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1","",0],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1[012]|[89]00"],"0$1","",0],[,"(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|[89][2-9]"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],EH:[,[,,"[5689]\\d{8}","\\d{9}"],[,,"528[89]\\d{5}","\\d{9}",,,"528812345"],[,,"6(?:0[0-8]|[12-7]\\d|8[01]|9[2457-9])\\d{6}","\\d{9}",,,"650123456"],[,,"80\\d{7}","\\d{9}",,,"801234567"],[,,"89\\d{7}","\\d{9}",,,"891234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"EH",212,"00","0",,,"0",,,,,,[,,"NA","NA"],,"528[89]",[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],ER:[,[,,"[178]\\d{6}","\\d{6,7}"],[,,"1(?:1[12568]|20|40|55|6[146])\\d{4}|8\\d{6}","\\d{6,7}",,,"8370362"],[,,"17[1-3]\\d{4}|7\\d{6}","\\d{7}",,,"7123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"ER",291,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",,"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],ES:[,[,,"[5-9]\\d{8}","\\d{9}"],[,,"8(?:[13]0|[28][0-8]|[47][1-9]|5[01346-9]|6[0457-9])\\d{6}|9(?:[1238][0-8]\\d{6}|4[1-9]\\d{6}|5\\d{7}|6(?:[0-8]\\d{6}|9(?:0(?:[0-57-9]\\d{4}|6(?:0[0-8]|1[1-9]|[2-9]\\d)\\d{2})|[1-9]\\d{5}))|7(?:[124-9]\\d{2}|3(?:[0-8]\\d|9[1-9]))\\d{4})","\\d{9}",,,"810123456"],[,,"(?:6\\d{6}|7[1-4]\\d{5}|9(?:6906(?:09|10)|7390\\d{2}))\\d{2}","\\d{9}",,,"612345678"],[,,"[89]00\\d{6}","\\d{9}",,,"800123456"],[,,"80[367]\\d{6}","\\d{9}",,,"803123456"],[,,"90[12]\\d{6}","\\d{9}",,,"901123456"],[,,"70\\d{7}","\\d{9}",,,"701234567"],[,,"NA","NA"],"ES",34,"00",,,,,,,,[[,"([5-9]\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[568]|[79][0-8]"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"51\\d{7}","\\d{9}",,,"511234567"],,,[,,"NA","NA"]],ET:[,[,,"[1-59]\\d{8}","\\d{7,9}"],[,,"(?:11(?:1(?:1[124]|2[2-57]|3[1-5]|5[5-8]|8[6-8])|2(?:13|3[6-8]|5[89]|7[05-9]|8[2-6])|3(?:2[01]|3[0-289]|4[1289]|7[1-4]|87)|4(?:1[69]|3[2-49]|4[0-3]|6[5-8])|5(?:1[57]|44|5[0-4])|6(?:18|2[69]|4[5-7]|5[1-5]|6[0-59]|8[015-8]))|2(?:2(?:11[1-9]|22[0-7]|33\\d|44[1467]|66[1-68])|5(?:11[124-6]|33[2-8]|44[1467]|55[14]|66[1-3679]|77[124-79]|880))|3(?:3(?:11[0-46-8]|22[0-6]|33[0134689]|44[04]|55[0-6]|66[01467])|4(?:44[0-8]|55[0-69]|66[0-3]|77[1-5]))|4(?:6(?:22[0-24-7]|33[1-5]|44[13-69]|55[14-689]|660|88[1-4])|7(?:11[1-9]|22[1-9]|33[13-7]|44[13-6]|55[1-689]))|5(?:7(?:227|55[05]|(?:66|77)[14-8])|8(?:11[149]|22[013-79]|33[0-68]|44[013-8]|550|66[1-5]|77\\d)))\\d{4}","\\d{7,9}",,,"111112345"],[,,"9(?:[1-3]\\d|5[89])\\d{6}","\\d{9}",,,"911234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"ET",251,"00","0",,,"0",,,,[[,"([1-59]\\d)(\\d{3})(\\d{4})","$1 $2 $3",,"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],
FI:[,[,,"1\\d{4,11}|[2-9]\\d{4,10}","\\d{5,12}"],[,,"1(?:[3569][1-8]\\d{3,9}|[47]\\d{5,10})|2[1-8]\\d{3,9}|3(?:[1-8]\\d{3,9}|9\\d{4,8})|[5689][1-8]\\d{3,9}","\\d{5,12}",,,"1312345678"],[,,"4\\d{5,10}|50\\d{4,8}","\\d{6,11}",,,"412345678"],[,,"800\\d{4,7}","\\d{7,10}",,,"8001234567"],[,,"[67]00\\d{5,6}","\\d{8,9}",,,"600123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"FI",358,"00|99[049]","0",,,"0",,,,[[,"(\\d{3})(\\d{3,7})","$1 $2",["(?:[1-3]00|[6-8]0)"],"0$1","",0],[,"(\\d{2})(\\d{4,10})","$1 $2",["[14]|2[09]|50|7[135]"],"0$1","",0],[,"(\\d)(\\d{4,11})","$1 $2",["[25689][1-8]|3"],"0$1","",0]],,[,,"NA","NA"],1,,[,,"[13]00\\d{3,7}|2(?:0(?:0\\d{3,7}|2[023]\\d{1,6}|9[89]\\d{1,6}))|60(?:[12]\\d{5,6}|6\\d{7})|7(?:1\\d{7}|3\\d{8}|5[03-9]\\d{2,7})","\\d{5,10}",,,"100123"],[,,"[13]0\\d{4,8}|2(?:0(?:[016-8]\\d{3,7}|[2-59]\\d{2,7})|9\\d{4,8})|60(?:[12]\\d{5,6}|6\\d{7})|7(?:1\\d{7}|3\\d{8}|5[03-9]\\d{2,7})","\\d{5,10}",,,"10112345"],,,[,,"NA","NA"]],FJ:[,[,,"[36-9]\\d{6}|0\\d{10}","\\d{7}(?:\\d{4})?"],[,,"(?:3[0-5]|6[25-7]|8[58])\\d{5}","\\d{7}",,,"3212345"],[,,"(?:7[0-8]|8[034679]|9\\d)\\d{5}","\\d{7}",,,"7012345"],[,,"0800\\d{7}","\\d{11}",,,"08001234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"FJ",679,"0(?:0|52)",,,,,,"00",,[[,"(\\d{3})(\\d{4})","$1 $2",["[36-9]"],"","",0],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],1,,[,,"NA","NA"]],FK:[,[,,"[2-7]\\d{4}","\\d{5}"],[,,"[2-47]\\d{4}","\\d{5}",,,"31234"],[,,"[56]\\d{4}","\\d{5}",,,"51234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"FK",500,"00",,,,,,,,,,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],FM:[,[,,"[39]\\d{6}","\\d{7}"],[,,"3[2357]0[1-9]\\d{3}|9[2-6]\\d{5}","\\d{7}",,,"3201234"],[,,"3[2357]0[1-9]\\d{3}|9[2-7]\\d{5}","\\d{7}",,,"3501234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"FM",691,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],FO:[,[,,"[2-9]\\d{5}","\\d{6}"],[,,"(?:20|[3-4]\\d|8[19])\\d{4}","\\d{6}",,,"201234"],[,,"(?:2[1-9]|5\\d|7[1-79])\\d{4}","\\d{6}",,,"211234"],[,,"80[257-9]\\d{3}","\\d{6}",,,"802123"],[,,"90(?:[1345][15-7]|2[125-7]|99)\\d{2}","\\d{6}",,,"901123"],[,,"NA","NA"],[,,"NA","NA"],[,,"(?:6[0-36]|88)\\d{4}","\\d{6}",,,"601234"],"FO",298,"00",,,,"(10(?:01|[12]0|88))",,,,[[,"(\\d{6})","$1",,"","$CC $1",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],FR:[,[,,"[1-9]\\d{8}","\\d{9}"],[,,"[1-5]\\d{8}","\\d{9}",,,"123456789"],[,,"6\\d{8}|7[5-9]\\d{7}","\\d{9}",,,"612345678"],[,,"80\\d{7}","\\d{9}",,,"801234567"],[,,"89[1-37-9]\\d{6}","\\d{9}",,,"891123456"],[,,"8(?:1[019]|2[0156]|84|90)\\d{6}","\\d{9}",,,"810123456"],[,,"NA","NA"],[,,"9\\d{8}","\\d{9}",,,"912345678"],"FR",33,"00","0",,,"0",,,,[[,"([1-79])(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1","",0],[,"(1\\d{2})(\\d{3})","$1 $2",["11"],"$1","",0],[,"(8\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1","",0]],[[,"([1-79])(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1","",0],[,"(8\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1","",0]],[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],GA:[,[,,"0?\\d{7}","\\d{7,8}"],[,,"01\\d{6}","\\d{8}",,,"01441234"],[,,"0?[2-7]\\d{6}","\\d{7,8}",,,"06031234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"GA",241,"00",,,,,,,,[[,"(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1","",0],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],1,,[,,"NA","NA"]],GB:[,[,,"\\d{7,10}","\\d{4,10}"],[,,"2(?:0[01378]|3[0189]|4[017]|8[0-46-9]|9[012])\\d{7}|1(?:(?:1(?:3[0-48]|[46][0-4]|5[012789]|7[0-49]|8[01349])|21[0-7]|31[0-8]|[459]1\\d|61[0-46-9]))\\d{6}|1(?:2(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-4789]|7[013-9]|9\\d)|3(?:0\\d|[25][02-9]|3[02-579]|[468][0-46-9]|7[1235679]|9[24578])|4(?:0[03-9]|[28][02-5789]|[37]\\d|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1235-9]|2[024-9]|3[015689]|4[02-9]|5[03-9]|6\\d|7[0-35-9]|8[0-468]|9[0-5789])|6(?:0[034689]|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0124578])|7(?:0[0246-9]|2\\d|3[023678]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-5789]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|2[02-689]|3[1-5789]|4[2-9]|5[0-579]|6[234789]|7[0124578]|8\\d|9[2-57]))\\d{6}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-4789]|8[345])))|3(?:638[2-5]|647[23]|8(?:47[04-9]|64[015789]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[123]))|5(?:24(?:3[2-79]|6\\d)|276\\d|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[567]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|955[0-4])|7(?:26(?:6[13-9]|7[0-7])|442\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|84(?:3[2-58]))|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}|176888[234678]\\d{2}|16977[23]\\d{3}","\\d{4,10}",,,"1212345678"],[,,"7(?:[1-4]\\d\\d|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[04-9]\\d|1[02-9]|2[0-35-9]|3[0-689]))\\d{6}","\\d{10}",,,"7400123456"],[,,"80(?:0(?:1111|\\d{6,7})|8\\d{7})|500\\d{6}","\\d{7}(?:\\d{2,3})?",,,"8001234567"],[,,"(?:87[123]|9(?:[01]\\d|8[2349]))\\d{7}","\\d{10}",,,"9012345678"],[,,"8(?:4(?:5464\\d|[2-5]\\d{7})|70\\d{7})","\\d{7}(?:\\d{3})?",,,"8431234567"],[,,"70\\d{8}","\\d{10}",,,"7012345678"],[,,"56\\d{8}","\\d{10}",,,"5612345678"],"GB",44,"00","0"," x",,"0",,,,[[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2|5[56]|7(?:0|6[013-9])","2|5[56]|7(?:0|6(?:[013-9]|2[0-35-9]))"],"0$1","",0],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:1|\\d1)|3|9[018]"],"0$1","",0],[,"(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:387|5(?:24|39)|697|768|946)","1(?:3873|5(?:242|39[456])|697[347]|768[347]|9467)"],"0$1","",0],[,"(1\\d{3})(\\d{5,6})","$1 $2",["1"],"0$1","",0],[,"(7\\d{3})(\\d{6})","$1 $2",["7(?:[1-5789]|62)","7(?:[1-5789]|624)"],"0$1","",0],[,"(800)(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1","",0],[,"(845)(46)(4\\d)","$1 $2 $3",["845","8454","84546","845464"],"0$1","",0],[,"(8\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8(?:4[2-5]|7[0-3])"],"0$1","",0],[,"(80\\d)(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1","",0],[,"([58]00)(\\d{6})","$1 $2",["[58]00"],"0$1","",0]],,[,,"76(?:0[012]|2[356]|4[0134]|5[49]|6[0-369]|77|81|9[39])\\d{6}","\\d{10}",,,"7640123456"],1,,[,,"NA","NA"],[,,"(?:3[0347]|55)\\d{8}","\\d{10}",,,"5512345678"],,,[,,"NA","NA"]],GD:[,[,,"[4589]\\d{9}","\\d{7}(?:\\d{3})?"],[,,"473(?:2(?:3[0-2]|69)|3(?:2[89]|86)|4(?:[06]8|3[5-9]|4[0-49]|5[5-79]|68|73|90)|63[68]|7(?:58|84)|800|938)\\d{4}","\\d{7}(?:\\d{3})?",,,"4732691234"],[,,"473(?:4(?:0[2-79]|1[04-9]|20|58)|5(?:2[01]|3[3-8])|901)\\d{4}","\\d{10}",,,"4734031234"],[,,"8(?:00|44|55|66|77|88)[2-9]\\d{6}","\\d{10}",,,"8002123456"],[,,"900[2-9]\\d{6}","\\d{10}",,,"9002123456"],[,,"NA","NA"],[,,"5(?:00|33|44|66|77)[2-9]\\d{6}","\\d{10}",,,"5002345678"],[,,"NA","NA"],"GD",1,"011","1",,,"1",,,,,,[,,"NA","NA"],,"473",[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],GE:[,[,,"[34578]\\d{8}","\\d{6,9}"],[,,"(?:3(?:[256]\\d|4[124-9]|7[0-4])|4(?:1\\d|2[2-7]|3[1-79]|4[2-8]|7[239]|9[1-7]))\\d{6}","\\d{6,9}",,,"322123456"],[,,"5(?:14|5[01578]|68|7[0147-9]|9[0-35-9])\\d{6}","\\d{9}",,,"555123456"],[,,"800\\d{6}","\\d{9}",,,"800123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"706\\d{6}","\\d{9}",,,"706123456"],"GE",995,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1","",0],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1","",0],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5"],"$1","",0]],,[,,"NA","NA"],,,[,,"706\\d{6}","\\d{9}",,,"706123456"],[,,"NA","NA"],,,[,,"NA","NA"]],GF:[,[,,"[56]\\d{8}","\\d{9}"],[,,"594(?:10|2[012457-9]|3[0-57-9]|4[3-9]|5[7-9]|6[0-3]|9[014])\\d{4}","\\d{9}",,,"594101234"],[,,"694(?:[04][0-7]|1[0-5]|3[018]|[29]\\d)\\d{4}","\\d{9}",,,"694201234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"GF",594,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",,"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],GG:[,[,,"[135789]\\d{6,9}","\\d{6,10}"],[,,"1481\\d{6}","\\d{6,10}",,,"1481456789"],[,,"7(?:781|839|911)\\d{6}","\\d{10}",,,"7781123456"],[,,"80(?:0(?:1111|\\d{6,7})|8\\d{7})|500\\d{6}","\\d{7}(?:\\d{2,3})?",,,"8001234567"],[,,"(?:87[123]|9(?:[01]\\d|8[0-3]))\\d{7}","\\d{10}",,,"9012345678"],[,,"8(?:4(?:5464\\d|[2-5]\\d{7})|70\\d{7})","\\d{7}(?:\\d{3})?",,,"8431234567"],[,,"70\\d{8}","\\d{10}",,,"7012345678"],[,,"56\\d{8}","\\d{10}",,,"5612345678"],"GG",44,"00","0"," x",,"0",,,,,,[,,"76(?:0[012]|2[356]|4[0134]|5[49]|6[0-369]|77|81|9[39])\\d{6}","\\d{10}",,,"7640123456"],,,[,,"NA","NA"],[,,"(?:3[0347]|55)\\d{8}","\\d{10}",,,"5512345678"],,,[,,"NA","NA"]],GH:[,[,,"[235]\\d{8}|8\\d{7}","\\d{7,9}"],[,,"3(?:0[237]\\d|[167](?:2[0-6]|7\\d)|2(?:2[0-5]|7\\d)|3(?:2[0-3]|7\\d)|4(?:2[013-9]|3[01]|7\\d)|5(?:2[0-7]|7\\d)|8(?:2[0-2]|7\\d)|9(?:20|7\\d))\\d{5}","\\d{7,9}",,,"302345678"],[,,"(?:2[034678]\\d|5(?:[047]\\d|54))\\d{6}","\\d{9}",,,"231234567"],[,,"800\\d{5}","\\d{8}",,,"80012345"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"GH",233,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1","",0],[,"(\\d{3})(\\d{5})","$1 $2",["8"],"0$1","",0]],,[,,"NA","NA"],,,[,,"800\\d{5}","\\d{8}",,,"80012345"],[,,"NA","NA"],,,[,,"NA","NA"]],GI:[,[,,"[2568]\\d{7}","\\d{8}"],[,,"2(?:00\\d|1(?:6[24-7]|9\\d)|2(?:00|2[2457]))\\d{4}","\\d{8}",,,"20012345"],[,,"(?:5[46-8]|62)\\d{6}","\\d{8}",,,"57123456"],[,,"80\\d{6}","\\d{8}",,,"80123456"],[,,"8[1-689]\\d{6}","\\d{8}",,,"88123456"],[,,"87\\d{6}","\\d{8}",,,"87123456"],[,,"NA","NA"],[,,"NA","NA"],"GI",350,"00",,,,,,,,[[,"(\\d{3})(\\d{5})","$1 $2",["2"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],GL:[,[,,"[1-689]\\d{5}","\\d{6}"],[,,"(?:19|3[1-6]|6[14689]|8[14-79]|9\\d)\\d{4}","\\d{6}",,,"321000"],[,,"[245][2-9]\\d{4}","\\d{6}",,,"221234"],[,,"80\\d{4}","\\d{6}",,,"801234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"3[89]\\d{4}","\\d{6}",,,"381234"],"GL",299,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],GM:[,[,,"[2-9]\\d{6}","\\d{7}"],[,,"(?:4(?:[23]\\d{2}|4(?:1[024679]|[6-9]\\d))|5(?:54[0-7]|6(?:[67]\\d)|7(?:1[04]|2[035]|3[58]|48))|8\\d{3})\\d{3}","\\d{7}",,,"5661234"],[,,"(?:2[0-6]|[3679]\\d)\\d{5}","\\d{7}",,,"3012345"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"GM",220,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],GN:[,[,,"[367]\\d{7,8}","\\d{8,9}"],[,,"30(?:24|3[12]|4[1-35-7]|5[13]|6[189]|[78]1|9[1478])\\d{4}","\\d{8}",,,"30241234"],[,,"6[02356]\\d{7}","\\d{9}",,,"601123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"722\\d{6}","\\d{9}",,,"722123456"],"GN",224,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"],"","",0],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],GP:[,[,,"[56]\\d{8}","\\d{9}"],[,,"590(?:0[13468]|1[012]|2[0-68]|3[28]|4[0-8]|5[579]|6[0189]|70|8[0-689]|9\\d)\\d{4}","\\d{9}",,,"590201234"],[,,"690(?:0[0-7]|[1-9]\\d)\\d{4}","\\d{9}",,,"690301234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"GP",590,"00","0",,,"0",,,,[[,"([56]90)(\\d{2})(\\d{4})","$1 $2-$3",,"0$1","",0]],,[,,"NA","NA"],1,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],GQ:[,[,,"[23589]\\d{8}","\\d{9}"],[,,"3(?:3(?:3\\d[7-9]|[0-24-9]\\d[46])|5\\d{2}[7-9])\\d{4}","\\d{9}",,,"333091234"],[,,"(?:222|551)\\d{6}","\\d{9}",,,"222123456"],[,,"80\\d[1-9]\\d{5}","\\d{9}",,,"800123456"],[,,"90\\d[1-9]\\d{5}","\\d{9}",,,"900123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"GQ",240,"00",,,,,,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"],"","",0],[,"(\\d{3})(\\d{6})","$1 $2",["[89]"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],GR:[,[,,"[26-9]\\d{9}","\\d{10}"],[,,"2(?:1\\d{2}|2(?:2[1-46-9]|3[1-8]|4[1-7]|5[1-4]|6[1-8]|7[1-5]|[89][1-9])|3(?:1\\d|2[1-57]|[35][1-3]|4[13]|7[1-7]|8[124-6]|9[1-79])|4(?:1\\d|2[1-8]|3[1-4]|4[13-5]|6[1-578]|9[1-5])|5(?:1\\d|[29][1-4]|3[1-5]|4[124]|5[1-6])|6(?:1\\d|3[1245]|4[1-7]|5[13-9]|[269][1-6]|7[14]|8[1-5])|7(?:1\\d|2[1-5]|3[1-6]|4[1-7]|5[1-57]|6[135]|9[125-7])|8(?:1\\d|2[1-5]|[34][1-4]|9[1-57]))\\d{6}","\\d{10}",,,"2123456789"],[,,"69\\d{8}","\\d{10}",,,"6912345678"],[,,"800\\d{7}","\\d{10}",,,"8001234567"],[,,"90[19]\\d{7}","\\d{10}",,,"9091234567"],[,,"8(?:0[16]|12|25)\\d{7}","\\d{10}",,,"8011234567"],[,,"70\\d{8}","\\d{10}",,,"7012345678"],[,,"NA","NA"],"GR",30,"00",,,,,,,,[[,"([27]\\d)(\\d{4})(\\d{4})","$1 $2 $3",["21|7"],"","",0],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["2[2-9]1|[689]"],"","",0],[,"(2\\d{3})(\\d{6})","$1 $2",["2[2-9][02-9]"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],GT:[,[,,"[2-7]\\d{7}|1[89]\\d{9}","\\d{8}(?:\\d{3})?"],[,,"[267][2-9]\\d{6}","\\d{8}",,,"22456789"],[,,"[345]\\d{7}","\\d{8}",,,"51234567"],[,,"18[01]\\d{8}","\\d{11}",,,"18001112222"],[,,"19\\d{9}","\\d{11}",,,"19001112222"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"GT",502,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[2-7]"],"","",0],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],GU:[,[,,"[5689]\\d{9}","\\d{7}(?:\\d{3})?"],[,,"671(?:3(?:00|3[39]|4[349]|55|6[26])|4(?:56|7[1-9]|8[236-9])|5(?:55|6[2-5]|88)|6(?:3[2-578]|4[24-9]|5[34]|78|8[5-9])|7(?:[079]7|2[0167]|3[45]|8[789])|8(?:[2-5789]8|6[48])|9(?:2[29]|6[79]|7[179]|8[789]|9[78]))\\d{4}","\\d{7}(?:\\d{3})?",,,"6713001234"],[,,"671(?:3(?:00|3[39]|4[349]|55|6[26])|4(?:56|7[1-9]|8[236-9])|5(?:55|6[2-5]|88)|6(?:3[2-578]|4[24-9]|5[34]|78|8[5-9])|7(?:[079]7|2[0167]|3[45]|8[789])|8(?:[2-5789]8|6[48])|9(?:2[29]|6[79]|7[179]|8[789]|9[78]))\\d{4}","\\d{7}(?:\\d{3})?",,,"6713001234"],[,,"8(?:00|44|55|66|77|88)[2-9]\\d{6}","\\d{10}",,,"8002123456"],[,,"900[2-9]\\d{6}","\\d{10}",,,"9002123456"],[,,"NA","NA"],[,,"5(?:00|33|44|66|77)[2-9]\\d{6}","\\d{10}",,,"5002345678"],[,,"NA","NA"],"GU",1,"011","1",,,"1",,,1,,,[,,"NA","NA"],,"671",[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],GW:[,[,,"[3-79]\\d{6}","\\d{7}"],[,,"3(?:2[0125]|3[1245]|4[12]|5[1-4]|70|9[1-467])\\d{4}","\\d{7}",,,"3201234"],[,,"(?:[5-7]\\d|9[012])\\d{5}","\\d{7}",,,"5012345"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"40\\d{5}","\\d{7}",,,"4012345"],"GW",245,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],GY:[,[,,"[2-4679]\\d{6}","\\d{7}"],[,,"(?:2(?:1[6-9]|2[0-35-9]|3[1-4]|5[3-9]|6\\d|7[0-24-79])|3(?:2[25-9]|3\\d)|4(?:4[0-24]|5[56])|77[1-57])\\d{4}","\\d{7}",,,"2201234"],[,,"6\\d{6}","\\d{7}",,,"6091234"],[,,"(?:289|862)\\d{4}","\\d{7}",,,"2891234"],[,,"9008\\d{3}","\\d{7}",,,"9008123"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"GY",592,"001",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],HK:[,[,,"[235-7]\\d{7}|8\\d{7,8}|9\\d{4,10}","\\d{5,11}"],[,,"(?:[23]\\d|5[78])\\d{6}","\\d{8}",,,"21234567"],[,,"(?:5[1-69]\\d|6\\d{2}|9(?:0[1-9]|[1-8]\\d))\\d{5}","\\d{8}",,,"51234567"],[,,"800\\d{6}","\\d{9}",,,"800123456"],[,,"900(?:[0-24-9]\\d{7}|3\\d{1,4})","\\d{5,11}",,,"90012345678"],[,,"NA","NA"],[,,"8[1-3]\\d{6}","\\d{8}",,,"81123456"],[,,"NA","NA"],"HK",852,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[235-7]|[89](?:0[1-9]|[1-9])"],"","",0],[,"(800)(\\d{3})(\\d{3})","$1 $2 $3",["800"],"","",0],[,"(900)(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["900"],"","",0],[,"(900)(\\d{2,5})","$1 $2",["900"],"","",0]],,[,,"7\\d{7}","\\d{8}",,,"71234567"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],HN:[,[,,"[237-9]\\d{7}","\\d{8}"],[,,"2(?:2(?:0[019]|1[1-36]|[23]\\d|4[056]|5[57]|7[01389]|8[0146-9]|9[012])|4(?:2[3-59]|3[13-689]|4[0-68]|5[1-35])|5(?:4[3-5]|5\\d|6[56]|74)|6(?:[056]\\d|4[0-378]|[78][0-8]|9[01])|7(?:6[46-9]|7[02-9]|8[34])|8(?:79|8[0-35789]|9[1-57-9]))\\d{4}","\\d{8}",,,"22123456"],[,,"[37-9]\\d{7}","\\d{8}",,,"91234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"HN",504,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1-$2",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],HR:[,[,,"[1-7]\\d{5,8}|[89]\\d{6,11}","\\d{6,12}"],[,,"1\\d{7}|(?:2[0-3]|3[1-5]|4[02-47-9]|5[1-3])\\d{6}","\\d{6,8}",,,"12345678"],[,,"9[1257-9]\\d{6,10}","\\d{8,12}",,,"912345678"],[,,"80[01]\\d{4,7}","\\d{7,10}",,,"8001234567"],[,,"6(?:[09]\\d{7}|[145]\\d{4,7})","\\d{6,9}",,,"611234"],[,,"NA","NA"],[,,"7[45]\\d{4,7}","\\d{6,9}",,,"741234567"],[,,"NA","NA"],"HR",385,"00","0",,,"0",,,,[[,"(1)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1","",0],[,"(6[09])(\\d{4})(\\d{3})","$1 $2 $3",["6[09]"],"0$1","",0],[,"(62)(\\d{3})(\\d{3,4})","$1 $2 $3",["62"],"0$1","",0],[,"([2-5]\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-5]"],"0$1","",0],[,"(9\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1","",0],[,"(9\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9"],"0$1","",0],[,"(9\\d)(\\d{3,4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"],"0$1","",0],[,"(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["6[145]|7"],"0$1","",0],[,"(\\d{2})(\\d{3,4})(\\d{3})","$1 $2 $3",["6[145]|7"],"0$1","",0],[,"(80[01])(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1","",0],[,"(80[01])(\\d{3,4})(\\d{3})","$1 $2 $3",["8"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"62\\d{6,7}","\\d{8,9}",,,"62123456"],,,[,,"NA","NA"]],HT:[,[,,"[2-489]\\d{7}","\\d{8}"],[,,"2(?:[24]\\d|5[1-5]|94)\\d{5}","\\d{8}",,,"22453300"],[,,"(?:3[1-9]|4\\d)\\d{6}","\\d{8}",,,"34101234"],[,,"8\\d{7}","\\d{8}",,,"80012345"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"98[89]\\d{5}","\\d{8}",,,"98901234"],"HT",509,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],HU:[,[,,"[1-9]\\d{7,8}","\\d{6,9}"],[,,"(?:1\\d|2(?:1\\d|[2-9])|3[2-7]|4[24-9]|5[2-79]|6[23689]|7(?:1\\d|[2-9])|8[2-57-9]|9[2-69])\\d{6}","\\d{6,9}",,,"12345678"],[,,"(?:[27]0|3[01])\\d{7}","\\d{9}",,,"201234567"],[,,"80\\d{6}","\\d{8}",,,"80123456"],[,,"9[01]\\d{6}","\\d{8}",,,"90123456"],[,,"40\\d{6}","\\d{8}",,,"40123456"],[,,"NA","NA"],[,,"NA","NA"],"HU",36,"00","06",,,"06",,,,[[,"(1)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"($1)","",0],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"($1)","",0]],,[,,"NA","NA"],,,[,,"[48]0\\d{6}","\\d{8}",,,"80123456"],[,,"NA","NA"],,,[,,"NA","NA"]],ID:[,[,,"[1-9]\\d{6,10}","\\d{5,11}"],[,,"2(?:1(?:14\\d{3}|[0-8]\\d{6,7}|500\\d{3}|9\\d{6})|2\\d{6,8}|4\\d{7,8})|(?:2(?:[35][1-4]|6[0-8]|7[1-6]|8\\d|9[1-8])|3(?:1|2[1-578]|3[1-68]|4[1-3]|5[1-8]|6[1-3568]|7[0-46]|8\\d)|4(?:0[1-589]|1[01347-9]|2[0-36-8]|3[0-24-68]|5[1-378]|6[1-5]|7[134]|8[1245])|5(?:1[1-35-9]|2[25-8]|3[1246-9]|4[1-3589]|5[1-46]|6[1-8])|6(?:19?|[25]\\d|3[1-469]|4[1-6])|7(?:1[1-9]|2[14-9]|[36]\\d|4[1-8]|5[1-9]|7[0-36-9])|9(?:0[12]|1[013-8]|2[0-479]|5[125-8]|6[23679]|7[159]|8[01346]))\\d{5,8}","\\d{5,11}",,,"612345678"],[,,"(?:2(?:1(?:3[145]|4[01]|5[1-469]|60|8[0359]|9\\d)|2(?:88|9[1256])|3[1-4]9|4(?:36|91)|5(?:1[349]|[2-4]9)|6[0-7]9|7(?:[1-36]9|4[39])|8[1-5]9|9[1-48]9)|3(?:19[1-3]|2[12]9|3[13]9|4(?:1[69]|39)|5[14]9|6(?:1[69]|2[89])|709)|4[13]19|5(?:1(?:19|8[39])|4[129]9|6[12]9)|6(?:19[12]|2(?:[23]9|77))|7(?:1[13]9|2[15]9|419|5(?:1[89]|29)|6[15]9|7[178]9))\\d{5,6}|8[1-35-9]\\d{7,9}","\\d{9,11}",,,"812345678"],[,,"177\\d{6,8}|800\\d{5,7}","\\d{8,11}",,,"8001234567"],[,,"809\\d{7}","\\d{10}",,,"8091234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"ID",62,"0(?:0[1789]|10(?:00|1[67]))","0",,,"0",,,,[[,"(\\d{2})(\\d{5,8})","$1 $2",["2[124]|[36]1"],"(0$1)","",0],[,"(\\d{3})(\\d{5,8})","$1 $2",["[4579]|2[035-9]|[36][02-9]"],"(0$1)","",0],[,"(8\\d{2})(\\d{3,4})(\\d{3,4})","$1-$2-$3",["8[1-35-9]"],"0$1","",0],[,"(177)(\\d{6,8})","$1 $2",["1"],"0$1","",0],[,"(800)(\\d{5,7})","$1 $2",["800"],"0$1","",0],[,"(80\\d)(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80[79]"],"0$1","",0]],,[,,"NA","NA"],,,[,,"8071\\d{6}","\\d{10}",,,"8071123456"],[,,"8071\\d{6}","\\d{10}",,,"8071123456"],,,[,,"NA","NA"]],IE:[,[,,"[124-9]\\d{6,9}","\\d{5,10}"],[,,"1\\d{7,8}|2(?:1\\d{6,7}|3\\d{7}|[24-9]\\d{5})|4(?:0[24]\\d{5}|[1-469]\\d{7}|5\\d{6}|7\\d{5}|8[0-46-9]\\d{7})|5(?:0[45]\\d{5}|1\\d{6}|[23679]\\d{7}|8\\d{5})|6(?:1\\d{6}|[237-9]\\d{5}|[4-6]\\d{7})|7[14]\\d{7}|9(?:1\\d{6}|[04]\\d{7}|[35-9]\\d{5})","\\d{5,10}",,,"2212345"],[,,"8(?:22\\d{6}|[35-9]\\d{7})","\\d{9}",,,"850123456"],[,,"1800\\d{6}","\\d{10}",,,"1800123456"],[,,"15(?:1[2-8]|[2-8]0|9[089])\\d{6}","\\d{10}",,,"1520123456"],[,,"18[59]0\\d{6}","\\d{10}",,,"1850123456"],[,,"700\\d{6}","\\d{9}",,,"700123456"],[,,"76\\d{7}","\\d{9}",,,"761234567"],"IE",353,"00","0",,,"0",,,,[[,"(1)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)","",0],[,"(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)","",0],[,"(\\d{3})(\\d{5})","$1 $2",["40[24]|50[45]"],"(0$1)","",0],[,"(48)(\\d{4})(\\d{4})","$1 $2 $3",["48"],"(0$1)","",0],[,"(818)(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)","",0],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[24-69]|7[14]"],"(0$1)","",0],[,"([78]\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["76|8[35-9]"],"0$1","",0],[,"(700)(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1","",0],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:8[059]|5)","1(?:8[059]0|5)"],"$1","",0]],,[,,"NA","NA"],,,[,,"18[59]0\\d{6}","\\d{10}",,,"1850123456"],[,,"818\\d{6}","\\d{9}",,,"818123456"],,,[,,"8[35-9]\\d{8}","\\d{10}",,,"8501234567"]],IL:[,[,,"[17]\\d{6,9}|[2-589]\\d{3}(?:\\d{3,6})?|6\\d{3}","\\d{4,10}"],[,,"[2-489]\\d{7}","\\d{7,8}",,,"21234567"],[,,"5(?:[02347-9]\\d{2}|5(?:01|2[23]|3[34]|4[45]|5[5689]|6[67]|7[78]|8[89]|9[7-9])|6[2-9]\\d)\\d{5}","\\d{9}",,,"501234567"],[,,"1(?:80[019]\\d{3}|255)\\d{3}","\\d{7,10}",,,"1800123456"],[,,"1(?:212|(?:9(?:0[01]|19)|200)\\d{2})\\d{4}","\\d{8,10}",,,"1919123456"],[,,"1700\\d{6}","\\d{10}",,,"1700123456"],[,,"NA","NA"],[,,"7(?:2[23]\\d|3[237]\\d|47\\d|6(?:5\\d|8[068])|7\\d{2}|8(?:33|55|77|81))\\d{5}","\\d{9}",,,"771234567"],"IL",972,"0(?:0|1[2-9])","0",,,"0",,,,[[,"([2-489])(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1","",0],[,"([57]\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1","",0],[,"(1)([7-9]\\d{2})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"],"$1","",0],[,"(1255)(\\d{3})","$1-$2",["125"],"$1","",0],[,"(1200)(\\d{3})(\\d{3})","$1-$2-$3",["120"],"$1","",0],[,"(1212)(\\d{2})(\\d{2})","$1-$2-$3",["121"],"$1","",0],[,"(1599)(\\d{6})","$1-$2",["15"],"$1","",0],[,"(\\d{4})","*$1",["[2-689]"],"$1","",0]],,[,,"NA","NA"],,,[,,"1700\\d{6}|[2-689]\\d{3}","\\d{4,10}",,,"1700123456"],[,,"[2-689]\\d{3}|1599\\d{6}","\\d{4}(?:\\d{6})?",,,"1599123456"],,,[,,"NA","NA"]],IM:[,[,,"[135789]\\d{6,9}","\\d{6,10}"],[,,"1624\\d{6}","\\d{6,10}",,,"1624456789"],[,,"7[569]24\\d{6}","\\d{10}",,,"7924123456"],[,,"808162\\d{4}","\\d{10}",,,"8081624567"],[,,"(?:872299|90[0167]624)\\d{4}","\\d{10}",,,"9016247890"],[,,"8(?:4(?:40[49]06|5624\\d)|70624\\d)\\d{3}","\\d{10}",,,"8456247890"],[,,"70\\d{8}","\\d{10}",,,"7012345678"],[,,"56\\d{8}","\\d{10}",,,"5612345678"],"IM",44,"00","0"," x",,"0",,,,,,[,,"NA","NA"],,,[,,"NA","NA"],[,,"3(?:08162\\d|3\\d{5}|4(?:40[49]06|5624\\d)|7(?:0624\\d|2299\\d))\\d{3}|55\\d{8}","\\d{10}",,,"5512345678"],,,[,,"NA","NA"]],IN:[,[,,"1\\d{7,12}|[2-9]\\d{9,10}","\\d{6,13}"],[,,"(?:11|2[02]|33|4[04]|79)[2-7]\\d{7}|80[2-467]\\d{7}|(?:1(?:2[0-249]|3[0-25]|4[145]|[59][14]|6[014]|7[1257]|8[01346])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[126-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:[136][25]|22|4[28]|5[12]|[78]1|9[15])|6(?:12|[2345]1|57|6[13]|7[14]|80)|7(?:12|2[14]|3[134]|4[47]|5[15]|[67]1|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91))[2-7]\\d{6}|(?:(?:1(?:2[35-8]|3[346-9]|4[236-9]|[59][0235-9]|6[235-9]|7[34689]|8[257-9])|2(?:1[134689]|3[24-8]|4[2-8]|5[25689]|6[2-4679]|7[13-79]|8[2-479]|9[235-9])|3(?:01|1[79]|2[1-5]|4[25-8]|5[125689]|6[235-7]|7[157-9]|8[2-467])|4(?:1[14578]|2[5689]|3[2-467]|5[4-7]|6[35]|73|8[2689]|9[2389])|5(?:[16][146-9]|2[14-8]|3[1346]|4[14-69]|5[46]|7[2-4]|8[2-8]|9[246])|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|[57][2-689]|6[24-578]|8[1-6])|8(?:1[1357-9]|2[235-8]|3[03-57-9]|4[0-24-9]|5\\d|6[2457-9]|7[1-6]|8[1256]|9[2-4]))\\d|7(?:(?:1[013-9]|2[0235-9]|3[2679]|4[1-35689]|5[2-46-9]|[67][02-9]|9\\d)\\d|8(?:2[0-6]|[013-8]\\d)))[2-7]\\d{5}","\\d{6,10}",,,"1123456789"],[,,"(?:7(?:0(?:2[2-9]|[3-8]\\d|9[0-4])|2(?:0[04-9]|5[09]|7[5-8]|9[389])|3(?:0[1-9]|[58]\\d|7[3679]|9[689])|4(?:0[1-9]|1[15-9]|[29][89]|39|8[389])|5(?:[034678]\\d|2[03-9]|5[017-9]|9[7-9])|6(?:0[0127]|1[0-257-9]|2[0-4]|3[19]|5[4589]|[6-9]\\d)|7(?:0[2-9]|[1-79]\\d|8[1-9])|8(?:[0-7]\\d|9[013-9]))|8(?:0(?:[01589]\\d|6[67])|1(?:[02-589]\\d|1[0135-9]|7[0-79])|2(?:[236-9]\\d|5[1-9])|3(?:[0357-9]\\d|4[1-9])|[45]\\d{2}|6[02457-9]\\d|7[1-69]\\d|8(?:[0-26-9]\\d|44|5[2-9])|9(?:[035-9]\\d|2[2-9]|4[0-8]))|9\\d{3})\\d{6}","\\d{10}",,,"9123456789"],[,,"1(?:600\\d{6}|80(?:0\\d{4,8}|3\\d{9}))","\\d{8,13}",,,"1800123456"],[,,"186[12]\\d{9}","\\d{13}",,,"1861123456789"],[,,"1860\\d{7}","\\d{11}",,,"18603451234"],[,,"NA","NA"],[,,"NA","NA"],"IN",91,"00","0",,,"0",,,,[[,"(\\d{5})(\\d{5})","$1 $2",["7(?:0[2-9]|2[0579]|3[057-9]|4[0-389]|6[0-35-9]|[57]|8[0-79])|8(?:0[015689]|1[0-57-9]|2[2356-9]|3[0-57-9]|[45]|6[02457-9]|7[1-69]|8[0124-9]|9[02-9])|9","7(?:0(?:2[2-9]|[3-8]|9[0-4])|2(?:0[04-9]|5[09]|7[5-8]|9[389])|3(?:0[1-9]|[58]|7[3679]|9[689])|4(?:0[1-9]|1[15-9]|[29][89]|39|8[389])|5(?:[034678]|2[03-9]|5[017-9]|9[7-9])|6(?:0[0-27]|1[0-257-9]|2[0-4]|3[19]|5[4589]|[6-9])|7(?:0[2-9]|[1-79]|8[1-9])|8(?:[0-7]|9[013-9]))|8(?:0(?:[01589]|6[67])|1(?:[02-589]|1[0135-9]|7[0-79])|2(?:[236-9]|5[1-9])|3(?:[0357-9]|4[1-9])|[45]|6[02457-9]|7[1-69]|8(?:[0-26-9]|44|5[2-9])|9(?:[035-9]|2[2-9]|4[0-8]))|9"],"0$1","",1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79|80[2-46]"],"0$1","",1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[569][14]|7[1257]|8[1346]|[68][1-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[126-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:[136][25]|22|4[28]|5[12]|[78]1|9[15])|6(?:12|[2345]1|57|6[13]|7[14]|80)"],"0$1","",1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7(?:12|2[14]|3[134]|4[47]|5[15]|[67]1|88)","7(?:12|2[14]|3[134]|4[47]|5(?:1|5[2-6])|[67]1|88)"],"0$1","",1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)"],"0$1","",1],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[23579]|[468][1-9])|[2-8]"],"0$1","",1],[,"(1600)(\\d{2})(\\d{4})","$1 $2 $3",["160","1600"],"$1","",1],[,"(1800)(\\d{4,5})","$1 $2",["180","1800"],"$1","",1],[,"(18[06]0)(\\d{2,4})(\\d{4})","$1 $2 $3",["18[06]","18[06]0"],"$1","",1],[,"(140)(\\d{3})(\\d{4})","$1 $2 $3",["140"],"$1","",1],[,"(\\d{4})(\\d{3})(\\d{4})(\\d{2})","$1 $2 $3 $4",["18[06]","18(?:03|6[12])"],"$1","",1]],,[,,"NA","NA"],,,[,,"1(?:600\\d{6}|8(?:0(?:0\\d{4,8}|3\\d{9})|6(?:0\\d{7}|[12]\\d{9})))","\\d{8,13}",,,"1800123456"],[,,"140\\d{7}","\\d{10}",,,"1409305260"],,,[,,"NA","NA"]],IO:[,[,,"3\\d{6}","\\d{7}"],[,,"37\\d{5}","\\d{7}",,,"3709100"],[,,"38\\d{5}","\\d{7}",,,"3801234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"IO",246,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],IQ:[,[,,"[1-7]\\d{7,9}","\\d{6,10}"],[,,"1\\d{7}|(?:2[13-5]|3[02367]|4[023]|5[03]|6[026])\\d{6,7}","\\d{6,9}",,,"12345678"],[,,"7[3-9]\\d{8}","\\d{10}",,,"7912345678"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"IQ",964,"00","0",,,"0",,,,[[,"(1)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1","",0],[,"([2-6]\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1","",0],[,"(7\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],IR:[,[,,"[1-8]\\d{9}|9(?:[0-4]\\d{8}|9\\d{2,8})","\\d{4,10}"],[,,"(?:1[137]|2[13-68]|3[1458]|4[145]|5[146-8]|6[146]|7[1467]|8[13467])\\d{8}","\\d{10}",,,"2123456789"],[,,"9(?:0[12]|[1-3]\\d)\\d{7}","\\d{10}",,,"9123456789"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"(?:[2-6]0\\d|993)\\d{7}","\\d{10}",,,"9932123456"],"IR",98,"00","0",,,"0",,,,[[,"(21)(\\d{3,5})","$1 $2",["21"],"0$1","",0],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1","",0],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1","",0],[,"(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["9"],"0$1","",0],[,"(\\d{3})(\\d{3})","$1 $2",["9"],"0$1","",0]],,[,,"943\\d{7}","\\d{10}",,,"9432123456"],,,[,,"NA","NA"],[,,"9990\\d{0,6}","\\d{4,10}",,,"9990123456"],,,[,,"NA","NA"]],IS:[,[,,"[4-9]\\d{6}|38\\d{7}","\\d{7,9}"],[,,"(?:4(?:1[0-24-6]|2[0-7]|[37][0-8]|4[0-245]|5[0-3568]|6\\d|8[0-36-8])|5(?:05|[156]\\d|2[02578]|3[013-7]|4[03-7]|7[0-2578]|8[0-35-9]|9[013-689])|87[23])\\d{4}","\\d{7}",,,"4101234"],[,,"38[589]\\d{6}|(?:6(?:1[1-8]|3[089]|4[0167]|5[019]|[67][0-69]|9\\d)|7(?:5[057]|7\\d|8[0-36-8])|8(?:2[0-5]|3[0-4]|[469]\\d|5[1-9]))\\d{4}","\\d{7,9}",,,"6111234"],[,,"800\\d{4}","\\d{7}",,,"8001234"],[,,"90\\d{5}","\\d{7}",,,"9011234"],[,,"NA","NA"],[,,"NA","NA"],[,,"49\\d{5}","\\d{7}",,,"4921234"],"IS",354,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[4-9]"],"","",0],[,"(3\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["3"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"(?:6(?:2[0-8]|49|8\\d)|87[0189]|95[48])\\d{4}","\\d{7}",,,"6201234"]],IT:[,[,,"[01589]\\d{5,10}|3(?:[12457-9]\\d{8}|[36]\\d{7,9})","\\d{6,11}"],[,,"0(?:[26]\\d{4,9}|(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2346]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[34578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7})","\\d{6,11}",,,"0212345678"],[,,"3(?:[12457-9]\\d{8}|6\\d{7,8}|3\\d{7,9})","\\d{9,11}",,,"3123456789"],[,,"80(?:0\\d{6}|3\\d{3})","\\d{6,9}",,,"800123456"],[,,"0878\\d{5}|1(?:44|6[346])\\d{6}|89(?:2\\d{3}|4(?:[0-4]\\d{2}|[5-9]\\d{4})|5(?:[0-4]\\d{2}|[5-9]\\d{6})|9\\d{6})","\\d{6,10}",,,"899123456"],[,,"84(?:[08]\\d{6}|[17]\\d{3})","\\d{6,9}",,,"848123456"],[,,"1(?:78\\d|99)\\d{6}","\\d{9,10}",,,"1781234567"],[,,"55\\d{8}","\\d{10}",,,"5512345678"],"IT",39,"00",,,,,,,,[[,"(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|55"],"","",0],[,"(0[26])(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"],"","",0],[,"(0[26])(\\d{4,6})","$1 $2",["0[26]"],"","",0],[,"(0\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]"],"","",0],[,"(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[245])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|[45][0-4]))"],"","",0],[,"(0\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["0[13-57-9][2-46-8]"],"","",0],[,"(0\\d{3})(\\d{2,6})","$1 $2",["0[13-57-9][2-46-8]"],"","",0],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13]|8(?:00|4[08]|9[59])","[13]|8(?:00|4[08]|9(?:5[5-9]|9))"],"","",0],[,"(\\d{4})(\\d{4})","$1 $2",["894","894[5-9]"],"","",0],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["3"],"","",0]],,[,,"NA","NA"],,,[,,"848\\d{6}","\\d{9}",,,"848123456"],[,,"NA","NA"],1,,[,,"NA","NA"]],JE:[,[,,"[135789]\\d{6,9}","\\d{6,10}"],[,,"1534\\d{6}","\\d{6,10}",,,"1534456789"],[,,"7(?:509|7(?:00|97)|829|937)\\d{6}","\\d{10}",,,"7797123456"],[,,"80(?:07(?:35|81)|8901)\\d{4}","\\d{10}",,,"8007354567"],[,,"(?:871206|90(?:066[59]|1810|71(?:07|55)))\\d{4}","\\d{10}",,,"9018105678"],[,,"8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|70002)\\d{4}","\\d{10}",,,"8447034567"],[,,"701511\\d{4}","\\d{10}",,,"7015115678"],[,,"56\\d{8}","\\d{10}",,,"5612345678"],"JE",44,"00","0"," x",,"0",,,,,,[,,"76(?:0[012]|2[356]|4[0134]|5[49]|6[0-369]|77|81|9[39])\\d{6}","\\d{10}",,,"7640123456"],,,[,,"NA","NA"],[,,"3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))\\d{4}|55\\d{8}","\\d{10}",,,"5512345678"],,,[,,"NA","NA"]],
JM:[,[,,"[589]\\d{9}","\\d{7}(?:\\d{3})?"],[,,"876(?:5(?:0[12]|1[0-468]|2[35]|63)|6(?:0[1-3579]|1[027-9]|[23]\\d|40|5[06]|6[2-589]|7[05]|8[04]|9[4-9])|7(?:0[2-689]|[1-6]\\d|8[056]|9[45])|9(?:0[1-8]|1[02378]|[2-8]\\d|9[2-468]))\\d{4}","\\d{7}(?:\\d{3})?",,,"8765123456"],[,,"876(?:2[1789]\\d|[348]\\d{2}|5(?:08|27|6[0-24-9]|[3-578]\\d)|7(?:0[07]|7\\d|8[1-47-9]|9[0-36-9])|9(?:[01]9|9[0579]))\\d{4}","\\d{10}",,,"8762101234"],[,,"8(?:00|44|55|66|77|88)[2-9]\\d{6}","\\d{10}",,,"8002123456"],[,,"900[2-9]\\d{6}","\\d{10}",,,"9002123456"],[,,"NA","NA"],[,,"5(?:00|33|44|66|77)[2-9]\\d{6}","\\d{10}",,,"5002345678"],[,,"NA","NA"],"JM",1,"011","1",,,"1",,,,,,[,,"NA","NA"],,"876",[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],JO:[,[,,"[235-9]\\d{7,8}","\\d{7,9}"],[,,"(?:2(?:6(?:2[0-35-9]|3[0-57-8]|4[24-7]|5[0-24-8]|[6-8][02]|9[0-2])|7(?:0[1-79]|10|2[014-7]|3[0-689]|4[019]|5[0-3578]))|32(?:0[1-69]|1[1-35-7]|2[024-7]|3\\d|4[0-2]|[57][02]|60)|53(?:0[0-2]|[13][02]|2[0-59]|49|5[0-35-9]|6[15]|7[45]|8[1-6]|9[0-36-9])|6(?:2[50]0|300|4(?:0[0125]|1[2-7]|2[0569]|[38][07-9]|4[025689]|6[0-589]|7\\d|9[0-2])|5(?:[01][056]|2[034]|3[0-57-9]|4[17-8]|5[0-69]|6[0-35-9]|7[1-379]|8[0-68]|9[02-39]))|87(?:[02]0|7[08]|9[09]))\\d{4}","\\d{7,8}",,,"62001234"],[,,"7(?:55|7[25-9]|8[05-9]|9[015-9])\\d{6}","\\d{9}",,,"790123456"],[,,"80\\d{6}","\\d{8}",,,"80012345"],[,,"900\\d{5}","\\d{8}",,,"90012345"],[,,"85\\d{6}","\\d{8}",,,"85012345"],[,,"70\\d{7}","\\d{9}",,,"700123456"],[,,"NA","NA"],"JO",962,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)","",0],[,"(7)(\\d{4})(\\d{4})","$1 $2 $3",["7[457-9]"],"0$1","",0],[,"(\\d{3})(\\d{5,6})","$1 $2",["70|8[0158]|9"],"0$1","",0]],,[,,"74(?:66|77)\\d{5}","\\d{9}",,,"746612345"],,,[,,"NA","NA"],[,,"8(?:10|8\\d)\\d{5}","\\d{8}",,,"88101234"],,,[,,"NA","NA"]],JP:[,[,,"[1-9]\\d{8,9}|00(?:[36]\\d{7,14}|7\\d{5,7}|8\\d{7})","\\d{8,17}"],[,,"(?:1(?:1[235-8]|2[3-6]|3[3-9]|4[2-6]|[58][2-8]|6[2-7]|7[2-9]|9[1-9])|2[2-9]\\d|[36][1-9]\\d|4(?:6[02-8]|[2-578]\\d|9[2-59])|5(?:6[1-9]|7[2-8]|[2-589]\\d)|7(?:3[4-9]|4[02-9]|[25-9]\\d)|8(?:3[2-9]|4[5-9]|5[1-9]|8[03-9]|[2679]\\d)|9(?:[679][1-9]|[2-58]\\d))\\d{6}","\\d{9}",,,"312345678"],[,,"[7-9]0[1-9]\\d{7}","\\d{10}",,,"7012345678"],[,,"120\\d{6}|800\\d{7}|00(?:37\\d{6,13}|66\\d{6,13}|777(?:[01]\\d{2}|5\\d{3}|8\\d{4})|882[1245]\\d{4})","\\d{8,17}",,,"120123456"],[,,"990\\d{6}","\\d{9}",,,"990123456"],[,,"NA","NA"],[,,"60\\d{7}","\\d{9}",,,"601234567"],[,,"50[1-9]\\d{7}","\\d{10}",,,"5012345678"],"JP",81,"010","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1","",0],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1","",0],[,"(\\d{4})(\\d{4})","$1-$2",["0077"],"$1","",0],[,"(\\d{4})(\\d{2})(\\d{3,4})","$1-$2-$3",["0077"],"$1","",0],[,"(\\d{4})(\\d{2})(\\d{4})","$1-$2-$3",["0088"],"$1","",0],[,"(\\d{4})(\\d{3})(\\d{3,4})","$1-$2-$3",["00(?:37|66)"],"$1","",0],[,"(\\d{4})(\\d{4})(\\d{4,5})","$1-$2-$3",["00(?:37|66)"],"$1","",0],[,"(\\d{4})(\\d{5})(\\d{5,6})","$1-$2-$3",["00(?:37|66)"],"$1","",0],[,"(\\d{4})(\\d{6})(\\d{6,7})","$1-$2-$3",["00(?:37|66)"],"$1","",0],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[2579]0|80[1-9]"],"0$1","",0],[,"(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|5(?:76|97)|499|746|8(?:3[89]|63|47|51)|9(?:49|80|9[16])","1(?:267|3(?:7[247]|9[278])|4(?:5[67]|66)|5(?:47|58|64|8[67])|6(?:3[245]|48|5[4-68]))|5(?:76|97)9|499[2468]|7468|8(?:3(?:8[78]|96)|636|477|51[24])|9(?:496|802|9(?:1[23]|69))","1(?:267|3(?:7[247]|9[278])|4(?:5[67]|66)|5(?:47|58|64|8[67])|6(?:3[245]|48|5[4-68]))|5(?:769|979[2-69])|499[2468]|7468|8(?:3(?:8[78]|96[2457-9])|636[2-57-9]|477|51[24])|9(?:496|802|9(?:1[23]|69))"],"0$1","",0],[,"(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["1(?:2[3-6]|3[3-9]|4[2-6]|5[2-8]|[68][2-7]|7[2-689]|9[1-578])|2(?:2[03-689]|3[3-58]|4[0-468]|5[04-8]|6[013-8]|7[06-9]|8[02-57-9]|9[13])|4(?:2[28]|3[689]|6[035-7]|7[05689]|80|9[3-5])|5(?:3[1-36-9]|4[4578]|5[013-8]|6[1-9]|7[2-8]|8[14-7]|9[4-9])|7(?:2[15]|3[5-9]|4[02-9]|6[135-8]|7[0-4689]|9[014-9])|8(?:2[49]|3[3-8]|4[5-8]|5[2-9]|6[35-9]|7[579]|8[03-579]|9[2-8])|9(?:[23]0|4[02-46-9]|5[024-79]|6[4-9]|7[2-47-9]|8[02-7]|9[3-7])","1(?:2[3-6]|3[3-9]|4[2-6]|5(?:[236-8]|[45][2-69])|[68][2-7]|7[2-689]|9[1-578])|2(?:2(?:[04-689]|3[23])|3[3-58]|4[0-468]|5(?:5[78]|7[2-4]|[0468][2-9])|6(?:[0135-8]|4[2-5])|7(?:[0679]|8[2-7])|8(?:[024578]|3[25-9]|9[6-9])|9(?:11|3[2-4]))|4(?:2(?:2[2-9]|8[237-9])|3[689]|6[035-7]|7(?:[059][2-8]|[68])|80|9[3-5])|5(?:3[1-36-9]|4[4578]|5[013-8]|6[1-9]|7[2-8]|8[14-7]|9(?:[89][2-8]|[4-7]))|7(?:2[15]|3[5-9]|4[02-9]|6[135-8]|7[0-4689]|9(?:[017-9]|4[6-8]|5[2-478]|6[2-589]))|8(?:2(?:4[4-8]|9[2-8])|3(?:7[2-6]|[3-6][2-9]|8[2-5])|4[5-8]|5[2-9]|6(?:[37]|5[4-7]|6[2-9]|8[2-8]|9[236-9])|7[579]|8[03-579]|9[2-8])|9(?:[23]0|4[02-46-9]|5[024-79]|6[4-9]|7[2-47-9]|8[02-7]|9(?:3[34]|[4-7]))","1(?:2[3-6]|3[3-9]|4[2-6]|5(?:[236-8]|[45][2-69])|[68][2-7]|7[2-689]|9[1-578])|2(?:2(?:[04-689]|3[23])|3[3-58]|4[0-468]|5(?:5[78]|7[2-4]|[0468][2-9])|6(?:[0135-8]|4[2-5])|7(?:[0679]|8[2-7])|8(?:[024578]|3[25-9]|9[6-9])|9(?:11|3[2-4]))|4(?:2(?:2[2-9]|8[237-9])|3[689]|6[035-7]|7(?:[059][2-8]|[68])|80|9[3-5])|5(?:3[1-36-9]|4[4578]|5[013-8]|6[1-9]|7[2-8]|8[14-7]|9(?:[89][2-8]|[4-7]))|7(?:2[15]|3[5-9]|4[02-9]|6[135-8]|7[0-4689]|9(?:[017-9]|4[6-8]|5[2-478]|6[2-589]))|8(?:2(?:4[4-8]|9(?:[3578]|20|4[04-9]|6[56]))|3(?:7(?:[2-5]|6[0-59])|[3-6][2-9]|8[2-5])|4[5-8]|5[2-9]|6(?:[37]|5(?:[467]|5[014-9])|6(?:[2-8]|9[02-69])|8[2-8]|9(?:[236-8]|9[23]))|7[579]|8[03-579]|9[2-8])|9(?:[23]0|4[02-46-9]|5[024-79]|6[4-9]|7[2-47-9]|8[02-7]|9(?:3(?:3[02-9]|4[0-24689])|4[2-69]|[5-7]))","1(?:2[3-6]|3[3-9]|4[2-6]|5(?:[236-8]|[45][2-69])|[68][2-7]|7[2-689]|9[1-578])|2(?:2(?:[04-689]|3[23])|3[3-58]|4[0-468]|5(?:5[78]|7[2-4]|[0468][2-9])|6(?:[0135-8]|4[2-5])|7(?:[0679]|8[2-7])|8(?:[024578]|3[25-9]|9[6-9])|9(?:11|3[2-4]))|4(?:2(?:2[2-9]|8[237-9])|3[689]|6[035-7]|7(?:[059][2-8]|[68])|80|9[3-5])|5(?:3[1-36-9]|4[4578]|5[013-8]|6[1-9]|7[2-8]|8[14-7]|9(?:[89][2-8]|[4-7]))|7(?:2[15]|3[5-9]|4[02-9]|6[135-8]|7[0-4689]|9(?:[017-9]|4[6-8]|5[2-478]|6[2-589]))|8(?:2(?:4[4-8]|9(?:[3578]|20|4[04-9]|6(?:5[25]|60)))|3(?:7(?:[2-5]|6[0-59])|[3-6][2-9]|8[2-5])|4[5-8]|5[2-9]|6(?:[37]|5(?:[467]|5[014-9])|6(?:[2-8]|9[02-69])|8[2-8]|9(?:[236-8]|9[23]))|7[579]|8[03-579]|9[2-8])|9(?:[23]0|4[02-46-9]|5[024-79]|6[4-9]|7[2-47-9]|8[02-7]|9(?:3(?:3[02-9]|4[0-24689])|4[2-69]|[5-7]))"],"0$1","",0],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1|2(?:2[37]|5[5-9]|64|78|8[39]|91)|4(?:2[2689]|64|7[347])|5(?:[2-589]|39)|60|8(?:[46-9]|3[279]|2[124589])|9(?:[235-8]|93)","1|2(?:2[37]|5(?:[57]|[68]0|9[19])|64|78|8[39]|917)|4(?:2(?:[68]|20|9[178])|64|7[347])|5(?:[2-589]|39[67])|60|8(?:[46-9]|3[279]|2[124589])|9(?:[235-8]|93[34])","1|2(?:2[37]|5(?:[57]|[68]0|9(?:17|99))|64|78|8[39]|917)|4(?:2(?:[68]|20|9[178])|64|7[347])|5(?:[2-589]|39[67])|60|8(?:[46-9]|3[279]|2[124589])|9(?:[235-8]|93(?:31|4))"],"0$1","",0],[,"(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["2(?:9[14-79]|74|[34]7|[56]9)|82|993"],"0$1","",0],[,"(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["3|4(?:2[09]|7[01])|6[1-9]"],"0$1","",0],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[2479][1-9]"],"0$1","",0]],[[,"(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1","",0],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1","",0],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[2579]0|80[1-9]"],"0$1","",0],[,"(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|5(?:76|97)|499|746|8(?:3[89]|63|47|51)|9(?:49|80|9[16])","1(?:267|3(?:7[247]|9[278])|4(?:5[67]|66)|5(?:47|58|64|8[67])|6(?:3[245]|48|5[4-68]))|5(?:76|97)9|499[2468]|7468|8(?:3(?:8[78]|96)|636|477|51[24])|9(?:496|802|9(?:1[23]|69))","1(?:267|3(?:7[247]|9[278])|4(?:5[67]|66)|5(?:47|58|64|8[67])|6(?:3[245]|48|5[4-68]))|5(?:769|979[2-69])|499[2468]|7468|8(?:3(?:8[78]|96[2457-9])|636[2-57-9]|477|51[24])|9(?:496|802|9(?:1[23]|69))"],"0$1","",0],[,"(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["1(?:2[3-6]|3[3-9]|4[2-6]|5[2-8]|[68][2-7]|7[2-689]|9[1-578])|2(?:2[03-689]|3[3-58]|4[0-468]|5[04-8]|6[013-8]|7[06-9]|8[02-57-9]|9[13])|4(?:2[28]|3[689]|6[035-7]|7[05689]|80|9[3-5])|5(?:3[1-36-9]|4[4578]|5[013-8]|6[1-9]|7[2-8]|8[14-7]|9[4-9])|7(?:2[15]|3[5-9]|4[02-9]|6[135-8]|7[0-4689]|9[014-9])|8(?:2[49]|3[3-8]|4[5-8]|5[2-9]|6[35-9]|7[579]|8[03-579]|9[2-8])|9(?:[23]0|4[02-46-9]|5[024-79]|6[4-9]|7[2-47-9]|8[02-7]|9[3-7])","1(?:2[3-6]|3[3-9]|4[2-6]|5(?:[236-8]|[45][2-69])|[68][2-7]|7[2-689]|9[1-578])|2(?:2(?:[04-689]|3[23])|3[3-58]|4[0-468]|5(?:5[78]|7[2-4]|[0468][2-9])|6(?:[0135-8]|4[2-5])|7(?:[0679]|8[2-7])|8(?:[024578]|3[25-9]|9[6-9])|9(?:11|3[2-4]))|4(?:2(?:2[2-9]|8[237-9])|3[689]|6[035-7]|7(?:[059][2-8]|[68])|80|9[3-5])|5(?:3[1-36-9]|4[4578]|5[013-8]|6[1-9]|7[2-8]|8[14-7]|9(?:[89][2-8]|[4-7]))|7(?:2[15]|3[5-9]|4[02-9]|6[135-8]|7[0-4689]|9(?:[017-9]|4[6-8]|5[2-478]|6[2-589]))|8(?:2(?:4[4-8]|9[2-8])|3(?:7[2-6]|[3-6][2-9]|8[2-5])|4[5-8]|5[2-9]|6(?:[37]|5[4-7]|6[2-9]|8[2-8]|9[236-9])|7[579]|8[03-579]|9[2-8])|9(?:[23]0|4[02-46-9]|5[024-79]|6[4-9]|7[2-47-9]|8[02-7]|9(?:3[34]|[4-7]))","1(?:2[3-6]|3[3-9]|4[2-6]|5(?:[236-8]|[45][2-69])|[68][2-7]|7[2-689]|9[1-578])|2(?:2(?:[04-689]|3[23])|3[3-58]|4[0-468]|5(?:5[78]|7[2-4]|[0468][2-9])|6(?:[0135-8]|4[2-5])|7(?:[0679]|8[2-7])|8(?:[024578]|3[25-9]|9[6-9])|9(?:11|3[2-4]))|4(?:2(?:2[2-9]|8[237-9])|3[689]|6[035-7]|7(?:[059][2-8]|[68])|80|9[3-5])|5(?:3[1-36-9]|4[4578]|5[013-8]|6[1-9]|7[2-8]|8[14-7]|9(?:[89][2-8]|[4-7]))|7(?:2[15]|3[5-9]|4[02-9]|6[135-8]|7[0-4689]|9(?:[017-9]|4[6-8]|5[2-478]|6[2-589]))|8(?:2(?:4[4-8]|9(?:[3578]|20|4[04-9]|6[56]))|3(?:7(?:[2-5]|6[0-59])|[3-6][2-9]|8[2-5])|4[5-8]|5[2-9]|6(?:[37]|5(?:[467]|5[014-9])|6(?:[2-8]|9[02-69])|8[2-8]|9(?:[236-8]|9[23]))|7[579]|8[03-579]|9[2-8])|9(?:[23]0|4[02-46-9]|5[024-79]|6[4-9]|7[2-47-9]|8[02-7]|9(?:3(?:3[02-9]|4[0-24689])|4[2-69]|[5-7]))","1(?:2[3-6]|3[3-9]|4[2-6]|5(?:[236-8]|[45][2-69])|[68][2-7]|7[2-689]|9[1-578])|2(?:2(?:[04-689]|3[23])|3[3-58]|4[0-468]|5(?:5[78]|7[2-4]|[0468][2-9])|6(?:[0135-8]|4[2-5])|7(?:[0679]|8[2-7])|8(?:[024578]|3[25-9]|9[6-9])|9(?:11|3[2-4]))|4(?:2(?:2[2-9]|8[237-9])|3[689]|6[035-7]|7(?:[059][2-8]|[68])|80|9[3-5])|5(?:3[1-36-9]|4[4578]|5[013-8]|6[1-9]|7[2-8]|8[14-7]|9(?:[89][2-8]|[4-7]))|7(?:2[15]|3[5-9]|4[02-9]|6[135-8]|7[0-4689]|9(?:[017-9]|4[6-8]|5[2-478]|6[2-589]))|8(?:2(?:4[4-8]|9(?:[3578]|20|4[04-9]|6(?:5[25]|60)))|3(?:7(?:[2-5]|6[0-59])|[3-6][2-9]|8[2-5])|4[5-8]|5[2-9]|6(?:[37]|5(?:[467]|5[014-9])|6(?:[2-8]|9[02-69])|8[2-8]|9(?:[236-8]|9[23]))|7[579]|8[03-579]|9[2-8])|9(?:[23]0|4[02-46-9]|5[024-79]|6[4-9]|7[2-47-9]|8[02-7]|9(?:3(?:3[02-9]|4[0-24689])|4[2-69]|[5-7]))"],"0$1","",0],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1|2(?:2[37]|5[5-9]|64|78|8[39]|91)|4(?:2[2689]|64|7[347])|5(?:[2-589]|39)|60|8(?:[46-9]|3[279]|2[124589])|9(?:[235-8]|93)","1|2(?:2[37]|5(?:[57]|[68]0|9[19])|64|78|8[39]|917)|4(?:2(?:[68]|20|9[178])|64|7[347])|5(?:[2-589]|39[67])|60|8(?:[46-9]|3[279]|2[124589])|9(?:[235-8]|93[34])","1|2(?:2[37]|5(?:[57]|[68]0|9(?:17|99))|64|78|8[39]|917)|4(?:2(?:[68]|20|9[178])|64|7[347])|5(?:[2-589]|39[67])|60|8(?:[46-9]|3[279]|2[124589])|9(?:[235-8]|93(?:31|4))"],"0$1","",0],[,"(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["2(?:9[14-79]|74|[34]7|[56]9)|82|993"],"0$1","",0],[,"(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["3|4(?:2[09]|7[01])|6[1-9]"],"0$1","",0],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[2479][1-9]"],"0$1","",0]],[,,"20\\d{8}","\\d{10}",,,"2012345678"],,,[,,"00(?:37\\d{6,13}|66\\d{6,13}|777(?:[01]\\d{2}|5\\d{3}|8\\d{4})|882[1245]\\d{4})","\\d{8,17}",,,"00777012"],[,,"570\\d{6}","\\d{9}",,,"570123456"],1,,[,,"NA","NA"]],KE:[,[,,"20\\d{6,7}|[4-9]\\d{6,9}","\\d{7,10}"],[,,"20\\d{6,7}|4(?:[0136]\\d{7}|[245]\\d{5,7})|5(?:[08]\\d{7}|[1-79]\\d{5,7})|6(?:[01457-9]\\d{5,7}|[26]\\d{7})","\\d{7,9}",,,"202012345"],[,,"7(?:[0-36]\\d|5[0-6]|7[0-5]|8[0-25-9])\\d{6}","\\d{9}",,,"712123456"],[,,"800[24-8]\\d{5,6}","\\d{9,10}",,,"800223456"],[,,"900[02-9]\\d{5}","\\d{9}",,,"900223456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"KE",254,"000","0",,,"0",,,,[[,"(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1","",0],[,"(\\d{3})(\\d{6,7})","$1 $2",["7"],"0$1","",0],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],KG:[,[,,"[235-8]\\d{8,9}","\\d{5,10}"],[,,"(?:3(?:1(?:[256]\\d|3[1-9]|47)|2(?:22|3[0-479]|6[0-7])|4(?:22|5[6-9]|6\\d)|5(?:22|3[4-7]|59|6\\d)|6(?:22|5[35-7]|6\\d)|7(?:22|3[468]|4[1-9]|59|[67]\\d)|9(?:22|4[1-8]|6\\d))|6(?:09|12|2[2-4])\\d)\\d{5}","\\d{5,10}",,,"312123456"],[,,"(?:20[0-35]|5[124-7]\\d|7[07]\\d)\\d{6}","\\d{9}",,,"700123456"],[,,"800\\d{6,7}","\\d{9,10}",,,"800123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"KG",996,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[25-7]|31[25]"],"0$1","",0],[,"(\\d{4})(\\d{5})","$1 $2",["3(?:1[36]|[2-9])"],"0$1","",0],[,"(\\d{3})(\\d{3})(\\d)(\\d{3})","$1 $2 $3 $4",["8"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],KH:[,[,,"[1-9]\\d{7,9}","\\d{6,10}"],[,,"(?:2[3-6]|3[2-6]|4[2-4]|[5-7][2-5])(?:[237-9]|4[56]|5\\d|6\\d?)\\d{5}|23(?:4[234]|8\\d{2})\\d{4}","\\d{6,9}",,,"23756789"],[,,"(?:1(?:[013-9]|2\\d?)|3[18]\\d|6[016-9]|7(?:[07-9]|6\\d)|8(?:[013-79]|8\\d)|9(?:6\\d|7\\d?|[0-589]))\\d{6}","\\d{8,9}",,,"91234567"],[,,"1800(?:1\\d|2[019])\\d{4}","\\d{10}",,,"1800123456"],[,,"1900(?:1\\d|2[09])\\d{4}","\\d{10}",,,"1900123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"KH",855,"00[14-9]","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["1\\d[1-9]|[2-9]"],"0$1","",0],[,"(1[89]00)(\\d{3})(\\d{3})","$1 $2 $3",["1[89]0"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],KI:[,[,,"[2458]\\d{4}|3\\d{4,7}|7\\d{7}","\\d{5,8}"],[,,"(?:[24]\\d|3[1-9]|50|8[0-5])\\d{3}","\\d{5}",,,"31234"],[,,"7(?:[24]\\d|3[1-9]|8[0-5])\\d{5}","\\d{8}",,,"72012345"],[,,"NA","NA"],[,,"3001\\d{4}","\\d{5,8}",,,"30010000"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"KI",686,"00",,,,"0",,,,,,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],KM:[,[,,"[379]\\d{6}","\\d{7}"],[,,"7(?:6[0-37-9]|7[0-57-9])\\d{4}","\\d{7}",,,"7712345"],[,,"3[234]\\d{5}","\\d{7}",,,"3212345"],[,,"NA","NA"],[,,"(?:39[01]|9[01]0)\\d{4}","\\d{7}",,,"9001234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"KM",269,"00",,,,,,,,[[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],KN:[,[,,"[589]\\d{9}","\\d{7}(?:\\d{3})?"],[,,"869(?:2(?:29|36)|302|4(?:6[015-9]|70))\\d{4}","\\d{7}(?:\\d{3})?",,,"8692361234"],[,,"869(?:5(?:5[6-8]|6[5-7])|66\\d|76[02-6])\\d{4}","\\d{10}",,,"8697652917"],[,,"8(?:00|44|55|66|77|88)[2-9]\\d{6}","\\d{10}",,,"8002123456"],[,,"900[2-9]\\d{6}","\\d{10}",,,"9002123456"],[,,"NA","NA"],[,,"5(?:00|33|44|66|77)[2-9]\\d{6}","\\d{10}",,,"5002345678"],[,,"NA","NA"],"KN",1,"011","1",,,"1",,,,,,[,,"NA","NA"],,"869",[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],KP:[,[,,"1\\d{9}|[28]\\d{7}","\\d{6,8}|\\d{10}"],[,,"2\\d{7}|85\\d{6}","\\d{6,8}",,,"21234567"],[,,"19[123]\\d{7}","\\d{10}",,,"1921234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"KP",850,"00|99","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1","",0],[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1","",0],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1","",0]],,[,,"NA","NA"],,,[,,"2(?:[0-24-9]\\d{2}|3(?:[0-79]\\d|8[02-9]))\\d{4}","\\d{8}",,,"23821234"],[,,"NA","NA"],,,[,,"NA","NA"]],KR:[,[,,"[1-7]\\d{3,9}|8\\d{8}","\\d{4,10}"],[,,"(?:2|3[1-3]|[46][1-4]|5[1-5])(?:1\\d{2,3}|[1-9]\\d{6,7})","\\d{4,10}",,,"22123456"],[,,"1[0-26-9]\\d{7,8}","\\d{9,10}",,,"1023456789"],[,,"80\\d{7}","\\d{9}",,,"801234567"],[,,"60[2-9]\\d{6}","\\d{9}",,,"602345678"],[,,"NA","NA"],[,,"50\\d{8}","\\d{10}",,,"5012345678"],[,,"70\\d{8}","\\d{10}",,,"7012345678"],"KR",82,"00(?:[124-68]|[37]\\d{2})","0",,,"0(8[1-46-8]|85\\d{2})?",,,,[[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["1(?:0|1[19]|[69]9|5[458])|[57]0","1(?:0|1[19]|[69]9|5(?:44|59|8))|[57]0"],"0$1","0$CC-$1",0],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["1(?:[169][2-8]|[78]|5[1-4])|[68]0|[3-6][1-9][1-9]","1(?:[169][2-8]|[78]|5(?:[1-3]|4[56]))|[68]0|[3-6][1-9][1-9]"],"0$1","0$CC-$1",0],[,"(\\d{3})(\\d)(\\d{4})","$1-$2-$3",["131","1312"],"0$1","0$CC-$1",0],[,"(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["131","131[13-9]"],"0$1","0$CC-$1",0],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["13[2-9]"],"0$1","0$CC-$1",0],[,"(\\d{2})(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3-$4",["30"],"0$1","0$CC-$1",0],[,"(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2[1-9]"],"0$1","0$CC-$1",0],[,"(\\d)(\\d{3,4})","$1-$2",["21[0-46-9]"],"0$1","0$CC-$1",0],[,"(\\d{2})(\\d{3,4})","$1-$2",["[3-6][1-9]1","[3-6][1-9]1(?:[0-46-9])"],"0$1","0$CC-$1",0],[,"(\\d{4})(\\d{4})","$1-$2",["1(?:5[46-9]|6[04678]|8[0579])","1(?:5(?:44|66|77|88|99)|6(?:00|44|6[16]|70|88)|8(?:00|55|77|99))"],"$1","0$CC-$1",0]],,[,,"15\\d{7,8}","\\d{9,10}",,,"1523456789"],,,[,,"NA","NA"],[,,"1(?:5(?:44|66|77|88|99)|6(?:00|44|6[16]|70|88)|8(?:00|55|77|99))\\d{4}","\\d{8}",,,"15441234"],,,[,,"NA","NA"]],KW:[,[,,"[12569]\\d{6,7}","\\d{7,8}"],[,,"(?:18\\d|2(?:[23]\\d{2}|4(?:[1-35-9]\\d|44)|5(?:0[034]|[2-46]\\d|5[1-3]|7[1-7])))\\d{4}","\\d{7,8}",,,"22345678"],[,,"(?:5(?:[05]\\d|1[0-6])|6(?:0[034679]|5[015-9]|6\\d|7[067]|9[0369])|9(?:0[09]|4[049]|55|6[069]|[79]\\d|8[089]))\\d{5}","\\d{8}",,,"50012345"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"KW",965,"00",,,,,,,,[[,"(\\d{4})(\\d{3,4})","$1 $2",["[1269]"],"","",0],[,"(5[015]\\d)(\\d{5})","$1 $2",["5"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],KY:[,[,,"[3589]\\d{9}","\\d{7}(?:\\d{3})?"],[,,"345(?:2(?:22|44)|444|6(?:23|38|40)|7(?:4[35-79]|6[6-9]|77)|8(?:00|1[45]|25|[48]8)|9(?:14|4[035-9]))\\d{4}","\\d{7}(?:\\d{3})?",,,"3452221234"],[,,"345(?:32[1-9]|5(?:1[67]|2[5-7]|4[6-8]|76)|9(?:1[67]|2[3-9]|3[689]))\\d{4}","\\d{10}",,,"3453231234"],[,,"8(?:00|44|55|66|77|88)[2-9]\\d{6}","\\d{10}",,,"8002345678"],[,,"900[2-9]\\d{6}|345976\\d{4}","\\d{10}",,,"9002345678"],[,,"NA","NA"],[,,"5(?:00|33|44|66|77)[2-9]\\d{6}","\\d{10}",,,"5002345678"],[,,"NA","NA"],"KY",1,"011","1",,,"1",,,,,,[,,"345849\\d{4}","\\d{10}",,,"3458491234"],,"345",[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],KZ:[,[,,"(?:33\\d|7\\d{2}|80[09])\\d{7}","\\d{10}"],[,,"33622\\d{5}|7(?:1(?:0(?:[23]\\d|4[023]|59|63)|1(?:[23]\\d|4[0-79]|59)|2(?:[23]\\d|59)|3(?:2\\d|3[1-79]|4[0-35-9]|59)|4(?:2\\d|3[013-79]|4[0-8]|5[1-79])|5(?:2\\d|3[1-8]|4[1-7]|59)|6(?:[234]\\d|5[19]|61)|72\\d|8(?:[27]\\d|3[1-46-9]|4[0-5]))|2(?:1(?:[23]\\d|4[46-9]|5[3469])|2(?:2\\d|3[0679]|46|5[12679])|3(?:[234]\\d|5[139])|4(?:2\\d|3[1235-9]|59)|5(?:[23]\\d|4[01246-8]|59|61)|6(?:2\\d|3[1-9]|4[0-4]|59)|7(?:[237]\\d|40|5[279])|8(?:[23]\\d|4[0-3]|59)|9(?:2\\d|3[124578]|59)))\\d{5}","\\d{10}",,,"7123456789"],[,,"7(?:0[012578]|47|6[02-4]|7[15-8]|85)\\d{7}","\\d{10}",,,"7710009998"],[,,"800\\d{7}","\\d{10}",,,"8001234567"],[,,"809\\d{7}","\\d{10}",,,"8091234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"751\\d{7}","\\d{10}",,,"7511234567"],"KZ",7,"810","8",,,"8",,"8~10",,,,[,,"NA","NA"],,,[,,"751\\d{7}","\\d{10}",,,"7511234567"],[,,"NA","NA"],,,[,,"NA","NA"]],LA:[,[,,"[2-8]\\d{7,9}","\\d{6,10}"],[,,"(?:2[13]|3(?:0\\d|[14])|[5-7][14]|41|8[1468])\\d{6}","\\d{6,9}",,,"21212862"],[,,"20(?:2[2389]|5[4-689]|7[6-8]|9[15-9])\\d{6}","\\d{10}",,,"2023123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"LA",856,"00","0",,,"0",,,,[[,"(20)(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["20"],"0$1","",0],[,"([2-8]\\d)(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1","",0],[,"(30)(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["30"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],LB:[,[,,"[13-9]\\d{6,7}","\\d{7,8}"],[,,"(?:[14-6]\\d{2}|7(?:[2-579]\\d|62|8[0-7])|[89][2-9]\\d)\\d{4}","\\d{7}",,,"1123456"],[,,"(?:3\\d|7(?:[019]\\d|6[013-9]|8[89]))\\d{5}","\\d{7,8}",,,"71123456"],[,,"NA","NA"],[,,"9[01]\\d{6}","\\d{8}",,,"90123456"],[,,"8[01]\\d{6}","\\d{8}",,,"80123456"],[,,"NA","NA"],[,,"NA","NA"],"LB",961,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-6]|7(?:[2-579]|62|8[0-7])|[89][2-9]"],"0$1","",0],[,"([7-9]\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[89][01]|7(?:[019]|6[013-9]|8[89])"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],LC:[,[,,"[5789]\\d{9}","\\d{7}(?:\\d{3})?"],[,,"758(?:4(?:30|5[0-9]|6[2-9]|8[0-2])|57[0-2]|638)\\d{4}","\\d{7}(?:\\d{3})?",,,"7584305678"],[,,"758(?:28[4-7]|384|4(?:6[01]|8[4-9])|5(?:1[89]|20|84)|7(?:1[2-9]|2[0-8]))\\d{4}","\\d{10}",,,"7582845678"],[,,"8(?:00|44|55|66|77|88)[2-9]\\d{6}","\\d{10}",,,"8002123456"],[,,"900[2-9]\\d{6}","\\d{10}",,,"9002123456"],[,,"NA","NA"],[,,"5(?:00|33|44|66|77)[2-9]\\d{6}","\\d{10}",,,"5002345678"],[,,"NA","NA"],"LC",1,"011","1",,,"1",,,,,,[,,"NA","NA"],,"758",[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],LI:[,[,,"6\\d{8}|[23789]\\d{6}","\\d{7,9}"],[,,"(?:2(?:01|1[27]|3\\d|6[02-578]|96)|3(?:7[0135-7]|8[048]|9[0269]))\\d{4}","\\d{7}",,,"2345678"],[,,"6(?:51[01]|6(?:[01][0-4]|2[016-9]|88)|710)\\d{5}|7(?:36|4[25]|56|[7-9]\\d)\\d{4}","\\d{7,9}",,,"661234567"],[,,"80(?:0(?:2[238]|79)|9\\d{2})\\d{2}","\\d{7}",,,"8002222"],[,,"90(?:0(?:2[278]|79)|1(?:23|3[012])|6(?:4\\d|6[0126]))\\d{2}","\\d{7}",,,"9002222"],[,,"NA","NA"],[,,"701\\d{4}","\\d{7}",,,"7011234"],[,,"NA","NA"],"LI",423,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[23]|7[3-57-9]|87"],"","",0],[,"(6\\d)(\\d{3})(\\d{3})","$1 $2 $3",["6"],"","",0],[,"(6[567]\\d)(\\d{3})(\\d{3})","$1 $2 $3",["6[567]"],"","",0],[,"(69)(7\\d{2})(\\d{4})","$1 $2 $3",["697"],"","",0],[,"([7-9]0\\d)(\\d{2})(\\d{2})","$1 $2 $3",["[7-9]0"],"","",0],[,"([89]0\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[89]0"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"87(?:0[128]|7[0-4])\\d{3}","\\d{7}",,,"8770123"],,,[,,"697(?:[35]6|4[25]|[7-9]\\d)\\d{4}","\\d{9}",,,"697361234"]],LK:[,[,,"[1-9]\\d{8}","\\d{7,9}"],[,,"(?:[189]1|2[13-7]|3[1-8]|4[157]|5[12457]|6[35-7])[2-57]\\d{6}","\\d{7,9}",,,"112345678"],[,,"7[125-8]\\d{7}","\\d{9}",,,"712345678"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"LK",94,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{1})(\\d{6})","$1 $2 $3",["[1-689]"],"0$1","",0],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],LR:[,[,,"2\\d{7}|[37-9]\\d{8}|[45]\\d{6}","\\d{7,9}"],[,,"2\\d{7}","\\d{8}",,,"21234567"],[,,"(?:330\\d|4[67]|5\\d|77\\d{2}|88\\d{2}|994\\d)\\d{5}","\\d{7,9}",,,"770123456"],[,,"NA","NA"],[,,"90[03]\\d{6}","\\d{9}",,,"900123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"332(?:0[02]|5\\d)\\d{4}","\\d{9}",,,"332001234"],"LR",231,"00","0",,,"0",,,,[[,"(2\\d)(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1","",0],[,"([79]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[79]"],"0$1","",0],[,"([4-6])(\\d{3})(\\d{3})","$1 $2 $3",["[4-6]"],"0$1","",0],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[38]"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],LS:[,[,,"[2568]\\d{7}","\\d{8}"],[,,"2\\d{7}","\\d{8}",,,"22123456"],[,,"[56]\\d{7}","\\d{8}",,,"50123456"],[,,"800[256]\\d{4}","\\d{8}",,,"80021234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"LS",266,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],LT:[,[,,"[3-9]\\d{7}","\\d{8}"],[,,"(?:3[1478]|4[124-6]|52)\\d{6}","\\d{8}",,,"31234567"],[,,"6\\d{7}","\\d{8}",,,"61234567"],[,,"800\\d{5}","\\d{8}",,,"80012345"],[,,"9(?:0[0239]|10)\\d{5}","\\d{8}",,,"90012345"],[,,"808\\d{5}","\\d{8}",,,"80812345"],[,,"700\\d{5}","\\d{8}",,,"70012345"],[,,"NA","NA"],"LT",370,"00","8",,,"[08]",,,,[[,"([34]\\d)(\\d{6})","$1 $2",["37|4(?:1|5[45]|6[2-4])"],"(8-$1)","",1],[,"([3-6]\\d{2})(\\d{5})","$1 $2",["3[148]|4(?:[24]|6[09])|528|6"],"(8-$1)","",1],[,"([7-9]\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"8 $1","",1],[,"(5)(2\\d{2})(\\d{4})","$1 $2 $3",["52[0-79]"],"(8-$1)","",1]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"70[67]\\d{5}","\\d{8}",,,"70712345"],,,[,,"NA","NA"]],LU:[,[,,"[24-9]\\d{3,10}|3(?:[0-46-9]\\d{2,9}|5[013-9]\\d{1,8})","\\d{4,11}"],[,,"(?:2(?:2\\d{1,2}|3[2-9]|[67]\\d|4[1-8]\\d?|5[1-5]\\d?|9[0-24-9]\\d?)|3(?:[059][05-9]|[13]\\d|[26][015-9]|4[0-26-9]|7[0-389]|8[08])\\d?|4\\d{2,3}|5(?:[01458]\\d|[27][0-69]|3[0-3]|[69][0-7])\\d?|7(?:1[019]|2[05-9]|3[05]|[45][07-9]|[679][089]|8[06-9])\\d?|8(?:0[2-9]|1[0-36-9]|3[3-9]|[469]9|[58][7-9]|7[89])\\d?|9(?:0[89]|2[0-49]|37|49|5[0-27-9]|7[7-9]|9[0-478])\\d?)\\d{1,7}","\\d{4,11}",,,"27123456"],[,,"6(?:[269][18]|71)\\d{6}","\\d{9}",,,"628123456"],[,,"800\\d{5}","\\d{8}",,,"80012345"],[,,"90[01]\\d{5}","\\d{8}",,,"90012345"],[,,"801\\d{5}","\\d{8}",,,"80112345"],[,,"70\\d{6}","\\d{8}",,,"70123456"],[,,"20(?:1\\d{5}|[2-689]\\d{1,7})","\\d{4,10}",,,"20201234"],"LU",352,"00",,,,"(15(?:0[06]|1[12]|35|4[04]|55|6[26]|77|88|99)\\d)",,,,[[,"(\\d{2})(\\d{3})","$1 $2",["[2-5]|7[1-9]|[89](?:[1-9]|0[2-9])"],"","$CC $1",0],[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[2-5]|7[1-9]|[89](?:[1-9]|0[2-9])"],"","$CC $1",0],[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20"],"","$CC $1",0],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"],"","$CC $1",0],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"],"","$CC $1",0],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"],"","$CC $1",0],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{1,4})","$1 $2 $3 $4",["2(?:[12589]|4[12])|[3-5]|7[1-9]|[89](?:[1-9]|0[2-9])"],"","$CC $1",0],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0[01]|70"],"","$CC $1",0],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"],"","$CC $1",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],LV:[,[,,"[2689]\\d{7}","\\d{8}"],[,,"6[3-8]\\d{6}","\\d{8}",,,"63123456"],[,,"2\\d{7}","\\d{8}",,,"21234567"],[,,"80\\d{6}","\\d{8}",,,"80123456"],[,,"90\\d{6}","\\d{8}",,,"90123456"],[,,"81\\d{6}","\\d{8}",,,"81123456"],[,,"NA","NA"],[,,"NA","NA"],"LV",371,"00",,,,,,,,[[,"([2689]\\d)(\\d{3})(\\d{3})","$1 $2 $3",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],LY:[,[,,"[25679]\\d{8}","\\d{7,9}"],[,,"(?:2[1345]|5[1347]|6[123479]|71)\\d{7}","\\d{7,9}",,,"212345678"],[,,"9[1-6]\\d{7}","\\d{9}",,,"912345678"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"LY",218,"00","0",,,"0",,,,[[,"([25679]\\d)(\\d{7})","$1-$2",,"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],MA:[,[,,"[5689]\\d{8}","\\d{9}"],[,,"5(?:2(?:(?:[015-7]\\d|2[2-9]|3[2-57]|4[2-8]|8[235-7])\\d|9(?:0\\d|[89]0))|3(?:(?:[0-4]\\d|[57][2-9]|6[235-8]|9[3-9])\\d|8(?:0\\d|[89]0)))\\d{4}","\\d{9}",,,"520123456"],[,,"6(?:0[0-8]|[12-7]\\d|8[01]|9[2457-9])\\d{6}","\\d{9}",,,"650123456"],[,,"80\\d{7}","\\d{9}",,,"801234567"],[,,"89\\d{7}","\\d{9}",,,"891234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"MA",212,"00","0",,,"0",,,,[[,"([56]\\d{2})(\\d{6})","$1-$2",["5(?:2[015-7]|3[0-4])|6"],"0$1","",0],[,"([58]\\d{3})(\\d{5})","$1-$2",["5(?:2[2-489]|3[5-9])|892","5(?:2(?:[2-48]|90)|3(?:[5-79]|80))|892"],"0$1","",0],[,"(5\\d{4})(\\d{4})","$1-$2",["5(?:29|38)","5(?:29|38)[89]"],"0$1","",0],[,"(8[09])(\\d{7})","$1-$2",["8(?:0|9[013-9])"],"0$1","",0]],,[,,"NA","NA"],1,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],MC:[,[,,"[4689]\\d{7,8}","\\d{8,9}"],[,,"870\\d{5}|9[2-47-9]\\d{6}","\\d{8}",,,"99123456"],[,,"6\\d{8}|4(?:4\\d|5[2-9])\\d{5}","\\d{8,9}",,,"612345678"],[,,"90\\d{6}","\\d{8}",,,"90123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"MC",377,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"$1","",0],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1","",0],[,"(6)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1","",0],[,"(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["8"],"$1","",0]],,[,,"NA","NA"],,,[,,"8\\d{7}","\\d{8}"],[,,"NA","NA"],,,[,,"NA","NA"]],MD:[,[,,"[235-9]\\d{7}","\\d{8}"],[,,"(?:2(?:1[0569]|2\\d|3[015-7]|4[1-46-9]|5[0-24689]|6[2-589]|7[1-37]|9[1347-9])|5(?:33|5[257]))\\d{5}","\\d{8}",,,"22212345"],[,,"(?:562\\d|6(?:[089]\\d{2}|1[01]\\d|21\\d|50\\d|7(?:[1-6]\\d|7[0-4]))|7(?:6[07]|7[457-9]|[89]\\d)\\d)\\d{4}","\\d{8}",,,"65012345"],[,,"800\\d{5}","\\d{8}",,,"80012345"],[,,"90[056]\\d{5}","\\d{8}",,,"90012345"],[,,"808\\d{5}","\\d{8}",,,"80812345"],[,,"NA","NA"],[,,"3[08]\\d{6}","\\d{8}",,,"30123456"],"MD",373,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1","",0],[,"([25-7]\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["2[13-79]|[5-7]"],"0$1","",0],[,"([89]\\d{2})(\\d{5})","$1 $2",["[89]"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"8(?:03|14)\\d{5}","\\d{8}",,,"80312345"],,,[,,"NA","NA"]],ME:[,[,,"[2-9]\\d{7,8}","\\d{6,9}"],[,,"(?:20[2-8]|3(?:0[2-7]|1[35-7]|2[3567]|3[4-7])|4(?:0[237]|1[27])|5(?:0[47]|1[27]|2[378]))\\d{5}","\\d{6,8}",,,"30234567"],[,,"6(?:32\\d|[89]\\d{2}|7(?:[0-8]\\d|9(?:[3-9]|[0-2]\\d)))\\d{4}","\\d{8,9}",,,"67622901"],[,,"800[28]\\d{4}","\\d{8}",,,"80080002"],[,,"(?:88\\d|9(?:4[13-8]|5[16-8]))\\d{5}","\\d{8}",,,"94515151"],[,,"NA","NA"],[,,"NA","NA"],[,,"78[1-9]\\d{5}","\\d{8}",,,"78108780"],"ME",382,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]|6[3789]","[2-57-9]|6(?:[389]|7(?:[0-8]|9[3-9]))"],"0$1","",0],[,"(67)(9)(\\d{3})(\\d{3})","$1 $2 $3 $4",["679","679[0-2]"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"77\\d{6}","\\d{8}",,,"77273012"],,,[,,"NA","NA"]],MF:[,[,,"[56]\\d{8}","\\d{9}"],[,,"590(?:[02][79]|13|5[0-268]|[78]7)\\d{4}","\\d{9}",,,"590271234"],[,,"690(?:0[0-7]|[1-9]\\d)\\d{4}","\\d{9}",,,"690301234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"MF",590,"00","0",,,"0",,,,,,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],MG:[,[,,"[23]\\d{8}","\\d{7,9}"],[,,"20(?:2\\d{2}|4[47]\\d|5[3467]\\d|6[279]\\d|7(?:2[29]|[35]\\d)|8[268]\\d|9[245]\\d)\\d{4}","\\d{7,9}",,,"202123456"],[,,"3[2-49]\\d{7}","\\d{9}",,,"321234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"22\\d{7}","\\d{9}",,,"221234567"],"MG",261,"00","0",,,"0",,,,[[,"([23]\\d)(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",,"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],MH:[,[,,"[2-6]\\d{6}","\\d{7}"],[,,"(?:247|528|625)\\d{4}","\\d{7}",,,"2471234"],[,,"(?:235|329|45[56]|545)\\d{4}","\\d{7}",,,"2351234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"635\\d{4}","\\d{7}",,,"6351234"],"MH",692,"011","1",,,"1",,,,[[,"(\\d{3})(\\d{4})","$1-$2",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],MK:[,[,,"[2-578]\\d{7}","\\d{8}"],[,,"(?:2(?:[23]\\d|5[124578]|6[01])|3(?:1[3-6]|[23][2-6]|4[2356])|4(?:[23][2-6]|4[3-6]|5[256]|6[25-8]|7[24-6]|8[4-6]))\\d{5}","\\d{6,8}",,,"22212345"],[,,"7(?:[0-25-8]\\d{2}|32\\d|421)\\d{4}","\\d{8}",,,"72345678"],[,,"800\\d{5}","\\d{8}",,,"80012345"],[,,"5[02-9]\\d{6}","\\d{8}",,,"50012345"],[,,"8(?:0[1-9]|[1-9]\\d)\\d{5}","\\d{8}",,,"80123456"],[,,"NA","NA"],[,,"NA","NA"],"MK",389,"00","0",,,"0",,,,[[,"(2)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1","",0],[,"([347]\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1","",0],[,"([58]\\d{2})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],ML:[,[,,"[246-9]\\d{7}","\\d{8}"],[,,"(?:2(?:0(?:2[0-589]|7\\d)|1(?:2[5-7]|[3-689]\\d|7[2-4689]))|44[239]\\d)\\d{4}","\\d{8}",,,"20212345"],[,,"[67]\\d{7}|9[0-25-9]\\d{6}","\\d{8}",,,"65012345"],[,,"800\\d{5}","\\d{8}",,,"80012345"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"ML",223,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[246-9]"],"","",0],[,"(\\d{4})","$1",["67|74"],"","",0]],[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[246-9]"],"","",0]],[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],MM:[,[,,"[14578]\\d{5,7}|[26]\\d{5,8}|9(?:2\\d{0,2}|[58]|3\\d|4\\d{1,2}|6\\d?|[79]\\d{0,2})\\d{6}","\\d{5,10}"],[,,"1(?:2\\d{1,2}|[3-5]\\d|6\\d?|[89][0-6]\\d)\\d{4}|2(?:[236-9]\\d{4}|4(?:0\\d{5}|\\d{4})|5(?:1\\d{3,6}|[02-9]\\d{3,5}))|4(?:2[245-8]|[346][2-6]|5[3-5])\\d{4}|5(?:2(?:20?|[3-8])|3[2-68]|4(?:21?|[4-8])|5[23]|6[2-4]|7[2-8]|8[24-7]|9[2-7])\\d{4}|6(?:0[23]|1[2356]|[24][2-6]|3[24-6]|5[2-4]|6[2-8]|7(?:[2367]|4\\d|5\\d?|8[145]\\d)|8[245]|9[24])\\d{4}|7(?:[04][24-8]|[15][2-7]|22|3[2-4])\\d{4}|8(?:1(?:2\\d?|[3-689])|2[2-8]|3[24]|4[24-7]|5[245]|6[23])\\d{4}","\\d{5,9}",,,"1234567"],[,,"17[01]\\d{4}|9(?:2(?:[0-4]|5\\d{2})|3[136]\\d|4(?:0[0-4]\\d|[1379]\\d|[24][0-589]\\d|5\\d{2}|88)|5[0-6]|61?\\d|7(?:3\\d|9\\d{2})|8\\d|9(?:1\\d|7\\d{2}|[089]))\\d{5}","\\d{7,10}",,,"92123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"1333\\d{4}","\\d{8}",,,"13331234"],"MM",95,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["1|2[45]"],"0$1","",0],[,"(2)(\\d{4})(\\d{4})","$1 $2 $3",["251"],"0$1","",0],[,"(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1","",0],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["67|81"],"0$1","",0],[,"(\\d{2})(\\d{2})(\\d{3,4})","$1 $2 $3",["[4-8]"],"0$1","",0],[,"(9)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[13789])"],"0$1","",0],[,"(9)(4\\d{4})(\\d{4})","$1 $2 $3",["94[0245]"],"0$1","",0],[,"(9)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["925"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],
MN:[,[,,"[12]\\d{7,9}|[57-9]\\d{7}","\\d{6,10}"],[,,"[12](?:1\\d|2(?:[1-3]\\d?|7\\d)|3[2-8]\\d{1,2}|4[2-68]\\d{1,2}|5[1-4689]\\d{1,2})\\d{5}|5[0568]\\d{6}","\\d{6,10}",,,"50123456"],[,,"(?:8[689]|9[013-9])\\d{6}","\\d{8}",,,"88123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"7[05-8]\\d{6}","\\d{8}",,,"75123456"],"MN",976,"001","0",,,"0",,,,[[,"([12]\\d)(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1","",0],[,"([12]2\\d)(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1","",0],[,"([12]\\d{3})(\\d{5})","$1 $2",["[12](?:27|[3-5])","[12](?:27|[3-5]\\d)2"],"0$1","",0],[,"(\\d{4})(\\d{4})","$1 $2",["[57-9]"],"$1","",0],[,"([12]\\d{4})(\\d{4,5})","$1 $2",["[12](?:27|[3-5])","[12](?:27|[3-5]\\d)[4-9]"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],MO:[,[,,"[268]\\d{7}","\\d{8}"],[,,"(?:28[2-57-9]|8[2-57-9]\\d)\\d{5}","\\d{8}",,,"28212345"],[,,"6[236]\\d{6}","\\d{8}",,,"66123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"MO",853,"00",,,,,,,,[[,"([268]\\d{3})(\\d{4})","$1 $2",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],MP:[,[,,"[5689]\\d{9}","\\d{7}(?:\\d{3})?"],[,,"670(?:2(?:3[3-7]|56|8[5-8])|32[1238]|4(?:33|8[348])|5(?:32|55|88)|6(?:64|70|82)|78[589]|8[3-9]8|989)\\d{4}","\\d{7}(?:\\d{3})?",,,"6702345678"],[,,"670(?:2(?:3[3-7]|56|8[5-8])|32[1238]|4(?:33|8[348])|5(?:32|55|88)|6(?:64|70|82)|78[589]|8[3-9]8|989)\\d{4}","\\d{7}(?:\\d{3})?",,,"6702345678"],[,,"8(?:00|44|55|66|77|88)[2-9]\\d{6}","\\d{10}",,,"8002123456"],[,,"900[2-9]\\d{6}","\\d{10}",,,"9002123456"],[,,"NA","NA"],[,,"5(?:00|33|44|66|77)[2-9]\\d{6}","\\d{10}",,,"5002345678"],[,,"NA","NA"],"MP",1,"011","1",,,"1",,,1,,,[,,"NA","NA"],,"670",[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],MQ:[,[,,"[56]\\d{8}","\\d{9}"],[,,"596(?:0[2-5]|[12]0|3[05-9]|4[024-8]|[5-7]\\d|89|9[4-8])\\d{4}","\\d{9}",,,"596301234"],[,,"696(?:[0-479]\\d|5[01]|8[0-689])\\d{4}","\\d{9}",,,"696201234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"MQ",596,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",,"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],MR:[,[,,"[2-48]\\d{7}","\\d{8}"],[,,"25[08]\\d{5}|35\\d{6}|45[1-7]\\d{5}","\\d{8}",,,"35123456"],[,,"(?:2(?:2\\d|70)|3(?:3\\d|6[1-36]|7[1-3])|4(?:[49]\\d|6[0457-9]|7[4-9]|8[01346-8]))\\d{5}","\\d{8}",,,"22123456"],[,,"800\\d{5}","\\d{8}",,,"80012345"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"MR",222,"00",,,,,,,,[[,"([2-48]\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],MS:[,[,,"[5689]\\d{9}","\\d{7}(?:\\d{3})?"],[,,"664491\\d{4}","\\d{7}(?:\\d{3})?",,,"6644912345"],[,,"66449[2-6]\\d{4}","\\d{10}",,,"6644923456"],[,,"8(?:00|44|55|66|77|88)[2-9]\\d{6}","\\d{10}",,,"8002123456"],[,,"900[2-9]\\d{6}","\\d{10}",,,"9002123456"],[,,"NA","NA"],[,,"5(?:00|33|44|66|77)[2-9]\\d{6}","\\d{10}",,,"5002345678"],[,,"NA","NA"],"MS",1,"011","1",,,"1",,,,,,[,,"NA","NA"],,"664",[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],MT:[,[,,"[2357-9]\\d{7}","\\d{8}"],[,,"2(?:0(?:1[0-6]|3[1-4]|[69]\\d)|[1-357]\\d{2})\\d{4}","\\d{8}",,,"21001234"],[,,"(?:7(?:210|[79]\\d{2})|9(?:2(?:1[01]|31)|696|8(?:1[1-3]|89|97)|9\\d{2}))\\d{4}","\\d{8}",,,"96961234"],[,,"800[3467]\\d{4}","\\d{8}",,,"80071234"],[,,"5(?:0(?:0(?:37|43)|6\\d{2}|70\\d|9[0168])|[12]\\d0[1-5])\\d{3}","\\d{8}",,,"50037123"],[,,"NA","NA"],[,,"NA","NA"],[,,"3550\\d{4}","\\d{8}",,,"35501234"],"MT",356,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",,"","",0]],,[,,"7117\\d{4}","\\d{8}",,,"71171234"],,,[,,"NA","NA"],[,,"501\\d{5}","\\d{8}",,,"50112345"],,,[,,"NA","NA"]],MU:[,[,,"[2-9]\\d{6,7}","\\d{7,8}"],[,,"(?:2(?:[03478]\\d|1[0-7]|6[1-69])|4(?:[013568]\\d|2[4-7])|5(?:44\\d|471)|6\\d{2}|8(?:14|3[129]))\\d{4}","\\d{7,8}",,,"2012345"],[,,"5(?:2[59]\\d|4(?:2[1-389]|4\\d|7[1-9]|9\\d)|7\\d{2}|8(?:[256]\\d|7[15-8])|9[0-8]\\d)\\d{4}","\\d{8}",,,"52512345"],[,,"80[012]\\d{4}","\\d{7}",,,"8001234"],[,,"30\\d{5}","\\d{7}",,,"3012345"],[,,"NA","NA"],[,,"NA","NA"],[,,"3(?:20|9\\d)\\d{4}","\\d{7}",,,"3201234"],"MU",230,"0(?:0|[2-7]0|33)",,,,,,"020",,[[,"([2-46-9]\\d{2})(\\d{4})","$1 $2",["[2-46-9]"],"","",0],[,"(5\\d{3})(\\d{4})","$1 $2",["5"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],MV:[,[,,"[3467]\\d{6}|9(?:00\\d{7}|\\d{6})","\\d{7,10}"],[,,"(?:3(?:0[01]|3[0-59])|6(?:[567][02468]|8[024689]|90))\\d{4}","\\d{7}",,,"6701234"],[,,"(?:46[46]|7[3-9]\\d|9[16-9]\\d)\\d{4}","\\d{7}",,,"7712345"],[,,"NA","NA"],[,,"900\\d{7}","\\d{10}",,,"9001234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"MV",960,"0(?:0|19)",,,,,,"00",,[[,"(\\d{3})(\\d{4})","$1-$2",["[3467]|9(?:[1-9]|0[1-9])"],"","",0],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["900"],"","",0]],,[,,"781\\d{4}","\\d{7}",,,"7812345"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],MW:[,[,,"(?:1(?:\\d{2})?|[2789]\\d{2})\\d{6}","\\d{7,9}"],[,,"(?:1[2-9]|21\\d{2})\\d{5}","\\d{7,9}",,,"1234567"],[,,"(?:111|77\\d|88\\d|99\\d)\\d{6}","\\d{9}",,,"991234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"MW",265,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1"],"0$1","",0],[,"(2\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1","",0],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1789]"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],MX:[,[,,"[1-9]\\d{9,10}","\\d{7,11}"],[,,"(?:33|55|81)\\d{8}|(?:2(?:2[2-9]|3[1-35-8]|4[13-9]|7[1-689]|8[1-578]|9[467])|3(?:1[1-79]|[2458][1-9]|7[1-8]|9[1-5])|4(?:1[1-57-9]|[24-6][1-9]|[37][1-8]|8[1-35-9]|9[2-689])|5(?:88|9[1-79])|6(?:1[2-68]|[234][1-9]|5[1-3689]|6[12457-9]|7[1-7]|8[67]|9[4-8])|7(?:[13467][1-9]|2[1-8]|5[13-9]|8[1-69]|9[17])|8(?:2[13-689]|3[1-6]|4[124-6]|6[1246-9]|7[1-378]|9[12479])|9(?:1[346-9]|2[1-4]|3[2-46-8]|5[1348]|[69][1-9]|7[12]|8[1-8]))\\d{7}","\\d{7,10}",,,"2221234567"],[,,"1(?:(?:33|55|81)\\d{8}|(?:2(?:2[2-9]|3[1-35-8]|4[13-9]|7[1-689]|8[1-578]|9[467])|3(?:1[1-79]|[2458][1-9]|7[1-8]|9[1-5])|4(?:1[1-57-9]|[24-6][1-9]|[37][1-8]|8[1-35-9]|9[2-689])|5(?:88|9[1-79])|6(?:1[2-68]|[2-4][1-9]|5[1-3689]|6[12457-9]|7[1-7]|8[67]|9[4-8])|7(?:[13467][1-9]|2[1-8]|5[13-9]|8[1-69]|9[17])|8(?:2[13-689]|3[1-6]|4[124-6]|6[1246-9]|7[1-378]|9[12479])|9(?:1[346-9]|2[1-4]|3[2-46-8]|5[1348]|[69][1-9]|7[12]|8[1-8]))\\d{7})","\\d{11}",,,"12221234567"],[,,"800\\d{7}","\\d{10}",,,"8001234567"],[,,"900\\d{7}","\\d{10}",,,"9001234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"MX",52,"0[09]","01",,,"0[12]|04[45](\\d{10})","1$1",,,[[,"([358]\\d)(\\d{4})(\\d{4})","$1 $2 $3",["33|55|81"],"01 $1","",1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2467]|3[12457-9]|5[89]|8[02-9]|9[0-35-9]"],"01 $1","",1],[,"(1)([358]\\d)(\\d{4})(\\d{4})","044 $2 $3 $4",["1(?:33|55|81)"],"$1","",1],[,"(1)(\\d{3})(\\d{3})(\\d{4})","044 $2 $3 $4",["1(?:[2467]|3[12457-9]|5[89]|8[2-9]|9[1-35-9])"],"$1","",1]],[[,"([358]\\d)(\\d{4})(\\d{4})","$1 $2 $3",["33|55|81"],"01 $1","",1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2467]|3[12457-9]|5[89]|8[02-9]|9[0-35-9]"],"01 $1","",1],[,"(1)([358]\\d)(\\d{4})(\\d{4})","$1 $2 $3 $4",["1(?:33|55|81)"]],[,"(1)(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1(?:[2467]|3[12457-9]|5[89]|8[2-9]|9[1-35-9])"]]],[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],1,,[,,"NA","NA"]],MY:[,[,,"[13-9]\\d{7,9}","\\d{6,10}"],[,,"(?:3[2-9]\\d|[4-9][2-9])\\d{6}","\\d{6,9}",,,"323456789"],[,,"1(?:1[1-3]\\d{2}|[02-4679][2-9]\\d|59\\d{2}|8(?:1[23]|[2-9]\\d))\\d{5}","\\d{9,10}",,,"123456789"],[,,"1[378]00\\d{6}","\\d{10}",,,"1300123456"],[,,"1600\\d{6}","\\d{10}",,,"1600123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"154\\d{7}","\\d{10}",,,"1541234567"],"MY",60,"00","0",,,"0",,,,[[,"([4-79])(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1","",0],[,"(3)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1","",0],[,"([18]\\d)(\\d{3})(\\d{3,4})","$1-$2 $3",["1[02-46-9][1-9]|8"],"0$1","",0],[,"(1)([36-8]00)(\\d{2})(\\d{4})","$1-$2-$3-$4",["1[36-8]0"],"","",0],[,"(11)(\\d{4})(\\d{4})","$1-$2 $3",["11"],"0$1","",0],[,"(15[49])(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],MZ:[,[,,"[28]\\d{7,8}","\\d{8,9}"],[,,"2(?:[1346]\\d|5[0-2]|[78][12]|93)\\d{5}","\\d{8}",,,"21123456"],[,,"8[23467]\\d{7}","\\d{9}",,,"821234567"],[,,"800\\d{6}","\\d{9}",,,"800123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"MZ",258,"00",,,,,,,,[[,"([28]\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-7]"],"","",0],[,"(80\\d)(\\d{3})(\\d{3})","$1 $2 $3",["80"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],NA:[,[,,"[68]\\d{7,8}","\\d{8,9}"],[,,"6(?:1(?:17|2(?:[0189]\\d|[2-6]|7\\d?)|3(?:[01378]|2\\d)|4[01]|69|7[014])|2(?:17|5(?:[0-36-8]|4\\d?)|69|70)|3(?:17|2(?:[0237]\\d?|[14-689])|34|6[29]|7[01]|81)|4(?:17|2(?:[012]|7?)|4(?:[06]|1\\d)|5(?:[01357]|[25]\\d?)|69|7[01])|5(?:17|2(?:[0459]|[23678]\\d?)|69|7[01])|6(?:17|2(?:5|6\\d?)|38|42|69|7[01])|7(?:17|2(?:[569]|[234]\\d?)|3(?:0\\d?|[13])|69|7[01]))\\d{4}","\\d{8,9}",,,"61221234"],[,,"(?:60|8[125])\\d{7}","\\d{9}",,,"811234567"],[,,"NA","NA"],[,,"8701\\d{5}","\\d{9}",,,"870123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"8(?:3\\d{2}|86)\\d{5}","\\d{8,9}",,,"88612345"],"NA",264,"00","0",,,"0",,,,[[,"(8\\d)(\\d{3})(\\d{4})","$1 $2 $3",["8[1235]"],"0$1","",0],[,"(6\\d)(\\d{2,3})(\\d{4})","$1 $2 $3",["6"],"0$1","",0],[,"(88)(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1","",0],[,"(870)(\\d{3})(\\d{3})","$1 $2 $3",["870"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],NC:[,[,,"[2-57-9]\\d{5}","\\d{6}"],[,,"(?:2[03-9]|3[0-5]|4[1-7]|88)\\d{4}","\\d{6}",,,"201234"],[,,"(?:5[0-4]|[79]\\d|8[0-79])\\d{4}","\\d{6}",,,"751234"],[,,"NA","NA"],[,,"36\\d{4}","\\d{6}",,,"366711"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"NC",687,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[2-46-9]|5[0-4]"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],NE:[,[,,"[0289]\\d{7}","\\d{8}"],[,,"2(?:0(?:20|3[1-7]|4[134]|5[14]|6[14578]|7[1-578])|1(?:4[145]|5[14]|6[14-68]|7[169]|88))\\d{4}","\\d{8}",,,"20201234"],[,,"(?:89|9\\d)\\d{6}","\\d{8}",,,"93123456"],[,,"08\\d{6}","\\d{8}",,,"08123456"],[,,"09\\d{6}","\\d{8}",,,"09123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"NE",227,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[289]|09"],"","",0],[,"(08)(\\d{3})(\\d{3})","$1 $2 $3",["08"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],1,,[,,"NA","NA"]],NF:[,[,,"[13]\\d{5}","\\d{5,6}"],[,,"(?:1(?:06|17|28|39)|3[012]\\d)\\d{3}","\\d{5,6}",,,"106609"],[,,"38\\d{4}","\\d{5,6}",,,"381234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"NF",672,"00",,,,,,,,[[,"(\\d{2})(\\d{4})","$1 $2",["1"],"","",0],[,"(\\d)(\\d{5})","$1 $2",["3"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],NG:[,[,,"[1-6]\\d{5,8}|9\\d{5,9}|[78]\\d{5,13}","\\d{5,14}"],[,,"[12]\\d{6,7}|9(?:0[3-9]|[1-9]\\d)\\d{5}|(?:3\\d|4[023568]|5[02368]|6[02-469]|7[4-69]|8[2-9])\\d{6}|(?:4[47]|5[14579]|6[1578]|7[0-357])\\d{5,6}|(?:78|41)\\d{5}","\\d{5,9}",,,"12345678"],[,,"(?:1(?:7[34]\\d|8(?:04|[124579]\\d|8[0-3])|95\\d)|287[0-7]|3(?:18[1-8]|88[0-7]|9(?:8[5-9]|6[1-5]))|4(?:28[0-2]|6(?:7[1-9]|8[02-47])|88[0-2])|5(?:2(?:7[7-9]|8\\d)|38[1-79]|48[0-7]|68[4-7])|6(?:2(?:7[7-9]|8\\d)|4(?:3[7-9]|[68][129]|7[04-69]|9[1-8])|58[0-2]|98[7-9])|7(?:38[0-7]|69[1-8]|78[2-4])|8(?:28[3-9]|38[0-2]|4(?:2[12]|3[147-9]|5[346]|7[4-9]|8[014-689]|90)|58[1-8]|78[2-9]|88[5-7])|98[07]\\d)\\d{4}|(?:70(?:[13-9]\\d|2[1-9])|8(?:0[2-9]|1\\d)\\d|90[239]\\d)\\d{6}","\\d{8,10}",,,"8021234567"],[,,"800\\d{7,11}","\\d{10,14}",,,"80017591759"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"NG",234,"009","0",,,"0",,,,[[,"([129])(\\d{3})(\\d{3,4})","$1 $2 $3",["[129]"],"0$1","",0],[,"(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[3-6]|7(?:[1-79]|0[1-9])|8[2-9]"],"0$1","",0],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["70|8[01]|90[239]"],"0$1","",0],[,"([78]00)(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]00"],"0$1","",0],[,"([78]00)(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]00"],"0$1","",0],[,"(78)(\\d{2})(\\d{3})","$1 $2 $3",["78"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"700\\d{7,11}","\\d{10,14}",,,"7001234567"],,,[,,"NA","NA"]],NI:[,[,,"[12578]\\d{7}","\\d{8}"],[,,"2\\d{7}","\\d{8}",,,"21234567"],[,,"5(?:5[0-7]\\d{5}|[78]\\d{6})|7[5-8]\\d{6}|8\\d{7}","\\d{8}",,,"81234567"],[,,"1800\\d{4}","\\d{8}",,,"18001234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"NI",505,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],NL:[,[,,"1\\d{4,8}|[2-7]\\d{8}|[89]\\d{6,9}","\\d{5,10}"],[,,"(?:1[0135-8]|2[02-69]|3[0-68]|4[0135-9]|[57]\\d|8[478])\\d{7}","\\d{9}",,,"101234567"],[,,"6[1-58]\\d{7}","\\d{9}",,,"612345678"],[,,"800\\d{4,7}","\\d{7,10}",,,"8001234"],[,,"90[069]\\d{4,7}","\\d{7,10}",,,"9061234"],[,,"NA","NA"],[,,"NA","NA"],[,,"85\\d{7}","\\d{9}",,,"851234567"],"NL",31,"00","0",,,"0",,,,[[,"([1-578]\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1[035]|2[0346]|3[03568]|4[0356]|5[0358]|7|8[4578]"],"0$1","",0],[,"([1-5]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1","",0],[,"(6)(\\d{8})","$1 $2",["6[0-57-9]"],"0$1","",0],[,"(66)(\\d{7})","$1 $2",["66"],"0$1","",0],[,"(14)(\\d{3,4})","$1 $2",["14"],"$1","",0],[,"([89]0\\d)(\\d{4,7})","$1 $2",["80|9"],"0$1","",0]],,[,,"66\\d{7}","\\d{9}",,,"662345678"],,,[,,"14\\d{3,4}","\\d{5,6}"],[,,"140(?:1(?:[035]|[16-8]\\d)|2(?:[0346]|[259]\\d)|3(?:[03568]|[124]\\d)|4(?:[0356]|[17-9]\\d)|5(?:[0358]|[124679]\\d)|7\\d|8[458])","\\d{5,6}",,,"14020"],,,[,,"NA","NA"]],NO:[,[,,"0\\d{4}|[2-9]\\d{7}","\\d{5}(?:\\d{3})?"],[,,"(?:2[1-4]|3[1-3578]|5[1-35-7]|6[1-4679]|7[0-8])\\d{6}","\\d{8}",,,"21234567"],[,,"(?:4[015-8]|5[89]|9\\d)\\d{6}","\\d{8}",,,"40612345"],[,,"80[01]\\d{5}","\\d{8}",,,"80012345"],[,,"82[09]\\d{5}","\\d{8}",,,"82012345"],[,,"810(?:0[0-6]|[2-8]\\d)\\d{3}","\\d{8}",,,"81021234"],[,,"880\\d{5}","\\d{8}",,,"88012345"],[,,"85[0-5]\\d{5}","\\d{8}",,,"85012345"],"NO",47,"00",,,,,,,,[[,"([489]\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[489]"],"","",0],[,"([235-7]\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-7]"],"","",0]],,[,,"NA","NA"],1,,[,,"NA","NA"],[,,"0\\d{4}|81(?:0(?:0[7-9]|1\\d)|5\\d{2})\\d{3}","\\d{5}(?:\\d{3})?",,,"01234"],1,,[,,"81[23]\\d{5}","\\d{8}",,,"81212345"]],NP:[,[,,"[1-8]\\d{7}|9(?:[1-69]\\d{6,8}|7[2-6]\\d{5,7}|8\\d{8})","\\d{6,10}"],[,,"(?:1[0-6]\\d|2[13-79][2-6]|3[135-8][2-6]|4[146-9][2-6]|5[135-7][2-6]|6[13-9][2-6]|7[15-9][2-6]|8[1-46-9][2-6]|9[1-79][2-6])\\d{5}","\\d{6,8}",,,"14567890"],[,,"9(?:6[013]|7[245]|8[01456])\\d{7}","\\d{10}",,,"9841234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"NP",977,"00","0",,,"0",,,,[[,"(1)(\\d{7})","$1-$2",["1[2-6]"],"0$1","",0],[,"(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-69]|7[15-9])"],"0$1","",0],[,"(9\\d{2})(\\d{7})","$1-$2",["9(?:6[013]|7[245]|8)"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],NR:[,[,,"[458]\\d{6}","\\d{7}"],[,,"(?:444|888)\\d{4}","\\d{7}",,,"4441234"],[,,"55[5-9]\\d{4}","\\d{7}",,,"5551234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"NR",674,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],NU:[,[,,"[1-5]\\d{3}","\\d{4}"],[,,"[34]\\d{3}","\\d{4}",,,"4002"],[,,"[125]\\d{3}","\\d{4}",,,"1234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"NU",683,"00",,,,,,,,,,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],NZ:[,[,,"6[235-9]\\d{6}|[2-57-9]\\d{7,10}","\\d{7,11}"],[,,"(?:3[2-79]|[49][2-689]|6[235-9]|7[2-5789])\\d{6}|24099\\d{3}","\\d{7,8}",,,"32345678"],[,,"2(?:[028]\\d{7,8}|1(?:[03]\\d{5,7}|[12457]\\d{5,6}|[689]\\d{5})|[79]\\d{7})","\\d{8,10}",,,"211234567"],[,,"508\\d{6,7}|80\\d{6,8}","\\d{8,10}",,,"800123456"],[,,"90\\d{7,9}","\\d{9,11}",,,"900123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"NZ",64,"0(?:0|161)","0",,,"0",,"00",,[[,"([34679])(\\d{3})(\\d{4})","$1-$2 $3",["[3467]|9[1-9]"],"0$1","",0],[,"(24099)(\\d{3})","$1 $2",["240","2409","24099"],"0$1","",0],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["21"],"0$1","",0],[,"(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:1[1-9]|[69]|7[0-35-9])|86"],"0$1","",0],[,"(2\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["2[028]"],"0$1","",0],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|5|[89]0"],"0$1","",0]],,[,,"[28]6\\d{6,7}","\\d{8,9}",,,"26123456"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],OM:[,[,,"(?:2[2-6]|5|9[1-9])\\d{6}|800\\d{5,6}","\\d{7,9}"],[,,"2[2-6]\\d{6}","\\d{8}",,,"23123456"],[,,"9[1-9]\\d{6}","\\d{8}",,,"92123456"],[,,"8007\\d{4,5}|500\\d{4}","\\d{7,9}",,,"80071234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"OM",968,"00",,,,,,,,[[,"(2\\d)(\\d{6})","$1 $2",["2"],"","",0],[,"(9\\d{3})(\\d{4})","$1 $2",["9"],"","",0],[,"([58]00)(\\d{4,6})","$1 $2",["[58]"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],PA:[,[,,"[1-9]\\d{6,7}","\\d{7,8}"],[,,"(?:1(?:0[02-579]|19|2[37]|3[03]|4[479]|57|65|7[016-8]|8[58]|9[1349])|2(?:[0235679]\\d|1[0-7]|4[04-9]|8[028])|3(?:[09]\\d|1[14-7]|2[0-3]|3[03]|4[0457]|5[56]|6[068]|7[06-8]|8[089])|4(?:3[013-69]|4\\d|7[0-689])|5(?:[01]\\d|2[0-7]|[56]0|79)|7(?:0[09]|2[0-267]|3[06]|[49]0|5[06-9]|7[0-24-7]|8[89])|8(?:[34]\\d|5[0-4]|8[02])|9(?:0[6-8]|1[016-8]|2[036-8]|3[3679]|40|5[0489]|6[06-9]|7[046-9]|8[36-8]|9[1-9]))\\d{4}","\\d{7}",,,"2001234"],[,,"(?:1[16]1|21[89]|8(?:1[01]|7[23]))\\d{4}|6(?:[024-9]\\d|1[0-5]|3[0-24-9])\\d{5}","\\d{7,8}",,,"60012345"],[,,"80[09]\\d{4}","\\d{7}",,,"8001234"],[,,"(?:779|8(?:2[235]|55|60|7[578]|86|95)|9(?:0[0-2]|81))\\d{4}","\\d{7}",,,"8601234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"PA",507,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"],"","",0],[,"(\\d{4})(\\d{4})","$1-$2",["6"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],PE:[,[,,"[14-9]\\d{7,8}","\\d{6,9}"],[,,"(?:1\\d|4[1-4]|5[1-46]|6[1-7]|7[2-46]|8[2-4])\\d{6}","\\d{6,8}",,,"11234567"],[,,"9\\d{8}","\\d{9}",,,"912345678"],[,,"800\\d{5}","\\d{8}",,,"80012345"],[,,"805\\d{5}","\\d{8}",,,"80512345"],[,,"801\\d{5}","\\d{8}",,,"80112345"],[,,"80[24]\\d{5}","\\d{8}",,,"80212345"],[,,"NA","NA"],"PE",51,"19(?:1[124]|77|90)00","0"," Anexo ",,"0",,,,[[,"(1)(\\d{7})","$1 $2",["1"],"(0$1)","",0],[,"([4-8]\\d)(\\d{6})","$1 $2",["[4-7]|8[2-4]"],"(0$1)","",0],[,"(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)","",0],[,"(9\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],PF:[,[,,"4\\d{5,7}|8\\d{7}","\\d{6}(?:\\d{2})?"],[,,"4(?:[09][45689]\\d|4)\\d{4}","\\d{6}(?:\\d{2})?",,,"40412345"],[,,"8[79]\\d{6}","\\d{8}",,,"87123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"PF",689,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4[09]|8[79]"],"","",0],[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"],"","",0]],,[,,"NA","NA"],,,[,,"44\\d{4}","\\d{6}",,,"441234"],[,,"NA","NA"],,,[,,"NA","NA"]],PG:[,[,,"[1-9]\\d{6,7}","\\d{7,8}"],[,,"(?:3[0-2]\\d|4[25]\\d|5[34]\\d|64[1-9]|77(?:[0-24]\\d|30)|85[02-46-9]|9[78]\\d)\\d{4}","\\d{7}",,,"3123456"],[,,"(?:20150|68\\d{2}|7(?:[0-369]\\d|75)\\d{2})\\d{3}","\\d{7,8}",,,"6812345"],[,,"180\\d{4}","\\d{7}",,,"1801234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"275\\d{4}","\\d{7}",,,"2751234"],"PG",675,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[13-689]|27"],"","",0],[,"(\\d{4})(\\d{4})","$1 $2",["20|7"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],PH:[,[,,"2\\d{5,7}|[3-9]\\d{7,9}|1800\\d{7,9}","\\d{5,13}"],[,,"2\\d{5}(?:\\d{2})?|(?:3[2-68]|4[2-9]|5[2-6]|6[2-58]|7[24578]|8[2-8])\\d{7}|88(?:22\\d{6}|42\\d{4})","\\d{5,10}",,,"21234567"],[,,"(?:81[37]|9(?:0[5-9]|1[024-9]|2[0-35-9]|3[02-9]|4[236-9]|7[34-79]|89|9[4-9]))\\d{7}","\\d{10}",,,"9051234567"],[,,"1800\\d{7,9}","\\d{11,13}",,,"180012345678"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"PH",63,"00","0",,,"0",,,,[[,"(2)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"(0$1)","",0],[,"(2)(\\d{5})","$1 $2",["2"],"(0$1)","",0],[,"(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|5(?:22|44)|642|8(?:62|8[245])","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)","",0],[,"(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)","",0],[,"([3-8]\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[3-8]"],"(0$1)","",0],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["81|9"],"0$1","",0],[,"(1800)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"","",0],[,"(1800)(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],PK:[,[,,"1\\d{8}|[2-8]\\d{5,11}|9(?:[013-9]\\d{4,9}|2\\d(?:111\\d{6}|\\d{3,7}))","\\d{6,12}"],[,,"(?:21|42)[2-9]\\d{7}|(?:2[25]|4[0146-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]\\d{6}|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:1|2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8]))[2-9]\\d{5,6}|58[126]\\d{7}","\\d{6,10}",,,"2123456789"],[,,"3(?:0\\d|[12][0-5]|3[1-7]|4[0-7]|55|64)\\d{7}","\\d{10}",,,"3012345678"],[,,"800\\d{5}","\\d{8}",,,"80012345"],[,,"900\\d{5}","\\d{8}",,,"90012345"],[,,"NA","NA"],[,,"122\\d{6}","\\d{9}",,,"122044444"],[,,"NA","NA"],"PK",92,"00","0",,,"0",,,,[[,"(\\d{2})(111)(\\d{3})(\\d{3})","$1 $2 $3 $4",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)1","(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)11","(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)111"],"(0$1)","",0],[,"(\\d{3})(111)(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[349]|45|54|60|72|8[2-5]|9[2-9]","(?:2[349]|45|54|60|72|8[2-5]|9[2-9])\\d1","(?:2[349]|45|54|60|72|8[2-5]|9[2-9])\\d11","(?:2[349]|45|54|60|72|8[2-5]|9[2-9])\\d111"],"(0$1)","",0],[,"(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)","",0],[,"(\\d{3})(\\d{6,7})","$1 $2",["2[349]|45|54|60|72|8[2-5]|9[2-9]","(?:2[349]|45|54|60|72|8[2-5]|9[2-9])\\d[2-9]"],"(0$1)","",0],[,"(3\\d{2})(\\d{7})","$1 $2",["3"],"0$1","",0],[,"([15]\\d{3})(\\d{5,6})","$1 $2",["58[12]|1"],"(0$1)","",0],[,"(586\\d{2})(\\d{5})","$1 $2",["586"],"(0$1)","",0],[,"([89]00)(\\d{3})(\\d{2})","$1 $2 $3",["[89]00"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"(?:2(?:[125]|3[2358]|4[2-4]|9[2-8])|4(?:[0-246-9]|5[3479])|5(?:[1-35-7]|4[2-467])|6(?:[1-8]|0[468])|7(?:[14]|2[236])|8(?:[16]|2[2-689]|3[23578]|4[3478]|5[2356])|9(?:1|22|3[27-9]|4[2-6]|6[3569]|9[2-7]))111\\d{6}","\\d{11,12}",,,"21111825888"],,,[,,"NA","NA"]],PL:[,[,,"[12]\\d{6,8}|[3-57-9]\\d{8}|6\\d{5,8}","\\d{6,9}"],[,,"(?:1[2-8]|2[2-59]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])\\d{7}|[12]2\\d{5}","\\d{6,9}",,,"123456789"],[,,"(?:5[0137]|6[069]|7[2389]|88)\\d{7}","\\d{9}",,,"512345678"],[,,"800\\d{6}","\\d{9}",,,"800123456"],[,,"70\\d{7}","\\d{9}",,,"701234567"],[,,"801\\d{6}","\\d{9}",,,"801234567"],[,,"NA","NA"],[,,"39\\d{7}","\\d{9}",,,"391234567"],"PL",48,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[124]|3[2-4]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145]"],"","",0],[,"(\\d{2})(\\d{1})(\\d{4})","$1 $2 $3",["[12]2"],"","",0],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["39|5[0137]|6[0469]|7[02389]|8[08]"],"","",0],[,"(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"],"","",0],[,"(\\d{3})(\\d{3})","$1 $2",["64"],"","",0]],,[,,"64\\d{4,7}","\\d{6,9}",,,"641234567"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],PM:[,[,,"[45]\\d{5}","\\d{6}"],[,,"41\\d{4}","\\d{6}",,,"411234"],[,,"55\\d{4}","\\d{6}",,,"551234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"PM",508,"00","0",,,"0",,,,[[,"([45]\\d)(\\d{2})(\\d{2})","$1 $2 $3",,"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],PR:[,[,,"[5789]\\d{9}","\\d{7}(?:\\d{3})?"],[,,"(?:787|939)[2-9]\\d{6}","\\d{7}(?:\\d{3})?",,,"7872345678"],[,,"(?:787|939)[2-9]\\d{6}","\\d{7}(?:\\d{3})?",,,"7872345678"],[,,"8(?:00|44|55|66|77|88)[2-9]\\d{6}","\\d{10}",,,"8002345678"],[,,"900[2-9]\\d{6}","\\d{10}",,,"9002345678"],[,,"NA","NA"],[,,"5(?:00|33|44|66|77)[2-9]\\d{6}","\\d{10}",,,"5002345678"],[,,"NA","NA"],"PR",1,"011","1",,,"1",,,1,,,[,,"NA","NA"],,"787|939",[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],PS:[,[,,"[24589]\\d{7,8}|1(?:[78]\\d{8}|[49]\\d{2,3})","\\d{4,10}"],[,,"(?:22[234789]|42[45]|82[01458]|92[369])\\d{5}","\\d{7,8}",,,"22234567"],[,,"5[69]\\d{7}","\\d{9}",,,"599123456"],[,,"1800\\d{6}","\\d{10}",,,"1800123456"],[,,"1(?:4|9\\d)\\d{2}","\\d{4,5}",,,"19123"],[,,"1700\\d{6}","\\d{10}",,,"1700123456"],[,,"NA","NA"],[,,"NA","NA"],"PS",970,"00","0",,,"0",,,,[[,"([2489])(2\\d{2})(\\d{4})","$1 $2 $3",["[2489]"],"0$1","",0],[,"(5[69]\\d)(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1","",0],[,"(1[78]00)(\\d{3})(\\d{3})","$1 $2 $3",["1[78]"],"$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],PT:[,[,,"[2-46-9]\\d{8}","\\d{9}"],[,,"2(?:[12]\\d|[35][1-689]|4[1-59]|6[1-35689]|7[1-9]|8[1-69]|9[1256])\\d{6}","\\d{9}",,,"212345678"],[,,"9(?:[136]\\d{2}|2[0-79]\\d|480)\\d{5}","\\d{9}",,,"912345678"],[,,"80[02]\\d{6}","\\d{9}",,,"800123456"],[,,"76(?:0[1-57]|1[2-47]|2[237])\\d{5}","\\d{9}",,,"760123456"],[,,"80(?:8\\d|9[1579])\\d{5}","\\d{9}",,,"808123456"],[,,"884[128]\\d{5}","\\d{9}",,,"884123456"],[,,"30\\d{7}","\\d{9}",,,"301234567"],"PT",351,"00",,,,,,,,[[,"(2\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"],"","",0],[,"([2-46-9]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[3-9]|[346-9]"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"70(?:7\\d|8[17])\\d{5}","\\d{9}",,,"707123456"],,,[,,"NA","NA"]],PW:[,[,,"[2-8]\\d{6}","\\d{7}"],[,,"2552255|(?:277|345|488|5(?:35|44|87)|6(?:22|54|79)|7(?:33|47)|8(?:24|55|76))\\d{4}","\\d{7}",,,"2771234"],[,,"(?:6[234689]0|77[45789])\\d{4}","\\d{7}",,,"6201234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"PW",680,"01[12]",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],PY:[,[,,"5[0-5]\\d{4,7}|[2-46-9]\\d{5,8}","\\d{5,9}"],[,,"(?:[26]1|3[289]|4[124678]|7[123]|8[1236])\\d{5,7}|(?:2(?:2[4568]|7[15]|9[1-5])|3(?:18|3[167]|4[2357]|51)|4(?:18|2[45]|3[12]|5[13]|64|71|9[1-47])|5(?:[1-4]\\d|5[0234])|6(?:3[1-3]|44|7[1-4678])|7(?:17|4[0-4]|6[1-578]|75|8[0-8])|858)\\d{5,6}","\\d{5,9}",,,"212345678"],[,,"9(?:6[12]|[78][1-6]|9[1-5])\\d{6}","\\d{9}",,,"961456789"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"8700[0-4]\\d{4}","\\d{9}",,,"870012345"],"PY",595,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{5,7})","$1 $2",["(?:[26]1|3[289]|4[124678]|7[123]|8[1236])"],"($1)","",0],[,"(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1","",0],[,"(\\d{3})(\\d{6})","$1 $2",["9[1-9]"],"0$1","",0],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8700"],"","",0],[,"(\\d{3})(\\d{4,6})","$1 $2",["[2-8][1-9]"],"($1)","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"[2-9]0\\d{4,7}","\\d{6,9}",,,"201234567"],,,[,,"NA","NA"]],QA:[,[,,"[2-8]\\d{6,7}","\\d{7,8}"],[,,"4[04]\\d{6}","\\d{7,8}",,,"44123456"],[,,"[3567]\\d{7}","\\d{7,8}",,,"33123456"],[,,"800\\d{4}","\\d{7,8}",,,"8001234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"QA",974,"00",,,,,,,,[[,"([28]\\d{2})(\\d{4})","$1 $2",["[28]"],"","",0],[,"([3-7]\\d{3})(\\d{4})","$1 $2",["[3-7]"],"","",0]],,[,,"2(?:[12]\\d|61)\\d{4}","\\d{7}",,,"2123456"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],RE:[,[,,"[268]\\d{8}","\\d{9}"],[,,"262\\d{6}","\\d{9}",,,"262161234"],[,,"6(?:9[23]|47)\\d{6}","\\d{9}",,,"692123456"],[,,"80\\d{7}","\\d{9}",,,"801234567"],[,,"89[1-37-9]\\d{6}","\\d{9}",,,"891123456"],[,,"8(?:1[019]|2[0156]|84|90)\\d{6}","\\d{9}",,,"810123456"],[,,"NA","NA"],[,,"NA","NA"],"RE",262,"00","0",,,"0",,,,[[,"([268]\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",,"0$1","",0]],,[,,"NA","NA"],1,"262|6[49]|8",[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],RO:[,[,,"2\\d{5,8}|[37-9]\\d{8}","\\d{6,9}"],[,,"2(?:1(?:\\d{7}|9\\d{3})|[3-6](?:\\d{7}|\\d9\\d{2}))|3[13-6]\\d{7}","\\d{6,9}",,,"211234567"],[,,"7(?:000|[1-8]\\d{2}|99\\d)\\d{5}","\\d{9}",,,"712345678"],[,,"800\\d{6}","\\d{9}",,,"800123456"],[,,"90[036]\\d{6}","\\d{9}",,,"900123456"],[,,"801\\d{6}","\\d{9}",,,"801123456"],[,,"802\\d{6}","\\d{9}",,,"802123456"],[,,"NA","NA"],"RO",40,"00","0"," int ",,"0",,,,[[,"([237]\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1","",0],[,"(21)(\\d{4})","$1 $2",["21"],"0$1","",0],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[23][3-7]|[7-9]"],"0$1","",0],[,"(2\\d{2})(\\d{3})","$1 $2",["2[3-6]"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"37\\d{7}","\\d{9}",,,"372123456"],,,[,,"NA","NA"]],RS:[,[,,"[126-9]\\d{4,11}|3(?:[0-79]\\d{3,10}|8[2-9]\\d{2,9})","\\d{5,12}"],[,,"(?:1(?:[02-9][2-9]|1[1-9])\\d|2(?:[0-24-7][2-9]\\d|[389](?:0[2-9]|[2-9]\\d))|3(?:[0-8][2-9]\\d|9(?:[2-9]\\d|0[2-9])))\\d{3,8}","\\d{5,12}",,,"10234567"],[,,"6(?:[0-689]|7\\d)\\d{6,7}","\\d{8,10}",,,"601234567"],[,,"800\\d{3,9}","\\d{6,12}",,,"80012345"],[,,"(?:90[0169]|78\\d)\\d{3,7}","\\d{6,12}",,,"90012345"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"RS",381,"00","0",,,"0",,,,[[,"([23]\\d{2})(\\d{4,9})","$1 $2",["(?:2[389]|39)0"],"0$1","",0],[,"([1-3]\\d)(\\d{5,10})","$1 $2",["1|2(?:[0-24-7]|[389][1-9])|3(?:[0-8]|9[1-9])"],"0$1","",0],[,"(6\\d)(\\d{6,8})","$1 $2",["6"],"0$1","",0],[,"([89]\\d{2})(\\d{3,9})","$1 $2",["[89]"],"0$1","",0],[,"(7[26])(\\d{4,9})","$1 $2",["7[26]"],"0$1","",0],[,"(7[08]\\d)(\\d{4,9})","$1 $2",["7[08]"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"7[06]\\d{4,10}","\\d{6,12}",,,"700123456"],,,[,,"NA","NA"]],RU:[,[,,"[3489]\\d{9}","\\d{10}"],[,,"(?:3(?:0[12]|4[1-35-79]|5[1-3]|8[1-58]|9[0145])|4(?:01|1[1356]|2[13467]|7[1-5]|8[1-7]|9[1-689])|8(?:1[1-8]|2[01]|3[13-6]|4[0-8]|5[15]|6[1-35-7]|7[1-37-9]))\\d{7}","\\d{10}",,,"3011234567"],[,,"9\\d{9}","\\d{10}",,,"9123456789"],[,,"80[04]\\d{7}","\\d{10}",,,"8001234567"],[,,"80[39]\\d{7}","\\d{10}",,,"8091234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"RU",7,"810","8",,,"8",,"8~10",,[[,"(\\d{3})(\\d{2})(\\d{2})","$1-$2-$3",["[1-79]"],"$1","",1],[,"([3489]\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[34689]"],"8 ($1)","",1],[,"(7\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)","",1]],[[,"([3489]\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[34689]"],"8 ($1)","",1],[,"(7\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)","",1]],[,,"NA","NA"],1,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],RW:[,[,,"[027-9]\\d{7,8}","\\d{8,9}"],[,,"2[258]\\d{7}|06\\d{6}","\\d{8,9}",,,"250123456"],[,,"7[238]\\d{7}","\\d{9}",,,"720123456"],[,,"800\\d{6}","\\d{9}",,,"800123456"],[,,"900\\d{6}","\\d{9}",,,"900123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"RW",250,"00","0",,,"0",,,,[[,"(2\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"$1","",0],[,"([7-9]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1","",0],[,"(0\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],1,,[,,"NA","NA"]],SA:[,[,,"1\\d{7,8}|(?:[2-467]|92)\\d{7}|5\\d{8}|8\\d{9}","\\d{7,10}"],[,,"11\\d{7}|1?(?:2[24-8]|3[35-8]|4[3-68]|6[2-5]|7[235-7])\\d{6}","\\d{7,9}",,,"112345678"],[,,"(?:5(?:[013-689]\\d|7[0-26-8])|811\\d)\\d{6}","\\d{9,10}",,,"512345678"],[,,"800\\d{7}","\\d{10}",,,"8001234567"],[,,"NA","NA"],[,,"92[05]\\d{6}","\\d{9}",,,"920012345"],[,,"NA","NA"],[,,"NA","NA"],"SA",966,"00","0",,,"0",,,,[[,"([1-467])(\\d{3})(\\d{4})","$1 $2 $3",["[1-467]"],"0$1","",0],[,"(1\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1[1-467]"],"0$1","",0],[,"(5\\d)(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1","",0],[,"(92\\d{2})(\\d{5})","$1 $2",["92"],"$1","",0],[,"(800)(\\d{3})(\\d{4})","$1 $2 $3",["80"],"$1","",0],[,"(811)(\\d{3})(\\d{3,4})","$1 $2 $3",["81"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],SB:[,[,,"[1-9]\\d{4,6}","\\d{5,7}"],[,,"(?:1[4-79]|[23]\\d|4[01]|5[03]|6[0-37])\\d{3}","\\d{5}",,,"40123"],[,,"48\\d{3}|7(?:[0146-8]\\d|5[025-9]|9[0124])\\d{4}|8[4-8]\\d{5}|9(?:[46]\\d|5[0-46-9]|7[0-689]|8[0-79]|9[0-8])\\d{4}","\\d{5,7}",,,"7421234"],[,,"1[38]\\d{3}","\\d{5}",,,"18123"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"5[12]\\d{3}","\\d{5}",,,"51123"],"SB",677,"0[01]",,,,,,,,[[,"(\\d{2})(\\d{5})","$1 $2",["[7-9]"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],
SC:[,[,,"[24689]\\d{5,6}","\\d{6,7}"],[,,"4[2-46]\\d{5}","\\d{7}",,,"4217123"],[,,"2[5-8]\\d{5}","\\d{7}",,,"2510123"],[,,"8000\\d{2}","\\d{6}",,,"800000"],[,,"98\\d{4}","\\d{6}",,,"981234"],[,,"NA","NA"],[,,"NA","NA"],[,,"64\\d{5}","\\d{7}",,,"6412345"],"SC",248,"0[0-2]",,,,,,"00",,[[,"(\\d{3})(\\d{3})","$1 $2",["[89]"],"","",0],[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],SD:[,[,,"[19]\\d{8}","\\d{9}"],[,,"1(?:[125]\\d|8[3567])\\d{6}","\\d{9}",,,"121231234"],[,,"9[012569]\\d{7}","\\d{9}",,,"911231234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"SD",249,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",,"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],SE:[,[,,"[1-9]\\d{5,9}","\\d{5,10}"],[,,"1(?:0[1-8]\\d{6}|[136]\\d{5,7}|(?:2[0-35]|4[0-4]|5[0-25-9]|7[13-6]|[89]\\d)\\d{5,6})|2(?:[136]\\d{5,7}|(?:2[0-7]|4[0136-8]|5[0138]|7[018]|8[01]|9[0-57])\\d{5,6})|3(?:[356]\\d{5,7}|(?:0[0-4]|1\\d|2[0-25]|4[056]|7[0-2]|8[0-3]|9[023])\\d{5,6})|4(?:0[1-9]\\d{4,6}|[246]\\d{5,7}|(?:1[013-8]|3[0135]|5[14-79]|7[0-246-9]|8[0156]|9[0-689])\\d{5,6})|5(?:0[0-6]|[15][0-5]|2[0-68]|3[0-4]|4\\d|6[03-5]|7[013]|8[0-79]|9[01])\\d{5,6}|6(?:0[1-9]\\d{4,6}|3\\d{5,7}|(?:1[1-3]|2[0-4]|4[02-57]|5[0-37]|6[0-3]|7[0-2]|8[0247]|9[0-356])\\d{5,6})|8[1-9]\\d{5,7}|9(?:0[1-9]\\d{4,6}|(?:1[0-68]|2\\d|3[02-5]|4[0-3]|5[0-4]|[68][01]|7[0135-8])\\d{5,6})","\\d{5,9}",,,"8123456"],[,,"7[0236]\\d{7}","\\d{9}",,,"701234567"],[,,"20(?:0(?:0\\d{2}|[1-9](?:0\\d{1,4}|[1-9]\\d{4}))|1(?:0\\d{4}|[1-9]\\d{4,5})|[2-9]\\d{5})","\\d{6,9}",,,"20123456"],[,,"9(?:00|39|44)(?:1(?:[0-26]\\d{5}|[3-57-9]\\d{2})|2(?:[0-2]\\d{5}|[3-9]\\d{2})|3(?:[0139]\\d{5}|[24-8]\\d{2})|4(?:[045]\\d{5}|[1-36-9]\\d{2})|5(?:5\\d{5}|[0-46-9]\\d{2})|6(?:[679]\\d{5}|[0-58]\\d{2})|7(?:[078]\\d{5}|[1-69]\\d{2})|8(?:[578]\\d{5}|[0-469]\\d{2}))","\\d{7}(?:\\d{3})?",,,"9001234567"],[,,"77(?:0(?:0\\d{2}|[1-9](?:0\\d|[1-9]\\d{4}))|[1-6][1-9]\\d{5})","\\d{6}(?:\\d{3})?",,,"771234567"],[,,"75[1-8]\\d{6}","\\d{9}",,,"751234567"],[,,"NA","NA"],"SE",46,"00","0",,,"0",,,,[[,"(8)(\\d{2,3})(\\d{2,3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1","",0],[,"([1-69]\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[013689]|2[0136]|3[1356]|4[0246]|54|6[03]|90"],"0$1","",0],[,"([1-69]\\d)(\\d{3})(\\d{2})","$1-$2 $3",["1[13689]|2[136]|3[1356]|4[0246]|54|6[03]|90"],"0$1","",0],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[2457]|2[2457-9]|3[0247-9]|4[1357-9]|5[0-35-9]|6[124-9]|9(?:[125-8]|3[0-5]|4[0-3])"],"0$1","",0],[,"(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2[2457-9]|3[0247-9]|4[1357-9]|5[0-35-9]|6[124-9]|9(?:[125-8]|3[0-5]|4[0-3])"],"0$1","",0],[,"(7\\d)(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["7"],"0$1","",0],[,"(77)(\\d{2})(\\d{2})","$1-$2$3",["7"],"0$1","",0],[,"(20)(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1","",0],[,"(9[034]\\d)(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9[034]"],"0$1","",0],[,"(9[034]\\d)(\\d{4})","$1-$2",["9[034]"],"0$1","",0]],[[,"(8)(\\d{2,3})(\\d{2,3})(\\d{2})","$1 $2 $3 $4",["8"]],[,"([1-69]\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[013689]|2[0136]|3[1356]|4[0246]|54|6[03]|90"]],[,"([1-69]\\d)(\\d{3})(\\d{2})","$1 $2 $3",["1[13689]|2[136]|3[1356]|4[0246]|54|6[03]|90"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2457]|2[2457-9]|3[0247-9]|4[1357-9]|5[0-35-9]|6[124-9]|9(?:[125-8]|3[0-5]|4[0-3])"]],[,"(\\d{3})(\\d{2,3})(\\d{2})","$1 $2 $3",["1[2457]|2[2457-9]|3[0247-9]|4[1357-9]|5[0-35-9]|6[124-9]|9(?:[125-8]|3[0-5]|4[0-3])"]],[,"(7\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7"]],[,"(77)(\\d{2})(\\d{2})","$1 $2 $3",["7"]],[,"(20)(\\d{2,3})(\\d{2})","$1 $2 $3",["20"]],[,"(9[034]\\d)(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["9[034]"]],[,"(9[034]\\d)(\\d{4})","$1 $2",["9[034]"]]],[,,"74[02-9]\\d{6}","\\d{9}",,,"740123456"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],SG:[,[,,"[36]\\d{7}|[17-9]\\d{7,10}","\\d{8,11}"],[,,"6[1-9]\\d{6}","\\d{8}",,,"61234567"],[,,"(?:8[1-7]|9[0-8])\\d{6}","\\d{8}",,,"81234567"],[,,"1?800\\d{7}","\\d{10,11}",,,"18001234567"],[,,"1900\\d{7}","\\d{11}",,,"19001234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"3[12]\\d{6}","\\d{8}",,,"31234567"],"SG",65,"0[0-3]\\d",,,,,,,,[[,"([3689]\\d{3})(\\d{4})","$1 $2",["[369]|8[1-9]"],"","",0],[,"(1[89]00)(\\d{3})(\\d{4})","$1 $2 $3",["1[89]"],"","",0],[,"(7000)(\\d{4})(\\d{3})","$1 $2 $3",["70"],"","",0],[,"(800)(\\d{3})(\\d{4})","$1 $2 $3",["80"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"7000\\d{7}","\\d{11}",,,"70001234567"],,,[,,"NA","NA"]],SH:[,[,,"[2-79]\\d{3,4}","\\d{4,5}"],[,,"2(?:[0-57-9]\\d|6[4-9])\\d{2}|(?:[2-46]\\d|7[01])\\d{2}","\\d{4,5}",,,"2158"],[,,"NA","NA"],[,,"NA","NA"],[,,"(?:[59]\\d|7[2-9])\\d{2}","\\d{4,5}",,,"5012"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"SH",290,"00",,,,,,,,,,[,,"NA","NA"],1,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],SI:[,[,,"[1-7]\\d{6,7}|[89]\\d{4,7}","\\d{5,8}"],[,,"(?:1\\d|[25][2-8]|3[4-8]|4[24-8]|7[3-8])\\d{6}","\\d{7,8}",,,"11234567"],[,,"(?:[37][01]|4[0139]|51|6[48])\\d{6}","\\d{8}",,,"31234567"],[,,"80\\d{4,6}","\\d{6,8}",,,"80123456"],[,,"90\\d{4,6}|89[1-3]\\d{2,5}","\\d{5,8}",,,"90123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"(?:59|8[1-3])\\d{6}","\\d{8}",,,"59012345"],"SI",386,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[12]|3[4-8]|4[24-8]|5[2-8]|7[3-8]"],"(0$1)","",0],[,"([3-7]\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1","",0],[,"([89][09])(\\d{3,6})","$1 $2",["[89][09]"],"0$1","",0],[,"([58]\\d{2})(\\d{5})","$1 $2",["59|8[1-3]"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],SJ:[,[,,"0\\d{4}|[4789]\\d{7}","\\d{5}(?:\\d{3})?"],[,,"79\\d{6}","\\d{8}",,,"79123456"],[,,"(?:4[015-8]|5[89]|9\\d)\\d{6}","\\d{8}",,,"41234567"],[,,"80[01]\\d{5}","\\d{8}",,,"80012345"],[,,"82[09]\\d{5}","\\d{8}",,,"82012345"],[,,"810(?:0[0-6]|[2-8]\\d)\\d{3}","\\d{8}",,,"81021234"],[,,"880\\d{5}","\\d{8}",,,"88012345"],[,,"85[0-5]\\d{5}","\\d{8}",,,"85012345"],"SJ",47,"00",,,,,,,,,,[,,"NA","NA"],,,[,,"NA","NA"],[,,"0\\d{4}|81(?:0(?:0[7-9]|1\\d)|5\\d{2})\\d{3}","\\d{5}(?:\\d{3})?",,,"01234"],1,,[,,"81[23]\\d{5}","\\d{8}",,,"81212345"]],SK:[,[,,"[2-689]\\d{8}","\\d{9}"],[,,"[2-5]\\d{8}","\\d{9}",,,"212345678"],[,,"9(?:0[1-8]|1[0-24-9]|4[0489])\\d{6}","\\d{9}",,,"912123456"],[,,"800\\d{6}","\\d{9}",,,"800123456"],[,,"9(?:[78]\\d{7}|00\\d{6})","\\d{9}",,,"900123456"],[,,"8[5-9]\\d{7}","\\d{9}",,,"850123456"],[,,"NA","NA"],[,,"6(?:5[0-4]|9[0-6])\\d{6}","\\d{9}",,,"690123456"],"SK",421,"00","0",,,"0",,,,[[,"(2)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1","",0],[,"([3-5]\\d)(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1","",0],[,"([689]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1","",0]],,[,,"NA","NA"],,,[,,"(?:8(?:00|[5-9]\\d)|9(?:00|[78]\\d))\\d{6}","\\d{9}",,,"800123456"],[,,"96\\d{7}","\\d{9}",,,"961234567"],,,[,,"NA","NA"]],SL:[,[,,"[2-578]\\d{7}","\\d{6,8}"],[,,"[235]2[2-4][2-9]\\d{4}","\\d{6,8}",,,"22221234"],[,,"(?:2[15]|3[034]|4[04]|5[05]|7[6-9]|88)\\d{6}","\\d{6,8}",,,"25123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"SL",232,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{6})","$1 $2",,"(0$1)","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],SM:[,[,,"[05-7]\\d{7,9}","\\d{6,10}"],[,,"0549(?:8[0157-9]|9\\d)\\d{4}","\\d{6,10}",,,"0549886377"],[,,"6[16]\\d{6}","\\d{8}",,,"66661212"],[,,"NA","NA"],[,,"7[178]\\d{6}","\\d{8}",,,"71123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"5[158]\\d{6}","\\d{8}",,,"58001110"],"SM",378,"00",,,,"(?:0549)?([89]\\d{5})","0549$1",,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"],"","",0],[,"(0549)(\\d{6})","$1 $2",["0"],"","",0],[,"(\\d{6})","0549 $1",["[89]"],"","",0]],[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"],"","",0],[,"(0549)(\\d{6})","($1) $2",["0"]],[,"(\\d{6})","(0549) $1",["[89]"]]],[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],1,,[,,"NA","NA"]],SN:[,[,,"[3789]\\d{8}","\\d{9}"],[,,"3(?:0(?:1[0-2]|80)|282|3(?:8[1-9]|9[3-9])|611|90[1-5])\\d{5}","\\d{9}",,,"301012345"],[,,"7(?:[067]\\d|21|8[0-26]|90)\\d{6}","\\d{9}",,,"701234567"],[,,"800\\d{6}","\\d{9}",,,"800123456"],[,,"88[4689]\\d{6}","\\d{9}",,,"884123456"],[,,"81[02468]\\d{6}","\\d{9}",,,"810123456"],[,,"NA","NA"],[,,"3392\\d{5}|93330\\d{4}","\\d{9}",,,"933301234"],"SN",221,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"],"","",0],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],SO:[,[,,"[1-79]\\d{6,8}","\\d{7,9}"],[,,"(?:1\\d|2[0-79]|3[0-46-8]|4[0-7]|59)\\d{5}","\\d{7}",,,"4012345"],[,,"(?:15\\d|2(?:4\\d|8)|6[137-9]?\\d{2}|7[1-9]\\d|907\\d)\\d{5}","\\d{7,9}",,,"71123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"SO",252,"00","0",,,"0",,,,[[,"(\\d)(\\d{6})","$1 $2",["2[0-79]|[13-5]"],"","",0],[,"(\\d)(\\d{7})","$1 $2",["24|[67]"],"","",0],[,"(\\d{2})(\\d{5,7})","$1 $2",["15|28|6[1378]"],"","",0],[,"(69\\d)(\\d{6})","$1 $2",["69"],"","",0],[,"(90\\d)(\\d{3})(\\d{3})","$1 $2 $3",["90"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],SR:[,[,,"[2-8]\\d{5,6}","\\d{6,7}"],[,,"(?:2[1-3]|3[0-7]|4\\d|5[2-58]|68\\d)\\d{4}","\\d{6,7}",,,"211234"],[,,"(?:7[124-7]|8[1-9])\\d{5}","\\d{7}",,,"7412345"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"5(?:6\\d{4}|90[0-4]\\d{3})","\\d{6,7}",,,"561234"],"SR",597,"00",,,,,,,,[[,"(\\d{3})(\\d{3})","$1-$2",["[2-4]|5[2-58]"],"","",0],[,"(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"],"","",0],[,"(\\d{3})(\\d{4})","$1-$2",["59|[6-8]"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],SS:[,[,,"[19]\\d{8}","\\d{9}"],[,,"18\\d{7}","\\d{9}",,,"181234567"],[,,"(?:12|9[1257])\\d{7}","\\d{9}",,,"977123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"SS",211,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",,"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],ST:[,[,,"[29]\\d{6}","\\d{7}"],[,,"22\\d{5}","\\d{7}",,,"2221234"],[,,"9[89]\\d{5}","\\d{7}",,,"9812345"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"ST",239,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],SV:[,[,,"[267]\\d{7}|[89]\\d{6}(?:\\d{4})?","\\d{7,8}|\\d{11}"],[,,"2[1-6]\\d{6}","\\d{8}",,,"21234567"],[,,"[67]\\d{7}","\\d{8}",,,"70123456"],[,,"800\\d{4}(?:\\d{4})?","\\d{7}(?:\\d{4})?",,,"8001234"],[,,"900\\d{4}(?:\\d{4})?","\\d{7}(?:\\d{4})?",,,"9001234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"SV",503,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[267]"],"","",0],[,"(\\d{3})(\\d{4})","$1 $2",["[89]"],"","",0],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],SX:[,[,,"[5789]\\d{9}","\\d{7}(?:\\d{3})?"],[,,"7215(?:4[2-8]|8[239]|9[056])\\d{4}","\\d{7}(?:\\d{3})?",,,"7215425678"],[,,"7215(?:1[02]|2\\d|5[034679]|8[014-8])\\d{4}","\\d{10}",,,"7215205678"],[,,"8(?:00|44|55|66|77|88)[2-9]\\d{6}","\\d{10}",,,"8002123456"],[,,"900[2-9]\\d{6}","\\d{10}",,,"9002123456"],[,,"NA","NA"],[,,"5(?:00|33|44|66|77)[2-9]\\d{6}","\\d{10}",,,"5002345678"],[,,"NA","NA"],"SX",1,"011","1",,,"1",,,,,,[,,"NA","NA"],,"721",[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],SY:[,[,,"[1-59]\\d{7,8}","\\d{6,9}"],[,,"(?:1(?:1\\d?|4\\d|[2356])|2(?:1\\d?|[235])|3(?:[13]\\d|4)|4[13]|5[1-3])\\d{6}","\\d{6,9}",,,"112345678"],[,,"9(?:22|[35][0-8]|4\\d|6[024-9]|88|9[0-489])\\d{6}","\\d{9}",,,"944567890"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"SY",963,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-5]"],"0$1","",1],[,"(9\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1","",1]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],SZ:[,[,,"[027]\\d{7}","\\d{8}"],[,,"2(?:2(?:0[07]|[13]7|2[57])|3(?:0[34]|[1278]3|3[23]|[46][34])|(?:40[4-69]|67)|5(?:0[5-7]|1[6-9]|[23][78]|48|5[01]))\\d{4}","\\d{8}",,,"22171234"],[,,"7[6-8]\\d{6}","\\d{8}",,,"76123456"],[,,"0800\\d{4}","\\d{8}",,,"08001234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"SZ",268,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[027]"],"","",0]],,[,,"NA","NA"],,,[,,"0800\\d{4}","\\d{8}",,,"08001234"],[,,"NA","NA"],1,,[,,"NA","NA"]],TA:[,[,,"8\\d{3}","\\d{4}"],[,,"8\\d{3}","\\d{4}",,,"8999"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"TA",290,"00",,,,,,,,,,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],TC:[,[,,"[5689]\\d{9}","\\d{7}(?:\\d{3})?"],[,,"649(?:712|9(?:4\\d|50))\\d{4}","\\d{7}(?:\\d{3})?",,,"6497121234"],[,,"649(?:2(?:3[129]|4[1-7])|3(?:3[1-389]|4[1-7])|4[34][1-3])\\d{4}","\\d{10}",,,"6492311234"],[,,"8(?:00|44|55|66|77|88)[2-9]\\d{6}","\\d{10}",,,"8002345678"],[,,"900[2-9]\\d{6}","\\d{10}",,,"9002345678"],[,,"NA","NA"],[,,"5(?:00|33|44|66|77)[2-9]\\d{6}","\\d{10}",,,"5002345678"],[,,"64971[01]\\d{4}","\\d{10}",,,"6497101234"],"TC",1,"011","1",,,"1",,,,,,[,,"NA","NA"],,"649",[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],TD:[,[,,"[2679]\\d{7}","\\d{8}"],[,,"22(?:[3789]0|5[0-5]|6[89])\\d{4}","\\d{8}",,,"22501234"],[,,"(?:6[02368]\\d|77\\d|9(?:5[0-4]|9\\d))\\d{5}","\\d{8}",,,"63012345"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"TD",235,"00|16",,,,,,"00",,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],TG:[,[,,"[29]\\d{7}","\\d{8}"],[,,"2(?:2[2-7]|3[23]|44|55|66|77)\\d{5}","\\d{8}",,,"22212345"],[,,"9[0-389]\\d{6}","\\d{8}",,,"90112345"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"TG",228,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],TH:[,[,,"[2-9]\\d{7,8}|1\\d{3}(?:\\d{5,6})?","\\d{4}|\\d{8,10}"],[,,"(?:2\\d|3[2-9]|4[2-5]|5[2-6]|7[3-7])\\d{6}","\\d{8}",,,"21234567"],[,,"(?:14|6[1-3]|[89]\\d)\\d{7}","\\d{9}",,,"812345678"],[,,"1800\\d{6}","\\d{10}",,,"1800123456"],[,,"1900\\d{6}","\\d{10}",,,"1900123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"6[08]\\d{7}","\\d{9}",,,"601234567"],"TH",66,"00","0",,,"0",,,,[[,"(2)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1","",0],[,"([13-9]\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["14|[3-9]"],"0$1","",0],[,"(1[89]00)(\\d{3})(\\d{3})","$1 $2 $3",["1"],"$1","",0]],,[,,"NA","NA"],,,[,,"1\\d{3}","\\d{4}",,,"1100"],[,,"1\\d{3}","\\d{4}",,,"1100"],,,[,,"NA","NA"]],TJ:[,[,,"[3-59]\\d{8}","\\d{3,9}"],[,,"(?:3(?:1[3-5]|2[245]|3[12]|4[24-7]|5[25]|72)|4(?:46|74|87))\\d{6}","\\d{3,9}",,,"372123456"],[,,"(?:50[125]|9[0-35-9]\\d)\\d{6}","\\d{9}",,,"917123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"TJ",992,"810","8",,,"8",,"8~10",,[[,"([349]\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[34]7|91[78]"],"(8) $1","",1],[,"([459]\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[48]|5|9(?:1[59]|[0235-9])"],"(8) $1","",1],[,"(331700)(\\d)(\\d{2})","$1 $2 $3",["331","3317","33170","331700"],"(8) $1","",1],[,"(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3[1-5]","3(?:[1245]|3(?:[02-9]|1[0-589]))"],"(8) $1","",1]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],TK:[,[,,"[2-9]\\d{3}","\\d{4}"],[,,"[2-4]\\d{3}","\\d{4}",,,"3010"],[,,"[5-9]\\d{3}","\\d{4}",,,"5190"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"TK",690,"00",,,,,,,,,,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],TL:[,[,,"[2-489]\\d{6}|7\\d{6,7}","\\d{7,8}"],[,,"(?:2[1-5]|3[1-9]|4[1-4])\\d{5}","\\d{7}",,,"2112345"],[,,"7[3-8]\\d{6}","\\d{8}",,,"77212345"],[,,"80\\d{5}","\\d{7}",,,"8012345"],[,,"90\\d{5}","\\d{7}",,,"9012345"],[,,"NA","NA"],[,,"70\\d{5}","\\d{7}",,,"7012345"],[,,"NA","NA"],"TL",670,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-489]"],"","",0],[,"(\\d{4})(\\d{4})","$1 $2",["7"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],TM:[,[,,"[1-6]\\d{7}","\\d{8}"],[,,"(?:1(?:2\\d|3[1-9])|2(?:22|4[0-35-8])|3(?:22|4[03-9])|4(?:22|3[128]|4\\d|6[15])|5(?:22|5[7-9]|6[014-689]))\\d{5}","\\d{8}",,,"12345678"],[,,"6[2-8]\\d{6}","\\d{8}",,,"66123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"TM",993,"810","8",,,"8",,"8~10",,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)","",0],[,"(\\d{2})(\\d{6})","$1 $2",["6"],"8 $1","",0],[,"(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["13|[2-5]"],"(8 $1)","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],TN:[,[,,"[2-57-9]\\d{7}","\\d{8}"],[,,"3[012]\\d{6}|7\\d{7}|81200\\d{3}","\\d{8}",,,"71234567"],[,,"(?:[259]\\d|4[0-24])\\d{6}","\\d{8}",,,"20123456"],[,,"8010\\d{4}","\\d{8}",,,"80101234"],[,,"88\\d{6}","\\d{8}",,,"88123456"],[,,"8[12]10\\d{4}","\\d{8}",,,"81101234"],[,,"NA","NA"],[,,"NA","NA"],"TN",216,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],TO:[,[,,"[02-8]\\d{4,6}","\\d{5,7}"],[,,"(?:2\\d|3[1-8]|4[1-4]|[56]0|7[0149]|8[05])\\d{3}","\\d{5}",,,"20123"],[,,"(?:7[578]|8[47-9])\\d{5}","\\d{7}",,,"7715123"],[,,"0800\\d{3}","\\d{7}",,,"0800222"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"TO",676,"00",,,,,,,,[[,"(\\d{2})(\\d{3})","$1-$2",["[1-6]|7[0-4]|8[05]"],"","",0],[,"(\\d{3})(\\d{4})","$1 $2",["7[5-9]|8[47-9]"],"","",0],[,"(\\d{4})(\\d{3})","$1 $2",["0"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],1,,[,,"NA","NA"]],TR:[,[,,"[2-589]\\d{9}|444\\d{4}","\\d{7,10}"],[,,"(?:2(?:[13][26]|[28][2468]|[45][268]|[67][246])|3(?:[13][28]|[24-6][2468]|[78][02468]|92)|4(?:[16][246]|[23578][2468]|4[26]))\\d{7}","\\d{10}",,,"2123456789"],[,,"5(?:0[1-7]|22|[34]\\d|5[1-59]|9[246])\\d{7}","\\d{10}",,,"5012345678"],[,,"800\\d{7}","\\d{10}",,,"8001234567"],[,,"900\\d{7}","\\d{10}",,,"9001234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"TR",90,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[23]|4(?:[0-35-9]|4[0-35-9])"],"(0$1)","",1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[589]"],"0$1","",1],[,"(444)(\\d{1})(\\d{3})","$1 $2 $3",["444"],"","",0]],,[,,"512\\d{7}","\\d{10}",,,"5123456789"],,,[,,"444\\d{4}","\\d{7}",,,"4441444"],[,,"444\\d{4}|850\\d{7}","\\d{7,10}",,,"4441444"],,,[,,"NA","NA"]],TT:[,[,,"[589]\\d{9}","\\d{7}(?:\\d{3})?"],[,,"868(?:2(?:01|2[1-5])|6(?:0[79]|1[02-9]|2[1-9]|[3-69]\\d|7[0-79])|82[124])\\d{4}","\\d{7}(?:\\d{3})?",,,"8682211234"],[,,"868(?:2(?:[89]\\d)|3(?:0[1-9]|1[02-9]|[2-9]\\d)|4[6-9]\\d|6(?:20|78|8\\d)|7(?:0[1-9]|1[02-9]|[2-9]\\d))\\d{4}","\\d{10}",,,"8682911234"],[,,"8(?:00|44|55|66|77|88)[2-9]\\d{6}","\\d{10}",,,"8002345678"],[,,"900[2-9]\\d{6}","\\d{10}",,,"9002345678"],[,,"NA","NA"],[,,"5(?:00|33|44|66|77)[2-9]\\d{6}","\\d{10}",,,"5002345678"],[,,"NA","NA"],"TT",1,"011","1",,,"1",,,,,,[,,"NA","NA"],,"868",[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],TV:[,[,,"[29]\\d{4,5}","\\d{5,6}"],[,,"2[02-9]\\d{3}","\\d{5}",,,"20123"],[,,"90\\d{4}","\\d{6}",,,"901234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"TV",688,"00",,,,,,,,,,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],TW:[,[,,"[2-689]\\d{7,8}|7\\d{7,9}","\\d{8,10}"],[,,"[2-8]\\d{7,8}","\\d{8,9}",,,"21234567"],[,,"9\\d{8}","\\d{9}",,,"912345678"],[,,"800\\d{6}","\\d{9}",,,"800123456"],[,,"900\\d{6}","\\d{9}",,,"900123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"70\\d{8}","\\d{10}",,,"7012345678"],"TW",886,"0(?:0[25679]|19)","0","#",,"0",,,,[[,"([2-8])(\\d{3,4})(\\d{4})","$1 $2 $3",["[2-6]|[78][1-9]"],"0$1","",0],[,"([89]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["80|9"],"0$1","",0],[,"(70)(\\d{4})(\\d{4})","$1 $2 $3",["70"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],TZ:[,[,,"\\d{9}","\\d{7,9}"],[,,"2[2-8]\\d{7}","\\d{7,9}",,,"222345678"],[,,"(?:6[158]|7[1-9])\\d{7}","\\d{9}",,,"612345678"],[,,"80[08]\\d{6}","\\d{9}",,,"800123456"],[,,"90\\d{7}","\\d{9}",,,"900123456"],[,,"8(?:40|6[01])\\d{6}","\\d{9}",,,"840123456"],[,,"NA","NA"],[,,"41\\d{7}","\\d{9}",,,"412345678"],"TZ",255,"00[056]","0",,,"0",,,,[[,"([24]\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1","",0],[,"([67]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1","",0],[,"([89]\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],UA:[,[,,"[3-689]\\d{8}","\\d{5,9}"],[,,"(?:3[1-8]|4[13-8]|5[1-7]|6[12459])\\d{7}","\\d{5,9}",,,"311234567"],[,,"(?:39|50|6[36-8]|9[1-9])\\d{7}","\\d{9}",,,"391234567"],[,,"800\\d{6}","\\d{9}",,,"800123456"],[,,"900\\d{6}","\\d{9}",,,"900123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"89\\d{7}","\\d{9}",,,"891234567"],"UA",380,"00","0",,,"0",,"0~0",,[[,"([3-689]\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[38]9|4(?:[45][0-5]|87)|5(?:0|6[37]|7[37])|6[36-8]|9[1-9]","[38]9|4(?:[45][0-5]|87)|5(?:0|6(?:3[14-7]|7)|7[37])|6[36-8]|9[1-9]"],"0$1","",0],[,"([3-689]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["3[1-8]2|4[13678]2|5(?:[12457]2|6[24])|6(?:[49]2|[12][29]|5[24])|8[0-8]|90","3(?:[1-46-8]2[013-9]|52)|4(?:[1378]2|62[013-9])|5(?:[12457]2|6[24])|6(?:[49]2|[12][29]|5[24])|8[0-8]|90"],"0$1","",0],[,"([3-6]\\d{3})(\\d{5})","$1 $2",["3(?:5[013-9]|[1-46-8])|4(?:[137][013-9]|6|[45][6-9]|8[4-6])|5(?:[1245][013-9]|6[0135-9]|3|7[4-6])|6(?:[49][013-9]|5[0135-9]|[12][13-8])","3(?:5[013-9]|[1-46-8](?:22|[013-9]))|4(?:[137][013-9]|6(?:[013-9]|22)|[45][6-9]|8[4-6])|5(?:[1245][013-9]|6(?:3[02389]|[015689])|3|7[4-6])|6(?:[49][013-9]|5[0135-9]|[12][13-8])"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],UG:[,[,,"\\d{9}","\\d{5,9}"],[,,"20(?:[0147]\\d{2}|2(?:40|[5-9]\\d)|3[23]\\d|5[0-4]\\d|6[03]\\d|8[0-2]\\d)\\d{4}|[34]\\d{8}","\\d{5,9}",,,"312345678"],[,,"2030\\d{5}|7(?:0[0-7]|[15789]\\d|2[03]|30|[46][0-4])\\d{6}","\\d{9}",,,"712345678"],[,,"800[123]\\d{5}","\\d{9}",,,"800123456"],[,,"90[123]\\d{6}","\\d{9}",,,"901123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"UG",256,"00[057]","0",,,"0",,,,[[,"(\\d{3})(\\d{6})","$1 $2",["[7-9]|20(?:[013-8]|2[5-9])|4(?:6[45]|[7-9])"],"0$1","",0],[,"(\\d{2})(\\d{7})","$1 $2",["3|4(?:[1-5]|6[0-36-9])"],"0$1","",0],[,"(2024)(\\d{5})","$1 $2",["2024"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],US:[,[,,"[2-9]\\d{9}","\\d{7}(?:\\d{3})?"],[,,"(?:2(?:0[1-35-9]|1[02-9]|2[4589]|3[149]|4[08]|5[1-46]|6[0279]|7[026]|8[13])|3(?:0[1-57-9]|1[02-9]|2[0135]|3[014679]|4[67]|5[12]|6[014]|8[56])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[0235]|58|69|7[0589]|8[04])|5(?:0[1-57-9]|1[0235-8]|20|3[0149]|4[01]|5[19]|6[1-37]|7[013-5]|8[056])|6(?:0[1-35-9]|1[024-9]|2[036]|3[016]|4[16]|5[017]|6[0-279]|78|8[12])|7(?:0[1-46-8]|1[02-9]|2[0457]|3[1247]|4[07]|5[47]|6[02359]|7[02-59]|8[156])|8(?:0[1-68]|1[02-8]|28|3[0-25]|4[3578]|5[06-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[01678]|4[0179]|5[12469]|7[0-3589]|8[0459]))[2-9]\\d{6}","\\d{7}(?:\\d{3})?",,,"2015555555"],[,,"(?:2(?:0[1-35-9]|1[02-9]|2[4589]|3[149]|4[08]|5[1-46]|6[0279]|7[026]|8[13])|3(?:0[1-57-9]|1[02-9]|2[0135]|3[014679]|4[67]|5[12]|6[014]|8[56])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[0235]|58|69|7[0589]|8[04])|5(?:0[1-57-9]|1[0235-8]|20|3[0149]|4[01]|5[19]|6[1-37]|7[013-5]|8[056])|6(?:0[1-35-9]|1[024-9]|2[036]|3[016]|4[16]|5[017]|6[0-279]|78|8[12])|7(?:0[1-46-8]|1[02-9]|2[0457]|3[1247]|4[07]|5[47]|6[02359]|7[02-59]|8[156])|8(?:0[1-68]|1[02-8]|28|3[0-25]|4[3578]|5[06-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[01678]|4[0179]|5[12469]|7[0-3589]|8[0459]))[2-9]\\d{6}","\\d{7}(?:\\d{3})?",,,"2015555555"],[,,"8(?:00|44|55|66|77|88)[2-9]\\d{6}","\\d{10}",,,"8002345678"],[,,"900[2-9]\\d{6}","\\d{10}",,,"9002345678"],[,,"NA","NA"],[,,"5(?:00|33|44|66|77)[2-9]\\d{6}","\\d{10}",,,"5002345678"],[,,"NA","NA"],"US",1,"011","1",,,"1",,,1,[[,"(\\d{3})(\\d{4})","$1-$2",,"","",1],[,"(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",,"","",1]],[[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3"]],[,,"NA","NA"],1,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],UY:[,[,,"[2489]\\d{6,7}","\\d{7,8}"],[,,"2\\d{7}|4[2-7]\\d{6}","\\d{7,8}",,,"21231234"],[,,"9[1-9]\\d{6}","\\d{8}",,,"94231234"],[,,"80[05]\\d{4}","\\d{7}",,,"8001234"],[,,"90[0-8]\\d{4}","\\d{7}",,,"9001234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"UY",598,"0(?:1[3-9]\\d|0)","0"," int. ",,"0",,"00",,[[,"(\\d{4})(\\d{4})","$1 $2",["[24]"],"","",0],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9[1-9]"],"0$1","",0],[,"(\\d{3})(\\d{4})","$1 $2",["[89]0"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],UZ:[,[,,"[679]\\d{8}","\\d{7,9}"],[,,"(?:6(?:1(?:22|3[124]|4[1-4]|5[123578]|64)|2(?:22|3[0-57-9]|41)|5(?:22|3[3-7]|5[024-8])|6\\d{2}|7(?:[23]\\d|7[69])|9(?:22|4[1-8]|6[135]))|7(?:0(?:5[4-9]|6[0146]|7[12456]|9[135-8])|1[12]\\d|2(?:22|3[1345789]|4[123579]|5[14])|3(?:2\\d|3[1578]|4[1-35-7]|5[1-57]|61)|4(?:2\\d|3[1-579]|7[1-79])|5(?:22|5[1-9]|6[1457])|6(?:22|3[12457]|4[13-8])|9(?:22|5[1-9])))\\d{5}","\\d{7,9}",,,"662345678"],[,,"6(?:1(?:2(?:98|2[01])|35[0-4]|50\\d|61[23]|7(?:[01][017]|4\\d|55|9[5-9]))|2(?:11\\d|2(?:[12]1|9[01379])|5(?:[126]\\d|3[0-4])|7\\d{2})|5(?:19[01]|2(?:27|9[26])|30\\d|59\\d|7\\d{2})|6(?:2(?:1[5-9]|2[0367]|38|41|52|60)|3[79]\\d|4(?:56|83)|7(?:[07]\\d|1[017]|3[07]|4[047]|5[057]|67|8[0178]|9[79])|9[0-3]\\d)|7(?:2(?:24|3[237]|4[5-9]|7[15-8])|5(?:7[12]|8[0589])|7(?:0\\d|[39][07])|9(?:0\\d|7[079]))|9(?:2(?:1[1267]|5\\d|3[01]|7[0-4])|5[67]\\d|6(?:2[0-26]|8\\d)|7\\d{2}))\\d{4}|7(?:0\\d{3}|1(?:13[01]|6(?:0[47]|1[67]|66)|71[3-69]|98\\d)|2(?:2(?:2[79]|95)|3(?:2[5-9]|6[0-6])|57\\d|7(?:0\\d|1[17]|2[27]|3[37]|44|5[057]|66|88))|3(?:2(?:1[0-6]|21|3[469]|7[159])|33\\d|5(?:0[0-4]|5[579]|9\\d)|7(?:[0-3579]\\d|4[0467]|6[67]|8[078])|9[4-6]\\d)|4(?:2(?:29|5[0257]|6[0-7]|7[1-57])|5(?:1[0-4]|8\\d|9[5-9])|7(?:0\\d|1[024589]|2[0127]|3[0137]|[46][07]|5[01]|7[5-9]|9[079])|9(?:7[015-9]|[89]\\d))|5(?:112|2(?:0\\d|2[29]|[49]4)|3[1568]\\d|52[6-9]|7(?:0[01578]|1[017]|[23]7|4[047]|[5-7]\\d|8[78]|9[079]))|6(?:2(?:2[1245]|4[2-4])|39\\d|41[179]|5(?:[349]\\d|5[0-2])|7(?:0[017]|[13]\\d|22|44|55|67|88))|9(?:22[128]|3(?:2[0-4]|7\\d)|57[05629]|7(?:2[05-9]|3[37]|4\\d|60|7[2579]|87|9[07])))\\d{4}|9[0-57-9]\\d{7}","\\d{7,9}",,,"912345678"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"UZ",998,"810","8",,,"8",,"8~10",,[[,"([679]\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",,"8 $1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],VA:[,[,,"06\\d{8}","\\d{10}"],[,,"06698\\d{5}","\\d{10}",,,"0669812345"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"VA",379,"00",,,,,,,,[[,"(06)(\\d{4})(\\d{4})","$1 $2 $3",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],1,,[,,"NA","NA"]],VC:[,[,,"[5789]\\d{9}","\\d{7}(?:\\d{3})?"],[,,"784(?:266|3(?:6[6-9]|7\\d|8[0-24-6])|4(?:38|5[0-36-8]|8[0-8])|5(?:55|7[0-2]|93)|638|784)\\d{4}","\\d{7}(?:\\d{3})?",,,"7842661234"],[,,"784(?:4(?:3[0-4]|5[45]|89|9[0-5])|5(?:2[6-9]|3[0-4]))\\d{4}","\\d{10}",,,"7844301234"],[,,"8(?:00|44|55|66|77|88)[2-9]\\d{6}","\\d{10}",,,"8002345678"],[,,"900[2-9]\\d{6}","\\d{10}",,,"9002345678"],[,,"NA","NA"],[,,"5(?:00|33|44|66|77)[2-9]\\d{6}","\\d{10}",,,"5002345678"],[,,"NA","NA"],"VC",1,"011","1",,,"1",,,,,,[,,"NA","NA"],,"784",[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],VE:[,[,,"[24589]\\d{9}","\\d{7,10}"],[,,"(?:2(?:12|3[457-9]|[58][1-9]|[467]\\d|9[1-6])|50[01])\\d{7}","\\d{7,10}",,,"2121234567"],[,,"4(?:1[24-8]|2[46])\\d{7}","\\d{10}",,,"4121234567"],[,,"800\\d{7}","\\d{10}",,,"8001234567"],[,,"900\\d{7}","\\d{10}",,,"9001234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"VE",58,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{7})","$1-$2",,"0$1","$CC $1",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],VG:[,[,,"[2589]\\d{9}","\\d{7}(?:\\d{3})?"],[,,"284(?:(?:229|4(?:22|9[45])|774|8(?:52|6[459]))\\d{4}|496[0-5]\\d{3})","\\d{7}(?:\\d{3})?",,,"2842291234"],[,,"284(?:(?:3(?:0[0-3]|4[0-367])|4(?:4[0-6]|68|99)|54[0-57])\\d{4}|496[6-9]\\d{3})","\\d{10}",,,"2843001234"],[,,"8(?:00|44|55|66|77|88)[2-9]\\d{6}","\\d{10}",,,"8002345678"],[,,"900[2-9]\\d{6}","\\d{10}",,,"9002345678"],[,,"NA","NA"],[,,"5(?:00|33|44|66|77)[2-9]\\d{6}","\\d{10}",,,"5002345678"],[,,"NA","NA"],"VG",1,"011","1",,,"1",,,,,,[,,"NA","NA"],,"284",[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],VI:[,[,,"[3589]\\d{9}","\\d{7}(?:\\d{3})?"],[,,"340(?:2(?:01|2[0678]|44|77)|3(?:32|44)|4(?:22|7[34])|5(?:1[34]|55)|6(?:26|4[23]|77|9[023])|7(?:1[2-589]|27|7\\d)|884|998)\\d{4}","\\d{7}(?:\\d{3})?",,,"3406421234"],[,,"340(?:2(?:01|2[0678]|44|77)|3(?:32|44)|4(?:22|7[34])|5(?:1[34]|55)|6(?:26|4[23]|77|9[023])|7(?:1[2-589]|27|7\\d)|884|998)\\d{4}","\\d{7}(?:\\d{3})?",,,"3406421234"],[,,"8(?:00|44|55|66|77|88)[2-9]\\d{6}","\\d{10}",,,"8002345678"],[,,"900[2-9]\\d{6}","\\d{10}",,,"9002345678"],[,,"NA","NA"],[,,"5(?:00|33|44|66|77)[2-9]\\d{6}","\\d{10}",,,"5002345678"],[,,"NA","NA"],"VI",1,"011","1",,,"1",,,1,,,[,,"NA","NA"],,"340",[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],VN:[,[,,"[17]\\d{6,9}|[2-69]\\d{7,9}|8\\d{6,8}","\\d{7,10}"],[,,"(?:2(?:[025-79]|1[0189]|[348][01])|3(?:[0136-9]|[25][01])|4\\d|5(?:[01][01]|[2-9])|6(?:[0-46-8]|5[01])|7(?:[02-79]|[18][01])|8[1-9])\\d{7}","\\d{9,10}",,,"2101234567"],[,,"(?:9\\d|1(?:2\\d|6[2-9]|8[68]|99))\\d{7}","\\d{9,10}",,,"912345678"],[,,"1800\\d{4,6}","\\d{8,10}",,,"1800123456"],[,,"1900\\d{4,6}","\\d{8,10}",,,"1900123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"VN",84,"00","0",,,"0",,,,[[,"([17]99)(\\d{4})","$1 $2",["[17]99"],"0$1","",1],[,"([48])(\\d{4})(\\d{4})","$1 $2 $3",["[48]"],"0$1","",1],[,"([235-7]\\d)(\\d{4})(\\d{3})","$1 $2 $3",["2[025-79]|3[0136-9]|5[2-9]|6[0-46-8]|7[02-79]"],"0$1","",1],[,"(80)(\\d{5})","$1 $2",["80"],"0$1","",1],[,"(69\\d)(\\d{4,5})","$1 $2",["69"],"0$1","",1],[,"([235-7]\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["2[1348]|3[25]|5[01]|65|7[18]"],"0$1","",1],[,"(9\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1","",1],[,"(1[2689]\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1(?:[26]|8[68]|99)"],"0$1","",1],[,"(1[89]00)(\\d{4,6})","$1 $2",["1[89]0"],"$1","",1]],,[,,"NA","NA"],,,[,,"[17]99\\d{4}|69\\d{5,6}","\\d{7,8}",,,"1992000"],[,,"[17]99\\d{4}|69\\d{5,6}|80\\d{5}","\\d{7,8}",,,"1992000"],,,[,,"NA","NA"]],VU:[,[,,"[2-57-9]\\d{4,6}","\\d{5,7}"],[,,"(?:2[02-9]\\d|3(?:[5-7]\\d|8[0-8])|48[4-9]|88\\d)\\d{2}","\\d{5}",,,"22123"],[,,"(?:5(?:7[2-5]|[3-69]\\d)|7[013-7]\\d)\\d{4}","\\d{7}",,,"5912345"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"VU",678,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[579]"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"3[03]\\d{3}|900\\d{4}","\\d{5,7}",,,"30123"],,,[,,"NA","NA"]],WF:[,[,,"[5-7]\\d{5}","\\d{6}"],[,,"(?:50|68|72)\\d{4}","\\d{6}",,,"501234"],[,,"(?:50|68|72)\\d{4}","\\d{6}",,,"501234"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"WF",681,"00",,,,,,,1,[[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],WS:[,[,,"[2-8]\\d{4,6}","\\d{5,7}"],[,,"(?:[2-5]\\d|6[1-9]|84\\d{2})\\d{3}","\\d{5,7}",,,"22123"],[,,"(?:60|7[25-7]\\d)\\d{4}","\\d{6,7}",,,"601234"],[,,"800\\d{3}","\\d{6}",,,"800123"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"WS",685,"0",,,,,,,,[[,"(8\\d{2})(\\d{3,4})","$1 $2",["8"],"","",0],[,"(7\\d)(\\d{5})","$1 $2",["7"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],YE:[,[,,"[1-7]\\d{6,8}","\\d{6,9}"],[,,"(?:1(?:7\\d|[2-68])|2[2-68]|3[2358]|4[2-58]|5[2-6]|6[3-58]|7[24-68])\\d{5}","\\d{6,8}",,,"1234567"],[,,"7[0137]\\d{7}","\\d{9}",,,"712345678"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"YE",967,"00","0",,,"0",,,,[[,"([1-7])(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7[24-68]"],"0$1","",0],[,"(7\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["7[0137]"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],YT:[,[,,"[268]\\d{8}","\\d{9}"],[,,"2696[0-4]\\d{4}","\\d{9}",,,"269601234"],[,,"639\\d{6}","\\d{9}",,,"639123456"],[,,"80\\d{7}","\\d{9}",,,"801234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"YT",262,"00","0",,,"0",,,,,,[,,"NA","NA"],,"269|63",[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],ZA:[,[,,"[1-79]\\d{8}|8(?:[067]\\d{7}|[1-4]\\d{3,7})","\\d{5,9}"],[,,"(?:1[0-8]|2[0-378]|3[1-69]|4\\d|5[1346-8])\\d{7}","\\d{9}",,,"101234567"],[,,"(?:6[0-5]|7[0-46-9])\\d{7}|8[1-4]\\d{3,7}","\\d{5,9}",,,"711234567"],[,,"80\\d{7}","\\d{9}",,,"801234567"],[,,"86[2-9]\\d{6}|90\\d{7}","\\d{9}",,,"862345678"],[,,"860\\d{6}","\\d{9}",,,"860123456"],[,,"NA","NA"],[,,"87\\d{7}","\\d{9}",,,"871234567"],"ZA",27,"00","0",,,"0",,,,[[,"(860)(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1","",0],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-79]|8(?:[0-47]|6[1-9])"],"0$1","",0],[,"(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1","",0],[,"(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"861\\d{6}","\\d{9}",,,"861123456"],,,[,,"NA","NA"]],
ZM:[,[,,"[289]\\d{8}","\\d{9}"],[,,"21[1-8]\\d{6}","\\d{9}",,,"211234567"],[,,"9(?:5[05]|6\\d|7[1-9])\\d{6}","\\d{9}",,,"955123456"],[,,"800\\d{6}","\\d{9}",,,"800123456"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"ZM",260,"00","0",,,"0",,,,[[,"([29]\\d)(\\d{7})","$1 $2",["[29]"],"0$1","",0],[,"(800)(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],ZW:[,[,,"2(?:[012457-9]\\d{3,8}|6\\d{3,6})|[13-79]\\d{4,8}|8[06]\\d{8}","\\d{3,10}"],[,,"(?:1[3-9]|2(?:0[45]|[16]|2[28]|[49]8?|58[23]|7[246]|8[1346-9])|3(?:08?|17?|3[78]|[2456]|7[1569]|8[379])|5(?:[07-9]|1[78]|483|5(?:7?|8))|6(?:0|28|37?|[45][68][78]|98?)|848)\\d{3,6}|(?:2(?:27|5|7[135789]|8[25])|3[39]|5[1-46]|6[126-8])\\d{4,6}|2(?:(?:0|70)\\d{5,6}|2[05]\\d{7})|(?:4\\d|9[2-8])\\d{4,7}","\\d{3,10}",,,"1312345"],[,,"7[1378]\\d{7}|86(?:22|44)\\d{6}","\\d{9,10}",,,"711234567"],[,,"800\\d{7}","\\d{10}",,,"8001234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"86(?:1[12]|30|55|77|8[367]|99)\\d{6}","\\d{10}",,,"8686123456"],"ZW",263,"00","0",,,"0",,,,[[,"([49])(\\d{3})(\\d{2,5})","$1 $2 $3",["4|9[2-9]"],"0$1","",0],[,"([179]\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[19]1|7"],"0$1","",0],[,"(86\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["86[24]"],"0$1","",0],[,"([2356]\\d{2})(\\d{3,5})","$1 $2",["2(?:[278]|0[45]|[49]8)|3(?:08|17|3[78]|[78])|5[15][78]|6(?:[29]8|37|[68][78])"],"0$1","",0],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:[278]|0[45]|48)|3(?:08|17|3[78]|[78])|5[15][78]|6(?:[29]8|37|[68][78])|80"],"0$1","",0],[,"([1-356]\\d)(\\d{3,5})","$1 $2",["1[3-9]|2(?:[1-469]|0[0-35-9]|[45][0-79])|3(?:0[0-79]|1[0-689]|[24-69]|3[0-69])|5(?:[02-46-9]|[15][0-69])|6(?:[0145]|[29][0-79]|3[0-689]|[68][0-69])"],"0$1","",0],[,"([1-356]\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[3-9]|2(?:[1-469]|0[0-35-9]|[45][0-79])|3(?:0[0-79]|1[0-689]|[24-69]|3[0-69])|5(?:[02-46-9]|[15][0-69])|6(?:[0145]|[29][0-79]|3[0-689]|[68][0-69])"],"0$1","",0],[,"([25]\\d{3})(\\d{3,5})","$1 $2",["(?:25|54)8","258[23]|5483"],"0$1","",0],[,"([25]\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["(?:25|54)8","258[23]|5483"],"0$1","",0],[,"(8\\d{3})(\\d{6})","$1 $2",["86"],"0$1","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],800:[,[,,"\\d{8}","\\d{8}",,,"12345678"],[,,"NA","NA",,,"12345678"],[,,"NA","NA",,,"12345678"],[,,"\\d{8}","\\d{8}",,,"12345678"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"001",800,"",,,,,,,1,[[,"(\\d{4})(\\d{4})","$1 $2",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],1,,[,,"NA","NA"]],808:[,[,,"\\d{8}","\\d{8}",,,"12345678"],[,,"NA","NA",,,"12345678"],[,,"NA","NA",,,"12345678"],[,,"NA","NA"],[,,"NA","NA"],[,,"\\d{8}","\\d{8}",,,"12345678"],[,,"NA","NA"],[,,"NA","NA"],"001",808,"",,,,,,,1,[[,"(\\d{4})(\\d{4})","$1 $2",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],1,,[,,"NA","NA"]],870:[,[,,"[35-7]\\d{8}","\\d{9}",,,"301234567"],[,,"NA","NA",,,"301234567"],[,,"(?:[356]\\d|7[6-8])\\d{7}","\\d{9}",,,"301234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"001",870,"",,,,,,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],878:[,[,,"1\\d{11}","\\d{12}",,,"101234567890"],[,,"NA","NA",,,"101234567890"],[,,"NA","NA",,,"101234567890"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"10\\d{10}","\\d{12}",,,"101234567890"],"001",878,"",,,,,,,1,[[,"(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],881:[,[,,"[67]\\d{8}","\\d{9}",,,"612345678"],[,,"NA","NA",,,"612345678"],[,,"[67]\\d{8}","\\d{9}",,,"612345678"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"001",881,"",,,,,,,,[[,"(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[67]"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],882:[,[,,"[13]\\d{6,11}","\\d{7,12}",,,"3451234567"],[,,"NA","NA",,,"3451234567"],[,,"3(?:2\\d{3}|37\\d{2}|4(?:2|7\\d{3}))\\d{4}","\\d{7,10}",,,"3451234567"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15678]|9[0689])\\d{4}|6\\d{5,10})|345\\d{7}","\\d{7,12}",,,"3451234567"],"001",882,"",,,,,,,,[[,"(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"],"","",0],[,"(\\d{2})(\\d{5})","$1 $2",["16|342"],"","",0],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["34[57]"],"","",0],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["348"],"","",0],[,"(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["1"],"","",0],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["16"],"","",0],[,"(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["16"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"348[57]\\d{7}","\\d{11}",,,"3451234567"]],883:[,[,,"51\\d{7}(?:\\d{3})?","\\d{9}(?:\\d{3})?",,,"510012345"],[,,"NA","NA",,,"510012345"],[,,"NA","NA",,,"510012345"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"51(?:00\\d{5}(?:\\d{3})?|[13]0\\d{8})","\\d{9}(?:\\d{3})?",,,"510012345"],"001",883,"",,,,,,,1,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"],"","",0],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["510"],"","",0],[,"(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["51[13]"],"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],,,[,,"NA","NA"]],888:[,[,,"\\d{11}","\\d{11}",,,"12345678901"],[,,"NA","NA",,,"12345678901"],[,,"NA","NA",,,"12345678901"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"001",888,"",,,,,,,1,[[,"(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"\\d{11}","\\d{11}",,,"12345678901"],1,,[,,"NA","NA"]],979:[,[,,"\\d{9}","\\d{9}",,,"123456789"],[,,"NA","NA",,,"123456789"],[,,"NA","NA",,,"123456789"],[,,"NA","NA"],[,,"\\d{9}","\\d{9}",,,"123456789"],[,,"NA","NA"],[,,"NA","NA"],[,,"NA","NA"],"001",979,"",,,,,,,1,[[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",,"","",0]],,[,,"NA","NA"],,,[,,"NA","NA"],[,,"NA","NA"],1,,[,,"NA","NA"]]},i18n.phonenumbers.PhoneNumber=function(){goog.proto2.Message.apply(this)},goog.inherits(i18n.phonenumbers.PhoneNumber,goog.proto2.Message),i18n.phonenumbers.PhoneNumber.prototype.getCountryCode=function(){return this.get$Value(1)},i18n.phonenumbers.PhoneNumber.prototype.getCountryCodeOrDefault=function(){return this.get$ValueOrDefault(1)},i18n.phonenumbers.PhoneNumber.prototype.setCountryCode=function(e){this.set$Value(1,e)},i18n.phonenumbers.PhoneNumber.prototype.hasCountryCode=function(){return this.has$Value(1)},i18n.phonenumbers.PhoneNumber.prototype.countryCodeCount=function(){return this.count$Values(1)},i18n.phonenumbers.PhoneNumber.prototype.clearCountryCode=function(){this.clear$Field(1)},i18n.phonenumbers.PhoneNumber.prototype.getNationalNumber=function(){return this.get$Value(2)},i18n.phonenumbers.PhoneNumber.prototype.getNationalNumberOrDefault=function(){return this.get$ValueOrDefault(2)},i18n.phonenumbers.PhoneNumber.prototype.setNationalNumber=function(e){this.set$Value(2,e)},i18n.phonenumbers.PhoneNumber.prototype.hasNationalNumber=function(){return this.has$Value(2)},i18n.phonenumbers.PhoneNumber.prototype.nationalNumberCount=function(){return this.count$Values(2)},i18n.phonenumbers.PhoneNumber.prototype.clearNationalNumber=function(){this.clear$Field(2)},i18n.phonenumbers.PhoneNumber.prototype.getExtension=function(){return this.get$Value(3)},i18n.phonenumbers.PhoneNumber.prototype.getExtensionOrDefault=function(){return this.get$ValueOrDefault(3)},i18n.phonenumbers.PhoneNumber.prototype.setExtension=function(e){this.set$Value(3,e)},i18n.phonenumbers.PhoneNumber.prototype.hasExtension=function(){return this.has$Value(3)},i18n.phonenumbers.PhoneNumber.prototype.extensionCount=function(){return this.count$Values(3)},i18n.phonenumbers.PhoneNumber.prototype.clearExtension=function(){this.clear$Field(3)},i18n.phonenumbers.PhoneNumber.prototype.getItalianLeadingZero=function(){return this.get$Value(4)},i18n.phonenumbers.PhoneNumber.prototype.getItalianLeadingZeroOrDefault=function(){return this.get$ValueOrDefault(4)},i18n.phonenumbers.PhoneNumber.prototype.setItalianLeadingZero=function(e){this.set$Value(4,e)},i18n.phonenumbers.PhoneNumber.prototype.hasItalianLeadingZero=function(){return this.has$Value(4)},i18n.phonenumbers.PhoneNumber.prototype.italianLeadingZeroCount=function(){return this.count$Values(4)},i18n.phonenumbers.PhoneNumber.prototype.clearItalianLeadingZero=function(){this.clear$Field(4)},i18n.phonenumbers.PhoneNumber.prototype.getNumberOfLeadingZeros=function(){return this.get$Value(8)},i18n.phonenumbers.PhoneNumber.prototype.getNumberOfLeadingZerosOrDefault=function(){return this.get$ValueOrDefault(8)},i18n.phonenumbers.PhoneNumber.prototype.setNumberOfLeadingZeros=function(e){this.set$Value(8,e)},i18n.phonenumbers.PhoneNumber.prototype.hasNumberOfLeadingZeros=function(){return this.has$Value(8)},i18n.phonenumbers.PhoneNumber.prototype.numberOfLeadingZerosCount=function(){return this.count$Values(8)},i18n.phonenumbers.PhoneNumber.prototype.clearNumberOfLeadingZeros=function(){this.clear$Field(8)},i18n.phonenumbers.PhoneNumber.prototype.getRawInput=function(){return this.get$Value(5)},i18n.phonenumbers.PhoneNumber.prototype.getRawInputOrDefault=function(){return this.get$ValueOrDefault(5)},i18n.phonenumbers.PhoneNumber.prototype.setRawInput=function(e){this.set$Value(5,e)},i18n.phonenumbers.PhoneNumber.prototype.hasRawInput=function(){return this.has$Value(5)},i18n.phonenumbers.PhoneNumber.prototype.rawInputCount=function(){return this.count$Values(5)},i18n.phonenumbers.PhoneNumber.prototype.clearRawInput=function(){this.clear$Field(5)},i18n.phonenumbers.PhoneNumber.prototype.getCountryCodeSource=function(){return this.get$Value(6)},i18n.phonenumbers.PhoneNumber.prototype.getCountryCodeSourceOrDefault=function(){return this.get$ValueOrDefault(6)},i18n.phonenumbers.PhoneNumber.prototype.setCountryCodeSource=function(e){this.set$Value(6,e)},i18n.phonenumbers.PhoneNumber.prototype.hasCountryCodeSource=function(){return this.has$Value(6)},i18n.phonenumbers.PhoneNumber.prototype.countryCodeSourceCount=function(){return this.count$Values(6)},i18n.phonenumbers.PhoneNumber.prototype.clearCountryCodeSource=function(){this.clear$Field(6)},i18n.phonenumbers.PhoneNumber.prototype.getPreferredDomesticCarrierCode=function(){return this.get$Value(7)},i18n.phonenumbers.PhoneNumber.prototype.getPreferredDomesticCarrierCodeOrDefault=function(){return this.get$ValueOrDefault(7)},i18n.phonenumbers.PhoneNumber.prototype.setPreferredDomesticCarrierCode=function(e){this.set$Value(7,e)},i18n.phonenumbers.PhoneNumber.prototype.hasPreferredDomesticCarrierCode=function(){return this.has$Value(7)},i18n.phonenumbers.PhoneNumber.prototype.preferredDomesticCarrierCodeCount=function(){return this.count$Values(7)},i18n.phonenumbers.PhoneNumber.prototype.clearPreferredDomesticCarrierCode=function(){this.clear$Field(7)},i18n.phonenumbers.PhoneNumber.CountryCodeSource={FROM_NUMBER_WITH_PLUS_SIGN:1,FROM_NUMBER_WITH_IDD:5,FROM_NUMBER_WITHOUT_PLUS_SIGN:10,FROM_DEFAULT_COUNTRY:20},goog.proto2.Message.set$Metadata(i18n.phonenumbers.PhoneNumber,{0:{name:"PhoneNumber",fullName:"i18n.phonenumbers.PhoneNumber"},1:{name:"country_code",required:!0,fieldType:goog.proto2.Message.FieldType.INT32,type:Number},2:{name:"national_number",required:!0,fieldType:goog.proto2.Message.FieldType.UINT64,type:Number},3:{name:"extension",fieldType:goog.proto2.Message.FieldType.STRING,type:String},4:{name:"italian_leading_zero",fieldType:goog.proto2.Message.FieldType.BOOL,type:Boolean},8:{name:"number_of_leading_zeros",fieldType:goog.proto2.Message.FieldType.INT32,defaultValue:1,type:Number},5:{name:"raw_input",fieldType:goog.proto2.Message.FieldType.STRING,type:String},6:{name:"country_code_source",fieldType:goog.proto2.Message.FieldType.ENUM,defaultValue:i18n.phonenumbers.PhoneNumber.CountryCodeSource.FROM_NUMBER_WITH_PLUS_SIGN,type:i18n.phonenumbers.PhoneNumber.CountryCodeSource},7:{name:"preferred_domestic_carrier_code",fieldType:goog.proto2.Message.FieldType.STRING,type:String}}),i18n.phonenumbers.PhoneNumberUtil=function(){this.regionToMetadataMap={}},goog.addSingletonGetter(i18n.phonenumbers.PhoneNumberUtil),i18n.phonenumbers.Error={INVALID_COUNTRY_CODE:"Invalid country calling code",NOT_A_NUMBER:"The string supplied did not seem to be a phone number",TOO_SHORT_AFTER_IDD:"Phone number too short after IDD",TOO_SHORT_NSN:"The string supplied is too short to be a phone number",TOO_LONG:"The string supplied is too long to be a phone number"},i18n.phonenumbers.PhoneNumberUtil.NANPA_COUNTRY_CODE_=1,i18n.phonenumbers.PhoneNumberUtil.MIN_LENGTH_FOR_NSN_=2,i18n.phonenumbers.PhoneNumberUtil.MAX_LENGTH_FOR_NSN_=17,i18n.phonenumbers.PhoneNumberUtil.MAX_LENGTH_COUNTRY_CODE_=3,i18n.phonenumbers.PhoneNumberUtil.MAX_INPUT_STRING_LENGTH_=250,i18n.phonenumbers.PhoneNumberUtil.UNKNOWN_REGION_="ZZ",i18n.phonenumbers.PhoneNumberUtil.COLOMBIA_MOBILE_TO_FIXED_LINE_PREFIX_="3",i18n.phonenumbers.PhoneNumberUtil.MOBILE_TOKEN_MAPPINGS_={52:"1",54:"9"},i18n.phonenumbers.PhoneNumberUtil.PLUS_SIGN="+",i18n.phonenumbers.PhoneNumberUtil.STAR_SIGN_="*",i18n.phonenumbers.PhoneNumberUtil.RFC3966_EXTN_PREFIX_=";ext=",i18n.phonenumbers.PhoneNumberUtil.RFC3966_PREFIX_="tel:",i18n.phonenumbers.PhoneNumberUtil.RFC3966_PHONE_CONTEXT_=";phone-context=",i18n.phonenumbers.PhoneNumberUtil.RFC3966_ISDN_SUBADDRESS_=";isub=",i18n.phonenumbers.PhoneNumberUtil.DIGIT_MAPPINGS={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9"},i18n.phonenumbers.PhoneNumberUtil.DIALLABLE_CHAR_MAPPINGS_={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","+":i18n.phonenumbers.PhoneNumberUtil.PLUS_SIGN,"*":"*"},i18n.phonenumbers.PhoneNumberUtil.ALPHA_MAPPINGS_={A:"2",B:"2",C:"2",D:"3",E:"3",F:"3",G:"4",H:"4",I:"4",J:"5",K:"5",L:"5",M:"6",N:"6",O:"6",P:"7",Q:"7",R:"7",S:"7",T:"8",U:"8",V:"8",W:"9",X:"9",Y:"9",Z:"9"},i18n.phonenumbers.PhoneNumberUtil.ALL_NORMALIZATION_MAPPINGS_={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9",A:"2",B:"2",C:"2",D:"3",E:"3",F:"3",G:"4",H:"4",I:"4",J:"5",K:"5",L:"5",M:"6",N:"6",O:"6",P:"7",Q:"7",R:"7",S:"7",T:"8",U:"8",V:"8",W:"9",X:"9",Y:"9",Z:"9"},i18n.phonenumbers.PhoneNumberUtil.ALL_PLUS_NUMBER_GROUPING_SYMBOLS_={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",A:"A",B:"B",C:"C",D:"D",E:"E",F:"F",G:"G",H:"H",I:"I",J:"J",K:"K",L:"L",M:"M",N:"N",O:"O",P:"P",Q:"Q",R:"R",S:"S",T:"T",U:"U",V:"V",W:"W",X:"X",Y:"Y",Z:"Z",a:"A",b:"B",c:"C",d:"D",e:"E",f:"F",g:"G",h:"H",i:"I",j:"J",k:"K",l:"L",m:"M",n:"N",o:"O",p:"P",q:"Q",r:"R",s:"S",t:"T",u:"U",v:"V",w:"W",x:"X",y:"Y",z:"Z","-":"-","－":"-","‐":"-","‑":"-","‒":"-","–":"-","—":"-","―":"-","−":"-","/":"/","／":"/"," ":" ","　":" ","⁠":" ",".":".","．":"."},i18n.phonenumbers.PhoneNumberUtil.UNIQUE_INTERNATIONAL_PREFIX_=/[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?/,i18n.phonenumbers.PhoneNumberUtil.VALID_PUNCTUATION="-x‐-―−ー－-／  ­​⁠　()（）［］.\\[\\]/~⁓∼～",i18n.phonenumbers.PhoneNumberUtil.VALID_DIGITS_="0-9０-９٠-٩۰-۹",i18n.phonenumbers.PhoneNumberUtil.VALID_ALPHA_="A-Za-z",i18n.phonenumbers.PhoneNumberUtil.PLUS_CHARS_="+＋",i18n.phonenumbers.PhoneNumberUtil.PLUS_CHARS_PATTERN=new RegExp("["+i18n.phonenumbers.PhoneNumberUtil.PLUS_CHARS_+"]+"),i18n.phonenumbers.PhoneNumberUtil.LEADING_PLUS_CHARS_PATTERN_=new RegExp("^["+i18n.phonenumbers.PhoneNumberUtil.PLUS_CHARS_+"]+"),i18n.phonenumbers.PhoneNumberUtil.SEPARATOR_PATTERN_="["+i18n.phonenumbers.PhoneNumberUtil.VALID_PUNCTUATION+"]+",i18n.phonenumbers.PhoneNumberUtil.CAPTURING_DIGIT_PATTERN=new RegExp("(["+i18n.phonenumbers.PhoneNumberUtil.VALID_DIGITS_+"])"),i18n.phonenumbers.PhoneNumberUtil.VALID_START_CHAR_PATTERN_=new RegExp("["+i18n.phonenumbers.PhoneNumberUtil.PLUS_CHARS_+i18n.phonenumbers.PhoneNumberUtil.VALID_DIGITS_+"]"),i18n.phonenumbers.PhoneNumberUtil.SECOND_NUMBER_START_PATTERN_=/[\\\/] *x/,i18n.phonenumbers.PhoneNumberUtil.UNWANTED_END_CHAR_PATTERN_=new RegExp("[^"+i18n.phonenumbers.PhoneNumberUtil.VALID_DIGITS_+i18n.phonenumbers.PhoneNumberUtil.VALID_ALPHA_+"#]+$"),i18n.phonenumbers.PhoneNumberUtil.VALID_ALPHA_PHONE_PATTERN_=/(?:.*?[A-Za-z]){3}.*/,i18n.phonenumbers.PhoneNumberUtil.MIN_LENGTH_PHONE_NUMBER_PATTERN_="["+i18n.phonenumbers.PhoneNumberUtil.VALID_DIGITS_+"]{"+i18n.phonenumbers.PhoneNumberUtil.MIN_LENGTH_FOR_NSN_+"}",i18n.phonenumbers.PhoneNumberUtil.VALID_PHONE_NUMBER_="["+i18n.phonenumbers.PhoneNumberUtil.PLUS_CHARS_+"]*(?:["+i18n.phonenumbers.PhoneNumberUtil.VALID_PUNCTUATION+i18n.phonenumbers.PhoneNumberUtil.STAR_SIGN_+"]*["+i18n.phonenumbers.PhoneNumberUtil.VALID_DIGITS_+"]){3,}["+i18n.phonenumbers.PhoneNumberUtil.VALID_PUNCTUATION+i18n.phonenumbers.PhoneNumberUtil.STAR_SIGN_+i18n.phonenumbers.PhoneNumberUtil.VALID_ALPHA_+i18n.phonenumbers.PhoneNumberUtil.VALID_DIGITS_+"]*",i18n.phonenumbers.PhoneNumberUtil.DEFAULT_EXTN_PREFIX_=" ext. ",i18n.phonenumbers.PhoneNumberUtil.CAPTURING_EXTN_DIGITS_="(["+i18n.phonenumbers.PhoneNumberUtil.VALID_DIGITS_+"]{1,7})",i18n.phonenumbers.PhoneNumberUtil.EXTN_PATTERNS_FOR_PARSING_=i18n.phonenumbers.PhoneNumberUtil.RFC3966_EXTN_PREFIX_+i18n.phonenumbers.PhoneNumberUtil.CAPTURING_EXTN_DIGITS_+"|[  \\t,]*(?:e?xt(?:ensi(?:ó?|ó))?n?|ｅ?ｘｔｎ?|[,xｘ#＃~～]|int|anexo|ｉｎｔ)[:\\.．]?[  \\t,-]*"+i18n.phonenumbers.PhoneNumberUtil.CAPTURING_EXTN_DIGITS_+"#?|[- ]+(["+i18n.phonenumbers.PhoneNumberUtil.VALID_DIGITS_+"]{1,5})#",i18n.phonenumbers.PhoneNumberUtil.EXTN_PATTERN_=new RegExp("(?:"+i18n.phonenumbers.PhoneNumberUtil.EXTN_PATTERNS_FOR_PARSING_+")$","i"),i18n.phonenumbers.PhoneNumberUtil.VALID_PHONE_NUMBER_PATTERN_=new RegExp("^"+i18n.phonenumbers.PhoneNumberUtil.MIN_LENGTH_PHONE_NUMBER_PATTERN_+"$|^"+i18n.phonenumbers.PhoneNumberUtil.VALID_PHONE_NUMBER_+"(?:"+i18n.phonenumbers.PhoneNumberUtil.EXTN_PATTERNS_FOR_PARSING_+")?$","i"),i18n.phonenumbers.PhoneNumberUtil.NON_DIGITS_PATTERN_=/\D+/,i18n.phonenumbers.PhoneNumberUtil.FIRST_GROUP_PATTERN_=/(\$\d)/,i18n.phonenumbers.PhoneNumberUtil.NP_PATTERN_=/\$NP/,i18n.phonenumbers.PhoneNumberUtil.FG_PATTERN_=/\$FG/,i18n.phonenumbers.PhoneNumberUtil.CC_PATTERN_=/\$CC/,i18n.phonenumbers.PhoneNumberUtil.FIRST_GROUP_ONLY_PREFIX_PATTERN_=/^\(?\$1\)?$/,i18n.phonenumbers.PhoneNumberUtil.REGION_CODE_FOR_NON_GEO_ENTITY="001",i18n.phonenumbers.PhoneNumberFormat={E164:0,INTERNATIONAL:1,NATIONAL:2,RFC3966:3},i18n.phonenumbers.PhoneNumberType={FIXED_LINE:0,MOBILE:1,FIXED_LINE_OR_MOBILE:2,TOLL_FREE:3,PREMIUM_RATE:4,SHARED_COST:5,VOIP:6,PERSONAL_NUMBER:7,PAGER:8,UAN:9,VOICEMAIL:10,UNKNOWN:-1},i18n.phonenumbers.PhoneNumberUtil.MatchType={NOT_A_NUMBER:0,NO_MATCH:1,SHORT_NSN_MATCH:2,NSN_MATCH:3,EXACT_MATCH:4},i18n.phonenumbers.PhoneNumberUtil.ValidationResult={IS_POSSIBLE:0,INVALID_COUNTRY_CODE:1,TOO_SHORT:2,TOO_LONG:3},i18n.phonenumbers.PhoneNumberUtil.extractPossibleNumber=function(e){var t=e.search(i18n.phonenumbers.PhoneNumberUtil.VALID_START_CHAR_PATTERN_);return t>=0?(e=e.substring(t),e=e.replace(i18n.phonenumbers.PhoneNumberUtil.UNWANTED_END_CHAR_PATTERN_,""),t=e.search(i18n.phonenumbers.PhoneNumberUtil.SECOND_NUMBER_START_PATTERN_),t>=0&&(e=e.substring(0,t))):e="",e},i18n.phonenumbers.PhoneNumberUtil.isViablePhoneNumber=function(e){return e.length<i18n.phonenumbers.PhoneNumberUtil.MIN_LENGTH_FOR_NSN_?!1:i18n.phonenumbers.PhoneNumberUtil.matchesEntirely_(i18n.phonenumbers.PhoneNumberUtil.VALID_PHONE_NUMBER_PATTERN_,e)},i18n.phonenumbers.PhoneNumberUtil.normalize=function(e){return i18n.phonenumbers.PhoneNumberUtil.matchesEntirely_(i18n.phonenumbers.PhoneNumberUtil.VALID_ALPHA_PHONE_PATTERN_,e)?i18n.phonenumbers.PhoneNumberUtil.normalizeHelper_(e,i18n.phonenumbers.PhoneNumberUtil.ALL_NORMALIZATION_MAPPINGS_,!0):i18n.phonenumbers.PhoneNumberUtil.normalizeDigitsOnly(e)},i18n.phonenumbers.PhoneNumberUtil.normalizeSB_=function(e){var t=i18n.phonenumbers.PhoneNumberUtil.normalize(e.toString());e.clear(),e.append(t)},i18n.phonenumbers.PhoneNumberUtil.normalizeDigitsOnly=function(e){return i18n.phonenumbers.PhoneNumberUtil.normalizeHelper_(e,i18n.phonenumbers.PhoneNumberUtil.DIGIT_MAPPINGS,!0)},i18n.phonenumbers.PhoneNumberUtil.convertAlphaCharactersInNumber=function(e){return i18n.phonenumbers.PhoneNumberUtil.normalizeHelper_(e,i18n.phonenumbers.PhoneNumberUtil.ALL_NORMALIZATION_MAPPINGS_,!1)},i18n.phonenumbers.PhoneNumberUtil.prototype.getLengthOfGeographicalAreaCode=function(e){var t=this.getMetadataForRegion(this.getRegionCodeForNumber(e));return null!=t&&(t.hasNationalPrefix()||e.hasItalianLeadingZero())&&this.isNumberGeographical(e)?this.getLengthOfNationalDestinationCode(e):0},i18n.phonenumbers.PhoneNumberUtil.prototype.getLengthOfNationalDestinationCode=function(e){var t;return e.hasExtension()?(t=e.clone(),t.clearExtension()):t=e,t=this.format(t,i18n.phonenumbers.PhoneNumberFormat.INTERNATIONAL).split(i18n.phonenumbers.PhoneNumberUtil.NON_DIGITS_PATTERN_),0==t[0].length&&t.shift(),2>=t.length?0:this.getNumberType(e)==i18n.phonenumbers.PhoneNumberType.MOBILE&&(e=i18n.phonenumbers.PhoneNumberUtil.getCountryMobileToken(e.getCountryCodeOrDefault()),""!=e)?t[2].length+e.length:t[1].length},i18n.phonenumbers.PhoneNumberUtil.getCountryMobileToken=function(e){return i18n.phonenumbers.PhoneNumberUtil.MOBILE_TOKEN_MAPPINGS_[e]||""},i18n.phonenumbers.PhoneNumberUtil.prototype.getSupportedRegions=function(){return goog.array.filter(Object.keys(i18n.phonenumbers.metadata.countryToMetadata),function(e){return isNaN(e)})},i18n.phonenumbers.PhoneNumberUtil.prototype.getSupportedGlobalNetworkCallingCodes=function(){var e=goog.array.filter(Object.keys(i18n.phonenumbers.metadata.countryToMetadata),function(e){return!isNaN(e)});return goog.array.map(e,function(e){return parseInt(e,10)})},i18n.phonenumbers.PhoneNumberUtil.normalizeHelper_=function(e,t,n){for(var i,o,r=new goog.string.StringBuffer,a=e.length,s=0;a>s;++s)i=e.charAt(s),o=t[i.toUpperCase()],null!=o?r.append(o):n||r.append(i);return r.toString()},i18n.phonenumbers.PhoneNumberUtil.prototype.formattingRuleHasFirstGroupOnly=function(e){return 0==e.length||i18n.phonenumbers.PhoneNumberUtil.FIRST_GROUP_ONLY_PREFIX_PATTERN_.test(e)},i18n.phonenumbers.PhoneNumberUtil.prototype.isNumberGeographical=function(e){return e=this.getNumberType(e),e==i18n.phonenumbers.PhoneNumberType.FIXED_LINE||e==i18n.phonenumbers.PhoneNumberType.FIXED_LINE_OR_MOBILE},i18n.phonenumbers.PhoneNumberUtil.prototype.isValidRegionCode_=function(e){return null!=e&&isNaN(e)&&e.toUpperCase()in i18n.phonenumbers.metadata.countryToMetadata},i18n.phonenumbers.PhoneNumberUtil.prototype.hasValidCountryCallingCode_=function(e){return e in i18n.phonenumbers.metadata.countryCodeToRegionCodeMap},i18n.phonenumbers.PhoneNumberUtil.prototype.format=function(e,t){if(0==e.getNationalNumber()&&e.hasRawInput()){var n=e.getRawInputOrDefault();if(0<n.length)return n}var n=e.getCountryCodeOrDefault(),i=this.getNationalSignificantNumber(e);if(t==i18n.phonenumbers.PhoneNumberFormat.E164)return this.prefixNumberWithCountryCallingCode_(n,i18n.phonenumbers.PhoneNumberFormat.E164,i,"");if(!this.hasValidCountryCallingCode_(n))return i;var o=this.getRegionCodeForCountryCode(n),r=this.getMetadataForRegionOrCallingCode_(n,o),o=this.maybeGetFormattedExtension_(e,r,t),i=this.formatNsn_(i,r,t);return this.prefixNumberWithCountryCallingCode_(n,t,i,o)},i18n.phonenumbers.PhoneNumberUtil.prototype.formatByPattern=function(e,t,n){var i=e.getCountryCodeOrDefault(),o=this.getNationalSignificantNumber(e);if(!this.hasValidCountryCallingCode_(i))return o;var r=this.getRegionCodeForCountryCode(i),r=this.getMetadataForRegionOrCallingCode_(i,r),a="",a=this.chooseFormattingPatternForNumber_(n,o);if(null==a)a=o;else{if(n=a.clone(),a=a.getNationalPrefixFormattingRuleOrDefault(),0<a.length){var s=r.getNationalPrefixOrDefault();0<s.length?(a=a.replace(i18n.phonenumbers.PhoneNumberUtil.NP_PATTERN_,s).replace(i18n.phonenumbers.PhoneNumberUtil.FG_PATTERN_,"$1"),n.setNationalPrefixFormattingRule(a)):n.clearNationalPrefixFormattingRule()}a=this.formatNsnUsingPattern_(o,n,t)}return e=this.maybeGetFormattedExtension_(e,r,t),this.prefixNumberWithCountryCallingCode_(i,t,a,e)},i18n.phonenumbers.PhoneNumberUtil.prototype.formatNationalNumberWithCarrierCode=function(e,t){var n=e.getCountryCodeOrDefault(),i=this.getNationalSignificantNumber(e);if(!this.hasValidCountryCallingCode_(n))return i;var o=this.getRegionCodeForCountryCode(n),r=this.getMetadataForRegionOrCallingCode_(n,o),o=this.maybeGetFormattedExtension_(e,r,i18n.phonenumbers.PhoneNumberFormat.NATIONAL),i=this.formatNsn_(i,r,i18n.phonenumbers.PhoneNumberFormat.NATIONAL,t);return this.prefixNumberWithCountryCallingCode_(n,i18n.phonenumbers.PhoneNumberFormat.NATIONAL,i,o)},i18n.phonenumbers.PhoneNumberUtil.prototype.getMetadataForRegionOrCallingCode_=function(e,t){return i18n.phonenumbers.PhoneNumberUtil.REGION_CODE_FOR_NON_GEO_ENTITY==t?this.getMetadataForNonGeographicalRegion(e):this.getMetadataForRegion(t)},i18n.phonenumbers.PhoneNumberUtil.prototype.formatNationalNumberWithPreferredCarrierCode=function(e,t){return this.formatNationalNumberWithCarrierCode(e,e.hasPreferredDomesticCarrierCode()?e.getPreferredDomesticCarrierCodeOrDefault():t)},i18n.phonenumbers.PhoneNumberUtil.prototype.formatNumberForMobileDialing=function(e,t,n){var i=e.getCountryCodeOrDefault();if(!this.hasValidCountryCallingCode_(i))return e.hasRawInput()?e.getRawInputOrDefault():"";var o="";e=e.clone(),e.clearExtension();var r=this.getRegionCodeForCountryCode(i),a=this.getNumberType(e),s=a!=i18n.phonenumbers.PhoneNumberType.UNKNOWN;if(t==r)o=a==i18n.phonenumbers.PhoneNumberType.FIXED_LINE||a==i18n.phonenumbers.PhoneNumberType.MOBILE||a==i18n.phonenumbers.PhoneNumberType.FIXED_LINE_OR_MOBILE,"CO"==r&&a==i18n.phonenumbers.PhoneNumberType.FIXED_LINE?o=this.formatNationalNumberWithCarrierCode(e,i18n.phonenumbers.PhoneNumberUtil.COLOMBIA_MOBILE_TO_FIXED_LINE_PREFIX_):"BR"==r&&o?o=e.hasPreferredDomesticCarrierCode()?this.formatNationalNumberWithPreferredCarrierCode(e,""):"":s&&"HU"==r?o=this.getNddPrefixForRegion(r,!0)+" "+this.format(e,i18n.phonenumbers.PhoneNumberFormat.NATIONAL):i==i18n.phonenumbers.PhoneNumberUtil.NANPA_COUNTRY_CODE_?(t=this.getMetadataForRegion(t),o=this.canBeInternationallyDialled(e)&&!this.isShorterThanPossibleNormalNumber_(t,this.getNationalSignificantNumber(e))?this.format(e,i18n.phonenumbers.PhoneNumberFormat.INTERNATIONAL):this.format(e,i18n.phonenumbers.PhoneNumberFormat.NATIONAL)):o=(r==i18n.phonenumbers.PhoneNumberUtil.REGION_CODE_FOR_NON_GEO_ENTITY||("MX"==r||"CL"==r)&&o)&&this.canBeInternationallyDialled(e)?this.format(e,i18n.phonenumbers.PhoneNumberFormat.INTERNATIONAL):this.format(e,i18n.phonenumbers.PhoneNumberFormat.NATIONAL);else if(s&&this.canBeInternationallyDialled(e))return n?this.format(e,i18n.phonenumbers.PhoneNumberFormat.INTERNATIONAL):this.format(e,i18n.phonenumbers.PhoneNumberFormat.E164);return n?o:i18n.phonenumbers.PhoneNumberUtil.normalizeHelper_(o,i18n.phonenumbers.PhoneNumberUtil.DIALLABLE_CHAR_MAPPINGS_,!0)},i18n.phonenumbers.PhoneNumberUtil.prototype.formatOutOfCountryCallingNumber=function(e,t){if(!this.isValidRegionCode_(t))return this.format(e,i18n.phonenumbers.PhoneNumberFormat.INTERNATIONAL);var n=e.getCountryCodeOrDefault(),i=this.getNationalSignificantNumber(e);if(!this.hasValidCountryCallingCode_(n))return i;if(n==i18n.phonenumbers.PhoneNumberUtil.NANPA_COUNTRY_CODE_){if(this.isNANPACountry(t))return n+" "+this.format(e,i18n.phonenumbers.PhoneNumberFormat.NATIONAL)}else if(n==this.getCountryCodeForValidRegion_(t))return this.format(e,i18n.phonenumbers.PhoneNumberFormat.NATIONAL);var o=this.getMetadataForRegion(t),r=o.getInternationalPrefixOrDefault(),a="";return i18n.phonenumbers.PhoneNumberUtil.matchesEntirely_(i18n.phonenumbers.PhoneNumberUtil.UNIQUE_INTERNATIONAL_PREFIX_,r)?a=r:o.hasPreferredInternationalPrefix()&&(a=o.getPreferredInternationalPrefixOrDefault()),o=this.getRegionCodeForCountryCode(n),o=this.getMetadataForRegionOrCallingCode_(n,o),i=this.formatNsn_(i,o,i18n.phonenumbers.PhoneNumberFormat.INTERNATIONAL),o=this.maybeGetFormattedExtension_(e,o,i18n.phonenumbers.PhoneNumberFormat.INTERNATIONAL),0<a.length?a+" "+n+" "+i+o:this.prefixNumberWithCountryCallingCode_(n,i18n.phonenumbers.PhoneNumberFormat.INTERNATIONAL,i,o)},i18n.phonenumbers.PhoneNumberUtil.prototype.formatInOriginalFormat=function(e,t){if(e.hasRawInput()&&(this.hasUnexpectedItalianLeadingZero_(e)||!this.hasFormattingPatternForNumber_(e)))return e.getRawInputOrDefault();if(!e.hasCountryCodeSource())return this.format(e,i18n.phonenumbers.PhoneNumberFormat.NATIONAL);var n;switch(e.getCountryCodeSource()){case i18n.phonenumbers.PhoneNumber.CountryCodeSource.FROM_NUMBER_WITH_PLUS_SIGN:n=this.format(e,i18n.phonenumbers.PhoneNumberFormat.INTERNATIONAL);break;case i18n.phonenumbers.PhoneNumber.CountryCodeSource.FROM_NUMBER_WITH_IDD:n=this.formatOutOfCountryCallingNumber(e,t);break;case i18n.phonenumbers.PhoneNumber.CountryCodeSource.FROM_NUMBER_WITHOUT_PLUS_SIGN:n=this.format(e,i18n.phonenumbers.PhoneNumberFormat.INTERNATIONAL).substring(1);break;default:var i=this.getRegionCodeForCountryCode(e.getCountryCodeOrDefault()),o=this.getNddPrefixForRegion(i,!0);if(n=this.format(e,i18n.phonenumbers.PhoneNumberFormat.NATIONAL),null==o||0==o.length)break;if(this.rawInputContainsNationalPrefix_(e.getRawInputOrDefault(),o,i))break;if(i=this.getMetadataForRegion(i),o=this.getNationalSignificantNumber(e),i=this.chooseFormattingPatternForNumber_(i.numberFormatArray(),o),null==i)break;var o=i.getNationalPrefixFormattingRuleOrDefault(),r=o.indexOf("$1");if(0>=r)break;if(o=o.substring(0,r),o=i18n.phonenumbers.PhoneNumberUtil.normalizeDigitsOnly(o),0==o.length)break;n=i.clone(),n.clearNationalPrefixFormattingRule(),n=this.formatByPattern(e,i18n.phonenumbers.PhoneNumberFormat.NATIONAL,[n])}return i=e.getRawInputOrDefault(),null!=n&&0<i.length&&(o=i18n.phonenumbers.PhoneNumberUtil.normalizeHelper_(n,i18n.phonenumbers.PhoneNumberUtil.DIALLABLE_CHAR_MAPPINGS_,!0),r=i18n.phonenumbers.PhoneNumberUtil.normalizeHelper_(i,i18n.phonenumbers.PhoneNumberUtil.DIALLABLE_CHAR_MAPPINGS_,!0),o!=r&&(n=i)),n},i18n.phonenumbers.PhoneNumberUtil.prototype.rawInputContainsNationalPrefix_=function(e,t,n){if(e=i18n.phonenumbers.PhoneNumberUtil.normalizeDigitsOnly(e),goog.string.startsWith(e,t))try{return this.isValidNumber(this.parse(e.substring(t.length),n))}catch(i){}return!1},i18n.phonenumbers.PhoneNumberUtil.prototype.hasUnexpectedItalianLeadingZero_=function(e){return e.hasItalianLeadingZero()&&!this.isLeadingZeroPossible(e.getCountryCodeOrDefault())},i18n.phonenumbers.PhoneNumberUtil.prototype.hasFormattingPatternForNumber_=function(e){var t=e.getCountryCodeOrDefault(),n=this.getRegionCodeForCountryCode(t),t=this.getMetadataForRegionOrCallingCode_(t,n);return null==t?!1:(e=this.getNationalSignificantNumber(e),null!=this.chooseFormattingPatternForNumber_(t.numberFormatArray(),e))},i18n.phonenumbers.PhoneNumberUtil.prototype.formatOutOfCountryKeepingAlphaChars=function(e,t){var n=e.getRawInputOrDefault();if(0==n.length)return this.formatOutOfCountryCallingNumber(e,t);var i=e.getCountryCodeOrDefault();if(!this.hasValidCountryCallingCode_(i))return n;var n=i18n.phonenumbers.PhoneNumberUtil.normalizeHelper_(n,i18n.phonenumbers.PhoneNumberUtil.ALL_PLUS_NUMBER_GROUPING_SYMBOLS_,!0),o=this.getNationalSignificantNumber(e);if(3<o.length){var r=n.indexOf(o.substring(0,3));-1!=r&&(n=n.substring(r))}if(r=this.getMetadataForRegion(t),i==i18n.phonenumbers.PhoneNumberUtil.NANPA_COUNTRY_CODE_){if(this.isNANPACountry(t))return i+" "+n}else if(null!=r&&i==this.getCountryCodeForValidRegion_(t))return i=this.chooseFormattingPatternForNumber_(r.numberFormatArray(),o),null==i?n:(i=i.clone(),i.setPattern("(\\d+)(.*)"),i.setFormat("$1$2"),this.formatNsnUsingPattern_(n,i,i18n.phonenumbers.PhoneNumberFormat.NATIONAL));
return o="",null!=r&&(o=r.getInternationalPrefixOrDefault(),o=i18n.phonenumbers.PhoneNumberUtil.matchesEntirely_(i18n.phonenumbers.PhoneNumberUtil.UNIQUE_INTERNATIONAL_PREFIX_,o)?o:r.getPreferredInternationalPrefixOrDefault()),r=this.getRegionCodeForCountryCode(i),r=this.getMetadataForRegionOrCallingCode_(i,r),r=this.maybeGetFormattedExtension_(e,r,i18n.phonenumbers.PhoneNumberFormat.INTERNATIONAL),0<o.length?o+" "+i+" "+n+r:this.prefixNumberWithCountryCallingCode_(i,i18n.phonenumbers.PhoneNumberFormat.INTERNATIONAL,n,r)},i18n.phonenumbers.PhoneNumberUtil.prototype.getNationalSignificantNumber=function(e){var t=""+e.getNationalNumber();return e.hasItalianLeadingZero()&&e.getItalianLeadingZero()?Array(e.getNumberOfLeadingZerosOrDefault()+1).join("0")+t:t},i18n.phonenumbers.PhoneNumberUtil.prototype.prefixNumberWithCountryCallingCode_=function(e,t,n,i){switch(t){case i18n.phonenumbers.PhoneNumberFormat.E164:return i18n.phonenumbers.PhoneNumberUtil.PLUS_SIGN+e+n+i;case i18n.phonenumbers.PhoneNumberFormat.INTERNATIONAL:return i18n.phonenumbers.PhoneNumberUtil.PLUS_SIGN+e+" "+n+i;case i18n.phonenumbers.PhoneNumberFormat.RFC3966:return i18n.phonenumbers.PhoneNumberUtil.RFC3966_PREFIX_+i18n.phonenumbers.PhoneNumberUtil.PLUS_SIGN+e+"-"+n+i;default:return n+i}},i18n.phonenumbers.PhoneNumberUtil.prototype.formatNsn_=function(e,t,n,i){return t=0==t.intlNumberFormatArray().length||n==i18n.phonenumbers.PhoneNumberFormat.NATIONAL?t.numberFormatArray():t.intlNumberFormatArray(),t=this.chooseFormattingPatternForNumber_(t,e),null==t?e:this.formatNsnUsingPattern_(e,t,n,i)},i18n.phonenumbers.PhoneNumberUtil.prototype.chooseFormattingPatternForNumber_=function(e,t){for(var n,i=e.length,o=0;i>o;++o){n=e[o];var r=n.leadingDigitsPatternCount();if((0==r||0==t.search(n.getLeadingDigitsPattern(r-1)))&&(r=new RegExp(n.getPattern()),i18n.phonenumbers.PhoneNumberUtil.matchesEntirely_(r,t)))return n}return null},i18n.phonenumbers.PhoneNumberUtil.prototype.formatNsnUsingPattern_=function(e,t,n,i){var o=t.getFormatOrDefault(),r=new RegExp(t.getPattern()),a=t.getDomesticCarrierCodeFormattingRuleOrDefault(),s="";return n==i18n.phonenumbers.PhoneNumberFormat.NATIONAL&&null!=i&&0<i.length&&0<a.length?(t=a.replace(i18n.phonenumbers.PhoneNumberUtil.CC_PATTERN_,i),o=o.replace(i18n.phonenumbers.PhoneNumberUtil.FIRST_GROUP_PATTERN_,t),s=e.replace(r,o)):(t=t.getNationalPrefixFormattingRuleOrDefault(),s=n==i18n.phonenumbers.PhoneNumberFormat.NATIONAL&&null!=t&&0<t.length?e.replace(r,o.replace(i18n.phonenumbers.PhoneNumberUtil.FIRST_GROUP_PATTERN_,t)):e.replace(r,o)),n==i18n.phonenumbers.PhoneNumberFormat.RFC3966&&(s=s.replace(new RegExp("^"+i18n.phonenumbers.PhoneNumberUtil.SEPARATOR_PATTERN_),""),s=s.replace(new RegExp(i18n.phonenumbers.PhoneNumberUtil.SEPARATOR_PATTERN_,"g"),"-")),s},i18n.phonenumbers.PhoneNumberUtil.prototype.getExampleNumber=function(e){return this.getExampleNumberForType(e,i18n.phonenumbers.PhoneNumberType.FIXED_LINE)},i18n.phonenumbers.PhoneNumberUtil.prototype.getExampleNumberForType=function(e,t){if(!this.isValidRegionCode_(e))return null;var n=this.getNumberDescByType_(this.getMetadataForRegion(e),t);try{if(n.hasExampleNumber())return this.parse(n.getExampleNumberOrDefault(),e)}catch(i){}return null},i18n.phonenumbers.PhoneNumberUtil.prototype.getExampleNumberForNonGeoEntity=function(e){var t=this.getMetadataForNonGeographicalRegion(e);if(null!=t){t=t.getGeneralDesc();try{if(t.hasExampleNumber())return this.parse("+"+e+t.getExampleNumber(),"ZZ")}catch(n){}}return null},i18n.phonenumbers.PhoneNumberUtil.prototype.maybeGetFormattedExtension_=function(e,t,n){return e.hasExtension()&&0!=e.getExtension().length?n==i18n.phonenumbers.PhoneNumberFormat.RFC3966?i18n.phonenumbers.PhoneNumberUtil.RFC3966_EXTN_PREFIX_+e.getExtension():t.hasPreferredExtnPrefix()?t.getPreferredExtnPrefix()+e.getExtensionOrDefault():i18n.phonenumbers.PhoneNumberUtil.DEFAULT_EXTN_PREFIX_+e.getExtensionOrDefault():""},i18n.phonenumbers.PhoneNumberUtil.prototype.getNumberDescByType_=function(e,t){switch(t){case i18n.phonenumbers.PhoneNumberType.PREMIUM_RATE:return e.getPremiumRate();case i18n.phonenumbers.PhoneNumberType.TOLL_FREE:return e.getTollFree();case i18n.phonenumbers.PhoneNumberType.MOBILE:return e.getMobile();case i18n.phonenumbers.PhoneNumberType.FIXED_LINE:case i18n.phonenumbers.PhoneNumberType.FIXED_LINE_OR_MOBILE:return e.getFixedLine();case i18n.phonenumbers.PhoneNumberType.SHARED_COST:return e.getSharedCost();case i18n.phonenumbers.PhoneNumberType.VOIP:return e.getVoip();case i18n.phonenumbers.PhoneNumberType.PERSONAL_NUMBER:return e.getPersonalNumber();case i18n.phonenumbers.PhoneNumberType.PAGER:return e.getPager();case i18n.phonenumbers.PhoneNumberType.UAN:return e.getUan();case i18n.phonenumbers.PhoneNumberType.VOICEMAIL:return e.getVoicemail();default:return e.getGeneralDesc()}},i18n.phonenumbers.PhoneNumberUtil.prototype.getNumberType=function(e){var t=this.getRegionCodeForNumber(e),t=this.getMetadataForRegionOrCallingCode_(e.getCountryCodeOrDefault(),t);return null==t?i18n.phonenumbers.PhoneNumberType.UNKNOWN:(e=this.getNationalSignificantNumber(e),this.getNumberTypeHelper_(e,t))},i18n.phonenumbers.PhoneNumberUtil.prototype.getNumberTypeHelper_=function(e,t){return this.isNumberMatchingDesc_(e,t.getGeneralDesc())?this.isNumberMatchingDesc_(e,t.getPremiumRate())?i18n.phonenumbers.PhoneNumberType.PREMIUM_RATE:this.isNumberMatchingDesc_(e,t.getTollFree())?i18n.phonenumbers.PhoneNumberType.TOLL_FREE:this.isNumberMatchingDesc_(e,t.getSharedCost())?i18n.phonenumbers.PhoneNumberType.SHARED_COST:this.isNumberMatchingDesc_(e,t.getVoip())?i18n.phonenumbers.PhoneNumberType.VOIP:this.isNumberMatchingDesc_(e,t.getPersonalNumber())?i18n.phonenumbers.PhoneNumberType.PERSONAL_NUMBER:this.isNumberMatchingDesc_(e,t.getPager())?i18n.phonenumbers.PhoneNumberType.PAGER:this.isNumberMatchingDesc_(e,t.getUan())?i18n.phonenumbers.PhoneNumberType.UAN:this.isNumberMatchingDesc_(e,t.getVoicemail())?i18n.phonenumbers.PhoneNumberType.VOICEMAIL:this.isNumberMatchingDesc_(e,t.getFixedLine())?t.getSameMobileAndFixedLinePattern()||this.isNumberMatchingDesc_(e,t.getMobile())?i18n.phonenumbers.PhoneNumberType.FIXED_LINE_OR_MOBILE:i18n.phonenumbers.PhoneNumberType.FIXED_LINE:!t.getSameMobileAndFixedLinePattern()&&this.isNumberMatchingDesc_(e,t.getMobile())?i18n.phonenumbers.PhoneNumberType.MOBILE:i18n.phonenumbers.PhoneNumberType.UNKNOWN:i18n.phonenumbers.PhoneNumberType.UNKNOWN},i18n.phonenumbers.PhoneNumberUtil.prototype.getMetadataForRegion=function(e){if(null==e)return null;e=e.toUpperCase();var t=this.regionToMetadataMap[e];if(null==t){var t=new goog.proto2.PbLiteSerializer,n=i18n.phonenumbers.metadata.countryToMetadata[e];if(null==n)return null;t=t.deserialize(i18n.phonenumbers.PhoneMetadata.getDescriptor(),n),this.regionToMetadataMap[e]=t}return t},i18n.phonenumbers.PhoneNumberUtil.prototype.getMetadataForNonGeographicalRegion=function(e){return this.getMetadataForRegion(""+e)},i18n.phonenumbers.PhoneNumberUtil.prototype.isNumberMatchingDesc_=function(e,t){return i18n.phonenumbers.PhoneNumberUtil.matchesEntirely_(t.getPossibleNumberPatternOrDefault(),e)&&i18n.phonenumbers.PhoneNumberUtil.matchesEntirely_(t.getNationalNumberPatternOrDefault(),e)},i18n.phonenumbers.PhoneNumberUtil.prototype.isValidNumber=function(e){var t=this.getRegionCodeForNumber(e);return this.isValidNumberForRegion(e,t)},i18n.phonenumbers.PhoneNumberUtil.prototype.isValidNumberForRegion=function(e,t){var n=e.getCountryCodeOrDefault(),i=this.getMetadataForRegionOrCallingCode_(n,t);return null==i||i18n.phonenumbers.PhoneNumberUtil.REGION_CODE_FOR_NON_GEO_ENTITY!=t&&n!=this.getCountryCodeForValidRegion_(t)?!1:(n=this.getNationalSignificantNumber(e),this.getNumberTypeHelper_(n,i)!=i18n.phonenumbers.PhoneNumberType.UNKNOWN)},i18n.phonenumbers.PhoneNumberUtil.prototype.getRegionCodeForNumber=function(e){if(null==e)return null;var t=e.getCountryCodeOrDefault(),t=i18n.phonenumbers.metadata.countryCodeToRegionCodeMap[t];return null==t?null:1==t.length?t[0]:this.getRegionCodeForNumberFromRegionList_(e,t)},i18n.phonenumbers.PhoneNumberUtil.prototype.getRegionCodeForNumberFromRegionList_=function(e,t){for(var n,i=this.getNationalSignificantNumber(e),o=t.length,r=0;o>r;r++){n=t[r];var a=this.getMetadataForRegion(n);if(a.hasLeadingDigits()){if(0==i.search(a.getLeadingDigits()))return n}else if(this.getNumberTypeHelper_(i,a)!=i18n.phonenumbers.PhoneNumberType.UNKNOWN)return n}return null},i18n.phonenumbers.PhoneNumberUtil.prototype.getRegionCodeForCountryCode=function(e){return e=i18n.phonenumbers.metadata.countryCodeToRegionCodeMap[e],null==e?i18n.phonenumbers.PhoneNumberUtil.UNKNOWN_REGION_:e[0]},i18n.phonenumbers.PhoneNumberUtil.prototype.getRegionCodesForCountryCode=function(e){return e=i18n.phonenumbers.metadata.countryCodeToRegionCodeMap[e],null==e?[]:e},i18n.phonenumbers.PhoneNumberUtil.prototype.getCountryCodeForRegion=function(e){return this.isValidRegionCode_(e)?this.getCountryCodeForValidRegion_(e):0},i18n.phonenumbers.PhoneNumberUtil.prototype.getCountryCodeForValidRegion_=function(e){var t=this.getMetadataForRegion(e);if(null==t)throw"Invalid region code: "+e;return t.getCountryCodeOrDefault()},i18n.phonenumbers.PhoneNumberUtil.prototype.getNddPrefixForRegion=function(e,t){var n=this.getMetadataForRegion(e);return null==n?null:(n=n.getNationalPrefixOrDefault(),0==n.length?null:(t&&(n=n.replace("~","")),n))},i18n.phonenumbers.PhoneNumberUtil.prototype.isNANPACountry=function(e){return null!=e&&goog.array.contains(i18n.phonenumbers.metadata.countryCodeToRegionCodeMap[i18n.phonenumbers.PhoneNumberUtil.NANPA_COUNTRY_CODE_],e.toUpperCase())},i18n.phonenumbers.PhoneNumberUtil.prototype.isLeadingZeroPossible=function(e){return e=this.getMetadataForRegionOrCallingCode_(e,this.getRegionCodeForCountryCode(e)),null!=e&&e.getLeadingZeroPossibleOrDefault()},i18n.phonenumbers.PhoneNumberUtil.prototype.isAlphaNumber=function(e){return i18n.phonenumbers.PhoneNumberUtil.isViablePhoneNumber(e)?(e=new goog.string.StringBuffer(e),this.maybeStripExtension(e),i18n.phonenumbers.PhoneNumberUtil.matchesEntirely_(i18n.phonenumbers.PhoneNumberUtil.VALID_ALPHA_PHONE_PATTERN_,e.toString())):!1},i18n.phonenumbers.PhoneNumberUtil.prototype.isPossibleNumber=function(e){return this.isPossibleNumberWithReason(e)==i18n.phonenumbers.PhoneNumberUtil.ValidationResult.IS_POSSIBLE},i18n.phonenumbers.PhoneNumberUtil.prototype.testNumberLengthAgainstPattern_=function(e,t){return i18n.phonenumbers.PhoneNumberUtil.matchesEntirely_(e,t)?i18n.phonenumbers.PhoneNumberUtil.ValidationResult.IS_POSSIBLE:0==t.search(e)?i18n.phonenumbers.PhoneNumberUtil.ValidationResult.TOO_LONG:i18n.phonenumbers.PhoneNumberUtil.ValidationResult.TOO_SHORT},i18n.phonenumbers.PhoneNumberUtil.prototype.isShorterThanPossibleNormalNumber_=function(e,t){var n=e.getGeneralDesc().getPossibleNumberPatternOrDefault();return this.testNumberLengthAgainstPattern_(n,t)==i18n.phonenumbers.PhoneNumberUtil.ValidationResult.TOO_SHORT},i18n.phonenumbers.PhoneNumberUtil.prototype.isPossibleNumberWithReason=function(e){var t=this.getNationalSignificantNumber(e);if(e=e.getCountryCodeOrDefault(),!this.hasValidCountryCallingCode_(e))return i18n.phonenumbers.PhoneNumberUtil.ValidationResult.INVALID_COUNTRY_CODE;var n=this.getRegionCodeForCountryCode(e);return e=this.getMetadataForRegionOrCallingCode_(e,n).getGeneralDesc().getPossibleNumberPatternOrDefault(),this.testNumberLengthAgainstPattern_(e,t)},i18n.phonenumbers.PhoneNumberUtil.prototype.isPossibleNumberString=function(e,t){try{return this.isPossibleNumber(this.parse(e,t))}catch(n){return!1}},i18n.phonenumbers.PhoneNumberUtil.prototype.truncateTooLongNumber=function(e){if(this.isValidNumber(e))return!0;var t=e.clone(),n=e.getNationalNumberOrDefault();do if(n=Math.floor(n/10),t.setNationalNumber(n),0==n||this.isPossibleNumberWithReason(t)==i18n.phonenumbers.PhoneNumberUtil.ValidationResult.TOO_SHORT)return!1;while(!this.isValidNumber(t));return e.setNationalNumber(n),!0},i18n.phonenumbers.PhoneNumberUtil.prototype.extractCountryCode=function(e,t){var n=e.toString();if(0==n.length||"0"==n.charAt(0))return 0;for(var i,o=n.length,r=1;r<=i18n.phonenumbers.PhoneNumberUtil.MAX_LENGTH_COUNTRY_CODE_&&o>=r;++r)if(i=parseInt(n.substring(0,r),10),i in i18n.phonenumbers.metadata.countryCodeToRegionCodeMap)return t.append(n.substring(r)),i;return 0},i18n.phonenumbers.PhoneNumberUtil.prototype.maybeExtractCountryCode=function(e,t,n,i,o){if(0==e.length)return 0;e=new goog.string.StringBuffer(e);var r;if(null!=t&&(r=t.getInternationalPrefix()),null==r&&(r="NonMatch"),r=this.maybeStripInternationalPrefixAndNormalize(e,r),i&&o.setCountryCodeSource(r),r!=i18n.phonenumbers.PhoneNumber.CountryCodeSource.FROM_DEFAULT_COUNTRY){if(e.getLength()<=i18n.phonenumbers.PhoneNumberUtil.MIN_LENGTH_FOR_NSN_)throw i18n.phonenumbers.Error.TOO_SHORT_AFTER_IDD;if(n=this.extractCountryCode(e,n),0!=n)return o.setCountryCode(n),n;throw i18n.phonenumbers.Error.INVALID_COUNTRY_CODE}if(null!=t){r=t.getCountryCodeOrDefault();var a=""+r,s=e.toString();if(goog.string.startsWith(s,a)){var l=new goog.string.StringBuffer(s.substring(a.length)),s=t.getGeneralDesc(),a=new RegExp(s.getNationalNumberPatternOrDefault());if(this.maybeStripNationalPrefixAndCarrierCode(l,t,null),t=l.toString(),s=s.getPossibleNumberPatternOrDefault(),!i18n.phonenumbers.PhoneNumberUtil.matchesEntirely_(a,e.toString())&&i18n.phonenumbers.PhoneNumberUtil.matchesEntirely_(a,t)||this.testNumberLengthAgainstPattern_(s,e.toString())==i18n.phonenumbers.PhoneNumberUtil.ValidationResult.TOO_LONG)return n.append(t),i&&o.setCountryCodeSource(i18n.phonenumbers.PhoneNumber.CountryCodeSource.FROM_NUMBER_WITHOUT_PLUS_SIGN),o.setCountryCode(r),r}}return o.setCountryCode(0),0},i18n.phonenumbers.PhoneNumberUtil.prototype.parsePrefixAsIdd_=function(e,t){var n=t.toString();if(0==n.search(e)){var i=n.match(e)[0].length,o=n.substring(i).match(i18n.phonenumbers.PhoneNumberUtil.CAPTURING_DIGIT_PATTERN);return o&&null!=o[1]&&0<o[1].length&&"0"==i18n.phonenumbers.PhoneNumberUtil.normalizeDigitsOnly(o[1])?!1:(t.clear(),t.append(n.substring(i)),!0)}return!1},i18n.phonenumbers.PhoneNumberUtil.prototype.maybeStripInternationalPrefixAndNormalize=function(e,t){var n=e.toString();return 0==n.length?i18n.phonenumbers.PhoneNumber.CountryCodeSource.FROM_DEFAULT_COUNTRY:i18n.phonenumbers.PhoneNumberUtil.LEADING_PLUS_CHARS_PATTERN_.test(n)?(n=n.replace(i18n.phonenumbers.PhoneNumberUtil.LEADING_PLUS_CHARS_PATTERN_,""),e.clear(),e.append(i18n.phonenumbers.PhoneNumberUtil.normalize(n)),i18n.phonenumbers.PhoneNumber.CountryCodeSource.FROM_NUMBER_WITH_PLUS_SIGN):(n=new RegExp(t),i18n.phonenumbers.PhoneNumberUtil.normalizeSB_(e),this.parsePrefixAsIdd_(n,e)?i18n.phonenumbers.PhoneNumber.CountryCodeSource.FROM_NUMBER_WITH_IDD:i18n.phonenumbers.PhoneNumber.CountryCodeSource.FROM_DEFAULT_COUNTRY)},i18n.phonenumbers.PhoneNumberUtil.prototype.maybeStripNationalPrefixAndCarrierCode=function(e,t,n){var i=e.toString(),o=i.length,r=t.getNationalPrefixForParsing();if(0==o||null==r||0==r.length)return!1;var a=new RegExp("^(?:"+r+")");if(o=a.exec(i)){var r=new RegExp(t.getGeneralDesc().getNationalNumberPatternOrDefault()),s=i18n.phonenumbers.PhoneNumberUtil.matchesEntirely_(r,i),l=o.length-1;if(t=t.getNationalPrefixTransformRule(),null==t||0==t.length||null==o[l]||0==o[l].length){if(s&&!i18n.phonenumbers.PhoneNumberUtil.matchesEntirely_(r,i.substring(o[0].length)))return!1;null!=n&&l>0&&null!=o[l]&&n.append(o[1]),e.set(i.substring(o[0].length))}else{if(i=i.replace(a,t),s&&!i18n.phonenumbers.PhoneNumberUtil.matchesEntirely_(r,i))return!1;null!=n&&l>0&&n.append(o[1]),e.set(i)}return!0}return!1},i18n.phonenumbers.PhoneNumberUtil.prototype.maybeStripExtension=function(e){var t=e.toString(),n=t.search(i18n.phonenumbers.PhoneNumberUtil.EXTN_PATTERN_);if(n>=0&&i18n.phonenumbers.PhoneNumberUtil.isViablePhoneNumber(t.substring(0,n)))for(var i=t.match(i18n.phonenumbers.PhoneNumberUtil.EXTN_PATTERN_),o=i.length,r=1;o>r;++r)if(null!=i[r]&&0<i[r].length)return e.clear(),e.append(t.substring(0,n)),i[r];return""},i18n.phonenumbers.PhoneNumberUtil.prototype.checkRegionForParsing_=function(e,t){return this.isValidRegionCode_(t)||null!=e&&0<e.length&&i18n.phonenumbers.PhoneNumberUtil.LEADING_PLUS_CHARS_PATTERN_.test(e)},i18n.phonenumbers.PhoneNumberUtil.prototype.parse=function(e,t){return this.parseHelper_(e,t,!1,!0)},i18n.phonenumbers.PhoneNumberUtil.prototype.parseAndKeepRawInput=function(e,t){if(!this.isValidRegionCode_(t)&&0<e.length&&e.charAt(0)!=i18n.phonenumbers.PhoneNumberUtil.PLUS_SIGN)throw i18n.phonenumbers.Error.INVALID_COUNTRY_CODE;return this.parseHelper_(e,t,!0,!0)},i18n.phonenumbers.PhoneNumberUtil.prototype.setItalianLeadingZerosForPhoneNumber_=function(e,t){if(1<e.length&&"0"==e.charAt(0)){t.setItalianLeadingZero(!0);for(var n=1;n<e.length-1&&"0"==e.charAt(n);)n++;1!=n&&t.setNumberOfLeadingZeros(n)}},i18n.phonenumbers.PhoneNumberUtil.prototype.parseHelper_=function(e,t,n,i){if(null==e)throw i18n.phonenumbers.Error.NOT_A_NUMBER;if(e.length>i18n.phonenumbers.PhoneNumberUtil.MAX_INPUT_STRING_LENGTH_)throw i18n.phonenumbers.Error.TOO_LONG;var o=new goog.string.StringBuffer;if(this.buildNationalNumberForParsing_(e,o),!i18n.phonenumbers.PhoneNumberUtil.isViablePhoneNumber(o.toString()))throw i18n.phonenumbers.Error.NOT_A_NUMBER;if(i&&!this.checkRegionForParsing_(o.toString(),t))throw i18n.phonenumbers.Error.INVALID_COUNTRY_CODE;i=new i18n.phonenumbers.PhoneNumber,n&&i.setRawInput(e),e=this.maybeStripExtension(o),0<e.length&&i.setExtension(e),e=this.getMetadataForRegion(t);var r=new goog.string.StringBuffer,a=0,s=o.toString();try{a=this.maybeExtractCountryCode(s,e,r,n,i)}catch(l){if(l!=i18n.phonenumbers.Error.INVALID_COUNTRY_CODE||!i18n.phonenumbers.PhoneNumberUtil.LEADING_PLUS_CHARS_PATTERN_.test(s))throw l;if(s=s.replace(i18n.phonenumbers.PhoneNumberUtil.LEADING_PLUS_CHARS_PATTERN_,""),a=this.maybeExtractCountryCode(s,e,r,n,i),0==a)throw l}if(0!=a?(o=this.getRegionCodeForCountryCode(a),o!=t&&(e=this.getMetadataForRegionOrCallingCode_(a,o))):(i18n.phonenumbers.PhoneNumberUtil.normalizeSB_(o),r.append(o.toString()),null!=t?(a=e.getCountryCodeOrDefault(),i.setCountryCode(a)):n&&i.clearCountryCodeSource()),r.getLength()<i18n.phonenumbers.PhoneNumberUtil.MIN_LENGTH_FOR_NSN_)throw i18n.phonenumbers.Error.TOO_SHORT_NSN;if(null!=e&&(t=new goog.string.StringBuffer,o=new goog.string.StringBuffer(r.toString()),this.maybeStripNationalPrefixAndCarrierCode(o,e,t),this.isShorterThanPossibleNormalNumber_(e,o.toString())||(r=o,n&&i.setPreferredDomesticCarrierCode(t.toString()))),n=r.toString(),t=n.length,t<i18n.phonenumbers.PhoneNumberUtil.MIN_LENGTH_FOR_NSN_)throw i18n.phonenumbers.Error.TOO_SHORT_NSN;if(t>i18n.phonenumbers.PhoneNumberUtil.MAX_LENGTH_FOR_NSN_)throw i18n.phonenumbers.Error.TOO_LONG;return this.setItalianLeadingZerosForPhoneNumber_(n,i),i.setNationalNumber(parseInt(n,10)),i},i18n.phonenumbers.PhoneNumberUtil.prototype.buildNationalNumberForParsing_=function(e,t){var n=e.indexOf(i18n.phonenumbers.PhoneNumberUtil.RFC3966_PHONE_CONTEXT_);if(n>0){var i=n+i18n.phonenumbers.PhoneNumberUtil.RFC3966_PHONE_CONTEXT_.length;if(e.charAt(i)==i18n.phonenumbers.PhoneNumberUtil.PLUS_SIGN){var o=e.indexOf(";",i);o>0?t.append(e.substring(i,o)):t.append(e.substring(i))}i=e.indexOf(i18n.phonenumbers.PhoneNumberUtil.RFC3966_PREFIX_),t.append(e.substring(i>=0?i+i18n.phonenumbers.PhoneNumberUtil.RFC3966_PREFIX_.length:0,n))}else t.append(i18n.phonenumbers.PhoneNumberUtil.extractPossibleNumber(e));n=t.toString(),i=n.indexOf(i18n.phonenumbers.PhoneNumberUtil.RFC3966_ISDN_SUBADDRESS_),i>0&&(t.clear(),t.append(n.substring(0,i)))},i18n.phonenumbers.PhoneNumberUtil.prototype.isNumberMatch=function(e,t){var n,i;if("string"==typeof e)try{n=this.parse(e,i18n.phonenumbers.PhoneNumberUtil.UNKNOWN_REGION_)}catch(o){if(o!=i18n.phonenumbers.Error.INVALID_COUNTRY_CODE)return i18n.phonenumbers.PhoneNumberUtil.MatchType.NOT_A_NUMBER;if("string"!=typeof t){var r=this.getRegionCodeForCountryCode(t.getCountryCodeOrDefault());if(r!=i18n.phonenumbers.PhoneNumberUtil.UNKNOWN_REGION_){try{n=this.parse(e,r)}catch(a){return i18n.phonenumbers.PhoneNumberUtil.MatchType.NOT_A_NUMBER}return n=this.isNumberMatch(n,t),n==i18n.phonenumbers.PhoneNumberUtil.MatchType.EXACT_MATCH?i18n.phonenumbers.PhoneNumberUtil.MatchType.NSN_MATCH:n}}try{n=this.parseHelper_(e,null,!1,!1)}catch(s){return i18n.phonenumbers.PhoneNumberUtil.MatchType.NOT_A_NUMBER}}else n=e.clone();if("string"==typeof t)try{return i=this.parse(t,i18n.phonenumbers.PhoneNumberUtil.UNKNOWN_REGION_),this.isNumberMatch(e,i)}catch(l){return l!=i18n.phonenumbers.Error.INVALID_COUNTRY_CODE?i18n.phonenumbers.PhoneNumberUtil.MatchType.NOT_A_NUMBER:this.isNumberMatch(t,n)}else i=t.clone();if(n.clearRawInput(),n.clearCountryCodeSource(),n.clearPreferredDomesticCarrierCode(),i.clearRawInput(),i.clearCountryCodeSource(),i.clearPreferredDomesticCarrierCode(),n.hasExtension()&&0==n.getExtension().length&&n.clearExtension(),i.hasExtension()&&0==i.getExtension().length&&i.clearExtension(),n.hasExtension()&&i.hasExtension()&&n.getExtension()!=i.getExtension())return i18n.phonenumbers.PhoneNumberUtil.MatchType.NO_MATCH;var r=n.getCountryCodeOrDefault(),d=i.getCountryCodeOrDefault();return 0!=r&&0!=d?n.equals(i)?i18n.phonenumbers.PhoneNumberUtil.MatchType.EXACT_MATCH:r==d&&this.isNationalNumberSuffixOfTheOther_(n,i)?i18n.phonenumbers.PhoneNumberUtil.MatchType.SHORT_NSN_MATCH:i18n.phonenumbers.PhoneNumberUtil.MatchType.NO_MATCH:(n.setCountryCode(0),i.setCountryCode(0),n.equals(i)?i18n.phonenumbers.PhoneNumberUtil.MatchType.NSN_MATCH:this.isNationalNumberSuffixOfTheOther_(n,i)?i18n.phonenumbers.PhoneNumberUtil.MatchType.SHORT_NSN_MATCH:i18n.phonenumbers.PhoneNumberUtil.MatchType.NO_MATCH)},i18n.phonenumbers.PhoneNumberUtil.prototype.isNationalNumberSuffixOfTheOther_=function(e,t){var n=""+e.getNationalNumber(),i=""+t.getNationalNumber();return goog.string.endsWith(n,i)||goog.string.endsWith(i,n)},i18n.phonenumbers.PhoneNumberUtil.prototype.canBeInternationallyDialled=function(e){var t=this.getMetadataForRegion(this.getRegionCodeForNumber(e));return null==t?!0:(e=this.getNationalSignificantNumber(e),!this.isNumberMatchingDesc_(e,t.getNoInternationalDialling()))},i18n.phonenumbers.PhoneNumberUtil.matchesEntirely_=function(e,t){var n="string"==typeof e?t.match("^(?:"+e+")$"):t.match(e);return n&&n[0].length==t.length?!0:!1},i18n.phonenumbers.AsYouTypeFormatter=function(e){this.DIGIT_PLACEHOLDER_=" ",this.DIGIT_PATTERN_=new RegExp(this.DIGIT_PLACEHOLDER_),this.currentOutput_="",this.formattingTemplate_=new goog.string.StringBuffer,this.currentFormattingPattern_="",this.accruedInput_=new goog.string.StringBuffer,this.accruedInputWithoutFormatting_=new goog.string.StringBuffer,this.ableToFormat_=!0,this.isExpectingCountryCallingCode_=this.isCompleteNumber_=this.inputHasFormatting_=!1,this.phoneUtil_=i18n.phonenumbers.PhoneNumberUtil.getInstance(),this.positionToRemember_=this.originalPosition_=this.lastMatchPosition_=0,this.prefixBeforeNationalNumber_=new goog.string.StringBuffer,this.shouldAddSpaceAfterNationalPrefix_=!1,this.extractedNationalPrefix_="",this.nationalNumber_=new goog.string.StringBuffer,this.possibleFormats_=[],this.defaultCountry_=e,this.defaultMetadata_=this.currentMetadata_=this.getMetadataForRegion_(this.defaultCountry_)},i18n.phonenumbers.AsYouTypeFormatter.SEPARATOR_BEFORE_NATIONAL_NUMBER_=" ",i18n.phonenumbers.AsYouTypeFormatter.EMPTY_METADATA_=new i18n.phonenumbers.PhoneMetadata,i18n.phonenumbers.AsYouTypeFormatter.EMPTY_METADATA_.setInternationalPrefix("NA"),i18n.phonenumbers.AsYouTypeFormatter.CHARACTER_CLASS_PATTERN_=/\[([^\[\]])*\]/g,i18n.phonenumbers.AsYouTypeFormatter.STANDALONE_DIGIT_PATTERN_=/\d(?=[^,}][^,}])/g,i18n.phonenumbers.AsYouTypeFormatter.ELIGIBLE_FORMAT_PATTERN_=new RegExp("^["+i18n.phonenumbers.PhoneNumberUtil.VALID_PUNCTUATION+"]*(\\$\\d["+i18n.phonenumbers.PhoneNumberUtil.VALID_PUNCTUATION+"]*)+$"),i18n.phonenumbers.AsYouTypeFormatter.NATIONAL_PREFIX_SEPARATORS_PATTERN_=/[- ]/,i18n.phonenumbers.AsYouTypeFormatter.MIN_LEADING_DIGITS_LENGTH_=3,i18n.phonenumbers.AsYouTypeFormatter.prototype.getMetadataForRegion_=function(e){return e=this.phoneUtil_.getCountryCodeForRegion(e),e=this.phoneUtil_.getRegionCodeForCountryCode(e),e=this.phoneUtil_.getMetadataForRegion(e),null!=e?e:i18n.phonenumbers.AsYouTypeFormatter.EMPTY_METADATA_},i18n.phonenumbers.AsYouTypeFormatter.prototype.maybeCreateNewTemplate_=function(){for(var e=this.possibleFormats_.length,t=0;e>t;++t){var n=this.possibleFormats_[t],i=n.getPatternOrDefault();if(this.currentFormattingPattern_==i)return!1;if(this.createFormattingTemplate_(n))return this.currentFormattingPattern_=i,this.shouldAddSpaceAfterNationalPrefix_=i18n.phonenumbers.AsYouTypeFormatter.NATIONAL_PREFIX_SEPARATORS_PATTERN_.test(n.getNationalPrefixFormattingRule()),this.lastMatchPosition_=0,!0}return this.ableToFormat_=!1},i18n.phonenumbers.AsYouTypeFormatter.prototype.getAvailableFormats_=function(e){for(var t=this.isCompleteNumber_&&0<this.currentMetadata_.intlNumberFormatCount()?this.currentMetadata_.intlNumberFormatArray():this.currentMetadata_.numberFormatArray(),n=t.length,i=0;n>i;++i){var o=t[i];(!this.currentMetadata_.hasNationalPrefix()||this.isCompleteNumber_||o.getNationalPrefixOptionalWhenFormatting()||this.phoneUtil_.formattingRuleHasFirstGroupOnly(o.getNationalPrefixFormattingRuleOrDefault()))&&this.isFormatEligible_(o.getFormatOrDefault())&&this.possibleFormats_.push(o)}this.narrowDownPossibleFormats_(e)},i18n.phonenumbers.AsYouTypeFormatter.prototype.isFormatEligible_=function(e){return i18n.phonenumbers.AsYouTypeFormatter.ELIGIBLE_FORMAT_PATTERN_.test(e)},i18n.phonenumbers.AsYouTypeFormatter.prototype.narrowDownPossibleFormats_=function(e){for(var t=[],n=e.length-i18n.phonenumbers.AsYouTypeFormatter.MIN_LEADING_DIGITS_LENGTH_,i=this.possibleFormats_.length,o=0;i>o;++o){var r=this.possibleFormats_[o];if(0==r.leadingDigitsPatternCount())t.push(this.possibleFormats_[o]);else{var a=Math.min(n,r.leadingDigitsPatternCount()-1),r=r.getLeadingDigitsPattern(a);0==e.search(r)&&t.push(this.possibleFormats_[o])}}this.possibleFormats_=t},i18n.phonenumbers.AsYouTypeFormatter.prototype.createFormattingTemplate_=function(e){var t=e.getPatternOrDefault();return-1!=t.indexOf("|")?!1:(t=t.replace(i18n.phonenumbers.AsYouTypeFormatter.CHARACTER_CLASS_PATTERN_,"\\d"),t=t.replace(i18n.phonenumbers.AsYouTypeFormatter.STANDALONE_DIGIT_PATTERN_,"\\d"),this.formattingTemplate_.clear(),e=this.getFormattingTemplate_(t,e.getFormatOrDefault()),0<e.length?(this.formattingTemplate_.append(e),!0):!1)},i18n.phonenumbers.AsYouTypeFormatter.prototype.getFormattingTemplate_=function(e,t){var n="999999999999999".match(e)[0];return n.length<this.nationalNumber_.getLength()?"":(n=n.replace(new RegExp(e,"g"),t),n=n.replace(RegExp("9","g"),this.DIGIT_PLACEHOLDER_))},i18n.phonenumbers.AsYouTypeFormatter.prototype.clear=function(){this.currentOutput_="",this.accruedInput_.clear(),this.accruedInputWithoutFormatting_.clear(),this.formattingTemplate_.clear(),this.lastMatchPosition_=0,this.currentFormattingPattern_="",this.prefixBeforeNationalNumber_.clear(),this.extractedNationalPrefix_="",this.nationalNumber_.clear(),this.ableToFormat_=!0,this.inputHasFormatting_=!1,this.originalPosition_=this.positionToRemember_=0,this.isExpectingCountryCallingCode_=this.isCompleteNumber_=!1,this.possibleFormats_=[],this.shouldAddSpaceAfterNationalPrefix_=!1,this.currentMetadata_!=this.defaultMetadata_&&(this.currentMetadata_=this.getMetadataForRegion_(this.defaultCountry_))},i18n.phonenumbers.AsYouTypeFormatter.prototype.inputDigit=function(e){return this.currentOutput_=this.inputDigitWithOptionToRememberPosition_(e,!1)},i18n.phonenumbers.AsYouTypeFormatter.prototype.inputDigitAndRememberPosition=function(e){return this.currentOutput_=this.inputDigitWithOptionToRememberPosition_(e,!0)},i18n.phonenumbers.AsYouTypeFormatter.prototype.inputDigitWithOptionToRememberPosition_=function(e,t){if(this.accruedInput_.append(e),t&&(this.originalPosition_=this.accruedInput_.getLength()),this.isDigitOrLeadingPlusSign_(e)?e=this.normalizeAndAccrueDigitsAndPlusSign_(e,t):(this.ableToFormat_=!1,this.inputHasFormatting_=!0),!this.ableToFormat_){if(!this.inputHasFormatting_)if(this.attemptToExtractIdd_()){if(this.attemptToExtractCountryCallingCode_())return this.attemptToChoosePatternWithPrefixExtracted_()}else if(this.ableToExtractLongerNdd_())return this.prefixBeforeNationalNumber_.append(i18n.phonenumbers.AsYouTypeFormatter.SEPARATOR_BEFORE_NATIONAL_NUMBER_),this.attemptToChoosePatternWithPrefixExtracted_();return this.accruedInput_.toString()}switch(this.accruedInputWithoutFormatting_.getLength()){case 0:case 1:case 2:return this.accruedInput_.toString();case 3:if(!this.attemptToExtractIdd_())return this.extractedNationalPrefix_=this.removeNationalPrefixFromNationalNumber_(),this.attemptToChooseFormattingPattern_();this.isExpectingCountryCallingCode_=!0;default:if(this.isExpectingCountryCallingCode_)return this.attemptToExtractCountryCallingCode_()&&(this.isExpectingCountryCallingCode_=!1),this.prefixBeforeNationalNumber_.toString()+this.nationalNumber_.toString();if(0<this.possibleFormats_.length){var n=this.inputDigitHelper_(e),i=this.attemptToFormatAccruedDigits_();return 0<i.length?i:(this.narrowDownPossibleFormats_(this.nationalNumber_.toString()),this.maybeCreateNewTemplate_()?this.inputAccruedNationalNumber_():this.ableToFormat_?this.appendNationalNumber_(n):this.accruedInput_.toString())}return this.attemptToChooseFormattingPattern_()}},i18n.phonenumbers.AsYouTypeFormatter.prototype.attemptToChoosePatternWithPrefixExtracted_=function(){return this.ableToFormat_=!0,this.isExpectingCountryCallingCode_=!1,this.possibleFormats_=[],this.attemptToChooseFormattingPattern_()},i18n.phonenumbers.AsYouTypeFormatter.prototype.getExtractedNationalPrefix_=function(){return this.extractedNationalPrefix_},i18n.phonenumbers.AsYouTypeFormatter.prototype.ableToExtractLongerNdd_=function(){if(0<this.extractedNationalPrefix_.length){var e=this.nationalNumber_.toString();this.nationalNumber_.clear(),this.nationalNumber_.append(this.extractedNationalPrefix_),this.nationalNumber_.append(e);var e=this.prefixBeforeNationalNumber_.toString(),t=e.lastIndexOf(this.extractedNationalPrefix_);this.prefixBeforeNationalNumber_.clear(),this.prefixBeforeNationalNumber_.append(e.substring(0,t))}return this.extractedNationalPrefix_!=this.removeNationalPrefixFromNationalNumber_()},i18n.phonenumbers.AsYouTypeFormatter.prototype.isDigitOrLeadingPlusSign_=function(e){return i18n.phonenumbers.PhoneNumberUtil.CAPTURING_DIGIT_PATTERN.test(e)||1==this.accruedInput_.getLength()&&i18n.phonenumbers.PhoneNumberUtil.PLUS_CHARS_PATTERN.test(e)},i18n.phonenumbers.AsYouTypeFormatter.prototype.attemptToFormatAccruedDigits_=function(){for(var e=this.nationalNumber_.toString(),t=this.possibleFormats_.length,n=0;t>n;++n){var i=this.possibleFormats_[n],o=i.getPatternOrDefault();if(new RegExp("^(?:"+o+")$").test(e))return this.shouldAddSpaceAfterNationalPrefix_=i18n.phonenumbers.AsYouTypeFormatter.NATIONAL_PREFIX_SEPARATORS_PATTERN_.test(i.getNationalPrefixFormattingRule()),e=e.replace(new RegExp(o,"g"),i.getFormat()),this.appendNationalNumber_(e)}return""},i18n.phonenumbers.AsYouTypeFormatter.prototype.appendNationalNumber_=function(e){var t=this.prefixBeforeNationalNumber_.getLength();return this.shouldAddSpaceAfterNationalPrefix_&&t>0&&this.prefixBeforeNationalNumber_.toString().charAt(t-1)!=i18n.phonenumbers.AsYouTypeFormatter.SEPARATOR_BEFORE_NATIONAL_NUMBER_?this.prefixBeforeNationalNumber_+i18n.phonenumbers.AsYouTypeFormatter.SEPARATOR_BEFORE_NATIONAL_NUMBER_+e:this.prefixBeforeNationalNumber_+e},i18n.phonenumbers.AsYouTypeFormatter.prototype.getRememberedPosition=function(){if(!this.ableToFormat_)return this.originalPosition_;for(var e=0,t=0,n=this.accruedInputWithoutFormatting_.toString(),i=this.currentOutput_.toString();e<this.positionToRemember_&&t<i.length;)n.charAt(e)==i.charAt(t)&&e++,t++;return t;
},i18n.phonenumbers.AsYouTypeFormatter.prototype.attemptToChooseFormattingPattern_=function(){var e=this.nationalNumber_.toString();return e.length>=i18n.phonenumbers.AsYouTypeFormatter.MIN_LEADING_DIGITS_LENGTH_?(this.getAvailableFormats_(e),e=this.attemptToFormatAccruedDigits_(),0<e.length?e:this.maybeCreateNewTemplate_()?this.inputAccruedNationalNumber_():this.accruedInput_.toString()):this.appendNationalNumber_(e)},i18n.phonenumbers.AsYouTypeFormatter.prototype.inputAccruedNationalNumber_=function(){var e=this.nationalNumber_.toString(),t=e.length;if(t>0){for(var n="",i=0;t>i;i++)n=this.inputDigitHelper_(e.charAt(i));return this.ableToFormat_?this.appendNationalNumber_(n):this.accruedInput_.toString()}return this.prefixBeforeNationalNumber_.toString()},i18n.phonenumbers.AsYouTypeFormatter.prototype.isNanpaNumberWithNationalPrefix_=function(){if(1!=this.currentMetadata_.getCountryCode())return!1;var e=this.nationalNumber_.toString();return"1"==e.charAt(0)&&"0"!=e.charAt(1)&&"1"!=e.charAt(1)},i18n.phonenumbers.AsYouTypeFormatter.prototype.removeNationalPrefixFromNationalNumber_=function(){var e=this.nationalNumber_.toString(),t=0;if(this.isNanpaNumberWithNationalPrefix_())t=1,this.prefixBeforeNationalNumber_.append("1").append(i18n.phonenumbers.AsYouTypeFormatter.SEPARATOR_BEFORE_NATIONAL_NUMBER_),this.isCompleteNumber_=!0;else if(this.currentMetadata_.hasNationalPrefixForParsing()){var n=new RegExp("^(?:"+this.currentMetadata_.getNationalPrefixForParsing()+")"),n=e.match(n);null!=n&&null!=n[0]&&0<n[0].length&&(this.isCompleteNumber_=!0,t=n[0].length,this.prefixBeforeNationalNumber_.append(e.substring(0,t)))}return this.nationalNumber_.clear(),this.nationalNumber_.append(e.substring(t)),e.substring(0,t)},i18n.phonenumbers.AsYouTypeFormatter.prototype.attemptToExtractIdd_=function(){var e=this.accruedInputWithoutFormatting_.toString(),t=new RegExp("^(?:\\"+i18n.phonenumbers.PhoneNumberUtil.PLUS_SIGN+"|"+this.currentMetadata_.getInternationalPrefix()+")"),t=e.match(t);return null!=t&&null!=t[0]&&0<t[0].length?(this.isCompleteNumber_=!0,t=t[0].length,this.nationalNumber_.clear(),this.nationalNumber_.append(e.substring(t)),this.prefixBeforeNationalNumber_.clear(),this.prefixBeforeNationalNumber_.append(e.substring(0,t)),e.charAt(0)!=i18n.phonenumbers.PhoneNumberUtil.PLUS_SIGN&&this.prefixBeforeNationalNumber_.append(i18n.phonenumbers.AsYouTypeFormatter.SEPARATOR_BEFORE_NATIONAL_NUMBER_),!0):!1},i18n.phonenumbers.AsYouTypeFormatter.prototype.attemptToExtractCountryCallingCode_=function(){if(0==this.nationalNumber_.getLength())return!1;var e=new goog.string.StringBuffer,t=this.phoneUtil_.extractCountryCode(this.nationalNumber_,e);return 0==t?!1:(this.nationalNumber_.clear(),this.nationalNumber_.append(e.toString()),e=this.phoneUtil_.getRegionCodeForCountryCode(t),i18n.phonenumbers.PhoneNumberUtil.REGION_CODE_FOR_NON_GEO_ENTITY==e?this.currentMetadata_=this.phoneUtil_.getMetadataForNonGeographicalRegion(t):e!=this.defaultCountry_&&(this.currentMetadata_=this.getMetadataForRegion_(e)),this.prefixBeforeNationalNumber_.append(""+t).append(i18n.phonenumbers.AsYouTypeFormatter.SEPARATOR_BEFORE_NATIONAL_NUMBER_),this.extractedNationalPrefix_="",!0)},i18n.phonenumbers.AsYouTypeFormatter.prototype.normalizeAndAccrueDigitsAndPlusSign_=function(e,t){var n;return e==i18n.phonenumbers.PhoneNumberUtil.PLUS_SIGN?(n=e,this.accruedInputWithoutFormatting_.append(e)):(n=i18n.phonenumbers.PhoneNumberUtil.DIGIT_MAPPINGS[e],this.accruedInputWithoutFormatting_.append(n),this.nationalNumber_.append(n)),t&&(this.positionToRemember_=this.accruedInputWithoutFormatting_.getLength()),n},i18n.phonenumbers.AsYouTypeFormatter.prototype.inputDigitHelper_=function(e){var t=this.formattingTemplate_.toString();if(0<=t.substring(this.lastMatchPosition_).search(this.DIGIT_PATTERN_)){var n=t.search(this.DIGIT_PATTERN_);return e=t.replace(this.DIGIT_PATTERN_,e),this.formattingTemplate_.clear(),this.formattingTemplate_.append(e),this.lastMatchPosition_=n,e.substring(0,this.lastMatchPosition_+1)}return 1==this.possibleFormats_.length&&(this.ableToFormat_=!1),this.currentFormattingPattern_="",this.accruedInput_.toString()},i18n.phonenumbers}.apply(root,arguments)})}(this),define("_assets/templates/helpers/formatPhone",["handlebars","libphonenumber"],function(e,t){function n(e,n){if(!e)return n instanceof Object?"":n;var i,o=t.PhoneNumberUtil.getInstance(),r=e;try{i=o.parseAndKeepRawInput(e,"us"),r=o.formatInOriginalFormat(i,"us")}catch(a){}return r}return e.registerHelper("formatPhone",n),n}),define("hbs!main/components/patient/patientHeaderTemplate",["hbs","handlebars","_assets/templates/helpers/formatDate","_assets/templates/helpers/getAge","_assets/templates/helpers/formatSSN","_assets/templates/helpers/hasPermission","_assets/templates/helpers/ifnull","_assets/templates/helpers/toTitleCase","_assets/templates/helpers/formatPhone"],function(e,t){var n=t.template({1:function(e,t,n,i){var o;return o=t.unless.call(e,null!=e?e.ccowConnected:e,{name:"unless",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=o?o:""},2:function(e,t,n,i){return"warning"},4:function(e,t,n,i){var o,r='                                    <span id="ccowStatus" aria-hidden="true">\n                                        ';return o=t["if"].call(e,null!=e?e.ccowConnected:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(7,i),data:i}),null!=o&&(r+=o),r+"\n                                    </span>\n"},5:function(e,t,n,i){return'<i class="fa fa-chain"></i>'},7:function(e,t,n,i){return'<i class="fa fa-chain-broken"></i>'},9:function(e,t,n,i){return'                <span class="label label-danger cwadLabel" data-cwadIdentifier="C" aria-expanded="false" aria-label="Crisis Notes button, 1 of 5, press enter for details," role="button" tabindex="0">C</span>\n'},11:function(e,t,n,i){return'                <span class="label label-default cwadLabel" data-cwadIdentifier="disabled">C</span>\n'},13:function(e,t,n,i){return'                <span class="label label-danger cwadLabel" data-cwadIdentifier="W" aria-expanded="false" aria-label="Warnings button, 2 of 5, press enter for details," role="button" tabindex="0">W</span>\n'},15:function(e,t,n,i){return'                <span class="label label-default cwadLabel" data-cwadIdentifier="disabled">W</span>\n'},17:function(e,t,n,i){return'                <span class="label label-danger cwadLabel" data-cwadIdentifier="A" aria-expanded="false" aria-label="Allergies button, 3 of 5, press enter for details," role="button" tabindex="0">A</span>\n'},19:function(e,t,n,i){return'                <span class="label label-default cwadLabel" data-cwadIdentifier="disabled">A</span>\n'},21:function(e,t,n,i){return'                <span class="label label-danger cwadLabel" data-cwadIdentifier="D" aria-expanded="false" aria-label="Directives button, 4 of 5, press enter for details," role="button" tabindex="0">D</span>\n'},23:function(e,t,n,i){return'                <span class="label label-default cwadLabel" data-cwadIdentifier="disabled">D</span>\n'},25:function(e,t,n,i){return'                <span class="label label-danger cwadLabel" data-cwadIdentifier="F" aria-expanded="false" aria-label="Patient Flags button, 5 of 5, press enter for details," role="button" tabindex="0">F</span>\n'},27:function(e,t,n,i){return'                <span class="label label-default cwadLabel" data-cwadIdentifier="disabled">F</span>\n'},29:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression;return'        <div id="patientDemographic-visitInfo">\n            <div type="button" id="setVisitContextBtn" tabindex="0" title="Press enter to edit visit information">\n                <div>\n                    <i class="fa fa-map-marker text-muted" aria-hidden="true"></i>\n                    <h4>Current Encounter</h4>\n                    <div>\n                        <span class="text-muted">Location:</span>\n                        <span class="visit-info">'+a((t.ifnull||e&&e.ifnull||r).call(e,null!=(o=null!=e?e.visit:e)?o.locationDisplayName:o,"No visit set",{name:"ifnull",hash:{},data:i}))+'</span>\n                    </div>\n                    <div>\n                        <span class="text-muted">Provider:</span>\n                        <span class="visit-info">'+a((t.ifnull||e&&e.ifnull||r).call(e,null!=(o=null!=(o=null!=e?e.visit:e)?o.selectedProvider:o)?o.name:o,"unassigned",{name:"ifnull",hash:{},data:i}))+"</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n"},31:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression;return'                        <div class="inpatient" id="inpatientProviders">\n                            <div id="inpatientHeading">\n                                <span class="inpatientAttending-summary"><span class="text-muted">Inpatient Attending / Provider:</span></span>\n                            </div>\n                            <div>'+a((t.toTitleCase||e&&e.toTitleCase||r).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.attendingProvider:o)?o.name:o,!0,"Unassigned",{name:"toTitleCase",hash:{},data:i}))+" / "+a((t.toTitleCase||e&&e.toTitleCase||r).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.inpatientProvider:o)?o.name:o,!0,"Unassigned",{name:"toTitleCase",hash:{},data:i}))+"</div>\n                            <div></div>\n                        </div>\n                        "},33:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression;return'\n                        <div class="mhTreatment-summary row-display border-top-thin">\n                            <div id="mhTeam">\n                                <span class="text-muted">Mental Health:</span> '+a((t.toTitleCase||e&&e.toTitleCase||r).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.mhCoordinator:o)?o.mhTeam:o,!0,"Unassigned",{name:"toTitleCase",hash:{},data:i}))+'\n                            </div>\n                            <div id="mhProvider">'+a((t.toTitleCase||e&&e.toTitleCase||r).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.mhCoordinator:o)?o.name:o,!0,"Unassigned",{name:"toTitleCase",hash:{},data:i}))+"</div>\n                            <div></div>\n                        </div>\n"},35:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression;return'                                    <tr class="inpatient-attending-provider">\n                                        <td class="renderable">Inpatient Attending Provider</td>\n                                        <td class="renderable">'+a((t.toTitleCase||e&&e.toTitleCase||r).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.attendingProvider:o)?o.name:o,!0,"Unassigned",{name:"toTitleCase",hash:{},data:i}))+'</td>\n                                        <td class="renderable">'+a((t.formatPhone||e&&e.formatPhone||r).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.attendingProvider:o)?o.analogPager:o,"not specified",{name:"formatPhone",hash:{},data:i}))+'</td>\n                                        <td class="renderable">'+a((t.formatPhone||e&&e.formatPhone||r).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.attendingProvider:o)?o.digitalPager:o,"not specified",{name:"formatPhone",hash:{},data:i}))+'</td>\n                                        <td class="renderable">'+a((t.formatPhone||e&&e.formatPhone||r).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.attendingProvider:o)?o.officePhone:o,"not specified",{name:"formatPhone",hash:{},data:i}))+'</td>\n                                    </tr>\n                                    <tr class="inpatient-provider">\n                                        <td class="renderable">Inpatient Provider</td>\n                                        <td class="renderable">'+a((t.toTitleCase||e&&e.toTitleCase||r).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.inpatientProvider:o)?o.name:o,!0,"Unassigned",{name:"toTitleCase",hash:{},data:i}))+'</td>\n                                        <td class="renderable">'+a((t.formatPhone||e&&e.formatPhone||r).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.inpatientProvider:o)?o.analogPager:o,"not specified",{name:"formatPhone",hash:{},data:i}))+'</td>\n                                        <td class="renderable">'+a((t.formatPhone||e&&e.formatPhone||r).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.inpatientProvider:o)?o.digitalPager:o,"not specified",{name:"formatPhone",hash:{},data:i}))+'</td>\n                                        <td class="renderable">'+a((t.formatPhone||e&&e.formatPhone||r).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.inpatientProvider:o)?o.officePhone:o,"not specified",{name:"formatPhone",hash:{},data:i}))+"</td>\n                                    </tr>\n"},37:function(e,t,n,i){var o,r=t.helperMissing,a="";return o=(t.hasPermission||e&&e.hasPermission||r).call(e,"add-patient-problem|add-patient-allergy|add-patient-vital",{name:"hasPermission",hash:{},fn:this.program(38,i),inverse:this.noop,data:i}),null!=o&&(a+=o),a+'        <div id="patientDemographic-notes" class="dropdown">\n            <button id="notes-list-btn" type="button" class="btn patient-header-button" data-toggle="dropdown" title="Press enter to open notes panel, press enter again to close it">\n                Notes\n            </button>\n            <div id="notes-tray-dropdown-menu" class="dropdown-menu notes-slider">\n                <form id="notes-tray" tabIndex="1" class="note-form-height" data-toggle="popover"></form>\n            </div>\n        </div>\n'},38:function(e,t,n,i){var o,r=t.helperMissing,a='        <div id="patientDemographic-newObservation">\n            <button id="new-observation" type="button" class="btn patient-header-button" data-toggle="dropdown" title="Press enter to open observations panel, press enter again to close it">\n                <i class="fa fa-plus-circle"></i> Observation\n            </button>\n            <div class="dropdown-menu new-order-dropdown">\n                <div id="sidebar-wrapper">\n                    <ul class="sidebar-nav">\n                        <li class="panel-close">\n                            <div class="toggle" data-toggle="collapse" data-target="#toggle" aria-expanded="false" aria-controls="toggle">\n                                <i class="fa fa-remove"></i>\n                            </div>\n                        </li>\n                        <div class="clearfix"></div>\n';return o=(t.hasPermission||e&&e.hasPermission||r).call(e,"add-patient-problem",{name:"hasPermission",hash:{},fn:this.program(39,i),inverse:this.noop,data:i}),null!=o&&(a+=o),a+=" ",o=(t.hasPermission||e&&e.hasPermission||r).call(e,"add-patient-allergy",{name:"hasPermission",hash:{},fn:this.program(41,i),inverse:this.noop,data:i}),null!=o&&(a+=o),a+=" ",o=(t.hasPermission||e&&e.hasPermission||r).call(e,"add-patient-vital",{name:"hasPermission",hash:{},fn:this.program(43,i),inverse:this.noop,data:i}),null!=o&&(a+=o),a+'                        <li type="button" id="addSignature" class="applet-add-button" tabindex="0" title="Add Signature">\n                            <div class="center-block text-center panel-title">Sign</div>\n                            <span class="fa fa-edit">\n                                <span class="sr-only">Add Signature</span>\n                            </span>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n'},39:function(e,t,n,i){return'                        <li type="button" id="addActiveProblem" class="applet-add-button" tabindex="0" title="Add Item">\n                            <div class="center-block text-center panel-title">Active Problem</div>\n                            <span class="fa fa-frown-o">\n                                <span class="sr-only">Add Active Problem</span>\n                            </span>\n                        </li>\n                        '},41:function(e,t,n,i){return'\n                        <li type="button" id="addAllergy" class="applet-add-button" tabindex="0" title="Add Item">\n                            <div class="center-block text-center panel-title">Allergy</div>\n                            <span class="fa fa-pagelines">\n                                <span class="sr-only">Add Allergy</span>\n                            </span>\n                        </li>\n                        '},43:function(e,t,n,i){return'\n                        <li type="button" id="addVitals" class="applet-add-button" tabindex="0" title="Add Item">\n                            <div class="center-block text-center panel-title">Vitals</div>\n                            <span class="fa fa-heart">\n                                <span class="sr-only">Add Vitals</span>\n                            </span>\n                        </li>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d='<div class="panel panel-default bg-info">\n    <div class="panel-heading">\n        <div id="patientDemographic-patientInfo" class="dropdown ';return o=t["if"].call(e,null!=e?e.useCcow:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+='">\n            <form>\n                <div id="patientDemographic-patientInfo-detail" class="media" role="button" data-toggle="dropdown" tabindex="0" title="Press enter to display extended patient information">\n                    <div class="default-patient-male">\n                        <img src=\''+l((r=null!=(r=t.patientImage||(null!=e?e.patientImage:e))?r:s,typeof r===a?r.call(e,{name:"patientImage",hash:{},data:i}):r))+'\' class="center-block" width="52" height="52" title="'+l((r=null!=(r=t.displayName||(null!=e?e.displayName:e))?r:s,typeof r===a?r.call(e,{name:"displayName",hash:{},data:i}):r))+' Image">\n                    </div>\n                    <div class="media-body">\n                        <div class="container-fluid">\n                            <div class="row">\n                                <div class="col-sm-12">\n                                     <h4 class="media-heading">\n                                        <span class="sr-only">Patient Name: </span><span class="pull-left">'+l((r=null!=(r=t.displayName||(null!=e?e.displayName:e))?r:s,typeof r===a?r.call(e,{name:"displayName",hash:{},data:i}):r))+'</span>\n                                        <span class="sr-only">Patient Status: </span><span class="pull-right bold">'+l((r=null!=(r=t.patientStatusClass||(null!=e?e.patientStatusClass:e))?r:s,typeof r===a?r.call(e,{name:"patientStatusClass",hash:{},data:i}):r))+'</span>\n                                    </h4>\n                                </div>\n                            </div>\n                            <div class="row">\n                                <div class="col-lg-6 patient-data">\n                                    <span class="sr-only">Date Of Birth: </span><span id="patientDemographic-dob-label" class="text-muted" aria-hidden="true">DOB:</span> <span id="patientDemographic-patientInfo-dob">'+l((t.formatDate||e&&e.formatDate||s).call(e,null!=e?e.birthDate:e,{name:"formatDate",hash:{},data:i}))+" ("+l((t.getAge||e&&e.getAge||s).call(e,null!=e?e.birthDate:e,{name:"getAge",hash:{},data:i}))+'y)</span>\n                                </div>\n                                <div class="col-lg-6 patient-data">\n                                    <span class="sr-only">Social Security Number: </span><span id="patientDemographic-ssn-label" class="text-muted" aria-hidden="true">SSN:</span> <span id="patientDemographic-patientInfo-ssn">'+l((t.formatSSN||e&&e.formatSSN||s).call(e,null!=e?e.ssn:e,!1,{name:"formatSSN",hash:{},data:i}))+'</span>\n                                </div>\n                            </div>\n                            <div class="row">\n                                <div class="col-sm-10 patient-data">\n                                    <span id="patientDemographic-gender-label" class="text-muted">Gender:</span><span id="patientDemographic-patientInfo-gender"> '+l((r=null!=(r=t.genderName||(null!=e?e.genderName:e))?r:s,typeof r===a?r.call(e,{name:"genderName",hash:{},data:i}):r))+'</span>\n                                </div>\n                                <div class="col-sm-2 text-right">\n',o=t["if"].call(e,null!=e?e.useCcow:e,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+='                                    <i class="fa fa-caret-right text-muted" aria-hidden="true"></i>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="dropdown-menu well well-sm patient-info-dropdown" role="menu" aria-labelledby="patientDemographic-patientInfo-detail">\n                    <div role="presentation">\n                        <div role="menuitem" tabindex="0">\n                            <div id="patient-header-demographic-details" class="container-fluid"></div>\n                        </div>\n                    </div>\n                </div>\n            </form>\n        </div>\n        <div id="patientDemographic-cwad">\n            <h4 tooltip-data-key=\'postings\'>Postings</h4>\n            <span class="cwadfToolTip" data-toggle="tooltip" data-html="true" data-placement="left" title="Crisis Notes">\n',o=t["if"].call(e,null!=e?e.crisisNotes:e,{name:"if",hash:{},fn:this.program(9,i),inverse:this.program(11,i),data:i}),null!=o&&(d+=o),d+='            </span>\n            <span class="cwadfToolTip" data-toggle="tooltip" data-html="true" data-placement="bottom" title="Warnings">\n',o=t["if"].call(e,null!=e?e.flags:e,{name:"if",hash:{},fn:this.program(13,i),inverse:this.program(15,i),data:i}),null!=o&&(d+=o),d+='            </span>\n            <span class="cwadfToolTip" data-toggle="tooltip" data-html="true" data-placement="top" title="Allergies">\n',o=t["if"].call(e,null!=e?e.allergies:e,{name:"if",hash:{},fn:this.program(17,i),inverse:this.program(19,i),data:i}),null!=o&&(d+=o),d+='            </span>\n            <span class="cwadfToolTip" data-toggle="tooltip" data-html="true" data-placement="bottom" title="Directives">\n',o=t["if"].call(e,null!=e?e.directives:e,{name:"if",hash:{},fn:this.program(21,i),inverse:this.program(23,i),data:i}),null!=o&&(d+=o),d+='            </span>\n            <span class="cwadfToolTip" data-toggle="tooltip" data-html="true" data-placement="right" title="Patient Flags">\n',o=t["if"].call(e,null!=e?e.patientflags:e,{name:"if",hash:{},fn:this.program(25,i),inverse:this.program(27,i),data:i}),null!=o&&(d+=o),d+='            </span>\n            <div id="cwad-details" class="well well-sm hidden" data-current-cwad="none"></div>\n        </div>\n',o=(t.hasPermission||e&&e.hasPermission||s).call(e,"edit-patient-visit",{name:"hasPermission",hash:{},fn:this.program(29,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+='        <div id="patientDemographic-providerInfo" class="dropdown">\n            <div data-toggle="dropdown" class="providerInfo-container">\n                <div role="button" tabindex="0" id="patientDemographic-providerInfoSummary" title="Press enter to display extended provider information">\n                    <h4 class="sr-only">Basic provider information</h4>\n                    <div class="provider-info-initial-data">\n                        <div class="primaryProvider-summary">\n                            <div id="primaryCareTeam">\n                                <span class="text-muted">Primary Care:</span> '+l((t.toTitleCase||e&&e.toTitleCase||s).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.team:o)?o.name:o,!0,"Unassigned",{name:"toTitleCase",hash:{},data:i}))+'\n                            </div>\n                            <div id="pimaryCareProviders">'+l((t.toTitleCase||e&&e.toTitleCase||s).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.primaryProvider:o)?o.name:o,!0,"Unassigned",{name:"toTitleCase",hash:{},data:i}))+" / "+l((t.toTitleCase||e&&e.toTitleCase||s).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.associateProvider:o)?o.name:o,!0,"Unassigned",{name:"toTitleCase",hash:{},data:i}))+'</div>\n                            <div id="primaryCarePhone">'+l((t.formatPhone||e&&e.formatPhone||s).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.team:o)?o.phone:o,"Unassigned",{name:"formatPhone",hash:{},data:i}))+"</div>\n                        </div>\n",o=t["if"].call(e,null!=e?e.inPatient:e,{name:"if",hash:{},fn:this.program(31,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+=" ",o=t["if"].call(e,null!=e?e.hasMhInfo:e,{name:"if",hash:{},fn:this.program(33,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+='                    </div>\n                </div>\n                <i class="fa fa-caret-right text-muted"></i>\n            </div>\n            <div class="dropdown-menu well well-sm patient-info-dropdown" aria-labelledby="patientDemographic-providerInfoSummary">\n                <form role="presentation">\n                    <div class="container-fluid" tabindex="0" role="menuitem">\n                        <div class="row">\n                            <table class="table renderable">\n                                <caption class="sr-only">Extended provider information</caption>\n                                <thead>\n                                    <tr>\n                                        <th class="renderable" scope="column">Provider Title</th>\n                                        <th class="renderable" scope="column">Name</th>\n                                        <th class="renderable" scope="column">Analog Pager</th>\n                                        <th class="renderable" scope="column">Digital Pager</th>\n                                        <th class="renderable" scope="column">Office Phone</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    <tr class="primary-provider">\n                                        <td class="renderable">Primary Care Provider</td>\n                                        <td class="renderable">'+l((t.toTitleCase||e&&e.toTitleCase||s).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.primaryProvider:o)?o.name:o,!0,"Unassigned",{name:"toTitleCase",hash:{},data:i}))+'</td>\n                                        <td class="renderable">'+l((t.formatPhone||e&&e.formatPhone||s).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.primaryProvider:o)?o.analogPager:o,"not specified",{name:"formatPhone",hash:{},data:i}))+'</td>\n                                        <td class="renderable">'+l((t.formatPhone||e&&e.formatPhone||s).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.primaryProvider:o)?o.digitalPager:o,"not specified",{name:"formatPhone",hash:{},data:i}))+'</td>\n                                        <td class="renderable">'+l((t.formatPhone||e&&e.formatPhone||s).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.primaryProvider:o)?o.officePhone:o,"not specified",{name:"formatPhone",hash:{},data:i}))+'</td>\n                                    </tr>\n                                    <tr class="primary-assoc-provider">\n                                        <td class="renderable">Primary Care Assoc Provider</td>\n                                        <td class="renderable">'+l((t.toTitleCase||e&&e.toTitleCase||s).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.associateProvider:o)?o.name:o,!0,"Unassigned",{name:"toTitleCase",hash:{},data:i}))+'</td>\n                                        <td class="renderable">'+l((t.formatPhone||e&&e.formatPhone||s).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.associateProvider:o)?o.analogPager:o,"not specified",{name:"formatPhone",hash:{},data:i}))+'</td>\n                                        <td class="renderable">'+l((t.formatPhone||e&&e.formatPhone||s).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.associateProvider:o)?o.digitalPager:o,"not specified",{name:"formatPhone",hash:{},data:i}))+'</td>\n                                        <td class="renderable">'+l((t.formatPhone||e&&e.formatPhone||s).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.associateProvider:o)?o.officePhone:o,"not specified",{name:"formatPhone",hash:{},data:i}))+"</td>\n                                    </tr>\n",o=t["if"].call(e,null!=e?e.inPatient:e,{name:"if",hash:{},fn:this.program(35,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+='                                    <tr class="mh-treatment-team">\n                                        <td class="renderable">MH Treatment Team</td>\n                                        <td class="renderable">'+l((t.toTitleCase||e&&e.toTitleCase||s).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.mhCoordinator:o)?o.mhTeam:o,!0,"Unassigned",{name:"toTitleCase",hash:{},data:i}))+'</td>\n                                        <!-- Mh teams don\'t have pagers-->\n                                        <td class="renderable">not specified</td>\n                                        <td class="renderable">not specified</td>\n                                        <td class="renderable">'+l((t.formatPhone||e&&e.formatPhone||s).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.mhCoordinator:o)?o.mhTeamOfficePhone:o,"not specified",{name:"formatPhone",hash:{},data:i}))+'</td>\n                                    </tr>\n                                    <tr class="mh-coordinator">\n                                        <td class="renderable">MH Treatment Coordinator</td>\n                                        <td class="renderable">'+l((t.toTitleCase||e&&e.toTitleCase||s).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.mhCoordinator:o)?o.name:o,!0,"Unassigned",{name:"toTitleCase",hash:{},data:i}))+'</td>\n                                        <td class="renderable">'+l((t.formatPhone||e&&e.formatPhone||s).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.mhCoordinator:o)?o.analogPager:o,"not specified",{name:"formatPhone",hash:{},data:i}))+'</td>\n                                        <td class="renderable">'+l((t.formatPhone||e&&e.formatPhone||s).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.mhCoordinator:o)?o.digitalPager:o,"not specified",{name:"formatPhone",hash:{},data:i}))+'</td>\n                                        <td class="renderable">'+l((t.formatPhone||e&&e.formatPhone||s).call(e,null!=(o=null!=(o=null!=e?e.teamInfo:e)?o.mhCoordinator:o)?o.officePhone:o,"not specified",{name:"formatPhone",hash:{},data:i}))+"</td>\n                                    </tr>\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </form>\n            </div>\n        </div>\n",o=t["if"].call(e,null!=e?e.isInVista:e,{name:"if",hash:{},fn:this.program(37,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+'        <!--\n        <div id="patientDemographic-tasks" class="flex-stretch">\n            <button id="notes-list-btn" type="button" class="btn patient-header-button">\n                Tasks\n            </button>\n        </div>\n        -->\n    </div>\n</div>\n'},useData:!0});return t.registerPartial("main/components/patient/patientHeaderTemplate",n),n}),define("hbs!main/components/patient/detail/emergencyContactTemplate",["hbs","handlebars","_assets/templates/helpers/formatPhone"],function(e,t){var n=t.template({1:function(e,t,n,i){return'<span> <i class="fa fa-exclamation-circle demographic-subgroup-icon"></i></span><span class="sr-only">Discrepancies found</span>'},3:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div id="demo-em-line1" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line1:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line1:o)?o.value:o,e))+"</div>";
},5:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div id="demo-em-line2" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line2:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line2:o)?o.value:o,e))+"</div>"},7:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div id="demo-em-line3" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line3:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line3:o)?o.value:o,e))+"</div>"},9:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div id="demo-em-line4" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line4:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line4:o)?o.value:o,e))+"</div>"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s=t.helperMissing,l='<div class="demographic-group-header">Emergency Contact</div>\n<div class="demographic-group-content">\n	<div id="demo-em-name" class="text-muted demographic-header"><span>'+a(r(null!=(o=null!=(o=null!=e?e.nameRel:e)?o.relationship:o)?o.value:o,e))+"&nbsp;</span>";return o=t["if"].call(e,null!=(o=null!=e?e.nameRel:e)?o.diff:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='</div>\n	<div id="demo-em-name-val" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.nameRel:e)?o.name:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.nameRel:e)?o.name:o)?o.value:o,e))+'</div>\n	<div class=\'demographic-group-divider\'></div>\n	<div id="demo-em-hphone" class="text-muted demographic-header"><span>Home</span>',o=t["if"].call(e,null!=(o=null!=e?e.hPhone:e)?o.diff:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='</div>\n	<div id="demo-em-hphone-val" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.hPhone:e)?o.phone:o)?o.diff:o,e))+'">'+a((t.formatPhone||e&&e.formatPhone||s).call(e,null!=(o=null!=(o=null!=e?e.hPhone:e)?o.phone:o)?o.value:o,{name:"formatPhone",hash:{},data:i}))+'</div> \n	<div class=\'demographic-group-divider\'></div>\n	<div id="demo-em-wphone" class="text-muted demographic-header"><span>Work</span>',o=t["if"].call(e,null!=(o=null!=e?e.wPhone:e)?o.diff:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='</div>\n	<div id="demo-em-wphone-val" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.wPhone:e)?o.phone:o)?o.diff:o,e))+'">'+a((t.formatPhone||e&&e.formatPhone||s).call(e,null!=(o=null!=(o=null!=e?e.wPhone:e)?o.phone:o)?o.value:o,{name:"formatPhone",hash:{},data:i}))+'</div>\n	<div class=\'demographic-group-divider\'></div>\n	<div id="demo-em-address" class="text-muted demographic-header"><span>Address</span>',o=t["if"].call(e,null!=(o=null!=e?e.address:e)?o.diff:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+="</div>\n	<div>\n	   ",o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.address:e)?o.line1:o)?o.value:o,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+="\n	   ",o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.address:e)?o.line2:o)?o.value:o,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+="\n	   ",o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.address:e)?o.line3:o)?o.value:o,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+="\n	   ",o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.address:e)?o.line4:o)?o.value:o,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+"\n	</div>\n</div>"},useData:!0});return t.registerPartial("main/components/patient/detail/emergencyContactTemplate",n),n}),define("hbs!main/components/patient/detail/nokContactTemplate",["hbs","handlebars","_assets/templates/helpers/formatPhone"],function(e,t){var n=t.template({1:function(e,t,n,i){return'<span> <i class="fa fa-exclamation-circle demographic-subgroup-icon"></i></span><span class="sr-only">Discrepancies found</span>'},3:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div id="demo-nok-line1" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line1:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line1:o)?o.value:o,e))+"</div>"},5:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div id="demo-nok-line2" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line2:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line2:o)?o.value:o,e))+"</div>"},7:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div id="demo-nok-line3" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line3:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line3:o)?o.value:o,e))+"</div>"},9:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div id="demo-nok-line4" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line4:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line4:o)?o.value:o,e))+"</div>"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s=t.helperMissing,l='\n<div class="demographic-group-header">Next of Kin</div>\n<div class="demographic-group-content">\n	<div id="demo-nok-name" class="text-muted demographic-header"><span>'+a(r(null!=(o=null!=(o=null!=e?e.nameRel:e)?o.relationship:o)?o.value:o,e))+"&nbsp;</span>";return o=t["if"].call(e,null!=(o=null!=e?e.nameRel:e)?o.diff:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='</div>\n	<div id="demo-nok-name-val" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.nameRel:e)?o.name:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.nameRel:e)?o.name:o)?o.value:o,e))+'</div>\n	<div class=\'demographic-group-divider\'></div>\n	<div id="demo-nok-hphone" class="text-muted demographic-header"><span>Home</span>',o=t["if"].call(e,null!=(o=null!=e?e.hPhone:e)?o.diff:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='</div> \n	<div  id="demo-nok-hphone-val" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.hPhone:e)?o.phone:o)?o.diff:o,e))+'">'+a((t.formatPhone||e&&e.formatPhone||s).call(e,null!=(o=null!=(o=null!=e?e.hPhone:e)?o.phone:o)?o.value:o,{name:"formatPhone",hash:{},data:i}))+'</div>\n	<div class=\'demographic-group-divider\'></div>\n	<div id="demo-nok-wphone" class="text-muted demographic-header"><span>Work</span>',o=t["if"].call(e,null!=(o=null!=e?e.wPhone:e)?o.diff:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='</div>\n	<div  id="demo-nok-wphone-val" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.wPhone:e)?o.phone:o)?o.diff:o,e))+'">'+a((t.formatPhone||e&&e.formatPhone||s).call(e,null!=(o=null!=(o=null!=e?e.wPhone:e)?o.phone:o)?o.value:o,{name:"formatPhone",hash:{},data:i}))+'</div>\n	<div class=\'demographic-group-divider\'></div>\n	<div id="demo-nok-address" class="text-muted demographic-header"><span>Address</span>',o=t["if"].call(e,null!=(o=null!=e?e.address:e)?o.diff:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+="</div>\n	<div>\n	   ",o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.address:e)?o.line1:o)?o.value:o,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+="\n	   ",o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.address:e)?o.line2:o)?o.value:o,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+="\n	   ",o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.address:e)?o.line3:o)?o.value:o,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+="\n	   ",o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.address:e)?o.line4:o)?o.value:o,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+"\n	</div>\n</div>\n"},useData:!0});return t.registerPartial("main/components/patient/detail/nokContactTemplate",n),n}),define("hbs!main/components/patient/detail/patientEmailTemplate",["hbs","handlebars"],function(e,t){var n=t.template({1:function(e,t,n,i){return'<div id="demo-email" class="demographic-header text-muted"><span>&nbsp;</span><span> <i class="fa fa-exclamation-circle demographic-subgroup-icon"></i></span><span class="sr-only">Discrepancies found</span></div>'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s='<div class="demographic-group-header">Email</div>\n<div class="demographic-group-content">\n';return o=t["if"].call(e,null!=(o=null!=e?e.email:e)?o.diff:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(s+=o),s+'\n	<div id="demo-email-val" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=e?e.email:e)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.email:e)?o.email:o)?o.value:o,e))+"&nbsp;</div>\n</div>"},useData:!0});return t.registerPartial("main/components/patient/detail/patientEmailTemplate",n),n}),define("hbs!main/components/patient/detail/patientPhoneTemplate",["hbs","handlebars","_assets/templates/helpers/formatPhone"],function(e,t){var n=t.template({1:function(e,t,n,i){return'<span> <i class="fa fa-exclamation-circle demographic-subgroup-icon"></i></span><span class="sr-only">Discrepancies found</span>'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s=t.helperMissing,l='<div class="demographic-group-header">Phone</div>\n<div class="demographic-group-content">\n	<div id="demo-home-phone" class="demographic-header text-muted" ><span>Home</span>';return o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.hPhone:e)?o.phone:o)?o.diff:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='</div>\n	    <div id="demo-home-phone-val" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.hPhone:e)?o.phone:o)?o.diff:o,e))+'">'+a((t.formatPhone||e&&e.formatPhone||s).call(e,null!=(o=null!=(o=null!=e?e.hPhone:e)?o.phone:o)?o.value:o,{name:"formatPhone",hash:{},data:i}))+'</div>\n	<div class=\'demographic-group-divider\'></div>\n	<div id="demo-cell-phone" class="demographic-header text-muted"><span>Cell</span>',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.cPhone:e)?o.phone:o)?o.diff:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='</div>\n	    <div  id="demo-cell-phone-val" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.cPhone:e)?o.phone:o)?o.diff:o,e))+'">'+a((t.formatPhone||e&&e.formatPhone||s).call(e,null!=(o=null!=(o=null!=e?e.cPhone:e)?o.phone:o)?o.value:o,{name:"formatPhone",hash:{},data:i}))+'</div>\n	<div class=\'demographic-group-divider\'></div>\n	<div id="demo-work-phone" class="demographic-header text-muted"><span>Work</span>',o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.wPhone:e)?o.phone:o)?o.diff:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+'</div>\n	    <div id="demo-work-phone-val" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.wPhone:e)?o.phone:o)?o.diff:o,e))+'">'+a((t.formatPhone||e&&e.formatPhone||s).call(e,null!=(o=null!=(o=null!=e?e.wPhone:e)?o.phone:o)?o.value:o,{name:"formatPhone",hash:{},data:i}))+"</div>\n</div>"},useData:!0});return t.registerPartial("main/components/patient/detail/patientPhoneTemplate",n),n}),define("hbs!main/components/patient/detail/patientHeaderDetailTemplate",["hbs","handlebars","_assets/templates/helpers/compare"],function(e,t){var n=t.template({1:function(e,t,n,i){var o,r=t.helperMissing,a="";return o=(t.compare||e&&e.compare||r).call(e,null!=e?e.ccowStatus:e,"Connected",{name:"compare",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=o&&(a+=o),o=(t.compare||e&&e.compare||r).call(e,null!=e?e.ccowStatus:e,"Suspended",{name:"compare",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=o&&(a+=o),a},2:function(e,t,n,i){return'        <h4>Patient Context</h4>\n        <div id="ccowActions">\n            <button id="leaveContext" class="btn btn-default">Leave Context</button>\n        </div>\n'},4:function(e,t,n,i){return'        <h4>Patient Context</h4>\n        <div id="ccowActions">\n            <button id="joinContext" class="btn btn-default">Rejoin Context</button>\n        </div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r='<div id="pt-header-detail-col-one" class="col-md-3">\n    <div class="row">\n        <div class="col-xs-12" id="pt-header-pt-phone"></div>\n    </div>\n    <div class="row">\n        <div class="col-xs-12" id="pt-header-pt-address"></div>\n    </div>\n    <div class="row">\n        <div class="col-xs-12" id="pt-header-email"></div>\n    </div>\n</div>\n<div id="pt-header-detail-col-two" class="col-md-3">\n    <div class="row">\n        <div class="col-xs-12" id="pt-header-em-contact"></div>\n    </div>\n    <div class="row">\n        <div class="col-xs-12" id="pt-header-nok-contact"></div>\n    </div>\n</div>\n<div id="pt-header-detail-col-three" class="col-md-3">\n    <div class="row">\n        <div class="col-xs-12" id="pt-header-em-ins"></div>\n    </div>\n</div>\n<div id="pt-header-detail-col-four" class="col-md-3">\n    <div class="row">\n        <div class="col-xs-12" id="pt-header-em-misc"></div>\n    </div>\n</div>\n';return o=t["if"].call(e,null!=e?e.useCcow:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(r+=o),r},useData:!0});return t.registerPartial("main/components/patient/detail/patientHeaderDetailTemplate",n),n}),define("hbs!main/components/patient/detail/patientAddressInfoTemplate",["hbs","handlebars"],function(e,t){var n=t.template({1:function(e,t,n,i){return'<span> <i class="fa fa-exclamation-circle demographic-subgroup-icon"></i></span><span class="sr-only">Discrepancies found</span>'},3:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div id="demo-haddress-line2" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.hAddress:e)?o.line2:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.hAddress:e)?o.line2:o)?o.value:o,e))+"</div> "},5:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div id="demo-haddress-line3" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.hAddress:e)?o.line3:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.hAddress:e)?o.line3:o)?o.value:o,e))+"</div> "},7:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div id="demo-haddress-line4" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.hAddress:e)?o.line4:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.hAddress:e)?o.line4:o)?o.value:o,e))+"</div> "},9:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div id="demo-taddress-line2" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.tAddress:e)?o.line2:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.tAddress:e)?o.line2:o)?o.value:o,e))+"</div> "},11:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div id="demo-taddress-line3" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.tAddress:e)?o.line3:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.tAddress:e)?o.line3:o)?o.value:o,e))+"</div> "},13:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div id="demo-taddress-line4" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.tAddress:e)?o.line4:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.tAddress:e)?o.line4:o)?o.value:o,e))+"</div> "},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s='<div class="demographic-group-header">Addresses</div>\n<div class="demographic-group-content">\n<div id="demo-home-address" class="demographic-header text-muted"><span>Home</span>';return o=t["if"].call(e,null!=(o=null!=e?e.hAddress:e)?o.diff:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(s+=o),s+='</div>\n    <div>\n        <div id="demo-haddress-line1" class="demographic-data" data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.hAddress:e)?o.line1:o)?o.diff:o,e))+'"> '+a(r(null!=(o=null!=(o=null!=e?e.hAddress:e)?o.line1:o)?o.value:o,e))+"</div>\n        ",o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.hAddress:e)?o.line2:o)?o.value:o,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(s+=o),s+="\n        ",o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.hAddress:e)?o.line3:o)?o.value:o,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=o&&(s+=o),s+="\n        ",o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.hAddress:e)?o.line4:o)?o.value:o,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=o&&(s+=o),s+='\n    </div>\n    <div class=\'demographic-group-divider\'></div>\n    <div id="demo-temp-address" class="demographic-header text-muted"><span>Temporary</span>',o=t["if"].call(e,null!=(o=null!=e?e.tAddress:e)?o.diff:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(s+=o),s+='</div>\n    <div>\n        <div id="demo-taddress-line1" class="demographic-data" data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.tAddress:e)?o.line1:o)?o.diff:o,e))+'"> '+a(r(null!=(o=null!=(o=null!=e?e.tAddress:e)?o.line1:o)?o.value:o,e))+"</div>\n        ",o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.tAddress:e)?o.line2:o)?o.value:o,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=o&&(s+=o),s+="\n        ",o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.tAddress:e)?o.line3:o)?o.value:o,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=o&&(s+=o),s+="\n        ",o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.tAddress:e)?o.line4:o)?o.value:o,{name:"if",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=o&&(s+=o),s+"\n    </div>\n</div>\n\n"},useData:!0});return t.registerPartial("main/components/patient/detail/patientAddressInfoTemplate",n),n}),define("_assets/templates/helpers/toLowerCase",["handlebars"],function(e,t){function n(e){return e?e.toLowerCase():null}return e.registerHelper("toLowerCase",n),n}),define("hbs!main/components/patient/detail/vaBenefitsTemplate",["hbs","handlebars","_assets/templates/helpers/toLowerCase","_assets/templates/helpers/formatDate"],function(e,t){var n=t.template({1:function(e,t,n,i){return'		<div id="demo-svc-connected-status-val">Yes</div>\n'},3:function(e,t,n,i){return'		<div id="demo-svc-connected-status-val">No</div>\n'},5:function(e,t,n,i){var o,r="";return o=t.each.call(e,null!=e?e.scCondition:e,{name:"each",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=o&&(r+=o),r},6:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return"		<div>"+s((o=null!=(o=t.name||(null!=e?e.name:e))?o:a,typeof o===r?o.call(e,{name:"name",hash:{},data:i}):o))+" ("+s((o=null!=(o=t.scPercent||(null!=e?e.scPercent:e))?o:a,typeof o===r?o.call(e,{name:"scPercent",hash:{},data:i}):o))+"%)</div>\n"},8:function(e,t,n,i){return"		<div>No Record Found</div>\n"},10:function(e,t,n,i){var o,r='	<table class="ehmp-table-default table">\n	<tbody>\n';return o=t["with"].call(e,null!=e?e.insurance:e,{name:"with",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=o&&(r+=o),r},11:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'		<tr><td id="demo-insurance-name">Insurance Name</td><td id="demo-insurance-name-val">'+s((o=null!=(o=t.companyName||(null!=e?e.companyName:e))?o:a,typeof o===r?o.call(e,{name:"companyName",hash:{},data:i}):o))+'</td></tr>\n		<tr><td id="demo-insurance-gp">Group</td><td id="demo-insurance-gp-val">'+s((o=null!=(o=t.groupNumber||(null!=e?e.groupNumber:e))?o:a,typeof o===r?o.call(e,{name:"groupNumber",hash:{},data:i}):o))+'</td></tr>\n		<tr><td id="demo-insurance-holder">Holder</td><td id="demo-insurance-holder-val">'+s((t.toLowerCase||e&&e.toLowerCase||a).call(e,null!=e?e.policyHolder:e,{name:"toLowerCase",hash:{},data:i}))+'</td></tr>\n		<tr><td id="demo-insurance-eff-date">Effective Date</td><td id="demo-insurance-eff-date-val">'+s((t.formatDate||e&&e.formatDate||a).call(e,null!=e?e.effectiveDate:e,{name:"formatDate",hash:{},data:i}))+'</td></tr>\n		<tr><td id="demo-insurance-exp-date">Expiration Date</td><td id="demo-insurance-exp-date-val">'+s((t.formatDate||e&&e.formatDate||a).call(e,null!=e?e.expirationDate:e,{name:"formatDate",hash:{},data:i}))+"</td></tr>\n	</tbody>\n	</table>\n"},13:function(e,t,n,i){return"	<div>No Record Found</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r='<div class="demographic-group-header">Health Benefits and Insurance</div>\n<div class="demographic-group-content">\n	<div id="demo-svc-connected" class="demographic-header text-muted" >Service Connected</div>\n';return o=t["if"].call(e,null!=e?e.serviceConnected:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=o&&(r+=o),r+='	<div class=\'demographic-group-divider\'></div>\n	<div id="demo-svc-conditions" class="demographic-header text-muted">Service Connected Conditions</div>\n	<div id="demo-svc-conditions-values" class="demographic-group-scroll">\n',o=t["if"].call(e,null!=(o=null!=e?e.scCondition:e)?o.length:o,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(8,i),data:i}),null!=o&&(r+=o),r+='	</div>\n	<div class=\'demographic-group-divider\'></div>\n	<div id="demo-insurance" class="text-muted">Insurance</div>\n',o=t["if"].call(e,null!=e?e.insurance:e,{name:"if",hash:{},fn:this.program(10,i),inverse:this.program(13,i),data:i}),null!=o&&(r+=o),r+"</div>\n"},useData:!0});return t.registerPartial("main/components/patient/detail/vaBenefitsTemplate",n),n}),define("hbs!main/components/patient/detail/serviceHistoryTemplate",["hbs","handlebars","_assets/templates/helpers/toLowerCase"],function(e,t){var n=t.template({1:function(e,t,n,i){return'<div id="demo-vet-status-val">Yes</div>\n'},3:function(e,t,n,i){return'<div id="demo-vet-status-val">No</div>\n'},5:function(e,t,n,i){var o=t.helperMissing,r=this.escapeExpression;return'<div id="demo-marital-status-val">'+r((t.toLowerCase||e&&e.toLowerCase||o).call(e,null!=e?e.maritalStatusName:e,{name:"toLowerCase",hash:{},data:i}))+"</div>\n"},7:function(e,t,n,i){return'<div id="demo-marital-status-val">No Record Found</div>\n'},9:function(e,t,n,i){var o=t.helperMissing,r=this.escapeExpression;return'<div id="demo-religion-status-val">'+r((t.toLowerCase||e&&e.toLowerCase||o).call(e,null!=e?e.religionName:e,{name:"toLowerCase",hash:{},data:i}))+"</div>\n"},11:function(e,t,n,i){return'<div id="demo-religion-status-val">No Record Found</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r='<div class="demographic-group-header">Service and Social History</div>\n<div class="demographic-group-content">\n<div id="demo-vet-status" class="demographic-header text-muted">Veteran Status</div>\n';return o=t["if"].call(e,null!=e?e.veteran:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=o&&(r+=o),r+='<div class=\'demographic-group-divider\'></div>\n<div id="demo-marital-status" class="demographic-header text-muted">Marital Status</div>\n',o=t["if"].call(e,null!=e?e.maritalStatusName:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(7,i),data:i}),null!=o&&(r+=o),r+='<div class=\'demographic-group-divider\'></div>\n<div id="demo-religion-status" class="demographic-header text-muted">Religion</div>\n',o=t["if"].call(e,null!=e?e.religionName:e,{name:"if",hash:{},fn:this.program(9,i),inverse:this.program(11,i),data:i}),null!=o&&(r+=o),r+"</div>\n\n"},useData:!0});return t.registerPartial("main/components/patient/detail/serviceHistoryTemplate",n),n}),define("hbs!main/components/patient/detail/quickview/patientAddressTableTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return"<div id='ql-pt-address-table-container' class=\"demo-popover\">\n	<table class=\"table patient-address-table\">\n		<thead>\n		    <tr class='header'>\n		      <th>VistA Site</th>\n		      <th>Home</th>\n		      <th>Temporary</th>\n		    </tr>\n		</thead>\n		<tbody id='pt-address-row-container'>\n		</tbody>\n	</table>\n</div>"},useData:!0});return t.registerPartial("main/components/patient/detail/quickview/patientAddressTableTemplate",n),n}),define("hbs!main/components/patient/detail/quickview/patientAddressRowTemplate",["hbs","handlebars"],function(e,t){var n=t.template({1:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div id="ql-pt-haddr-line2" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.hAddress:e)?o.line2:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.hAddress:e)?o.line2:o)?o.value:o,e))+"</div> "},3:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div id="ql-pt-haddr-line3" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.hAddress:e)?o.line3:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.hAddress:e)?o.line3:o)?o.value:o,e))+"</div> "},5:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div id="ql-pt-haddr-line4" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.hAddress:e)?o.line4:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.hAddress:e)?o.line4:o)?o.value:o,e))+"</div> "},7:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div id="ql-pt-tddr-line2"  class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.tAddress:e)?o.line2:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.tAddress:e)?o.line2:o)?o.value:o,e))+"</div> "},9:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div id="ql-pt-tddr-line3"  class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.tAddress:e)?o.line3:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.tAddress:e)?o.line3:o)?o.value:o,e))+"</div> "},11:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div id="ql-pt-tddr-line4"  class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.tAddress:e)?o.line4:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.tAddress:e)?o.line4:o)?o.value:o,e))+"</div> "},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d=this.lambda,c="<td>"+l((r=null!=(r=t.facilityName||(null!=e?e.facilityName:e))?r:s,typeof r===a?r.call(e,{name:"facilityName",hash:{},data:i}):r))+'</td>\n<td>\n	<div>\n	    <div class=\'demographic-data\' id="ql-pt-haddr-line1" data-diff="'+l(d(null!=(o=null!=(o=null!=e?e.hAddress:e)?o.line1:o)?o.diff:o,e))+'"> '+l(d(null!=(o=null!=(o=null!=e?e.hAddress:e)?o.line1:o)?o.value:o,e))+"</div>\n	    ";return o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.hAddress:e)?o.line2:o)?o.value:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+="\n	    ",o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.hAddress:e)?o.line3:o)?o.value:o,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+="\n	    ",o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.hAddress:e)?o.line4:o)?o.value:o,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+='\n	</div>\n</td>\n<td>\n	<div>\n	    <div class=\'demographic-data\' id="ql-pt-tddr-line1" data-diff="'+l(d(null!=(o=null!=(o=null!=e?e.tAddress:e)?o.line1:o)?o.diff:o,e))+'"> '+l(d(null!=(o=null!=(o=null!=e?e.tAddress:e)?o.line1:o)?o.value:o,e))+"</div>\n	    ",o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.tAddress:e)?o.line2:o)?o.value:o,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+="\n	    ",o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.tAddress:e)?o.line3:o)?o.value:o,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+="\n	    ",o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.tAddress:e)?o.line4:o)?o.value:o,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+"\n	</div>\n</td>"},useData:!0});return t.registerPartial("main/components/patient/detail/quickview/patientAddressRowTemplate",n),n}),define("hbs!main/components/patient/detail/quickview/patientPhoneTableTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return"<div id='ql-phone-table-container' class=\"demo-popover\">\n	<table class=\"table patient-address-table\">\n		<thead>\n		    <tr class='header'>\n		      <th>VistA Site</th>\n		      <th>Home</th>\n		      <th>Cell</th>\n		      <th>Work</th>\n		    </tr>\n		</thead>\n		<tbody id='pt-phone-row-container'>\n		</tbody>\n	</table>\n</div>"},useData:!0});return t.registerPartial("main/components/patient/detail/quickview/patientPhoneTableTemplate",n),n}),define("hbs!main/components/patient/detail/quickview/patientPhoneRowTemplate",["hbs","handlebars","_assets/templates/helpers/formatPhone"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d=this.lambda;return"<td>"+l((r=null!=(r=t.facilityName||(null!=e?e.facilityName:e))?r:s,typeof r===a?r.call(e,{name:"facilityName",hash:{},data:i}):r))+'</td>\n<td>\n	<div id="ql-home-phone-val" class=\'demographic-data\' data-diff="'+l(d(null!=(o=null!=(o=null!=e?e.hPhone:e)?o.phone:o)?o.diff:o,e))+'">'+l((t.formatPhone||e&&e.formatPhone||s).call(e,null!=(o=null!=(o=null!=e?e.hPhone:e)?o.phone:o)?o.value:o,{name:"formatPhone",hash:{},data:i}))+'</div>\n</td>\n<td>\n	<div  id="ql-cell-phone-val" class=\'demographic-data\' data-diff="'+l(d(null!=(o=null!=(o=null!=e?e.cPhone:e)?o.phone:o)?o.diff:o,e))+'">'+l((t.formatPhone||e&&e.formatPhone||s).call(e,null!=(o=null!=(o=null!=e?e.cPhone:e)?o.phone:o)?o.value:o,{name:"formatPhone",hash:{},data:i}))+'</div>\n</td>\n<td>\n	<div id="ql-work-phone-val" class=\'demographic-data\' data-diff="'+l(d(null!=(o=null!=(o=null!=e?e.wPhone:e)?o.phone:o)?o.diff:o,e))+'">'+l((t.formatPhone||e&&e.formatPhone||s).call(e,null!=(o=null!=(o=null!=e?e.wPhone:e)?o.phone:o)?o.value:o,{name:"formatPhone",hash:{},data:i}))+"</div>\n</td>"},useData:!0});return t.registerPartial("main/components/patient/detail/quickview/patientPhoneRowTemplate",n),n}),define("hbs!main/components/patient/detail/quickview/patientEmailTableTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return"<div id='ql-email-table-container' class=\"demo-popover\">\n	<table class=\"table patient-email-table\">\n		<thead>\n		    <tr class='header'>\n		      <th>VistA Site</th>\n		      <th>Email</th>\n		    </tr>\n		</thead>\n		<tbody id='pt-email-row-container'>\n		</tbody>\n	</table>\n</div>"},useData:!0});return t.registerPartial("main/components/patient/detail/quickview/patientEmailTableTemplate",n),n}),define("hbs!main/components/patient/detail/quickview/patientEmailRowTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d=this.lambda;return"<td>"+l((r=null!=(r=t.facilityName||(null!=e?e.facilityName:e))?r:s,typeof r===a?r.call(e,{name:"facilityName",hash:{},data:i}):r))+'</td>\n<td>\n	<div d="ql-email" class=\'demographic-data\' data-diff="'+l(d(null!=(o=null!=(o=null!=e?e.email:e)?o.email:o)?o.diff:o,e))+'">'+l(d(null!=(o=null!=(o=null!=e?e.email:e)?o.email:o)?o.value:o,e))+"&nbsp;</div>\n</div>"},useData:!0
});return t.registerPartial("main/components/patient/detail/quickview/patientEmailRowTemplate",n),n}),define("hbs!main/components/patient/detail/quickview/emContactTableTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return"<div class=\"demo-popover\">\n	<table class=\"table contact-table\">\n		<thead>\n		    <tr class='header'>\n		      <th>VistA Site</th>\n		      <th>Name</th>\n		      <th>Relationship</th>\n		      <th>Home</th>\n		      <th>Work</th>\n		      <th>Address</th>\n		    </tr>\n		</thead>\n		<tbody id='em-contact-row-container'>\n		</tbody>\n	</table>\n</div>"},useData:!0});return t.registerPartial("main/components/patient/detail/quickview/emContactTableTemplate",n),n}),define("hbs!main/components/patient/detail/quickview/nokContactTableTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return"<div class=\"demo-popover\">\n	<table class=\"table contact-table\">\n		<thead>\n		    <tr class='header'>\n		      <th>VistA Site</th>\n		      <th>Name</th>\n		      <th>Relationship</th>\n		      <th>Home</th>\n		      <th>Work</th>\n		      <th>Address</th>\n		    </tr>\n		</thead>\n		<tbody id='nok-contact-row-container'>\n		</tbody>\n	</table>\n</div>"},useData:!0});return t.registerPartial("main/components/patient/detail/quickview/nokContactTableTemplate",n),n}),define("hbs!main/components/patient/detail/quickview/emContactRowTemplate",["hbs","handlebars","_assets/templates/helpers/formatPhone"],function(e,t){var n=t.template({1:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div id="ql-em-addr-line2" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line2:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line2:o)?o.value:o,e))+"</div> "},3:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div id="ql-em-addr-line3" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line3:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line3:o)?o.value:o,e))+"</div> "},5:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div id="ql-em-addr-lin4" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line4:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line4:o)?o.value:o,e))+"</div> "},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d=this.lambda,c="<td>"+l((r=null!=(r=t.facilityName||(null!=e?e.facilityName:e))?r:s,typeof r===a?r.call(e,{name:"facilityName",hash:{},data:i}):r))+'</td>\n<td>\n	<div id="ql-em-name" class=\'demographic-data\' data-diff="'+l(d(null!=(o=null!=(o=null!=e?e.nameRel:e)?o.name:o)?o.diff:o,e))+'">'+l(d(null!=(o=null!=(o=null!=e?e.nameRel:e)?o.name:o)?o.value:o,e))+'</div>\n</td>\n<td>\n	<div id="ql-em-rel" class=\'demographic-data\' data-diff="'+l(d(null!=(o=null!=(o=null!=e?e.nameRel:e)?o.relationship:o)?o.diff:o,e))+'">'+l(d(null!=(o=null!=(o=null!=e?e.nameRel:e)?o.relationship:o)?o.value:o,e))+'</div>\n</td>\n<td>\n	<div id="ql-em-hphone" class=\'demographic-data\' data-diff="'+l(d(null!=(o=null!=(o=null!=e?e.hPhone:e)?o.phone:o)?o.diff:o,e))+'">'+l((t.formatPhone||e&&e.formatPhone||s).call(e,null!=(o=null!=(o=null!=e?e.hPhone:e)?o.phone:o)?o.value:o,{name:"formatPhone",hash:{},data:i}))+'</div>\n</td>\n<td>\n	<div id="ql-em-wphone" class=\'demographic-data\' data-diff="'+l(d(null!=(o=null!=(o=null!=e?e.wPhone:e)?o.phone:o)?o.diff:o,e))+'">'+l((t.formatPhone||e&&e.formatPhone||s).call(e,null!=(o=null!=(o=null!=e?e.wPhone:e)?o.phone:o)?o.value:o,{name:"formatPhone",hash:{},data:i}))+'</div>\n</td>\n<td>\n	<div>\n	    <div id="ql-em-addr-line1" class=\'demographic-data\' data-diff="'+l(d(null!=(o=null!=(o=null!=e?e.address:e)?o.line1:o)?o.diff:o,e))+'"> '+l(d(null!=(o=null!=(o=null!=e?e.address:e)?o.line1:o)?o.value:o,e))+"</div>\n	    ";return o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.address:e)?o.line2:o)?o.value:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+="\n	    ",o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.address:e)?o.line3:o)?o.value:o,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+="\n	    ",o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.address:e)?o.line4:o)?o.value:o,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+"\n	</div>\n</td>"},useData:!0});return t.registerPartial("main/components/patient/detail/quickview/emContactRowTemplate",n),n}),define("hbs!main/components/patient/detail/quickview/nokContactRowTemplate",["hbs","handlebars","_assets/templates/helpers/formatPhone"],function(e,t){var n=t.template({1:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div id="ql-nok-addr-line2" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line2:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line2:o)?o.value:o,e))+"</div> "},3:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div id="ql-nok-addr-line3" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line3:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line3:o)?o.value:o,e))+"</div> "},5:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div id="ql-nok-addr-line4" class=\'demographic-data\' data-diff="'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line4:o)?o.diff:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.address:e)?o.line4:o)?o.value:o,e))+"</div> "},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d=this.lambda,c="<td>"+l((r=null!=(r=t.facilityName||(null!=e?e.facilityName:e))?r:s,typeof r===a?r.call(e,{name:"facilityName",hash:{},data:i}):r))+'</td>\n<td>\n	<div id="ql-nok-name" class=\'demographic-data\' data-diff="'+l(d(null!=(o=null!=(o=null!=e?e.nameRel:e)?o.name:o)?o.diff:o,e))+'">'+l(d(null!=(o=null!=(o=null!=e?e.nameRel:e)?o.name:o)?o.value:o,e))+'</div>\n</td>\n<td>\n	<div id="ql-nok-rel" class=\'demographic-data\' data-diff="'+l(d(null!=(o=null!=(o=null!=e?e.nameRel:e)?o.relationship:o)?o.diff:o,e))+'">'+l(d(null!=(o=null!=(o=null!=e?e.nameRel:e)?o.relationship:o)?o.value:o,e))+'</div>\n</td>\n<td>\n	<div id="ql-nok-hphone" class=\'demographic-data\' data-diff="'+l(d(null!=(o=null!=(o=null!=e?e.hPhone:e)?o.phone:o)?o.diff:o,e))+'">'+l((t.formatPhone||e&&e.formatPhone||s).call(e,null!=(o=null!=(o=null!=e?e.hPhone:e)?o.phone:o)?o.value:o,{name:"formatPhone",hash:{},data:i}))+'</div>\n</td>\n<td>\n	<div id="ql-nok-wphone" class=\'demographic-data\' data-diff="'+l(d(null!=(o=null!=(o=null!=e?e.wPhone:e)?o.phone:o)?o.diff:o,e))+'">'+l((t.formatPhone||e&&e.formatPhone||s).call(e,null!=(o=null!=(o=null!=e?e.wPhone:e)?o.phone:o)?o.value:o,{name:"formatPhone",hash:{},data:i}))+'</div>\n</td>\n<td>\n	<div>\n	    <div id="ql-nok-addr-line1" class=\'demographic-data\' data-diff="'+l(d(null!=(o=null!=(o=null!=e?e.address:e)?o.line1:o)?o.diff:o,e))+'"> '+l(d(null!=(o=null!=(o=null!=e?e.address:e)?o.line1:o)?o.value:o,e))+"</div>\n	    ";return o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.address:e)?o.line2:o)?o.value:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+="\n	    ",o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.address:e)?o.line3:o)?o.value:o,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+="\n	    ",o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.address:e)?o.line4:o)?o.value:o,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+"\n	</div>\n</td>"},useData:!0});return t.registerPartial("main/components/patient/detail/quickview/nokContactRowTemplate",n),n}),define("main/components/patient/detail/quickview/demographicQuickView",["underscore","main/ADK","backbone","marionette","hbs!main/components/patient/detail/quickview/patientAddressTableTemplate","hbs!main/components/patient/detail/quickview/patientAddressRowTemplate","hbs!main/components/patient/detail/quickview/patientPhoneTableTemplate","hbs!main/components/patient/detail/quickview/patientPhoneRowTemplate","hbs!main/components/patient/detail/quickview/patientEmailTableTemplate","hbs!main/components/patient/detail/quickview/patientEmailRowTemplate","hbs!main/components/patient/detail/quickview/emContactTableTemplate","hbs!main/components/patient/detail/quickview/nokContactTableTemplate","hbs!main/components/patient/detail/quickview/emContactRowTemplate","hbs!main/components/patient/detail/quickview/nokContactRowTemplate"],function(e,t,n,i,o,r,a,s,l,d,c,u,h,p){var g=i.CompositeView.extend({template:o,childView:n.Marionette.ItemView.extend({template:r,tagName:"tr"}),childViewContainer:"#pt-address-row-container",templateHelpers:function(){return{items:this.collection.toJSON()}},onRender:function(){this.$(".demographic-data").each(function(e){$(this).data("diff")?$(this).addClass("demographic-group-diff-text"):$(this).removeClass("demographic-group-diff-text")})}}),f=i.CompositeView.extend({template:a,childView:n.Marionette.ItemView.extend({template:s,tagName:"tr"}),childViewContainer:"#pt-phone-row-container",templateHelpers:function(){return{items:this.collection.toJSON()}},onRender:function(){this.$(".demographic-data").each(function(e){$(this).data("diff")?$(this).addClass("demographic-group-diff-text"):$(this).removeClass("demographic-group-diff-text")})}}),m=i.CompositeView.extend({template:l,childView:n.Marionette.ItemView.extend({template:d,tagName:"tr"}),childViewContainer:"#pt-email-row-container",templateHelpers:function(){return{items:this.collection.toJSON()}},onRender:function(){this.$(".demographic-data").each(function(e){$(this).data("diff")?$(this).addClass("demographic-group-diff-text"):$(this).removeClass("demographic-group-diff-text")})}}),v=i.CompositeView.extend({template:c,childView:n.Marionette.ItemView.extend({template:h,tagName:"tr"}),childViewContainer:"#em-contact-row-container",templateHelpers:function(){return{items:this.collection.toJSON()}},onRender:function(){this.$(".demographic-data").each(function(e){$(this).data("diff")?$(this).addClass("demographic-group-diff-text"):$(this).removeClass("demographic-group-diff-text")})}}),b=i.CompositeView.extend({template:u,childView:n.Marionette.ItemView.extend({template:p,tagName:"tr"}),childViewContainer:"#nok-contact-row-container",templateHelpers:function(){return{items:this.collection.toJSON()}},onRender:function(){this.$(".demographic-data").each(function(e){$(this).data("diff")?$(this).addClass("demographic-group-diff-text"):$(this).removeClass("demographic-group-diff-text")})}}),y={ptAddressQV:g,ptPhoneQV:f,ptEmailQV:m,emContactQV:v,nokContactQV:b};return y}),define("main/components/patient/util/modelUtil",["backbone","marionette","underscore","api/SessionStorage"],function(e,t,n,i){"use strict";var o=e.Model.extend({}),r="No Record Found",a={getSiteDiffs:function(t){var n,o=i.get.sessionModel("patient-domain"),r=o.get("data"),a=o.get("sites"),s=this.getFacilityName(t,a),l=this.getVistaData(r,a,s),d=new e.Model,c=new e.Collection(l);return n=this.getGroupOneModel(t,c),d.set("groupOne",n),n=this.getGroupTwoModel(t,c),d.set("groupTwo",n),n=this.getGroupThreeModel(t,c),d.set("groupThree",n),n=this.getGroupFourModel(t,c),d.set("groupFour",n),n=this.getGroupFiveModel(t,c),d.set("groupFive",n),d},getVistaData:function(t,n,i){var o=this,r=new e.Collection(t),a=r.filter(function(e){var t=o.getFacilityName(e,n);return e.set("facilityName",t),t&&t!==i});return a},getFacilityName:function(e,t){var n=e.get("pid").split(";")[0],i=t.filter(function(e){return e.siteCode===n});return i.length?i[0].name:""},getGroupOneModel:function(e,t){var i,r=this.getGroupOneObj(e),a=this,s=[];n.each(t.models,function(e){i=a.getGroupOneObj(e),i.facilityName=e.get("facilityName"),s.push(i)});var l=this.updateDiffs(r,s);return new o(l)},getGroupOneObj:function(e){var t={phone:{value:this.getPhone(e,"H")||r,diff:!1}},n={phone:{value:this.getPhone(e,"WP")||r,diff:!1}},i={phone:{value:this.getPhone(e,"MC")||r,diff:!1}},o={hPhone:t,wPhone:n,cPhone:i,groupDiff:t.phone.diff||i.phone.diff||n.phone.diff};return o},getGroupTwoModel:function(e,t){var i,r=this.getGroupTwoObject(e),a=this,s=[];n.each(t.models,function(e){i=a.getGroupTwoObject(e),i.facilityName=e.get("facilityName"),s.push(i)});var l=this.updateDiffs(r,s);return new o(l)},getGroupTwoObject:function(e){var t=this.getAddressObj(e,"H"),n=this.getAddressObj(e,"TMP"),i={hAddress:t,tAddress:n};return i},getGroupThreeModel:function(e,t){var i,r=this.getGroupThreeObject(e),a=this,s=[];n.each(t.models,function(e){i=a.getGroupThreeObject(e),i.facilityName=e.get("facilityName"),s.push(i)});var l=this.updateDiffs(r,s);return new o(l)},getGroupThreeObject:function(e){var t=e.get("email"),n={email:{value:t?t:r,diff:!1},diff:!1},i={email:n,diff:!1};return i},getAddressObj:function(e,t){var n=this.getAddress(e,t),i={line1:{value:n&&n.line1?n.line1.toLowerCase():"",diff:!1},line2:{value:n&&n.line2?n.line2.toLowerCase():"",diff:!1},line3:{value:n&&n.line3?n.line3.toLowerCase():"",diff:!1},line4:{value:n&&n.line4?n.line4:"",diff:!1},diff:!1};return i},getGroupFourModel:function(e,t){var i,r=this.getContactObject(e,"Emergency Contact"),a=this,s=[];n.each(t.models,function(e){i=a.getContactObject(e,"Emergency Contact"),i.facilityName=e.get("facilityName"),s.push(i)});var l=this.updateDiffs(r,s);return new o(l)},getGroupFiveModel:function(e,t){var i,r=this.getContactObject(e,"Next of Kin"),a=this,s=[];n.each(t.models,function(e){i=a.getContactObject(e,"Next of Kin"),i.facilityName=e.get("facilityName"),s.push(i)});var l=this.updateDiffs(r,s);return new o(l)},getContactObject:function(e,t){var n=this.getContact(e,t),i="";n&&(i=n.relationship?n.relationship.toLowerCase():"Relationship Unknown");var o=({facilityName:{value:e.get("facilityName"),diff:!1}},{name:{value:n&&n.name?n.name.toLowerCase():"No Record Found",diff:!1},relationship:{value:i,diff:!1}}),a={phone:{value:n&&n.hPhone?n.hPhone:r,diff:!1}},s={phone:{value:n&&n.wPhone?n.wPhone:r,diff:!1}},l=this.getContactAddressObj(n,t),d={nameRel:o,hPhone:a,wPhone:s,address:l,groupDiff:!1};return d},getContactAddressObj:function(e,t){var n=this.getContactAddress(e),i={line1:{value:n&&n.line1?n.line1.toLowerCase():"",diff:!1},line2:{value:n&&n.line2?n.line2.toLowerCase():"",diff:!1},line3:{value:n&&n.line3?n.line3.toLowerCase():"",diff:!1},line4:{value:n&&n.line4?n.line4:"",diff:!1},diff:!1};return i},getAddress:function(e,t){var n;return e.has("address")&&e.get("address").length&&(n=e.get("address").filter(function(e){return e.use===t})),n&&n.length?(n[0].line4=this.getCityStateZip(n[0]),n[0]):{line1:r}},getContact:function(e,t){var n;if(e.has("contact")&&e.get("contact").length&&(n=e.get("contact").filter(function(e){return e.typeName===t})),n&&n.length){var i=this.getContactPhone(n[0],"H");return i&&(n[0].hPhone=i),i=this.getContactPhone(n[0],"WP"),i&&(n[0].wPhone=i),i=this.getContactPhone(n[0],"MC"),i&&(n[0].cPhone=i),n[0]}return null},getContactAddress:function(e){var t=e&&e.address?e.address[0]:null;return t?t.line4=this.getCityStateZip(t):t={line1:r},t},getPhone:function(e,t){var n;return e.has("telecom")&&e.get("telecom").length&&(n=e.get("telecom").filter(function(e){return e.use===t})),n&&n.length?n[0].value:""},getContactPhone:function(e,t){var n;return e.telecom&&(n=e.telecom.filter(function(e){return e.use===t})),n&&n.length?n[0].value:""},getCityStateZip:function(e){var t="";return t=e.city?t+e.city.toLowerCase():t,t=e.state?t+", "+e.state:t,t=e.zip?t+", "+e.zip:t},updateDiffs:function(t,n){var i,o,a,s="diff",l="groupDiff",d=!1;for(var c in t){for(var u in t[c])for(var h in t[c][u])if(h!==s&&h!==l){i=t[c][u][h];for(var p=0;p<n.length;p++)a=n[p],o=a[c][u][h],""!==o&&o.toLowerCase()!==r.toLowerCase()&&o!==i&&(d=!0,t[c][u][s]=!0,a[c][u][s]=!0,t[l]=!0,t[c].diff=!0)}}return d&&(t.externalSitesData=new e.Collection(n)),t},addFacilityName:function(e,t){t.set("pid",e);var n=i.get.sessionModel("patient-domain").get("sites"),o=this.getFacilityName(t,n);return t.set("facility",o||e.split(";")[0])}};return a}),define("main/components/patient/detail/patientHeaderDetailView",["backbone","marionette","underscore","hbs!main/components/patient/detail/emergencyContactTemplate","hbs!main/components/patient/detail/nokContactTemplate","hbs!main/components/patient/detail/patientEmailTemplate","hbs!main/components/patient/detail/patientPhoneTemplate","hbs!main/components/patient/detail/patientHeaderDetailTemplate","hbs!main/components/patient/detail/patientAddressInfoTemplate","hbs!main/components/patient/detail/vaBenefitsTemplate","hbs!main/components/patient/detail/serviceHistoryTemplate","main/components/patient/detail/quickview/demographicQuickView","main/components/patient/util/modelUtil"],function(e,t,n,i,o,r,a,s,l,d,c,u,h){var p=e.Marionette.ItemView.extend({className:"demographic-group",tagName:"div",onRender:function(){if(this.$(".demographic-data").each(function(e){$(this).data("diff")?$(this).addClass("demographic-group-diff-text"):$(this).removeClass("demographic-group-diff-text")}),this.options.qv&&this.model.get("groupDiff")===!0){var e=this.options.myView;this.quickView=new e({collection:this.model.get("externalSitesData")}),this.quickView.render(),this.$el.popup({placement:"right",halign:"left",content:this.quickView.$el})}var t=this;this.$el.on("shown.bs.popover",function(e){t.$el.attr("aria-expanded",!0)}),this.$el.on("hidden.bs.popover",function(e){t.$el.attr("aria-expanded",!1)})},onDestroy:function(){this.options.qv&&this.model.get("groupDiff")===!0&&this.quickView.destroy()},templateHelpers:function(e){var t=this.model;return{insurance:function(){var e=t.get("insurance");return e&&e.length?(e.sort(function(e,t){var n=e.effectiveDate?e.effectiveDate:0,i=t.effectiveDate?t.effectiveDate:0;return i-n}),e[0]):null}}}}),g=e.Marionette.LayoutView.extend({template:s,className:"row demographics-container",regions:{ptPhoneRegion:"#pt-header-pt-phone",ptAddressRegion:"#pt-header-pt-address",ptEmailRegion:"#pt-header-email",ptEmContactRegion:"#pt-header-em-contact",ptNokContactRegion:"#pt-header-nok-contact",colThreeRegion:"#pt-header-em-ins",colFourRegion:"#pt-header-em-misc"},events:{"hidden.bs.dropdown .dropdown":function(e){this.$("[data-toggle=popup]").popup("hide")}},onRender:function(){this.siteDiffs=h.getSiteDiffs(this.model);var e=new p({model:this.siteDiffs.get("groupOne"),template:a,qv:!0,myView:u.ptPhoneQV,attributes:{id:"pt-demo-phone-group","data-demo-group":"groupOne",tabindex:"0","data-toggle":"popup",role:"button","aria-haspopup":!0,"aria-expanded":!1}});this.ptPhoneRegion.show(e);var t=new p({model:this.siteDiffs.get("groupTwo"),template:l,qv:!0,myView:u.ptAddressQV,attributes:{id:"pt-demo-address-group","data-demo-group":"groupTwo",tabindex:"0","data-toggle":"popup",role:"button","aria-haspopup":!0,"aria-expanded":!1}});this.ptAddressRegion.show(t);var n=new p({model:this.siteDiffs.get("groupThree"),template:r,qv:!0,myView:u.ptEmailQV,attributes:{id:"pt-demo-email-group","data-demo-group":"groupThree",tabindex:"0","data-toggle":"popup",role:"button","aria-haspopup":!0,"aria-expanded":!1}});this.ptEmailRegion.show(n);var s=new p({model:this.siteDiffs.get("groupFour"),template:i,qv:!0,myView:u.emContactQV,attributes:{id:"pt-demo-em-contact-group","data-demo-group":"groupFour",tabindex:"0","data-toggle":"popup",role:"button","aria-haspopup":!0,"aria-expanded":!1}});this.ptEmContactRegion.show(s);var g=new p({model:this.siteDiffs.get("groupFive"),template:o,qv:!0,myView:u.nokContactQV,attributes:{id:"pt-demo-nok-contact-group","data-demo-group":"groupFive",tabindex:"0","data-toggle":"popup",role:"button","aria-haspopup":!0,"aria-expanded":!1}});this.ptNokContactRegion.show(g);var f=new p({model:this.model,template:d,attributes:{role:"menuitem",tabindex:"0"}});this.colThreeRegion.show(f);var m=new p({model:this.model,template:c,attributes:{role:"menuitem",tabindex:"0"}});this.colFourRegion.show(m);var v=this;this.$(".demographic-group").each(function(e){var t=$(this).data("demo-group"),n=v.siteDiffs&&v.siteDiffs.get(t);n&&(n.has("groupDiff")&&n.get("groupDiff")===!0?$(this).addClass("demographic-group-diff"):$(this).removeClass("demographic-group-diff"))}),this.$("[data-toggle=popup]").on("show.bs.popover",function(e){v.$("[data-toggle=popup]").not(this).popup("hide")})},handleKeyPress:function(e){e.preventDefault(),13===e.keyCode&&this.launchDemographicDiff(e)}});return g}),define("hbs!main/components/patient/modal/demographicTableTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return"<div id='demo-diff-table-container'>\n	<table class=\"table table-striped table-bordered\">\n		<thead>\n		    <tr class='header'>\n		      <!--th>Date</th-->\n		      <th>Record</th>\n		      <th>Facility</th>\n		    </tr>\n		</thead>\n		<tbody id='demographic-item-container'>\n		</tbody>\n	</table>\n</div>"},useData:!0});return t.registerPartial("main/components/patient/modal/demographicTableTemplate",n),n}),define("hbs!main/components/patient/modal/demographicTableRowTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return"<!---td>"+s((o=null!=(o=t.lastUpdated||(null!=e?e.lastUpdated:e))?o:a,typeof o===r?o.call(e,{name:"lastUpdated",hash:{},data:i}):o))+"</td--><td>"+s((o=null!=(o=t.value||(null!=e?e.value:e))?o:a,typeof o===r?o.call(e,{name:"value",hash:{},data:i}):o))+"</td><td>"+s((o=null!=(o=t.facility||(null!=e?e.facility:e))?o:a,typeof o===r?o.call(e,{name:"facility",hash:{},data:i}):o))+"</td>"},useData:!0});return t.registerPartial("main/components/patient/modal/demographicTableRowTemplate",n),n}),define("main/components/patient/modal/demographicDiffModalView",["underscore","main/ADK","backbone","marionette","hbs!main/components/patient/modal/demographicTableTemplate","hbs!main/components/patient/modal/demographicTableRowTemplate"],function(e,t,n,i,o,r){var a=n.Model.extend({}),s=(n.Collection.extend({model:a}),n.Marionette.ItemView.extend({template:r,tagName:"tr"})),l=i.CompositeView.extend({template:o,childView:s,childViewContainer:"#demographic-item-container",templateHelpers:function(){return{items:this.collection.toJSON()}}});return l}),define("main/components/patient/notes/noteProxyView",["backbone","marionette","underscore","handlebars","api/Messaging"],function(e,t,n,i,o){"use strict";var r=!0,a=e.Marionette.LayoutView.extend({tagName:"div",className:"operations-tray",template:i.compile("<div id='notes-operations-container'></div>"),regions:{noteOperationsRegion:"#notes-operations-container"},initialize:function(){r&&console.log("ProxyView---->>initialize"),o.getChannel("notes-add-edit").on("note:Operations",this.eventHandler,this)},eventHandler:function(e){switch(r&&console.log("ProxyView---->>eventHandler "+e.command),e.command){case"NewNote":case"EditNote":this.noteOperationsRegion.show(e.view),this.showFormTray();break;case"CloseNoteForm":this.hideFormTray();break;default:console.log("ProxyView---->>eventHandler -> unknown command")}},showFormTray:function(){r&&console.log("ProxyView---->>showFormTray"),$("#notes-modify-container")&&$("#notes-modify-container").addClass("show-notes-form")},hideFormTray:function(){r&&console.log("ProxyView---->>showFormTray"),$("#notes-modify-container")&&$("#notes-modify-container").removeClass("show-notes-form")},onRender:function(){r&&console.log("ProxyView---->>onRender")},onDestroy:function(){r&&console.log("ProxyView---->>onDestroy")}});return a}),define("hbs!main/components/patient/smokingStatus/smokingStatusTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div id="smokingStatusModal">\n    <div class="error-container" tabindex="-1"></div>\n    <div>Please select one:</div>\n    <div class="radio">\n        <label>\n            <input type="radio" name="smokingStatus" id="ssEveryDay" value="449868002" checked>\n            Current every day smoker\n        </label>\n    </div>\n    <div class="radio">\n        <label>\n            <input type="radio" name="smokingStatus" id="ssSomeDay" value="428041000124106">\n            Current some day smoker\n        </label>\n    </div>\n    <div class="radio">\n        <label>\n            <input type="radio" name="smokingStatus" id="ssFormer" value="8517006">\n            Former smoker\n        </label>\n    </div>\n    <div class="radio">\n        <label>\n            <input type="radio" name="smokingStatus" id="ssNever" value="266919005">\n            Never smoker\n        </label>\n    </div>\n    <div class="radio">\n        <label>\n            <input type="radio" name="smokingStatus" id="ssSmokerUnknown" value="77176002">\n            Smoker, current status unknown\n        </label>\n    </div>\n    <div class="radio">\n        <label>\n            <input type="radio" name="smokingStatus" id="ssUnknown" value="266927001">\n            Unknown if ever smoked\n        </label>\n    </div>\n    <div class="radio">\n        <label>\n            <input type="radio" name="smokingStatus" id="ssHeavy" value="428071000124103">\n            Heavy tobacco smoker\n        </label>\n    </div>\n    <div class="radio">\n        <label>\n            <input type="radio" name="smokingStatus" id="ssLight" value="428061000124105">\n            Light tobacco smoker\n        </label>\n    </div>\n</div>'},useData:!0});return t.registerPartial("main/components/patient/smokingStatus/smokingStatusTemplate",n),n}),define("main/components/patient/smokingStatus/smokingStatusView",["backbone","marionette","underscore","main/ADK","api/Messaging","api/ResourceService","api/UserService","hbs!main/components/patient/smokingStatus/smokingStatusTemplate"],function(e,t,n,i,o,r,a,s){function l(e,t){var n=a.getUserSession(),i=n.attributes.username,o=n.attributes.password,r=i.concat(":",o);e.setRequestHeader("Authorization","Basic ".concat(btoa(r)))}var d={displayModal:function(){var e=d,t={title:"Smoking Status",size:"medium",footerView:e.getFooterView()},n=new i.UI.Modal({view:e.getModalView(),options:t});n.show(),$("#mainModal").show()},getModalView:function(){var t=e.Marionette.ItemView.extend({template:s,events:{"keydown .error-container":"handleKeyPress"},handleKeyPress:function(e){9===e.keyCode&&(e.preventDefault(),e.stopPropagation(),$("#ssEveryDay").focus())}});return new t},getFooterView:function(){return e.Marionette.ItemView.extend({template:n.template('<button class="btn btn-default" type="button" data-dismiss="modal"  id="smokingStatusCancel">Cancel</button><button class="btn btn-primary" type="button" id="smokingStatusSave">Save</button>'),events:{"click #smokingStatusSave":"handleNext"},handleNext:function(){var e=o.getChannel("smokingstatus"),t=$("#smokingStatusModal input:checked")[0],n=new c;n.set("snowmedCode",t.value);var r=$(t).parent().text().trim();n.set("text",r),n.save(null,{success:function(){i.UI.Modal.hide(),e.command("smokingstatus:updated",r)},error:function(){$("#smokingStatusModal .error-container").text("Save Failed"),$("#smokingStatusModal .error-container").focus()}})}})}},c=e.Model.extend({sync:function(e,t,i){var o={type:"POST",beforeSend:l,url:t.url(),contentType:"application/json",data:JSON.stringify(t.toJSON()),dataType:"json"};$.ajax(n.extend(o,i))},url:function(){var e=r.PatientRecordService.getCurrentPatient().get("pid");return r.buildUrl("smoking-status",{pid:e})}}),u={handleStatusChange:function(){var e=r.PatientRecordService.getCurrentPatient();if(e.get("visit"))d.displayModal();else{var t=o.getChannel("visit");t.command("openVisitSelector","smokingstatus"),t.on("set-visit-success:smokingstatus",d.displayModal)}}};return u}),define("hbs!main/components/patient/detail/patientCareOtherSiteTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div class="other-site-heading">Other Site Care Providers</div>\n<table class="table">\n	<thead>\n		<tr>\n			<th>Facility</th>\n			<th>Name</th>\n			<th>Analog Pager</th>\n			<th>Digital Pager</th>\n			<th>Office Phone</th>\n		</tr>\n	</thead>\n	<tbody>\n	</tbody>\n</table>'},useData:!0});return t.registerPartial("main/components/patient/detail/patientCareOtherSiteTemplate",n),n}),define("hbs!main/components/patient/detail/patientCareOtherSiteRow",["hbs","handlebars","_assets/templates/helpers/toTitleCase","_assets/templates/helpers/formatPhone"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return"<td>"+s((o=null!=(o=t.facility||(null!=e?e.facility:e))?o:a,typeof o===r?o.call(e,{name:"facility",hash:{},data:i}):o))+"</td><td>"+s((t.toTitleCase||e&&e.toTitleCase||a).call(e,null!=e?e.name:e,!0,"Unassigned",{name:"toTitleCase",hash:{},data:i}))+"</td><td>"+s((t.formatPhone||e&&e.formatPhone||a).call(e,null!=e?e.analogPager:e,"not specified",{name:"formatPhone",hash:{},data:i}))+"</td><td>"+s((t.formatPhone||e&&e.formatPhone||a).call(e,null!=e?e.digitalPager:e,"not specified",{name:"formatPhone",hash:{},data:i}))+"</td><td>"+s((t.formatPhone||e&&e.formatPhone||a).call(e,null!=e?e.officePhone:e,"not specified",{name:"formatPhone",hash:{},data:i}))+"</td>"},useData:!0});return t.registerPartial("main/components/patient/detail/patientCareOtherSiteRow",n),n}),define("main/components/sign/models/signModels",["backbone"],function(e){var t=[{content:"11-DEOXYCORTISOL BLOOD   SERUM SP *UNSIGNED*\r\n",entered:"20150908104100",kind:"Laboratory",lastUpdateTime:"20150908144121",localId:"38962",locationName:"GENERAL MEDICINE",name:"11-DEOXYCORTISOL ",pid:"9E7A;8",providerDisplayName:"Khan,Vihaan",providerName:"KHAN,VIHAAN",stampTime:"20150908144120",statusName:"UNRELEASED",summary:"11-DEOXYCORTISOL BLOOD   SERUM SP *UNSIGNED*\r\n",uid:"urn:va:order:9E7A:8:38962",uidHref:"http://10.4.4.105:8888/resource/patient/record/uid?pid=9E7A%3B8&uid=urn%3Ava%3Aorder%3A9E7A%3A8%3A38962"},{content:"5' NUCLEOTIDASE BLOOD   SERUM SP *UNSIGNED*\r\n",entered:"20150908104000",kind:"Laboratory",lastUpdateTime:"20150908144019",localId:"38961",locationName:"GENERAL MEDICINE",name:"5' NUCLEOTIDASE ",pid:"9E7A;8",providerDisplayName:"Khan,Vihaan",providerName:"KHAN,VIHAAN",stampTime:"20150908144018",statusName:"UNRELEASED",summary:"5' NUCLEOTIDASE BLOOD   SERUM SP *UNSIGNED*\r\n",uid:"urn:va:order:9E7A:8:38961",uidHref:"http://10.4.4.105:8888/resource/patient/record/uid?pid=9E7A%3B8&uid=urn%3Ava%3Aorder%3A9E7A%3A8%3A38961"}],n=[],i=e.Model.extend({}),o=new i({});o.set("items",t);var r=new i({});r.set("items",n);var a=new i({});return a.set("items",t.concat(n)),{orders:o,notes:r,mixed:a}}),define("main/components/patient/patientHeaderView",["backbone","marionette","underscore","api/Messaging","api/ResourceService","api/SessionStorage","main/components/patient/cwad/cwadDeatilsView","hbs!main/components/patient/patientHeaderTemplate","main/components/patient/detail/patientHeaderDetailView","main/components/patient/modal/demographicDiffModalView","main/components/patient/notes/noteProxyView","main/components/patient/util/modelUtil","api/CCOWService","main/components/patient/smokingStatus/smokingStatusView","api/UrlBuilder","hbs!main/components/patient/detail/patientCareOtherSiteTemplate","hbs!main/components/patient/detail/patientCareOtherSiteRow","main/components/sign/models/signModels"],function(e,t,n,i,o,r,a,s,l,d,c,u,h,p,g,f,m,v){var b,y=i.getChannel("visit"),w=i.getChannel("notesTray"),A=null,N=e.Marionette.LayoutView.extend({template:s,regions:{cwadDetails:"#cwad-details",patientDetailsRegion:"#patient-header-demographic-details",
notesTrayRegion:"#notes-tray",notesOperationsRegion:"#notes-modify-container"},initialize:function(){if(this.model.get("pid")&&(b=this.model.get("pid")),"ActiveXObject"in window&&(this.model.set("useCcow","yes"),this.updateCcowStatus(h.getCcowStatus()),i.on("ccow:updatedStatus",this.updateCcowStatus,this)),this.model.get("cwadf")){var e=this.model.get("cwadf");e.indexOf("C")>=0&&this.model.set("crisisNotes",!0),e.indexOf("W")>=0&&this.model.set("flags",!0),e.indexOf("A")>=0&&this.model.set("allergies",!0),e.indexOf("D")>=0&&this.model.set("directives",!0)}this.model.get("patientRecordFlag")&&this.model.set("patientflags",!0),"Inpatient"==this.model.get("patientStatusClass")&&this.model.set("inPatient",!0);var t=i.getChannel("smokingstatus");t.comply("smokingstatus:change",p.handleStatusChange),t.comply("smokingstatus:updated",this.updateSmokingStatus,this);var n=o.patientRecordService.isPatientInPrimaryVista();n&&(this.listenTo(w,"notestray:show",function(e){console.log("notestray:show"),A=e,this.notesTrayRegion.show(A)}),this.listenTo(w,"notestray:open",function(){console.log("notestray:open"),$("#patientDemographic-notes").find("[data-toggle=dropdown]").dropdown("toggle"),$("#patientDemographic-notes").focus()}))},onRender:function(){if(A=null,this.model.attributes.pid){var t=r.get.sessionModel("patient-image").get("image"),n=this;$.when(t).done(function(t){n.model.set({patientImage:t}),n.$el.find(".cwadfToolTip").tooltip({delay:{show:0,hide:0}});var i=new l({model:n.model});n.patientDetailsRegion.show(i),n.demoRows=new e.Model,n.patientDetailsRegion.on("show",n.configureDemoRows,n),w.trigger("notes:init")})}},modelEvents:{change:"handleModelChange"},events:{"click .cwadLabel":"showCwadDetails","keypress .cwadLabel":"showCwadDetails",'keydown [data-toggle="dropdown"]':"showPatientInfoDropdown","hidden.bs.dropdown .dropdown":function(e){this.$("[data-toggle=popup]").popup("hide"),$(".fa-caret-down",e.currentTarget).addClass("fa-caret-right").removeClass("fa-caret-down")},"shown.bs.dropdown .dropdown":function(e){$(".fa-caret-right",e.currentTarget).removeClass("fa-caret-right").addClass("fa-caret-down"),this.$("[data-toggle=popup]").popup("hide"),$("#notes-tray-dropdown-menu",e.currentTarget).length&&w.trigger("notestray:opening")},"click #leaveContext":"leaveContext","click #joinContext":"joinContext","click #setVisitContextBtn":"setVisitContext","click #addAllergy":"launchAddAllergy","click #addActiveProblem":"launchAddProblem","click #addVitals":"launchAddVitals","click #notes-list-btn":"openNotesClicked","click #addSignature":"launchAddSignature","hide.bs.dropdown #patientDemographic-notes":function(e){$("#notes-list-btn").focus()}},handleModelChange:function(e){var t=this.model.get("pid");b&&t!==b&&this.initialize(),this.render()},openNotesClicked:function(e){A||w.trigger("notes:view")},configureDemoRows:function(){var i="#patientDemographic-providerInfo .primary-provider",a="#patientDemographic-providerInfo .primary-assoc-provider",s="#patientDemographic-providerInfo .mh-treatment-team",l="#patientDemographic-providerInfo .mh-coordinator",d="#patientDemographic-providerInfo .inpatient-attending-provider",c="#patientDemographic-providerInfo .inpatient-provider",h=(o.patientRecordService.getCurrentPatient().get("pid"),r.get.sessionModel("patient-domain").get("data")),p=r.get.sessionModel("user").get("site"),g=this,v={halign:"right",placement:"bottom"},b=t.ItemView.extend({tagName:"tr",template:m}),y=t.CompositeView.extend({childView:b,template:f,childViewContainer:"tbody"});n.each(h,function(t){var n=t.teamInfo,o=t.pid.split(";")[0];if(n&&o.toLowerCase()!==p.toLowerCase()){if(n.primaryProvider&&"unassigned"!==n.primaryProvider.name&&(g.demoRows.get(i)||g.demoRows.set(i,new y({collection:new e.Collection})),g.demoRows.get(i).collection.add(u.addFacilityName(t.pid,new e.Model(n.primaryProvider)))),n.associateProvider&&"unassigned"!==n.associateProvider.name&&(g.demoRows.get(a)||g.demoRows.set(a,new y({collection:new e.Collection})),g.demoRows.get(a).collection.add(u.addFacilityName(t.pid,new e.Model(n.associateProvider)))),n.attendingProvider&&"unassigned"!==n.attendingProvider.name&&(g.demoRows.get(d)||g.demoRows.set(d,new y({collection:new e.Collection})),g.demoRows.get(d).collection.add(u.addFacilityName(t.pid,new e.Model(n.attendingProvider)))),n.inpatientProvider&&"unassigned"!==n.inpatientProvider.name&&(g.demoRows.get(c)||g.demoRows.set(c,new y({collection:new e.Collection})),g.demoRows.get(c).collection.add(u.addFacilityName(t.pid,new e.Model(n.inpatientProvider)))),n.mhCoordinator&&n.mhCoordinator.mhTeam&&"unassigned"!==n.mhCoordinator.mhTeam){g.demoRows.get(s)||g.demoRows.set(s,new y({collection:new e.Collection}));var r=new e.Model(n.mhCoordinator);r.set("name",n.mhCoordinator.mhTeam),r.set("officePhone",n.mhCoordinator.mhTeamOfficePhone),r.set("analogPager",void 0),r.set("digitalPager",void 0),g.demoRows.get(s).collection.add(u.addFacilityName(t.pid,r))}n.mhCoordinator&&"unassigned"!==n.mhCoordinator.name&&(g.demoRows.get(l)||g.demoRows.set(l,new y({collection:new e.Collection})),g.demoRows.get(l).collection.add(u.addFacilityName(t.pid,new e.Model(n.mhCoordinator))))}}),n.each(this.demoRows.attributes,function(e,t){e.render(),g.addAttributes(t);var i=g.patientDetailsRegion.getEl(t);i.popup(n.extend(v,{content:e.$el})),i.on("show.bs.popover",function(e){g.patientDetailsRegion.getEl('[data-toggle="popup"]').not(this).popup("hide")}),i.on("hide.bs.popover",function(e){i.removeClass("toolbarActive")}),i.on("focusin",function(){i.addClass("toolbarActive")})}),this.$("[data-toggle=popup]").on("keydown",function(e){var t=e.which||e.keydode;/(13|32)/.test(t)&&($(this).trigger("click"),e.preventDefault(),e.stopPropagation())})},addAttributes:function(e){var t=this.$(e);t.attr("tabindex","0"),t.attr("data-toggle","popup"),t.attr("role","button"),t.attr("aria-haspopup",!0),t.attr("aria-expanded",!1),t.on("shown.bs.popover",function(e){t.attr("aria-expanded",!0)}),t.on("hidden.bs.popover",function(e){t.attr("aria-expanded",!1)}),t.addClass("selectable")},onDestroy:function(){n.each(this.demoRows.attributes,function(e){e.destroy()}),this.demoRows.destroy()},createCwadDetailView:function(e){return new a({cwadIdentifier:e.cwadIdentifier,cwadDescription:e.cwadDescription,patientModel:this.model})},showPatientInfoDropdown:function(e){(13===e.which||32===e.which)&&$(e.currentTarget).trigger("click")},hidePatientInfoDropdown:function(){this.$el.find(".open").length>=0&&this.$el.find(".open .dropdown-menu").dropdown("toggle")},showCwadDetails:function(e){var t=$(e.target),n=this.$el.find("#cwad-details");if(("click"===e.type||"keypress"===e.type&&(13===e.which||27===e.which))&&"disabled"!==t.attr("data-cwadidentifier"))if(n.attr("data-current-cwad")===t.attr("data-cwadidentifier"))n.toggleClass("hidden"),n.hasClass("hidden")?$("body").off("mousedown"):$("body").on("mousedown",function(){$("#cwad-details").addClass("hidden"),$("body").off("mousedown")}),this.hidePatientInfoDropdown();else{n.hasClass("hidden")&&n.removeClass("hidden"),n.attr("data-current-cwad",t.attr("data-cwadidentifier"));var i={cwadIdentifier:"",cwadDescription:""};switch($(e.target).attr("data-cwadidentifier")){case"C":i.cwadIdentifier="crisis notes",this.cwadDetails.show(this.createCwadDetailView(i));break;case"W":i.cwadIdentifier="warnings",this.cwadDetails.show(this.createCwadDetailView(i));break;case"A":i.cwadIdentifier="allergies",this.cwadDetails.show(this.createCwadDetailView(i));break;case"D":i.cwadIdentifier="directives",i.cwadDescription='"Advance Directives" is under development and may not return all expected results.  Please review the patient record manually to ensure accuracy.',this.cwadDetails.show(this.createCwadDetailView(i));break;case"F":i.cwadIdentifier="patient flags",this.cwadDetails.show(this.createCwadDetailView(i))}$("body").on("mousedown",function(){$("#cwad-details").hasClass("hidden")||($("#cwad-details").addClass("hidden"),$("body").off("mousedown"))}),this.$el.find(".cwadLabel").on("mousedown",function(e){e.stopPropagation()}),n.on("mousedown",function(e){e.stopPropagation()}),$("body").on("keyup",function(e){(13===e.which||27===e.which)&&($("#cwad-details").hasClass("hidden")||($("#cwad-details").addClass("hidden"),$("body").off("mousedown")))}),this.$el.find(".cwadLabel").on("keyup",function(e){(13===e.which||27===e.which)&&e.stopPropagation()}),n.on("keyup",function(e){(13===e.which||27===e.which)&&e.stopPropagation()}),this.hidePatientInfoDropdown()}},updateCcowStatus:function(e){"Connected"===e?this.model.set("ccowConnected","yes"):this.model.set("ccowConnected",""),this.model.set("ccowStatus",e)},updateSmokingStatus:function(e){this.model.set("smokingStatus",e)},leaveContext:function(){h.suspendContext(function(){console.log("successfully left context")})},joinContext:function(){h.resumeContext()},setVisitContext:function(){y.command("openVisitSelector","patientheader")},launchAddAllergy:function(e){e.preventDefault();var t=i.getChannel("addAllergy");t.trigger("addAllergy:clicked",e)},launchAddProblem:function(e){e.preventDefault();var t=i.getChannel("problems");t.command("addProblem")},launchAddVitals:function(e){e.preventDefault();var t=i.getChannel("addVitals");t.trigger("addVitals:clicked",e)},launchAddSignature:function(e){ADK.SignApi.sign(v.mixed,function(e){console.log(e)}),e.preventDefault(),e.stopImmediatePropagation()},handleKeyPress:function(e){e.preventDefault(),(13===e.keyCode||32===e.keyCode)&&this.launchDemographicDiff(e)},launchDemographicDiff:function(e){e.preventDefault()},templateHelpers:{isInVista:function(){return o.patientRecordService.isPatientInPrimaryVista()},hasMhInfo:function(){var e=this.teamInfo&&this.teamInfo.mhCoordinator;return e&&(e.mhTeam&&"unassigned"!==e.mhTeam.toLowerCase()||e.name&&"unassigned"!==e.name)}}});return N}),define("hbs!main/components/navigation/navigationTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div class="panel panel-default all-margin-no">\n	<div class="panel-heading ">\n	</div>\n</div>'},useData:!0});return t.registerPartial("main/components/navigation/navigationTemplate",n),n}),define("main/components/navigation/navigationView",["backbone","marionette","underscore","hbs!main/components/navigation/navigationTemplate"],function(e,t,n,i){var o=e.Marionette.ItemView.extend({template:i,modelEvents:{change:"render"}});return o}),define("hbs!_assets/templates/helpIconLink",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'<div class="btn-sm helpIconLink '+s((o=null!=(o=t.className||(null!=e?e.className:e))?o:a,typeof o===r?o.call(e,{name:"className",hash:{},data:i}):o))+"\">\n	<a id='linkHelp-"+s((o=null!=(o=t.key||(null!=e?e.key:e))?o:a,typeof o===r?o.call(e,{name:"key",hash:{},data:i}):o))+"' class=\"helpIconLinkAnchor\" href='"+s((o=null!=(o=t.url||(null!=e?e.url:e))?o:a,typeof o===r?o.call(e,{name:"url",hash:{},data:i}):o))+'\' target="helpIconUniqueWindow" tooltip-data-key="'+s((o=null!=(o=t.tooltip||(null!=e?e.tooltip:e))?o:a,typeof o===r?o.call(e,{name:"tooltip",hash:{},data:i}):o))+'" tooltip-data-placement="'+s((o=null!=(o=t.tooltip_placement||(null!=e?e.tooltip_placement:e))?o:a,typeof o===r?o.call(e,{name:"tooltip_placement",hash:{},data:i}):o))+'" >\n		<i class="fa fa-question-circle fa-lg"></i>\n        <span class="sr-only">Press enter to access the help content. You will be redirected to a new browser window.</span>\n	</a>\n</div>\n'},useData:!0});return t.registerPartial("_assets/templates/helpIconLink",n),n}),define("_assets/templates/helpers/helpIconLink",["handlebars","main/Utils","hbs!_assets/templates/helpIconLink"],function(e,t,n){function i(e,i,o){"use strict";if(arguments.length<2)throw new Error("Handlerbars Helper 'helpIconLink' needs one parameter");var r={key:e,tooltip:t.helpUtils.getTooltip(e),tooltip_placement:t.helpUtils.getTooltipPlacement(e),url:t.helpUtils.getUrl(e)};return o&&(r.className=i),n(r)}return e.registerHelper("helpIconLink",i),i}),define("hbs!main/components/nav/navTemplate",["hbs","handlebars","_assets/templates/helpers/helpIconLink","_assets/templates/helpers/toTitleCase","_assets/templates/helpers/toLowerCase"],function(e,t){var n=t.template({1:function(e,t,n,i){var o=t.helperMissing,r=this.escapeExpression;return'    <button type="button" class="btn btn-success btn-sm" title="'+r((t.toTitleCase||e&&e.toTitleCase||o).call(e,null!=e?e.patientNavTabTitle:e,{name:"toTitleCase",hash:{},data:i}))+'" id="current-patient-nav-header-tab">'+r((t.toTitleCase||e&&e.toTitleCase||o).call(e,null!=e?e.patientName:e,{name:"toTitleCase",hash:{},data:i}))+"</button>\n"},3:function(e,t,n,i){var o=t.helperMissing,r=this.escapeExpression;return'    <button type="button" class="btn btn-success btn-sm navigation-tab" title="'+r((t.toTitleCase||e&&e.toTitleCase||o).call(e,null!=e?e.finalTitle:e,{name:"toTitleCase",hash:{},data:i}))+'" id="'+r((t.toLowerCase||e&&e.toLowerCase||o).call(e,null!=e?e.finalID:e,{name:"toLowerCase",hash:{},data:i}))+'">'+r((t.toTitleCase||e&&e.toTitleCase||o).call(e,null!=e?e.title:e,{name:"toTitleCase",hash:{},data:i}))+"</button>\n"},5:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'                    <li role="presentation"><a href="#'+s((o=null!=(o=t.pageName||(null!=e?e.pageName:e))?o:a,typeof o===r?o.call(e,{name:"pageName",hash:{},data:i}):o))+'">'+s((o=null!=(o=t.pageName||(null!=e?e.pageName:e))?o:a,typeof o===r?o.call(e,{name:"pageName",hash:{},data:i}):o))+"</a>\n                    </li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s="function",l=this.escapeExpression,d='<nav role="navigation" class="navbar navbar-default">\n    <div id="patientSearchButton" tabIndex="0" href="">\n        <span class="sr-only">, Patient search, Press enter to return to patient search screen,</span>\n        <span class="fa fa-search"></span>\n        <span class="search-icon-text">Patient Selection</span>\n    </div>\n    ';return o=(t.helpIconLink||e&&e.helpIconLink||a).call(e,"patient_search_button","helpIconLinkLeft",{name:"helpIconLink",hash:{},data:i}),null!=o&&(d+=o),d+="\n",o=t["if"].call(e,null!=e?e.patientName:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(d+=o),o=t.each.call(e,null!=e?e.navTabs:e,{name:"each",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+='    <!--<div>\n        <ul class="nav navbar-nav">\n            <li class="dropdown">\n                <a data-target="#" class="dropdown-toggle" data-toggle="dropdown" tabIndex="0">\n                    <span class="sr-only">, Currently selected patient menu, with name,</span>\n                    '+l((r=null!=(r=t.patientName||(null!=e?e.patientName:e))?r:a,typeof r===s?r.call(e,{name:"patientName",hash:{},data:i}):r))+'\n                    <b class="caret"></b>\n                </a>\n                <ul class="dropdown-menu" role="menu">\n                    <p class="navbar-text">Previously Viewed Patients</p>\n                    <li role="presentation">\n                        <a role="menuitem" data-target="#" tabIndex="0">Previous Patient #1</a>\n                    </li>\n                    <li role="presentation">\n                        <a role="menuitem" data-target="#" tabIndex="0">Previous Patient #2</a>\n                    </li>\n                    <li role="presentation">\n                        <a role="menuitem" data-target="#" tabIndex="0">Previous Patient #3</a>\n                    </li>\n                </ul>\n            </li>\n        </ul>\n    </div>-->\n    <div class="navbar-right">\n\n        <ul class="nav navbar-nav">\n            <li class="dropdown">\n                <a id="eHMP-CurrentUser" data-target="#" class="dropdown-toggle" data-toggle="dropdown" tabIndex="0">\n                    <span class="fa fa-user"></span><span class="sr-only">, Current user menu, Press enter, to open menu, , current user,</span>\n                    '+l((r=null!=(r=t.lastname||(null!=e?e.lastname:e))?r:a,typeof r===s?r.call(e,{name:"lastname",hash:{},data:i}):r))+", "+l((r=null!=(r=t.firstname||(null!=e?e.firstname:e))?r:a,typeof r===s?r.call(e,{name:"firstname",hash:{},data:i}):r))+'\n                    <b class="caret"></b>\n                </a>\n                <ul class="dropdown-menu" role="menu">\n                    <div class="container-fluid" role="presentation">\n                        <dt class="text-muted">'+l((r=null!=(r=t.facility||(null!=e?e.facility:e))?r:a,typeof r===s?r.call(e,{name:"facility",hash:{},data:i}):r))+'</dt>\n                        <dd class="text-info">'+l((r=null!=(r=t.title||(null!=e?e.title:e))?r:a,typeof r===s?r.call(e,{name:"title",hash:{},data:i}):r))+'</dd>\n                    </div>\n                    <li class="divider"></li>\n',o=t.each.call(e,null!=e?e.pages:e,{name:"each",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+='                    <li role="presentation">\n                        <a id="logoutButton" role="menuitem" tabindex="0">\n                            <span class="sr-only">, Sign out button, Press enter, to sign out and return to logon screen,</span>\n                            <span class="fa fa-power-off"></span>&nbsp; Sign Out</a>\n                    </li>\n                </ul>\n            </li>\n        </ul>\n    </div>\n    ',o=(t.helpIconLink||e&&e.helpIconLink||a).call(e,"user_info","helpIconLinkRight",{name:"helpIconLink",hash:{},data:i}),null!=o&&(d+=o),d+"\n</nav>\n"},useData:!0});return t.registerPartial("main/components/nav/navTemplate",n),n}),define("main/components/nav/navView",["backbone","marionette","underscore","hbs!main/components/nav/navTemplate","api/UserService","api/Messaging","api/Navigation","api/ResourceService","api/UserDefinedScreens","main/Session"],function(e,t,n,i,o,r,a,s,l,d){"use strict";return e.Marionette.ItemView.extend({model:o.getUserSession(),template:i,className:"col-md-12 appNav",events:{"click #logoutButton":"logout","click #patientSearchButton":"patientSearch","click #current-patient-nav-header-tab":"navigateToOverview"},modelEvents:{change:"render"},initialize:function(){this.updatePatientName(),this.listenTo(d.patient,"change:fullName",this.updatePatientName);var e=this,t=l.getScreensConfig();t.done(function(t){var i=n.filter(t.screens,function(e){var t=!0;n.isUndefined(e.hasPermission)||e.Permission!==!1||(t=!1);var i=!1;return n.isUndefined(e.addNavigationTab)||e.addNavigationTab!==!0||(i=!0),e.addNavigationTab===!0&&t===!0});e.model.set("navTabs",i),n.each(e.model.get("navTabs"),function(t){t.finalID=t.id.toLowerCase()+"-nav-header-tab",t.finalTitle=t.title+" navigation tab",e.events["click #"+t.finalID]=function(){a.navigate(t.routeName)}})})},navigateToOverview:function(e){e.preventDefault(),a.navigate("overview")},logout:function(){r.trigger("app:logout")},patientSearch:function(e){e.preventDefault(),a.navigate("patient-search-screen")},updatePatientName:function(){var e=s.patientRecordService.getCurrentPatient().get("fullName");n.isUndefined(e)?(this.model.unset("patientName"),this.model.unset("patientNavTabTitle")):this.model.set({patientName:s.patientRecordService.getCurrentPatient().get("fullName"),patientNavTabTitle:s.patientRecordService.getCurrentPatient().get("fullName")+" Overview Screen navigation tab"})}})}),define("hbs!main/components/applet-tester-nav/navTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<nav role="navigation" class="navbar navbar-default">\n    <div>\n      <ul class="nav navbar-nav">\n        <li><a href="#full">Full</a></li>\n        <li><a href="#half">Half</a></li>\n        <li><a href="#quarter">Quarter</a></li>\n      </ul>\n    </div>\n</nav>'},useData:!0});return t.registerPartial("main/components/applet-tester-nav/navTemplate",n),n}),define("main/components/applet-tester-nav/navView",["backbone","marionette","underscore","hbs!main/components/applet-tester-nav/navTemplate"],function(e,t,n,i){return e.Marionette.ItemView.extend({template:i,className:"col-md-12 navbar-fixed-top heightSmall"})}),define("hbs!main/components/blankNav/navTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<nav role="navigation" class="navbar navbar-default">\n	<div class="navbar-header"><a href="/" class="navbar-brand"><span class="fa fa-home"></span>&nbsp;<b>eHMP</b></a></div>\n</nav>'},useData:!0});return t.registerPartial("main/components/blankNav/navTemplate",n),n}),define("main/components/blankNav/navView",["backbone","marionette","underscore","hbs!main/components/blankNav/navTemplate"],function(e,t,n,i){return e.Marionette.ItemView.extend({template:i,className:"col-md-12 navbar-fixed-top"})}),define("hbs!main/components/footer/footerTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'<div class="well well-sm">\n    <div id="patientSyncStatusRegion" class="pull-right"></div>\n    <span id="appVersion">\n    	<b>eHMP</b> version '+s((o=null!=(o=t.overall_version||(null!=e?e.overall_version:e))?o:a,typeof o===r?o.call(e,{name:"overall_version",hash:{},data:i}):o))+"\n    </span>\n</div>"},useData:!0});return t.registerPartial("main/components/footer/footerTemplate",n),n}),define("hbs!main/components/footer/patientSyncStatusTemplate",["hbs","handlebars","_assets/templates/helpers/compare","_assets/templates/helpers/helpIconLink"],function(e,t){var n=t.template({1:function(e,t,n,i){var o,r=t.helperMissing,a='<button class="btn btn-default btn-sm " id="refresh-patient-data">\n    Refresh All Data\n</button>\n\n';return o=t.each.call(e,null!=e?e.syncStatus:e,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=o&&(a+=o),a+='\n<button class="btn btn-default btn-sm" id="open-sync-modal">\n    <i class="fa fa-angle-double-up fa-2x"></i>\n</button>\n',o=(t.helpIconLink||e&&e.helpIconLink||r).call(e,"status_bar","helpIconLinkRightDown",{name:"helpIconLink",hash:{},data:i}),null!=o&&(a+=o),a+"\n"},2:function(e,t,n,i){var o,r=" ";return o=t["if"].call(e,null!=e?e.completed:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.program(17,i),data:i}),null!=o&&(r+=o),r+" "},3:function(e,t,n,i){var o,r=t.helperMissing,a=" ";return o=(t.compare||e&&e.compare||r).call(e,null!=e?e.completed:e,!0,{name:"compare",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=o&&(a+=o),a+=" ",o=(t.compare||e&&e.compare||r).call(e,null!=e?e.completed:e,"error",{name:"compare",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=o&&(a+=o),a+" "},4:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d='\n<span tabindex="0" class="patient-status-icon" type="button" data-toggle="tooltip" data-html="true" data-placement="top" data-original-title="<div style=\'margin-bottom:5px\'>'+l((r=null!=(r=t.hoverTip||(null!=e?e.hoverTip:e))?r:s,typeof r===a?r.call(e,{name:"hoverTip",hash:{},data:i}):r))+"</div> Last refreshed";return o=t["if"].call(e,null!=e?e.timeStamp:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(7,i),data:i}),null!=o&&(d+=o),d+=" ",o=t["if"].call(e,null!=e?e.newDataSince:e,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+='">\n',o=t["if"].call(e,null!=e?e.newDataSince:e,{name:"if",hash:{},fn:this.program(11,i),inverse:this.program(13,i),data:i}),null!=o&&(d+=o),d+'    <span class="sr-only">\n        synced as of '+l((r=null!=(r=t.timeStamp||(null!=e?e.timeStamp:e))?r:s,typeof r===a?r.call(e,{name:"timeStamp",hash:{},data:i}):r))+".\n    </span>\n</span>\n"},5:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return" "+s((o=null!=(o=t.timeStamp||(null!=e?e.timeStamp:e))?o:a,typeof o===r?o.call(e,{name:"timeStamp",hash:{},data:i}):o))+" ago "},7:function(e,t,n,i){return" Current "},9:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return" <br/> New data since "+s((o=null!=(o=t.newDataSince||(null!=e?e.newDataSince:e))?o:a,typeof o===r?o.call(e,{name:"newDataSince",hash:{},data:i}):o))+" ago"},11:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'    <i class="text-warning fa fa-clock-o"></i> '+s((o=null!=(o=t.title||(null!=e?e.title:e))?o:a,typeof o===r?o.call(e,{name:"title",hash:{},data:i}):o))+"\n"},13:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'    <i class="text-success fa fa-check-circle"></i> '+s((o=null!=(o=t.title||(null!=e?e.title:e))?o:a,typeof o===r?o.call(e,{name:"title",hash:{},data:i}):o))+"\n"},15:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'\n<span tabindex="0" class="patient-status-icon" data-toggle="tooltip" data-html="true" data-placement="top" data-original-title="<div style=\'margin-bottom:5px\'>'+s((o=null!=(o=t.hoverTip||(null!=e?e.hoverTip:e))?o:a,typeof o===r?o.call(e,{name:"hoverTip",hash:{},data:i}):o))+'</div> Error detected during refresh." >\n    <i class="text-error fa fa-minus-circle"></i> '+s((o=null!=(o=t.title||(null!=e?e.title:e))?o:a,typeof o===r?o.call(e,{name:"title",hash:{},data:i}):o))+'\n    <span class="sr-only">sync error.</span>\n</span>\n'},17:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'\n<span tabindex="0" class="patient-status-icon loading-muted" data-toggle="tooltip" type="button" data-html="true" data-placement="top" data-original-title="<div style=\'margin-bottom:5px\'>'+s((o=null!=(o=t.hoverTip||(null!=e?e.hoverTip:e))?o:a,typeof o===r?o.call(e,{name:"hoverTip",hash:{},data:i}):o))+'</div> Refreshing...">\n    <i class="fa fa-spinner fa-spin"></i> '+s((o=null!=(o=t.title||(null!=e?e.title:e))?o:a,typeof o===r?o.call(e,{name:"title",hash:{},data:i}):o))+'\n    <span class="sr-only">Last synced.</span>\n</span>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r="";return o=t["if"].call(e,null!=e?e.syncStatus:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(r+=o),r},useData:!0});return t.registerPartial("main/components/footer/patientSyncStatusTemplate",n),n}),function(){function e(e){var n=!1;return function(){if(n)throw new Error("Callback was already called.");n=!0,e.apply(t,arguments)}}var t,n,i={};t=this,null!=t&&(n=t.async),i.noConflict=function(){return t.async=n,i};var o=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n+=1)t(e[n],n,e)},r=function(e,t){if(e.map)return e.map(t);var n=[];return o(e,function(e,i,o){n.push(t(e,i,o))}),n},a=function(e,t,n){return e.reduce?e.reduce(t,n):(o(e,function(e,i,o){n=t(n,e,i,o)}),n)},s=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};"undefined"!=typeof process&&process.nextTick?(i.nextTick=process.nextTick,"undefined"!=typeof setImmediate?i.setImmediate=setImmediate:i.setImmediate=i.nextTick):"function"==typeof setImmediate?(i.nextTick=function(e){setImmediate(e)},i.setImmediate=i.nextTick):(i.nextTick=function(e){setTimeout(e,0)},i.setImmediate=i.nextTick),i.each=function(t,n,i){if(i=i||function(){},!t.length)return i();var r=0;o(t,function(o){n(o,e(function(e){e?(i(e),i=function(){}):(r+=1,r>=t.length&&i(null))}))})},i.forEach=i.each,i.eachSeries=function(e,t,n){if(n=n||function(){},!e.length)return n();var i=0,o=function(){t(e[i],function(t){t?(n(t),n=function(){}):(i+=1,i>=e.length?n(null):o())})};o()},i.forEachSeries=i.eachSeries,i.eachLimit=function(e,t,n,i){var o=l(t);o.apply(null,[e,n,i])},i.forEachLimit=i.eachLimit;var l=function(e){return function(t,n,i){if(i=i||function(){},!t.length||0>=e)return i();var o=0,r=0,a=0;!function s(){if(o>=t.length)return i();for(;e>a&&r<t.length;)r+=1,a+=1,n(t[r-1],function(e){e?(i(e),i=function(){}):(o+=1,a-=1,o>=t.length?i():s())})}()}},d=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[i.each].concat(t))}},c=function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[l(e)].concat(n))}},u=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[i.eachSeries].concat(t))}},h=function(e,t,n,i){var o=[];t=r(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n,i){o[e.index]=i,t(n)})},function(e){i(e,o)})};i.map=d(h),i.mapSeries=u(h),i.mapLimit=function(e,t,n,i){return p(t)(e,n,i)};var p=function(e){return c(e,h)};i.reduce=function(e,t,n,o){i.eachSeries(e,function(e,i){n(t,e,function(e,n){t=n,i(e)})},function(e){o(e,t)})},i.inject=i.reduce,i.foldl=i.reduce,i.reduceRight=function(e,t,n,o){var a=r(e,function(e){return e}).reverse();i.reduce(a,t,n,o)},i.foldr=i.reduceRight;var g=function(e,t,n,i){var o=[];t=r(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n&&o.push(e),t()})},function(e){i(r(o.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};i.filter=d(g),i.filterSeries=u(g),i.select=i.filter,i.selectSeries=i.filterSeries;var f=function(e,t,n,i){var o=[];t=r(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n||o.push(e),t()})},function(e){i(r(o.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};i.reject=d(f),i.rejectSeries=u(f);var m=function(e,t,n,i){e(t,function(e,t){n(e,function(n){n?(i(e),i=function(){}):t()})},function(e){i()})};i.detect=d(m),i.detectSeries=u(m),i.some=function(e,t,n){i.each(e,function(e,i){t(e,function(e){e&&(n(!0),n=function(){}),i()})},function(e){n(!1)})},i.any=i.some,i.every=function(e,t,n){i.each(e,function(e,i){t(e,function(e){e||(n(!1),n=function(){}),i()})},function(e){n(!0)})},i.all=i.every,i.sortBy=function(e,t,n){i.map(e,function(e,n){t(e,function(t,i){t?n(t):n(null,{value:e,criteria:i})})},function(e,t){if(e)return n(e);var i=function(e,t){var n=e.criteria,i=t.criteria;return i>n?-1:n>i?1:0};n(null,r(t.sort(i),function(e){return e.value}))})},i.auto=function(e,t){t=t||function(){};var n=s(e);if(!n.length)return t(null);var r={},l=[],d=function(e){l.unshift(e)},c=function(e){for(var t=0;t<l.length;t+=1)if(l[t]===e)return void l.splice(t,1)},u=function(){o(l.slice(0),function(e){e()})};d(function(){s(r).length===n.length&&(t(null,r),t=function(){})}),o(n,function(n){var l=e[n]instanceof Function?[e[n]]:e[n],h=function(e){var a=Array.prototype.slice.call(arguments,1);if(a.length<=1&&(a=a[0]),e){var l={};o(s(r),function(e){l[e]=r[e]}),l[n]=a,t(e,l),t=function(){}}else r[n]=a,i.setImmediate(u)},p=l.slice(0,Math.abs(l.length-1))||[],g=function(){return a(p,function(e,t){return e&&r.hasOwnProperty(t)},!0)&&!r.hasOwnProperty(n)};if(g())l[l.length-1](h,r);else{var f=function(){g()&&(c(f),l[l.length-1](h,r))};d(f)}})},i.waterfall=function(e,t){if(t=t||function(){},e.constructor!==Array){var n=new Error("First argument to waterfall must be an array of functions");return t(n)}if(!e.length)return t();var o=function(e){return function(n){if(n)t.apply(null,arguments),t=function(){};else{var r=Array.prototype.slice.call(arguments,1),a=e.next();a?r.push(o(a)):r.push(t),i.setImmediate(function(){e.apply(null,r)})}}};o(i.iterator(e))()};var v=function(e,t,n){if(n=n||function(){},t.constructor===Array)e.map(t,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},n);else{var i={};e.each(s(t),function(e,n){t[e](function(t){var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),i[e]=o,n(t)})},function(e){n(e,i)})}};i.parallel=function(e,t){v({map:i.map,each:i.each},e,t)},i.parallelLimit=function(e,t,n){v({map:p(t),
each:l(t)},e,n)},i.series=function(e,t){if(t=t||function(){},e.constructor===Array)i.mapSeries(e,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},t);else{var n={};i.eachSeries(s(e),function(t,i){e[t](function(e){var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),n[t]=o,i(e)})},function(e){t(e,n)})}},i.iterator=function(e){var t=function(n){var i=function(){return e.length&&e[n].apply(null,arguments),i.next()};return i.next=function(){return n<e.length-1?t(n+1):null},i};return t(0)},i.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var b=function(e,t,n,i){var o=[];e(t,function(e,t){n(e,function(e,n){o=o.concat(n||[]),t(e)})},function(e){i(e,o)})};i.concat=d(b),i.concatSeries=u(b),i.whilst=function(e,t,n){e()?t(function(o){return o?n(o):void i.whilst(e,t,n)}):n()},i.doWhilst=function(e,t,n){e(function(o){return o?n(o):void(t()?i.doWhilst(e,t,n):n())})},i.until=function(e,t,n){e()?n():t(function(o){return o?n(o):void i.until(e,t,n)})},i.doUntil=function(e,t,n){e(function(o){return o?n(o):void(t()?n():i.doUntil(e,t,n))})},i.queue=function(t,n){function r(e,t,r,a){t.constructor!==Array&&(t=[t]),o(t,function(t){var o={data:t,callback:"function"==typeof a?a:null};r?e.tasks.unshift(o):e.tasks.push(o),e.saturated&&e.tasks.length===n&&e.saturated(),i.setImmediate(e.process)})}void 0===n&&(n=1);var a=0,s={tasks:[],concurrency:n,saturated:null,empty:null,drain:null,push:function(e,t){r(s,e,!1,t)},unshift:function(e,t){r(s,e,!0,t)},process:function(){if(a<s.concurrency&&s.tasks.length){var n=s.tasks.shift();s.empty&&0===s.tasks.length&&s.empty(),a+=1;var i=function(){a-=1,n.callback&&n.callback.apply(n,arguments),s.drain&&s.tasks.length+a===0&&s.drain(),s.process()},o=e(i);t(n.data,o)}},length:function(){return s.tasks.length},running:function(){return a}};return s},i.cargo=function(e,t){var n=!1,a=[],s={tasks:a,payload:t,saturated:null,empty:null,drain:null,push:function(e,n){e.constructor!==Array&&(e=[e]),o(e,function(e){a.push({data:e,callback:"function"==typeof n?n:null}),s.saturated&&a.length===t&&s.saturated()}),i.setImmediate(s.process)},process:function l(){if(!n){if(0===a.length)return void(s.drain&&s.drain());var i="number"==typeof t?a.splice(0,t):a.splice(0),d=r(i,function(e){return e.data});s.empty&&s.empty(),n=!0,e(d,function(){n=!1;var e=arguments;o(i,function(t){t.callback&&t.callback.apply(null,e)}),l()})}},length:function(){return a.length},running:function(){return n}};return s};var y=function(e){return function(t){var n=Array.prototype.slice.call(arguments,1);t.apply(null,n.concat([function(t){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&o(n,function(t){console[e](t)}))}]))}};i.log=y("log"),i.dir=y("dir"),i.memoize=function(e,t){var n={},i={};t=t||function(e){return e};var o=function(){var o=Array.prototype.slice.call(arguments),r=o.pop(),a=t.apply(null,o);a in n?r.apply(null,n[a]):a in i?i[a].push(r):(i[a]=[r],e.apply(null,o.concat([function(){n[a]=arguments;var e=i[a];delete i[a];for(var t=0,o=e.length;o>t;t++)e[t].apply(null,arguments)}])))};return o.memo=n,o.unmemoized=e,o},i.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},i.times=function(e,t,n){for(var o=[],r=0;e>r;r++)o.push(r);return i.map(o,t,n)},i.timesSeries=function(e,t,n){for(var o=[],r=0;e>r;r++)o.push(r);return i.mapSeries(o,t,n)},i.compose=function(){var e=Array.prototype.reverse.call(arguments);return function(){var t=this,n=Array.prototype.slice.call(arguments),o=n.pop();i.reduce(e,n,function(e,n,i){n.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);i(e,t)}]))},function(e,n){o.apply(t,[e].concat(n))})}};var w=function(e,t){var n=function(){var n=this,i=Array.prototype.slice.call(arguments),o=i.pop();return e(t,function(e,t){e.apply(n,i.concat([t]))},o)};if(arguments.length>2){var i=Array.prototype.slice.call(arguments,2);return n.apply(this,i)}return n};i.applyEach=d(w),i.applyEachSeries=u(w),i.forever=function(e,t){function n(i){if(i){if(t)return t(i);throw i}e(n)}n()},"undefined"!=typeof define&&define.amd?define("async",[],function(){return i}):"undefined"!=typeof module&&module.exports?module.exports=i:t.async=i}(),define("hbs!main/components/footer/views/syncModalTemplate",["hbs","handlebars","_assets/templates/helpers/compare"],function(e,t){var n=t.template({1:function(e,t,n,i){var o,r=t.helperMissing,a='      <li role="list-item" data-source="mySite" class="';return o=(t.compare||e&&e.compare||r).call(e,null!=(o=null!=e?e.selectedSource:e)?o.sourceName:o,"mySite",{name:"compare",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=o&&(a+=o),a+='">\n        <div>\n',o=(t.compare||e&&e.compare||r).call(e,null!=(o=null!=e?e.mySite:e)?o.status:o,"completed",{name:"compare",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=o&&(a+=o),o=(t.compare||e&&e.compare||r).call(e,null!=(o=null!=e?e.mySite:e)?o.status:o,"inProgress",{name:"compare",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=o&&(a+=o),o=(t.compare||e&&e.compare||r).call(e,null!=(o=null!=e?e.mySite:e)?o.status:o,"needsRefresh",{name:"compare",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=o&&(a+=o),o=(t.compare||e&&e.compare||r).call(e,null!=(o=null!=e?e.mySite:e)?o.status:o,"error",{name:"compare",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=o&&(a+=o),a+='          My Site\n        </div>\n        <div class="source-sync-details">\n          <div>New data since ',o=t["if"].call(e,null!=(o=null!=e?e.mySite:e)?o.newDataSince:o,{name:"if",hash:{},fn:this.program(15,i),inverse:this.program(17,i),data:i}),null!=o&&(a+=o),a+"</div>\n        </div>\n      </li>\n"},2:function(e,t,n,i){return"selected"},4:function(e,t,n,i){var o,r="";return o=t["if"].call(e,null!=(o=null!=e?e.mySite:e)?o.newDataSince:o,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(7,i),data:i}),null!=o&&(r+=o),r},5:function(e,t,n,i){return'                <i class="fa fa-refresh"></i>\n'},7:function(e,t,n,i){return'                <i class="fa fa-check-circle"></i>\n'},9:function(e,t,n,i){return'              <i class="fa fa-spinner fa-spin"></i>\n'},11:function(e,t,n,i){return'              <i class="fa fa-clock-o"></i>\n'},13:function(e,t,n,i){return'              <i class="fa fa-exclamation-circle"></i>\n'},15:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return" "+a(r(null!=(o=null!=e?e.mySite:e)?o.newDataSince:o,e))+" "},17:function(e,t,n,i){return" Current "},19:function(e,t,n,i){var o,r=t.helperMissing,a='     <li role="list-item" data-source="allVa" class="';return o=(t.compare||e&&e.compare||r).call(e,null!=(o=null!=e?e.selectedSource:e)?o.sourceName:o,"allVa",{name:"compare",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=o&&(a+=o),a+='">\n        <div>\n',o=(t.compare||e&&e.compare||r).call(e,null!=(o=null!=e?e.allVa:e)?o.status:o,"completed",{name:"compare",hash:{},fn:this.program(20,i),inverse:this.noop,data:i}),null!=o&&(a+=o),o=(t.compare||e&&e.compare||r).call(e,null!=(o=null!=e?e.allVa:e)?o.status:o,"inProgress",{name:"compare",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=o&&(a+=o),o=(t.compare||e&&e.compare||r).call(e,null!=(o=null!=e?e.allVa:e)?o.status:o,"needsRefresh",{name:"compare",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=o&&(a+=o),o=(t.compare||e&&e.compare||r).call(e,null!=(o=null!=e?e.allVa:e)?o.status:o,"error",{name:"compare",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=o&&(a+=o),a+='          All VA\n         </div>\n         <div class="source-sync-details">\n            <div>Last refresh ',o=t["if"].call(e,null!=(o=null!=e?e.allVa:e)?o.mostRecentTime:o,{name:"if",hash:{},fn:this.program(23,i),inverse:this.noop,data:i}),null!=o&&(a+=o),a+="<div>\n            <div>New data since ",o=t["if"].call(e,null!=(o=null!=e?e.allVa:e)?o.newDataSince:o,{name:"if",hash:{},fn:this.program(26,i),inverse:this.program(17,i),data:i}),null!=o&&(a+=o),a+"</div>\n         </div>\n      </li>\n"},20:function(e,t,n,i){var o,r="";return o=t["if"].call(e,null!=(o=null!=e?e.allVa:e)?o.newDataSince:o,{name:"if",hash:{},fn:this.program(21,i),inverse:this.program(7,i),data:i}),null!=o&&(r+=o),r},21:function(e,t,n,i){return'                <i class="fa fa-clock-o"></i>\n'},23:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s=a(r(null!=(o=null!=e?e.allVa:e)?o.mostRecentTime:o,e))+" ";return o=t["if"].call(e,null!=(o=null!=e?e.allVa:e)?o.leastRecentTime:o,{name:"if",hash:{},fn:this.program(24,i),inverse:this.noop,data:i}),null!=o&&(s+=o),s+" ago"},24:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return" - "+a(r(null!=(o=null!=e?e.allVa:e)?o.leastRecentTime:o,e))},26:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return" "+a(r(null!=(o=null!=e?e.allVa:e)?o.newDataSince:o,e))+" "},28:function(e,t,n,i){var o,r=t.helperMissing,a='      <li role="list-item" data-source="dod" class="';return o=(t.compare||e&&e.compare||r).call(e,null!=(o=null!=e?e.selectedSource:e)?o.sourceName:o,"dod",{name:"compare",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=o&&(a+=o),a+='">\n        <div>\n',o=(t.compare||e&&e.compare||r).call(e,null!=(o=null!=e?e.dod:e)?o.status:o,"completed",{name:"compare",hash:{},fn:this.program(29,i),inverse:this.noop,data:i}),null!=o&&(a+=o),o=(t.compare||e&&e.compare||r).call(e,null!=(o=null!=e?e.dod:e)?o.status:o,"inProgress",{name:"compare",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=o&&(a+=o),o=(t.compare||e&&e.compare||r).call(e,null!=(o=null!=e?e.dod:e)?o.status:o,"error",{name:"compare",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=o&&(a+=o),a+='          DoD\n        </div>\n        <div class="source-sync-details">\n          <div>Last refresh ',o=t["if"].call(e,null!=(o=null!=e?e.dod:e)?o.mostRecentTime:o,{name:"if",hash:{},fn:this.program(31,i),inverse:this.noop,data:i}),null!=o&&(a+=o),a+"<div>\n        </div>\n      </li>\n"},29:function(e,t,n,i){return'              <i class="fa fa-check-circle"></i>\n'},31:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return a(r(null!=(o=null!=e?e.dod:e)?o.mostRecentTime:o,e))+" ago"},33:function(e,t,n,i){var o,r=t.helperMissing,a='      <li role="list-item" data-source="communities" class="';return o=(t.compare||e&&e.compare||r).call(e,null!=(o=null!=e?e.selectedSource:e)?o.sourceName:o,"communities",{name:"compare",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=o&&(a+=o),a+='">\n        <div>\n',o=(t.compare||e&&e.compare||r).call(e,null!=(o=null!=e?e.communities:e)?o.status:o,"completed",{name:"compare",hash:{},fn:this.program(29,i),inverse:this.noop,data:i}),null!=o&&(a+=o),o=(t.compare||e&&e.compare||r).call(e,null!=(o=null!=e?e.communities:e)?o.status:o,"inProgress",{name:"compare",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=o&&(a+=o),o=(t.compare||e&&e.compare||r).call(e,null!=(o=null!=e?e.communities:e)?o.status:o,"error",{name:"compare",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=o&&(a+=o),a+='          Communities\n        </div>\n        <div class="source-sync-details">\n          <div>Last refresh ',o=t["if"].call(e,null!=(o=null!=e?e.communities:e)?o.mostRecentTime:o,{name:"if",hash:{},fn:this.program(34,i),inverse:this.noop,data:i}),null!=o&&(a+=o),a+"<div>\n        </div>\n      </li>\n"},34:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return a(r(null!=(o=null!=e?e.communities:e)?o.mostRecentTime:o,e))+" ago"},36:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'        <p id="force-site-sync-status-success" class="bg-success"><b>'+s((o=null!=(o=t.currentDateTime||(null!=e?e.currentDateTime:e))?o:a,typeof o===r?o.call(e,{name:"currentDateTime",hash:{},data:i}):o))+' - Refresh was successful</b><button id="msg-successful-sync" type="button" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button></p>\n'},38:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'        <p id="force-site-sync-status-error" class="bg-danger"><b>'+s((o=null!=(o=t.currentDateTime||(null!=e?e.currentDateTime:e))?o:a,typeof o===r?o.call(e,{name:"currentDateTime",hash:{},data:i}):o))+' - Error detected during sync</b><button id="msg-failed-sync" type="button" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button></p>\n'},40:function(e,t,n,i){return'         disabled="disabled"><span><i class="fa fa-spinner fa-spin"></i> Refreshing</span>\n'},42:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return"        >Refresh "+a(r(null!=(o=null!=e?e.selectedSource:e)?o.sourceDisplayName:o,e))+"\n"},44:function(e,t,n,i){var o,r=t.helperMissing,a='          <th scope="col" class="sortable renderable site" id="sync-detail-header-site">\n            <a>Site</a>\n';return o=(t.compare||e&&e.compare||r).call(e,null!=e?e.sortColumn:e,"siteDisplayName",{name:"compare",hash:{},fn:this.program(45,i),inverse:this.noop,data:i}),null!=o&&(a+=o),a+"             \n          </th>\n"},45:function(e,t,n,i){var o,r=t.helperMissing,a='              <b class="fa \n';return o=(t.compare||e&&e.compare||r).call(e,null!=e?e.sortOrder:e,"asc",{name:"compare",hash:{},fn:this.program(46,i),inverse:this.noop,data:i}),null!=o&&(a+=o),o=(t.compare||e&&e.compare||r).call(e,null!=e?e.sortOrder:e,"desc",{name:"compare",hash:{},fn:this.program(48,i),inverse:this.noop,data:i}),null!=o&&(a+=o),a+'              "></b>\n'},46:function(e,t,n,i){return"                fa-caret-up\n"},48:function(e,t,n,i){return"                fa-caret-down\n"},50:function(e,t,n,i){var o,r=t.helperMissing,a='          <th scope="col" class="sortable renderable new-data-since" id="sync-detail-header-new-data-since">\n            <a>New Data Since</a>\n';return o=(t.compare||e&&e.compare||r).call(e,null!=e?e.sortColumn:e,"newDataSince",{name:"compare",hash:{},fn:this.program(45,i),inverse:this.noop,data:i}),null!=o&&(a+=o),a+"          </th>\n"},52:function(e,t,n,i,o){var r,a=t.helperMissing,s=this.lambda,l=this.escapeExpression,d="          <tr>\n";return r=(t.compare||e&&e.compare||a).call(e,null!=(r=null!=o[1]?o[1].selectedSource:o[1])?r.sourceName:r,"allVa",{name:"compare",hash:{},fn:this.program(53,i,o),inverse:this.noop,data:i}),null!=r&&(d+=r),d+='            <td class="handlebars-cell sortable renderable">'+l(s(null!=e?e.domainDisplayName:e,e))+'</td>\n            <td class="handlebars-cell sortable renderable">\n',r=(t.compare||e&&e.compare||a).call(e,null!=e?e.status:e,"completed",{name:"compare",hash:{},fn:this.program(55,i,o),inverse:this.noop,data:i}),null!=r&&(d+=r),r=(t.compare||e&&e.compare||a).call(e,null!=e?e.status:e,"inProgress",{name:"compare",hash:{},fn:this.program(60,i,o),inverse:this.noop,data:i}),null!=r&&(d+=r),r=(t.compare||e&&e.compare||a).call(e,null!=e?e.status:e,"error",{name:"compare",hash:{},fn:this.program(62,i,o),inverse:this.noop,data:i}),null!=r&&(d+=r),d+="            </td>\n",r=(t.compare||e&&e.compare||a).call(e,null!=(r=null!=o[1]?o[1].selectedSource:o[1])?r.sourceType:r,"primary",{name:"compare",hash:{},fn:this.program(64,i,o),inverse:this.noop,data:i}),null!=r&&(d+=r),d+"          </tr>\n"},53:function(e,t,n,i){var o=this.lambda,r=this.escapeExpression;return'              <td class="handlebars-cell sortable renderable">'+r(o(null!=e?e.siteDisplayName:e,e))+"</td>\n"},55:function(e,t,n,i){var o,r=t.helperMissing,a="";return o=(t.compare||e&&e.compare||r).call(e,null!=e?e.siteType:e,"secondary",{name:"compare",hash:{},fn:this.program(56,i),inverse:this.noop,data:i}),null!=o&&(a+=o),o=(t.compare||e&&e.compare||r).call(e,null!=e?e.siteType:e,"primary",{name:"compare",hash:{},fn:this.program(58,i),inverse:this.noop,data:i}),null!=o&&(a+=o),a},56:function(e,t,n,i){var o=this.lambda,r=this.escapeExpression;return"                  "+r(o(null!=e?e.displayTime:e,e))+" ago\n"},58:function(e,t,n,i){return"                  Current\n"},60:function(e,t,n,i){return'                <span><i class="fa fa-spinner fa-spin"></i> Refreshing</span>\n'},62:function(e,t,n,i){return'                  <span class="sync-failed-text"><i class="fa fa-exclamation-circle"></i> Refresh failed</span>\n'},64:function(e,t,n,i){var o,r='              <td class="handlebars-cell sortable renderable">';return o=t["if"].call(e,null!=e?e.newDataSince:e,{name:"if",hash:{},fn:this.program(65,i),inverse:this.program(67,i),data:i}),null!=o&&(r+=o),r+"</td>\n"},65:function(e,t,n,i){var o=this.lambda,r=this.escapeExpression;return r(o(null!=e?e.displayNewDataSince:e,e))},67:function(e,t,n,i){return"Current"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i,o){var r,a=this.lambda,s=this.escapeExpression,l=t.helperMissing,d='<div id="sync-status-modal" class="row">\n  <div id="source-list-panel" class="col-md-3">\n    <p>\n      <b>Source</b>\n    </p>\n    <ul id="sync-source-sites" role="list">\n';return r=t["if"].call(e,null!=e?e.mySite:e,{name:"if",hash:{},fn:this.program(1,i,o),inverse:this.noop,data:i}),null!=r&&(d+=r),r=t["if"].call(e,null!=e?e.allVa:e,{name:"if",hash:{},fn:this.program(19,i,o),inverse:this.noop,data:i}),null!=r&&(d+=r),r=t["if"].call(e,null!=e?e.dod:e,{name:"if",hash:{},fn:this.program(28,i,o),inverse:this.noop,data:i}),null!=r&&(d+=r),r=t["if"].call(e,null!=e?e.communities:e,{name:"if",hash:{},fn:this.program(33,i,o),inverse:this.noop,data:i}),null!=r&&(d+=r),d+='    </ul>\n  </div>\n  <div id="sync-site-detail" class="col-md-9">\n    <div id="force-site-sync-status" class="row">\n',r=t["if"].call(e,null!=e?e.msgSuccessfulSync:e,{name:"if",hash:{},fn:this.program(36,i,o),inverse:this.noop,data:i}),null!=r&&(d+=r),r=t["if"].call(e,null!=e?e.msgFailedSync:e,{name:"if",hash:{},fn:this.program(38,i,o),inverse:this.noop,data:i}),null!=r&&(d+=r),d+='    </div>\n    <div id="sync-site-detail-header" class="row">\n      <h4 class="col-md-4">'+s(a(null!=(r=null!=e?e.selectedSource:e)?r.sourceDisplayName:r,e))+'</h4>\n      <button class="btn btn-primary" id="force-source-sync"\n',r=(t.compare||e&&e.compare||l).call(e,null!=e?e.forceSyncStatus:e,"inProgress",{name:"compare",hash:{},fn:this.program(40,i,o),inverse:this.noop,data:i}),null!=r&&(d+=r),r=(t.compare||e&&e.compare||l).call(e,null!=e?e.forceSyncStatus:e,"completed",{name:"compare",hash:{},fn:this.program(42,i,o),inverse:this.noop,data:i}),null!=r&&(d+=r),d+="      </button>\n    </div>\n    <table>\n      <thead>\n        <tr>\n",r=(t.compare||e&&e.compare||l).call(e,null!=(r=null!=e?e.selectedSource:e)?r.sourceName:r,"allVa",{name:"compare",hash:{},fn:this.program(44,i,o),inverse:this.noop,data:i}),null!=r&&(d+=r),d+='          <th scope="col" class="sortable renderable domain" id="sync-detail-header-domain">\n            <a>Domain</a>\n',r=(t.compare||e&&e.compare||l).call(e,null!=e?e.sortColumn:e,"domainDisplayName",{name:"compare",hash:{},fn:this.program(45,i,o),inverse:this.noop,data:i}),null!=r&&(d+=r),d+='          </th>\n          <th scope="col" class="sortable renderable last-synced" id="sync-detail-header-last-synced">\n            <a>Last Refresh</a>\n',r=(t.compare||e&&e.compare||l).call(e,null!=e?e.sortColumn:e,"stampTime",{name:"compare",hash:{},fn:this.program(45,i,o),inverse:this.noop,data:i}),null!=r&&(d+=r),d+="          </th>\n",r=(t.compare||e&&e.compare||l).call(e,null!=(r=null!=e?e.selectedSource:e)?r.sourceType:r,"primary",{name:"compare",hash:{},fn:this.program(50,i,o),inverse:this.noop,data:i}),null!=r&&(d+=r),d+="        </tr>\n      </thead>\n      <tbody>\n",r=t.each.call(e,null!=(r=null!=e?e.selectedSource:e)?r.allDomains:r,{name:"each",hash:{},fn:this.program(52,i,o),inverse:this.noop,data:i}),null!=r&&(d+=r),d+"      </tbody>\n    </table>\n  </div>\n</div>"},useData:!0,useDepths:!0});return t.registerPartial("main/components/footer/views/syncModalTemplate",n),n}),define("main/components/footer/views/syncModalView",["backbone","marionette","underscore","async","moment","main/Utils","hbs!main/components/footer/views/syncModalTemplate","api/SessionStorage","api/ResourceService"],function(e,t,n,i,o,r,a,s,l){"use strict";var d=function(e){if(n.isUndefined(e))return e;var t={med:"Active Medications",problem:"Active Problems",vital:"Vitals",visit:"Visit",pov:"Purpose of Visit",appointment:"Appointments",consult:"Consult",procedure:"Procedure",cpt:"CPT",order:"Orders",surgery:"Surgery",immunization:"Immunizations",lab:"Lab Results",document:"Document",vlerdocument:"Vler Document",image:"Image",factor:"Health Factor",allergy:"Allergies",patient:"Patient",skin:"Skin",progressNote:"Progress Note",exam:"Exam",education:"Education",mh:"Mental Health"};return t[e]||e},c=60,u={DOD:"dod",HDR:"allVa",VLER:"communities"},h={},p=[],g=function(e){return"DOD"===e||"HDR"===e||"VLER"===e?"secondary":"primary"},f=function(e,t){return{sourceName:t,status:e}},m=function(e){var t;if(h[e])t=h[e];else{var i=s.get.sessionModel("patient-domain");if(i&&i.get("sites")){var o=n.findWhere(i.get("sites"),{siteCode:e});t=o?o.name:e,h[e]=t}}return t},v=function(e,t,n,i){var o=e.syncCompleted?"completed":"inProgress",a=i(e.stampTime),s=n&&n[t.sourceName]&&n[t.sourceName].domain[e.domain]?n[t.sourceName].domain[e.domain].toString():"";return{domainName:e.domain,domainDisplayName:d(e.domain),status:o,stampTime:e.stampTime.toString(),newDataSince:s,displayNewDataSince:s?r.getTimeSince(s,!1).timeSince:"",displayTime:a?a:"",siteDisplayName:m(t.sourceName),siteType:g(t.sourceName)}},b=function(e,t){var n;e.patientIdentifier&&"pid"===e.patientIdentifier.type&&e.patientIdentifier.value&&(n=e.patientIdentifier.value.split(";")[0]);var i;return"error"===e.status||t?i="error":"created"===e.status&&(i="inProgress"),{domainName:e.dataDomain,domainDisplayName:d(e.dataDomain),site:n,siteDisplayName:m(n),status:i,type:"jobStatus",siteType:g(n)}},y=function(e){var t={};switch(e){case"mySite":t.sourceDisplayName="My Site",t.sourceType="primary";break;case"allVa":t.sourceDisplayName="All VA",t.sourceType="primary";break;case"dod":t.sourceDisplayName="DoD",t.sourceType="secondary";break;case"communities":t.sourceDisplayName="Communities",t.sourceType="secondary"}return t},w=function(t,i,o,r){var a=[],s={};if(t.models&&t.models[0]){if(t.models[0].get("syncStatus")){var l=t.models[0].get("syncStatus");l.completedStamp&&A(s,l.completedStamp.sourceMetaStamp),l.inProgress&&A(s,l.inProgress.sourceMetaStamp)}t.models[0].get("jobStatus")&&(n.each(t.models[0].get("jobStatus"),function(e){"enterprise-sync-request"!==e.type&&a.push(b(e,i))}),a=n.uniq(a,!0,function(e){return e.site+e.domainName}))}return N(s,a,o,r),new e.Model(s)},A=function(e,t){n.each(t,function(t,n){var i=u[n];if(i){e[i]||(e[i]={sites:[]});var o=f(t,n);e[i].sites.push(o),"mySite"===i&&(e.allVa||(e.allVa={sites:[]}),e.allVa.sites.push(o))}else e.allVa||(e.allVa={sites:[]}),e.allVa.sites.push(f(t,n))})},N=function(e,t,i,o){n.each(e,function(e,t){var a,s,l,d="completed",c=[];if(n.each(e.sites,function(t){t.status.syncCompleted||(d="inProgress"),"secondary"===g(t.sourceName)&&(1===e.sites.length?a=t.status.stampTime.toString():((!a||a<t.status.stampTime.toString())&&(a=t.status.stampTime.toString()),(!s||s>t.status.stampTime.toString())&&(s=t.status.stampTime.toString()))),i&&i[t.sourceName]&&(!l||l<i[t.sourceName].newDataSince.toString())&&(l=i[t.sourceName].newDataSince.toString()),n.each(t.status.domainMetaStamp,function(e){c.push(v(e,t,i,o))})}),e.status=d,e.mostRecentTime=a?o(a):"",e.newDataSince=l?r.getTimeSince(l,!1).timeSince:"",s){var u=o(s);e.mostRecentTime&&u!==e.mostRecentTime&&(e.leastRecentTime=u)}var h=y(t);e.sourceName=t,e.sourceDisplayName=h.sourceDisplayName,e.sourceType=h.sourceType,e.allDomains=c}),n.each(t,function(t){if(t.site){var i=u[t.site];if(i&&!e[i]){var o=y(i);e[i]={sourceName:i,sites:[],sourceDisplayName:o.sourceDisplayName,sourceType:o.sourceType,allDomains:[]}}var r=n.findWhere(e[i].sites,{sourceName:t.site});(!r||r.length>0)&&e[i].sites.push({sourceName:t.site})}n.each(e,function(e,i){n.each(e.sites,function(n){t.site===n.sourceName&&(e.allDomains.push(t),"inProgress"===t.status?e.status="inProgress":"error"===t.status&&(e.status="error"))})})})},_=function(e){if(e.models&&e.models[0]){var t=e.models[0];if(t.get("syncStatus")&&!t.get("syncStatus").inProgress&&t.get("syncStatus").completedStamp&&t.get("jobStatus")&&n.isEmpty(t.get("jobStatus")))return!0}return!1},C=e.Marionette.ItemView.extend({template:a,events:{"click #sync-source-sites li":"changeDetailView","click #force-source-sync":"forceSourceSync","click #msg-successful-sync":"closeSuccessfulSync","click #msg-failed-sync":"closeFailedSync","click #sync-detail-header-site":"sortBySite","click #sync-detail-header-domain":"sortByDomain","click #sync-detail-header-last-synced":"sortByLastSynced","click #sync-detail-header-new-data-since":"sortByNewDataSince","keydown #sync-source-sites li":"handleKeyPress","keydown #force-source-sync":"handleKeyPress","keydown #msg-successful-sync":"handleKeyPress","keydown #msg-failed-sync":"handleKeyPress","keydown #sync-detail-header-site":"handleKeyPress","keydown #sync-detail-header-domain":"handleKeyPress","keydown #sync-detail-header-last-synced":"handleKeyPress","keydown #sync-detail-header-new-data-since":"handleKeyPress"},initialize:function(e){var t=this;t.parentView=e.parentView,t.getSecondarySiteTimeSince=n.bind(t.parentView.getSecondarySiteTimeSince,t.parentView);var i=s.get.sessionModel("user").get("site");u[i]="mySite";var o={resourceTitle:"synchronization-status",cache:!1,onSuccess:function(e,n){t.setModelFromResponse(t,e,!1,t.parentView.diffDetail),_(e)||t.pollUntilSyncComplete(t)}};ADK.PatientRecordService.fetchCollection(o)},onBeforeDestroy:function(){n.each(p,function(e){e.forceCanceled=!0})},setModelFromResponse:function(e,t,n,i,r){var a=w(t,n,i,e.getSecondarySiteTimeSince),s=(new o).format("MM/DD/YYYY hh:mma");a.set("currentDateTime",s),r||(a.get("mySite")?r="mySite":a.get("allVa")?r="allVa":a.get("dod")?r="dod":a.get("communities")&&(r="communities")),a.set("selectedSource",a.get(r)),e.model&&e.model.get("selectedSource").sourceName===r&&this.sortByColumn(a,e.model.get("sortColumn"),!1,e.model.get("sortOrder")),e.model&&e.model.get("forceSyncStatus")?a.set("forceSyncStatus",e.model.get("forceSyncStatus")):a.set("forceSyncStatus","completed"),e.model&&e.model.get("msgSuccessfulSync")&&a.set("msgSuccessfulSync","y"),e.model&&e.model.get("msgFailedSync")&&a.set("msgFailedSync","y"),e.model=a,e.model.bind("change",e.render),e.isDestroyed||e.render()},handleKeyPress:function(e){(13===e.keyCode||32===e.keyCode)&&$(e.currentTarget).click()},sortBySite:function(){this.sortByColumn(this.model,"siteDisplayName",!0)},sortByDomain:function(){this.sortByColumn(this.model,"domainDisplayName",!0)},sortByLastSynced:function(){this.sortByColumn(this.model,"stampTime",!0)},sortByNewDataSince:function(){this.sortByColumn(this.model,"newDataSince",!0)},sortByColumn:function(e,t,i,o){if(e.get("selectedSource").sourceName===this.model.get("selectedSource").sourceName){var r=n.sortBy(e.get("selectedSource").allDomains,t);o?("desc"===o&&r.reverse(),e.set("sortOrder",o)):this.model.get("sortColumn")===t&&"asc"===this.model.get("sortOrder")?(r.reverse(),e.set("sortOrder","desc")):e.set("sortOrder","asc"),e.set("sortColumn",t),e.get("selectedSource").allDomains=r}i&&this.render()},closeSuccessfulSync:function(){this.model.unset("msgSuccessfulSync")},closeFailedSync:function(){this.model.unset("msgFailedSync")},changeDetailView:function(e){var t=$(e.currentTarget).attr("data-source");this.model.set("selectedSource",this.model.get(t)),this.model.unset("sortColumn"),this.model.unset("sortOrder")},forceSourceSync:function(){var e=this,t=[];n.each(e.model.get("selectedSource").sites,function(e){t.push(e.sourceName)}),e.forceSync(t)},forceSync:function(e){var t=this;n.each(p,function(e){e.forceCanceled=!0}),t.model.set("forceSyncStatus","inProgress");var i={resourceTitle:"synchronization-loadForced",criteria:{forcedSite:e.join(",")},cache:!1,onSuccess:function(e,n){t.pollUntilSyncComplete(t,function(){t.model.set("msgSuccessfulSync","y"),t.model.set("forceSyncStatus","completed"),$(t.el).find("#force-site-sync-status-success").focus()},function(){t.model.set("msgFailedSync","y"),t.model.set("forceSyncStatus","completed"),$(t.el).find("#force-site-sync-status-error").focus()})},onError:function(e,n){t.model.set("forceSyncStatus","completed")}};ADK.PatientRecordService.fetchCollection(i)},forceSyncAll:function(){var e=this,t=[];n.each(e.model.attributes,function(e,i){e&&e.sites&&"selectedSource"!==i&&n.each(e.sites,function(e){t.push(e.sourceName)})}),e.forceSync(n.uniq(t))},pollUntilSyncComplete:function(e,t,n){p.push({statusComplete:!1,numAttempts:0});var o=p.length-1;i.doUntil(function(t){var n={resourceTitle:"synchronization-status",cache:!1,onSuccess:function(t,n){_(t)?p[o].statusComplete=!0:p[o].numAttempts++;var i=e.model.get("selectedSource").sourceName,r=p[o].numAttempts>c?!0:!1;e.setModelFromResponse(e,t,r,e.parentView.diffDetail,i)},onError:function(e,t){p[o].statusComplete=!0}};ADK.PatientRecordService.fetchCollection(n),setTimeout(t,5e3)},function(){return p[o].statusComplete===!0||p[o].numAttempts>c||p[o].forceCanceled},function(e){p[o].forceCanceled||(e||p[o].numAttempts>c?n&&n():t&&t())})}});return C}),define("main/components/footer/views/syncModalFooterView",["backbone","marionette","underscore"],function(e,t,n){return{getFooterView:function(t,i){return e.Marionette.ItemView.extend({template:n.template('<div class="pull-left"><button id="sync-all-sources" class="btn btn-primary">Sync All Sources to VX</button><button id="sync-refresh-all" class="btn btn-primary">Refresh All Data</button></div><button id="sync-modal-close" class="btn btn-default pull-right" data-dismiss="modal">Close</button>'),events:{"click #sync-all-sources":"syncAllSources","click #sync-refresh-all":"refreshAll"},refreshAll:function(){i.refreshStatus()},syncAllSources:function(){t.forceSyncAll()}})}}}),define("main/components/footer/patientSyncStatusView",["backbone","marionette","underscore","moment","hbs!main/components/footer/patientSyncStatusTemplate","main/components/footer/views/syncModalView","hbs!main/components/footer/views/syncModalTemplate","main/components/footer/views/syncModalFooterView","api/ResourceService","api/Messaging","api/SessionStorage","_assets/js/tooltipMappings"],function(e,t,n,i,o,r,a,s,l,d,c,u){"use strict";return e.Marionette.ItemView.extend({template:o,ui:{refreshButton:"#refresh-patient-data",syncDetailsButton:"#open-sync-modal",syncIcons:".patient-status-icon"},getSecondarySiteTimeSince:function(e){var t=3,n=i(e,"YYYYMMDDHHmmssSSS"),o=n.isValid();if(!o)return"";var r=i().subtract(t,"hours");if(n.isAfter(r))return"< 1 day";var a=i.duration(r.diff(n)),s=parseFloat(a.asYears()),l=parseFloat(a.asDays()),d=parseFloat(a.asMonths()),c=(parseFloat(a.asHours()),parseFloat(a.asMinutes()),"y"),u="m",h="d",p="",g="<",f=1,m="h";return d>=24?(f=Math.round(s),m=c,p=f+c,g=f.toString()+" Year"):24>d&&l>60?(f=Math.round(d),m=u,p=f+u,g=f.toString()+" Month"):l>=2&&60>=l?(f=Math.round(l),m=h,p=f+h,g=f.toString()+" Day"):2>l&&(g+=" 1 Day"),f>=2&&(g+="s"),p},initialize:function(){this.model=new e.Model,this.initInterval=5e3,this.syncCompInterval=6e5,this.syncCompleted=!1,this.syncStatusDetail=void 0,this.diffDetail=void 0},onDomRefresh:function(){this.ui.syncIcons.tooltip({delay:{show:500},trigger:"hover focus"})},onShow:function(){this.startAutoPolling()},onDestroy:function(){this.stopAutoPolling()},startAutoPolling:function(){this.resetTimeInterval()},resetTimeInterval:function(e){e&&this.timeInterval&&e===this.timeInterval&&this.handle||(!e||e<=this.initInterval?this.timeInterval=this.initInterval:this.timeInterval=e,
this.stopAutoPolling(),this.handle=setInterval(n.bind(this.updatePatientSyncStatus,this),this.timeInterval))},stopAutoPolling:function(){this.handle&&(clearInterval(this.handle),this.handle=void 0)},modelEvents:{"change:syncStatus":"render"},events:{"click @ui.refreshButton":"refreshStatus","keypress @ui.refreshButton":"refreshStatus","click @ui.syncDetailsButton":"showSyncModal"},showSyncModal:function(e){e.preventDefault();var t=this,n=new r({parentView:t}),i={title:"eHMP Data Sources",size:"large",footerView:s.getFooterView(n,t)},o=new ADK.UI.Modal({view:n,options:i});o.show()},syncAllData:function(e){var t=this,n={resourceTitle:"synchronization-loadForced",criteria:{forcedSite:!0},cache:!1,onSuccess:function(n,i){t.updatePatientSyncStatus(e)},onError:function(n,i){t.updatePatientSyncStatus(e)}};ADK.PatientRecordService.fetchCollection(n)},updatePatientSyncStatus:function(e){if(c.get.sessionModel("patient")&&ADK.ADKApp.currentScreen.patientRequired===!0){var t=c.get.sessionModel("patient").get("icn");t!=this.curPatient&&(this.curPatient=t,this.clearCache()),this.fetchDataStatus(e)}else this.model.unset("syncStatus")},refreshStatus:function(){this.refreshPage(),this.syncAllData(!0)},refreshPage:function(){l.clearAllCache(),ADK.ADKApp.execute("screen:display",d.request("get:current:screen").id)},clearCache:function(){this.syncStatusDetail=void 0,this.diffDetail={}},fetchDataStatus:function(e){e?this.clearCache():e=!1;this.model.get("syncStatus");this.model.set("syncStatus",[{title:"My Site",hoverTip:u.patientSync_mySite},{title:"All VA",hoverTip:u.patientSync_allVA},{title:"DoD",hoverTip:u.patientSync_DoD},{title:"Communities",hoverTip:u.patientSync_community}]);var t={resourceTitle:"synchronization-datastatus",cache:!1},o=this;t.onError=function(e,t){var n=[{title:"My Site",completed:"error",hoverTip:u.patientSync_mySite},{title:"All VA",completed:"error",hoverTip:u.patientSync_allVA},{title:"DoD",completed:"error",hoverTip:u.patientSync_DoD},{title:"Communities",completed:"error",hoverTip:u.patientSync_community}];this.$(".tooltip").tooltip("hide"),o.model.set("syncStatus",n)},t.onSuccess=function(t,r){var a=c.get.sessionModel("user").get("site"),s=r.data,l=[];if(s.VISTA&&s.VISTA[a]){var d=s.VISTA[a],h=d.hasError?"error":d.isSyncCompleted,p={title:"My Site"};p.completed=h,p.hoverTip=u.patientSync_mySite,l.push(p)}if(s.VISTA||s.CDS||s.HDR){var g={};s.VISTA&&(g=n.clone(s.VISTA)),s.HDR&&(g.HDR=s.HDR);var f={title:"All VA"},m=n.find(g,function(e){return e.hasError&&e.hasError===!0});m?(f.completed="error",f.timeStamp=i().format("MM/DD/YYYY HH:mm")):(f.completed=n.every(n.pluck(g,"isSyncCompleted")),f.completed&&s.HDR&&(f.timeStamp=o.getSecondarySiteTimeSince(s.HDR.completedStamp.toString()))),f.hoverTip=u.patientSync_allVA,l.push(f)}if(s.DOD){var v=s.DOD,b=v.hasError?"error":v.isSyncCompleted,y=v.completedStamp?o.getSecondarySiteTimeSince(v.completedStamp.toString()):i().format("MM/DD/YYYY HH:mm");l.push({title:"DoD",completed:b,timeStamp:y,hoverTip:u.patientSync_DoD})}if(s.VLER){var w=s.VLER,A=w.hasError?"error":w.isSyncCompleted,N=w.completedStamp?o.getSecondarySiteTimeSince(w.completedStamp.toString()):i().format("MM/DD/YYYY HH:mm");l.push({title:"Communities",completed:A,timeStamp:N,hoverTip:u.patientSync_community})}if(s.allSites!=o.syncCompleted){var _=s.allSites?o.syncCompInterval:o.initInterval;console.log("new interval: "+_),o.resetTimeInterval(_)}o.syncCompleted=s.allSites,s.allSites?o.fetchSyncStatusDetail(e,l):o.updateSyncStats(l)},ADK.PatientRecordService.fetchCollection(t)},updateSyncStats:function(e){var t=this;setTimeout(function(){n.isEmpty(t.diffDetail)||t.addNewDataSince(e),t.model.set("syncStatus",e),t.isDestroyed||t.render()},500)},fetchSyncStatusDetail:function(e,t){var i={resourceTitle:"synchronization-syncStatusDetail",cache:!1},o=this;i.onError=function(e,t){var n=[{title:"My Site",completed:"error",hoverTip:u.patientSync_mySite},{title:"All VA",completed:"error",hoverTip:u.patientSync_allVA},{title:"DoD",completed:"error",hoverTip:u.patientSync_DoD},{title:"Communities",completed:"error",hoverTip:u.patientSync_community}];o.model.set("syncStatus",n)},i.onSuccess=function(e,i){var r=i.data;n.isUndefined(o.syncStatusDetail)?o.syncStatusDetail=r:o.generateSyncDetailDiff(r),o.updateSyncStats(t)},ADK.PatientRecordService.fetchCollection(i)},generateSyncDetailDiff:function(e){var t=this;t.diffDetail={};var i=t.syncStatusDetail.completedStamp.sourceMetaStamp,o=e.completedStamp.sourceMetaStamp;n.each(o,function(e,o){if("DOD"!==o.toUpperCase()&&"VLER"!==o.toUpperCase()&&"HDR"!==o.toUpperCase()){if(n.isUndefined(i[o]))return t.diffDetail[o]=t.diffDetail[o]||{},void(t.diffDetail[o].newDataSince=e.domainMetaStamp.stampTime);var r=e.domainMetaStamp,a=i[o].domainMetaStamp;n.each(r,function(e,i){return n.isUndefined(a[i])?(t.diffDetail[o]=t.diffDetail[o]||{},t.diffDetail[o].domain=t.diffDetail[o].domain||{},void(t.diffDetail[o].domain[i]=e.eventMetaStamp.stampTime)):void t.compareIndividualDomain(a[i].eventMetaStamp,e.eventMetaStamp,o,i)})}}),t.updateDiffDetails()},compareIndividualDomain:function(e,t,i,o){var r=this;n.each(t,function(a,s){n.isUndefined(e[s])?(r.diffDetail[i]=r.diffDetail[i]||{},r.diffDetail[i].domain=r.diffDetail[i].domain||{},r.diffDetail[i].domain[o]=a.stampTime):t[s].stampTime!=e[s].stampTime&&(r.diffDetail[i]=r.diffDetail[i]||{},r.diffDetail[i].domain=r.diffDetail[i].domain||{},n.isUndefined(r.diffDetail[i].domain[o])?r.diffDetail[i].domain[o]=a.stampTime:r.diffDetail[i].domain[o]>a.stampTime&&(r.diffDetail[i].domain[o]=a.stampTime))})},updateDiffDetails:function(){if(this.diffDetail){var e=this;n.each(e.diffDetail,function(e,t){if(e.domain){var i=n.min(n.values(e.domain));e.newDataSince?e.newDataSince=n.min([i,e.newDataSince]):e.newDataSince=i}})}},addNewDataSince:function(e){if(!(n.isArray(e)&&0===e.length||"My Site"!=e[0].title&&"All VA"!=e[0].title)){var t=n.omit(this.diffDetail,["DOD","VLER","HDR"]),i=c.get.sessionModel("user").get("site"),o=n.min(n.map(t,function(e,t){return e.newDataSince}));t[i]?(e[0].newDataSince=ADK.utils.getTimeSince(t[i].newDataSince).timeSince,e[1].newDataSince=ADK.utils.getTimeSince(o).timeSince):e[0].newDataSince=ADK.utils.getTimeSince(o).timeSince}}})}),define("main/components/footer/footerView",["backbone","marionette","underscore","moment","api/Messaging","hbs!main/components/footer/footerTemplate","main/components/footer/patientSyncStatusView"],function(e,t,n,i,o,r,a){var s=e.Marionette.LayoutView.extend({template:r,initialize:function(t){this.model=new e.Model,this.model.set(o.request("appManifest").attributes),t.currentScreen&&(this.model.set("currentScreen",t.currentScreen),this.options=t)},modelEvents:{"change:currentScreen":"updatePatientSyncStatus"},onBeforeShow:function(){this.showChildView("patientSyncStatusRegion",new a(this.options))},onShow:function(){this.updatePatientSyncStatus()},updatePatientSyncStatus:function(){if(this.model.get("currentScreen").patientRequired===!0){this.patientSyncStatusRegion.currentView.fetchDataStatus(),console.log("ADK patient required is true.");var e=this.patientSyncStatusRegion.currentView;e.fetchDataStatus(!0)}else this.patientSyncStatusRegion.currentView.model.unset("syncStatus")},regions:{patientSyncStatusRegion:"#patientSyncStatusRegion"},className:"col-md-12 navbar-fixed-bottom"});return s}),define("hbs!main/components/navSearch/navTemplate",["hbs","handlebars","_assets/templates/helpers/toTitleCase","_assets/templates/helpers/toLowerCase","_assets/templates/helpers/helpIconLink"],function(e,t){var n=t.template({1:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'        <button type="button" route-id="'+s((o=null!=(o=t.routeName||(null!=e?e.routeName:e))?o:a,typeof o===r?o.call(e,{name:"routeName",hash:{},data:i}):o))+'" class="btn btn-success btn-sm navigation-tab" title="'+s((t.toTitleCase||e&&e.toTitleCase||a).call(e,null!=e?e.finalTitle:e,{name:"toTitleCase",hash:{},data:i}))+'" id="'+s((t.toLowerCase||e&&e.toLowerCase||a).call(e,null!=e?e.finalID:e,{name:"toLowerCase",hash:{},data:i}))+'">'+s((t.toTitleCase||e&&e.toTitleCase||a).call(e,null!=e?e.title:e,{name:"toTitleCase",hash:{},data:i}))+"</button>\n"},3:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'                    <li role="presentation"><a href="#'+s((o=null!=(o=t.pageName||(null!=e?e.pageName:e))?o:a,typeof o===r?o.call(e,{name:"pageName",hash:{},data:i}):o))+'">'+s((o=null!=(o=t.pageName||(null!=e?e.pageName:e))?o:a,typeof o===r?o.call(e,{name:"pageName",hash:{},data:i}):o))+"</a>\n                    </li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d='<nav role="navigation" class="navbar navbar-default">\n    <div class="navTitle">\n        <p class="navbar-text" alt="Patient Selection">Patient Selection\n';return o=t.each.call(e,null!=e?e.navTabs:e,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+='        </p>\n    </div>\n    <div class="navbar-right">\n        <ul class="nav navbar-nav">\n            <li class="dropdown">\n                <a id="eHMP-CurrentUser" data-target="#" class="dropdown-toggle" data-toggle="dropdown" tabIndex="0">\n                    <span class="fa fa-user"></span><span class="sr-only">, Current user menu, Press enter, to open menu, , current user,</span> '+l((r=null!=(r=t.lastname||(null!=e?e.lastname:e))?r:s,typeof r===a?r.call(e,{name:"lastname",hash:{},data:i}):r))+", "+l((r=null!=(r=t.firstname||(null!=e?e.firstname:e))?r:s,typeof r===a?r.call(e,{name:"firstname",hash:{},data:i}):r))+'\n                    <b class="caret"></b>\n                </a>\n                <ul class="dropdown-menu" role="menu">\n                    <div class="container-fluid" role="presentation">\n                        <dt class="text-muted">'+l((r=null!=(r=t.facility||(null!=e?e.facility:e))?r:s,typeof r===a?r.call(e,{name:"facility",hash:{},data:i}):r))+'</dt>\n                        <dd class="text-info">'+l((r=null!=(r=t.title||(null!=e?e.title:e))?r:s,typeof r===a?r.call(e,{name:"title",hash:{},data:i}):r))+'</dd>\n                    </div>\n                    <li class="divider"></li>\n',o=t.each.call(e,null!=e?e.pages:e,{name:"each",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+='                    <li role="presentation">\n                        <a id="logoutButton" role="menuitem" tabindex="0">\n                            <span class="sr-only">, Sign out button, Press enter, to sign out and return to logon screen,</span>\n                            <span class="fa fa-power-off"></span>&nbsp; Sign Out</a>\n                    </li>\n                </ul>\n            </li>\n        </ul>\n    </div>\n    ',o=(t.helpIconLink||e&&e.helpIconLink||s).call(e,"user_info","helpIconLinkRight",{name:"helpIconLink",hash:{},data:i}),null!=o&&(d+=o),d+"\n</nav>\n"},useData:!0});return t.registerPartial("main/components/navSearch/navTemplate",n),n}),define("main/components/navSearch/navView",["backbone","marionette","underscore","hbs!main/components/navSearch/navTemplate","api/UserService","api/Messaging","api/UserDefinedScreens","api/Navigation"],function(e,t,n,i,o,r,a,s){"use strict";return e.Marionette.ItemView.extend({model:o.getUserSession(),template:i,className:"col-md-12 appNav",events:{"click #logoutButton":"logout","click .navigation-tab":"navigateToTabbedScreen"},initialize:function(){var e=this,t=a.getScreensConfig();t.done(function(t){var i=n.filter(t.screens,function(e){var t=!0;n.isUndefined(e.hasPermission)||e.Permission!==!1||(t=!1);var i=!1;return n.isUndefined(e.addNavigationTab)||e.addNavigationTab!==!0||(i=!0),e.addNavigationTab===!0&&t===!0});e.model.set("navTabs",i),n.each(e.model.get("navTabs"),function(e){e.finalID=e.id.toLowerCase()+"-nav-header-tab",e.finalTitle=e.title+" navigation tab"}),e.render()})},navigateToTabbedScreen:function(e){var t=$(e.currentTarget).attr("route-id");console.log(t),t&&s.navigate(t)},logout:function(){r.trigger("app:logout")}})}),define("hbs!main/components/applet_header/templates/navTemplate",["hbs","handlebars","_assets/templates/helpers/helpIconLink"],function(e,t){var n=t.template({1:function(e,t,n,i){return" navbar-center "},3:function(e,t,n,i){return" navbar-right "},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=t.helperMissing,a='<div id="navigationPanel" class="panel all-margin-no bg-info">\n    <div class="panel-heading container-fluid" style="position:relative">\n        <div id="navigation-date">\n            <div class="hidden well well-sm globalDatePicker-popupRegion" id="hiddenDiv">\n                <div id="globalDate-region"></div>\n            </div>\n            <div id="globalDatePicker-compact">\n                <button type="button" class="pull-left globalDatePickerButton btn btn-link" id="date-region-minimized" aria-label="Minimized global date range" tooltip-data-key=\'timeline_dateinterval\'>\n                </button>\n                <div id="gdr-spikeline"></div>\n            </div>\n        </div>\n\n        <div id="navigation-navbar" class="applet-nav-bar">\n            <div class="nav nav-pills ';return o=t["if"].call(e,null!=e?e.isNonPatientCentricView:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=o&&(a+=o),a+='">\n                <div class="btn-group" id="nav-workspaceSelect"></div>\n                <div class="btn-group" id="text-search-input"></div>\n            </div>\n        </div>\n    </div>\n    ',o=(t.helpIconLink||e&&e.helpIconLink||r).call(e,"coversheet",{name:"helpIconLink",hash:{},data:i}),null!=o&&(a+=o),a+"\n</div>\n"},useData:!0});return t.registerPartial("main/components/applet_header/templates/navTemplate",n),n}),define("hbs!main/components/global_datepicker/template/gdrHeaderMinimizedTemplate",["hbs","handlebars","_assets/templates/helpers/ifExp"],function(e,t){var n=t.template({1:function(e,t,n,i){return"	    All\n"},3:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return"		"+s((o=null!=(o=t.fromDate||(null!=e?e.fromDate:e))?o:a,typeof o===r?o.call(e,{name:"fromDate",hash:{},data:i}):o))+" - "+s((o=null!=(o=t.toDate||(null!=e?e.toDate:e))?o:a,typeof o===r?o.call(e,{name:"toDate",hash:{},data:i}):o))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=t.helperMissing,a='<span role="button" type="button" id="navigation-dateButton"><i class="fa fa-calendar"></i></span>\n<span>\n';return o=(t.ifExp||e&&e.ifExp||r).call(e,null!=e?e.selectedId:e,"===","all-range-global",{name:"ifExp",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=o&&(a+=o),a+"</span>"},useData:!0});return t.registerPartial("main/components/global_datepicker/template/gdrHeaderMinimizedTemplate",n),n}),define("hbs!main/components/global_datepicker/template/gdrHeaderExtendedTemplate",["hbs","handlebars","_assets/templates/helpers/compare"],function(e,t){var n=t.template({1:function(e,t,n,i){var o,r="";return o=t["if"].call(e,null!=e?e.fromDate:e,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=o&&(r+=o),r},2:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return"			"+s((o=null!=(o=t.customFromDate||(null!=e?e.customFromDate:e))?o:a,typeof o===r?o.call(e,{name:"customFromDate",hash:{},data:i}):o))+" - "+s((o=null!=(o=t.customToDate||(null!=e?e.customToDate:e))?o:a,typeof o===r?o.call(e,{name:"customToDate",hash:{},data:i}):o))+"\n"},4:function(e,t,n,i){var o,r="";return o=t["if"].call(e,null!=e?e.fromDate:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=o&&(r+=o),r},5:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return"			"+s((o=null!=(o=t.fromDate||(null!=e?e.fromDate:e))?o:a,typeof o===r?o.call(e,{name:"fromDate",hash:{},data:i}):o))+" - "+s((o=null!=(o=t.toDate||(null!=e?e.toDate:e))?o:a,typeof o===r?o.call(e,{name:"toDate",hash:{},data:i}):o))+"\n"},7:function(e,t,n,i){return"All"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=t.helperMissing,a='<span role="button" type="button" id="navigation-dateButton"><i class="fa fa-calendar"></i></span>\n<span>\n';return o=(t.compare||e&&e.compare||r).call(e,null!=e?e.selectedId:e,"custom-range-apply-global",{name:"compare",hash:{},fn:this.program(1,i),inverse:this.program(4,i),data:i}),null!=o&&(a+=o),a+="\n	",o=t.unless.call(e,null!=e?e.fromDate:e,{name:"unless",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=o&&(a+=o),a+"\n</span>"},useData:!0});return t.registerPartial("main/components/global_datepicker/template/gdrHeaderExtendedTemplate",n),n}),define("main/components/global_datepicker/util/chartHelper",["main/ADK","backbone","marionette","underscore","highcharts","moment"],function(e,t,n,i,o,r){"use strict";var a="#003E4F";return{chartConfig:{chart:{zoomType:"",type:"column",selectionMarkerFill:a,backgroundColor:"#38474F"},tooltip:{enabled:!0},title:{text:null,style:{color:"#CFD8DC"}},xAxis:{title:{text:null},type:"datetime",tickLength:0,gridLineWidth:0,minorGridLineWidth:0,tickWidth:0,lineWidth:0,labels:{style:{color:"#ffffff"}}},yAxis:{title:{text:null},labels:{enabled:!1},gridLineWidth:0},credits:{enabled:!1},plotOptions:{column:{stacking:"normal"},series:{color:"#BFCAD0",minPointLength:10,pointRange:31104e6,pointPadding:0,groupPadding:1,pointInterval:31104e6}},series:[{name:"Inpatient",data:[],color:"#BFCAD0",id:"inpatient"},{name:"Outpatient",data:[],color:"#BFCAD0",id:"outpatient"},{name:"",data:[[r().valueOf(),null]],showInLegend:!1,color:"#B9C5CB"}]},selectionColor:a}}),define("main/components/global_datepicker/util/chartStyling",["backbone","marionette","moment"],function(e,t,n){return{allEventsChartStyles:{chart:{backgroundColor:"#001924",height:125,width:682,marginTop:35,marginBottom:25,events:{selection:$.noop},style:{},spacingRight:20},legend:{align:"left",verticalAlign:"top",reversed:!0,floating:!0,width:0,y:-12,color:"#FFFFFF"},series:[{color:"#9acf09"},{color:"#8ADDFF"}],title:{text:null},xAxis:{labels:{style:{color:"#FFFFFF"}},lineWidth:2,lineColor:"#888888",plotLines:[{color:"#FF0000",width:2,value:n().valueOf(),zIndex:99}]},plotOptions:{column:{borderColor:"#000000",borderWidth:1,pointWidth:4},series:{events:{legendItemClick:function(){return!1}}}}},spikeLineChartStyles:{chart:{zoomType:"",events:{selection:$.noop},margin:[0,0,0,0],backgroundColor:"#001924",height:25,width:400},legend:{enabled:!1},plotOptions:{column:{stacking:"normal",pointWidth:6,borderWidth:1,borderColor:"#000000"}},series:[{color:"#9acf09"},{color:"#8ADDFF"}],xAxis:{labels:{enabled:!1},plotLines:[{color:"#FF0000",width:2,value:n().valueOf(),zIndex:99}]},yAxis:{maxPadding:0,minPadding:0,endOnTick:!1,labels:{enabled:!1}},tooltip:{positioner:function(){return{y:40}},dateTimeLabelFormats:{year:"%Y"},shared:!0}}}}),define("main/components/global_datepicker/util/parseEvents",["underscore","moment"],function(e,t){return function(n){if(!n)return{};if(n.hasOwnProperty("inpatient")){var i="YYYYMMDDHHmmss",o="YYYYMMDDHHmm",r=[i,o],a=[],s=0;e.each(n.inpatient,function(e,n,i){if(e.stay&&e.stay.arrivalDateTime){var o=t(e.stay.arrivalDateTime,r);a.push(o)}});var l=n.inpatient;e.each(l,function(e,o,l){if(e.stay&&e.stay.arrivalDateTime){var d,c=t(e.stay.arrivalDateTime,r);if(e.stay.dischargeDateTime)d=t(e.stay.dischargeDateTime,r);else{for(var u=0;u<a.length;u++)if(a[u]&&a[u].isAfter(c)){d=a[u];break}d||(d=t())}var h=d.diff(c,"days");if(h>=1){for(var p=1,g=c.hour(0).minute(0).second(0),f=[];h>=p;)g=g.add(1,"d"),f.push({kind:"Hospital Stay",dateTime:g.format(i)}),p++;var m=o+s+1,v=n.inpatient.slice(m),b=n.inpatient.slice(0,m).concat(f);n.inpatient=b.concat(v),s+=f.length}}})}return n}}),define("hbs!main/components/global_datepicker/template/trendHistoryTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div id="allActivitiesTitle" class="center-block">All Events</div>\n<div id="trendHistoryChartContainer" class="center-block"></div>\n<!-- <div id="selectedActivities">\n	<div class="selectedActvitiesLegend pull-left col-md-5">\n		<span class="label label-default op-color">&nbsp&nbsp&nbsp</span><span> Outpatient</span>\n		<span class="label label-default ip-color">&nbsp&nbsp&nbsp</span><span> Inpatient</span>\n	</div>\n	<div class="selectedActivitiesTitle col-md-7">\n	</div>\n</div> -->\n<div id="trendHistoryChartContainerDetail" class="center-block">\n	<div>\n\n	</div>\n</div>'},useData:!0});return t.registerPartial("main/components/global_datepicker/template/trendHistoryTemplate",n),n}),define("main/components/global_datepicker/view/trendHistoryView",["backbone","marionette","underscore","main/components/global_datepicker/util/chartHelper","main/components/global_datepicker/util/chartStyling","main/components/global_datepicker/util/parseEvents","hbs!main/components/global_datepicker/template/trendHistoryTemplate","api/SessionStorage","moment","api/Messaging","api/ResourceService"],function(e,t,n,i,o,r,a,s,l,d,c){"use strict";var u,h,p,g,f,m,v={resourceTitle:"global-timeline-getTimeline",pageable:!1,cache:!0,viewModel:{parse:r}},b=$.extend(!0,{},i.chartConfig,o.allEventsChartStyles),y=($.Deferred(),14),w=19,A=y/2;return e.Marionette.ItemView.extend({template:a,initialize:function(e){var t=this;t.dateModel=m=e.dateModel,v.onSuccess=function(e){t.displayCharts(e),t.listenTo(d,"globalDate:customDateRangeSelected",function(e){var n=t.deriveSelectedDateRange(e);t.updateDateSliderPosition(n.from,n.to)}),t.listenTo(d,"resetDateSliderPosition",function(e){t.updateDateSliderPosition(e.from,e.to)})},c.patientRecordService.fetchCollection(v)},deriveSelectedDateRange:function(e){var t;"all-range-global"===e.get("selectedId")?void 0!==e.get("firstEventDate")&&null!==e.get("firstEventDate")&&(t=l(e.get("firstEventDate"),"MM/DD/YYYY").valueOf()):t=l(e.get("customFromDate"),"MM/DD/YYYY").valueOf();var i;i=void 0!==f&&"all-range-global"===e.get("selectedId")?f.xAxis[0].getExtremes().dataMax:l(e.get("customToDate"),"MM/DD/YYYY").valueOf(),(null===t||void 0===t||n.isNaN(t)||""===$.trim(t))&&(t=l(f.xAxis[0].getExtremes().dataMin).valueOf()),"2yr-range-global"===e.get("selectedId")&&t<f.xAxis[0].getExtremes().dataMin&&(t=f.xAxis[0].getExtremes().min);var o={from:t,to:i};return d.trigger("updateGlobalTimelineDateRange",o),o},updateDateSliderPosition:function(e,t){if(void 0!==u&&void 0!==h&&void 0!==p&&void 0!==f){var n=f.xAxis[0].getExtremes();t>n.dataMax&&e<n.dataMin&&f.xAxis[0].setExtremes(e,t),e<n.dataMin&&(e=dataMin),u.attr({x:f.xAxis[0].toPixels(e)-A}),h.attr({x:f.xAxis[0].toPixels(t)-A}),p.attr({width:f.xAxis[0].toPixels(t)-f.xAxis[0].toPixels(e),x:f.xAxis[0].toPixels(e)})}},displayCharts:function(e){b.series[1].data=this.buildOutpatientArray(e),b.series[0].data=this.buildInpatientArray(e),b.plotOptions.series.pointRange=1,b.tooltip.enabled=!1,b.chart.events.redraw=function(){g.attr({x:f.xAxis[0].toPixels(l().valueOf())-g.attr("width")/2})};var t=this,n=setInterval(function(){t.$("#trendHistoryChartContainer")&&(clearInterval(n),n=0,b.chart.renderTo=t.$("#trendHistoryChartContainer")[0],f=new Highcharts.Chart(b,t.allEventsChartCallback),t.drawAndZoom())},500)},allEventsChartCallback:function(e){var t,n,o,r,a=!1,s=e.renderer.g().add();g=e.renderer.label("TODAY",e.xAxis[0].toPixels(l().valueOf()),!1).attr({fill:"#FF0000",padding:2,r:2,zIndex:99}).css({color:"#FFFFFF",fontSize:"8px"}).add();var c=g.attr("width"),f=g.attr("x");g.attr({x:f-c/2,y:20}),s.attr({zIndex:99}),p=e.renderer.rect(e.plotLeft,e.plotTop,e.plotWidth,e.plotHeight,0).attr({fill:i.selectionColor,zIndex:98}).add(),u=e.renderer.image("_assets/img/leftHandle.svg",0,0,y,w).attr({zIndex:99}).css({cursor:"col-resize",zIndex:99}).add(),h=e.renderer.image("_assets/img/rightHandle.svg",0,0,y,w).attr({zIndex:99}).css({cursor:"col-resize"}).add(),Highcharts.addEvent(u.element,"mousedown",function(i){i=e.pointer.normalize(i),t=i.chartX,n=u.attr("x"),o=u.attr("x")+A,r=u,a=!0}),Highcharts.addEvent(h.element,"mousedown",function(i){i=e.pointer.normalize(i),t=i.chartX,n=h.attr("x"),o=h.attr("x")+A,r=h,a=!0}),Highcharts.addEvent(e.container,"mousemove",function(i){if(a){i=e.pointer.normalize(i);var s=i.chartX-t;r===u?o+s>0&&o+s+u.attr("width")<e.xAxis[0].toPixels(l().valueOf())&&(u.attr({x:n+s}),p.attr({width:h.attr("x")-u.attr("x"),x:u.attr("x")+A})):r===h&&o+s>e.xAxis[0].toPixels(l().valueOf())&&o+s+h.attr("width")<e.chartWidth&&(h.attr({x:n+s}),p.attr({width:h.attr("x")-u.attr("x"),x:u.attr("x")+A}))}}),Highcharts.addEvent(document,"mouseup",function(t){var n=(e.pointer.normalize(t),e.xAxis[0].toValue(p.attr("x"))),i=e.xAxis[0].toValue(p.attr("x")+p.attr("width")),o=l.duration(l(i).diff(l().valueOf())),s=o.asDays();if(7>s&&(i=l().valueOf()),a){var c={from:n,to:i};m.set("selectedId","custom-range-apply-global"),d.trigger("updateGlobalTimelineDateRange",c)}r=null,a=!1})},buildOutpatientArray:function(e){var t=[],i=e.at(0),o=i.get("outpatient");return o=this.groupPatientsByTimeSlice(o),n.each(o,function(e,n){var i=n+"",o=e.length;i.length>6?t.push([l(i,"YYYYMMDD").valueOf(),o]):t.push([l(i,"YYYYMM").valueOf(),o])}),t},buildInpatientArray:function(e){var t=[],i=e.at(0),o=i.get("inpatient");return o=this.groupPatientsByTimeSlice(o),n.each(o,function(e,n){var i=n+"",o=e.length;i.length>6?t.push([l(i,"YYYYMMDD").valueOf(),o]):t.push([l(i,"YYYYMM").valueOf(),o])}),t},groupPatientsByTimeSlice:function(e){var t=s.getModel("globalDate"),i=t.get("firstEventDate"),o=t.get("lastEventDate");void 0===i||null===i?(i=l(),i.subtract(1,"d")):i=l(i,"MM/DD/YYYY"),o=void 0===o||null===o?l():l(o,"MM/DD/YYYY");var r=n.groupBy(e,function(e){var t=e.dateTime+"";t=t.slice(0,8);var n=parseInt(t.slice(0,4),10),r=parseInt(t.slice(4,6),10),a=parseInt(t.slice(6,8),10),s=l([n,r-1,a]);if(s.diff(l(),"days")>=0)return o.isBefore(s)&&(o=s),8>a?a="07":15>a?a="14":22>a?a="21":(a="01",r+=1),r=10>r?"0"+r:""+r,n+""+r+a;s.isBefore(i)&&(i=s);var d=3*Math.floor((r+2)/3)-2;d=10>d?"0"+d:""+d;var c=t.slice(0,4)+""+d;return c});return t.set("firstEventDate",i.format("MM/DD/YYYY")),t.set("lastEventDate",o.format("MM/DD/YYYY")),s.set.sessionModel("globalDate",t),r},addAllEventsChartMouseEvents:function(e){},drawAndZoom:function(){var e,t,n,i,o=s.getModel("globalDate"),r=o.get("selectedId");void 0!==o.get("selectedId")&&null!==o.get("selectedId")&&("all-range-global"===r?(e=o.get("firstEventDate"),t=o.get("lastEventDate")):(e=o.get("fromDate"),t=o.get("toDate"))),(null===e||void 0===e||""===$.trim(e))&&(e="01/01/1900"),n=l(e,"MM/DD/YYYY").valueOf(),i=l(t,"MM/DD/YYYY").valueOf(),u.attr({x:f.xAxis[0].toPixels(n),y:f.chartHeight/2-u.attr("height")/2}),h.attr({x:f.xAxis[0].toPixels(i),y:f.chartHeight/2-u.attr("height")/2}),p.attr({width:h.attr("x")-u.attr("x"),x:u.attr("x")+A}),d.trigger("updateGlobalTimelineDateRange",{from:n,to:i})},onBeforeDestroy:function(){this.destroyAllEventsChart()},destroyAllEventsChart:function(){void 0!==f&&null!==f&&($(document).off("mouseup"),f.destroy(),f=void 0)}})}),define("hbs!main/components/global_datepicker/template/gdrSelectorTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div class="container-fluid">\n    <div class="gdt-padding">\n        <div class="pull-left">\n            <button id="all-range-global" name="all-range-global" type="button" class="gdt-btn daterange btn btn-sm default-range" tabindex="0" title="All range">All</button>\n            <!-- TODO 5y feature for 7F sprint -->\n            <!--<button id="5yr-range-global" name="5yr-range-global" type="button" class="gdt-btn daterange btn btn-sm default-range" tabindex="0" title="5 years range">-->\n                <!--<span class="sr-only">5 years global date range.</span>5y</button>-->\n            <button id="2yr-range-global" name="2yr-range-global" type="button" class="gdt-btn daterange btn btn-primary btn-sm default-range" tabindex="0" title="2 years range">\n                <span class="sr-only">2 years global date range.</span>2y</button>\n            <button id="1yr-range-global" name="1yr-range-global" type="button" class="gdt-btn daterange btn btn-primary btn-sm default-range" tabindex="0" title="1 year range">\n                <span class="sr-only">1 year global date range.</span>1y</button>\n            <button id="3mo-range-global" name="3mo-range-global" type="button" class="gdt-btn daterange btn btn-primary btn-sm default-range" tabindex="0" title="3 months range">\n                <span class="sr-only">3 months global date range.</span>3m</button>\n            <button id="1mo-range-global" name="1mo-range-global" type="button" class="gdt-btn daterange btn btn-primary btn-sm default-range" tabindex="0" title="1 month range">\n                <span class="sr-only">1 month global date range.</span>1m</button>\n            <button id="7d-range-global" name="7d-range-global" type="button" class="gdt-btn daterange btn btn-primary btn-sm default-range" tabindex="0" title="7 days range">\n                <span class="sr-only">7 days global date range.</span>7d</button>\n            <button id="72hr-range-global" name="72hr-range-global" type="button" class="gdt-btn daterange btn btn-primary btn-sm default-range" tabindex="0" title="72 hours range">\n                <span class="sr-only">72 hours global date range.</span>72h</button>\n            <button id="24hr-range-global" name="24hr-range-global" type="button" class="gdt-btn daterange btn btn-primary btn-sm default-range" tabindex="0" title="24 hours range">\n                <span class="sr-only">24 hours global date range.</span>24h</button>\n        </div>\n        <div class="form-inline pull-right">\n            <div class="input-group date" id="custom-date-from-global">\n                <input type="text" class="form-control input-sm gdt-input" id="filter-from-date-global" name="filter-from-date-global" size="10" title="Please select a date in the past." tabindex="0" aria-label="custom date range, from date" style="height: 25px;width: 86px; text-align: center; padding-left: 0px;padding-right: 0px" />\n                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>\n            </div>\n            <span class="inputHelperText">to</span>\n\n            <div class="input-group date" id="custom-date-to-global">\n                <input type="text" class="form-control input-sm gdt-input" id="filter-to-date-global" name="filter-to-date-global" size="11" title="Please select a date that is not in the past." tabindex="0" aria-label="custom date range, to date"  style="height: 25px;width: 86px; text-align: center; padding-left: 0px;padding-right: 0px" />\n                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>\n            </div>\n            <button id="cancel-global" name="cancel-global" type="button" class="gdt-btn btn btn-primary btn-sm" title="Cancel global daterange timeline." tabindex="0">CANCEL</button>\n            <button id="custom-range-apply-global" name="custom-range-apply-global" type="button" class="gdt-btn btn btn-primary btn-sm" title="Apply custom date range filtering." tabindex="0" disabled>APPLY</button>\n        </div>\n    </div>\n    <div class="container-fluid scroll-no-padding">\n        <div class="row">\n            <div class="col-md-12 center-block">\n                <div id="trend-history-chart" role="image" alt="All Events Graph"></div>\n            </div>\n        </div>\n\n        <div class="row">\n            <div class="col-md-12 center-block">\n                <div id="timeline-summary" class="timeline-summary-scrollable"></div>\n            </div>\n        </div>\n    </div>\n</div>\n'},useData:!0});return t.registerPartial("main/components/global_datepicker/template/gdrSelectorTemplate",n),n}),define("main/components/global_datepicker/view/gdrSelectorView",["jquery","jquery.inputmask","bootstrap-datepicker","moment","backbone","marionette","underscore","main/components/global_datepicker/view/trendHistoryView","hbs!main/components/global_datepicker/template/gdrSelectorTemplate","api/Messaging","api/SessionStorage","api/ResourceService","main/components/global_datepicker/util/parseEvents"],function(t,n,i,o,r,a,s,l,d,c,u,h,p){
var g=r.Model.extend({defaults:{fromDate:o().subtract("years",1).format("MM/DD/YYYY"),toDate:o().add("months",6).format("MM/DD/YYYY"),customFromDate:null,customToDate:null,selectedId:"1yr-range-global"}}),f=r.Marionette.LayoutView.extend({model:new g,template:d,className:"global-grid-filter-daterange",regions:{trendHistoryChart:"#trend-history-chart",timelineSummary:"#timeline-summary"},events:{"click .gdt-btn":"clickButton","keydown .gdt-btn":"handleEnterOrSpaceBar","keyup .gdt-input":"keyUpCustomDateRange","blur .gdt-input":"blurCustomDateRange"},initialize:function(){var e=this,t=u.getModel_SessionStoragePreference("globalDate");this.model=t.clone(),this.firstEvent=null,this.trendHistoryView=new l({dateModel:this.model});var n={resourceTitle:"global-timeline-getTimeline",pageable:!1,cache:!0,viewModel:{parse:p}};n.onSuccess=function(t){var n=null,i=null;t.at(0).has("inpatient")&&(n=t.at(0).get("inpatient")[0].dateTime),t.at(0).has("outpatient")&&(i=t.at(0).get("outpatient")[0].dateTime),n||i||(e.firstEvent=o(h.patientRecordService.getCurrentPatient().get("birthDate"))),n?i?e.firstEvent=o(n,"YYYYMMDDHHmm").valueOf()<o(i,"YYYYMMDDHHmm").valueOf()?o(n,"YYYYMMDDHHmm").format("MM/DD/YYYY"):o(i,"YYYYMMDDHHmm").format("MM/DD/YYYY"):e.firstEvent=o(n,"YYYYMMDDHHmm").format("MM/DD/YYYY"):i&&(e.firstEvent=o(i,"YYYYMMDDHHmm").format("MM/DD/YYYY")),e.listenTo(c,"updateGlobalTimelineDateRange",function(t){var n,i=e.model.get("selectedId");if("all-range-global"!==i){var r=o(t.from).format("MM/DD/YYYY"),a=o(t.to).format("MM/DD/YYYY");n={from:r,to:a,selectedId:i},e.model.set({customFromDate:r,customToDate:a}),e.$el.find(".input-group.date#custom-date-from-global").datepicker("update",r),e.$el.find(".input-group.date#custom-date-to-global").datepicker("update",a),e.$el.find("#custom-range-apply-global").removeAttr("disabled")}else{var s=e.firstEvent,l=o(t.to).format("MM/DD/YYYY");n={from:s,to:l,selectedId:i},e.model.set({toDate:l,customToDate:l,firstEventDate:s})}c.trigger("globalDate:updateTimelineSummaryViewOnly",n)})},h.patientRecordService.fetchCollection(n)},getTimelineSummaryView:function(){var e=this,t=c.getChannel("timelineSummary"),n=t.request("createTimelineSummary");n.done(function(t){var n=t.view;e.timelineSummary.show(n)})},keyUpCustomDateRange:function(e){this.model.set("selectedId","custom-range-apply-global"),this.monitorCustomDateRange(!1)},blurCustomDateRange:function(e){this.monitorCustomDateRange(!0)},monitorCustomDateRange:function(e){(this.model.get("customFromDate")!==this.$el.find("#filter-from-date-global").val()||this.model.get("customToDate")!==this.$el.find("#filter-to-date-global").val())&&(this.$el.find("button").removeClass("active-range"),this.checkCustomRangeCondition(e)?this.$el.find("#custom-range-apply-global").removeAttr("disabled"):this.$el.find("#custom-range-apply-global").prop("disabled",!0))},isEarlierThanToday:function(e){return o(e,"MM/DD/YYYY")<o()},checkCustomRangeCondition:function(e){var t=!0,n=this.$el.find("#filter-from-date-global").val(),i=this.$el.find("#filter-to-date-global").val(),r=o(n,"MM/DD/YYYY",!0),a=o(i,"MM/DD/YYYY",!0),s=o().format("MM/DD/YYYY"),l=o(s,"MM/DD/YYYY"),d=!1;return r.isValid()?n!==this.model.get("customFromDate")&&(r>=l?(this.$el.find("#filter-from-date-global").attr("data-toggle","tooltip").attr("data-placement","bottom").tooltip("enable").tooltip("show").val(""),t=!1):(this.$("#filter-from-date-global").removeAttr("data-toggle").tooltip("hide").tooltip("disable"),d=!0,e&&this.model.set("customFromDate",n))):(this.$("#filter-from-date-global").removeAttr("data-toggle").tooltip("hide").tooltip("disable"),t=!1),a.isValid()?i!==this.model.get("customToDate")&&(l>a?(this.$el.find("#filter-to-date-global").attr("data-toggle","tooltip").attr("data-placement","bottom").tooltip("enable").tooltip("show").val(""),t=!1):(this.$("#filter-to-date-global").removeAttr("data-toggle").tooltip("hide").tooltip("disable"),d=!0,e&&this.model.set("customToDate",i))):(this.$("#filter-to-date-global").removeAttr("data-toggle").tooltip("hide").tooltip("disable"),t=!1),e&&d&&c.trigger("globalDate:customDateRangeSelected",this.model),t},enableDatePickers:function(){var e=new Date,n=this.$(".input-group.date#custom-date-from-global").datepicker({format:"mm/dd/yyyy",endDate:"-1d",showOnFocus:!1}),i=this.$(".input-group.date#custom-date-to-global").datepicker({format:"mm/dd/yyyy",startDate:e,showOnFocus:!1});n.on("show",function(e){t(".datepicker").on("mousedown",function(e){e.preventDefault()})}).on("show",function(e){i.datepicker("hide"),t(".datepicker").on("mousedown",function(e){e.preventDefault(),e.stopPropagation()})}),i.on("show",function(e){n.datepicker("hide"),t(".datepicker").on("mousedown",function(e){e.preventDefault(),e.stopPropagation()})}),this.$("#filter-from-date-global, #filter-to-date-global").datepicker("remove")},handleEnterOrSpaceBar:function(t){var n=t&&t.which?t.which:t.keyCode;if(13==n||32==n){e.preventDefault();var i=this.$el.find("#"+t.target.id);i.focus(),i.trigger("click")}},clickButton:function(e){var n,i=this,r=e.target.id;if(""!==r){if("cancel-global"===r)return this.closeExpandedGDT(),void t("globalDatePickerButton").blur();var a=this.model.get("selectedId"),s=!0;"custom-range-apply-global"!==r&&(this.$el.find("#"+r).siblings().removeClass("active-range"),this.$el.find("#"+r).addClass("active-range"),this.model.set("selectedId",r),s=!1);var l,d=o().format("MM/DD/YYYY");switch(-1!==r.indexOf("-range-")&&-1===r.indexOf("custom-range-apply-global")&&(this.$el.find("#filter-from-date-global").val(""),this.$el.find("#filter-to-date-global").val(""),this.$el.find("#custom-range-apply-global").prop("disabled",!0)),r){case"custom-range-apply-global":"all-range-global"===a?(n=u.getModel_SessionStoragePreference("globalDate"),l=i.firstEvent,d=this.$el.find("#filter-to-date-global").val()):(l=this.$el.find("#filter-from-date-global").val(),d=this.$el.find("#filter-to-date-global").val());break;case"5yr-range-global":l=o().subtract("years",5).format("MM/DD/YYYY");break;case"2yr-range-global":l=o().subtract("years",2).format("MM/DD/YYYY");break;case"1yr-range-global":l=o().subtract("years",1).format("MM/DD/YYYY");break;case"3mo-range-global":l=o().subtract("months",3).format("MM/DD/YYYY");break;case"1mo-range-global":l=o().subtract("months",1).format("MM/DD/YYYY");break;case"7d-range-global":l=o().subtract("days",7).format("MM/DD/YYYY");break;case"72hr-range-global":l=o().subtract("days",3).format("MM/DD/YYYY");break;case"24hr-range-global":l=o().subtract("days",1).format("MM/DD/YYYY");break;case"all-range-global":n=u.getModel_SessionStoragePreference("globalDate"),l=i.firstEvent;var h=n.get("lastEventDate");d=void 0!==h&&null!==h?h:o("12/31/2099").format("MM/DD/YYYY")}s?(this.closeExpandedGDT(),(this.model.get("fromDate")!==l||this.model.get("toDate")!==d)&&(this.model.set({fromDate:l,toDate:d}),u.addModel("globalDate",this.model),c.trigger("globalDate:selected",this.model)),t("globalDatePickerButton").blur()):(this.setCustomDateRange(l,d,!0),this.model.set("selectedId",r),c.trigger("globalDate:customDateRangeSelected",this.model))}},closeExpandedGDT:function(){t("#navigation-date #hiddenDiv").toggleClass("hidden"),t("#navigation-date #date-region-minimized").focus()},setCustomDateRange:function(e,t){this.model.set({customFromDate:e,customToDate:t}),this.$el.find(".input-group.date#custom-date-from-global").datepicker("update",e),this.$el.find(".input-group.date#custom-date-to-global").datepicker("update",t),this.$el.find("#custom-range-apply-global").removeAttr("disabled")},resetToCurrentGlbalDate:function(){var e=u.getModel("globalDate"),t=e.get("selectedId");this.model.set({fromDate:e.get("fromDate"),toDate:e.get("toDate"),customFromDate:e.get("customFromDate"),customToDate:e.get("customToDate"),selectedId:t,firstEventDate:e.get("firstEventDate")});var n,i;n="all-range-global"===t?e.get("firstEventDate"):e.get("fromDate"),i=e.get("toDate"),void 0!==n&&null!==n&&this.$("#custom-date-from-global").datepicker("update",n),void 0!==i&&null!==i&&this.$("#custom-date-to-global").datepicker("update",i),this.$el.find("button").removeClass("active-range"),"custom-range-apply-global"!==t&&this.$el.find("#"+t).addClass("active-range"),void 0!==n&&null!==n&&void 0!==i&&null!==i&&c.trigger("resetDateSliderPosition",{from:o(n).valueOf(),to:o(i).valueOf()})},onRender:function(e){this.$("#filter-from-date-global, #filter-to-date-global").inputmask("m/d/y",{placeholder:"MM/DD/YYYY"}),this.enableDatePickers(),this.resetToCurrentGlbalDate(),this.$el.find("#filter-from-date-global, #filter-to-date-global").on("blur",function(){t(".input-group.date#custom-date-from-global").datepicker("hide")}),this.trendHistoryChart.show(this.trendHistoryView)}});return f}),define("hbs!main/components/global_datepicker/template/spikeLineTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div id="spikeLineChartContainer" tooltip-data-key=\'timeline_graph\' data-placement="right"></div>'},useData:!0});return t.registerPartial("main/components/global_datepicker/template/spikeLineTemplate",n),n}),define("main/components/global_datepicker/view/spikeLineView",["backbone","marionette","underscore","main/components/global_datepicker/util/chartHelper","main/components/global_datepicker/util/chartStyling","main/components/global_datepicker/util/parseEvents","hbs!main/components/global_datepicker/template/spikeLineTemplate","api/SessionStorage","moment","api/Messaging","api/ResourceService"],function(e,t,n,i,o,r,a,s,l,d,c){"use strict";var u,h={resourceTitle:"global-timeline-getTimeline",pageable:!1,cache:!0,viewModel:{parse:r}},p=$.extend(!0,{},i.chartConfig,o.spikeLineChartStyles,{tooltip:{enabled:!1}});$.Deferred();return e.Marionette.ItemView.extend({template:a,initialize:function(){var e=this;h.onSuccess=function(t){e.displayCharts(t),e.listenTo(d,"globalDate:selected",e.onDateSelected)},c.patientRecordService.fetchCollection(h)},onDateSelected:function(e){var t,i;"all-range-global"===e.get("selectedId")?(t=l(e.get("firstEventDate")).valueOf(),i=l(u.xAxis[0].getExtremes().dataMax).valueOf()):(t=l(e.get("customFromDate")).valueOf(),i=l(e.get("customToDate")).valueOf()),(null===t||void 0===t||n.isNaN(t)||""===$.trim(t))&&(t=l(u.xAxis[0].getExtremes().dataMin).valueOf()),this.updateBarWidth(t,i),this.drawAndZoom()},displayCharts:function(e){p.series[1].data=this.buildOutpatientArray(e),p.series[0].data=this.buildInpatientArray(e);var t=this,n=setInterval(function(){t.$("#spikeLineChartContainer")&&(clearInterval(n),n=0,p.chart.renderTo=t.$("#spikeLineChartContainer")[0],u=new Highcharts.Chart(p,t.spikelineEventsChartCallback),t.drawAndZoom())},500)},spikelineEventsChartCallback:function(e){Highcharts.addEvent(e.container,"click",function(e){$("#gdr-spikeline").trigger("click")})},buildOutpatientArray:function(e){var t=[],i=e.at(0),o=i.get("outpatient");return o=this.groupPatientsByTimeSlice(o),n.each(o,function(e,n){var i=n+"",o=e.length;i.length>6?t.push([l(i,"YYYYMMDD").valueOf(),o]):t.push([l(i,"YYYYMM").valueOf(),o])}),t},buildInpatientArray:function(e){var t=[],i=e.at(0),o=i.get("inpatient");return o=this.groupPatientsByTimeSlice(o),n.each(o,function(e,n){var i=n+"",o=e.length;i.length>6?t.push([l(i,"YYYYMMDD").valueOf(),o]):t.push([l(i,"YYYYMM").valueOf(),o])}),t},groupPatientsByTimeSlice:function(e){return n.groupBy(e,function(e){var t=e.dateTime+"";t=t.slice(0,8);var n=parseInt(t.slice(0,4),10),i=parseInt(t.slice(4,6),10),o=parseInt(t.slice(6,8),10);if(l([n,i-1,o]).diff(l(),"days")>=0)return 8>o?o="07":15>o?o="14":22>o?o="21":(o="01",i+=1),i=10>i?"0"+i:""+i,n+""+i+o;var r=3*Math.floor((i+2)/3)-2;r=10>r?"0"+r:""+r;var a=t.slice(0,4)+""+r;return a})},updateBarWidth:function(e,t){var n=l(t).diff(l(e),"days"),i=6-Math.floor(n/1500);1>i&&(i=1),u.series[0].update({pointWidth:i}),u.series[1].update({pointWidth:i})},drawAndZoom:function(){var e,t,n=s.getModel("globalDate");void 0!==n.get("selectedId")&&null!==n.get("selectedId")&&(e=n.get("customFromDate"),t=n.get("customToDate")),(null===e||void 0===e||""===$.trim(e))&&(e="01/01/1900");var i,o=[],r=[],a=l().valueOf(),d=!0;$.each(p.series[0].data,function(n,r){r instanceof Array||(r=$.map(r,function(e,t){return[e]})),l(e).valueOf()<r[0]&&r[0]<l(t).valueOf()&&(o.push([r[0],r[1]]),d&&(i=r[0],d=!1),i>r[0]&&(i=r[0]),a<r[0]&&(a=r[0]))}),$.each(p.series[1].data,function(n,o){o instanceof Array||(o=$.map(o,function(e,t){return[e]})),l(e).valueOf()<o[0]&&o[0]<l(t).valueOf()&&(r.push([o[0],o[1]]),d&&(i=o[0],d=!1),i>o[0]&&(i=o[0]),a<o[0]&&(a=o[0]))}),this.updateBarWidth(i,a),u.series[0].setData(o),u.series[1].setData(r)},onBeforeDestroy:function(){this.destroySpikeChart()},destroySpikeChart:function(){void 0!==u&&null!==u&&(u.destroy(),u=void 0)}})}),define("hbs!main/components/text_search/templates/searchBarAreaTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<li id="suggestPanel" class="dropdown">\n    <div id="search-text-group" class="input-group">\n        <input type="text" id="searchtext" class="form-control" placeholder="Search Record" list="suggestList" autocomplete="off" focus="true" tabindex="0" title="Enter text to search." />\n        <div class="input-group-btn">\n            <button id="submit" class="text-search-accessible btn btn-primary" title="Submit Search" tabindex="0">\n                <i class="fa fa-search" alt="Submit Search"></i>\n            </button>\n        </div>\n    </div>\n    <div id="suggestListDiv" class="dropdown-menu" role="menu">\n        <span>\n            <div id="suggestSpinner" tabindex="-1">\n                <i class="fa fa-spinner fa-spin"></i>\n            </div>\n        </span>\n        <span id="suggestArea">\n            <ul id="suggestList"></ul>\n        </span>\n        <span id = "noResults" style="display:none;padding-left:10px">No results</span>\n    </div>\n</li>'},useData:!0});return t.registerPartial("main/components/text_search/templates/searchBarAreaTemplate",n),n}),define("hbs!main/components/text_search/templates/searchSuggestTemplate",["hbs","handlebars"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'<li id="'+s((o=null!=(o=t.itemId||(null!=e?e.itemId:e))?o:a,typeof o===r?o.call(e,{name:"itemId",hash:{},data:i}):o))+'" role="presentation">\n	<a role="menuitem" href="#record-search" class="text-search-accessible" title="Choose Suggestion: '+s((o=null!=(o=t.category||(null!=e?e.category:e))?o:a,typeof o===r?o.call(e,{name:"category",hash:{},data:i}):o))+": "+s((o=null!=(o=t.cleansedSearchResult||(null!=e?e.cleansedSearchResult:e))?o:a,typeof o===r?o.call(e,{name:"cleansedSearchResult",hash:{},data:i}):o))+'" tabindex="0">\n		<div class="label label-default suggest-label pull-right">'+s((o=null!=(o=t.category||(null!=e?e.category:e))?o:a,typeof o===r?o.call(e,{name:"category",hash:{},data:i}):o))+'</div><span id="'+s((o=null!=(o=t.firstString||(null!=e?e.firstString:e))?o:a,typeof o===r?o.call(e,{name:"firstString",hash:{},data:i}):o))+'">'+s((o=null!=(o=t.firstString||(null!=e?e.firstString:e))?o:a,typeof o===r?o.call(e,{name:"firstString",hash:{},data:i}):o))+'</span><span id="'+s((o=null!=(o=t.boldString||(null!=e?e.boldString:e))?o:a,typeof o===r?o.call(e,{name:"boldString",hash:{},data:i}):o))+'" class="bold">'+s((o=null!=(o=t.boldString||(null!=e?e.boldString:e))?o:a,typeof o===r?o.call(e,{name:"boldString",hash:{},data:i}):o))+'</span><span id="'+s((o=null!=(o=t.lastString||(null!=e?e.lastString:e))?o:a,typeof o===r?o.call(e,{name:"lastString",hash:{},data:i}):o))+'">'+s((o=null!=(o=t.lastString||(null!=e?e.lastString:e))?o:a,typeof o===r?o.call(e,{name:"lastString",hash:{},data:i}):o))+"</span>\n	</a>\n</li>"},useData:!0});return t.registerPartial("main/components/text_search/templates/searchSuggestTemplate",n),n}),define("main/components/text_search/textSearchInputView",["backbone","marionette","hbs!main/components/text_search/templates/searchBarAreaTemplate","hbs!main/components/text_search/templates/searchSuggestTemplate","api/SessionStorage","api/Messaging","api/ResourceService","api/Navigation"],function(e,t,n,i,o,r,a,s){var l=e.Marionette.ItemView.extend({template:n,searchSuggestTemplate:i,isSearching:null,suggestResults:{},searchResults:{},searchTerm:null,suggestionsLocked:!1,lastQuery:"",onBeforeDestroy:function(){$(document).off("click."+this.cid)},initialize:function(){var e=o.getAppletStorageModel("search","searchText");e&&(this.searchTerm=e)},onRender:function(e){var t=this;$(document).on("click."+this.cid,function(){t.clearSuggestList($("#suggestList")),$("#suggestList").hide(),$("#suggestListDiv").hide()})},events:{"keydown #searchtext":"onSearchTextKey","keydown #suggestList a":"onSuggestionKey","click #submit":"doSubmitSearch"},doAutocomplete:function(e){var t=this;this.cancelSuggest(),this.isSearching=setTimeout(function(){var e=$("#searchtext"),n=e.val().trim();if(n&&n.length>2){$("#suggestList").hide(),$("#noResults").hide(),$("#suggestListDiv").show(),$("#suggestSpinner").show();var i={criteria:{query:n}};i.patient=a.patientRecordService.getCurrentPatient(),i.resourceTitle="patient-record-search-suggest",t.suggestResults=a.patientRecordService.fetchCollection(i),t.suggestResults.on("sync",t.fillSuggestList,t)}},500)},clearSuggestList:function(e){e||(e=$("#suggestList")),e.empty()},fillSuggestList:function(){if(!this.suggestionsLocked){var e=$("#suggestList");this.clearSuggestList(e),e.show(),$("#suggestSpinner").hide();var t=this,n=0,i=[],o=this.suggestResults.models.length;1===o?($("#noResults").show(),$("#suggestList").hide()):($("#noResults").hide(),this.suggestResults.models.forEach(function(o){for(var r="",a=o.get("query"),s=0;s<i.length;s++)if(a==i[s])return;i.push(a),document.getElementById("suggestPanel").className="dropdown open","undefined"!=typeof o.get("category")&&(r=o.get("category"));var l="SuggestItem"+n.toString(),d=o.get("display")||"",c=$("#searchtext").val().toString();r=o.attributes.category;var u=d.split(new RegExp(c,"i"));"Spelling Suggestion"===r&&(c="");var h=$(t.searchSuggestTemplate({itemId:l,category:r,firstString:u[0],boldString:d.indexOf(c)>-1?c:"",lastString:u[1],cleansedSearchResult:d.replace(/<[^>]*>/g,"")}));0===n&&h.remove(".suggestListCategory"),e.append(h),$(document).ready(function(){var e=a,n=t;$("#"+l).click(function(t){var i=e,o=n;o.searchFromSuggest(i)})}),n++}))}},cancelSuggest:function(){this.isSearching&&clearTimeout(this.isSearching)},searchFromSuggest:function(e){$("#searchtext").val(e),this.doSubmitSearch()},doSubmitSearch:function(){this.cancelSuggest();var e=$("#searchtext").val().trim();this.searchTerm=e,e&&this.doReturnResults()},doReturnResults:function(){$("#suggestList").hide(),$("#suggestSpinner").hide();var e={searchTerm:this.searchTerm};s.navigate("record-search"),$("#searchtext").val(this.searchTerm),o.setAppletStorageModel("search","searchText",e);var t=setInterval(function(){o.getAppletStorageModel("search","searchText").searchTerm===e.searchTerm&&(clearInterval(t),r.getChannel("search").trigger("newSearch"))},500)},onAccessibilityKeydown:function(e){(32===e.keyCode||13===e.keyCode)&&$(e.target).trigger("click")},getFirstSearchSuggestion:function(){return $("#suggestList > :first-child a")},getLastSearchSuggestion:function(){return $("#suggestList > :last-child a")},onSearchTextKey:function(e){var t=$("#suggestList");switch(e.keyCode){case 13:e.preventDefault(),this.doSubmitSearch();break;case 27:this.clearSuggestList(t),t.hide(),$("#suggestListDiv").hide();break;case 38:t.css("display")&&"none"!==t.css("display")&&this.getLastSearchSuggestion().focus();break;case 40:t.css("display")&&"none"!==t.css("display")&&this.getFirstSearchSuggestion().focus();break;default:var n=this;setTimeout(function(){var t=$("#searchtext").val();t!==n.lastQuery&&(n.lastQuery=t,n.suggestionsLocked=!1,n.doAutocomplete(e))},0)}},onSuggestionKey:function(e){var t=$(e.target);t.parent().attr("id");switch(e.keyCode){case 38:t.is(this.getFirstSearchSuggestion())&&setTimeout(function(){$("#searchtext").focus()},0);break;case 8:e.preventDefault();break;case 40:t.is(this.getLastSearchSuggestion())&&setTimeout(function(){$("#searchtext").focus()},0)}}});return l}),define("hbs!main/components/applet_header/templates/workspaceSelect",["hbs","handlebars"],function(e,t){var n=t.template({1:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l=this.escapeExpression,d='    <li role="presentation" class="'+l((r=null!=(r=t.routeName||(null!=e?e.routeName:e))?r:s,typeof r===a?r.call(e,{name:"routeName",hash:{},data:i}):r))+'-button"> <a href="#'+l((r=null!=(r=t.routeName||(null!=e?e.routeName:e))?r:s,typeof r===a?r.call(e,{name:"routeName",hash:{},data:i}):r))+'" role="button">\n';return o=t["if"].call(e,null!=e?e.defaultScreen:e,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=o&&(d+=o),d+"        "+l((r=null!=(r=t.title||(null!=e?e.title:e))?r:s,typeof r===a?r.call(e,{name:"title",hash:{},data:i}):r))+"</a>\n    </li>\n"},2:function(e,t,n,i){return'        <i class="fa fa-star"></i>\n'},4:function(e,t,n,i){return'<button type="button" id="plus-button" class="btn btn-default" title="Workspace Editor">\n    <i class="fa fa-plus-square"><span class="sr-only">Screen Builder Page</span></i>\n</button>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r='<button type="button" id="workspace-manager-button" class="btn btn-default" title="Workspace Manager">\n    <i class="fa fa-th"></i><span class="sr-only">Workspace Manager Page</span>\n</button>\n<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">\n    <span id="screenName">Menu</span>\n    <span class="fa fa-caret-down"></span>\n</button>\n<ul class="dropdown-menu" role="menu">\n<div class="dropdownContainer">\n\n<form >\n<li><input type="text" name="searchDropdownScreens "id="dropdown-search-element" placeholder="Filter workspace by keyword" onfocus="this.value = this.value;" maxlength=\'25\' title="Input text to Filter workspace by keyword"><button class="clear" id="clearSearch">\n    <i class="fa fa-times"></i>\n    <span class="sr-only">Press enter to clear filter text</span>\n</button></li>\n</form>\n\n';return o=t.each.call(e,null!=e?e.screens:e,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(r+=o),r+="\n</div>\n</ul>\n",o=t.unless.call(e,null!=e?e.hidePlusButton:e,{name:"unless",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=o&&(r+=o),r},useData:!0});return t.registerPartial("main/components/applet_header/templates/workspaceSelect",n),n}),define("main/components/applet_header/views/workspaceSelect",["api/Navigation","backbone","marionette","underscore","hbs!main/components/applet_header/templates/workspaceSelect","api/UserDefinedScreens","main/components/applet_header/navView","api/Messaging"],function(e,t,n,i,o,r,a,s){"use strict";return n.ItemView.extend({template:o,events:{"click .dropdown-menu a":"navigate","click #plus-button":"addApplets","click #workspace-manager-button":"workspaceManager","keyup #dropdown-search-element":"filterScreens","click ul.dropdown-menu #clearSearch":"clearFilteredMenu"},initialize:function(){var e=!i.isUndefined(this.model.get("currentScreen").nonPatientCentricView)&&this.model.get("currentScreen").nonPatientCentricView===!0;e&&this.model.set("hidePlusButton",!0),$("ul.dropdown-menu #clearSearch").hide(),this.listenTo(ADK.Messaging,"close:workspaceManager",this.updateWorkspaceList)},onRender:function(){var e=$(".dropdown-menu li #dropdown-search-element");e.click(function(e){e.stopPropagation()}),e.keydown(function(e){e.stopPropagation()}),e.val(""),e.focus(),e.val(this.filterText),$(".dropdownContainer").mousedown(function(e){return $(e.target).hasClass("dropdownContainer")?(e.stopPropagation(),e.preventDefault(),!1):void 0})},modelEvents:{"change:currentScreen":"currentScreenChanged","change:screens":"changeScreens"},updateWorkspaceList:function(){this.filterText="",r.getScreensConfig().done(function(e){this.model.set("screens",e.screens),this.model.set("originalScreens",e.screens)}.bind(this)),$("ul.dropdown-menu #clearSearch").css("display","none")},changeScreens:function(){this.render(),this.currentScreenChanged()},onShow:function(){this.updateWorkspaceList()},navigate:function(t){var n;$(".dropdown-menu li.active").removeClass("active"),n=$(t.currentTarget).attr("href")?$(t.currentTarget).attr("href"):$(t.currentTarget).attr("class"),e.navigate(n)},currentScreenChanged:function(){var e=s.request("get:current:screen").id;this.$el.find(".active").removeClass("active");var t=$(this.el.getElementsByClassName(e+"-button")).addClass("active").text().trim();""!==t?this.$el.find("#screenName").text(t):"record-search"===e?this.$el.find("#screenName").text("Search Record"):e.indexOf("-full")>-1&&this.$el.find("#screenName").text(this.model.get("currentScreen").applets[0].title);var n=!i.isUndefined(this.model.get("currentScreen").nonPatientCentricView)&&this.model.get("currentScreen").nonPatientCentricView===!0;this.model.get("currentScreen").predefined===!1||n?this.$el.find("#plus-button").show():this.$el.find("#plus-button").hide()},addApplets:function(e){var t=s.getChannel("addAppletsChannel");t.trigger("addApplets")},workspaceManager:function(e){var t=s.getChannel("workspaceManagerChannel");t.trigger("workspaceManager")},filterScreens:function(){var e=this.$el.find("#dropdown-search-element").val();this.filterText=e,this.filterMenu(e)},filterMenu:function(e){var t=i.filter(this.model.get("originalScreens"),function(t){return t.title.toLowerCase().indexOf(e.toLowerCase())>=0});this.model.set("screens",t),$("ul.dropdown-menu #clearSearch").css("display","inline"),""===this.filterText?$("ul.dropdown-menu #clearSearch").css("display","none"):$("ul.dropdown-menu #clearSearch").css("display","inline")},clearFilteredMenu:function(e){e.stopPropagation(),this.filterText="",r.getScreensConfig().done(function(e){this.model.set("screens",e.screens),this.model.set("originalScreens",e.screens)}.bind(this)),$("ul.dropdown-menu #clearSearch").css("display","none")}})}),define("main/components/applet_header/navView",["api/Navigation","main/ADKApp","backbone","marionette","underscore","handlebars","main/Utils","api/SessionStorage","api/UserDefinedScreens","hbs!main/components/applet_header/templates/navTemplate","hbs!main/components/global_datepicker/template/gdrHeaderMinimizedTemplate","hbs!main/components/global_datepicker/template/gdrHeaderExtendedTemplate","main/components/global_datepicker/view/gdrSelectorView","main/components/global_datepicker/view/spikeLineView","main/components/global_datepicker/view/trendHistoryView","main/components/text_search/textSearchInputView","main/components/applet_header/views/workspaceSelect"],function(e,t,n,i,o,r,a,s,l,d,c,u,h,p,g,f,m){"use strict";var v=!1,b=i.ItemView.extend({template:c,modelEvents:{change:"render"},initialize:function(){var e=s.getModel_SessionStoragePreference("globalDate");this.model=e}}),y=n.Marionette.LayoutView.extend({template:d,className:"applet-nav",regions:{gdrSpikeline:"#gdr-spikeline",globalDateRegion:"#globalDate-region",dateRegionMinimized:"#date-region-minimized",textSearchInput:"#text-search-input",screenSelectionRegion:"#nav-workspaceSelect",dropDownSelect:".dropdown-menu"},events:{"click .globalDatePickerButton":"togglePopover","click #gdr-spikeline":"togglePopover","keydown #globalDatePicker-compact":"handleEnterOrSpaceBar","keydown #gdr-spikeline":"handleEnterOrSpaceBar"},provisionPredefinedScreens:function(e){var t=[];return o.each(e,function(e){var n=!0;if(!o.isUndefined(e.hasPermission))if(o.isFunction(e.hasPermission)){var i=e.hasPermission();o.isBoolean(i)||(i=!1),n=i}else n=!1;n===!0&&t.push(e)}),t},initialize:function(){v=!1,this.globalDatePicker=new h,this.gdrMinimizedHeader=new b({dateModel:this.globalDatePicker.model}),this.spikeLineView=new p({navView:this});var e=new n.Model;e.set("currentScreen",this.model.get("currentScreen")),this.workspaceSelectView=new m({model:e});var t=!o.isUndefined(this.model.get("currentScreen").nonPatientCentricView)&&this.model.get("currentScreen").nonPatientCentricView===!0;t?this.model.set("isNonPatientCentricView",!0):this.textSearchInputView=new f;var i=this,r=l.getScreensConfig();i.collection=new n.Collection,r.done(function(e){var t=i.provisionPredefinedScreens(e.screens);i.collection.reset(t)})},modelEvents:{"change:globalDatepicker":"toogleGlobalDate","change:currentScreen":"updateWorkspaceSelection","change:defaultScreen":"updateWorkspaceDefaultScreen"},toogleGlobalDate:function(){this.model.get("globalDatepicker")?(this.gdrMinimizedHeader.$el.show(),this.spikeLineView.$el.show(),this.$el.find("#date-region-minimized").removeClass("hidden")):(this.gdrMinimizedHeader.$el.hide(),this.spikeLineView.$el.hide(),this.$el.find("#date-region-minimized").addClass("hidden"))},onShow:function(){this.dateRegionMinimized.show(this.gdrMinimizedHeader),this.globalDateRegion.show(this.globalDatePicker),this.gdrSpikeline.show(this.spikeLineView),this.screenSelectionRegion.show(this.workspaceSelectView),this.toogleGlobalDate();var e=!o.isUndefined(this.model.get("currentScreen").nonPatientCentricView)&&this.model.get("currentScreen").nonPatientCentricView===!0;e||this.textSearchInput.show(this.textSearchInputView,{preventDestroy:!0})},getDropDownItems:function(){},setModel:function(){var e=this.getDropDownItems();Math.ceil(this.collection.length/e);this.model.set({})},handleEnterOrSpaceBar:function(e){var t=e&&e.which?e.which:e.keyCode;(13==t||32==t)&&this.togglePopover()},togglePopover:function(){v||(this.globalDatePicker.getTimelineSummaryView(),v=!0),$("#hiddenDiv").toggleClass("hidden"),$("#hiddenDiv").hasClass("hidden")?($(".cover-sheet .datepicker").hide(),this.$el.find("#navigation-dateButton").focus()):(void 0!==this.globalDatePicker&&null!==this.globalDatePicker&&this.globalDatePicker.resetToCurrentGlbalDate(),this.$el.find("#filter-from-date-global").focus()),$("#navigation-dateButton").toggleClass("active"),$("body").on("mousedown",this.bodyMousedown),$("#hiddenDiv").on("mousedown",this.hiddenDivMousedown)},hiddenDivMousedown:function(e){var t=$(".input-group.date#custom-date-from-global"),n=$(".input-group.date#custom-date-to-global");void 0!==t&&null!==t&&t.datepicker("hide"),void 0!==n&&null!==n&&n.datepicker("hide"),e.stopPropagation()},bodyMousedown:function(e){0===$("#mainModal").length&&($("#hiddenDiv").hasClass("hidden")||($("#hiddenDiv").toggleClass("hidden"),$("#navigation-dateButton").toggleClass("active"),$("body").off("mousedown",this.bodyMousedown)))},updateWorkspaceSelection:function(){this.workspaceSelectView.model.set("currentScreen",this.model.get("currentScreen"))},updateWorkspaceDefaultScreen:function(){this.workspaceSelectView.model.set("defaultScreen",this.model.get("defaultScreen"))},updateWorkspaceList:function(){this.workspaceSelectView.updateWorkspaceList()},onBeforeDestroy:function(){$("#hiddenDiv").off("mousedown",this.hiddenDivMousedown)}});return y}),define("hbs!main/components/patient/patientSidebarInfoTemplate",["hbs","handlebars","_assets/templates/helpers/formatSSN","_assets/templates/helpers/formatDate","_assets/templates/helpers/getAge"],function(e,t){var n=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'<div id="patientDemographics">\n    <div id="patientName">'+s((o=null!=(o=t.fullName||(null!=e?e.fullName:e))?o:a,typeof o===r?o.call(e,{name:"fullName",hash:{},data:i}):o))+'</div>\n    <span style="margin-right:50px">'+s((t.formatSSN||e&&e.formatSSN||a).call(e,null!=e?e.ssn:e,!1,{name:"formatSSN",hash:{},data:i}))+'</span>\n    <br>\n    <span class="paddingRight">'+s((t.formatDate||e&&e.formatDate||a).call(e,null!=e?e.birthDate:e,"MM/DD/YYYY",{
name:"formatDate",hash:{},data:i}))+" ("+s((t.getAge||e&&e.getAge||a).call(e,null!=e?e.birthDate:e,{name:"getAge",hash:{},data:i}))+"y)</span>\n    <span>"+s((o=null!=(o=t.genderName||(null!=e?e.genderName:e))?o:a,typeof o===r?o.call(e,{name:"genderName",hash:{},data:i}):o))+'</span>\n</div>\n<div class="patientSensitivity">\n    <div class="label label-warning">'+s((o=null!=(o=t.ackTitle||(null!=e?e.ackTitle:e))?o:a,typeof o===r?o.call(e,{name:"ackTitle",hash:{},data:i}):o))+'</div>\n</div>\n<!--<hr>\n<div id="patientCWAD">\n    <span class="label label-danger cwad">Directives</span>\n    <span class="label label-danger cwad">Allergies</span>\n    <span class="label label-danger cwad">Flags</span>\n    <span class="label label-danger cwad">Crisis Notes</span>\n</div>\n<hr>\n<div id="patientProvider">\n    <p class="text-muted">Provider</p>\n    <p>Last Name, First Name</p>\n</div>\n<div id="patientWard">\n    <p class="text-muted">Ward</p>\n    <p>WARD ID / Room #</p>\n</div>\n<hr>\n<div id="primaryCareTeam">\n    <p class="text-muted">Primary Care Team</p>\n    <p>Care Team ##</p>\n</div>\n<div id="attendingProvider">\n    <p class="text-muted">Attending Provider</p>\n    <p>Last Name, First Name</p>\n</div>\n<div id="inpatientProvider">\n    <p class="text-muted">Inpatient Provider</p>\n    <p>Last Name, First Name</p>\n</div>\n<hr>-->\n<br>'},useData:!0});return t.registerPartial("main/components/patient/patientSidebarInfoTemplate",n),n}),define("main/components/patient/patientSidebarInfoView",["backbone","marionette","underscore","hbs!main/components/patient/patientSidebarInfoTemplate"],function(e,t,n,i){var o=e.Marionette.ItemView.extend({template:i,modelEvents:{change:"render"},className:"patientDemographicsSideBar patientInfo"});return o}),define("main/ComponentLoader",["underscore","backbone","marionette","main/AppletBuilder","main/components/patient/patientSearchView","main/components/patient/patientHeaderView","main/components/navigation/navigationView","main/components/nav/navView","main/components/adk_nav/navView","main/components/applet-tester-nav/navView","main/components/blankNav/navView","main/components/footer/footerView","main/components/navSearch/navView","main/components/applet_header/navView","main/components/patient/patientSidebarInfoView"],function(e,t,n,i,o,r,a,s,l,d,c,u,h,p,g){function f(e,t){void 0!==e.currentView&&e.currentView instanceof t||e.show(new t)}var m={};return m.load=function(n,i,a,m,v){var b=i.header_region;switch(m.appHeader){case"nav":f(b,s);break;case"adkNav":f(b,l);break;case"searchNav":f(b,h);break;case"appletTesterNav":f(b,d);break;case"blankNav":f(b,c);break;case"none":b.empty();break;default:f(b,s)}var y=!e.isUndefined(m.nonPatientCentricView)&&m.nonPatientCentricView===!0;if(m.patientRequired===!0||y){var w=i.patientDemographic_region;y||void 0!==w.currentView&&w.currentView instanceof r||w.show(new r({model:v}));var A=i.navigation_region,N="undefined"==typeof m.globalDatepicker?!0:m.globalDatepicker;y&&(N=!1),void 0!==A.currentView&&A.currentView instanceof p?(A.currentView.model.set({currentScreen:m,globalDatepicker:N}),A.currentView.updateWorkspaceList()):A.show(new p({model:new t.Model({currentScreen:m,globalDatepicker:N})}))}var _=n.bottomRegion,C={currentScreen:m};switch(m.appFooter){case"footer":if(void 0===_.currentView||!(_.currentView instanceof u)){_.show(new u(C));break}_.currentView.model.set("currentScreen",m);break;case"none":_.empty();break;default:if(void 0===_.currentView||!(_.currentView instanceof u)){_.show(new u(C));break}_.currentView.model.set("currentScreen",m)}if(m.content_left&&"none"!=m.content_left&&"fixed_left"===m.contentRegionLayout){var x=a.content_sidebarLeft_region;"patientSearch"==m.appLeft?f(region,o):"patientInfo"==m.appLeft?void 0!==x.currentView&&x.currentView instanceof g||x.show(new g({model:v})):void 0!==x.currentView&&x.currentView instanceof g||x.show(new g({model:v}))}},m}),define("main/components/views/ccowObjectsView",["backbone","marionette","underscore"],function(Backbone,Marionette,_){"use strict";var CCOWObjectsModel=Backbone.Model.extend({}),contextorControl,pendingChangeCheck=function(e){console.log("Pending",e)},commitChange=function(e){if("Connected"===ADK.CCOWService.getCcowStatus()){var t=ADK.CCOWService.getDfnFromContextItems();ADK.CCOWService.ensureICNforPatient(t,function(e){navigateToPatient(e.pid)})}},setPatientStatusClass=function(e){var t="Outpatient";return e.get("admissionUid")&&null!==e.get("admissionUid")&&(t="Inpatient"),e.set("patientStatusClass",t),e},navigateToDefaultScreen=function(e){var t=e.attributes,n=ADK.ResourceService.buildUrl("patientphoto-getPatientPhoto",{pid:t.icn});$.ajax({url:n,success:function(t,n,i){var o="data:image/jpeg;base64,"+t,r=new Backbone.Model({image:o});ADK.SessionStorage.set.sessionModel("patient-image",r);var a="Outpatient";e.get("admissionUid")&&null!==e.get("admissionUid")&&(a="Inpatient"),e.set("patientStatusClass",a),ADK.SessionStorage.set.sessionModel("patient",e),ADK.UserDefinedScreens.screensConfigNullCheck(),ADK.Messaging.trigger("patient:selected",e),ADK.Navigation.navigate(ADK.ADKApp.userSelectedDefaultScreen,{trigger:!0})}})},navigateToPatient=function(e){if(e){var t=ADK.SessionStorage.getModel("patient"),n=t.get("icn")?t.get("icn"):t.get("pid"),i=ADK.Messaging.getChannel("patient_search");if(i.comply("confirm_"+e,function(e){navigateToDefaultScreen(e)}),n!==e){var o={resourceTitle:"patient-record-patient",criteria:{pid:e}};o.onError=function(e,t){},o.onSuccess=function(t,n){var o={resourceTitle:"authentication-list",cache:!1};o.onError=function(e){console.log(e)},o.onSuccess=function(n,o){var r=new Backbone.Model({data:t,sites:n});ADK.SessionStorage.set.sessionModel("patient-domain",r);var a=_.indexOf(t.pluck("pid"),e);(-1!==a||e===t.models[0].get("icn"))&&-1===a&&(a=0);var s=t.models[a];i.command("confirm_"+e,s)},ADK.ResourceService.fetchCollection(o)},ADK.ResourceService.fetchCollection(o)}}},CCOWObjectsView=Backbone.Marionette.ItemView.extend({template:_.template(""),initialize:function(e){this.model=new CCOWObjectsModel,this.ccowSession=ADK.SessionStorage.getModel("ccow");try{contextorControl=new ActiveXObject("Sentillion.Contextor.1")}catch(t){this.ccowSession.set("status","NotConnected"),this.model.set("failed","yes")}if("NotConnected"!==this.ccowSession.get("status")){var n=this.ccowSession.get("state");this.model.get("failed")||(n&&"initial"!==n?"listening"===n&&this.loadModelFromSession():this.runContext())}},loadModelFromSession:function(){this.model.set("contextManagerUrl",this.ccowSession.get("contextManagerUrl")),this.model.set("contextCoupon",this.ccowSession.get("contextCoupon")),this.model.set("participantCoupon",this.ccowSession.get("participantCoupon"))},persistCcowSession:function(){ADK.SessionStorage.clear("ccow"),ADK.SessionStorage.addModel("ccow",this.ccowSession)},loadSessionObject:function(e){var t=this;t.ccowSession.set("pid",e.pid),t.ccowSession.set("state","listening"),t.ccowSession.set("status","Connected"),t.persistCcowSession()},runContext:function(){var self=this,runContextManager=$.Deferred(),isSsoSession=ADK.SessionStorage.getModel("SSO").get("CPRSHostIP"),loginDeferred=$.Deferred();if(self.ccowSession.set("state","initial"),loginDeferred.done(function(e){self.loadSessionObject(e)}),loginDeferred.fail(function(){ADK.Messaging.trigger("user:sessionEnd"),self.ccowSession.set("status","NotConnected"),self.persistCcowSession()}),runContextManager.fail(function(){ADK.SessionStorage.clear("SSO"),self.ccowSession.set("status","NotConnected"),self.persistCcowSession(),isSsoSession&&(window.location.href="/")}),runContextManager.done(function(){self.ccowSession.set("state","ranlocator");var e=ADK.CCOWService.getDfnFromContextItems();self.persistCcowSession(),ADK.CCOWService.ensureICNforPatient(e,function(e){navigateToPatient(e.pid)})}),1===contextorControl.State)try{contextorControl.Run("eHMP","",!0)}catch(e){if(e.message.indexOf("C2W_CM")>-1)try{contextorControl.Run("eHMP#","",!0)}catch(e2){runContextManager.reject()}else runContextManager.reject()}finally{eval("function contextorControl::Pending(contextItems) { pendingChangeCheck(contextItems); }"),eval("function contextorControl::Committed(contextItems) { commitChange(contextItems); }"),ADK.CCOWService.contextorControl=contextorControl,runContextManager.resolve()}}});return CCOWObjectsView}),!function(e,t){"function"==typeof define&&define.amd?define("gridster-coords",["jquery"],t):e.GridsterCoords=t(e.$||e.jQuery)}(this,function(e){function t(t){return t[0]&&e.isPlainObject(t[0])?this.data=t[0]:this.el=t,this.isCoords=!0,this.coords={},this.init(),this}var n=t.prototype;return n.init=function(){this.set(),this.original_coords=this.get()},n.set=function(e,t){var n=this.el;if(n&&!e&&(this.data=n.offset(),this.data.width=n.width(),this.data.height=n.height()),n&&e&&!t){var i=n.offset();this.data.top=i.top,this.data.left=i.left}var o=this.data;return"undefined"==typeof o.left&&(o.left=o.x1),"undefined"==typeof o.top&&(o.top=o.y1),this.coords.x1=o.left,this.coords.y1=o.top,this.coords.x2=o.left+o.width,this.coords.y2=o.top+o.height,this.coords.cx=o.left+o.width/2,this.coords.cy=o.top+o.height/2,this.coords.width=o.width,this.coords.height=o.height,this.coords.el=n||!1,this},n.update=function(t){if(!t&&!this.el)return this;if(t){var n=e.extend({},this.data,t);return this.data=n,this.set(!0,!0)}return this.set(!0),this},n.get=function(){return this.coords},n.destroy=function(){this.el.removeData("coords"),delete this.el},e.fn.coords=function(){if(this.data("coords"))return this.data("coords");var e=new t(this,arguments[0]);return this.data("coords",e),e},t}),function(e,t){"function"==typeof define&&define.amd?define("gridster-collision",["jquery","gridster-coords"],t):e.GridsterCollision=t(e.$||e.jQuery,e.GridsterCoords)}(this,function(e,t){function n(t,n,o){this.options=e.extend(i,o),this.$element=t,this.last_colliders=[],this.last_colliders_coords=[],this.set_colliders(n),this.init()}var i={colliders_context:document.body,overlapping_region:"C"};n.defaults=i;var o=n.prototype;return o.init=function(){this.find_collisions()},o.overlaps=function(e,t){var n=!1,i=!1;return(t.x1>=e.x1&&t.x1<=e.x2||t.x2>=e.x1&&t.x2<=e.x2||e.x1>=t.x1&&e.x2<=t.x2)&&(n=!0),(t.y1>=e.y1&&t.y1<=e.y2||t.y2>=e.y1&&t.y2<=e.y2||e.y1>=t.y1&&e.y2<=t.y2)&&(i=!0),n&&i},o.detect_overlapping_region=function(e,t){var n="",i="";return e.y1>t.cy&&e.y1<t.y2&&(n="N"),e.y2>t.y1&&e.y2<t.cy&&(n="S"),e.x1>t.cx&&e.x1<t.x2&&(i="W"),e.x2>t.x1&&e.x2<t.cx&&(i="E"),n+i||"C"},o.calculate_overlapped_area_coords=function(t,n){var i=Math.max(t.x1,n.x1),o=Math.max(t.y1,n.y1),r=Math.min(t.x2,n.x2),a=Math.min(t.y2,n.y2);return e({left:i,top:o,width:r-i,height:a-o}).coords().get()},o.calculate_overlapped_area=function(e){return e.width*e.height},o.manage_colliders_start_stop=function(t,n,i){for(var o=this.last_colliders_coords,r=0,a=o.length;a>r;r++)-1===e.inArray(o[r],t)&&n.call(this,o[r]);for(var s=0,l=t.length;l>s;s++)-1===e.inArray(t[s],o)&&i.call(this,t[s])},o.find_collisions=function(t){for(var n=this,i=this.options.overlapping_region,o=[],r=[],a=this.colliders||this.$colliders,s=a.length,l=n.$element.coords().update(t||!1).get();s--;){var d=n.$colliders?e(a[s]):a[s],c=d.isCoords?d:d.coords(),u=c.get(),h=n.overlaps(l,u);if(h){var p=n.detect_overlapping_region(l,u);if(p===i||"all"===i){var g=n.calculate_overlapped_area_coords(l,u),f=n.calculate_overlapped_area(g),m={area:f,area_coords:g,region:p,coords:u,player_coords:l,el:d};n.options.on_overlap&&n.options.on_overlap.call(this,m),o.push(c),r.push(m)}}}return(n.options.on_overlap_stop||n.options.on_overlap_start)&&this.manage_colliders_start_stop(o,n.options.on_overlap_start,n.options.on_overlap_stop),this.last_colliders_coords=o,r},o.get_closest_colliders=function(e){var t=this.find_collisions(e);return t.sort(function(e,t){return"C"===e.region&&"C"===t.region?e.coords.y1<t.coords.y1||e.coords.x1<t.coords.x1?-1:1:(e.area<t.area,1)}),t},o.set_colliders=function(t){"string"==typeof t||t instanceof e?this.$colliders=e(t,this.options.colliders_context).not(this.$element):this.colliders=e(t)},e.fn.collision=function(e,t){return new n(this,e,t)},n}),function(e,t){e.delay=function(e,t){var n=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},e.debounce=function(e,t,n){var i;return function(){var o=this,r=arguments,a=function(){i=null,n||e.apply(o,r)};n&&!i&&e.apply(o,r),clearTimeout(i),i=setTimeout(a,t)}},e.throttle=function(e,t){var n,i,o,r,a,s,l=debounce(function(){a=r=!1},t);return function(){n=this,i=arguments;var d=function(){o=null,a&&e.apply(n,i),l()};return o||(o=setTimeout(d,t)),r?a=!0:s=e.apply(n,i),l(),r=!0,s}}}(window),function(e,t){"function"==typeof define&&define.amd?define("gridster-draggable",["jquery"],t):e.GridsterDraggable=t(e.$||e.jQuery)}(this,function(e){function t(t,i){this.options=e.extend({},n,i),this.$document=e(document),this.$container=e(t),this.$dragitems=e(this.options.items,this.$container),this.is_dragging=!1,this.player_min_left=0+this.options.offset_left,this.id=l(),this.ns=".gridster-draggable-"+this.id,this.init()}var n={items:"li",distance:1,limit:!0,offset_left:0,autoscroll:!0,ignore_dragging:["INPUT","TEXTAREA","SELECT","BUTTON"],handle:null,container_width:0,move_element:!0,helper:!1,remove_helper:!0},i=e(window),o={x:"left",y:"top"},r=!!("ontouchstart"in window),a=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},s=0,l=function(){return++s+""};t.defaults=n;var d=t.prototype;return d.init=function(){var t=this.$container.css("position");this.calculate_dimensions(),this.$container.css("position","static"===t?"relative":t),this.disabled=!1,this.events(),e(window).bind(this.nsEvent("resize"),throttle(e.proxy(this.calculate_dimensions,this),200))},d.nsEvent=function(e){return(e||"")+this.ns},d.events=function(){this.pointer_events={start:this.nsEvent("touchstart")+" "+this.nsEvent("mousedown"),move:this.nsEvent("touchmove")+" "+this.nsEvent("mousemove"),end:this.nsEvent("touchend")+" "+this.nsEvent("mouseup")},this.$container.on(this.nsEvent("selectstart"),e.proxy(this.on_select_start,this)),this.$container.on(this.pointer_events.start,this.options.items,e.proxy(this.drag_handler,this)),this.$document.on(this.pointer_events.end,e.proxy(function(e){this.is_dragging=!1,this.disabled||(this.$document.off(this.pointer_events.move),this.drag_start&&this.on_dragstop(e))},this))},d.get_actual_pos=function(e){var t=e.position();return t},d.get_mouse_pos=function(e){if(e.originalEvent&&e.originalEvent.touches){var t=e.originalEvent;e=t.touches.length?t.touches[0]:t.changedTouches[0]}return{left:e.clientX,top:e.clientY}},d.get_offset=function(t){t.preventDefault();var n=this.get_mouse_pos(t),i=Math.round(n.left-this.mouse_init_pos.left),o=Math.round(n.top-this.mouse_init_pos.top),r=Math.round(this.el_init_offset.left+i-this.baseX+e(window).scrollLeft()-this.win_offset_x),a=Math.round(this.el_init_offset.top+o-this.baseY+e(window).scrollTop()-this.win_offset_y);return this.options.limit&&(r>this.player_max_left?r=this.player_max_left:r<this.player_min_left&&(r=this.player_min_left)),{position:{left:r,top:a},pointer:{left:n.left,top:n.top,diff_left:i+(e(window).scrollLeft()-this.win_offset_x),diff_top:o+(e(window).scrollTop()-this.win_offset_y)}}},d.get_drag_data=function(e){var t=this.get_offset(e);return t.$player=this.$player,t.$helper=this.helper?this.$helper:this.$player,t},d.set_limits=function(e){return e||(e=this.$container.width()),this.player_max_left=e-this.player_width+-this.options.offset_left,this.options.container_width=e,this},d.scroll_in=function(t,n){var r,s=o[t],l=50,d=30,c="x"===t,u=c?this.window_width:this.window_height,h=c?e(document).width():e(document).height(),p=c?this.$player.width():this.$player.height(),g=i["scroll"+a(s)](),f=g,m=f+u,v=m-l,b=f+l,y=f+n.pointer[s],w=h-u+p;return y>=v&&(r=g+d,w>r&&(i["scroll"+a(s)](r),this["scroll_offset_"+t]+=d)),b>=y&&(r=g-d,r>0&&(i["scroll"+a(s)](r),this["scroll_offset_"+t]-=d)),this},d.manage_scroll=function(e){this.scroll_in("x",e),this.scroll_in("y",e)},d.calculate_dimensions=function(e){this.window_height=i.height(),this.window_width=i.width()},d.drag_handler=function(t){if(t.target.nodeName,!this.disabled&&(1===t.which||r)&&!this.ignore_drag(t)){var n=this,i=!0;return this.$player=e(t.currentTarget),this.el_init_pos=this.get_actual_pos(this.$player),this.mouse_init_pos=this.get_mouse_pos(t),this.offsetY=this.mouse_init_pos.top-this.el_init_pos.top,this.$document.on(this.pointer_events.move,function(e){var t=n.get_mouse_pos(e),o=Math.abs(t.left-n.mouse_init_pos.left),r=Math.abs(t.top-n.mouse_init_pos.top);return o>n.options.distance||r>n.options.distance?i?(i=!1,n.on_dragstart.call(n,e),!1):(n.is_dragging===!0&&n.on_dragmove.call(n,e),!1):!1}),r?void 0:!1}},d.on_dragstart=function(t){if(t.preventDefault(),this.is_dragging)return this;this.drag_start=this.is_dragging=!0;var n=this.$container.offset();return this.baseX=Math.round(n.left),this.baseY=Math.round(n.top),this.initial_container_width=this.options.container_width||this.$container.width(),"clone"===this.options.helper?(this.$helper=this.$player.clone().appendTo(this.$container).addClass("helper"),this.helper=!0):this.helper=!1,this.win_offset_y=e(window).scrollTop(),this.win_offset_x=e(window).scrollLeft(),this.scroll_offset_y=0,this.scroll_offset_x=0,this.el_init_offset=this.$player.offset(),this.player_width=this.$player.width(),this.player_height=this.$player.height(),this.set_limits(this.options.container_width),this.options.start&&this.options.start.call(this.$player,t,this.get_drag_data(t)),!1},d.on_dragmove=function(e){var t=this.get_drag_data(e);this.options.autoscroll&&this.manage_scroll(t),this.options.move_element&&(this.helper?this.$helper:this.$player).css({position:"absolute",left:t.position.left,top:t.position.top});var n=this.last_position||t.position;return t.prev_position=n,this.options.drag&&this.options.drag.call(this.$player,e,t),this.last_position=t.position,!1},d.on_dragstop=function(e){var t=this.get_drag_data(e);return this.drag_start=!1,this.options.stop&&this.options.stop.call(this.$player,e,t),this.helper&&this.options.remove_helper&&this.$helper.remove(),!1},d.on_select_start=function(e){return this.disabled||this.ignore_drag(e)?void 0:!1},d.enable=function(){this.disabled=!1},d.disable=function(){this.disabled=!0},d.destroy=function(){this.disable(),this.$container.off(this.ns),this.$document.off(this.ns),e(window).off(this.ns),e.removeData(this.$container,"drag")},d.ignore_drag=function(t){return this.options.handle?!e(t.target).is(this.options.handle):e.isFunction(this.options.ignore_dragging)?this.options.ignore_dragging(t):e(t.target).is(this.options.ignore_dragging.join(", "))},e.fn.drag=function(e){return new t(this,e)},t}),function(e,t){"function"==typeof define&&define.amd?define("gridster",["jquery","gridster-draggable","gridster-collision"],t):e.Gridster=t(e.$||e.jQuery,e.GridsterDraggable,e.GridsterCollision)}(this,function(e,t,n){function i(t,n){this.options=e.extend(!0,{},o,n),this.$el=e(t),this.$wrapper=this.$el.parent(),this.$widgets=this.$el.children(this.options.widget_selector).addClass("gs-w"),this.widgets=[],this.$changed=e([]),this.wrapper_width=this.$wrapper.width(),this.min_widget_width=2*this.options.widget_margins[0]+this.options.widget_base_dimensions[0],this.min_widget_height=2*this.options.widget_margins[1]+this.options.widget_base_dimensions[1],this.generated_stylesheets=[],this.$style_tags=e([]),this.options.auto_init&&this.init()}var o={namespace:"",widget_selector:"li",widget_margins:[10,10],widget_base_dimensions:[400,225],extra_rows:0,extra_cols:0,min_cols:1,max_cols:1/0,min_rows:15,max_size_x:!1,autogrow_cols:!0,autogenerate_stylesheet:!0,avoid_overlapped_widgets:!0,auto_init:!0,serialize_params:function(e,t){return{col:t.col,row:t.row,size_x:t.size_x,size_y:t.size_y}},collision:{},draggable:{items:".gs-w",distance:4,ignore_dragging:t.defaults.ignore_dragging.slice(0)},resize:{enabled:!0,axes:["both"],handle_append_to:"",handle_class:"gs-resize-handle",max_size:[1/0,1/0],min_size:[1,1]}};i.defaults=o,i.generated_stylesheets=[],i.sort_by_row_asc=function(t){return t=t.sort(function(t,n){return t.row||(t=e(t).coords().grid,n=e(n).coords().grid),t.row>n.row?1:-1})},i.sort_by_row_and_col_asc=function(e){return e=e.sort(function(e,t){return e.row>t.row||e.row===t.row&&e.col>t.col?1:-1})},i.sort_by_col_asc=function(e){return e=e.sort(function(e,t){return e.col>t.col?1:-1})},i.sort_by_row_desc=function(e){return e=e.sort(function(e,t){return e.row+e.size_y<t.row+t.size_y?1:-1})};var r=i.prototype;return r.init=function(){this.options.resize.enabled&&this.setup_resize(),this.generate_grid_and_stylesheet(),this.get_widgets_from_DOM(),this.set_dom_grid_height(),this.set_dom_grid_width(),this.$wrapper.addClass("ready"),this.draggable(),this.options.resize.enabled&&this.resizable(),e(window).bind("resize.gridster",throttle(e.proxy(this.recalculate_faux_grid,this),200))},r.disable=function(){return this.$wrapper.find(".player-revert").removeClass("player-revert"),this.drag_api.disable(),this},r.enable=function(){return this.drag_api.enable(),this},r.disable_resize=function(){return this.$el.addClass("gs-resize-disabled"),this.resize_api.disable(),this},r.enable_resize=function(){return this.$el.removeClass("gs-resize-disabled"),this.resize_api.enable(),this},r.add_widget=function(t,n,i,o,r,a,s){var l;n||(n=1),i||(i=1),!o&!r?l=this.next_position(n,i):(l={col:o,row:r,size_x:n,size_y:i},this.empty_cells(o,r,n,i));var d=e(t).attr({"data-col":l.col,"data-row":l.row,"data-sizex":n,"data-sizey":i}).addClass("gs-w").appendTo(this.$el).hide();return this.$widgets=this.$widgets.add(d),this.register_widget(d),this.add_faux_rows(l.size_y),a&&this.set_widget_max_size(d,a),s&&this.set_widget_min_size(d,s),this.set_dom_grid_width(),this.set_dom_grid_height(),this.drag_api.set_limits(this.cols*this.min_widget_width),d.fadeIn()},r.set_widget_min_size=function(e,t){if(e="number"==typeof e?this.$widgets.eq(e):e,!e.length)return this;var n=e.data("coords").grid;return n.min_size_x=t[0],n.min_size_y=t[1],this},r.set_widget_max_size=function(e,t){if(e="number"==typeof e?this.$widgets.eq(e):e,!e.length)return this;var n=e.data("coords").grid;return n.max_size_x=t[0],n.max_size_y=t[1],this},r.add_resize_handle=function(t){var n=this.options.resize.handle_append_to,i=e("."+this.options.resize.handle_class,t);return 0==i.length&&e(this.resize_handle_tpl).appendTo(n?e(n,t):t),this},r.resize_widget=function(e,t,n,i){var o=e.coords().grid,r=o.col,a=this.options.max_cols,s=o.size_y,l=o.col,d=l;t||(t=o.size_x),n||(n=o.size_y),a!==1/0&&(t=Math.min(t,a-r+1)),n>s&&this.add_faux_rows(Math.max(n-s,0));var c=r+t-1;c>this.cols&&this.add_faux_cols(c-this.cols);var u={col:d,row:o.row,size_x:t,size_y:n};return this.mutate_widget_in_gridmap(e,o,u),this.set_dom_grid_height(),this.set_dom_grid_width(),i&&i.call(this,u.size_x,u.size_y),e},r.mutate_widget_in_gridmap=function(t,n,i){var o=(n.size_x,n.size_y),r=this.get_cells_occupied(n),a=this.get_cells_occupied(i),s=[];e.each(r.cols,function(t,n){-1===e.inArray(n,a.cols)&&s.push(n)});var l=[];e.each(a.cols,function(t,n){-1===e.inArray(n,r.cols)&&l.push(n)});var d=[];e.each(r.rows,function(t,n){-1===e.inArray(n,a.rows)&&d.push(n)});var c=[];if(e.each(a.rows,function(t,n){-1===e.inArray(n,r.rows)&&c.push(n)}),this.remove_from_gridmap(n),l.length){var u=[i.col,i.row,i.size_x,Math.min(o,i.size_y),t];this.empty_cells.apply(this,u)}if(c.length){var h=[i.col,i.row,i.size_x,i.size_y,t];this.empty_cells.apply(this,h)}if(n.col=i.col,n.row=i.row,n.size_x=i.size_x,n.size_y=i.size_y,this.add_to_gridmap(i,t),t.removeClass("player-revert"),t.data("coords").update({width:i.size_x*this.options.widget_base_dimensions[0]+(i.size_x-1)*this.options.widget_margins[0]*2,height:i.size_y*this.options.widget_base_dimensions[1]+(i.size_y-1)*this.options.widget_margins[1]*2}),t.attr({"data-col":i.col,"data-row":i.row,"data-sizex":i.size_x,"data-sizey":i.size_y}),s.length){var p=[s[0],i.row,s.length,Math.min(o,i.size_y),t];this.remove_empty_cells.apply(this,p)}if(d.length){var g=[i.col,i.row,i.size_x,i.size_y,t];this.remove_empty_cells.apply(this,g)}return this.move_widget_up(t),this},r.empty_cells=function(t,n,i,o,r){var a=this.widgets_below({col:t,row:n-o,size_x:i,size_y:o});return a.not(r).each(e.proxy(function(t,i){var r=e(i).coords().grid;if(r.row<=n+o-1){var a=n+o-r.row;this.move_widget_down(e(i),a)}},this)),this.set_dom_grid_height(),this},r.remove_empty_cells=function(t,n,i,o,r){var a=this.widgets_below({col:t,row:n,size_x:i,size_y:o});return a.not(r).each(e.proxy(function(t,n){this.move_widget_up(e(n),o)},this)),this.set_dom_grid_height(),this},r.next_position=function(e,t){e||(e=1),t||(t=1);for(var n,o=this.gridmap,r=o.length,a=[],s=1;r>s;s++){n=o[s].length;for(var l=1;n>=l;l++){var d=this.can_move_to({size_x:e,size_y:t},s,l);d&&a.push({col:s,row:l,size_y:t,size_x:e})}}return a.length?i.sort_by_row_and_col_asc(a)[0]:!1},r.remove_widget=function(t,n,i){var o=t instanceof e?t:e(t),r=o.coords().grid;e.isFunction(n)&&(i=n,n=!1),this.cells_occupied_by_placeholder={},this.$widgets=this.$widgets.not(o);var a=this.widgets_below(o);return this.remove_from_gridmap(r),o.fadeOut(e.proxy(function(){o.remove(),n||a.each(e.proxy(function(t,n){this.move_widget_up(e(n),r.size_y)},this)),this.set_dom_grid_height(),i&&i.call(this,t)},this)),this},r.remove_all_widgets=function(t){return this.$widgets.each(e.proxy(function(e,n){this.remove_widget(n,!0,t)},this)),this},r.serialize=function(t){return t||(t=this.$widgets),t.map(e.proxy(function(t,n){var i=e(n);return this.options.serialize_params(i,i.coords().grid)},this)).get()},r.serialize_changed=function(){return this.serialize(this.$changed)},r.dom_to_coords=function(e){return{col:parseInt(e.attr("data-col"),10),row:parseInt(e.attr("data-row"),10),size_x:parseInt(e.attr("data-sizex"),10)||1,size_y:parseInt(e.attr("data-sizey"),10)||1,max_size_x:parseInt(e.attr("data-max-sizex"),10)||!1,max_size_y:parseInt(e.attr("data-max-sizey"),10)||!1,min_size_x:parseInt(e.attr("data-min-sizex"),10)||!1,min_size_y:parseInt(e.attr("data-min-sizey"),10)||!1,el:e}},r.coords_to_dom=function(e){var t=this.options.widget_base_dimensions,n=this.options.widget_margins;return{x:(e.col-1)*(t[0]+2*n[0])+n[0],y:(e.row-1)*(t[1]+2*n[1])+n[1],width:e.size_x*t[0]+2*(e.size_x-1)*n[0],height:e.size_y*t[1]+2*(e.size_y-1)*n[1]}},r.arrange_widgets_no_vertical_clipping=function(t){for(var n=t.length,i=0;n>i;i++){var o=e(t[i]);this.is_clipped_vertically(o.coords().grid)&&this.move_widget_to_closest_available_cell(o)}},r.is_clipped_vertically=function(e){var t=this.coords_to_dom(e);return t.y+t.height+this.options.widget_margins[1]+16>this.$wrapper.height()},r.move_widget_to_closest_available_cell=function(t){for(var n=t.coords().grid,i=n.col,o=e.extend({},n),r=!1,a=this.get_highest_occupied_row_for_col(o.col)+2;a>1&&!r;)a--,r=this.move_widget_to_row_in_col(t,a,o.col);if(r)return this;for(var s=1;i-s>0&&!r;){o.col=i-s;for(var a=this.get_highest_occupied_row_for_col(o.col)+2;a>1&&!r;)a--,r=this.move_widget_to_row_in_col(t,a,o.col);if(r)return this;for(o.col=i+s,a=this.get_highest_occupied_row_for_col(o.col)+2;a>1&&!r;)a--,r=this.move_widget_to_row_in_col(t,a,o.col);if(r)return this;s++}for(;!r&&o.col<100;){o.col=i+s;for(var a=this.get_highest_occupied_row_for_col(o.col)+2;a>1&&!r;)a--,r=this.move_widget_to_row_in_col(t,a,o.col);if(r)return this;s++}return!1},r.register_widget=function(t){var n=t instanceof jQuery,i=n?this.dom_to_coords(t):t,o=!1;n||(t=i.el);var r=this.can_go_widget_up(i);return r&&(i.row=r,t.attr("data-row",r),this.$el.trigger("gridster:positionchanged",[i]),o=!0),this.options.avoid_overlapped_widgets&&!this.can_move_to({size_x:i.size_x,size_y:i.size_y},i.col,i.row)&&(e.extend(i,this.next_position(i.size_x,i.size_y)),t.attr({"data-col":i.col,"data-row":i.row,"data-sizex":i.size_x,"data-sizey":i.size_y}),o=!0),t.data("coords",t.coords()),t.data("coords").grid=i,this.add_to_gridmap(i,t),this.options.resize.enabled&&this.add_resize_handle(t),o},r.update_widget_position=function(e,t){return this.for_each_cell_occupied(e,function(e,n){return this.gridmap[e]?void(this.gridmap[e][n]=t):this}),this},r.remove_from_gridmap=function(e){return this.update_widget_position(e,!1)},r.add_to_gridmap=function(t,n){if(this.update_widget_position(t,n||t.el),t.el){var i=this.widgets_below(t.el);i.each(e.proxy(function(t,n){this.move_widget_up(e(n))},this))}},r.draggable=function(){var t=this,n=e.extend(!0,{},this.options.draggable,{offset_left:this.options.widget_margins[0],offset_top:this.options.widget_margins[1],container_width:this.cols*this.min_widget_width,limit:!0,start:function(n,i){t.$widgets.filter(".player-revert").removeClass("player-revert"),t.$player=e(this),t.$helper=e(i.$helper),t.helper=!t.$helper.is(t.$player),t.on_start_drag.call(t,n,i),t.$el.trigger("gridster:dragstart")},stop:function(e,n){t.on_stop_drag.call(t,e,n),t.$el.trigger("gridster:dragstop")},drag:throttle(function(e,n){t.on_drag.call(t,e,n),t.$el.trigger("gridster:drag")},60)});return this.drag_api=this.$el.drag(n),this},r.resizable=function(){return this.resize_api=this.$el.drag({items:"."+this.options.resize.handle_class,offset_left:this.options.widget_margins[0],container_width:this.container_width,move_element:!1,resize:!0,limit:this.options.autogrow_cols?!1:!0,start:e.proxy(this.on_start_resize,this),stop:e.proxy(function(t,n){delay(e.proxy(function(){this.on_stop_resize(t,n)},this),120)},this),drag:throttle(e.proxy(this.on_resize,this),60)}),this},r.setup_resize=function(){this.resize_handle_class=this.options.resize.handle_class;var t=this.options.resize.axes,n='<span class="'+this.resize_handle_class+" "+this.resize_handle_class+'-{type}" />';return this.resize_handle_tpl=e.map(t,function(e){return n.replace("{type}",e)}).join(""),e.isArray(this.options.draggable.ignore_dragging)&&this.options.draggable.ignore_dragging.push("."+this.resize_handle_class),this},r.on_start_drag=function(t,n){this.$helper.add(this.$player).add(this.$wrapper).addClass("dragging"),this.highest_col=this.get_highest_occupied_cell().col,this.$player.addClass("player"),this.player_grid_data=this.$player.coords().grid,this.placeholder_grid_data=e.extend({},this.player_grid_data),this.$vertically_clipped_widgets=[],this.set_dom_grid_height(this.$el.height()+this.player_grid_data.size_y*this.min_widget_height),this.set_dom_grid_width(this.cols);var i=this.player_grid_data.size_x,o=this.cols-this.highest_col;this.options.autogrow_cols&&i>=o&&this.add_faux_cols(Math.min(i-o,1));var r=this.faux_grid,a=this.$player.data("coords").coords;this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data),this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data),this.last_cols=[],this.last_rows=[],this.collision_api=this.$helper.collision(r,this.options.collision),this.$preview_holder=e("<"+this.$player.get(0).tagName+" />",{"class":"preview-holder","data-row":this.$player.attr("data-row"),"data-col":this.$player.attr("data-col"),css:{width:a.width,height:a.height}}).appendTo(this.$el),this.options.draggable.start&&this.options.draggable.start.call(this,t,n)},r.on_drag=function(e,t){if(null===this.$player)return!1;var n={left:t.position.left+this.baseX,top:t.position.top+this.baseY};if(this.options.autogrow_cols){var i=this.placeholder_grid_data.col+this.placeholder_grid_data.size_x-1;i>=this.cols-1&&this.options.max_cols>=this.cols+1&&(this.add_faux_cols(1),this.set_dom_grid_width(this.cols+1),this.drag_api.set_limits(this.container_width)),this.collision_api.set_colliders(this.faux_grid)}this.colliders_data=this.collision_api.get_closest_colliders(n),this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column),this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row),this.helper&&this.$player&&this.$player.css({
left:t.position.left,top:t.position.top}),this.options.draggable.drag&&this.options.draggable.drag.call(this,e,t)},r.on_stop_drag=function(e,t){this.$helper.add(this.$player).add(this.$wrapper).removeClass("dragging"),t.position.left=t.position.left+this.baseX,t.position.top=t.position.top+this.baseY,this.colliders_data=this.collision_api.get_closest_colliders(t.position),this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column),this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row),this.$player.addClass("player-revert").removeClass("player").attr({"data-col":this.placeholder_grid_data.col,"data-row":this.placeholder_grid_data.row}).css({left:"",top:""}),this.$changed=this.$changed.add(this.$player),this.cells_occupied_by_player=this.get_cells_occupied(this.placeholder_grid_data),this.set_cells_player_occupies(this.placeholder_grid_data.col,this.placeholder_grid_data.row),this.$player.coords().grid.row=this.placeholder_grid_data.row,this.$player.coords().grid.col=this.placeholder_grid_data.col,this.options.draggable.stop&&this.options.draggable.stop.call(this,e,t),this.$preview_holder.remove(),this.$vertically_clipped_widgets||(this.$vertically_clipped_widgets=[]),this.$vertically_clipped_widgets.push(this.$player),this.arrange_widgets_no_vertical_clipping(this.$widgets),this.$vertically_clipped_widgets=[],this.$player=null,this.$helper=null,this.placeholder_grid_data={},this.player_grid_data={},this.cells_occupied_by_placeholder={},this.cells_occupied_by_player={},this.set_dom_grid_height(),this.set_dom_grid_width(),this.options.autogrow_cols&&this.drag_api.set_limits(this.cols*this.min_widget_width)},r.on_start_resize=function(t,n){this.$resized_widget=n.$player.closest(".gs-w"),this.resize_coords=this.$resized_widget.coords(),this.resize_wgd=this.resize_coords.grid,this.resize_initial_width=this.resize_coords.coords.width,this.resize_initial_height=this.resize_coords.coords.height,this.resize_initial_sizex=this.resize_coords.grid.size_x,this.resize_initial_sizey=this.resize_coords.grid.size_y,this.resize_initial_col=this.resize_coords.grid.col,this.resize_last_sizex=this.resize_initial_sizex,this.resize_last_sizey=this.resize_initial_sizey,this.resize_max_size_x=Math.min(this.resize_wgd.max_size_x||this.options.resize.max_size[0],this.options.max_cols-this.resize_initial_col+1),this.resize_max_size_y=this.resize_wgd.max_size_y||this.options.resize.max_size[1],this.resize_min_size_x=this.resize_wgd.min_size_x||this.options.resize.min_size[0]||1,this.resize_min_size_y=this.resize_wgd.min_size_y||this.options.resize.min_size[1]||1,this.resize_initial_last_col=this.get_highest_occupied_cell().col,this.set_dom_grid_width(this.cols),this.resize_dir={right:n.$player.is("."+this.resize_handle_class+"-x"),bottom:n.$player.is("."+this.resize_handle_class+"-y")},this.$resized_widget.css({"min-width":this.options.widget_base_dimensions[0],"min-height":this.options.widget_base_dimensions[1]});var i=this.$resized_widget.get(0).tagName;this.$resize_preview_holder=e("<"+i+" />",{"class":"preview-holder resize-preview-holder","data-row":this.$resized_widget.attr("data-row"),"data-col":this.$resized_widget.attr("data-col"),css:{width:this.resize_initial_width,height:this.resize_initial_height}}).appendTo(this.$el),this.$resized_widget.addClass("resizing"),this.$vertically_clipped_widgets=[],this.options.resize.start&&this.options.resize.start.call(this,t,n,this.$resized_widget),this.$el.trigger("gridster:resizestart")},r.on_stop_resize=function(t,n){this.$resized_widget.removeClass("resizing").css({width:"",height:""}),delay(e.proxy(function(){this.$resize_preview_holder.remove().css({"min-width":"","min-height":""}),this.options.resize.stop&&this.options.resize.stop.call(this,t,n,this.$resized_widget),this.$el.trigger("gridster:resizestop")},this),300),this.set_dom_grid_width(),this.options.autogrow_cols&&this.drag_api.set_limits(this.cols*this.min_widget_width),this.$vertically_clipped_widgets||(this.$vertically_clipped_widgets=[]),this.$vertically_clipped_widgets.push(this.$resized_widget),this.arrange_widgets_no_vertical_clipping(this.$vertically_clipped_widgets),this.$vertically_clipped_widgets=[]},r.on_resize=function(e,t){var n,i=t.pointer.diff_left,o=t.pointer.diff_top,r=this.options.widget_base_dimensions[0],a=this.options.widget_base_dimensions[1],s=this.options.widget_margins[0],l=this.options.widget_margins[1],d=this.resize_max_size_x,c=this.resize_min_size_x,u=this.resize_max_size_y,h=this.resize_min_size_y,p=this.options.autogrow_cols,g=1/0,f=1/0,m=Math.ceil(i/(r+2*s)-.2),v=Math.ceil(o/(a+2*l)-.2),b=Math.max(1,this.resize_initial_sizex+m),y=Math.max(1,this.resize_initial_sizey+v),w=this.container_width/this.min_widget_width-this.resize_initial_col+1,A=w*this.min_widget_width-2*s;if(b=Math.max(Math.min(b,d),c),b=Math.min(w,b),n=d*r+(b-1)*s*2,g=Math.min(n,A),min_width=c*r+(b-1)*s*2,y=Math.max(Math.min(y,u),h),f=u*a+(y-1)*l*2,min_height=h*a+(y-1)*l*2,this.resize_dir.right?y=this.resize_initial_sizey:this.resize_dir.bottom&&(b=this.resize_initial_sizex),p){var N=this.resize_initial_col+b-1;p&&this.resize_initial_last_col<=N&&(this.set_dom_grid_width(Math.max(N+1,this.cols)),this.cols<N&&this.add_faux_cols(N-this.cols))}var _={};!this.resize_dir.bottom&&(_.width=Math.max(Math.min(this.resize_initial_width+i,g),min_width)),!this.resize_dir.right&&(_.height=Math.max(Math.min(this.resize_initial_height+o,f),min_height)),this.$resized_widget.css(_),(b!==this.resize_last_sizex||y!==this.resize_last_sizey)&&(this.resize_widget(this.$resized_widget,b,y),this.set_dom_grid_width(this.cols),this.$resize_preview_holder.css({width:"",height:""}).attr({"data-row":this.$resized_widget.attr("data-row"),"data-sizex":b,"data-sizey":y})),this.options.resize.resize&&this.options.resize.resize.call(this,e,t,this.$resized_widget),this.$el.trigger("gridster:resize"),this.resize_last_sizex=b,this.resize_last_sizey=y},r.on_overlapped_column_change=function(t,n){if(!this.colliders_data.length)return this;var i,o=this.get_targeted_columns(this.colliders_data[0].el.data.col),r=this.last_cols.length,a=o.length;for(i=0;a>i;i++)-1===e.inArray(o[i],this.last_cols)&&(t||e.noop).call(this,o[i]);for(i=0;r>i;i++)-1===e.inArray(this.last_cols[i],o)&&(n||e.noop).call(this,this.last_cols[i]);return this.last_cols=o,this},r.on_overlapped_row_change=function(t,n){if(!this.colliders_data.length)return this;var i,o=this.get_targeted_rows(this.colliders_data[0].el.data.row),r=this.last_rows.length,a=o.length;for(i=0;a>i;i++)-1===e.inArray(o[i],this.last_rows)&&(t||e.noop).call(this,o[i]);for(i=0;r>i;i++)-1===e.inArray(this.last_rows[i],o)&&(n||e.noop).call(this,this.last_rows[i]);this.last_rows=o},r.set_player=function(e,t,n){var i=this;n||this.empty_cells_player_occupies();var o=n?{col:e}:i.colliders_data[0].el.data,r=o.col,a=t||o.row;this.player_grid_data={col:r,row:a,size_y:this.player_grid_data.size_y,size_x:this.player_grid_data.size_x},this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data);var s=this.get_widgets_overlapped(this.player_grid_data),l=this.widgets_constraints(s);if(this.manage_movements(l.can_go_up,r,a),this.manage_movements(l.can_not_go_up,r,a),!s.length){var d=this.can_go_player_up(this.player_grid_data);d!==!1&&(a=d),this.set_placeholder(r,a)}return{col:r,row:a}},r.widgets_constraints=function(t){var n,o=e([]),r=[],a=[];return t.each(e.proxy(function(t,n){var i=e(n),s=i.coords().grid;this.can_go_widget_up(s)?(o=o.add(i),r.push(s)):a.push(s)},this)),n=t.not(o),{can_go_up:i.sort_by_row_asc(r),can_not_go_up:i.sort_by_row_desc(a)}},r.manage_movements=function(t,n,i){return e.each(t,e.proxy(function(e,t){var o=t,r=o.el,a=this.can_go_widget_up(o);if(a)this.move_widget_to(r,a),this.set_placeholder(n,a+o.size_y);else{var s=this.can_go_player_up(this.player_grid_data);if(!s){var l=i+this.player_grid_data.size_y-o.row;this.move_widget_down(r,l),this.set_placeholder(n,i)}}},this)),this},r.is_player=function(e,t){if(t&&!this.gridmap[e])return!1;var n=t?this.gridmap[e][t]:e;return n&&(n.is(this.$player)||n.is(this.$helper))},r.is_player_in=function(t,n){var i=this.cells_occupied_by_player||{};return e.inArray(t,i.cols)>=0&&e.inArray(n,i.rows)>=0},r.is_placeholder_in=function(t,n){var i=this.cells_occupied_by_placeholder||{};return this.is_placeholder_in_col(t)&&e.inArray(n,i.rows)>=0},r.is_placeholder_in_col=function(t){var n=this.cells_occupied_by_placeholder||[];return e.inArray(t,n.cols)>=0},r.is_empty=function(e,t){return"undefined"!=typeof this.gridmap[e]?"undefined"!=typeof this.gridmap[e][t]&&this.gridmap[e][t]===!1?!0:!1:!0},r.is_cells_occupied=function(e){for(var t=e.col,n=e.row,i=t+e.size_x,o=n+e.size_y,r=t;i>r;r++)for(var a=n;o>a;a++)if(this.is_occupied(r,a))return!0;return!1},r.is_occupied=function(e,t){return this.gridmap[e]&&this.gridmap[e][t]?!0:!1},r.is_widget=function(e,t){var n=this.gridmap[e];return n?(n=n[t],n?n:!1):!1},r.is_widget_under_player=function(e,t){return this.is_widget(e,t)?this.is_player_in(e,t):!1},r.get_widgets_under_player=function(t){t||(t=this.cells_occupied_by_player||{cols:[],rows:[]});var n=e([]);return e.each(t.cols,e.proxy(function(i,o){e.each(t.rows,e.proxy(function(e,t){this.is_widget(o,t)&&(n=n.add(this.gridmap[o][t]))},this))},this)),n},r.set_placeholder=function(t,n){var i=e.extend({},this.placeholder_grid_data),o=this.widgets_below({col:i.col,row:i.row,size_y:i.size_y,size_x:i.size_x}),r=t+i.size_x-1;r>this.cols&&(t-=r-t);var a=this.placeholder_grid_data.row<n,s=this.placeholder_grid_data.col!==t;this.placeholder_grid_data.col=t,this.placeholder_grid_data.row=n,this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data),this.$preview_holder.attr({"data-row":n,"data-col":t}),(a||s)&&o.each(e.proxy(function(n,o){this.move_widget_up(e(o),this.placeholder_grid_data.col-t+i.size_y)},this));var l=this.get_widgets_under_player(this.cells_occupied_by_placeholder);l.length&&l.each(e.proxy(function(t,o){var r=e(o);this.move_widget_down(r,n+i.size_y-r.data("coords").grid.row)},this))},r.can_go_player_up=function(e){var t=e.row+e.size_y-1,n=!0,i=[],o=1e4,r=this.get_widgets_under_player();return this.for_each_column_occupied(e,function(e){var a=this.gridmap[e],s=t+1;for(i[e]=[];--s>0&&(this.is_empty(e,s)||this.is_player(e,s)||this.is_widget(e,s)&&a[s].is(r));)i[e].push(s),o=o>s?s:o;return 0===i[e].length?(n=!1,!0):void i[e].sort(function(e,t){return e-t})}),n?this.get_valid_rows(e,i,o):!1},r.can_go_widget_up=function(e){var t=e.row+e.size_y-1,n=!0,i=[],o=1e4;return this.for_each_column_occupied(e,function(r){var a=this.gridmap[r];i[r]=[];for(var s=t+1;--s>0&&(!this.is_widget(r,s)||this.is_player_in(r,s)||a[s].is(e.el));)this.is_player(r,s)||this.is_placeholder_in(r,s)||this.is_player_in(r,s)||i[r].push(s),o>s&&(o=s);return 0===i[r].length?(n=!1,!0):void i[r].sort(function(e,t){return e-t})}),n?this.get_valid_rows(e,i,o):!1},r.get_valid_rows=function(t,n,i){for(var o=t.row,r=t.row+t.size_y-1,a=t.size_y,s=i-1,l=[];++s<=r;){var d=!0;if(e.each(n,function(t,n){e.isArray(n)&&-1===e.inArray(s,n)&&(d=!1)}),d===!0&&(l.push(s),l.length===a))break}var c=!1;return 1===a?l[0]!==o&&(c=l[0]||!1):l[0]!==o&&(c=this.get_consecutive_numbers_index(l,a)),c},r.get_consecutive_numbers_index=function(e,t){for(var n=e.length,i=[],o=!0,r=-1,a=0;n>a;a++){if(o||e[a]===r+1){if(i.push(a),i.length===t)break;o=!1}else i=[],o=!0;r=e[a]}return i.length>=t?e[i[0]]:!1},r.get_widgets_overlapped=function(){var t=e([]),n=[],i=this.cells_occupied_by_player.rows.slice(0);return i.reverse(),e.each(this.cells_occupied_by_player.cols,e.proxy(function(o,r){e.each(i,e.proxy(function(i,o){if(!this.gridmap[r])return!0;var a=this.gridmap[r][o];this.is_occupied(r,o)&&!this.is_player(a)&&-1===e.inArray(a,n)&&(t=t.add(a),n.push(a))},this))},this)),t},r.on_start_overlapping_column=function(e){this.set_player(e,!1)},r.on_start_overlapping_row=function(e){this.set_player(!1,e)},r.on_stop_overlapping_column=function(e){this.set_player(e,!1);var t=this;this.for_each_widget_below(e,this.cells_occupied_by_player.rows[0],function(e,n){t.move_widget_up(this,t.player_grid_data.size_y)})},r.on_stop_overlapping_row=function(e){this.set_player(!1,e);for(var t=this,n=this.cells_occupied_by_player.cols,i=0,o=n.length;o>i;i++)this.for_each_widget_below(n[i],e,function(e,n){t.move_widget_up(this,t.player_grid_data.size_y)})},r.move_widget_to_row_in_col=function(t,n,i){var o=t.coords().grid,r=(n-o.row,e.extend({},o));r.col=i,r.row=n;var a=!(this.is_cells_occupied(r)||this.is_clipped_vertically(r));return a===!1?!1:(this.remove_from_gridmap(o),o.row=n,o.col=i,this.add_to_gridmap(o),t.attr("data-row",n),t.attr("data-col",i),this.$changed=this.$changed.add(t),this)},r.move_widget_to=function(t,n){var i=this,o=t.coords().grid,r=(n-o.row,this.widgets_below(t)),a=this.can_move_to(o,o.col,n,t);return a===!1?!1:(this.remove_from_gridmap(o),o.row=n,this.add_to_gridmap(o),t.attr("data-row",n),this.$changed=this.$changed.add(t),r.each(function(t,n){var o=e(n),r=o.coords().grid,a=i.can_go_widget_up(r);a&&a!==r.row&&i.move_widget_to(o,a)}),this)},r.move_widget_up=function(t,n){var i=t.coords().grid,o=i.row,r=[];return n||(n=1),this.can_go_up(t)?void this.for_each_column_occupied(i,function(i){if(-1===e.inArray(t,r)){var a=t.coords().grid,s=o-n;if(s=this.can_go_up_to_row(a,i,s),!s)return!0;var l=this.widgets_below(t);this.remove_from_gridmap(a),a.row=s,this.add_to_gridmap(a),t.attr("data-row",a.row),this.$changed=this.$changed.add(t),r.push(t),l.each(e.proxy(function(t,i){this.move_widget_up(e(i),n)},this))}}):!1},r.move_widget_down=function(t,n){var i,o,r,a;if(0>=n)return!1;if(i=t.coords().grid,o=i.row,r=[],a=n,!t)return!1;if(-1===e.inArray(t,r)){var s=t.coords().grid,l=o+n,d=this.widgets_below(t);this.remove_from_gridmap(s),d.each(e.proxy(function(t,n){var i=e(n),o=i.coords().grid,r=this.displacement_diff(o,s,a);r>0&&this.move_widget_down(i,r)},this)),s.row=l,this.update_widget_position(s,t),t.attr("data-row",s.row),this.$changed=this.$changed.add(t),r.push(t),this.is_clipped_vertically(s)&&this.$vertically_clipped_widgets&&-1===e.inArray(t,this.$vertically_clipped_widgets)&&this.$vertically_clipped_widgets.push(t)}},r.can_go_up_to_row=function(t,n,i){var o,r=this.gridmap,a=!0,s=[],l=t.row;if(this.for_each_column_occupied(t,function(e){for(r[e],s[e]=[],o=l;o--&&this.is_empty(e,o)&&!this.is_placeholder_in(e,o);)s[e].push(o);return s[e].length?void 0:(a=!1,!0)}),!a)return!1;for(o=i,o=1;l>o;o++){for(var d=!0,c=0,u=s.length;u>c;c++)s[c]&&-1===e.inArray(o,s[c])&&(d=!1);if(d===!0){a=o;break}}return a},r.displacement_diff=function(e,t,n){var i=e.row,o=[],r=t.row+t.size_y;this.for_each_column_occupied(e,function(e){for(var t=0,n=r;i>n;n++)this.is_empty(e,n)&&(t+=1);o.push(t)});var a=Math.max.apply(Math,o);return n-=a,n>0?n:0},r.widgets_below=function(t){var n=e.isPlainObject(t)?t:t.coords().grid,o=this,r=(this.gridmap,n.row+n.size_y-1),a=e([]);return this.for_each_column_occupied(n,function(t){o.for_each_widget_below(t,r,function(t,n){return o.is_player(this)||-1!==e.inArray(this,a)?void 0:(a=a.add(this),!0)})}),i.sort_by_row_asc(a)},r.set_cells_player_occupies=function(e,t){return this.remove_from_gridmap(this.placeholder_grid_data),this.placeholder_grid_data.col=e,this.placeholder_grid_data.row=t,this.add_to_gridmap(this.placeholder_grid_data,this.$player),this},r.empty_cells_player_occupies=function(){return this.remove_from_gridmap(this.placeholder_grid_data),this},r.can_go_up=function(e){var t=e.coords().grid,n=t.row,i=n-1,o=(this.gridmap,!0);return 1===n?!1:(this.for_each_column_occupied(t,function(e){return this.is_widget(e,i),this.is_occupied(e,i)||this.is_player(e,i)||this.is_placeholder_in(e,i)||this.is_player_in(e,i)?(o=!1,!0):void 0}),o)},r.can_move_to=function(e,t,n,i){var o=(this.gridmap,e.el),r={size_y:e.size_y,size_x:e.size_x,col:t,row:n},a=!0,s=t+e.size_x-1;return s>this.cols?!1:i&&i<n+e.size_y-1?!1:(this.for_each_cell_occupied(r,function(t,n){var i=this.is_widget(t,n);!i||e.el&&!i.is(o)||(a=!1)}),a)},r.get_targeted_columns=function(e){for(var t=(e||this.player_grid_data.col)+(this.player_grid_data.size_x-1),n=[],i=e;t>=i;i++)n.push(i);return n},r.get_targeted_rows=function(e){for(var t=(e||this.player_grid_data.row)+(this.player_grid_data.size_y-1),n=[],i=e;t>=i;i++)n.push(i);return n},r.get_cells_occupied=function(t){var n,i={cols:[],rows:[]};for(arguments[1]instanceof e&&(t=arguments[1].coords().grid),n=0;n<t.size_x;n++){var o=t.col+n;i.cols.push(o)}for(n=0;n<t.size_y;n++){var r=t.row+n;i.rows.push(r)}return i},r.for_each_cell_occupied=function(e,t){return this.for_each_column_occupied(e,function(n){this.for_each_row_occupied(e,function(e){t.call(this,n,e)})}),this},r.for_each_column_occupied=function(e,t){for(var n=0;n<e.size_x;n++){var i=e.col+n;t.call(this,i,e)}},r.for_each_row_occupied=function(e,t){for(var n=0;n<e.size_y;n++){var i=e.row+n;t.call(this,i,e)}},r._traversing_widgets=function(t,n,i,o,r){var a=this.gridmap;if(a[i]){var s,l,d=t+"/"+n;if(arguments[2]instanceof e){var c=arguments[2].coords().grid;i=c.col,o=c.row,r=arguments[3]}var u=[],h=o,p={"for_each/above":function(){for(;h--&&!(h>0&&this.is_widget(i,h)&&-1===e.inArray(a[i][h],u)&&(s=r.call(a[i][h],i,h),u.push(a[i][h]),s)););},"for_each/below":function(){for(h=o+1,l=a[i].length;l>h&&(!this.is_widget(i,h)||-1!==e.inArray(a[i][h],u)||(s=r.call(a[i][h],i,h),u.push(a[i][h]),!s));h++);}};p[d]&&p[d].call(this)}},r.for_each_widget_above=function(e,t,n){return this._traversing_widgets("for_each","above",e,t,n),this},r.for_each_widget_below=function(e,t,n){return this._traversing_widgets("for_each","below",e,t,n),this},r.get_highest_occupied_row_for_col=function(e){var t,n=this.gridmap,i=n[1].length,o=[0];for(t=i-1;t>=1;t--)if(this.is_widget(e,t)){o.push(t);break}return Math.max.apply(Math,o)},r.get_highest_occupied_cell=function(){for(var e,t=this.gridmap,n=t[1].length,i=[],o=[],r=t.length-1;r>=1;r--)for(e=n-1;e>=1;e--)if(this.is_widget(r,e)){i.push(e),o.push(r);break}return{col:Math.max.apply(Math,o),row:Math.max.apply(Math,i)}},r.get_widgets_from=function(t,n){var i=(this.gridmap,e());return t&&(i=i.add(this.$widgets.filter(function(){var n=e(this).attr("data-col");return n===t||n>t}))),n&&(i=i.add(this.$widgets.filter(function(){var t=e(this).attr("data-row");return t===n||t>n}))),i},r.set_dom_grid_height=function(e){return this.container_height=this.$wrapper.height(),this.$el.css("height",this.wrapper_height),this},r.set_dom_grid_width=function(e){"undefined"==typeof e&&(e=this.get_highest_occupied_cell().col);var t=this.options.autogrow_cols?this.options.max_cols:this.cols;return e=Math.min(t,Math.max(e,this.options.min_cols)),this.container_width=e*this.min_widget_width,this.$el.css("width",this.container_width),this},r.generate_stylesheet=function(t){var n,o="",r=this.options.max_size_x||this.cols;t||(t={}),t.cols||(t.cols=this.cols),t.rows||(t.rows=this.rows),t.namespace||(t.namespace=this.options.namespace),t.widget_base_dimensions||(t.widget_base_dimensions=this.options.widget_base_dimensions),t.widget_margins||(t.widget_margins=this.options.widget_margins),t.min_widget_width=2*t.widget_margins[0]+t.widget_base_dimensions[0],t.min_widget_height=2*t.widget_margins[1]+t.widget_base_dimensions[1];var a=e.param(t);if(e.inArray(a,i.generated_stylesheets)>=0)return!1;for(this.generated_stylesheets.push(a),i.generated_stylesheets.push(a),n=t.cols;n>=0;n--)o+=t.namespace+' [data-col="'+(n+1)+'"] { left:'+(n*t.widget_base_dimensions[0]+n*t.widget_margins[0]+(n+1)*t.widget_margins[0])+"px; }\n";for(n=t.rows;n>=0;n--)o+=t.namespace+' [data-row="'+(n+1)+'"] { top:'+(n*t.widget_base_dimensions[1]+n*t.widget_margins[1]+(n+1)*t.widget_margins[1])+"px; }\n";for(var s=1;s<=t.rows;s++)o+=t.namespace+' [data-sizey="'+s+'"] { height:'+(s*t.widget_base_dimensions[1]+2*(s-1)*t.widget_margins[1])+"px; }\n";for(var l=1;r>=l;l++)o+=t.namespace+' [data-sizex="'+l+'"] { width:'+(l*t.widget_base_dimensions[0]+2*(l-1)*t.widget_margins[0])+"px; }\n";return this.remove_style_tags(),this.add_style_tag(o)},r.add_style_tag=function(e){var t=document,n=t.createElement("style");return t.getElementsByTagName("head")[0].appendChild(n),n.setAttribute("type","text/css"),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),this.$style_tags=this.$style_tags.add(n),this},r.remove_style_tags=function(){var t=i.generated_stylesheets,n=this.generated_stylesheets;this.$style_tags.remove(),i.generated_stylesheets=e.map(t,function(t){return-1===e.inArray(t,n)?t:void 0})},r.generate_faux_grid=function(e,t){this.faux_grid=[],this.gridmap=[];var n,i;for(n=t;n>0;n--)for(this.gridmap[n]=[],i=e;i>0;i--)this.add_faux_cell(i,n);return this},r.add_faux_cell=function(t,n){var i=e({left:this.baseX+(n-1)*this.min_widget_width,top:this.baseY+(t-1)*this.min_widget_height,width:this.min_widget_width,height:this.min_widget_height,col:n,row:t,original_col:n,original_row:t}).coords();return e.isArray(this.gridmap[n])||(this.gridmap[n]=[]),this.gridmap[n][t]=!1,this.faux_grid.push(i),this},r.add_faux_rows=function(e){for(var t=this.rows,n=t+(e||1),i=n;i>t;i--)for(var o=this.cols;o>=1;o--)this.add_faux_cell(i,o);return this.rows=n,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this},r.add_faux_cols=function(e){var t=this.cols,n=t+(e||1);n=Math.min(n,this.options.max_cols);for(var i=t+1;n>=i;i++)for(var o=this.rows;o>=1;o--)this.add_faux_cell(o,i);return this.cols=n,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this},r.recalculate_faux_grid=function(){var t=this.$wrapper.width();return this.baseX=(e(window).width()-t)/2,this.baseY=this.$wrapper.offset().top,e.each(this.faux_grid,e.proxy(function(e,t){this.faux_grid[e]=t.update({left:this.baseX+(t.data.col-1)*this.min_widget_width,top:this.baseY+(t.data.row-1)*this.min_widget_height})},this)),this},r.get_widgets_from_DOM=function(){var t=this.$widgets.map(e.proxy(function(t,n){var i=e(n);return this.dom_to_coords(i)},this));t=i.sort_by_row_and_col_asc(t);var n=e(t).map(e.proxy(function(e,t){return this.register_widget(t)||null},this));return n.length&&this.$el.trigger("gridster:positionschanged"),this},r.generate_grid_and_stylesheet=function(){var t=this.$wrapper.width(),n=this.options.max_cols,i=Math.floor(t/this.min_widget_width)+this.options.extra_cols,o=this.$widgets.map(function(){return e(this).attr("data-col")}).get();o.length||(o=[0]);var r=Math.max.apply(Math,o);this.cols=Math.max(r,i,this.options.min_cols),n!==1/0&&n>=r&&n<this.cols&&(this.cols=n);var a=this.options.extra_rows;return this.$widgets.each(function(t,n){a+=+e(n).attr("data-sizey")}),this.rows=Math.max(a,this.options.min_rows),this.baseX=(e(window).width()-t)/2,this.baseY=this.$wrapper.offset().top,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this.generate_faux_grid(this.rows,this.cols)},r.destroy=function(t){return this.$el.removeData("gridster"),e(window).unbind(".gridster"),this.drag_api&&this.drag_api.destroy(),this.remove_style_tags(),t&&this.$el.remove(),this},e.fn.gridster=function(t){return this.each(function(){e(this).data("gridster")||e(this).data("gridster",new i(this,t))})},i}),define("main/components/applets/view_switchboard/optionsSelectionView",["backbone","jquery","underscore","handlebars","gridster","api/Messaging","api/UserDefinedScreens","main/api/WorkspaceFilters","api/ResourceService","api/SessionStorage","main/components/views/appletViews/TileSortManager"],function(e,t,n,i,o,r,a,s,l,d,c){"use strict";function u(e){var n=t(".gridster");t("#gridster2").length&&(n=t("#gridster2"));var i=r.request("get:current:screen").id,o=a.serializeGridsterScreen(n,i);e?a.saveGridsterConfig(o,i,e):a.saveGridsterConfig(o,i)}function h(e){return"gist"===e?"trend":e}function p(e){var t=e;return n.each(t.models,function(e){"gist"!==e.get("type")&&"trend"!==e.get("type")&&"summary"!==e.get("type")&&"expanded"!==e.get("type")&&t.remove(e)}),t}var g=e.Marionette.ItemView,f=e.Marionette.ItemView.extend({tagName:"li",className:"viewType-optionsBox col-xs-3",initialize:function(){var e=h(this.model.get("type"));this.template=i.compile('<div id="view-option" class="options-box {{type}}" tabindex="0" data-viewtype="{{type}}"></div><div class="formatButtonText">'+e+" View</div>");var t=this.model.get("paddingOffset");0===t||n.isUndefined(t)||this.$el.addClass("col-xs-offset-"+t)}}),m=e.Marionette.CollectionView.extend({initialize:function(t){switch(this.appletController=t.appletController,this.displayRegion=t.region,t.appletChrome&&(this.appletChrome=t.appletChrome),this.containerRegion=this.options.containerRegion||this.displayRegion,this.appletConfig=t.appletConfig,this.appletId=t.appletId,this.workspaceId=r.request("get:current:screen").config.id,this.onChangeView=t.onChangeView,void 0===t.switchOnClick?this.switchOnClick=!0:this.switchOnClick=t.switchOnClick,void 0!==t.appletTitle&&(this.appletTitle=t.appletTitle),this.collection=new e.Collection(r.getChannel(this.appletId).request("viewTypes")),this.collection=p(this.collection),this.collection.comparator=function(e){var t,n=e.get("type");switch(n.toLowerCase()){case"gist":t=1;break;case"trend":t=1;break;case"summary":t=2;break;case"expanded":t=3;break;default:t=10}return t},this.collection.sort(),this.collection.length){case 1:this.collection.models[0].set("paddingOffset",3);break;case 2:this.collection.models[0].set("paddingOffset",1);break;default:this.collection.models[0].set("paddingOffset",0)}},events:{"click .viewType-optionsBox":"changeView","click .remove-applet-option-box":"removeApplet"},removeApplet:function(){var e=this,n=this.returnGridster();this.$el.parent().html("");var i=function(){if(a.hasStackedGraphForApplet(e.workspaceId,e.appletConfig.instanceId)){var t={resourceTitle:"user-defined-stack-all",fetchType:"DELETE",criteria:{id:e.workspaceId,instanceId:e.appletConfig.instanceId}};l.fetchCollection(t),ADK.UserDefinedScreens.removeAllStackedGraphFromSession(e.workspaceId,e.appletConfig.instanceId)}};null!==n&&void 0!==n&&n.remove_widget(t(this.containerRegion.el),function(){u(function(){if("stackedGraph"===e.appletConfig.id)i();else{var t=e.appletConfig.instanceId+"_"+e.appletId;c.removeSort(t,function(){s.removeAllFiltersFromApplet(e.workspaceId,e.appletConfig.instanceId)})}})}),this.onChangeView&&this.onChangeView(),d.clearAppletStorageModel(this.appletConfig.instanceId),d.clearAppletStorageModel(this.appletConfig.id)},returnGridster:function(){return this.switchOnClick?t(".gridster").data("gridster"):t("#gridster2 ul").gridster().data("gridster")},changeView:function(e){var i=this.returnGridster(),o=this,r=t(e.currentTarget).find(".options-box").attr("data-viewtype"),a=this.collection.find(function(e){return e.get("type")==r});if(this.switchOnClick)this.appletController.changeView(r),t(this.displayRegion.el).attr("data-view-type",r);else{var s=h(a.get("type")),l='<div class="edit-applet fa fa-cog"></div><br><div class="formatButtonText"><p class="applet-title">'+this.appletTitle+"</p>"+s+"</div>";l+='<span class="gs-resize-handle gs-resize-handle-both"></span><span class="gs-resize-handle gs-resize-handle-both"></span>',g=g.extend({template:n.template(l)}),this.displayRegion.show(new g),this.displayRegion.$el.removeClass("bringToFront")}var d=function(){o.onChangeView&&o.onChangeView(),u()};t(this.containerRegion.el).attr("data-view-type",r);var c=[8,12];if("summary"===r)i.resize_widget(t(this.containerRegion.el),4,4,d),i.set_widget_max_size(t(this.containerRegion.el),c);else if("expanded"===r){var p=[12,12];i.resize_widget(t(this.containerRegion.el),8,6,d),i.set_widget_max_size(t(this.containerRegion.el),p)}else"gist"===r&&(i.resize_widget(t(this.containerRegion.el),4,3,d),i.set_widget_max_size(t(this.containerRegion.el),c))},addLi:function(e,t,n){e.$el.append(t).append('<li class="col-xs-'+n.width+" "+n.divClass+'-box"><div tabstop="0" tabindex="0" role="button" class="options-box '+n.divClass+'" data-viewtype="'+n.dataViewType+'"><i class="'+n.iconClass+'"></i><span class="sr-only">'+n.buttonText+'</span></div><div class="formatButtonText">'+n.buttonText+"</div></li>")},attachBuffer:function(e,t){this.addLi(e,t,{width:2,divClass:"remove-applet-option",dataViewType:"removeApplet",iconClass:"fa fa-trash-o",buttonText:"Remove"})},tagName:"ul",className:"options-panel col-xs-12",onRender:function(){},childView:f});return r.reply("switchboard : display",function(e){return new m(e)}),m}),define("main/ScreenDisplay",["backbone","marionette","underscore","jquery","main/components/adk_nav/navView","main/Session","main/ComponentLoader","main/components/patient/patientHeaderView","main/components/views/ccowObjectsView","main/ADKApp","main/Utils","api/Messaging","api/ResourceService","api/SessionStorage","api/UserDefinedScreens","main/components/applets/view_switchboard/optionsSelectionView","highcharts","main/components/applet_chrome/chromeView","main/components/views/appletControllerView","handlebars","main/api/WorkspaceFilters","hbs!main/components/applet_chrome/templates/containerTemplate","api/UserService"],function(e,t,n,i,o,r,a,s,l,d,c,u,h,p,g,f,m,v,b,y,w,A,N){"use strict";var _=u.request("ScreensManifest"),C={};return C.createScreen=function(e,t,o,r,s){if(e){if("undefined"!=typeof OWA)try{var d=new OWA.tracker;d.setSiteId("f6eca28945621473f2cbd850e859ab74");var u=d.makeEvent();u.setEventType("screenChange"),u.set("screenChange",t),u.getProperties(),d.trackEvent(u),d.trackPageView(),d.trackDomStream()}catch(f){console.log("OWA error:  "+f)}r.currentScreen&&r.currentScreen.config&&r.currentScreen.config.onStop&&r.currentScreen.config.onStop(),r.currentScreen=e;var m=p.get.sessionModel("lastWorkspace").get("workspace");n.isUndefined(m)?r.currentWorkspace=e.config.id:r.currentWorkspace=m,e.buildPromise.done(function(){if(s=n.defaults(s,{dontLoadApplets:!1})||{},"ActiveXObject"in window&&t!==_.logonScreen){var d=new l;r.ccowRegion.show(d)}var u,p,f;e.topRegion_layoutPromise.done(function(){p=r.topRegion.currentView,p instanceof e.topRegion_layoutView||(p=new e.topRegion_layoutView,r.topRegion.show(p)),e.centerRegion_layoutPromise.done(function(){f=r.centerRegion.currentView,f instanceof e.centerRegion_layoutView||(f=new e.centerRegion_layoutView,r.centerRegion.show(f));var l=h.patientRecordService.getCurrentPatient();l.has("pid")&&h.patientRecordService.refreshCurrentPatient(),a.load(r,p,f,e.config,l),i(window).resize(function(){this.resizeTO&&clearTimeout(this.resizeTO),this.resizeTO=setTimeout(c.resize.centerRegion(f,p,r),100)}),c.resize.centerRegion(f,p,r),e.contentRegion_layoutPromise.done(function(){if(e.patientRequired&&w.retrieveWorkspaceFilters(t),e.config.predefined===!1||"gridster"===e.config.contentRegionLayout){var a=g.updateScreenModuleFromStorage(e);a.done(function(){var t=g.getGridsterTemplate(e);u=new e.contentRegion_layoutView({template:y.compile(t),className:function(){var t="contentPadding",i=e.config.predefined;return n.isUndefined(i)||i||(t+=" user-defined-workspace"),t},freezeApplets:e.config.freezeApplets}),f.content_region.show(u),e.contentRegion_layoutView_obj=u})}else u=new e.contentRegion_layoutView,f.content_region.show(u),e.contentRegion_layoutView_obj=u;i("body").removeClass(),i("body").addClass(""+t),s.dontLoadApplets||(n.each(e.applets,function(t){"function"==typeof t.setDefaultView&&t.setDefaultView();var a,s=r[t.id];n.isUndefined(s)?C.addEmptyAppletToScreen(t,e):i.when(e.contentRegion_layoutPromise,e.centerRegion_layoutPromise,e.topRegion_layoutPromise,s.buildPromise).then(function(){return s.permissions&&(n.each(s.permissions,function(e){return N.hasPermission(e)?void 0:(a=!0,!1)}),a)?void C.addEmptyAppletToScreen(t,e,a):void C.addAppletToScreen(s,t,e,o)})}),e.moduleName&&ADK.utils.resize.filteredView(e.moduleName))})})}),e.config.onStart&&(e.config.onStart(),i("#screen-reader-screen-description").html("You have navigated to "+t+". Skip to main content.").focus())})}},C.addEmptyAppletToScreen=function(t,i,o){var r=new e.Model({title:t.id,
message:"This applet is not available at this time.",messageTextClass:"text-info"});o&&r.set("message","This applet is disabled for this user at this time.");var a=e.Marionette.ItemView.extend({model:r,template:y.compile('<p class="{{messageTextClass}}">{{message}}</p>'),className:"well well-sm"}),s=e.Marionette.LayoutView.extend({template:A,model:r,className:"applet-not-found",attributes:{"data-appletid":t.id,"data-instanceId":t.instanceId},regions:{message:".appletDiv_ChromeContainer"},onBeforeShow:function(){this.showChildView("message",new a)}}),l=i.contentRegion_layoutView_obj,d=t.region;"none"!==d&&(n.isUndefined(l[d])&&l.addRegion(d,"#"+d),l[d].show(new s({appletConfig:r})))},C.addAppletToScreen=function(e,t,i,o){if(e&&e.hasPermission){var r=t.region;(n.isUndefined(t.instanceId)||n.isNull(t.instanceId))&&(t.instanceId=t.id);var a,s=e.defaultViewType||"",l={appletConfig:t,routeParam:o,viewTypes:e.appletConfig.viewTypes,defaultViewType:e.appletConfig.defaultViewType,screenModule:i};void 0!==t.viewType&&"undefined"!==t.viewType&&(s=t.viewType),a=e.viewTypes?c.appletUtils.isChromeEnabled(e.appletConfig,s)?v.extend({appletScreenConfig:t,appletViewConfig:c.appletUtils.getViewTypeConfig(e.appletConfig,s),AppletView:c.appletUtils.getViewTypeConfig(e.appletConfig,s).view,AppletController:b.extend({viewType:s}),attributes:{"data-appletid":t.id,"data-instanceId":t.instanceId}}):b.extend({viewType:s}).extend({attributes:{"data-appletid":t.id,"data-instanceId":t.instanceId}}):e.getRootView(s).extend({attributes:{"data-appletid":t.id,"data-instanceId":t.instanceId}});var d=i.contentRegion_layoutView_obj;"none"!==r&&(n.isUndefined(d[r])&&d.addRegion(r,"#"+r),l.region=d[r],d[r].show(new a(l))),e.displayApplet&&e.displayApplet()}},C}),define("main/ScreenBuilder",["backbone","marionette","underscore","main/AppletBuilder","main/Session","api/SessionStorage","api/UserDefinedScreens","api/Messaging","api/Navigation"],function(e,t,n,i,o,r,a,s,l){"use strict";function d(e,t,i){t.id=i.id,t.title=i.title,t.applets=i.applets,i.screenId&&(t.screenId=i.screenId),i.patientRequired?t.patientRequired=i.patientRequired:t.patientRequired=!1,t.config=i,h.testEnvironmentFlag&&h.testEnvironmentFlag===!0&&r.addModel("patient",o.patient),t.topRegion_layoutPromise=$.Deferred();var a=!n.isUndefined(i.nonPatientCentricView)&&i.nonPatientCentricView===!0;i.patientRequired===!0?i.topRegionLayout="default_patientRequired":a?i.topRegionLayout="default_nonPatientCentricViewTopRegion":i.topRegionLayout="default_noPatientRequired",require(["main/layouts/topRegionLayouts/"+i.topRegionLayout],function(e){t.topRegion_layoutView=e,t.topRegion_layoutPromise.resolve()}),t.centerRegion_layoutPromise=$.Deferred(),i.centerRegionLayout="default_fullWidth",require(["main/layouts/centerRegionLayouts/"+i.centerRegionLayout],function(e){t.centerRegion_layoutView=e,t.centerRegion_layoutPromise.resolve()}),t.contentRegion_layoutPromise=$.Deferred(),require(["main/layouts/"+i.contentRegionLayout],function(e){t.contentRegion_layoutView=e,t.contentRegion_layoutPromise.resolve()})}function c(e,n){var i={};i[e]="displayScreen";var o={appRoutes:i,controller:n};new t.AppRouter(o)}function u(e,t){return{displayScreen:function(n){e.execute("screen:display",t,n)}}}var h=s.request("ScreensManifest"),p=s.request("AppletsManifest"),g=s.request("NewUserScreen"),f={};return f.addNewScreen=function(e,t,n,i){function o(e){f.build(t,e)}e.fileName="NewUserScreen";var r=t.module(e.routeName);r.buildPromise=$.Deferred();var s=u(t,e.routeName);c(e.routeName,s),require(["app/screens/"+e.fileName],function(t){t.id=e.id,o(t)}),a.addNewScreen(e,n,i)},f.editScreen=function(t,i){var o,r=a.getScreensConfigFromSession();if(n.find(r.screens,function(e,t){return e.id===i?(o=t,!0):void 0}),t.id!==i){var s=a.getGridsterConfigFromSession(i);s.id=t.id,a.saveGridsterConfig(s,t.id,function(){a.updateScreenId(i,t.id)}),ADK.ADKApp[t.id]=ADK.ADKApp[i],ADK.ADKApp[t.id].id=t.id,ADK.ADKApp[t.id].config.id=t.id,ADK.ADKApp[t.id].moduleName=t.id,ADK.ADKApp[i]=void 0}e.history.fragment===i&&(window.history.pushState({},"eHMP","#"+t.id),e.history.fragment=t.id),r.screens[o]=t,a.saveScreensConfig(r)},f.deleteUserScreen=function(t){var i=a.getScreensConfigFromSession(),o=n.find(i.screens,function(e){return e.id===t});i.screens=n.without(i.screens,o),a.saveScreensConfig(i,function(){a.saveGridsterConfig({},o.id)}),a.removeOneScreenFromSession(t),o.defaultScreen===!0&&(f.resetUserSelectedDefaultScreen(),console.log("deleting user default screen, setting defaultscreen from predefined default")),e.history.fragment===o.id&&l.navigate(ADK.ADKApp.userSelectedDefaultScreen,{trigger:!1}),ADK.ADKApp[o.id]=void 0},f.titleExists=function(e){var t=a.getScreensConfigFromSession(),i=!1;return n.find(t.screens,function(t,n){t.title.toLowerCase()===e.toLowerCase()&&(i=!0)}),i},f.resetUserSelectedDefaultScreen=function(){var e=a.getScreensConfigFromSession(),t=n.map(e.screens,function(e){return e.id===ADK.ADKApp.predefinedDefaultScreen?(e.defaultScreen=!0,ADK.ADKApp.userSelectedDefaultScreen=e.id):e.defaultScreen=!1,e}),i={};i.screens=t,a.saveScreensConfig(i)},f.resetDefaultScreen=function(){var e=a.getScreensConfigFromSession(),t=n.map(e.screens,function(e){return e.defaultScreen=!1,e}),i={};i.screens=t,a.saveScreensConfig(i)},f.setNewDefaultScreen=function(e){f.resetDefaultScreen(),ADK.ADKApp.userSelectedDefaultScreen=e},f.initAllRouters=function(e){var t=new $.Deferred,i=a.getScreensConfig();return i.done(function(i){var o=i.screens;n.each(o,function(e){n.isUndefined(e.routeName)&&(e.routeName=e.id);var t,i=n.filter(h.screens,function(n){return n.routeName===e.routeName&&(t=n),n.routeName===e.routeName});!n.isUndefined(t)&&t.hasOwnProperty("hasPermission")&&(e.hasPermission=t.hasPermission),0===i.length&&h.screens.push(e)}),n.each(h.screens,function(t){var n=e.module(t.routeName);n.buildPromise=$.Deferred();var i=u(e,t.routeName);c(t.routeName,i)}),t.resolve()}),t},f.buildAll=function(e){function t(t){f.build(e,t)}var r=p.applets;"loggedout"===o.user.get("status")&&(r=n.filter(p.applets,function(e){return n.isUndefined(e.requiredBeforeLogin)||e.requiredBeforeLogin!==!0?!1:!0})),n.each(r,function(t){var n=e.module(t.id);n.buildPromise=$.Deferred(),require(["app/applets/"+t.id+"/applet"],function(n){n.hasPermission=t.hasPermission,t.permissions&&(n.permissions=t.permissions),i.build(e,n)})}),n.each(h.screens,function(e){if(n.isUndefined(e.fileName)||"NewUserScreen"===e.fileName){var i=n.clone(g);i.id=e.id,e.screenId&&(i.screenId=e.screenId),t(i)}else require(["app/screens/"+e.fileName],t)})},f.build=function(e,t){var i=e.module(t.id);d(e,i,t),i.buildPromise.resolve(),i.config&&i.config.predefined===!1&&a.updateScreenModuleFromStorage(i);var o;n.filter(h.screens,function(e){return e.routeName===t.id&&(o=e),e.routeName===t.id});return n.isUndefined(o.hasPermission)||(t.hasPermission=o.hasPermission),i},f}),define("main/ADKApp",["backbone","marionette","underscore","jquery","main/Session","main/ScreenDisplay","main/ScreenBuilder","api/Messaging","api/SessionStorage","api/UserDefinedScreens","api/ResourceService","api/UserService","api/Navigation"],function(e,t,n,i,o,r,a,s,l,d,c,u,h){"use strict";var p=s.request("ScreensManifest"),g=new e.Marionette.Application;g.initAllRoutersPromise=new i.Deferred,g.session=o,g.predefinedDefaultScreen=p.predefinedDefaultScreen,g.userSelectedDefaultScreen=g.predefinedDefaultScreen,g.on("start",function(){g.initAllRoutersPromise.done(function(){e.history&&e.history.start()})}),s.on("app:logged-in",function(e){a.buildAll(g)}),g.commands.setHandler("screen:navigate",function(e,t,n){g.router.navigate(e),g.execute("screen:display",e,t,n)});var f=function(e){if(!n.isUndefined(e.config)&&!n.isUndefined(e.config.hasPermission)){if(n.isFunction(e.config.hasPermission)){var t=e.config.hasPermission();return n.isBoolean(t)?t:!1}return!1}return!0};g.commands.setHandler("screen:display",function(e,t,o){console.log("Command display:screen received, screenName:",e);var a=l.getModel("lastWorkspace").attributes.workspace;n.isUndefined(e)&&(e=a||g.userSelectedDefaultScreen||p.predefinedDefaultScreen);var s=u.checkUserSession();if(!s&&e!==p.ssoLogonScreen){if(n.isUndefined(p.logonScreen))return void console.warn("logonScreen is undefined - unable to navigate.  Update ScreensManifest with logonScreen.");e=p.logonScreen}n.each([g.modalRegion,g.workflowRegion,g.alertRegion],function(e){e.hasView()&&e.currentView.$el.modal("hide")}),i(".modal-backdrop").hasClass("in")&&i("#mainModal").trigger("close.bs.modal");var d=g[e];n.isUndefined(d)&&(console.warn("Screen module is undefined for screen "+e+". Redirecting to default screen"),e=g.userSelectedDefaultScreen||p.predefinedDefaultScreen,d=g[e]),e&&d&&d.buildPromise.done(function(){f(d)===!1&&(console.warn("User does not have permission to access screen "+e+". Redirecting to default screen"),e=g.userSelectedDefaultScreen||p.predefinedDefaultScreen,g.router.navigate(e),d=g[e]),i.isEmptyObject(c.patientRecordService.getCurrentPatient().attributes)&&d.config.patientRequired===!0&&(e=p.patientSearchScreen,g.router.navigate(e),d=g[e],console.log("No Patient Selected: rerouting to patient-search-screen")),r.createScreen(d,e,t,g,o)})}),s.on("patient:selected",function(e){l.clear("appletStorage"),l["delete"].sessionModel("globalDate",!0),l["delete"].sessionModel("patient"),l.addModel("patient",e)}),s.reply("get:current:screen",function(){return g.currentScreen}),s.reply("get:current:workspace",function(){return g.currentWorkspace}),s.on("user:sessionEnd",function(){var e=g.userSelectedDefaultScreen;h.navigate(e)}),g.addRegions({ccowRegion:"#ccow-controls",topRegion:"#top-region",centerRegion:"#center-region",bottomRegion:"#bottom-region",modalRegion:"#modal-region",workflowRegion:"#workflow-region",alertRegion:"#alert-region"}),s.reply("get:adkApp:region",function(e){return g[e]});var m=t.AppRouter.extend({appRoutes:{"*default":"defaultRoute"},onRoute:function(e,t,n){console.log("onRoute name:",e),console.log("onRoute path:",t),console.log("onRoute args:",n)}}),v=e.Marionette.Controller.extend({defaultRoute:function(t){if(t&&t.indexOf("?")>-1&&t.indexOf("=")>-1&&t.split("?")[0]===p.ssoLogonScreen){var n=t.split("?");l.clear("SSO"),l.addModel("SSO",new e.Model({CPRSHostIP:n[1].split("=")[1]})),g.execute("screen:navigate",n[0])}else g.execute("screen:display")}});return g.router=new m({controller:new v}),g.initAllRouters=function(){var e=a.initAllRouters(g);e.done(function(){a.buildAll(g),g.initAllRoutersPromise.resolve()})},g.ScreenPassthrough={setNewDefaultScreen:function(e){return a.setNewDefaultScreen(e)},deleteUserScreen:function(e){return a.deleteUserScreen(e)},editScreen:function(e,t){return a.editScreen(e,t)},titleExists:function(e){return a.titleExists(e)},addNewScreen:function(e,t,n,i){return a.addNewScreen(e,t,n,i)}},g});var ADK={};if(define("main/ADK",["backbone","marionette","jquery","underscore","api/CCOWService","api/ResourceService","api/UserService","main/Session","main/ui_components/components","main/Utils","api/Messaging","api/Navigation","api/AutoLogoff","api/SessionStorage","api/ErrorMessaging","api/UserDefinedScreens","api/Enrichment","main/backgrid/datagrid","main/backgrid/filter","main/backgrid/paginator","main/components/views/appletControllerView","main/components/applets/grid_applet/gridAppletView","main/ui_components/workflow/component","main/components/views/loadingView","main/components/views/errorView","main/components/views/serverSideErrorView","main/components/sign/signView","main/components/sign/signApi","main/components/views/appletViews/eventsGistView/views/eventsGistView","main/components/views/appletViews/pillsGistView/views/pillGistView","main/components/views/appletViews/interventionsGistView/views/interventionsGistView","main/components/views/appletViews/observationsGistView/views/observationsGistView","main/components/views/appletViews/panelsGistView/views/panelsGistView","main/components/applets/baseDisplayApplet/view","main/components/views/appletViews/gridView/view","main/components/views/appletViews/pillsGistView/view","main/components/views/appletViews/interventionsGistView/view","main/components/views/appletViews/eventsGistView/view","main/components/views/appletViews/observationsGistView/view","main/components/views/appletViews/panelsGistView/view","main/components/appletToolbar/toolbarView","main/components/applet_chrome/chromeView","main/components/popup/popup","main/components/views/appletViews/TileSortManager","main/ADKApp"],function(e,t,n,i,o,r,a,s,l,d,c,u,h,p,g,f,m,v,b,y,w,A,N,_,C,x,S,T,k,$,D,M,E,P,I,O,R,F,V,L,U,H,B,z,Y){"use strict";return ADK={AutoLogoff:h,ResourceService:r,PatientRecordService:r.patientRecordService,UserService:a,Messaging:c,Navigation:u,utils:d,SessionStorage:p,ErrorMessaging:g,TileSortManager:z,ADKApp:Y,UserDefinedScreens:f,CCOWService:o,SignApi:T,Enrichment:m},ADK.Applets={BaseGridApplet:A,BaseDisplayApplet:P},ADK.Views={AppletControllerView:w,DataGrid:v,CollectionFilter:b,Paginator:y,Loading:_,Error:C,ServerSideError:x,SignForm:S,EventGist:k,PillGist:$,InterventionsGist:D,VitalsGist:M,LabresultsGist:M,LabpanelsGist:E,ToolbarView:U},ADK.AppletViews={GridView:I,ChromeView:H,PillsGistView:O,InterventionsGistView:R,EventsGistView:F,ObservationsGistView:V,PanelsGistView:L},ADK.AppletViews.GridView.ADK=ADK,ADK.UI=l,ADK.getAppletRegionLayoutView=function(){return ADK.ADKApp.centerRegion.currentView.appletRegion},ADK.createSimpleApplet=function(e){var t={id:e.appletId,hasCSS:e.hasCSS,getRootView:function(){return ADK.AppletLayout.single(e)}};return t},ADK.AppletLayout={single:function(t){var n=e.Marionette.LayoutView.extend({initialize:function(){t.itemView?t.compositeView?this.appletCompositeView=ADK.CustomCompositeView(t):this.appletCompositeView=ADK.CustomItemView(t):this.appletCompositeView=ADK.TableCompositeView(t,t.rowTemplate,t.tableTemplate)},onRender:function(){this.appletMain.show(this.appletCompositeView)},template:i.template('<div id="applet-main"></div>'),regions:{appletMain:"#applet-main"}});return n}},ADK.TableCompositeView=function(t,n,i){var o=e.Marionette.ItemView.extend({tagName:"tr",template:n}),r=e.Marionette.CompositeView.extend({initialize:function(){var e={};e.resourceTitle=t.resource,e.viewModel=t.viewModel;var n=ADK.PatientRecordService.fetchCollection(e);this.collection=n},childView:o,childViewContainer:"tbody",template:i,className:"panel panel-info"});return new r},ADK.CustomCompositeView=function(e){var t=e.compositeView;return new t},ADK.CustomItemView=function(t){var n=t.itemView,i=e.Marionette.CompositeView.extend({initialize:function(){var e={};e.resourceTitle=t.resource,e.viewModel=t.viewModel;var n=ADK.PatientRecordService.fetchCollection(e);this.collection=n},childView:n,childViewContainer:"tbody",template:t.tableTemplate,className:"panel panel-info"});return new i},ADK.hideAllModals=function(){l.Modal.hide(),l.Workflow.hide()},ADK}),define("hbs!main/components/views/globalErrorTemplate",["hbs","handlebars"],function(e,t){var n=t.template({1:function(e,t,n,i){var o,r="function",a=t.helperMissing,s=this.escapeExpression;return'                <button id="reloadPage" class="btn btn-sm btn-danger pull-right" data-dismiss="modal">'+s((o=null!=(o=t.refreshButton||(null!=e?e.refreshButton:e))?o:a,typeof o===r?o.call(e,{name:"refreshButton",hash:{},data:i}):o))+"</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a="function",s=t.helperMissing,l='<div class="modal-content alert alert-danger">\n    <div id="modal-body">\n        <div class="">\n            <div class="media-left">\n                <i class="fa fa-exclamation-triangle fa-4x pull-left"></i>\n            </div>\n            <div class="media-body">\n';return o=t["if"].call(e,null!=e?e.refreshButton:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='                <h4 id="mainModalLabel">',r=null!=(r=t.errormsg||(null!=e?e.errormsg:e))?r:s,o=typeof r===a?r.call(e,{name:"errormsg",hash:{},data:i}):r,null!=o&&(l+=o),l+"</h4>\n            </div>\n        </div>\n    </div>\n</div>\n"},useData:!0});return t.registerPartial("main/components/views/globalErrorTemplate",n),n}),define("main/components/views/globalErrorView",["backbone","marionette","underscore","hbs!main/components/views/globalErrorTemplate","main/ADK"],function(e,t,n,i,o){var r=e.Model.extend({defaults:{errormsg:"Server timed out",prefix:"Error"}}),a=e.Marionette.ItemView.extend({template:i,model:new r,events:{"click #reloadPage":"reloadPage"},reloadPage:function(){this.clearSession===!0&&o.SessionStorage["delete"].all(),window.location.reload()},initialize:function(e){e.refreshButton&&this.model.set("refreshButton",e.refreshButton),e.clearSession===!0&&(this.clearSession=!0),this.model.set("errormsg",e.errorMessage)},tagName:"div"});return a}),define("main/Init",["backbone","marionette","jquery","underscore","api/Messaging","api/UIComponents","main/AppletsManifest","main/ScreensManifest","main/NewUserScreen","main/PreDefinedScreens","_assets/js/browserDetector/browserDetector","api/UserService","api/ResourceService"],function(e,t,n,i,o,r,a,s,l,d,c,u,h){"use strict";var p="app/screens/ScreensManifest.js",g="app/screens/PreDefinedScreens.js",f="app/screens/NewUserScreen.js",m="app/applets/appletsManifest.js",v=n.Deferred(),b=n.Deferred(),y=n.Deferred(),w=n.Deferred(),A=n.Deferred(),N=new e.Model,_=new e.Model,C=new e.Collection,x={};return c.enforceBrowserType(),n.ajaxPrefilter(function(e,t,n){e.xhrFields={withCredentials:!0}}),Array.prototype.equals=function(e){if(!e)return!1;if(this.length!=e.length)return!1;for(var t=0,n=this.length;n>t;t++)if(this[t]instanceof Array&&e[t]instanceof Array){if(!this[t].equals(e[t]))return!1}else if(this[t]!=e[t])return!1;return!0},o.reply("NewUserScreen",function(){return l}),o.reply("PreDefinedScreens",function(){return d}),o.reply("AppletsManifest",function(){return a}),o.reply("ScreensManifest",function(){return s}),o.reply("facilityMonikers",function(){return C}),x.beforeStart=function(){require([p],function(e){i.extend(s,e),b.resolve()}),require([g],function(e){i.extend(d,e),y.resolve()}),require([f],function(e){i.extend(l,e),w.resolve()}),require([m],function(e){i.extend(a,e),A.resolve()}),n.when(b,y,w,A).then(function(){v.resolve(),x.start()},function(){v.reject()})},x.start=function(){require(["main/ADK"],function(e){require(["main/ADKApp","main/ResourceDirectory","main/components/views/globalErrorView"],function(t,i,o){function r(){var e=n.Deferred();return _.fetch({url:"../app.json",global:!1}).done(function(){e.resolve(_)}).fail(function(){console.log("Failed to resolve app.json"),e.reject()}),e.promise()}function a(){var e=new o({errorMessage:"No Response From Resource Server<br/><small>Ensure that you have a stable network connection.</small>",refreshButton:"Refresh Page"});t.modalRegion.show(e),n("#mainModal").modal({show:!0,backdrop:"static",keyboard:!1})}function s(){var e=h.buildUrl("locations-facility-monikers");C.fetch({url:e,success:function(){d.resolve()},error:function(){console.log("Failed to resolve facility monikers")}})}var l=n.Deferred(),d=n.Deferred();N.fetch({url:"../manifest.json",global:!1}),e.Messaging.reply("appManifest",function(){return N}),e.Messaging.reply("appConfig",function(){return _}),n.when(r()).then(function(e){console.log("AppConfig: ",e);var t=i.instance();t.fetch({url:e.get("resourceDirectoryPathFetch"),success:function(){l.resolve()},error:function(){a()}})}).fail(a),n.when(l).done(function(){s()}),t.on("before:start",function(){n.when(l,v,d).done(function(){t.initAllRouters()});var i;n(window).on("resize load",function(){clearTimeout(i),i=setTimeout(e.utils.resize.dw,300)})}),t.start({})})})},x}),!window.console||!console.log)var console={log:function(){}};define("ie-console-fix",function(){}),function(e){define("bootstrap-accessibility",["jquery","bootstrap"],function(){return function(){!function(e){"use strict";var t=function(e){return(e||"ui-id")+"-"+Math.floor(1e3*Math.random()+1)},n=function(t,n,i){var o=(t.attr(n)||"").split(/\s+/),r=e.inArray(i,o);-1!==r&&o.splice(r,1),o=e.trim(o.join(" ")),o?t.attr(n,o):t.removeAttr(n)};e(".alert").attr("role","alert"),e(".close").removeAttr("aria-hidden").wrapInner('<span aria-hidden="true"></span>').append('<span class="sr-only">Close</span>');var i=e.fn.tooltip.Constructor.prototype.show,o=e.fn.tooltip.Constructor.prototype.hide;e.fn.tooltip.Constructor.prototype.show=function(){i.apply(this,arguments);var e=this.tip(),n=e.attr("id")||t("ui-tooltip");e.attr({role:"tooltip",id:n}),this.$element.attr("aria-describedby",n)},e.fn.tooltip.Constructor.prototype.hide=function(){return o.apply(this,arguments),n(this.$element,"aria-describedby",this.tip().attr("id")),this};var r=e.fn.popover.Constructor.prototype.setContent,a=e.fn.popover.Constructor.prototype.hide;e.fn.popover.Constructor.prototype.setContent=function(){r.apply(this,arguments);var e=this.tip(),n=e.attr("id")||t("ui-tooltip");e.attr({role:"alert",id:n}),this.$element.attr("aria-describedby",n),this.$element.focus()},e.fn.popover.Constructor.prototype.hide=function(){return a.apply(this,arguments),n(this.$element,"aria-describedby",this.tip().attr("id")),this};var s,l,d="[data-toggle=dropdown]",c=200,u=e(d).parent().find("ul").attr("role","menu"),h=u.find("li").attr("role","presentation");h.find("a").attr({role:"menuitem",tabIndex:"-1"}),e(d).attr({"aria-haspopup":"true","aria-expanded":"false"}),e(d).parent().on("shown.bs.dropdown",function(){s=e(this);var t=s.find(d);t.attr("aria-expanded","true"),setTimeout(function(){l=e(".dropdown-menu [role=menuitem]:visible",s)[0];try{l.focus()}catch(t){}},c)}),e(d).parent().on("hidden.bs.dropdown",function(){s=e(this);var t=s.find(d);t.attr("aria-expanded","false")}),e.fn.dropdown.Constructor.prototype.keydown=function(t){var n;/(32)/.test(t.keyCode)&&(n=e(this).parent(),e(this).trigger("click"),t.preventDefault()&&t.stopPropagation())},e(document).on("focusout.dropdown.data-api",".dropdown-menu",function(){var t=e(this),n=this;setTimeout(function(){e.contains(n,document.activeElement)||(t.parent().removeClass("open"),t.parent().find("[data-toggle=dropdown]").attr("aria-expanded","false"))},150)}).on("keydown.bs.dropdown.data-api",d+", [role=menu]",e.fn.dropdown.Constructor.prototype.keydown);var p=e(".nav-tabs, .nav-pills"),g=p.children("li"),f=p.find('[data-toggle="tab"], [data-toggle="pill"]');p.attr("role","tablist"),g.attr("role","presentation"),f.attr("role","tab"),f.each(function(){var n=e(e(this).attr("href")),i=e(this),o=i.attr("id")||t("ui-tab");i.attr("id",o),i.parent().hasClass("active")?(i.attr({tabIndex:"0","aria-selected":"true","aria-controls":i.attr("href").substr(1)}),n.attr({role:"tabpanel",tabIndex:"0","aria-hidden":"false","aria-labelledby":o})):(i.attr({tabIndex:"-1","aria-selected":"false","aria-controls":i.attr("href").substr(1)}),n.attr({role:"tabpanel",tabIndex:"-1","aria-hidden":"true","aria-labelledby":o}))}),e.fn.tab.Constructor.prototype.keydown=function(t){var n,i,o=e(this),r=o.closest("ul[role=tablist] "),a=t.which||t.keyCode;if(o=e(this),/(37|38|39|40)/.test(a)){n=r.find("[role=tab]:visible"),i=n.index(n.filter(":focus")),(38==a||37==a)&&i--,(39==a||40==a)&&i++,0>i&&(i=n.length-1),i==n.length&&(i=0);var s=n.eq(i);"tab"===s.attr("role")&&s.tab("show").focus(),t.preventDefault(),t.stopPropagation()}},e(document).on("keydown.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',e.fn.tab.Constructor.prototype.keydown);var m=e.fn.tab.Constructor.prototype.activate;e.fn.tab.Constructor.prototype.activate=function(e,t){var n=t.find("> .active");n.find("[data-toggle=tab], [data-toggle=pill]").attr({tabIndex:"-1","aria-selected":!1}),n.filter(".tab-pane").attr({"aria-hidden":!0,tabIndex:"-1"}),m.apply(this,arguments),e.addClass("active"),e.find("[data-toggle=tab], [data-toggle=pill]").attr({tabIndex:"0","aria-selected":!0}),e.filter(".tab-pane").attr({"aria-hidden":!1,tabIndex:"0"})};var v=e('[data-toggle="collapse"]');v.attr({role:"tab","aria-selected":"false","aria-expanded":"false"}),v.each(function(){var n=e(this),i=e(n.attr("data-target")?n.attr("data-target"):n.attr("href")),o=n.attr("data-parent"),r=o&&e(o),a=n.attr("id")||t("ui-collapse");e(r).find("div:not(.collapse,.panel-body), h4").attr("role","presentation"),n.attr("id",a),r&&(r.attr({role:"tablist","aria-multiselectable":"true"}),i.hasClass("in")?(n.attr({"aria-controls":n.attr("href").substr(1),"aria-selected":"true","aria-expanded":"true",tabindex:"0"}),i.attr({role:"tabpanel",tabindex:"0","aria-labelledby":a,"aria-hidden":"false"})):(n.attr({"aria-controls":n.attr("href").substr(1),tabindex:"-1"}),i.attr({role:"tabpanel",tabindex:"-1","aria-labelledby":a,"aria-hidden":"true"})))});var b=e.fn.collapse.Constructor.prototype.toggle;e.fn.collapse.Constructor.prototype.toggle=function(){var t,n=this.$parent&&this.$parent.find('[aria-expanded="true"]');if(n){var i,o=n.attr("data-target")||(t=n.attr("href"))&&t.replace(/.*(?=#[^\s]+$)/,""),r=e(o),a=this.$element;this.$parent,this.$parent&&(i=this.$parent.find('[data-toggle=collapse][href="#'+this.$element.attr("id")+'"]')),b.apply(this,arguments),e.support.transition&&this.$element.one(e.support.transition.end,function(){n.attr({"aria-selected":"false","aria-expanded":"false",tabIndex:"-1"}),r.attr({"aria-hidden":"true",tabIndex:"-1"}),i.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:"0"}),a.hasClass("in")?a.attr({"aria-hidden":"false",tabIndex:"0"}):(i.attr({"aria-selected":"false","aria-expanded":"false"}),a.attr({"aria-hidden":"true",tabIndex:"-1"}))})}else b.apply(this,arguments)},e.fn.collapse.Constructor.prototype.keydown=function(t){var n,i,o=e(this),r=o.closest("div[role=tablist] "),a=t.which||t.keyCode;o=e(this),/(32|37|38|39|40)/.test(a)&&(32==a&&o.click(),n=r.find("[role=tab]"),i=n.index(n.filter(":focus")),(38==a||37==a)&&i--,(39==a||40==a)&&i++,0>i&&(i=n.length-1),i==n.length&&(i=0),n.eq(i).focus(),t.preventDefault(),t.stopPropagation())},e(document).on("keydown.collapse.data-api",'[data-toggle="collapse"]',e.fn.collapse.Constructor.prototype.keydown),e(".carousel").each(function(){var t=e(this),n=t.find('[data-slide="prev"]'),i=t.find('[data-slide="next"]'),o=t.find(".item"),r=o.parent();t.attr({"data-interval":"false","data-wrap":"false"}),r.attr("role","listbox"),o.attr("role","option");var a=document.createElement("span");a.setAttribute("class","sr-only"),a.innerHTML="Previous";var s=document.createElement("span");s.setAttribute("class","sr-only"),s.innerHTML="Next",n.attr("role","button"),i.attr("role","button"),n.append(a),i.append(s),o.each(function(){var t=e(this);t.attr(t.hasClass("active")?{"aria-selected":"true",tabindex:"0"}:{"aria-selected":"false",tabindex:"-1"})})});var y=e.fn.carousel.Constructor.prototype.slide;e.fn.carousel.Constructor.prototype.slide=function(t,n){var i=this.$element.find(".item.active"),o=n||i[t]();y.apply(this,arguments),i.one(e.support.transition.end,function(){i.attr({"aria-selected":!1,tabIndex:"-1"}),o.attr({"aria-selected":!0,tabIndex:"0"})})},e.fn.carousel.Constructor.prototype.keydown=function(t){var n,i=e(this),o=i.closest("div[role=listbox]"),r=o.find("[role=option]"),a=o.parent(),s=t.which||t.keyCode;/(37|38|39|40)/.test(s)&&(n=r.index(r.filter(".active")),(37==s||38==s)&&(a.carousel("prev"),n--,0>n?n=r.length-1:i.prev().focus()),(39==s||40==s)&&(a.carousel("next"),n++,n==r.length?n=0:i.one(e.support.transition.end,function(){i.next().focus()})),t.preventDefault(),t.stopPropagation())},e(document).on("keydown.carousel.data-api","div[role=option]",e.fn.carousel.Constructor.prototype.keydown)}(jQuery)}.apply(e,arguments)})}(this),function(e){define("backbone-marionette-accessibility",["jquery","bootstrap","bootstrap-accessibility","backbone","marionette"],function(){return function(){!function(e){"use strict";var t=function(e){return(e||"ui-id")+"-"+Math.floor(1e3*Math.random()+1)},n=function(e,n){e.$(".alert").attr("role","alert"),e.$(".close [aria-hidden=true]").length||e.$("close").removeAttr("aria-hidden").wrapInner('<span aria-hidden="true"></span>').append('<span class="sr-only">Close</span>'),e.$(".modal-dialog").attr({role:"document"});var i,o,r="[data-toggle=dropdown]",a=200,s=e.$(r).parent().find("ul").attr("role","menu"),l=s.find("li").attr("role","presentation");l.find("a").attr({role:"menuitem",tabIndex:"-1"}),e.$(r).attr({"aria-haspopup":"true","aria-expanded":"false"}),e.$(r).parent().on("shown.bs.dropdown",function(e){i=n(this);var t=i.find("[data-toggle=dropdown]");t.attr("aria-expanded","true"),setTimeout(function(){o=n(".dropdown-menu [role=menuitem]:visible",i)[0];try{o.focus()}catch(e){}},a)}),e.$(r).parent().on("hidden.bs.dropdown",function(e){i=n(this);var t=i.find("[data-toggle=dropdown]");t.attr("aria-expanded","false")});var d=e.$(".nav-tabs, .nav-pills"),c=d.find('[data-toggle="tab"], [data-toggle="pill"]');l=d.children("li"),d.attr("role","tablist"),l.attr("role","presentation"),c.attr("role","tab"),c.each(function(e){var i=n(n(this).attr("href")),o=n(this),r=o.attr("id")||t("ui-tab");o.attr("id",r),o.parent().hasClass("active")?(o.attr({tabIndex:"0","aria-selected":"true","aria-controls":o.attr("href").substr(1)}),i.attr({role:"tabpanel",tabIndex:"0","aria-hidden":"false","aria-labelledby":r})):(o.attr({tabIndex:"-1","aria-selected":"false","aria-controls":o.attr("href").substr(1)}),i.attr({role:"tabpanel",tabIndex:"-1","aria-hidden":"true","aria-labelledby":r}))});var u=(n.fn.tab.Constructor.prototype.activate,e.$('[data-toggle="collapse"]'));u.attr({role:"tab","aria-selected":"false","aria-expanded":"false"}),u.each(function(e){var i=n(this),o=n(i.attr("data-target")?i.attr("data-target"):i.attr("href")),r=i.attr("data-parent"),a=r&&n(r),s=i.attr("id")||t("ui-collapse");n(a).find("div:not(.collapse,.panel-body), h4").attr("role","presentation"),i.attr("id",s),a&&(a.attr({role:"tablist","aria-multiselectable":"true"}),o.hasClass("in")?(i.attr({"aria-controls":i.attr("href").substr(1),"aria-selected":"true","aria-expanded":"true",tabindex:"0"}),o.attr({role:"tabpanel",tabindex:"0","aria-labelledby":s,"aria-hidden":"false"})):(i.attr({"aria-controls":i.attr("href").substr(1),tabindex:"-1"}),o.attr({role:"tabpanel",tabindex:"-1","aria-labelledby":s,"aria-hidden":"true"})))});n.fn.collapse.Constructor.prototype.toggle;e.$(".carousel").each(function(e){var t=n(this),i=t.find('[data-slide="prev"]'),o=t.find('[data-slide="next"]'),r=t.find(".item"),a=r.parent();t.attr({"data-interval":"false","data-wrap":"false"}),a.attr("role","listbox"),r.attr("role","option");var s=document.createElement("span");s.setAttribute("class","sr-only"),s.innerHTML="Previous";var l=document.createElement("span");l.setAttribute("class","sr-only"),l.innerHTML="Next",i.attr("role","button"),o.attr("role","button"),i.append(s),o.append(l),r.each(function(){var e=n(this);e.hasClass("active")?e.attr({"aria-selected":"true",tabindex:"0"}):e.attr({"aria-selected":"false",tabindex:"-1"})})})},i=Backbone.Marionette.View,o=i.extend({constructor:function(){var t=Array.prototype.slice.call(arguments);i.apply(this,t),this.listenTo(this,"before:attach",function(){n(this._parentLayoutView&&this._parentLayoutView()?this._parentLayoutView():this,e)})}});Backbone.Marionette.View=o}(jQuery)}.apply(e,arguments)})}(this),function(e){define("bootstrap-timepicker",["jquery"],function(){return function(){!function(e,t,n,i){"use strict";var o=function(t,n){this.widget="",this.$element=e(t),this.defaultTime=n.defaultTime,this.disableFocus=n.disableFocus,this.isOpen=n.isOpen,this.minuteStep=n.minuteStep,this.modalBackdrop=n.modalBackdrop,this.secondStep=n.secondStep,this.showInputs=n.showInputs,this.showMeridian=n.showMeridian,this.showSeconds=n.showSeconds,this.template=n.template,this.appendWidgetTo=n.appendWidgetTo,this.upArrowStyle=n.upArrowStyle,this.downArrowStyle=n.downArrowStyle,this.containerClass=n.containerClass,this._init()};o.prototype={constructor:o,_init:function(){
var t=this;this.$element.parent().hasClass("input-group")?(this.$element.parent(".input-group").find(".input-group-addon").length?this.$element.parent(".input-group").find(".input-group-addon").on({"click.timepicker":e.proxy(this.showWidget,this)}):this.$element.closest(this.containerClass).find(".input-group-addon").on({"click.timepicker":e.proxy(this.showWidget,this)}),this.$element.on({"focus.timepicker":e.proxy(this.highlightUnit,this),"click.timepicker":e.proxy(this.highlightUnit,this),"keydown.timepicker":e.proxy(this.elementKeydown,this),"blur.timepicker":e.proxy(this.blurElement,this)})):this.template?this.$element.on({"focus.timepicker":e.proxy(this.showWidget,this),"click.timepicker":e.proxy(this.showWidget,this),"blur.timepicker":e.proxy(this.blurElement,this)}):this.$element.on({"focus.timepicker":e.proxy(this.highlightUnit,this),"click.timepicker":e.proxy(this.highlightUnit,this),"keydown.timepicker":e.proxy(this.elementKeydown,this),"blur.timepicker":e.proxy(this.blurElement,this)}),this.template!==!1?this.$widget=e(this.getTemplate()).prependTo(this.$element.parents(this.appendWidgetTo)).on("click",e.proxy(this.widgetClick,this)):this.$widget=!1,this.showInputs&&this.$widget!==!1&&this.$widget.find("input").each(function(){e(this).on({"click.timepicker":function(){e(this).select()},"keydown.timepicker":e.proxy(t.widgetKeydown,t)})}),this.setDefaultTime(this.defaultTime)},blurElement:function(){this.highlightedUnit=i,this.updateFromElementVal()},decrementHour:function(){if(this.showMeridian)if(1===this.hour)this.hour=12;else{if(12===this.hour)return this.hour--,this.toggleMeridian();if(0===this.hour)return this.hour=11,this.toggleMeridian();this.hour--}else 0===this.hour?this.hour=23:this.hour--;this.update()},decrementMinute:function(e){var t;t=e?this.minute-e:this.minute-this.minuteStep,0>t?(this.decrementHour(),this.minute=t+60):this.minute=t,this.update()},decrementSecond:function(){var e=this.second-this.secondStep;0>e?(this.decrementMinute(!0),this.second=e+60):this.second=e,this.update()},elementKeydown:function(e){switch(e.keyCode){case 9:switch(this.updateFromElementVal(),this.highlightedUnit){case"hour":e.preventDefault(),this.highlightNextUnit();break;case"minute":(this.showMeridian||this.showSeconds)&&(e.preventDefault(),this.highlightNextUnit());break;case"second":this.showMeridian&&(e.preventDefault(),this.highlightNextUnit())}break;case 27:this.updateFromElementVal();break;case 37:e.preventDefault(),this.highlightPrevUnit(),this.updateFromElementVal();break;case 38:switch(e.preventDefault(),this.highlightedUnit){case"hour":this.incrementHour(),this.highlightHour();break;case"minute":this.incrementMinute(),this.highlightMinute();break;case"second":this.incrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}break;case 39:e.preventDefault(),this.updateFromElementVal(),this.highlightNextUnit();break;case 40:switch(e.preventDefault(),this.highlightedUnit){case"hour":this.decrementHour(),this.highlightHour();break;case"minute":this.decrementMinute(),this.highlightMinute();break;case"second":this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}}},formatTime:function(e,t,n,i){return e=10>e?"0"+e:e,t=10>t?"0"+t:t,n=10>n?"0"+n:n,e+":"+t+(this.showSeconds?":"+n:"")+(this.showMeridian?" "+i:"")},getCursorPosition:function(){var e=this.$element.get(0);if("selectionStart"in e)return e.selectionStart;if(n.selection){e.focus();var t=n.selection.createRange(),i=n.selection.createRange().text.length;return t.moveStart("character",-e.value.length),t.text.length-i}},getTemplate:function(){var e,t,n,i,o,r;switch(this.showInputs?(t='<input type="text" name="hour" class="bootstrap-timepicker-hour form-control" maxlength="2"/>',n='<input type="text" name="minute" class="bootstrap-timepicker-minute form-control" maxlength="2"/>',i='<input type="text" name="second" class="bootstrap-timepicker-second form-control" maxlength="2"/>',o='<input type="text" name="meridian" class="bootstrap-timepicker-meridian form-control" maxlength="2"/>'):(t='<span class="bootstrap-timepicker-hour"></span>',n='<span class="bootstrap-timepicker-minute"></span>',i='<span class="bootstrap-timepicker-second"></span>',o='<span class="bootstrap-timepicker-meridian"></span>'),r='<table><tr><td><a href="#" data-action="incrementHour"><i class="'+this.upArrowStyle+'"></i></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><i class="'+this.upArrowStyle+'"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><i class="'+this.upArrowStyle+'"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="'+this.upArrowStyle+'"></i></a></td>':"")+"</tr><tr><td>"+t+'</td> <td class="separator">:</td><td>'+n+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+i+"</td>":"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td>'+o+"</td>":"")+'</tr><tr><td><a href="#" data-action="decrementHour"><i class="'+this.downArrowStyle+'"></i></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><i class="'+this.downArrowStyle+'"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><i class="'+this.downArrowStyle+'"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><i class="'+this.downArrowStyle+'"></i></a></td>':"")+"</tr></table>",this.template){case"modal":e='<div class="bootstrap-timepicker-widget modal hide fade in" data-backdrop="'+(this.modalBackdrop?"true":"false")+'"><div class="modal-header"><a href="#" class="close" data-dismiss="modal">×</a><h3>Pick a Time</h3></div><div class="modal-content">'+r+'</div><div class="modal-footer"><a href="#" class="btn btn-primary" data-dismiss="modal">OK</a></div></div>';break;case"dropdown":e='<div class="bootstrap-timepicker-widget dropdown-menu">'+r+"</div>"}return e},getTime:function(){return this.formatTime(this.hour,this.minute,this.second,this.meridian)},hideWidget:function(){this.isOpen!==!1&&(this.showInputs&&this.updateFromWidgetInputs(),this.$element.trigger({type:"hide.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),"modal"===this.template&&this.$widget.modal?this.$widget.modal("hide"):this.$widget.removeClass("open"),e(n).off("mousedown.timepicker"),this.isOpen=!1)},highlightUnit:function(){this.position=this.getCursorPosition(),this.position>=0&&this.position<=2?this.highlightHour():this.position>=3&&this.position<=5?this.highlightMinute():this.position>=6&&this.position<=8?this.showSeconds?this.highlightSecond():this.highlightMeridian():this.position>=9&&this.position<=11&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.showSeconds?this.highlightSecond():this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"second":this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMeridian();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){var e=this.$element.get(0);this.highlightedUnit="hour",e.setSelectionRange&&setTimeout(function(){e.setSelectionRange(0,2)},0)},highlightMinute:function(){var e=this.$element.get(0);this.highlightedUnit="minute",e.setSelectionRange&&setTimeout(function(){e.setSelectionRange(3,5)},0)},highlightSecond:function(){var e=this.$element.get(0);this.highlightedUnit="second",e.setSelectionRange&&setTimeout(function(){e.setSelectionRange(6,8)},0)},highlightMeridian:function(){var e=this.$element.get(0);this.highlightedUnit="meridian",e.setSelectionRange&&(this.showSeconds?setTimeout(function(){e.setSelectionRange(9,11)},0):setTimeout(function(){e.setSelectionRange(6,8)},0))},incrementHour:function(){if(this.showMeridian){if(11===this.hour)return this.hour++,this.toggleMeridian();12===this.hour&&(this.hour=0)}return 23===this.hour?void(this.hour=0):(this.hour++,void this.update())},incrementMinute:function(e){var t;t=e?this.minute+e:this.minute+this.minuteStep-this.minute%this.minuteStep,t>59?(this.incrementHour(),this.minute=t-60):this.minute=t,this.update()},incrementSecond:function(){var e=this.second+this.secondStep-this.second%this.secondStep;e>59?(this.incrementMinute(!0),this.second=e-60):this.second=e,this.update()},remove:function(){e("document").off(".timepicker"),this.$widget&&this.$widget.remove(),delete this.$element.data().timepicker},setDefaultTime:function(e){if(this.$element.val())this.updateFromElementVal();else if("current"===e){var t=new Date,n=t.getHours(),i=Math.floor(t.getMinutes()/this.minuteStep)*this.minuteStep,o=Math.floor(t.getSeconds()/this.secondStep)*this.secondStep,r="AM";this.showMeridian&&(0===n?n=12:n>=12?(n>12&&(n-=12),r="PM"):r="AM"),this.hour=n,this.minute=i,this.second=o,this.meridian=r,this.update()}else e===!1?(this.hour=0,this.minute=0,this.second=0,this.meridian="AM"):this.setTime(e)},setTime:function(e){var t,n;this.showMeridian?(t=e.split(" "),n=t[0].split(":"),this.meridian=t[1]):n=e.split(":"),this.hour=parseInt(n[0],10),this.minute=parseInt(n[1],10),this.second=parseInt(n[2],10),isNaN(this.hour)&&(this.hour=0),isNaN(this.minute)&&(this.minute=0),this.showMeridian?(this.hour>12?this.hour=12:this.hour<1&&(this.hour=12),"am"===this.meridian||"a"===this.meridian?this.meridian="AM":("pm"===this.meridian||"p"===this.meridian)&&(this.meridian="PM"),"AM"!==this.meridian&&"PM"!==this.meridian&&(this.meridian="AM")):this.hour>=24?this.hour=23:this.hour<0&&(this.hour=0),this.minute<0?this.minute=0:this.minute>=60&&(this.minute=59),this.showSeconds&&(isNaN(this.second)?this.second=0:this.second<0?this.second=0:this.second>=60&&(this.second=59)),this.update()},showWidget:function(){if(!this.isOpen&&!this.$element.is(":disabled")){var t=this;e(n).on("mousedown.timepicker",function(n){0===e(n.target).closest(".bootstrap-timepicker-widget").length&&t.hideWidget()}),this.$element.trigger({type:"show.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.disableFocus&&this.$element.blur(),this.updateFromElementVal(),"modal"===this.template&&this.$widget.modal?this.$widget.modal("show").on("hidden",e.proxy(this.hideWidget,this)):this.isOpen===!1&&this.$widget.addClass("open"),this.isOpen=!0}},toggleMeridian:function(){this.meridian="AM"===this.meridian?"PM":"AM",this.update()},update:function(){this.$element.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.updateElement(),this.updateWidget()},updateElement:function(){this.$element.val(this.getTime()).change()},updateFromElementVal:function(){var e=this.$element.val();e&&this.setTime(e)},updateWidget:function(){if(this.$widget!==!1){var e=this.hour<10?"0"+this.hour:this.hour,t=this.minute<10?"0"+this.minute:this.minute,n=this.second<10?"0"+this.second:this.second;this.showInputs?(this.$widget.find("input.bootstrap-timepicker-hour").val(e),this.$widget.find("input.bootstrap-timepicker-minute").val(t),this.showSeconds&&this.$widget.find("input.bootstrap-timepicker-second").val(n),this.showMeridian&&this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)):(this.$widget.find("span.bootstrap-timepicker-hour").text(e),this.$widget.find("span.bootstrap-timepicker-minute").text(t),this.showSeconds&&this.$widget.find("span.bootstrap-timepicker-second").text(n),this.showMeridian&&this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian))}},updateFromWidgetInputs:function(){if(this.$widget!==!1){var t=e("input.bootstrap-timepicker-hour",this.$widget).val()+":"+e("input.bootstrap-timepicker-minute",this.$widget).val()+(this.showSeconds?":"+e("input.bootstrap-timepicker-second",this.$widget).val():"")+(this.showMeridian?" "+e("input.bootstrap-timepicker-meridian",this.$widget).val():"");this.setTime(t)}},widgetClick:function(t){t.stopPropagation(),t.preventDefault();var n=e(t.target).closest("a").data("action");n&&this[n]()},widgetKeydown:function(t){var n=e(t.target).closest("input"),i=n.attr("name");switch(t.keyCode){case 9:if(this.showMeridian){if("meridian"===i)return this.hideWidget()}else if(this.showSeconds){if("second"===i)return this.hideWidget()}else if("minute"===i)return this.hideWidget();this.updateFromWidgetInputs();break;case 27:this.hideWidget();break;case 38:switch(t.preventDefault(),i){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}break;case 40:switch(t.preventDefault(),i){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}}}},e.fn.timepicker=function(t){var n=Array.apply(null,arguments);return n.shift(),this.each(function(){var i=e(this),r=i.data("timepicker"),a="object"==typeof t&&t;r||i.data("timepicker",r=new o(this,e.extend({},e.fn.timepicker.defaults,a,e(this).data()))),"string"==typeof t&&r[t].apply(r,n)})},e.fn.timepicker.defaults={defaultTime:"current",disableFocus:!1,isOpen:!1,minuteStep:15,modalBackdrop:!1,secondStep:15,showSeconds:!1,showInputs:!0,showMeridian:!0,template:"dropdown",appendWidgetTo:".bootstrap-timepicker",upArrowStyle:"glyphicon glyphicon-chevron-up",downArrowStyle:"glyphicon glyphicon-chevron-down",containerClass:"bootstrap-timepicker"},e.fn.timepicker.Constructor=o}(jQuery,window,document)}.apply(e,arguments)})}(this),function(e){define("placeholders",["jquery"],function(){return function(){!function(e){"use strict";function t(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):void 0}function n(e,t){var n,i;for(n=0,i=e.length;i>n;n++)if(e[n]===t)return!0;return!1}function i(e,t){var n;e.createTextRange?(n=e.createTextRange(),n.move("character",t),n.select()):e.selectionStart&&(e.focus(),e.setSelectionRange(t,t))}function o(e,t){try{return e.type=t,!0}catch(n){return!1}}e.Placeholders={Utils:{addEventListener:t,inArray:n,moveCaret:i,changeType:o}}}(this)}.apply(e,arguments)})}(this),require.config({waitSeconds:"30",paths:{async:"_assets/libs/bower/async/async",backbone:"_assets/libs/bower/backbone/backbone","backbone.paginator":"_assets/libs/bower/backbone/backbone.paginator/backbone.paginator","backbone.radio":"_assets/libs/bower/backbone/backbone.radio/backbone.radio",sessionstorage:"_assets/libs/bower/backbone/backbone-sessionStorage/backbone.sessionStorage","backbone-sorted-collection":"_assets/libs/bower/backbone/backbone-sorted-collection/backbone-sorted-collection","backgrid-moment-cell":"_assets/libs/bower/backgrid/backgrid-moment-cell/backgrid-moment-cell.min","backgrid.filter":"_assets/libs/bower/backgrid/backgrid-filter/backgrid-filter.min","bootstrap-datepicker":"_assets/libs/bower/bootstrap/bootstrap-datepicker/bootstrap-datepicker","backbone.component":"_assets/libs/bower/backbone/backbone_component/backbone-component.min",crossfilter:"_assets/libs/bower/crossfilter/crossfilter.min",fastclick:"_assets/libs/bower/fastclick/fastclick",highcharts:"_assets/libs/bower/highstock-release/highstock.src","highcharts-more":"_assets/libs/bower/highstock-release/highcharts-more.src","pattern-fill":"_assets/libs/bower/pattern-fill/pattern-fill",grouped_categories:"_assets/libs/bower/grouped_categories/grouped-categories",jasmine:"_assets/libs/bower/jasmine/jasmine","jasmine-html":"_assets/libs/bower/jasmine/jasmine-html",jquery:"_assets/libs/bower/jquery/jquery.min",moment:"_assets/libs/bower/moment/moment.min",placeholders:"_assets/libs/bower/placeholders/utils",underscore:"_assets/libs/bower/lodash/lodash.underscore.min",libphonenumber:"_assets/libs/bower/libphonenumberjs/libphonenumber",puppetForm:"_assets/libs/custom/puppetForm/puppetForm",backgrid:"_assets/libs/bower/backgrid/backgrid.min",bootstrap:"_assets/libs/bower/bootstrap/bootstrap.min","bootstrap-timepicker":"_assets/libs/bower/bootstrap/bootstrap-timepicker/bootstrap-timepicker",gridster:"_assets/libs/bower/gridster/jquery.gridster.min",nouislider:"_assets/libs/bower/nouislider/jquery.nouislider.all.min","bootstrap-notify":"_assets/libs/bower/bootstrap/remarkable-bootstrap-notify/bootstrap-notify","jds-filter":"_assets/libs/bower/jds-filter/jds-filter.min",queryString:"_assets/libs/bower/query-string/query-string",hbs:"_assets/libs/custom/handlebars/hbs-0.4.0-custom",handlebars:"_assets/libs/custom/handlebars/handlebars.min",i18nprecompile:"_assets/libs/custom/handlebars/i18nprecompile",json2:"_assets/libs/custom/handlebars/json2","backbone.fetch-cache":"_assets/libs/custom/backbone-fetch-cache/backbone.fetch-cache.custom","backbone-marionette-accessibility":"_assets/libs/custom/backbone-marionette/accessibility/backbone-marionette-accessibility","backgrid.paginator":"_assets/libs/custom/backgrid/backgrid-paginator-master/backgrid-paginator-custom","bootstrap-accessibility":"_assets/libs/custom/bootstrap/accessibility/bootstrap-accessibility-custom.min",modernizr:"_assets/libs/custom/modernizr/modernizr-2.6.2.min","jquery.inputmask":"_assets/libs/custom/jquery.inputmask/dist/jquery.inputmask.bundle-custom","ie-console-fix":"_assets/libs/custom/ie-console/ie-console-fix",parser:"core/utilities/parser",typeahead:"_assets/libs/custom/typeahead.js/typeahead.bundle",select2:"_assets/libs/custom/select2/select2.full",text:"_assets/libs/custom/require/plugins/text",jasminejquery:"_assets/libs/bower/jasmine-jquery/jasmine-jquery","jquery.form":"_assets/libs/custom/jquery/plugins/jquery.form.min-20130616","jquery.formparams":"_assets/libs/custom/jquery/plugins/jquery.formparams","jquery-datatable":"_assets/libs/custom/jquery/jquery-datatable/jquery.dataTables.min","jquery-scroll":"_assets/libs/custom/jquery/jquery-scroll/jquery.scrollstart.scrollstop",marionette:"_assets/libs/custom/marionette/backbone.marionette-2.4.1-custom.min",bowser:"_assets/libs/bower/bowser/bowser.min",Init:"main/Init",ADKApp:"main/ADKApp",ADK:"main/ADK",ResourceDirectory:"main/ResourceDirectory",Utils:"main/Utils",test:"test"},shim:{"jquery-datatable":{deps:["jquery"]},typeahead:{deps:["jquery"]},"jquery-scroll":{deps:["jquery"]},highcharts:{deps:["jquery"],exports:"Highcharts"},"highcharts-more":{deps:["jquery","highcharts"],exports:"HighchartsMore"},"pattern-fill":{deps:["jquery","highcharts"]},grouped_categories:{deps:["jquery","highcharts"]},backbone:{deps:["underscore","jquery"],exports:"Backbone"},"backbone.paginator":{deps:["backgrid"]},"backbone.radio":{deps:["underscore","jquery","backbone"],exports:"Backbone.Radio"},marionette:{deps:["underscore","backbone","jquery"],exports:"Marionette"},jasmine:{exports:"jasmine"},"jasmine-html":{deps:["jasmine"],exports:"jasmine"},jasminejquery:{deps:["jasmine"],exports:"jasminejquery"},modernizr:{exports:"modernizr"},sessionstorage:{deps:["backbone","underscore"]},backgrid:{deps:["backbone","jquery","underscore"],exports:"Backgrid"},"backgrid.filter":{deps:["backgrid"]},"backgrid.paginator":{deps:["backgrid"]},"backgrid-moment-cell":{deps:["backgrid"]},"jquery.inputmask":{deps:["jquery"]},bootstrap:{deps:["jquery"]},"bootstrap-accessibility":{deps:["jquery","bootstrap"]},"backbone-marionette-accessibility":{deps:["jquery","bootstrap","bootstrap-accessibility","backbone","marionette"]},"bootstrap-datepicker":{deps:["jquery"]},"bootstrap-timepicker":{deps:["jquery"]},placeholders:{deps:["jquery"]},gridster:{deps:["jquery"]},puppetForm:{deps:["marionette","bootstrap"],exports:"PuppetForm"},crossfilter:{deps:[],exports:"crossfilter"},libphonenumber:{exports:"i18n.phonenumbers"}},hbs:{templateExtension:"html",disableHelpers:!1,disableI18n:!0,compileOptions:{il8nDirectory:"_assets/templates/i18n/",helperDirectory:"_assets/templates/helpers/"}}}),require(["main/Init","ie-console-fix","bootstrap","bootstrap-accessibility","backbone-marionette-accessibility","bootstrap-datepicker","bootstrap-timepicker","placeholders","gridster"],function(e){e.beforeStart()}),define("config",function(){});