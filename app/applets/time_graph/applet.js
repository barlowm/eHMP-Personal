define(["jquery","backbone","marionette","moment","app/applets/time_graph/timeGraphView","app/applets/time_graph/appHelper","app/applets/time_graph/debugFlag"],function(e,t,i,a,r,n,o){"use strict";var h=o.flag;h&&console.log("Time-graph initialization ----->>Start");var s=t.Marionette.LayoutView.extend({initialize:function(){ADK.Messaging.getChannel("time_line").on("nf_tl_data",this.prepareChart,this),ADK.Messaging.getChannel("time_line_internal").on("resetFilter",this.resetFilter,this),ADK.Messaging.getChannel("time_line_internal").on("setFilter",this.setFilter,this);var e=ADK.Messaging.getChannel("time_line");this.listenTo(e,"resetGraph",function(e){h&&console.log("Time-graph got event ----->> resetGraph")},this),this.graphView=new r,this.graphView.on("show_chart",this.graphView.showChart),h&&console.log("Time-graph initialization ----->>")},prepareChart:function(e){var t=e.data;if(h&&console.log(e),"nf_master"==o.filtering_mode&&(e.fmode?(h&&console.log("NF Master Filtering mode---->> filter ON"),null!==this.graphView.timeChart&&(n.chartOptions.chart.zoomType="")):(h&&console.log("NF Master Filtering mode---->> filter OFF"),null!==this.graphView.timeChart&&(n.chartOptions.chart.zoomType="x"))),"undefined"!=typeof t)if(this.graphView.statusFiltered)h&&console.log("Chart is in filtered status---->>");else{h&&console.log("prepareChart---->>");var i=n.dateAggregation(t);"ok"==i.msg?(this.graphView.setChartData(i),this.showChart(),this.graphView.trigger("show_chart")):(this.hideChart(),h&&console.log("Wrong data or no data for Chart---->>"))}},setTimeRangeTitle:function(e,t){var i=" ";return i+=e+" to "+t,h&&console.log("---->>"+i),i},resetFilter:function(){h&&console.log("Set default time range ---->>"+this.graphView.defaultRange),this.graphView.statusFiltered=!1,e(".tl_reset").hide(),this.graphView.timeChart&&this.graphView.timeChart.zoomOut()},setFilter:function(){e(".tl_reset").show(),this.graphView.statusFiltered=!0},hideChart:function(){o.no_data_hide_div?(h&&console.log("Hide chart container ----->>"),e(".time-chart-container-header").hide()):(h&&console.log("Hide series from chart  ----->>"),null!==this.graphView.timeChart&&this.graphView.timeChart.series[0].hide())},showChart:function(){o.no_data_hide_div?(h&&console.log("Show chart container ----->>"),e(".time-chart-container-header").show()):(h&&console.log("Show series on the chart  ----->>"),null!==this.graphView.timeChart&&this.graphView.timeChart.series[0].show())},onRender:function(){h&&console.log("Time_graph rendering ----->>"),this.appletMain.show(this.graphView)},template:_.template('<div id="time-line-main"></div>'),regions:{appletMain:"#time-line-main"}}),l={id:"time_graph",getRootView:function(){return s}};return l});