define(["underscore","backbone"],function(e,o){"use strict";var n={addProblemAssociation:function(e,o){o&&(console.log("adding problem "+o.get("problem")),e.add(o))},removeProblemAssociation:function(e,o){o&&(console.log("removing problem "+o.get("problem")),e.remove(o))},findProblemBySnomedCt:function(e,o){console.log("looking for match for snomed '"+o+"' in collection with "+e.models.length+" models");var n=e.where({snomed:o});return n.length>0?n[0]:null},queryGlobalProblems:function(e,o,n){ADK.ResourceService.fetchCollection({cache:!0,pageable:!1,resourceTitle:"problems-getProblems",criteria:{query:e},collectionConfig:{collectionParse:function(e){console.log("parsing collection");var o=e.models;if(1===e.size()){var n=e.models[0];"N"===n.get("0")&&"o"===n.get("1")&&(o=[])}return o}},onSuccess:o,onError:n})},getTrimmedProblem:function(e){return{problem:e.get("problem"),snomed:e.get("snomed")}}};return n});