define(["backbone","marionette","underscore","hbs!app/applets/vista_health_summaries/list/facilityTemplate","hbs!app/applets/vista_health_summaries/list/hsReportTemplate","app/applets/vista_health_summaries/appletUiHelpers"],function(e,t,r,i,o,l){var a=function(e,t){return e==t?0:t>e?-1:1},n={name:"facilityMoniker",label:"Facility",template:i,cell:"handlebars",groupable:!0,groupableOptions:{primary:!0,innerSort:"hsReport",innerSortValue:a,groupByFunction:function(e){return e.model.get("facilityMoniker")},groupByRowFormatter:function(e){return e}}},s={name:"hsReport",label:"Report",cell:"handlebars",template:o,sortable:!0,groupable:!0,groupableOptions:{primary:!0,innerSort:"facilityMoniker",groupByFunction:function(e){var t=e.model.get("hsReport");return t?0===t.toLowerCase().indexOf("remote")?"AAA "+t:t:"Error : report not available."},groupByRowFormatter:function(e){var t=e.replace("AAA ","");return t}}},p=[n,s],u={resourceTitle:"healthsummaries-getSitesInfoFromPatientData",pageable:!1,cache:!1,viewModel:{parse:function(e){return e.uid=e.facilityMoniker+"-"+e.reportID,e}}},c=ADK.AppletViews.GridView.extend({collapseGroups:function(){this.$el.find(".groupByCountBadge").toggleClass("hidden"),this.$el.find("tr.selectable").slideToggle(0),this.$el.find("td.groupByHeader.selectable").toggleClass("fa-chevron-up").toggleClass("fa-chevron-down")},initialize:function(e){this._super=ADK.AppletViews.GridView.prototype;var t={columns:p,groupable:!0,onClickRow:function(e,r,i){r.preventDefault(),l.getDetailView(e,r.currentTarget,t.collection,!0,l.showModal,l.showErrorModal)}},r=this;u.onSuccess=function(e){setTimeout(function(){r.$el.find(".groupByCountBadge").toggleClass("hidden"),r.$el.find("tr.selectable").slideToggle(0),r.$el.find("td.groupByHeader.selectable").toggleClass("fa-chevron-up").toggleClass("fa-chevron-down")},10)},this.gridCollection=ADK.PatientRecordService.fetchCollection(u),t.collection=this.gridCollection,this.appletOptions=t,this._super.initialize.apply(this,arguments)}});return c});