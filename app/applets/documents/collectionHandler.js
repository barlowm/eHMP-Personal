define(["backbone","underscore","app/applets/documents/appletHelper"],function(e,t,o){function n(e){var t=function(e){var t=moment(e.get("referenceDateTime"),"YYYYMMDDHHmmss");return-t};e.fullCollection.comparator=t,e.fullCollection.sort(),this.trigger("resetCollection",e)}var r={queryCollection:function(e,t){console.log("documents queryCollection");var r=this,i={cache:!1,pageable:!0,collectionConfig:{},resourceTitle:"patient-record-document-view",viewModel:{parse:function(e){return o.parseDocResponse(e)}},onSuccess:function(e){e.each(function(e){var t=e.get("complexDoc");if(t&&"none"===e.get("authorDisplayName").toLowerCase()){o.getResultsFromUid(e,function(t){e.set("authorDisplayName",t.models[0].get("signerDisplayName"))})}}),n.call(r,e)},criteria:{filter:"or("+e.buildJdsDateFilter("referenceDateTime")+","+e.buildJdsDateFilter("dateTime")+'),not(and(in(kind,["Consult","Imaging","Procedure"]),ne(statusName,"COMPLETE")))'}};ADK.PatientRecordService.fetchCollection(i,t)}};return t.extend(r,e.Events),r});