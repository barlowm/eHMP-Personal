define(["app/applets/addAllergy/utils/symptomsUtil","app/applets/addAllergy/models/symptomsCollection"],function(t,o){"use strict";var e,n,r=!0,i=0,s={fetchOptions:{},setView:function(t){e=t.symptomsView,n=t.errorView},getView:function(){return e},showError:function(t){n&&n.addError(t)},symptomsEventHandler:function(){if(r){var t=$("#symptoms-inner-list").height(),o=$("#symptomsList").scrollTop(),e=o+$("#symptomsList").height(),n=10;if(o>i&&e+n>=t){var l={dir:"1"};l.from=$("#symptoms-inner-list li:last-child a:last-child").text(),l.from=l.from.replace(/\t/g," "),s.doFetch(l)}i=o}},doFetch:function(i){s.fetchOptions={reset:!0,data:$.param({param:JSON.stringify(i)}),success:function(o){t.addIdCountToModel(o,e.collection.at(e.collection.length-1).get("count")+1),e.collection.add(o.toJSON()),t.enableLoadingIndictor(!1),r=!0},error:function(o,e){s.showError(e.responseText),t.enableLoadingIndictor(!1),r=!0}};var l=new o;l.fetch(s.fetchOptions),t.enableLoadingIndictor(!0),r=!1,n&&n.clearErrors()}};return s});