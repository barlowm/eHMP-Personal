define(["app/applets/addAllergy/utils/symptomsUtil","app/applets/addAllergy/models/symptomsCollection"],function(e,t){"use strict";var n,o,r=[],a=!1,i={fetchOptions:{},setView:function(e){n=e.symptomsView,o=e.errorView},getView:function(){return n},showError:function(e){o&&o.addError(e)},symptomsEventHandler:function(l){if(a&&"undefined"!=typeof l)r.push($(l.target).val());else{var s={dir:1};r.length>0?s.from=r.shift():s.from=$(l.target).val(),s.from=s.from.replace(/\t/g," "),a=!0,i.fetchOptions={reset:!0,data:$.param({param:JSON.stringify(s)}),success:function(t){e.addIdCountToModel(t,0),n.collection.reset(t.toJSON()),$("#allergy-loading-annoucement").hide(),$("#allergy-loading-annoucement").text("Lookup complete"),$("#allergy-loading-annoucement").show(),e.enableLoadingIndictor(!1),r.length>0?i.symptomsEventHandler(void 0):a=!1},error:function(t,n){i.showError(n.responseText),e.enableLoadingIndictor(!1),a=!1}};var d=new t;d.fetch(i.fetchOptions),e.enableLoadingIndictor(!0),o&&o.clearErrors()}}};return i});