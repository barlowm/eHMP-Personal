define(["jquery","moment","backbone","marionette","underscore","app/applets/medication_review_v2/medicationResourceHandler","app/applets/medication_review_v2/medicationCollectionHandler","app/applets/medication_review_v2/charts/chartBuilder","app/applets/medication_review_v2/charts/chartConfig","app/applets/lab_results_grid/appletHelpers"],function(e,t,a,n,i,r,p,o,s,d){"use strict";var l,c,u,g,h;ADK.Messaging.getChannel("meds_review").reply("chartInfo",function(t){var n=r.getMedicationGroup(t.collection,t.typeName.toLowerCase()),i=function(i,r){var p,d,l;return n.inpatientMeds&&(p=n.inpatientMeds.get("subMedsInternalGroupModels")),n.outpatientMeds&&(d=n.outpatientMeds.get("subMedsInternalGroupModels")),"inpatientGroup"===r?l=p:"outpatientGroup"===r&&(l=d),h={},c=new o(i,!0),u=new s(c),g=new a.Model({resultUnits:c.instructions,observed:void 0,typeName:t.typeName.toUpperCase(),graphType:t.graphType,applet_id:"medication_review_v2",collection:t.collection,uid:c.uid,subMedsInternalGroupModels:l,medicationGroupType:i,ChartBuilder:o,GraphConfig:s}),e.extend(!0,h,g.attributes),h.model=g,h.chart=u,h.requesterInstanceId=t.instanceId,ADK.Messaging.getChannel("stackedGraph").trigger("readyToChart",{response:h}),h};n.outpatientMeds&&(l=n.outpatientMeds,i(l,"outpatientGroup")),n.inpatientMeds||n.outpatientMeds||(h={},g=new a.Model({resultUnits:"--",observed:void 0,typeName:t.typeName.toUpperCase(),graphType:t.graphType,applet_id:"medication_review_v2",collection:t.collection,uid:null,noData:!0}),e.extend(!0,h,g.attributes),h.model=g,h.chart=d.chartOptions,h.requesterInstanceId=t.instanceId,ADK.Messaging.getChannel("stackedGraph").trigger("readyToChart",{response:h}))})});