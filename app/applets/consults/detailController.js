define(["app/applets/consults/modal/modalView"],function(e){var i={initialize:function(i){var n=ADK.Messaging.getChannel(i);n.reply("detailView",function(i){var n=$.Deferred();if(i.model)n.resolve({view:new e({model:i.model})});else{var t={criteria:{uid:i.uid},patient:new Backbone.Model({icn:i.patient.icn,pid:i.patient.pid}),resourceTitle:"patient-record-document-view",viewModel:{parse:AppletHelper.parseDocResponse},cache:!0},r=ADK.PatientRecordService.fetchCollection(t);r.on("sync",function(){var i=r.first();n.resolve({view:new e({model:i})})},this)}return n.promise()})}};return i});