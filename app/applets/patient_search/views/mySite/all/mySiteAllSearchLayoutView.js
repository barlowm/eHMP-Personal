define(["backbone","marionette","app/applets/patient_search/views/common/searchResultsCollectionView","hbs!app/applets/patient_search/templates/mySite/all/mySiteAllSearchResultsTemplate","app/applets/patient_search/views/common/blankView"],function(e,t,s,a,r){var i=e.Marionette.LayoutView.extend({searchApplet:void 0,template:a,regions:{patientSearchResults:"#patient-search-results"},initialize:function(e){this.searchApplet=e.searchApplet},clearSearchResultsRegion:function(){this.patientSearchResults.show(new r)},executeSearch:function(e){if(e&&""!==e)if(e.length<3)this.patientSearchResults.show(new r),this.searchApplet.inputView.$el.find(".instructions p span").removeClass("hidden");else{var t=new s({searchApplet:this.searchApplet});this.patientSearchResults.show(t);var a={last5:e},i={defaults:{ageYears:"Unk"}},n={resourceTitle:"patient-search-last5",viewModel:i,criteria:a,cache:!1};n.onError=function(e,s){406==s.status?t.setEmptyMessage("Too many results have returned. Please be more specific in your search criteria."):t.setEmptyMessage("An error has occurred."),t.render()},n.onSuccess=function(e){-1!==e.url.indexOf("full-name")&&0===c.length&&t.setEmptyMessage("No patient record found. Please make sure your search criteria is correct."),t.collection=c,t.render()};var c=ADK.ResourceService.fetchCollection(n);c.once("sync",function(){0===this.length&&(a={"name.full":e,"rows.max":100},n.resourceTitle="patient-search-full-name",n.criteria=a,ADK.ResourceService.fetchCollection(n,this))})}}});return i});