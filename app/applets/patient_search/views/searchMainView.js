define(["backbone","marionette","app/applets/patient_search/views/myCPRSList/myCPRSListLayoutView","app/applets/patient_search/views/mySite/all/mySiteAllSearchLayoutView","app/applets/patient_search/views/mySite/clinics_wards/clinicsWardsSearchLayoutView","app/applets/patient_search/views/global/globalSearchLayoutView","hbs!app/applets/patient_search/templates/searchMainTemplate"],function(e,a,i,t,s,h,l){var r="mySite",c="global",n="myCprsList",S="clinics",o="wards",p="none",y=e.Marionette.LayoutView.extend({template:l,regions:{mainSearchMyCPRSList:"#main-search-my-cprs-list",mainSearchMySiteAllResults:"#main-search-mySiteAll-results",mainSearchMySiteClinics:"#main-search-mySiteClinics",mainSearchMySiteWards:"#main-search-mySiteWards",mainSearchGlobalResults:"#main-search-global-results"},initialize:function(e){this.searchApplet=e.searchApplet,this.myCPRSListLayoutView=new i({searchApplet:this.searchApplet}),this.mySiteAllSearchLayoutView=new t({searchApplet:this.searchApplet}),this.mySiteClinicsSearchLayoutView=new s({searchApplet:this.searchApplet,locationType:S}),this.mySiteWardsSearchLayoutView=new s({searchApplet:this.searchApplet,locationType:o}),this.globalSearchLayoutView=new h({searchApplet:this.searchApplet})},onRender:function(){this.mySiteAllSearchLayoutView.searchApplet=this.searchApplet,this.globalSearchLayoutView.searchApplet=this.searchApplet,this.mainSearchMySiteAllResults.show(this.mySiteAllSearchLayoutView),this.changeView(r,n)},changeView:function(e,a){this.hideAllResultViews(),e==r?(a==n?(this.mainSearchMyCPRSList.$el.show(),this.mainSearchMyCPRSList.show(this.myCPRSListLayoutView)):a==S?(this.mainSearchMySiteClinics.$el.show(),this.mainSearchMySiteClinics.show(this.mySiteClinicsSearchLayoutView)):a==o?(this.mainSearchMySiteWards.$el.show(),this.mainSearchMySiteWards.show(this.mySiteWardsSearchLayoutView)):a==p&&(this.mainSearchMySiteAllResults.$el.show(),this.mainSearchMySiteAllResults.show(this.mySiteAllSearchLayoutView),this.searchApplet.setupPatientSearch()),$("#patientSearchInput").focusout()):e==c&&(this.mainSearchGlobalResults.$el.show(),this.mainSearchGlobalResults.show(this.globalSearchLayoutView))},hideAllResultViews:function(){this.mainSearchMyCPRSList.$el.hide(),this.mainSearchMySiteAllResults.$el.hide(),this.mainSearchMySiteClinics.$el.hide(),this.mainSearchMySiteWards.$el.hide(),this.mainSearchGlobalResults.$el.hide(),this.clearGlobalSearchErrorMessage()},clearErrorMessage:function(e){e==c&&this.globalSearchLayoutView.clearSearchResultsRegion()},clearGlobalSearchErrorMessage:function(){var e=this.searchApplet.patientSearchView.nationwideModel;e.get("isGlobalSearchErrorMessageDisplayed")&&(e.clear({silent:!0}),this.globalSearchLayoutView.clearSearchResultsRegion(),e.set("isGlobalSearchErrorMessageDisplayed",!1))},clearPreviousGlobalSearchResults:function(e){e==c&&this.globalSearchLayoutView.clearSearchResultsRegion()},displayErrorMessage:function(e,a){e==c&&this.globalSearchLayoutView.displayErrorMessage(a)},executeSearch:function(e,a){e==r?this.mySiteAllSearchLayoutView.executeSearch(a.searchString):e==c&&this.globalSearchLayoutView.executeSearch(a.globalSearchParameters)}});return y});