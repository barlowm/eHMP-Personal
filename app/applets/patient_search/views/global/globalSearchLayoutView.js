define(["backbone","marionette","app/applets/patient_search/views/common/searchResultsCollectionView","app/applets/patient_search/views/common/blankView","hbs!app/applets/patient_search/templates/global/globalSearchResultsTemplate"],function(e,s,t,r,a){var i="global",n=e.Marionette.LayoutView.extend({searchApplet:void 0,template:a,regions:{globalSearchResultsRegion:"#global-search-results"},initialize:function(e){this.searchApplet=e.searchApplet},clearSearchResultsRegion:function(){this.globalSearchResultsRegion.show(new r)},displayErrorMessage:function(e){var s=new t({searchApplet:this.searchApplet,source:i});s.setEmptyMessage(e),this.globalSearchResultsRegion.show(s)},executeSearch:function(e){var s=new t({searchApplet:this.searchApplet,source:i});this.globalSearchResultsRegion.show(s);var r=e;r=this.removeEmptyGlobalSearchCriteria(r);var a={defaults:{ageYears:"Unk"},parse:function(e){return delete e.icn,e}},n={};n.resourceTitle="search-global-search",n.viewModel=a,n.criteria=r,n.fetchType="POST",n.onError=function(e,t){if(""!==t.msg){var r;try{r=JSON.parse(t.responseText),r.message&&(r=r.message)}catch(a){r=t.responseText}s.setEmptyMessage("Error: "+r)}else s.setEmptyMessage("Unknown error.");s.render()},n.onSuccess=function(e,t){""!==t.msg?s.setEmptyMessage(t.msg):s.collection=o,s.render()};var o=ADK.ResourceService.fetchCollection(n)},removeEmptyGlobalSearchCriteria:function(e){var s=e;return void 0!==s?(""===s["name.first"]&&delete s["name.first"],""===s["date.birth"]&&delete s["date.birth"],""===s.ssn&&delete s.ssn,""!==s["name.first"]&&""!==s["date.birth"]&&""!==s.ssn&&(s.triggerSearch=!0),s):void 0}});return n});