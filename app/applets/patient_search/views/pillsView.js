define(["backbone","marionette","hbs!app/applets/patient_search/templates/mySitePillsTemplate","hbs!app/applets/patient_search/templates/common/blankTemplate"],function(e,t,i,l){var a="mySite",n="myCprsList",s="none",o="MM/DD/YYYY",p=e.Model.extend({defaults:{template:i,pillsType:n}}),m=e.Marionette.ItemView.extend({tagName:"ul",className:"nav nav-pills",events:{"click li":"changePillType"},initialize:function(){this.model=new p,this.listenTo(this.model,"change:template",this.render)},getTemplate:function(){return this.model.get("template")},onRender:function(){$(this.el).find("#"+this.model.get("pillsType")).addClass("active")},changePillType:function(e){if($("#patient-search-confirmation").addClass("hide"),this.model.set({pillsType:$(e.currentTarget).attr("id")}),this.render(),$(this.el).find("#"+this.model.get("pillsType")+" a").focus(),"clinics"===this.model.get("pillsType")){var t=$("#custom-date-from-clinic").datepicker("getDate"),i=$("#custom-date-to-clinic").datepicker("getDate");"Invalid Date"!==t.toString()&&"Invalid Date"!==i.toString()&&($("#filter-from-date-clinic").val(moment(t).format(o)),$("#filter-to-date-clinic").val(moment(i).format(o)))}},changeTemplate:function(e){$("#patient-search-confirmation").addClass("hide"),e==a?this.model.set({template:i,pillsType:s}):this.model.set({template:l})},clearAllTabs:function(){$(this.el).find("#"+this.model.get("pillsType")).removeClass("active"),this.model.set({pillsType:s})},resetModels:function(){this.model.set({pillsType:s})},getTabType:function(){return this.model.get("pillsType")}});return m});