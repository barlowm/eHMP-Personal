define(["underscore","handlebars","jquery"],function(e,t,l){var a={};a.isUserListPageable=!0;var n={lastname:{name:"lname",label:"Last Name",cell:"string"},firstname:{name:"fname",label:"First Name",cell:"string"},rolesLabels:{name:"rolesLabels",label:"Roles",cell:"handlebars",template:t.compile("{{#each rolesLabels}}{{#unless @last}}{{this}}, {{/unless}}{{#if @last}}{{this}}{{/if}}{{/each}}")},facility:{name:"facility",label:"Facility",cell:"string"},site:{name:"site",label:"Site",cell:"string"},uid:{name:"uid",label:"UID",cell:"string"},title:{name:"title",label:"Title",cell:"string"}},s={summary:[n.lastname,n.firstname,n.rolesLabels],expanded:[n.lastname,n.firstname,n.title,n.rolesLabels,n.facility,n.site,n.uid]};return a.getColumns=function(e){var t=null;return s.hasOwnProperty(e)&&(t=s[e]),t||s.expanded},a.isValidUsersList=function(t,l){var a=!1;return t&&(l?e.has(t,"fullCollection")&&e.has(t.fullCollection,"models")&&e.isArray(t.fullCollection.models)&&t.fullCollection.models.length>0&&(a=!0):e.has(t,"models")&&e.isArray(t.models)&&t.models.length>0&&(a=!0)),a},a.isValidRolesMap=function(t){var l=!1;return t&&e.has(t,"data")&&t.data.length>0&&e.each(t.data,function(t){e.has(t,"label")&&e.has(t,"val")&&(l=!0)}),l},a.isValidEditedRoles=function(t){var l=!1;return t&&e.has(t,"data")&&e.has(t.data,"val")&&e.isArray(t.data.val)&&(l=!0),l},a.showUsersAlert=function(e){var l=new ADK.UI.Alert({title:"Users List Error",messageView:Backbone.Marionette.ItemView.extend({template:t.compile(a.getErrorMessage(e))}),footerView:Backbone.Marionette.ItemView.extend({template:t.compile(['{{ui-button "Cancel" classes="btn-default alert-cancel" title="Cancel"}}'].join("\n")),events:{"click .alert-cancel":"alertCancel"},alertCancel:function(){ADK.UI.Alert.hide()}})});l.show()},a.showRolesAlert=function(e,l){var n=new ADK.UI.Alert({title:l,messageView:Backbone.Marionette.ItemView.extend({template:t.compile(a.getErrorMessage(e))}),footerView:Backbone.Marionette.ItemView.extend({template:t.compile(['{{ui-button "Cancel" classes="btn-default alert-cancel" title="Cancel"}}'].join("\n")),events:{"click .alert-cancel":"alertCancel"},alertCancel:function(){ADK.UI.Alert.hide()}})});n.show()},a.getErrorMessage=function(t){var l="";return l=e.has(t,"fetchOptions")?"<p>Resource Title: "+t.fetchOptions.resourceTitle+"<p>URL: "+t.url:t},a.getCorrespondentLabels=function(t,l){var n=[],s=[];return e.has(t,"attributes")&&e.has(t.attributes,"roles")&&(n=t.attributes.roles.val),a.isValidRolesMap(l)&&e.each(n,function(t){e.each(l.data,function(e){t===e.val&&s.push(e.label)})}),s},a.compareArrays=function(e,t){return 0===l(e).not(t).length&&0===l(t).not(e).length},a});