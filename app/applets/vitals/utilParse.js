define(["backbone","marionette","underscore"],function(e,t,r){"use strict";var s={};return s.toTitleCase=function(e){return e?e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}):""},s.getTypeName=function(e){return e.typeName&&"BMI"!==e.typeName&&(e.typeName=s.toTitleCase(e.typeName)),e},s.getFacilityColor=function(e){return e.facilityCode&&"DOD"==e.facilityCode.toUpperCase()?e.facilityColor="DOD":e.facilityColor="nonDOD",e},s.getStandardizedName=function(e){return e.standardizedName="",e.codes&&e.codes.forEach(function(t){-1!=t.system.indexOf("http://loinc.org")&&(e.standardizedName=t.display)}),e},s.noVitlasNoRecord=function(e){var t="";return e.result==t&&(e.result="No record"),e},s.getFormattedHeight=function(e){return e.typeName&&"height"==e.typeName.toLowerCase()&&(isNaN(e.result)||e.units&&"cm"==e.units&&(e.result=Math.round(.3937*e.result),e.units="in")),e},s.getResultUnits=function(e){return e.resultUnits="",e.result&&(e.resultUnits=e.result),e.units&&"Pass"!==e.result&&"Refused"!==e.result&&"Unavailable"!==e.result&&(e.resultUnits+=" "+e.units),e},s.getNumericTime=function(e){if(void 0===e)return e;var t=e,r=/(\d+)/gi,s=t.match(r);switch(t=t.substr(t.length-1)){case"y":t=1==s?"year":"years";break;case"m":t=1==s?"month":"months";break;case"M":t=1==s?"month":"months";break;case"d":t=1==s?"day":"days";break;case"h":t=1==s?"hour":"hours"}return e=s+" "+t},s.getMetricResult=function(e){return e.metricUnits||("lb"===e.units?(e.metricUnits="kg",e.metricResult=Math.round(e.result/2.20462)):"in"===e.units?(e.metricUnits="cm",e.metricResult=Math.round(e.result/.3937)):"F"===e.units&&(e.metricUnits="C",e.metricResult=Math.round(e.result/1.8))),e},s.getMetricResultUnits=function(e){return e.metricResultUnits="",e.metricResult&&(e.metricResultUnits=e.metricResult),e.metricUnits&&"Pass"!==e.metricUnits&&"Refused"!==e.metricUnits&&"Unavailable"!==e.result&&(e.metricResultUnits+=" "+e.metricUnits),e},s.getResultUnitsMetricResultUnits=function(e){return e.resultUnitsMetricResultUnits=e.resultUnits,e.metricResultUnits&&(e.resultUnitsMetricResultUnits+=" / "+e.metricResultUnits),e},s.getReferenceRange=function(e){return e.low?e.referenceRange=e.low+" - "+e.high+" "+e.units:e.referenceRange=null,e},s.getFormattedWeight=function(e){var t=null;return e.typeName&&e.typeName.toLowerCase().indexOf("weight")>-1&&e.units&&"kg"==e.units&&(e.metricResult=e.result,e.metricUnits=e.units,e.result=Math.round(2.20462*e.result),e.units="lb",t=e.result+" "+e.units,e.formattedWeight=t),e},s.getDisplayName=function(e){if(!e.displayName&&(e.displayName="",e.typeName)){var t=e.typeName.toLowerCase();switch(t){case"blood pressure":e.displayName="BP";break;case"pulse":e.displayName="P";break;case"respiration":e.displayName="R";break;case"temperature":e.displayName="T";break;case"pulse oximetry":e.displayName="PO2";break;case"pain":e.displayName="PN";break;case"weight":case"patient body weight - measured":e.displayName="WT";break;case"height":e.displayName="HT";break;case"body mass index":e.displayName="BMI";break;case"circumference/girth":e.displayName="CG";break;default:e.displayName=e.typeName}}return e},s.getVitalLongName=function(e){var t,r=e.toLowerCase();switch(r){case"bp":t="Blood Pressure";break;case"p":t="Pulse";break;case"rr":case"r":t="Respiration";break;case"t":t="Temperature";break;case"po2":t="Pulse Oximetry";break;case"pn":t="Pain";break;case"wt":t="Weight";break;case"ht":t="Height";break;case"bmi":t="Body Mass Index";break;default:t=e}return t},s});