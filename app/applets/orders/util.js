define(["backbone","marionette","underscore"],function(t,e,r){var a={};return a.getStatusStyle=function(t){switch(t.statusName.toUpperCase()){case"PENDING":t.statusStyle="label label-warning";break;case"COMPLETE":t.statusStyle="label label-success";break;case"EXPIRED":t.statusStyle="label label-danger";break;case"DISCONTINUED":t.statusStyle="label label-info";break;case"ACTIVE":t.statusStyle="label label-success";break;default:t.statusStyle="label label-default"}return t},a.getFacilityColor=function(t){return t.facilityCode&&"DOD"==t.facilityCode?t.facilityColor="DOD":t.facilityColor="nonDOD",t},a.getSigners=function(t){var e=t.clinicians;return r.each(e,function(e){switch(e.role){case"S":t.provider=e.name;break;case"N":t.nurse=e.name;break;case"C":t.clerk=e.name;break;case"R":t.chart=e.name}}),t},a.getEnteredFormatted=function(t){return t.entered&&(t.enteredFormatted=ADK.utils.formatDate(t.entered)),t},a.parseLabSampleString=function(t){var e,r,a=[" I"," LC"," SP"," WC"],n=["Immediate COLLECT","LAB COLLECT","SEND PATIENT","WARD COLLECT"],s=["","",""],i=t.indexOf("   "),o=t.indexOf("LB #");if(o>1){r=t.substr(0,o).trim(),0>i&&(i=0);for(var l=0;l<a.length;l++)if(e=r.indexOf(a[l],i),e>1){s[0]=n[l],r=r.substr(0,e+1);break}var u=r.lastIndexOf(" ",i-1);if(0===i)for(u=r.indexOf(" ");u>-1;)r=r.substr(u,r.length).trim(),u=r.indexOf(" ");else u=r.lastIndexOf(" ",i-1),r=r.substr(u,r.length).trim();var m;return m=r.split("   "),m.length>1?(s[1]=m[0],s[2]=m[1]):0===i?s[2]=m[0]:(s[1]=m[0],s[2]=""),s}return s[0]="Not Found",s[1]="Not Found",s[2]="Not Found",s},a.trimSampleString=function(t){var e,r,a=[" I"," LC"," SP"," WC"],n=["Immediate COLLECT","LAB COLLECT","SEND PATIENT","WARD COLLECT"],s=["","",""],i=t.indexOf("   "),o=t.indexOf("LB #");if(o>1){r=t.substr(0,o).trim(),0>i&&(i=0);for(var l=0;l<a.length;l++)if(e=r.indexOf(a[l],i),e>1){s[0]=n[l],r=r.substr(0,e+1);break}var u=r.lastIndexOf(" ",i-1);if(0===i)for(u=r.indexOf(" ");u>-1;)r=r.substr(u,r.length).trim(),u=r.indexOf(" ");else u=r.lastIndexOf(" ",i-1),r=r.substr(u,r.length).trim();var m;return m=r.split("   "),m.length>1?(s[1]=m[0],s[2]=m[1]):0===i?s[2]=m[0]:(s[1]=m[0],s[2]=""),s}return s[0]="Not Found",s[1]="Not Found",s[2]="Not Found",s},a.splitLongSummaryText=function(t){return t.summary&&t.summary.length>160?(t.shortSummary=t.summary.substr(0,160),t.longSummary=!0):(t.shortSummary=t.summary,t.longSummary=!1),t},a.parseOrderResponse=function(t){return t=a.getEnteredFormatted(t),t=a.getSigners(t),t=a.splitLongSummaryText(t),t.stop&&(t.stop=a.parseForOrderStopStartDate(t.stop),t.stopHasTime=t.stop.length>8),t.start&&(t.start=a.parseForOrderStopStartDate(t.start),t.startHasTime=t.start.length>8),"OR"===t.service&&(t.kind="Text Order"),ADK.Enrichment.addFacilityMoniker(t),t},a.parseForSignature=function(t){var e={byName:"",onDate:""};if(void 0!==t&&null!==t){var r=t.length;r>0&&(e.byName=t[r-1].name+" on ",e.onDate=t[r-1].signedDateTime)}return e},a.parseForOrderNumber=function(t,e){var r="";if(e){var a=t.indexOf("LB #");a>1&&(r=t.substr(a+4).trim())}else{var n=t.lastIndexOf(":");r=t.substr(n+1).trim()}return r},a.parseForOrderStopStartDate=function(t){var e=t,r=t.indexOf("0000");if(r>1){var a,n,s=e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6,2),i=new Date(s);i.setDate(i.getDate()-1);var o=i.getUTCMonth()+1;a=10>o?"0"+o.toString():o.toString();var l=i.getUTCDate();n=10>l?"0"+l.toString():l.toString(),e=i.getUTCFullYear().toString()+a+n+"2359"}return e},a});