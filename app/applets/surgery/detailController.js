define(["app/applets/surgery/modal/modalView"],function(e){var i={initialize:function(i){var n=ADK.Messaging.getChannel(i);n.reply("detailView",function(i){var n=$.Deferred();if(i.model)n.resolve({view:new e({model:i.model})});else{var r={criteria:{uid:i.uid},patient:new Backbone.Model({icn:i.patient.icn,pid:i.patient.pid}),resourceTitle:"patient-record-document-view",viewModel:{parse:AppletHelper.parseDocResponse},cache:!0},t=ADK.PatientRecordService.fetchCollection(r);t.on("sync",function(){var i=t.first();n.resolve({view:new e({model:i})})},this)}return n.promise()})}};return i});