define(["backbone","marionette","underscore","hbs!app/applets/addOrder/templates/opMedManagerTemplate","app/applets/addOrder/views/searchMeds","app/applets/addOrder/views/opMedOrderView","app/applets/addOrder/views/nonformularyView"],function(e,i,d,n,s,r,t){"use strict";var a,o=e.Marionette.LayoutView.extend({template:n,regions:{searchMedsRegion:"#lookup-med-container",medOrderFormRegion:"#med-order-form-container",warningRegion:"#warning-container"},initialize:function(i){a=new e.Model(this.model.attributes),this.model=a},onRender:function(){var e=new s({sharedModel:this.model});this.searchView=e,this.searchMedsRegion.show(this.searchView),this.$("#change-med-btn").hide()},events:{"click #change-med-btn":"displaySeachMeds"},displaySeachMeds:function(){this.render()},modelEvents:{change:"modelChanged"},modelChanged:function(e){if(void 0!==this.model.selectedMed)if(this.model.selectedMed.get("formulary")===!1){var i=new t({parentView:this});this.searchMedsRegion.$el.hide(),this.warningRegion.show(i)}else{var d=new r(this.model.selectedMed);this.orderView=d,this.searchMedsRegion.reset(),this.medOrderFormRegion.show(this.orderView),this.$("#change-med-btn").show()}}});return o});