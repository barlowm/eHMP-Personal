define(["backbone","marionette","underscore","hbs!app/applets/addOrder/templates/searchMedsResultTemplate","hbs!app/applets/addOrder/templates/searchMedsTemplate","app/applets/addOrder/helpers/searchUtil","app/applets/addOrder/helpers/searchMedsEventHandler","app/applets/addOrder/helpers/searchMedsScrollEventHandler"],function(e,t,s,a,n,r,d,i){"use strict";var l,c=e.Marionette.ItemView.extend({template:a,tagName:"li",events:{click:"selectMed"},selectMed:function(t){t.preventDefault(),l=new e.Model(this.model.attributes)}}),o=e.Marionette.CollectionView.extend({tagName:"ul",className:"nav nav-stacked",attributes:{id:"meds-ul",role:"menu"},childView:c,childViewContainer:"#search-scroll",initialize:function(t){this.collection=new e.Collection}}),h=e.Marionette.LayoutView.extend({template:n,className:"add-medication-styles",regions:{searchMedsResults:"#med-results-inner-container",medOrderForm:"#med-order-form-container"},initialize:function(e){this.sharedModel=e.sharedModel},onRender:function(){var e=new o;this.medsView=e,this.searchMedsResults.show(e),r.enableLoadingIndicator(!0),i.setView(this)},events:{"keyup #medsSearchInput":"submitSearchMeds","click #med-results-inner-container":"clicked","keydown input":function(e){13===e.which&&e.preventDefault()}},clicked:function(){this.sharedModel.nameDesc=l.get("name")+" "+r.escapeHtml(l.get("desc")),this.sharedModel.selectedMed=l,this.sharedModel.trigger("change")},submitSearchMeds:function(e){9!==e.keyCode&&($("#search-scroll").unbind("scroll",i.handleScroll),d.setView(this),r.performActionWhileTyping(e,"keyup",2,500,d.medsEventHandler))}});return h});