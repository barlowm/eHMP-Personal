define(["jquery","jquery.inputmask","backbone","marionette","underscore","hbs!app/applets/addOrder/templates/opMedOrderTemplate","app/applets/addOrder/helpers/opDataUtil","app/applets/addOrder/helpers/opMedModelUtil","app/applets/addOrder/views/dosageView","app/applets/addOrder/views/routeView","app/applets/addOrder/views/scheduleView"],function(e,t,a,i,s,n,r,d,p,u,l){"use strict";return a.Marionette.LayoutView.extend({className:"add-medication-styles",template:n,constructor:function(e){if(!e||"function"!=typeof e.get||!e.get("IEN")||!e.get("name"))throw new Error('addMedication Constructor Argument Error:\nYou must pass in a backbone model of the medication with "IEN" and "name" attributes.');this.setMed(e),r.setMed(this.med),a.Marionette.LayoutView.prototype.constructor.apply(this,arguments)},regions:{dosageInput:"#dosages",routeInput:"#routes",scheduleInput:"#schedules",previewOrder:"#previewOrder"},initialize:function(){r.fetchOpData();var e=d.getModel();JSON.stringify(e),r.model=new e},update:function(){d.update(),this.buildPreview()},onShow:function(){e("#supply").inputmask("Regex",{regex:"^90$|^[1-8]\\d$|^\\d$",rightAlign:!0}),e("#quantity").inputmask({mask:["9{0,9}.9{0,2}","9{0,9}"],greedy:!1,rightAlign:!0}),e("#refills").inputmask("Regex",{regex:"^0$|^\\d$|^10$|^11$",rightAlign:!0}),e("#comments").inputmask("Regex",{regex:"^.{0,150}$"}),e("#previewOrder").inputmask("Regex",{regex:"^.{0,240}$"})},onRender:function(){this.dosageInput.show(new p),this.routeInput.show(new u),this.scheduleInput.show(new l),e("#medicationName").text(this.med.get("name")),e("#btn-add-order-accept").removeAttr("disabled")},events:{"change #medication-form":"update","click #btn-add-order-accept":"addOrder","click .updnbtn":"changeValue"},changeValue:function(e){var t,a,i=e.currentTarget.id;switch(i){case"supply-up-btn":t=parseInt(this.$("#supply").val()),a=t+1,this.$("#supply").val(a);break;case"supply-dn-btn":t=parseInt(this.$("#supply").val()),a=t-1,t>0&&this.$("#supply").val(a);break;case"quantity-up-btn":t=parseInt(this.$("#quantity").val()),a=t+1,this.$("#quantity").val(a);break;case"quantity-dn-btn":t=parseInt(this.$("#quantity").val()),a=t-1,t>0&&this.$("#quantity").val(a);break;case"refills-up-btn":t=parseInt(this.$("#refills").val()),a=t+1,this.$("#refills").val(a);break;case"refills-dn-btn":t=parseInt(this.$("#refills").val()),a=t-1,t>0&&this.$("#refills").val(a)}this.update()},addOrder:function(e){e.preventDefault(),this.validateInputs(),modelUtils.saveMed()},validateInputs:function(){console.log("start input validations")},buildPreview:function(){d.buildPreview()},setMed:function(e){this.med=e}})});