define([],function(){"use strict";var r,e,i,o=!0,t=0,n={resourceTitle:"write-back-outpatient-med-formulary",criteria:{},onError:function(r,e){$("#meds-loading-indicator").hide(),c.showError(e.responseText),this.enableScrolling=!0},onSuccess:function(e){o=!1,r.collection.add(e.toJSON()),$("#meds-loading-indicator").hide(),setTimeout(function(){o=!0},500)}},c={fetchOptions:n,setView:function(o){r=o.medsView,e=o.errorView,i=o.medsSearchError},getView:function(){return r},showError:function(r){e&&(e.addError(r),i.show(e))},handleScroll:function(){if(o){var r=$("#med-results-inner-container").height(),i=$("#search-scroll").scrollTop(),c=$("#search-scroll").height(),s=i+c,a=10;if(i>t&&s+a>=r){var l={count:"40"};l.search=$("#meds-ul li:last-child a:last-child").text(),n.criteria.param=JSON.stringify(l),o=!1,ADK.PatientRecordService.fetchCollection(n),$("#meds-loading-indicator").show(),e&&e.clearErrors()}t=i}}};return c});