define(["backbone","marionette","underscore","moment","app/applets/addVitals/utils/dateTimeUtil","app/applets/addVitals/utils/viewHelper"],function(e,t,n,a,i,s){"use strict";var r=s,l={resourceTitle:"vitals-qualifier-information",criteria:{},onError:function(e,t){},onSuccess:function(t,n){var a=["BLOOD PRESSURE","PULSE","RESPIRATION","TEMPERATURE","PULSE OXIMETRY","HEIGHT","PAIN","WEIGHT","CENTRAL VENOUS PRESSURE","CIRCUMFERENCE/GIRTH"],i=q(),s=new e.Collection;s.reset(t.toJSON()[0].items);var r,l,d;s.each(function(e){r=e.get("type"),d=a.indexOf(r),d>=0&&(l=i[d],o(l,e))}),u(!1),h.reset(i),f().onPassOff(),u(!1)}},u=function(e){e?$("#vitals-loading-indicator").show():($("#vitals-loading-indicator").hide(),$("#vitals-loading-indicator").focus())},o=function(e,t){var a,i,s,r=t.get("categories");if(e.set("fileIEN",t.get("fileIEN")),r){e.set("qualifiers",r.length);var l=0;n.each(r,function(t,r){l+=1,i=[{fileIEN:"NONE",name:"None"}],s="qual-"+l+"-name","po"===e.get("sname")?(e.set("qual-3-name",t.name),e.set("qual-3",t.fileIEN)):(e.set("qual-"+l+"-name",t.name),e.set("qual-"+l,t.fileIEN)),a=t.qualifiers,a.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),n.each(a,function(e,t){e.name=d(e.name),i.push(e)}),"po"===e.get("sname")?e.set("qual-3-options",i):e.set("qual-"+l+"-options",i)}),e.set("qualifiers",l)}},d=function(e){return e?e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}):""},b=e.Collection.extend({model:g}),h=new b,m=e.Model.extend({defaults:function(){return{dfn:"","provider-id":"",locIEN:"","location-name":"","provider-name":"","on-pass":!0,"vital-min-reqs":[],"vitals-error":[],"min-reqs":!1,date:"",time:"","date-time-error":"",items:"","user-session":""}},getDateTimeError:function(){return this.get("date-time-error")},hasValidDateTime:function(){return 0===this.get("date-time-error").length},addToVitalsErrors:function(e){-1===$.inArray(e,this.get("vitals-error"))&&this.get("vitals-error").push(e)},removeFromVitalsErrors:function(e){var t=this.get("vitals-error"),a=n.without(t,e);this.set("vitals-error",a)},addToVitalsMinReqs:function(e){-1===$.inArray(e,this.get("vital-min-reqs"))&&this.get("vital-min-reqs").push(e)},removeFromVitalsMinReqs:function(e){var t=this.get("vital-min-reqs"),a=n.without(t,e);this.set("vital-min-reqs",a)},getDate:function(){return this.get("date")},setDate:function(e){this.set("date",e),this.validateDateTime(),this.checkReqs()},setLocation:function(e){this.set("locIEN",e),this.checkReqs()},validateDateTime:function(){var e=this.get("date"),t=this.get("time");i.requiredDateFormat(e)?i.requiredTimeFormat(t)?i.futureDate(e,t)?this.set("date-time-error","Future date not permitted"):this.set("date-time-error",""):this.set("date-time-error","Time format is HH:MM a/p"):this.set("date-time-error","Date format is "+ADK.utils.dateUtils.defaultOptions().placeholder),this.checkReqs()},setTime:function(e){this.set("time",e),this.validateDateTime(),this.checkReqs()},getTime:function(){return this.get("time")},toggleOnPass:function(){var e=this.get("on-pass"),t=e===!1?!0:!1;this.set("on-pass",t),this.get("items").each(function(e){e.setOnPass(t)}),this.checkReqs()},onPassOff:function(){this.set("on-pass",!1),this.get("items").each(function(e){e.setOnPass(!1)}),this.checkReqs()},updateError:function(e,t){t?this.addToVitalsErrors(e):this.removeFromVitalsErrors(e),this.checkReqs()},updateVitalMinReqs:function(e,t){t?this.addToVitalsMinReqs(e):this.removeFromVitalsMinReqs(e),this.checkReqs()},checkReqs:function(){var e=0===this.get("date-time-error").length&&0===this.get("vitals-error").length;e=e&&this.get("locIEN").length>0;var t=!1;(this.get("on-pass")||this.get("vital-min-reqs").length>0)&&(t=!0),this.set("min-reqs",e&&t)},addOption:function(e){"NONE"===e||n.contains(this.get("sel_options"),e)||this.get("sel_options").push(e)}}),p=new m({}),c=function(){return h},f=function(){return p},v=function(e,t){var a=(ADK.PatientRecordService.getCurrentPatient(),ADK.PatientRecordService.getCurrentPatient().get("localId")),i=(ADK.PatientRecordService.getCurrentPatient().attributes.pid,ADK.UserService.getUserSession()),s=(i.attributes.site,i.attributes.lastname),r=i.attributes.firstname,l=s+","+r,u=q();return t.reset(u),p.set({dfn:a,"provider-id":"",locIEN:"","location-name":"","provider-name":l,"on-pass":!0,"vital-min-reqs":[],"vitals-error":[],"min-reqs":!1,date:"",time:"","date-time-error":"",items:t,"user-session":i}),n.bindAll(p,"getDateTimeError","validateDateTime","hasValidDateTime","setDate","setTime","getDate","getTime","toggleOnPass","checkReqs","updateError","updateVitalMinReqs","addToVitalsMinReqs","removeFromVitalsMinReqs","addToVitalsErrors","removeFromVitalsErrors"),p},g=e.Model.extend({defaults:{name:"",fileIEN:"","op-name":"",sname:"",reading:"",mask:"",regex:!1,error:!1,hint:"","min-reqs":!1,"on-pass":!0,units:1,qualifiers:0,"sel-unit-name":"","sel-unit-val":"","unit-1-name":"","unit-1-val":"","unit-1-upper":"","unit-1-lower":"","unit-1-options":[],"unit-2-name":"","unit-2-val":"","unit-2-upper":"","unit-2-lower":"","unit-2-options":[],unavailable:!1,refused:!1,date:"",time:"",validator:"1","valid-info":"","sel-options":[],"qual-1":"","qual-1-name":"","qual-1-val":"None","qual-1-error":"","qual-1-hint":"","qual-1-options":[],"qual-1-sel":"","qual-2":"","qual-2-name":"","qual-2-val":"None","qual-2-error":"","qual-2-hint":"","qual-2-options":[],"qual-2-sel":"","qual-3":"","qual-3-name":"","qual-3-val":"None","qual-3-error":"","qual-3-hint":"","qual-3-options":[],"qual-3-sel":"","qual-4":"","qual-4-name":"","qual-4-val":"None","qual-4-hint":"","qual-4-error":"","qual-4-options":[],"qual-4-sel":""},toggleURAttribute:function(e){var t=this.get(e),n=t===!1?!0:!1;this.set(e,n),n?(this.clearData(),"unavailable"===e?(this.set("refused",t),this.set("unavailable-label",this.get("name")+" unavailable selected. Vitals row disabled."),this.set("refused-label",this.get("name")+" refused")):"refused"===e&&(this.set("unavailable",t),this.set("refused-label",this.get("name")+" refused selected. Vitals row disabled."),this.set("unavailable-label",this.get("name")+" unavailable"))):"unavailable"===e?this.set("unavailable-label",this.get("name")+" unavailable"):"refused"===e&&this.set("refused-label",this.get("name")+" refused"),this.checkReqs()},clearData:function(){this.set({reading:"",error:!1,"qual-1":"","qual-1-val":"None","qual-1-error":"","qual-1-sel":"","qual-2":"","qual-2-val":"None","qual-2-error":"","qual-2-sel":"","qual-3":"","qual-3-val":"None","qual-3-error":"","qual-3-sel":"","qual-4":"","qual-4-val":"None","qual-4-error":"","qual-4-sel":""}),"po"===this.get("sname")&&(this.set("qual-1-val",""),this.set("qual-2-val",""))},setOnPass:function(e){this.set("on-pass",e),e&&this.clearData(),this.checkReqs()},setQualifier:function(e,t){"NONE"===t?this.set(e,""):this.set(e,t)},toggleUnit:function(e){this.set("sel-unit-name",e);var t=this.validateReading();"false"===t.toString()?this.set("error",!1):(this.set("hint",t),this.set("error",!0)),this.checkReqs()},setReading:function(e){this.set("reading",e);var t=this.validateReading();return"false"===t.toString()?this.set("error",!1):(this.set("hint",t),this.set("error",!0)),this.checkReqs(),t?t:!1},setFlowRate:function(e){this.set("qual-1-val",e);var t=this.getFlowRateError();return"false"===t.toString()?this.set("qual-1-error",!1):(this.set("qual-1-hint",t),this.set("qual-1-error",!0)),this.checkReqs(),t?t:!1},setOxiConc:function(e){this.set("qual-2-val",e);var t=this.getOxiConcError();return"false"===t.toString()?this.set("qual-2-error",!1):(this.set("qual-2-hint",t),this.set("qual-2-error",!0)),this.checkReqs(),t?t:!1},getFileIEN:function(){return this.get("fileIEN")},getReading:function(){return this.get("reading")},getUnit:function(){return this.get("sel-unit-name")},isRefused:function(){return this.get("refused")},isUnavailable:function(){return this.get("unavailable")},setError:function(e){this.set("error",e)},hasMinReqs:function(){return this.get("min-reqs")},isError:function(){return this.get("error")},isQual1Error:function(){return this.get("qual-1-error")},isQual2Error:function(){return this.get("qual-2-error")},isQual3Error:function(){return this.get("qual-3-error")},isQual4Error:function(){return this.get("qual-4-error")},getQualifiers:function(){var e=[];return this.get("qual-1-sel")&&e.push(this.get("qual-1-sel")),this.get("qual-2-sel")&&e.push(this.get("qual-2-sel")),this.get("qual-3-sel")&&e.push(this.get("qual-3-sel")),this.get("qual-4-sel")&&e.push(this.get("qual-4-sel")),e},getUpper:function(){var e=this.get("sel-unit-name");return this.get("unit-1-name")===e?Number(this.get("unit-1-upper")):Number(this.get("unit-2-upper"))},getLower:function(){var e=this.get("sel-unit-name");return this.get("unit-1-name")===e?Number(this.get("unit-1-lower")):Number(this.get("unit-2-lower"))},validateReading:function(){return"1"===this.get("validator")?this.getReadingError():this.getBPReadingError()},getFlowRateError:function(){var e=this.get("qual-1-val");if(""===e)return!1;var t=this.get("qual-1-upper"),n=this.get("qual-1-lower");return Number(e)<=t&&Number(e)>=n?!1:n+" to "+t},getOxiConcError:function(){var e=this.get("qual-2-val");if(""===e)return!1;var t=this.get("qual-2-upper"),n=this.get("qual-2-lower");return Number(e)<=t&&Number(e)>=n?!1:n+" to "+t},getReadingError:function(){var e=this.get("reading");if(""===e||"true"===this.get("unit-options"))return!1;var t=e?e:this.get("reading"),n=this.getUpper(),a=this.getLower();return Number(t)<=n&&Number(t)>=a?!1:a+" to "+n},getBPReadingError:function(){var e=this.get("reading");if(""===e)return!1;var t=this.get("unit-1-upper"),n=this.get("unit-1-lower"),a=!1,i=e.toString().split("/"),s="nnn/nnn 0 to 300";(i.length<2||i.length>3)&&(a=s);for(var r=0;r<i.length;r++)if(Number(i[r])>t||Number(i[r])<n){a=s;break}return a},checkReqs:function(){var e=this.get("refused")===!0||this.get("unavailable")===!0;e=e||this.get("reading").length>0,this.set("min-reqs",e)}}),q=function(){var e=new g({name:"Blood Pressure","op-name":"BLOOD PRESSURE",sname:"bp",validator:"2","sel-unit-name":"mm[Hg]","unit-1-name":"mm[Hg]","unit-1-upper":300,"unit-1-lower":0,"valid-info":"nnn/nnn 0-300",mask:"\\d{1,3}/\\d{1,3}(/\\d{1,3})?",regex:!0,"refused-label":"Blood Pressure refused","unavailable-label":"Blood pressure unavailable"}),t=new g({name:"Pulse","op-name":"PULSE",sname:"pu","sel-unit-name":"/min","unit-1-name":"/min","unit-1-upper":300,"unit-1-lower":0,"valid-info":"0-300",mask:"\\d{1,3}",regex:!0,"refused-label":"Pulse refused","unavailable-label":"Pulse unavailable"}),a=new g({name:"Respiration","op-name":"RESPIRATION",sname:"re","sel-unit-name":"/min","unit-1-name":"/min","unit-1-upper":100,"unit-1-lower":0,"valid-info":"0-100",mask:"\\d{1,3}",regex:!0,"refused-label":"Respiration refused","unavailable-label":"Respiration unavailable"}),i=new g({name:"Temperature","op-name":"TEMPERATURE",sname:"te",units:2,"sel-unit-name":"F","unit-1-name":"F","unit-1-upper":120,"unit-1-lower":45,"unit-2-name":"C","unit-2-upper":48.9,"unit-2-lower":7.2,mask:"\\d{1,3}(\\.\\d{1,2})?",regex:!0,"refused-label":"Temperature refused","unavailable-label":"Temperature unavailable"}),s=new g({name:"Pulse Oximetry","op-name":"PULSE OXIMETRY",sname:"po",units:2,"sel-unit-name":"%","unit-1-name":"%","unit-1-upper":100,"unit-1-lower":0,"qual-1-name":"Flow Rate","qual-1-sname":"fr","qual-1-upper":20,"qual-1-lower":.5,"qual-1-mask":"\\d{1,2}(\\.\\d{1,2})?","qual-1-regex":!0,"qual-2-name":"O2 Conc. (%)","qual-2-sname":"oc","qual-2-upper":100,"qual-2-lower":21,"qual-2-mask":"\\d{1,3}","qual-2-regex":!0,mask:"\\d{1,3}(\\.\\d{1,2})?",regex:!0,"refused-label":"Pulse Oximetry refused","unavailable-label":"Pulse Oximetry unavailable"}),r=new g({name:"Height","op-name":"HEIGHT",sname:"he",units:2,"sel-unit-name":"in","unit-1-name":"in","unit-1-upper":100,"unit-1-lower":10,"unit-2-name":"cm","unit-2-upper":254,"unit-2-lower":25.4,mask:"\\d{1,3}(\\.\\d{1,2})?",regex:!0,"refused-label":"Height refused","unavailable-label":"Height unavailable"}),l=new g({name:"Pain","op-name":"PAIN",sname:"pa","unit-1-name":"","unit-options":"true","unit-1-options":["","0 - no pain","1 - slightly uncomfortable","2","3","4","5","6","7","8","9","10 - worst imaginable","99 - unable to respond"],"refused-label":"Pain refused","unavailable-label":"Pain unavailable"}),u=new g({name:"Weight","op-name":"WEIGHT",sname:"we",units:2,"sel-unit-name":"lb","unit-1-name":"lb","unit-1-upper":1500,"unit-1-lower":0,"unit-2-name":"kg","unit-2-upper":680.39,"unit-2-lower":0,mask:"\\d{1,4}(\\.\\d{1,2})?",regex:!0,"refused-label":"Weight refused","unavailable-label":"Weight unavailable"}),o=new g({name:"CVP","op-name":"CENTRAL VENOUS PRESSURE",sname:"cv",units:2,"sel-unit-name":"cm H2O","unit-1-name":"cm H2O","unit-1-upper":13.6,"unit-1-lower":-13.6,"unit-2-name":"mm HG","unit-2-upper":100,"unit-2-lower":-10,mask:"-?\\d{1,3}(\\.\\d{1,2})?",regex:!0,"refused-label":"CVP refused","unavailable-label":"CVP unavailable"}),d=new g({name:"Circumference/Girth","op-name":"CIRCUMFERENCE/GIRTH",sname:"ci",units:2,"sel-unit-name":"in","unit-1-name":"in","unit-1-upper":200,"unit-1-lower":1,"unit-2-name":"cm","unit-2-upper":508,"unit-2-lower":2.54,mask:"\\d{1,3}(\\.\\d{1,2})?",regex:!0,"refused-label":"Circumference/Girth refused","unavailable-label":"Circumference/Girth unavailable"}),b=[e,t,a,i,s,r,l,u,o,d];return n.each(b,function(e){n.bindAll(e,"set","get","toggleURAttribute","toggleUnit","setOnPass","setQualifier","getQualifiers","getFileIEN","getUnit","getUpper","getLower","validateReading","getReadingError","getBPReadingError","clearData","isError","hasMinReqs","getReading","setReading","checkReqs","setFlowRate","setOxiConc")}),b},C={fetchOpData:function(){var e={};l.criteria.param=JSON.stringify(e),ADK.PatientRecordService.fetchCollection(l)},setAddVidalsSessionFieldValues:function(e){var t={toJSON:function(){var t=[{vitalsobsdate:e.find("#vitals-obs-date").val()},{vitalsobstime:e.find("#vitals-obs-time").val()},{notDisabled:e.find("#patient-on-pass-btn").hasClass("btn pull-right btn-primary")},{bpreading:e.find("#bp-reading").val()},{pureading:e.find("#pu-reading").val()},{rereading:e.find("#re-reading").val()},{tereading:e.find("#te-reading").val()},{poreading:e.find("#po-reading").val()},{hereading:e.find("#he-reading").val()},{pareading:e.find("#pa-reading").val()},{wereading:e.find("#we-reading").val()},{cvreading:e.find("#cv-reading").val()},{cireading:e.find("#ci-reading").val()},{teu1btn:e.find("#te-u1-btn").hasClass("btn-primary")},{heu1btn:e.find("#he-u1-btn").hasClass("btn-primary")},{weu1btn:e.find("#we-u1-btn").hasClass("btn-primary")},{cvu1btn:e.find("#cv-u1-btn").hasClass("btn-primary")},{ciu1btn:e.find("#ci-u1-btn").hasClass("btn-primary")},{bpqbtn:e.find("#bp-q-btn").hasClass("btn-primary")},{bpLOCATIONel:e.find("#bp-LOCATION-sel").val()},{bpMETHODsel:e.find("#bp-METHOD-sel").val()},{bpPOSITIONsel:e.find("#bp-POSITION-sel").val()},{bpCUFFSIZEel:e.find("#bp-CUFF\\ SIZE-sel").val()},{puqbtn:e.find("#pu-q-btn").hasClass("btn-primary")},{puLOCATIONel:e.find("#pu-LOCATION-sel").val()},{puMETHODsel:e.find("#pu-METHOD-sel").val()},{puPOSITIONsel:e.find("#pu-POSITION-sel").val()},{puCUFFSIZEel:e.find("#pu-SITE-sel").val()},{reqbtn:e.find("#re-q-btn").hasClass("btn-primary")},{reMETHODsel:e.find("#re-METHOD-sel").val()},{rePOSITIONsel:e.find("#re-POSITION-sel").val()},{teqbtn:e.find("#te-q-btn").hasClass("btn-primary")},{teLOCATIONsel:e.find("#te-LOCATION-sel").val()},{poqbtn:e.find("#po-q-btn").hasClass("btn-primary")},{pofrtext:e.find("#po-fr-text").val()},{pooctext:e.find("#po-oc-text").val()},{METHODsel:e.find("#METHOD-sel").val()},{heqbtn:e.find("#he-q-btn").hasClass("btn-primary")},{heQUALITYsel:e.find("#he-QUALITY-sel").val()},{weqbtn:e.find("#we-q-btn").hasClass("btn-primary")},{weMETHODsel:e.find("#we-METHOD-sel").val()},{weQUALITYsel:e.find("#we-QUALITY-sel").val()},{ciqbtn:e.find("#ci-q-btn").hasClass("btn-primary")},{ciLOCATIONsel:e.find("#ci-LOCATION-sel").val()},{ciSITEsel:e.find("#ci-SITE-sel").val()},{bpubtn:e.find("#bp-u-btn").hasClass("btn-primary")},{bprbtn:e.find("#bp-r-btn").hasClass("btn-primary")},{puubtn:e.find("#pu-u-btn").hasClass("btn-primary")},{purbtn:e.find("#pu-r-btn").hasClass("btn-primary")},{reubtn:e.find("#re-u-btn").hasClass("btn-primary")},{rerbtn:e.find("#re-r-btn").hasClass("btn-primary")},{teubtn:e.find("#te-u-btn").hasClass("btn-primary")},{terbtn:e.find("#te-r-btn").hasClass("btn-primary")},{poubtn:e.find("#po-u-btn").hasClass("btn-primary")},{porbtn:e.find("#po-r-btn").hasClass("btn-primary")},{heubtn:e.find("#he-u-btn").hasClass("btn-primary")},{herbtn:e.find("#he-r-btn").hasClass("btn-primary")},{paubtn:e.find("#pa-u-btn").hasClass("btn-primary")},{parbtn:e.find("#pa-r-btn").hasClass("btn-primary")},{weubtn:e.find("#we-u-btn").hasClass("btn-primary")},{werbtn:e.find("#we-r-btn").hasClass("btn-primary")},{cvubtn:e.find("#cv-u-btn").hasClass("btn-primary")},{cvrbtn:e.find("#cv-r-btn").hasClass("btn-primary")},{ciubtn:e.find("#ci-u-btn").hasClass("btn-primary")},{cirbtn:e.find("#ci-r-btn").hasClass("btn-primary")}];return t}};ADK.SessionStorage.setAppletStorageModel("addVitals","AddVidalsModelState",t)},getAddVitalsSessionFieldValues:function(){var e=function(){if($("#vitals-loading-indicator").is(":hidden")){var t=ADK.SessionStorage.getAppletStorageModel("addVitals","AddVidalsModelState");if(""!==t[0].vitalsobsdate&&$("#vitals-obs-date").val(t[0].vitalsobsdate),$("#vitals-obs-time").val(t[1].vitalsobstime),t[2].notDisabled===!0)p.toggleOnPass(),$("#patient-on-pass-btn").removeClass("btn pull-right btn-default").addClass("btn pull-right btn-primary");else{if($("#bp-reading").val(t[3].bpreading),$("#pu-reading").val(t[4].pureading),$("#re-reading").val(t[5].rereading),$("#te-reading").val(t[6].tereading),$("#po-reading").val(t[7].poreading),$("#he-reading").val(t[8].hereading),$("#pa-reading").val(t[9].pareading),$("#we-reading").val(t[10].wereading),$("#cv-reading").val(t[11].cvreading),$("#ci-reading").val(t[12].cireading),t[13].teu1btn!==!0&&($("#te-u1-btn").removeClass("btn btn-sm btn-primary").addClass("btn btn-sm btn-default"),$("#te-u2-btn").removeClass("btn btn-sm btn-default").addClass("btn btn-sm btn-primary")),t[14].heu1btn!==!0&&($("#he-u1-btn").removeClass("btn btn-sm btn-primary").addClass("btn btn-sm btn-default"),$("#he-u2-btn").removeClass("btn btn-sm btn-default").addClass("btn btn-sm btn-primary")),t[15].weu1btn!==!0&&($("#we-u1-btn").removeClass("btn btn-sm btn-primary").addClass("btn btn-sm btn-default"),$("#we-u2-btn").removeClass("btn btn-sm btn-default").addClass("btn btn-sm btn-primary")),t[16].cvu1btn!==!0&&($("#cv-u1-btn").removeClass("btn btn-sm btn-primary").addClass("btn btn-sm btn-default"),$("#cv-u2-btn").removeClass("btn btn-sm btn-default").addClass("btn btn-sm btn-primary")),t[17].cvu1btn!==!0&&($("#ci-u1-btn").removeClass("btn btn-sm btn-primary").addClass("btn btn-sm btn-default"),$("#ci-u2-btn").removeClass("btn btn-sm btn-default").addClass("btn btn-sm btn-primary")),t[18].bpqbtn===!0){var n=$("#bp-q-btn");r.selectBtn(n,!0),$("#bp-hide-show").removeClass("hide").addClass("show"),$("#bp-hide-show").css("display","inline"),$("#bp-LOCATION-sel").val(t[19].bpLOCATIONel),$("#bp-METHOD-sel").val(t[20].bpMETHODsel),$("#bp-POSITION-sel").val(t[21].bpPOSITIONsel),$("#bp-CUFF\\ SIZE-sel").val(t[22].bpCUFFSIZEel)}if(t[23].puqbtn===!0){var a=$("#pu-q-btn");r.selectBtn(a,!0),$("#pu-hide-show").removeClass("hide").addClass("show"),$("#pu-hide-show").css("display","inline"),$("#pu-LOCATION-sel").val(t[24].puLOCATIONel),$("#pu-METHOD-sel").val(t[25].puMETHODsel),$("#pu-POSITION-sel").val(t[26].puPOSITIONsel),$("#pu-SITE-sel").val(t[27].puCUFFSIZEel)}if(t[28].reqbtn===!0){var i=$("#re-q-btn");r.selectBtn(i,!0),$("#re-hide-show").removeClass("hide").addClass("show"),$("#re-hide-show").css("display","inline"),$("#re-METHOD-sel").val(t[29].reMETHODsel),$("#re-POSITION-sel").val(t[30].rePOSITIONsel)}if(t[31].teqbtn===!0){var s=$("#te-q-btn");r.selectBtn(s,!0),$("#te-hide-show").removeClass("hide").addClass("show"),$("#te-hide-show").css("display","inline"),$("#te-LOCATION-sel").val(t[32].teLOCATIONsel)}if(t[33].poqbtn===!0){var l=$("#po-q-btn");r.selectBtn(l,!0),$("#po-hide-show").removeClass("hide").addClass("show"),$("#po-hide-show").css("display","inline"),$("#po-fr-text").val(t[34].pofrtext),$("#po-oc-text").val(t[35].pooctext),$("#METHOD-sel").val(t[36].METHODsel)}if(t[37].heqbtn===!0){var u=$("#he-q-btn");r.selectBtn(u,!0),$("#he-hide-show").removeClass("hide").addClass("show"),$("#he-hide-show").css("display","inline"),$("#he-QUALITY-sel").val(t[38].heQUALITYsel)}if(t[39].weqbtn===!0){var o=$("#we-q-btn");r.selectBtn(o,!0),$("#we-hide-show").removeClass("hide").addClass("show"),$("#we-hide-show").css("display","inline"),$("#we-METHOD-sel").val(t[40].weMETHODsel),$("#we-QUALITY-sel").val(t[41].weQUALITYsel)}if(t[42].ciqbtn===!0){var d=$("#ci-q-btn");r.selectBtn(d,!0),$("#ci-hide-show").removeClass("hide").addClass("show"),$("#ci-hide-show").css("display","inline"),$("#ci-LOCATION-sel").val(t[43].ciLOCATIONsel),$("#ci-SITE-sel").val(t[44].ciSITEsel)}O(t[45].bpubtn,t[46].bprbtn,"bp"),O(t[47].puubtn,t[48].purbtn,"pu"),O(t[49].reubtn,t[50].rerbtn,"re"),O(t[51].teubtn,t[52].terbtn,"te"),O(t[53].poubtn,t[54].porbtn,"po"),O(t[55].heubtn,t[56].herbtn,"he"),O(t[57].paubtn,t[58].parbtn,"pa"),O(t[59].weubtn,t[60].werbtn,"we"),O(t[61].cvubtn,t[62].cvrbtn,"cv"),O(t[63].ciubtn,t[64].cirbtn,"ci")}}else setTimeout(e,50)};e()},initVitalsModel:function(){return v(f(),c())},getVisitModel:function(){var t=new e.Model;return t.set("visit",ADK.PatientRecordService.getCurrentPatient().get("visit")),t},getVitalsCollectionModel:function(){return c()},getVitalsModel:function(){return f()},enableLoadingIndicator:function(e){return u(e)},currentObservedDateString:function(){return(new a).format(ADK.utils.dateUtils.defaultOptions().placeholder)}},O=function(e,t,n){var a=$("#"+n+"-u-btn"),i=$("#"+n+"-r-btn");$("#"+n+"-q-btn");r.enableInputs(n+"-",!0),r.enableUnits(n,!0),r.selectBtn($("#"+n+"-q-btn"),!1),(e||t)&&(r.enableUnits(n,!1),r.resetRowQualifierInputs(n),$("#"+n+"-hide-show").css("display","none"),r.enableItem($("#"+n+"-q-btn"),!1),r.enableInputs(n+"-",!1)),e?(r.selectBtn(a,!0),r.selectBtn(i,!1)):r.selectBtn(a,!1),t?(r.selectBtn(i,!0),r.selectBtn(a,!1)):r.selectBtn(i,!1)};return C});