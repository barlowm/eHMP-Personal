define(["backbone","marionette","underscore","hbs!app/applets/addVitals/templates/lowerVitalRowTemplate","hbs!app/applets/addVitals/templates/pulseOximetryLowerTemplate","app/applets/addVitals/utils/modelUtils","app/applets/addVitals/utils/dateTimeUtil","app/applets/addVitals/utils/viewHelper"],function(e,t,a,l,i,s,n,o){"use strict";var d=o;return e.Marionette.ItemView.extend({tagName:"div",events:{"change select":"handleSelect","blur input":"handleInput"},onRender:function(){this.model.get("qual-1-mask")&&(this.model.get("qual-1-regex")?this.$el.find("#"+this.model.get("sname")+"-"+this.model.get("qual-1-sname")+"-text").inputmask("Regex",{regex:this.model.get("qual-1-mask")}):this.$el.find("#"+this.model.get("sname")+"-"+this.model.get("qual-1-sname")+"-text").inputmask(this.model.get("mask"))),this.model.get("qual-2-mask")&&(this.model.get("qual-2-regex")?this.$el.find("#"+this.model.get("sname")+"-"+this.model.get("qual-2-sname")+"-text").inputmask("Regex",{regex:this.model.get("qual-2-mask")}):this.$el.find("#"+this.model.get("sname")+"-"+this.model.get("qual-2-sname")+"-text").inputmask(this.model.get("mask")))},initialize:function(){this.listenTo(this.model,"change:on-pass",this.toggleOnPass),this.listenTo(this.model,"change:qual-1-error",this.updateQualOneError),this.listenTo(this.model,"change:qual-2-error",this.updateQualTwoError)},getTemplate:function(){return"po"===this.model.get("sname")?i:l},handleSelect:function(e){var t=$(e.target).find(":selected").data("fileien"),a=$(e.target).find(":selected").data("category");this.model.setQualifier(a,t)},handleInput:function(e){var t=$(e.target).val();$(e.target).data("name")===this.model.get("qual-1-sname")&&this.model.setFlowRate(t),$(e.target).data("name")===this.model.get("qual-2-sname")&&this.model.setOxiConc(t)},toggleOnPass:function(){var e=this.model.get("on-pass");e&&d.resetAllQualifierInputs()},updateQualifierValue:function(){var e=this.model.getReading();$("#"+this.model.get("sname")+"-reading").val(e)},updateQualOneError:function(){var e=this.model.get("qual-1-error");e?d.showQualifierError(this.model.get("qual-1-sname"),this.model.get("qual-1-hint")):d.hideQualifierError(this.model.get("qual-1-sname"))},updateQualTwoError:function(){var e=this.model.get("qual-2-error");e?d.showQualifierError(this.model.get("qual-2-sname"),this.model.get("qual-2-hint")):d.hideQualifierError(this.model.get("qual-2-sname"))}})});