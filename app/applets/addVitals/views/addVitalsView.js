define(["backbone","marionette","jquery","handlebars","app/applets/addVitals/utils/modelUtils","app/applets/addVitals/utils/picklistUtil","app/applets/addVitals/utils/validationUtil","app/applets/addVitals/utils/writebackUtil"],function(e,t,i,o,a,s,l,n){var r={buildView:function(){var e=this,t={type:"GET",url:"resource/write-pick-list",data:{type:"vitals",site:"9E7A"},dataType:"json"},o=i.ajax(t);o.done(function(t){if(t&&t.data){var i=t.data;e.vitalsIENMap=s.getIENMap(i),e.bloodPressureLocations=s.getQualifier(i,"BLOOD PRESSURE","LOCATION"),e.bloodPressureMethods=s.getQualifier(i,"BLOOD PRESSURE","METHOD"),e.bloodPressurePositions=s.getQualifier(i,"BLOOD PRESSURE","POSITION"),e.bloodPressureCuffSizes=s.getQualifier(i,"BLOOD PRESSURE","CUFF SIZE"),e.tempLocations=s.getQualifier(i,"TEMPERATURE","LOCATION"),e.respMethods=s.getQualifier(i,"RESPIRATION","METHOD"),e.respPositions=s.getQualifier(i,"RESPIRATION","POSITION"),e.pulseLocations=s.getQualifier(i,"PULSE","LOCATION"),e.pulseMethods=s.getQualifier(i,"PULSE","METHOD"),e.pulsePositions=s.getQualifier(i,"PULSE","POSITION"),e.pulseSites=s.getQualifier(i,"PULSE","SITE"),e.heightQualities=s.getQualifier(i,"HEIGHT","QUALITY"),e.weightMethods=s.getQualifier(i,"WEIGHT","METHOD"),e.weightQualities=s.getQualifier(i,"WEIGHT","QUALITY"),e.circumferenceLocations=s.getQualifier(i,"CIRCUMFERENCE/GIRTH","LOCATION"),e.circumferenceSites=s.getQualifier(i,"CIRCUMFERENCE/GIRTH","SITE"),e.pulseOximetryMethods=s.getQualifier(i,"PULSE OXIMETRY","METHOD")}e.createForm()})},createForm:function(){function t(e){var t=i(e).attr("data-target"),o=_.findWhere(X,{target:t});o.collapsed=!o.collapsed;var a=!0;_.each(X,function(e){e.collapsed===!0&&(a=!1)}),a?z.set({expandCollapseAll:!0}):(z.set({expandCollapseAll:!1},{silent:!0}),i("#expandCollapseAll").attr("checked",!1))}var a={control:"container",extraClasses:["row"],items:[{control:"container",extraClasses:["col-xs-12"],template:o.compile("<p>* indidcates a required field</p>")}]},s={control:"container",extraClasses:["row"],items:[{control:"container",extraClasses:["col-xs-12"],items:[{control:"container",extraClasses:["col-xs-5"],items:[{control:"datepicker",name:"dateTakenInput",title:"Please enter in a date in the following format, MM/DD/YYYY",label:"Date Taken",required:!0,options:{endDate:"0d"}}]},{control:"container",extraClasses:["col-xs-5"],items:[{control:"timepicker",name:"time-taken",title:"Please enter in a time in the following format, HH:MM",label:"Time Taken",options:{defaultTime:!1}}]},{control:"container",extraClasses:["col-xs-2"],items:[{control:"checkbox",title:"To select this checkbox, press the spacebar",name:"facility-name-pass-po",label:"Pass",extraClasses:["pull-right"]}]},{control:"spacer"}]}]},p={control:"container",extraClasses:["row"],items:[{control:"container",extraClasses:["col-xs-12"],items:[{control:"checkbox",label:"Open All",name:"expandCollapseAll",extraClasses:["pull-right"],title:"To select this checkbox, press the spacebar"}]}]},c={control:"container",items:[{control:"container",extraClasses:["col-xs-8","bpInput"],items:[{control:"input",name:"bpInputValue",label:"Blood Pressure",title:"Please enter in a numeric value",units:"mm[HG]"}]},{control:"container",extraClasses:["col-xs-4"],items:[{control:"checkbox",label:"Unavailable",title:"To select this checkbox, press the spacebar",name:"bp-unavailable-po"},{control:"checkbox",label:"Refused",title:"To select this checkbox, press the spacebar",name:"bp-refused-po"}]}]},u={control:"container",items:[{control:"select",name:"bp-location-po",label:"Location",title:"To select an option, use the up and down arrow keys then press enter to select",extraClasses:["col-xs-6"],pickList:this.bloodPressureLocations},{control:"select",name:"bp-method-po",label:"Method",title:"To select an option, use the up and down arrow keys then press enter to select",extraClasses:["col-xs-6"],pickList:this.bloodPressureMethods},{control:"select",label:"Cuff Size",title:"To select an option, use the up and down arrow keys then press enter to select",name:"bp-cuff-size-po",extraClasses:["col-xs-6"],pickList:this.bloodPressureCuffSizes},{control:"select",label:"Position",title:"To select an option, use the up and down arrow keys then press enter to select",name:"bp-position-po",extraClasses:["col-xs-6"],pickList:this.bloodPressurePositions}]},h={control:"collapsibleContainer",name:"bpSection",headerItems:[c],collapseItems:[u]},d={control:"container",items:[{control:"container",extraClasses:["col-xs-8"],items:[{control:"input",label:"Pulse",name:"pulseInputValue",units:"/min",title:"Please enter in a numeric value"}]},{control:"container",extraClasses:["col-xs-4"],items:[{control:"checkbox",label:"Unavailable",title:"To select this checkbox, press the spacebar",name:"pulse-unavailable-po"},{control:"checkbox",label:"Refused",title:"To select this checkbox, press the spacebar",name:"pulse-refused-po"}]}]},b={control:"container",items:[{control:"select",name:"pulse-method-po",label:"Method",title:"To select an option, use the up and down arrow keys then press enter to select",extraClasses:["col-xs-6"],pickList:this.pulseMethods},{control:"select",name:"pulse-position-po",label:"Position",title:"To select an option, use the up and down arrow keys then press enter to select",extraClasses:["col-xs-6"],pickList:this.pulsePositions},{control:"select",name:"pulse-site-po",label:"Site",title:"To select an option, use the up and down arrow keys then press enter to select",extraClasses:["col-xs-6"],pickList:this.pulseSites},{control:"select",name:"pulse-location-po",label:"Location",title:"To select an option, use the up and down arrow keys then press enter to select",extraClasses:["col-xs-6"],pickList:this.pulseLocations}]},m={control:"collapsibleContainer",name:"pulseSection",headerItems:[d],collapseItems:[b]},g={control:"container",items:[{control:"container",extraClasses:["col-xs-8"],items:[{control:"input",label:"Respiration",units:"/min",title:"Please enter in a numeric value",name:"respirationInputValue"}]},{control:"container",extraClasses:["col-xs-4"],items:[{control:"checkbox",label:"Unavailable",title:"To select this checkbox, press the spacebar",name:"respiration-unavailable-po"},{control:"checkbox",label:"Refused",title:"To select this checkbox, press the spacebar",name:"respiration-refused-po"}]}]},f={control:"container",items:[{control:"select",name:"respiration-method-po",label:"Method",title:"To select an option, use the up and down arrow keys then press enter to select",extraClasses:["col-xs-6"],pickList:this.respMethods},{control:"select",name:"respiration-position-po",label:"Position",title:"To select an option, use the up and down arrow keys then press enter to select",extraClasses:["col-xs-6"],pickList:this.respPositions}]},P={control:"collapsibleContainer",name:"respirationSection",headerItems:[g],collapseItems:[f]},x={control:"container",items:[{control:"container",extraClasses:["col-xs-8"],items:[{control:"input",name:"temperatureInputValue",label:"Temperature",title:"Please enter in a numeric value",units:[{label:"F",value:"F",title:"fahrenheit"},{label:"C",value:"C",title:"celsius"}]}]},{control:"container",extraClasses:["col-xs-4"],items:[{control:"checkbox",label:"Unavailable",title:"To select this checkbox, press the spacebar",name:"temperature-unavailable-po"},{control:"checkbox",label:"Refused",title:"To select this checkbox, press the spacebar",name:"temperature-refused-po"}]}]},v={control:"container",extraClasses:["col-xs-12"],items:[{control:"select",label:"Location",title:"To select an option, use the up and down arrow keys then press enter to select",name:"temperature-location-po",pickList:this.tempLocations}]},k={control:"collapsibleContainer",name:"temperatureSection",headerItems:[x],collapseItems:[v]},w={control:"container",items:[{control:"container",extraClasses:["col-xs-8"],items:[{control:"input",name:"O2InputValue",label:"Pulse Oximetry",title:"Please enter in a numeric value",units:"%"}]},{control:"container",extraClasses:["col-xs-4"],items:[{control:"checkbox",label:"Unavailable",title:"To select this checkbox, press the spacebar",name:"po-unavailable-po"},{control:"checkbox",label:"Refused",title:"To select this checkbox, press the spacebar",name:"po-refused-po"}]}]},C={control:"container",items:[{control:"input",label:"Supplemental Oxygen Flow Rate",name:"suppO2InputValue",units:"(liters/minute)",title:"Please enter in a numeric value",extraClasses:["col-xs-6"]},{control:"select",label:"Method",name:"po-method-po",title:"To select an option, use the up and down arrow keys then press enter to select",extraClasses:["col-xs-6"],pickList:this.pulseOximetryMethods}]},I={control:"collapsibleContainer",name:"poSection",headerItems:[w],collapseItems:[C]},V={control:"container",items:[{control:"container",extraClasses:["col-xs-8"],items:[{control:"input",name:"heightInputValue",label:"Height",title:"Please enter in a numeric value",units:[{label:"in",value:"in",title:"inches"},{label:"cm",value:"cm",title:"centimeters"}]}]},{control:"container",extraClasses:["col-xs-4"],items:[{control:"checkbox",label:"Unavailable",title:"To select this checkbox, press the spacebar",name:"height-unavailable-po"},{control:"checkbox",label:"Refused",title:"To select this checkbox, press the spacebar",name:"height-refused-po"}]}]},R={control:"container",extraClasses:["col-xs-12"],items:[{control:"select",label:"Quality",name:"height-quality-po",title:"To select an option, use the up and down arrow keys then press enter to select",pickList:this.heightQualities}]},U={control:"collapsibleContainer",name:"heightSection",headerItems:[V],collapseItems:[R]},y={control:"container",items:[{control:"container",extraClasses:["col-xs-8"],items:[{control:"input",name:"weightInputValue",label:"Weight",title:"Please enter in a numeric value",units:[{label:"lb",value:"lb",title:"lb Units"},{label:"kg",value:"kg",title:"kg Units"}]}]},{control:"container",extraClasses:["col-xs-4"],items:[{control:"checkbox",label:"Unavailable",title:"To select this checkbox, press the spacebar",name:"weight-unavailable-po"},{control:"checkbox",label:"Refused",title:"To select this checkbox, press the spacebar",name:"weight-refused-po"}]}]},T={control:"container",items:[{control:"select",name:"weight-method-po",label:"Method",title:"To select an option, use the up and down arrow keys then press enter to select",extraClasses:["col-xs-6"],pickList:this.weightMethods},{control:"select",name:"weight-quality-po",label:"Quality",title:"To select an option, use the up and down arrow keys then press enter to select",extraClasses:["col-xs-6"],pickList:this.weightQualities}]},S={control:"collapsibleContainer",name:"weightSection",headerItems:[y],collapseItems:[T]},M={control:"container",extraClasses:["row"],items:[{control:"container",extraClasses:["col-xs-8"],items:[{control:"container",extraClasses:["col-xs-6"],items:[{control:"input",name:"pain-value-po",label:"Pain",placeholder:"0-10",title:"Please enter in a numeric value for pain from 0 to 10, 0 being no pain and 10 being the greatest amount of pain"}]},{control:"container",extraClasses:["col-xs-6"],items:[{control:"checkbox",label:"Unable to Respond",name:"pain-checkbox-po",title:"To select this checkbox, press the spacebar"}]}]},{control:"container",extraClasses:["col-xs-4"],items:[{control:"checkbox",label:"Unavailable",title:"To select this checkbox, press the spacebar",name:"pain-unavailable-po"},{control:"checkbox",label:"Refused",title:"To select this checkbox, press the spacebar",name:"pain-refused-po"}]}]},$={control:"container",items:[{control:"container",extraClasses:["col-xs-8"],items:[{control:"input",label:"Circumference/Girth",name:"circumValue",title:"Please enter in a numeric value",units:[{label:"in",value:"in",title:"in Units"},{label:"cm",value:"cm",title:"cm Units"}]}]},{control:"container",extraClasses:["col-xs-4"],items:[{control:"checkbox",label:"Unavailable",title:"To select this checkbox, press the spacebar",name:"cg-unavailable-po"},{control:"checkbox",label:"Refused",title:"To select this checkbox, press the spacebar",name:"cg-refused-po"}]}]},A={control:"container",items:[{control:"select",name:"cg-site-po",label:"Site",title:"To select an option, use the up and down arrow keys then press enter to select",extraClasses:["col-xs-6"],pickList:this.circumferenceSites},{control:"select",label:"Location",name:"cg-location-po",title:"To select an option, use the up and down arrow keys then press enter to select",extraClasses:["col-xs-6"],pickList:this.circumferenceLocations}]},D={control:"collapsibleContainer",name:"cgSection",headerItems:[$],collapseItems:[A]},L=[{control:"container",extraClasses:["modal-body"],items:[{control:"container",extraClasses:["scroll-enter-form"],items:[a,s,p,h,m,P,k,I,U,S,M,D]}]},{control:"container",extraClasses:["modal-footer"],items:[{control:"container",extraClasses:["row"],items:[{control:"container",extraClasses:["col-xs-3"],template:o.compile('<p><span id="observation-saved-at3">Saved at {{savedTime}}</span></p>'),modelListeners:["savedTime"]},{control:"container",extraClasses:["col-xs-9"],items:[{control:"button",id:"form-cancel-btn",extraClasses:["btn-icon","btn-sm"],type:"button",label:"Cancel",title:"Press enter to leave the form without making any changes"},{control:"button",id:"form-saveAndClose-btn",extraClasses:["btn-primary","btn-sm"],label:"Save & Close",type:"button",icon:"fa-floppy-o",title:"Press enter to leave the form without making any changes"},{control:"button",extraClasses:["btn-primary","btn-sm"],label:"Submit",id:"form-submit-btn",icon:"fa-check-square-o",title:"Press enter to submit changes in the form"}]}]}]}],E=e.Model.extend({defaults:{facilityName:"D.C. VA Hospital",savedTime:"00:00",dateTakenInput:moment().format("MM/DD/YYYY"),"time-taken":"",expandCollapseAll:!1,errorModel:new e.Model},validate:function(e,t){return l.validateModel(this)}}),O=new ADK.UI.Notification({title:"Vitals Submitted",icon:"fa-check",message:"Vitals successfully submitted with no errors."}),Q=e.Marionette.ItemView.extend({template:o.compile("You will lose your progress if you cancel..  Would you like to proceed with ending this observation?"),tagName:"p"}),F=e.Marionette.ItemView.extend({template:o.compile("Your progress will be saved and remain in draft status. Would you like to proceed with closing this observation?"),tagName:"p"}),N=e.Marionette.ItemView.extend({template:o.compile('{{ui-button "Cancel" classes="btn-default" title="Click button to cancel your action!"}}{{ui-button "Continue" classes="btn-primary" title="Click button to continue your action!"}}'),events:{"click .btn-primary":function(){ADK.UI.Alert.hide(),ADK.UI.Workflow.hide()},"click .btn-default":function(){ADK.UI.Alert.hide()}},tagName:"span"}),K=e.Marionette.ItemView.extend({template:o.compile("We're sorry. There was an error submitting your form."),tagName:"p"}),H=e.Marionette.ItemView.extend({template:o.compile('{{ui-button "Ok" classes="btn-primary" title="Click button to close modal"}}'),events:{"click .btn-primary":function(){ADK.UI.Alert.hide();var e=j.getFormView(0);e.$(e.ui.submitButton).trigger("control:disabled",!1)}},tagName:"span"}),q=e.Marionette.ItemView.extend({template:o.compile('{{ui-button "Cancel" classes="btn-default" title="Click button to cancel your action!"}}{{ui-button "Submit" classes="btn-primary" title="Click button to save vitals!"}}'),events:{"click .btn-primary":function(){ADK.UI.Alert.hide(),n.addVitals(z,r.vitalsIENMap,function(){O.show(),ADK.UI.Workflow.hide(),setTimeout(function(){ADK.ResourceService.clearAllCache("vital");var e=ADK.Messaging.getChannel("vitals");e.request("refreshGridView")},2e3)},function(){var e=new ADK.UI.Alert({title:"System 500 Error",icon:"fa-exclamation-triangle",messageView:K,footerView:H});e.show()})},"click .btn-default":function(){var e=j.getFormView(0);e.$(e.ui.submitButton).trigger("control:disabled",!1),ADK.UI.Alert.hide()}},tagName:"span"}),B=e.Marionette.ItemView.extend({template:o.compile("No data entered for patient "+ADK.PatientRecordService.getCurrentPatient().get("displayName")+". Close the window?"),tagName:"p"}),W=e.Marionette.ItemView.extend({template:o.compile('{{ui-button "No" classes="btn-default" title="Click button to cancel your action"}}{{ui-button "Yes" classes="btn-primary" title="Click button to save vitals"}}'),events:{"click .btn-primary":function(){ADK.UI.Alert.hide(),ADK.UI.Workflow.hide()},"click .btn-default":function(){ADK.UI.Alert.hide()}},tagName:"span"}),Y=ADK.UI.Form.extend({ui:{bpValueInput:"#bpInputValue",bpUnavailablePo:"#bp-unavailable-po",bpRefusedPo:"#bp-refused-po",bpLocationPo:"#bp-location-po",bpMethodPo:"#bp-method-po",bpCuffSizePo:"#bp-cuff-size-po",bpPositionPo:"#bp-position-po",pulseValue:"#pulseInputValue",pulseUnavailablePo:"#pulse-unavailable-po",pulseRefusedPo:"#pulse-refused-po",pulseLocationPo:"#pulse-location-po",pulseMethodPo:"#pulse-method-po",pulsePositionPo:"#pulse-position-po",pulseSitePo:"#pulse-site-po",respInputValue:"#respirationInputValue",respUnavailablePo:"#respiration-unavailable-po",respRefusedPo:"#respiration-refused-po",respMethodPo:"#respiration-method-po",respPositionPo:"#respiration-position-po",tempValuePo:"#temperatureInputValue",tempUnavailablePo:"#temperature-unavailable-po",tempRefusedPo:"#temperature-refused-po",tempLocationPo:"#temperature-location-po",tempValueRadioF:"#temperatureInputValue-F-radio",tempValueRadioC:"#temperatureInputValue-C-radio",poMeasurementPo:"#suppO2InputValue",poConcentrationPo:"#O2InputValue",poMethodPo:"#po-method-po",poUnavailablePo:"#po-unavailable-po",poRefusedPo:"#po-refused-po",heightInputValue:"#heightInputValue",heightUnavailablePo:"#height-unavailable-po",heightRefusedPo:"#height-refused-po",heightQualityPo:"#heightQuality",heightRadioInputIn:"#heightInputValue-in-radio",heightRadioInputCm:"#heightInputValue-cm-radio",weightInputValue:"#weightInputValue",weightUnavailablePo:"#weight-unavailable-po",weightRefusedPo:"#weight-refused-po",weightQualityPo:"#weight-quality-po",weightMethodPo:"#weight-method-po",weightRadioInputLb:"#weightInputValue-lb-radio",weightRadioInputKg:"#weightInputValue-kg-radio",painValuePo:"#pain-value-po",painUnavailablePo:"#pain-unavailable-po",painRefusedPo:"#pain-refused-po",painUnableToRespond:"#pain-checkbox-po",circumValueInput:"#circumValue",circumSitePo:"#cg-site-po",circumLocationPo:"#cg-location-po",circumUnavailablePo:"#cg-unavailable-po",circumRefusedPo:"#cg-refused-po",circumValueInRadio:"#circumValue-in-radio",circumValueCmRadio:"#circumValue-cm-radio",allValueFields:".bpInputValue, .pulseInputValue, .respirationInputValue, .temperatureInputValue, .O2InputValue, .heightInputValue, .weightInputValue, .pain-value-po, .pain-checkbox-po, .circumValue",allRadioButtons:".bp-radio-po, .pulse-radio-po, .respiration-radio-po, .temperature-radio-po, .po-radio-po, .height-radio-po, .weight-radio-po, .pain-radio-po, .cg-radio-po",bpFields:".bp-location-po, .bp-method-po, .bp-cuff-size-po, .bp-position-po",pulseFields:".pulse-location-po, .pulse-method-po, .pulse-position-po, .pulse-site-po",respirationFields:".respiration-method-po, .respiration-position-po",tempLocation:".temperature-location-po",poFields:".suppO2InputValue, .po-method-po",heightQuality:".height-quality-po",weightFields:".weight-quality-po, .weight-method-po",cgFields:".cg-site-po, .cg-location-po",expandCollapseAll:".expandCollapseAll",allUnavailableBoxes:".bp-unavailable-po, .pulse-unavailable-po, .respiration-unavailable-po, .temperature-unavailable-po, .height-unavailable-po, .weight-unavailable-po, .po-unavailable-po, .pain-unavailable-po, .cg-unavailable-po",allRefusedBoxes:".bp-refused-po, .pulse-refused-po, .respiration-refused-po, .temperature-refused-po, .height-refused-po, .weight-refused-po, .po-refused-po, .pain-refused-po, .cg-refused-po",allCollapsibleContainers:".bpSection, .temperatureSection, .pulseSection, .respirationSection, .poSection, .heightSection, .weightSection, .cgSection",submitButton:"#form-submit-btn"},fields:L,events:{"click #form-cancel-btn":function(e){e.preventDefault();var t=new ADK.UI.Alert({title:"Are you sure you want to cancel?",icon:"fa-exclamation-triangle",messageView:Q,footerView:N});t.show()},"click #form-saveAndClose-btn":function(e){e.preventDefault();var t=new ADK.UI.Alert({title:"Are you sure you want to close this form?",icon:"fa-exclamation-triangle",messageView:F,footerView:N});t.show()},submit:function(t){var i=this;if(t.preventDefault(),l.areAllDataFieldsEmpty(i.model)){var a=new ADK.UI.Alert({title:"No Data Entered",icon:"fa-exclamation-triangle",messageView:B,footerView:W});return void a.show()}this.model.isValid()?(this.model.unset("formStatus"),this.$(this.ui.submitButton).trigger("control:disabled",!0),l.validateHistorical(this.model,function(t,a){if(t){var s=e.Marionette.ItemView.extend({template:o.compile(a),tagName:"p"}),l=new ADK.UI.Alert({title:"Height/Weight Warnings Exist",icon:"fa-exclamation-triangle",messageView:s,footerView:q});l.show()}else n.addVitals(i.model,r.vitalsIENMap,function(){O.show(),ADK.UI.Workflow.hide(),setTimeout(function(){ADK.ResourceService.clearAllCache("vital");var e=ADK.Messaging.getChannel("vitals");e.request("refreshGridView")},2e3)},function(){var e=new ADK.UI.Alert({title:"System 500 Error",icon:"fa-exclamation-triangle",messageView:K,footerView:H});e.show()})})):this.model.set("formStatus",{status:"error",message:i.model.validationError});var s=function(){var e=new Date,t="",i="";return t=e.getHours()<10?"0"+e.getHours():e.getHours(),i=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),t+":"+i};return this.model.set("savedTime",s()),!1}},modelEvents:{"change:cg-unavailable-po":function(e){this.$(this.ui.circumRefusedPo).prop("checked")?(this.$(this.ui.circumRefusedPo).attr("checked",!1),this.model.set({"cg-refused-po":!1},{silent:!0})):this.toggleDisabled(this.$(this.ui.circumUnavailablePo).prop("checked"),[this.ui.circumValueInput,this.ui.circumSitePo,this.ui.circumLocationPo,this.ui.circumValueInRadio,this.ui.circumValueCmRadio],["circumValue","cg-location-po","cg-location-po"])},"change:cg-refused-po":function(e){this.$(this.ui.circumUnavailablePo).prop("checked")?(this.$(this.ui.circumUnavailablePo).attr("checked",!1),this.model.set({"cg-unavailable-po":!1},{silent:!0})):this.toggleDisabled(this.$(this.ui.circumRefusedPo).prop("checked"),[this.ui.circumValueInput,this.ui.circumSitePo,this.ui.circumLocationPo,this.ui.circumValueInRadio,this.ui.circumValueCmRadio],["circumValue","cg-location-po","cg-location-po"])},"change:bp-unavailable-po":function(e){this.$(this.ui.bpRefusedPo).prop("checked")?(this.$(this.ui.bpRefusedPo).attr("checked",!1),this.model.set({"bp-refused-po":!1},{silent:!0})):this.toggleDisabled(this.$(this.ui.bpUnavailablePo).prop("checked"),[this.ui.bpValueInput,this.ui.bpLocationPo,this.ui.bpMethodPo,this.ui.bpCuffSizePo,this.ui.bpPositionPo],["bp-cuff-size-po","bp-location-po","bp-method-po","bp-position-po","bpInputValue"])},"change:bp-refused-po":function(e){this.$(this.ui.bpUnavailablePo).prop("checked")?(this.$(this.ui.bpUnavailablePo).attr("checked",!1),this.model.set({"bp-unavailable-po":!1},{silent:!0})):this.toggleDisabled(this.$(this.ui.bpRefusedPo).prop("checked"),[this.ui.bpValueInput,this.ui.bpLocationPo,this.ui.bpMethodPo,this.ui.bpCuffSizePo,this.ui.bpPositionPo],["bp-cuff-size-po","bp-location-po","bp-method-po","bp-position-po","bpInputValue"])},"change:pulse-unavailable-po":function(e){this.$(this.ui.pulseRefusedPo).prop("checked")?(this.$(this.ui.pulseRefusedPo).attr("checked",!1),this.model.set({"pulse-refused-po":!1},{silent:!0})):this.toggleDisabled(this.$(this.ui.pulseUnavailablePo).prop("checked"),[this.ui.pulseValue,this.ui.pulseLocationPo,this.ui.pulseMethodPo,this.ui.pulsePositionPo,this.ui.pulseSitePo],["pulse-location-po","pulse-method-po","pulse-position-po","pulseInputValue","pulseInputValue"])},"change:pulse-refused-po":function(e){this.$(this.ui.pulseUnavailablePo).prop("checked")?(this.$(this.ui.pulseUnavailablePo).attr("checked",!1),this.model.set({"pulse-unavailable-po":!1},{silent:!0})):this.toggleDisabled(this.$(this.ui.pulseRefusedPo).prop("checked"),[this.ui.pulseValue,this.ui.pulseLocationPo,this.ui.pulseMethodPo,this.ui.pulsePositionPo,this.ui.pulseSitePo],["pulse-location-po","pulse-method-po","pulse-position-po","pulse-site-po","pulseInputValue"])},"change:respiration-unavailable-po":function(e){this.$(this.ui.respRefusedPo).prop("checked")?(this.$(this.ui.respRefusedPo).attr("checked",!1),this.model.set({"respiration-refused-po":!1},{silent:!0})):this.toggleDisabled(this.$(this.ui.respUnavailablePo).prop("checked"),[this.ui.respInputValue,this.ui.respMethodPo,this.ui.respPositionPo],["respiration-method-po","respiration-position-po","respirationInputValue"])},"change:respiration-refused-po":function(e){this.$(this.ui.respUnavailablePo).prop("checked")?(this.$(this.ui.respUnavailablePo).attr("checked",!1),this.model.set({"respiration-unavailable-po":!1},{silent:!0})):this.toggleDisabled(this.$(this.ui.respRefusedPo).prop("checked"),[this.ui.respInputValue,this.ui.respMethodPo,this.ui.respPositionPo],["respiration-method-po","respiration-position-po","respirationInputValue"])},"change:temperature-unavailable-po":function(e){this.$(this.ui.tempRefusedPo).prop("checked")?(this.$(this.ui.tempRefusedPo).attr("checked",!1),this.model.set({"temperature-refused-po":!1},{silent:!0})):this.toggleDisabled(this.$(this.ui.tempUnavailablePo).prop("checked"),[this.ui.tempValuePo,this.ui.tempLocationPo,this.ui.tempValueRadioC,this.ui.tempValueRadioF],["temperature-location-po","temperatureInputValue"])},"change:temperature-refused-po":function(e){this.$(this.ui.tempUnavailablePo).prop("checked")?(this.$(this.ui.tempUnavailablePo).attr("checked",!1),this.model.set({"temperature-unavailable-po":!1},{silent:!0})):this.toggleDisabled(this.$(this.ui.tempRefusedPo).prop("checked"),[this.ui.tempValuePo,this.ui.tempLocationPo,this.ui.tempValueRadioC,this.ui.tempValueRadioF],["temperature-location-po","temperatureInputValue"])},"change:po-unavailable-po":function(e){this.$(this.ui.poRefusedPo).prop("checked")?(this.$(this.ui.poRefusedPo).attr("checked",!1),this.model.set({"po-refused-po":!1},{silent:!0})):this.toggleDisabled(this.$(this.ui.poUnavailablePo).prop("checked"),[this.ui.poConcentrationPo,this.ui.poMeasurementPo,this.ui.poMethodPo],["O2InputValue","suppO2InputValue","po-method-po"])},"change:po-refused-po":function(e){this.$(this.ui.poUnavailablePo).prop("checked")?(this.$(this.ui.poUnavailablePo).attr("checked",!1),this.model.set({"po-unavailable-po":!1},{silent:!0})):this.toggleDisabled(this.$(this.ui.poRefusedPo).prop("checked"),[this.ui.poConcentrationPo,this.ui.poMeasurementPo,this.ui.poMethodPo],["O2InputValue","suppO2InputValue","po-method-po"])},"change:height-unavailable-po":function(e){this.$(this.ui.heightRefusedPo).prop("checked")?(this.$(this.ui.heightRefusedPo).attr("checked",!1),this.model.set({"height-refused-po":!1},{silent:!0})):this.toggleDisabled(this.$(this.ui.heightUnavailablePo).prop("checked"),[this.ui.heightInputValue,this.ui.heightQuality,this.ui.heightRadioInputCm,this.ui.heightRadioInputIn],["heightInputValue","height-quality-po"])},"change:height-refused-po":function(e){this.$(this.ui.heightUnavailablePo).prop("checked")?(this.$(this.ui.heightUnavailablePo).attr("checked",!1),this.model.set({"height-unavailable-po":!1},{silent:!0})):this.toggleDisabled(this.$(this.ui.heightRefusedPo).prop("checked"),[this.ui.heightInputValue,this.ui.heightQuality,this.ui.heightRadioInputCm,this.ui.heightRadioInputIn],["heightInputValue","height-quality-po"])},"change:weight-unavailable-po":function(e){this.$(this.ui.weightRefusedPo).prop("checked")?(this.$(this.ui.weightRefusedPo).attr("checked",!1),this.model.set({"weight-refused-po":!1},{silent:!0})):this.toggleDisabled(this.$(this.ui.weightUnavailablePo).prop("checked"),[this.ui.weightInputValue,this.ui.weightMethodPo,this.ui.weightQualityPo,this.ui.weightRadioInputKg,this.ui.weightRadioInputLb],["weight-method-po","weight-quality-po","weightInputValue"])},"change:weight-refused-po":function(e){this.$(this.ui.weightUnavailablePo).prop("checked")?(this.$(this.ui.weightUnavailablePo).attr("checked",!1),this.model.set({"weight-unavailable-po":!1},{silent:!0})):this.toggleDisabled(this.$(this.ui.weightRefusedPo).prop("checked"),[this.ui.weightInputValue,this.ui.weightMethodPo,this.ui.weightQualityPo,this.ui.weightRadioInputKg,this.ui.weightRadioInputLb],["weight-method-po","weight-quality-po","weightInputValue"])},"change:pain-unavailable-po":function(e){this.$(this.ui.painRefusedPo).prop("checked")?(this.$(this.ui.painRefusedPo).attr("checked",!1),this.model.set({"pain-refused-po":!1},{silent:!0})):this.toggleDisabled(this.$(this.ui.painUnavailablePo).prop("checked"),[this.ui.painValuePo,this.ui.painUnableToRespond],["pain-value-po","pain-checkbox-po"])},"change:pain-refused-po":function(e){this.$(this.ui.painUnavailablePo).prop("checked")?(this.$(this.ui.painUnavailablePo).attr("checked",!1),this.model.set({"pain-unavailable-po":!1},{silent:!0})):this.toggleDisabled(this.$(this.ui.painRefusedPo).prop("checked"),[this.ui.painValuePo,this.ui.painUnableToRespond],["pain-value-po","pain-checkbox-po"])},"change:pain-checkbox-po":function(e){this.model.unset("pain-value-po"),this.model.errorModel.clear(),this.$(this.ui.painValuePo).trigger("control:disabled",this.model.get("pain-checkbox-po"))},"change:facility-name-pass-po":function(e){var t=this.model.get("facility-name-pass-po");t&&this.unsetModelProperties(),this.$(this.ui.allValueFields).trigger("control:disabled",t),this.$(this.ui.allRadioButtons).trigger("control:disabled",t),this.$(this.ui.bpFields).trigger("control:disabled",t),this.$(this.ui.pulseFields).trigger("control:disabled",t),this.$(this.ui.respirationFields).trigger("control:disabled",t),this.$(this.ui.tempLocation).trigger("control:disabled",t),this.$(this.ui.poFields).trigger("control:disabled",t),this.$(this.ui.heightQuality).trigger("control:disabled",t),this.$(this.ui.weightFields).trigger("control:disabled",t),this.$(this.ui.cgFields).trigger("control:disabled",t),this.$(this.ui.allUnavailableBoxes).trigger("control:disabled",t),this.$(this.ui.allRefusedBoxes).trigger("control:disabled",t)},"change:expandCollapseAll":function(){var e=this.model;this.$(this.ui.allCollapsibleContainers).trigger("control:collapsed",!e.get("expandCollapseAll")),_.each(X,function(t){t.collapsed=!e.get("expandCollapseAll")})}},toggleDisabled:function(e,t,i){this.model.errorModel.clear();var o=this;e&&_.each(i,function(e){o.model.unset(e,{silent:!0})}),_.each(t,function(t){e&&!o.$(t).is('input[type="radio"]')&&o.$(t).val(""),o.$(t).trigger("control:disabled",e)})},unsetModelProperties:function(){var e=this.model;_.each(e.attributes,function(t,i){"dateTakenInput"!==i&&"time-taken"!==i&&"facility-name-pass-po"!==i&&"errorModel"!==i&&"savedTime"!==i&&"expandCollapseAll"!==i&&e.unset(i)})}}),z=new E,G={size:"large",title:"Enter Vitals",showProgress:!1,keyboard:!0,steps:[{view:Y,viewModel:z,stepTitle:"Step 1"}]},j=new ADK.UI.Workflow(G);j.show();var X=[{target:"#collapsibleContainerCollapseRegion-bpSection",collapsed:!0},{target:"#collapsibleContainerCollapseRegion-pulseSection",collapsed:!0},{target:"#collapsibleContainerCollapseRegion-respirationSection",collapsed:!0},{target:"#collapsibleContainerCollapseRegion-temperatureSection",collapsed:!0},{target:"#collapsibleContainerCollapseRegion-poSection",collapsed:!0},{target:"#collapsibleContainerCollapseRegion-heightSection",collapsed:!0},{target:"#collapsibleContainerCollapseRegion-weightSection",collapsed:!0},{target:"#collapsibleContainerCollapseRegion-cgSection",collapsed:!0}],Z='button[data-target="#collapsibleContainerCollapseRegion-bpSection"], button[data-target="#collapsibleContainerCollapseRegion-pulseSection"], button[data-target="#collapsibleContainerCollapseRegion-respirationSection"], button[data-target="#collapsibleContainerCollapseRegion-temperatureSection"], button[data-target="#collapsibleContainerCollapseRegion-poSection"], button[data-target="#collapsibleContainerCollapseRegion-heightSection"], button[data-target="#collapsibleContainerCollapseRegion-weightSection"], button[data-target="#collapsibleContainerCollapseRegion-cgSection"]';
i(Z).on("click",function(e){t(this)})}};return r});