define(["backbone","handlebars"],function(e,t){var i=e.Marionette.ItemView.extend({tagName:"option",className:"list-group-item row-layout simple",template:t.compile("{{name}}"),onShow:function(){this.$el.val(this.model.get("siteCode"))}}),o=e.Marionette.CompositeView.extend({template:t.compile('<option class="{{cssClass}}" selected="selected" value="noneSelected">{{message}}</option>'),childView:i,tagName:"select",className:"form-control",modelEvents:{change:"render","change:disabled":"updateDisabled"},attributes:{name:"facility",id:"facility",disabled:!0},initialize:function(t){this.parentView=t.parentView,this.collection=new e.Collection,this.model=new e.Model({message:"Loading facilities...",disabled:!0,cssClass:""})},onShow:function(){var e=this,t={resourceTitle:"authentication-list",cache:!1,onError:function(t){window.console&&window.console.log&&console.log("Error loading facility list",t),e.model.set({message:"Server error while trying to load list of facilities.",disabled:!0,cssClass:"bg-danger"}),e.parentView.$el.find("#errorMessage").html("Unable to login due to server error. Status code: "+t.status)},onSuccess:function(){e.model.set({message:"Select a facility...",disabled:!1})}};ADK.ResourceService.fetchCollection(t,this.collection)},updateDisabled:function(){this.$el.attr("disabled",this.model.get("disabled"))}});return o});